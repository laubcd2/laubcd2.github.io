<!DOCTYPE html>
<!--
    游戏作者：bilibili@Warma
    游戏内原资源文件由bilibili@Warma拥有！
-->
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<title>我的小鲨鱼</title> <!--如果你是mod作者，你可以修改这里的标题-->
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAYAAAA+s9J6AAAACXBIWXMAAC4jAAAuIwF4pT92AAAF8WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDUgNzkuMTY0NTkwLCAyMDIwLzEyLzA5LTExOjU3OjQ0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIzLTEyLTAxVDIyOjU4OjI0KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMy0xMi0yOFQxNjo1MDo1NiswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0xMi0yOFQxNjo1MDo1NiswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0N2Q2OTdkZS1kNDJmLWE2NGUtOGY4Ni0yNmY0Nzc4YzdkMTEiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1YTU3MDE3Ni1jNWI3LTUwNGEtOTY3NS1iNjdjZTZmZmI0ZDMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjNDNjMDdkMi03NDVmLTJiNDgtYWFkNC1kNzk0OTkzNzRiYzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM0M2MwN2QyLTc0NWYtMmI0OC1hYWQ0LWQ3OTQ5OTM3NGJjMSIgc3RFdnQ6d2hlbj0iMjAyMy0xMi0wMVQyMjo1ODoyNCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0N2Q2OTdkZS1kNDJmLWE2NGUtOGY4Ni0yNmY0Nzc4YzdkMTEiIHN0RXZ0OndoZW49IjIwMjMtMTItMjhUMTY6NTA6NTYrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4ShaO4AAAHKklEQVR4nO3dsatk5R3H4VkJ21huEQtB8S8Ym0CEEAjEYmHjFpoikEYQBLWSZK2CplqFVImwIAgi2GyKJYLFBhaCoCCCV+wslmRJEYtb2Fo4FjcruvOy9z33nDnf9z3neWCbYe7Mcfd+fGd+vOecc7vdbgPkPJA+AFg7EUKYCCFMhBAmQggTIYSJEMJECGEihDARQpgIIUyEECZCCBMhhIkQwkQIYSKEMBFCmAghTIQQ9pMhT94++fyhjuMspr5C1bmJX+++jn71zZxv16cLH5z+nOf+t//YWw/VvX7pZ++n9nUHvoeVkHYdXzz5s3AipH0Lj1GE9GOhMYqQ/iwsxkGDmaC9IczR+69P+gbbS1dKg55ZhzUMdHxxs7n67GbzytvpIxnFSkj/rj578qdTvayEcLq7IV7IHsZQVkKWp7PviyJkmToKscWPo1VDmL9+OHC3wylK79HBsKZ211DpmMf8bB+OL9btugmzEkKYCEO2t86nD2EdOvhYKkIIE2GQ1XAmja+G6cFMZAhTUnqPToc1JVOf9sWErIRhVsOZNLwaipD1aDREETbAajijBkMUIevTWIhzDmaaGcLUmnNYs711/izXnRmzE6b29TgwK2FDfCxdJxE2RojrI8IGCXFdRNgoIa5HesdMdxY0rDGEaYSVsHFWxOUTYQeEuGwi7IQQl0uEHRHiMp3b7eo3WAy4K1N3u2Om9tIv9u/gs710pfTUwQOSpdzRqYX/qRzdvFb/5APdlcl0tENnnJo2o4X47rq7sJwW48nzLp8895kbkx6DCDvVY4gtxXevIffe3F6/vNlspovRd8KOtfxL/UPbW+e7OdYhttcvfx/kGCLsXMu/3EuN715jY1zUx9E3X/3z3mMvvPqnyOt1sLPmYNYQXkkpxKPnTv85K+FCtPCLv5aVb2oiXJBUAOIbR4QLM2cM4puGCBfo0GGIb1qLGsyMMfVQp6T3YY3wDsNKuGBTRWPlOywRLtyYeMQ3Dx9HV+BuSLUfT4U3LxGuyGkxii9jigi7O21pjiFMrcTdoMTWFt8JIUyEECZCCBMhhK1yOloawqx9WEOOlRDCRAhhIoQwEULYKgczJYY1pFgJIUyEECZCCBMhhE1xV6buTmVaskPeDYrhau76ZCWEMBFCmAghTIQQZsfMQC3toikZubMmZdVDIishhIkQwkQIYSKEsKGDmcXujikNXEpaGsLUqh3WpKz99CsrIYSJEMJECGEihDA7Zv6vx4HLGFMPz+7c/mrS11sTKyGEiRDCRAhhIoQwgxkGGzOE+eff3ys9vJrdMSVWQggTIYSJEMJECGEGM9yXnTCHZyWEMBFCmAghTIQQNnQws7ezoXR9kKVcd2ZtDGEyrIQQJkIIEyGEiRDCmtsx88nHtyPv+7OfPxZ535Q5hjBOW6pjJYQwEUKYCCFMhBAWHcyUhjDv/vGJwJFsNr9/46O9x1of1tjhsgxWQggTIYSJEMJECGGzDWZaGsKUlI6lpWFNaghT2vXy66d/V/WzpVPaOrg1dun4xjj1v81KCGEihDARQpgIIewgg5nHf/PKt/c+9tk/rnYX/BzDmtqBy5gBScof3vl877HGhjVV10eqtb105Uw/110YsDQihDARQpgIIWyKwczeF+jdbjf1roNm1A5rHvrpg3McTneCw5qqIcxvX7tV9WKPPHphxKH8mJUQwkQIYSKEMBFCWHMX/6WstDtmjl00c7zvAYY1kw5hDs1KCGEihDARQpgIIcxgZgJ20Uxv5LCmK1ZCCBMhhIkQwkQIYYcazOztYih9gR5zPQ9yu2hSSjtcan+HWtkdU2IlhDARQpgIIUyEEGbHzIHYRTOPOQYupevJlAZgmzNeA8dKCGEihDARQpgIIWzOwYxdNDNYyi6a//z7OH0Is7ESQpgIIUyEECZCCEvvmFnVsCa1i6Z2WDPm9cZY0xCmxEoIYSKEMBFCmAghLD2YKVnVsCYltWNm7UOYEishhIkQwkQIYSKEsHO7Xf1NbbZPPn/AQxlsscOapVyLZslDmNrrzhzdvHbqdWeshBAmQggTIYSJEMJa3DFTa7k7a850Cdn5tD5wKQ1NWj5mKyGEiRDCRAhhIoSwngczJVXDmpLUAOfrL+/sPfa3px7ee+zFG//de2zqXTQtDS9Kw5WS0i6VLz/df17tqVuJvwMrIYSJEMJECGEihLCeT2WaWtVfxL/+8sKhj6PamGHN1AOI2kFKrQEXJ67dX1T17zvm2jtOZYJOiRDCRAhhIoQwg5nh6v/C7jHHUGeOnTW1xtz5aZM7oevM/74lBjPQARFCmAghTIQQtrRTmeZw5oHBL19+c9Iv/bW+SLzpicavllM0+zFbCSFMhBAmQggTIYQN2jEDTM9KCGEihDARQpgIIUyEECZCCBMhhIkQwkQIYSKEMBFCmAghTIQQJkIIEyGEiRDCRAhhIoSw7wDtbCVFQfO25QAAAABJRU5ErkJggg==">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">


<style>
html, body {
	padding: 0;
	margin: 0;
	overflow: hidden;
	
	background: #000000;
	color: white;
}

html, body, canvas {
	touch-action: none;
	touch-action-delay: none;
}

#notSupportedWrap {
	margin: 2em auto 1em auto;
	width: 75%;
	max-width: 45em;
	border: 2px solid #aaa;
	border-radius: 1em;
	padding: 2em;
	background-color: #f0f0f0;
	font-family: "Segoe UI", Frutiger, "Frutiger Linotype", "Dejavu Sans", "Helvetica Neue", Arial, sans-serif;
	color: black;
}

#notSupportedTitle {
	font-size: 1.8em;
}

.notSupportedMessage {
	font-size: 1.2em;
}

.notSupportedMessage em {
	color: #888;
}

/* bbcode styles */
.bbCodeH1 {
	font-size: 2em;
	font-weight: bold;
}

.bbCodeH2 {
	font-size: 1.5em;
	font-weight: bold;
}

.bbCodeH3 {
	font-size: 1.25em;
	font-weight: bold;
}

.bbCodeH4 {
	font-size: 1.1em;
	font-weight: bold;
}

.bbCodeItem::before {
	content: " • ";
}

/* For text icons converted to HTML: size the height to the line height
   preserving the aspect ratio. Also add position: relative as that allows
   just adding a 'top' style for the iconoffsety style. */
.c3-text-icon {
	height: 1em;
	width: auto;
	position: relative;
}

/* screen reader text */
.c3-screen-reader-text {
	position: absolute;
	width: 1px;
    height: 1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
}
</style>
<style>
	html, body {
		padding: 0;
		margin: 0;
		overflow: hidden;
		
		background: #000000;
		color: white;
	}
	
	html, body, canvas {
		touch-action: none;
		touch-action-delay: none;
	}
	
	#notSupportedWrap {
		margin: 2em auto 1em auto;
		width: 75%;
		max-width: 45em;
		border: 2px solid #aaa;
		border-radius: 1em;
		padding: 2em;
		background-color: #f0f0f0;
		font-family: "Segoe UI", Frutiger, "Frutiger Linotype", "Dejavu Sans", "Helvetica Neue", Arial, sans-serif;
		color: black;
	}
	
	#notSupportedTitle {
		font-size: 1.8em;
	}
	
	.notSupportedMessage {
		font-size: 1.2em;
	}
	
	.notSupportedMessage em {
		color: #888;
	}
	
	/* bbcode styles */
	.bbCodeH1 {
		font-size: 2em;
		font-weight: bold;
	}
	
	.bbCodeH2 {
		font-size: 1.5em;
		font-weight: bold;
	}
	
	.bbCodeH3 {
		font-size: 1.25em;
		font-weight: bold;
	}
	
	.bbCodeH4 {
		font-size: 1.1em;
		font-weight: bold;
	}
	
	.bbCodeItem::before {
		content: " • ";
	}
	
	/* For text icons converted to HTML: size the height to the line height
	   preserving the aspect ratio. Also add position: relative as that allows
	   just adding a 'top' style for the iconoffsety style. */
	.c3-text-icon {
		height: 1em;
		width: auto;
		position: relative;
	}
	
	/* screen reader text */
	.c3-screen-reader-text {
		position: absolute;
		width: 1px;
		height: 1px;
		overflow: hidden;
		clip: rect(1px, 1px, 1px, 1px);
	}
	</style>
	<style>
		/*本导航列为旧横向导航列！*/
	  
	  ul {
	  
		list-style-type: none;
		margin: 0;
		padding: 0;
		overflow: hidden;
		background-color: #334;
		position: fixed;
		top: 0;
		width: 100%;
	  }
	  /*导航列底色格式*/
	  
	  .menu {
	  
	  list-style-type: none;
	  margin: 0;
	  padding: 0;
	  overflow: hidden;
	  background-color: #334;
	  position: fixed;
	  top: 0;
	  width: 100%;
	}
	/*导航列底色格式*/
	.menua {
		display: block;
		color: white;
		text-align: center;
		padding: 8px 10px;
		text-decoration: none;
	  }


	  li {
		float: left;
	  }
	  /*导航列默认向左*/
	  
	  li a {
		display: block;
		color: white;
		text-align: center;
		padding: 5px 7px;
		text-decoration: none;
	  }
	  /*按钮文字颜色*/
	  
	  li a:hover:not(.active) {
		background-color: #111;
	  }
	  /*非当前页面底色*/
	  
	  .Redir{
	  color: #464646;
	  padding: 20px;
	  font-size: 30px;
	  border: none;
	  cursor: pointer;
	  }
	  /*点击按钮底色*/
	  
	  </style>

<style>
	* {
	  box-sizing: border-box;
	}
	
	.menu {
	  float: left;
	  width: 20%;
	}
	.menuitem {
	  padding: 8px;
	  margin-top: 7px;
	  border-bottom: 1px solid #f1f1f1;
	}
	
	.main {
	  float: left;
	  width: 95%;
	  padding: 0 20px;
	  overflow: hidden;
	}
	/*
	.right {
	  background-color: lightblue;
	  float: left;
	  width: 20%;
	  padding: 10px 15px;
	  margin-top: 7px;
	}
	*/
	
	@media only screen and (max-width:800px) {
	  /* For tablets: */
	  .main {
		width: 95%;
		padding: 0;
	  }
	  /*
	  .right {
		width: 100%;
	  }
	  */
	}
	@media only screen and (max-width:500px) {
	  /* For mobile phones: */
	  .menu, .main, .right {
		width: 95%;
	  }
	}
	/* show it on devices with max of 767 px and lower*/
		  @media (max-width: 830px) {
			.hidden-mobile {
			  display: none;
			}
		  }
		  @media (min-width: 830px) {
			.hidden-pc {
			  display: none;
			}
		  }
	</style>
		</head>
	  <body>
		<div class="menu">
			<div class="hidden-mobile">
				<div class="menu" style="width: 75px">
					<h3 class="w3-bar-item"></h3>
					<a onclick="location.reload()" class="menua">重启游戏</a>
					<a href="../index.html" class="menua">返回主页</a>
					<!--<a href="#" class="menua">Link 3</a>-->
				  </div>
			
			
			</div>
		<div class="main">
		<div style="overflow:auto">
	<ul class="hidden-pc">
		<li><a onclick="location.reload()" >Restart game重启游戏</a></li>
	  </ul>

<script>
self.c3_base64files = {
    "scripts/c3runtime.js": {
        "type": "application/javascript",
        "str": " \n{\n/*\n \n*/\n'use strict';(function(global,factory){typeof exports===\"object\"&&typeof module!==\"undefined\"?factory(exports):typeof define===\"function\"&&define.amd?define([\"exports\"],factory):(global=typeof globalThis!==\"undefined\"?globalThis:global||self,factory(global.glMatrix={}))})(this,function(exports){var EPSILON=1E-6;var ARRAY_TYPE=typeof Float32Array!==\"undefined\"?Float32Array:Array;var RANDOM=Math.random;var ANGLE_ORDER=\"zyx\";function setMatrixArrayType(type){ARRAY_TYPE=type}var degree=Math.PI/180;function toRadian(a){return a*\ndegree}function equals$9(a,b){return Math.abs(a-b)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}if(!Math.hypot)Math.hypot=function(){var y=0,i=arguments.length;while(i--)y+=arguments[i]*arguments[i];return Math.sqrt(y)};var common=Object.freeze({__proto__:null,EPSILON:EPSILON,get ARRAY_TYPE(){return ARRAY_TYPE},RANDOM:RANDOM,ANGLE_ORDER:ANGLE_ORDER,setMatrixArrayType:setMatrixArrayType,toRadian:toRadian,equals:equals$9});function create$8(){var out=new ARRAY_TYPE(4);if(ARRAY_TYPE!=Float32Array){out[1]=\n0;out[2]=0}out[0]=1;out[3]=1;return out}function clone$8(a){var out=new ARRAY_TYPE(4);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}function copy$8(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}function identity$5(out){out[0]=1;out[1]=0;out[2]=0;out[3]=1;return out}function fromValues$8(m00,m01,m10,m11){var out=new ARRAY_TYPE(4);out[0]=m00;out[1]=m01;out[2]=m10;out[3]=m11;return out}function set$8(out,m00,m01,m10,m11){out[0]=m00;out[1]=m01;out[2]=m10;out[3]=m11;return out}\nfunction transpose$2(out,a){if(out===a){var a1=a[1];out[1]=a[2];out[2]=a1}else{out[0]=a[0];out[1]=a[2];out[2]=a[1];out[3]=a[3]}return out}function invert$5(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var det=a0*a3-a2*a1;if(!det)return null;det=1/det;out[0]=a3*det;out[1]=-a1*det;out[2]=-a2*det;out[3]=a0*det;return out}function adjoint$2(out,a){var a0=a[0];out[0]=a[3];out[1]=-a[1];out[2]=-a[2];out[3]=a0;return out}function determinant$3(a){return a[0]*a[3]-a[2]*a[1]}function multiply$8(out,a,b){var a0=\na[0],a1=a[1],a2=a[2],a3=a[3];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];out[0]=a0*b0+a2*b1;out[1]=a1*b0+a3*b1;out[2]=a0*b2+a2*b3;out[3]=a1*b2+a3*b3;return out}function rotate$4(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var s=Math.sin(rad);var c=Math.cos(rad);out[0]=a0*c+a2*s;out[1]=a1*c+a3*s;out[2]=a0*-s+a2*c;out[3]=a1*-s+a3*c;return out}function scale$8(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var v0=v[0],v1=v[1];out[0]=a0*v0;out[1]=a1*v0;out[2]=a2*v1;out[3]=a3*v1;return out}function fromRotation$4(out,\nrad){var s=Math.sin(rad);var c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=-s;out[3]=c;return out}function fromScaling$3(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=v[1];return out}function str$8(a){return\"mat2(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"}function frob$3(a){return Math.hypot(a[0],a[1],a[2],a[3])}function LDU(L,D,U,a){L[2]=a[2]/a[0];U[0]=a[0];U[1]=a[1];U[3]=a[3]-L[2]*U[1];return[L,D,U]}function add$8(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];return out}function subtract$6(out,\na,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];return out}function exactEquals$8(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}function equals$8(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),\nMath.abs(b3))}function multiplyScalar$3(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;return out}function multiplyScalarAndAdd$3(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;return out}var mul$8=multiply$8;var sub$6=subtract$6;var mat2=Object.freeze({__proto__:null,create:create$8,clone:clone$8,copy:copy$8,identity:identity$5,fromValues:fromValues$8,set:set$8,transpose:transpose$2,invert:invert$5,adjoint:adjoint$2,determinant:determinant$3,\nmultiply:multiply$8,rotate:rotate$4,scale:scale$8,fromRotation:fromRotation$4,fromScaling:fromScaling$3,str:str$8,frob:frob$3,LDU:LDU,add:add$8,subtract:subtract$6,exactEquals:exactEquals$8,equals:equals$8,multiplyScalar:multiplyScalar$3,multiplyScalarAndAdd:multiplyScalarAndAdd$3,mul:mul$8,sub:sub$6});function create$7(){var out=new ARRAY_TYPE(6);if(ARRAY_TYPE!=Float32Array){out[1]=0;out[2]=0;out[4]=0;out[5]=0}out[0]=1;out[3]=1;return out}function clone$7(a){var out=new ARRAY_TYPE(6);out[0]=a[0];\nout[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];return out}function copy$7(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];return out}function identity$4(out){out[0]=1;out[1]=0;out[2]=0;out[3]=1;out[4]=0;out[5]=0;return out}function fromValues$7(a,b,c,d,tx,ty){var out=new ARRAY_TYPE(6);out[0]=a;out[1]=b;out[2]=c;out[3]=d;out[4]=tx;out[5]=ty;return out}function set$7(out,a,b,c,d,tx,ty){out[0]=a;out[1]=b;out[2]=c;out[3]=d;out[4]=tx;out[5]=ty;return out}function invert$4(out,\na){var aa=a[0],ab=a[1],ac=a[2],ad=a[3];var atx=a[4],aty=a[5];var det=aa*ad-ab*ac;if(!det)return null;det=1/det;out[0]=ad*det;out[1]=-ab*det;out[2]=-ac*det;out[3]=aa*det;out[4]=(ac*aty-ad*atx)*det;out[5]=(ab*atx-aa*aty)*det;return out}function determinant$2(a){return a[0]*a[3]-a[1]*a[2]}function multiply$7(out,a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];out[0]=a0*b0+a2*b1;out[1]=a1*b0+a3*b1;out[2]=a0*b2+a2*b3;out[3]=a1*b2+a3*b3;out[4]=\na0*b4+a2*b5+a4;out[5]=a1*b4+a3*b5+a5;return out}function rotate$3(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5];var s=Math.sin(rad);var c=Math.cos(rad);out[0]=a0*c+a2*s;out[1]=a1*c+a3*s;out[2]=a0*-s+a2*c;out[3]=a1*-s+a3*c;out[4]=a4;out[5]=a5;return out}function scale$7(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5];var v0=v[0],v1=v[1];out[0]=a0*v0;out[1]=a1*v0;out[2]=a2*v1;out[3]=a3*v1;out[4]=a4;out[5]=a5;return out}function translate$3(out,a,v){var a0=a[0],a1=a[1],\na2=a[2],a3=a[3],a4=a[4],a5=a[5];var v0=v[0],v1=v[1];out[0]=a0;out[1]=a1;out[2]=a2;out[3]=a3;out[4]=a0*v0+a2*v1+a4;out[5]=a1*v0+a3*v1+a5;return out}function fromRotation$3(out,rad){var s=Math.sin(rad),c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=-s;out[3]=c;out[4]=0;out[5]=0;return out}function fromScaling$2(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=v[1];out[4]=0;out[5]=0;return out}function fromTranslation$3(out,v){out[0]=1;out[1]=0;out[2]=0;out[3]=1;out[4]=v[0];out[5]=v[1];return out}function str$7(a){return\"mat2d(\"+\na[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\")\"}function frob$2(a){return Math.hypot(a[0],a[1],a[2],a[3],a[4],a[5],1)}function add$7(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];return out}function subtract$5(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];out[4]=a[4]-b[4];out[5]=a[5]-b[5];return out}function multiplyScalar$2(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;out[4]=\na[4]*b;out[5]=a[5]*b;return out}function multiplyScalarAndAdd$2(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;out[4]=a[4]+b[4]*scale;out[5]=a[5]+b[5]*scale;return out}function exactEquals$7(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]}function equals$7(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];return Math.abs(a0-b0)<=EPSILON*Math.max(1,\nMath.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))}var mul$7=multiply$7;var sub$5=subtract$5;var mat2d=Object.freeze({__proto__:null,create:create$7,clone:clone$7,copy:copy$7,identity:identity$4,fromValues:fromValues$7,\nset:set$7,invert:invert$4,determinant:determinant$2,multiply:multiply$7,rotate:rotate$3,scale:scale$7,translate:translate$3,fromRotation:fromRotation$3,fromScaling:fromScaling$2,fromTranslation:fromTranslation$3,str:str$7,frob:frob$2,add:add$7,subtract:subtract$5,multiplyScalar:multiplyScalar$2,multiplyScalarAndAdd:multiplyScalarAndAdd$2,exactEquals:exactEquals$7,equals:equals$7,mul:mul$7,sub:sub$5});function create$6(){var out=new ARRAY_TYPE(9);if(ARRAY_TYPE!=Float32Array){out[1]=0;out[2]=0;out[3]=\n0;out[5]=0;out[6]=0;out[7]=0}out[0]=1;out[4]=1;out[8]=1;return out}function fromMat4$1(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[4];out[4]=a[5];out[5]=a[6];out[6]=a[8];out[7]=a[9];out[8]=a[10];return out}function clone$6(a){var out=new ARRAY_TYPE(9);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];return out}function copy$6(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=\na[8];return out}function fromValues$6(m00,m01,m02,m10,m11,m12,m20,m21,m22){var out=new ARRAY_TYPE(9);out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m10;out[4]=m11;out[5]=m12;out[6]=m20;out[7]=m21;out[8]=m22;return out}function set$6(out,m00,m01,m02,m10,m11,m12,m20,m21,m22){out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m10;out[4]=m11;out[5]=m12;out[6]=m20;out[7]=m21;out[8]=m22;return out}function identity$3(out){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=1;out[5]=0;out[6]=0;out[7]=0;out[8]=1;return out}function transpose$1(out,\na){if(out===a){var a01=a[1],a02=a[2],a12=a[5];out[1]=a[3];out[2]=a[6];out[3]=a01;out[5]=a[7];out[6]=a02;out[7]=a12}else{out[0]=a[0];out[1]=a[3];out[2]=a[6];out[3]=a[1];out[4]=a[4];out[5]=a[7];out[6]=a[2];out[7]=a[5];out[8]=a[8]}return out}function invert$3(out,a){var a00=a[0],a01=a[1],a02=a[2];var a10=a[3],a11=a[4],a12=a[5];var a20=a[6],a21=a[7],a22=a[8];var b01=a22*a11-a12*a21;var b11=-a22*a10+a12*a20;var b21=a21*a10-a11*a20;var det=a00*b01+a01*b11+a02*b21;if(!det)return null;det=1/det;out[0]=b01*\ndet;out[1]=(-a22*a01+a02*a21)*det;out[2]=(a12*a01-a02*a11)*det;out[3]=b11*det;out[4]=(a22*a00-a02*a20)*det;out[5]=(-a12*a00+a02*a10)*det;out[6]=b21*det;out[7]=(-a21*a00+a01*a20)*det;out[8]=(a11*a00-a01*a10)*det;return out}function adjoint$1(out,a){var a00=a[0],a01=a[1],a02=a[2];var a10=a[3],a11=a[4],a12=a[5];var a20=a[6],a21=a[7],a22=a[8];out[0]=a11*a22-a12*a21;out[1]=a02*a21-a01*a22;out[2]=a01*a12-a02*a11;out[3]=a12*a20-a10*a22;out[4]=a00*a22-a02*a20;out[5]=a02*a10-a00*a12;out[6]=a10*a21-a11*a20;\nout[7]=a01*a20-a00*a21;out[8]=a00*a11-a01*a10;return out}function determinant$1(a){var a00=a[0],a01=a[1],a02=a[2];var a10=a[3],a11=a[4],a12=a[5];var a20=a[6],a21=a[7],a22=a[8];return a00*(a22*a11-a12*a21)+a01*(-a22*a10+a12*a20)+a02*(a21*a10-a11*a20)}function multiply$6(out,a,b){var a00=a[0],a01=a[1],a02=a[2];var a10=a[3],a11=a[4],a12=a[5];var a20=a[6],a21=a[7],a22=a[8];var b00=b[0],b01=b[1],b02=b[2];var b10=b[3],b11=b[4],b12=b[5];var b20=b[6],b21=b[7],b22=b[8];out[0]=b00*a00+b01*a10+b02*a20;out[1]=\nb00*a01+b01*a11+b02*a21;out[2]=b00*a02+b01*a12+b02*a22;out[3]=b10*a00+b11*a10+b12*a20;out[4]=b10*a01+b11*a11+b12*a21;out[5]=b10*a02+b11*a12+b12*a22;out[6]=b20*a00+b21*a10+b22*a20;out[7]=b20*a01+b21*a11+b22*a21;out[8]=b20*a02+b21*a12+b22*a22;return out}function translate$2(out,a,v){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],x=v[0],y=v[1];out[0]=a00;out[1]=a01;out[2]=a02;out[3]=a10;out[4]=a11;out[5]=a12;out[6]=x*a00+y*a10+a20;out[7]=x*a01+y*a11+a21;out[8]=x*\na02+y*a12+a22;return out}function rotate$2(out,a,rad){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],s=Math.sin(rad),c=Math.cos(rad);out[0]=c*a00+s*a10;out[1]=c*a01+s*a11;out[2]=c*a02+s*a12;out[3]=c*a10-s*a00;out[4]=c*a11-s*a01;out[5]=c*a12-s*a02;out[6]=a20;out[7]=a21;out[8]=a22;return out}function scale$6(out,a,v){var x=v[0],y=v[1];out[0]=x*a[0];out[1]=x*a[1];out[2]=x*a[2];out[3]=y*a[3];out[4]=y*a[4];out[5]=y*a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];return out}\nfunction fromTranslation$2(out,v){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=1;out[5]=0;out[6]=v[0];out[7]=v[1];out[8]=1;return out}function fromRotation$2(out,rad){var s=Math.sin(rad),c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=0;out[3]=-s;out[4]=c;out[5]=0;out[6]=0;out[7]=0;out[8]=1;return out}function fromScaling$1(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=0;out[4]=v[1];out[5]=0;out[6]=0;out[7]=0;out[8]=1;return out}function fromMat2d(out,a){out[0]=a[0];out[1]=a[1];out[2]=0;out[3]=a[2];out[4]=a[3];\nout[5]=0;out[6]=a[4];out[7]=a[5];out[8]=1;return out}function fromQuat$1(out,q){var x=q[0],y=q[1],z=q[2],w=q[3];var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var yx=y*x2;var yy=y*y2;var zx=z*x2;var zy=z*y2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;out[0]=1-yy-zz;out[3]=yx-wz;out[6]=zx+wy;out[1]=yx+wz;out[4]=1-xx-zz;out[7]=zy-wx;out[2]=zx-wy;out[5]=zy+wx;out[8]=1-xx-yy;return out}function normalFromMat4(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3];var a10=a[4],a11=a[5],a12=a[6],a13=a[7];var a20=\na[8],a21=a[9],a22=a[10],a23=a[11];var a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(!det)return null;det=1/det;out[0]=(a11*b11-a12*b10+a13*b09)*det;out[1]=(a12*\nb08-a10*b11-a13*b07)*det;out[2]=(a10*b10-a11*b08+a13*b06)*det;out[3]=(a02*b10-a01*b11-a03*b09)*det;out[4]=(a00*b11-a02*b08+a03*b07)*det;out[5]=(a01*b08-a00*b10-a03*b06)*det;out[6]=(a31*b05-a32*b04+a33*b03)*det;out[7]=(a32*b02-a30*b05-a33*b01)*det;out[8]=(a30*b04-a31*b02+a33*b00)*det;return out}function projection(out,width,height){out[0]=2/width;out[1]=0;out[2]=0;out[3]=0;out[4]=-2/height;out[5]=0;out[6]=-1;out[7]=1;out[8]=1;return out}function str$6(a){return\"mat3(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+\na[3]+\", \"+a[4]+\", \"+a[5]+\", \"+a[6]+\", \"+a[7]+\", \"+a[8]+\")\"}function frob$1(a){return Math.hypot(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])}function add$6(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];out[6]=a[6]+b[6];out[7]=a[7]+b[7];out[8]=a[8]+b[8];return out}function subtract$4(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];out[4]=a[4]-b[4];out[5]=a[5]-b[5];out[6]=a[6]-b[6];out[7]=a[7]-b[7];out[8]=\na[8]-b[8];return out}function multiplyScalar$1(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;out[4]=a[4]*b;out[5]=a[5]*b;out[6]=a[6]*b;out[7]=a[7]*b;out[8]=a[8]*b;return out}function multiplyScalarAndAdd$1(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;out[4]=a[4]+b[4]*scale;out[5]=a[5]+b[5]*scale;out[6]=a[6]+b[6]*scale;out[7]=a[7]+b[7]*scale;out[8]=a[8]+b[8]*scale;return out}function exactEquals$6(a,b){return a[0]===b[0]&&\na[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]}function equals$6(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*\nMath.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))}var mul$6=multiply$6;var sub$4=subtract$4;var mat3=Object.freeze({__proto__:null,create:create$6,fromMat4:fromMat4$1,clone:clone$6,copy:copy$6,\nfromValues:fromValues$6,set:set$6,identity:identity$3,transpose:transpose$1,invert:invert$3,adjoint:adjoint$1,determinant:determinant$1,multiply:multiply$6,translate:translate$2,rotate:rotate$2,scale:scale$6,fromTranslation:fromTranslation$2,fromRotation:fromRotation$2,fromScaling:fromScaling$1,fromMat2d:fromMat2d,fromQuat:fromQuat$1,normalFromMat4:normalFromMat4,projection:projection,str:str$6,frob:frob$1,add:add$6,subtract:subtract$4,multiplyScalar:multiplyScalar$1,multiplyScalarAndAdd:multiplyScalarAndAdd$1,\nexactEquals:exactEquals$6,equals:equals$6,mul:mul$6,sub:sub$4});function create$5(){var out=new ARRAY_TYPE(16);if(ARRAY_TYPE!=Float32Array){out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[11]=0;out[12]=0;out[13]=0;out[14]=0}out[0]=1;out[5]=1;out[10]=1;out[15]=1;return out}function clone$5(a){var out=new ARRAY_TYPE(16);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=\na[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out}function copy$5(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out}function fromValues$5(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){var out=new ARRAY_TYPE(16);out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m03;out[4]=m10;out[5]=m11;out[6]=m12;out[7]=m13;out[8]=\nm20;out[9]=m21;out[10]=m22;out[11]=m23;out[12]=m30;out[13]=m31;out[14]=m32;out[15]=m33;return out}function set$5(out,m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m03;out[4]=m10;out[5]=m11;out[6]=m12;out[7]=m13;out[8]=m20;out[9]=m21;out[10]=m22;out[11]=m23;out[12]=m30;out[13]=m31;out[14]=m32;out[15]=m33;return out}function identity$2(out){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=\n0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function transpose(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3];var a12=a[6],a13=a[7];var a23=a[11];out[1]=a[4];out[2]=a[8];out[3]=a[12];out[4]=a01;out[6]=a[9];out[7]=a[13];out[8]=a02;out[9]=a12;out[11]=a[14];out[12]=a03;out[13]=a13;out[14]=a23}else{out[0]=a[0];out[1]=a[4];out[2]=a[8];out[3]=a[12];out[4]=a[1];out[5]=a[5];out[6]=a[9];out[7]=a[13];out[8]=a[2];out[9]=a[6];out[10]=a[10];out[11]=a[14];out[12]=a[3];out[13]=a[7];out[14]=a[11];out[15]=\na[15]}return out}function invert$2(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3];var a10=a[4],a11=a[5],a12=a[6],a13=a[7];var a20=a[8],a21=a[9],a22=a[10],a23=a[11];var a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=\nb00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(!det)return null;det=1/det;out[0]=(a11*b11-a12*b10+a13*b09)*det;out[1]=(a02*b10-a01*b11-a03*b09)*det;out[2]=(a31*b05-a32*b04+a33*b03)*det;out[3]=(a22*b04-a21*b05-a23*b03)*det;out[4]=(a12*b08-a10*b11-a13*b07)*det;out[5]=(a00*b11-a02*b08+a03*b07)*det;out[6]=(a32*b02-a30*b05-a33*b01)*det;out[7]=(a20*b05-a22*b02+a23*b01)*det;out[8]=(a10*b10-a11*b08+a13*b06)*det;out[9]=(a01*b08-a00*b10-a03*b06)*det;out[10]=(a30*b04-a31*b02+a33*b00)*det;out[11]=(a21*b02-\na20*b04-a23*b00)*det;out[12]=(a11*b07-a10*b09-a12*b06)*det;out[13]=(a00*b09-a01*b07+a02*b06)*det;out[14]=(a31*b01-a30*b03-a32*b00)*det;out[15]=(a20*b03-a21*b01+a22*b00)*det;return out}function adjoint(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3];var a10=a[4],a11=a[5],a12=a[6],a13=a[7];var a20=a[8],a21=a[9],a22=a[10],a23=a[11];var a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=\na02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;out[0]=a11*b11-a12*b10+a13*b09;out[1]=a02*b10-a01*b11-a03*b09;out[2]=a31*b05-a32*b04+a33*b03;out[3]=a22*b04-a21*b05-a23*b03;out[4]=a12*b08-a10*b11-a13*b07;out[5]=a00*b11-a02*b08+a03*b07;out[6]=a32*b02-a30*b05-a33*b01;out[7]=a20*b05-a22*b02+a23*b01;out[8]=a10*b10-a11*b08+a13*b06;out[9]=a01*b08-a00*b10-a03*b06;out[10]=a30*b04-a31*b02+a33*b00;\nout[11]=a21*b02-a20*b04-a23*b00;out[12]=a11*b07-a10*b09-a12*b06;out[13]=a00*b09-a01*b07+a02*b06;out[14]=a31*b01-a30*b03-a32*b00;out[15]=a20*b03-a21*b01+a22*b00;return out}function determinant(a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3];var a10=a[4],a11=a[5],a12=a[6],a13=a[7];var a20=a[8],a21=a[9],a22=a[10],a23=a[11];var a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b0=a00*a11-a01*a10;var b1=a00*a12-a02*a10;var b2=a01*a12-a02*a11;var b3=a20*a31-a21*a30;var b4=a20*a32-a22*a30;var b5=a21*a32-a22*a31;var b6=\na00*b5-a01*b4+a02*b3;var b7=a10*b5-a11*b4+a12*b3;var b8=a20*b2-a21*b1+a22*b0;var b9=a30*b2-a31*b1+a32*b0;return a13*b6-a03*b7+a33*b8-a23*b9}function multiply$5(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3];var a10=a[4],a11=a[5],a12=a[6],a13=a[7];var a20=a[8],a21=a[9],a22=a[10],a23=a[11];var a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];out[0]=b0*a00+b1*a10+b2*a20+b3*a30;out[1]=b0*a01+b1*a11+b2*a21+b3*a31;out[2]=b0*a02+b1*a12+b2*a22+b3*a32;out[3]=b0*a03+b1*a13+b2*a23+\nb3*a33;b0=b[4];b1=b[5];b2=b[6];b3=b[7];out[4]=b0*a00+b1*a10+b2*a20+b3*a30;out[5]=b0*a01+b1*a11+b2*a21+b3*a31;out[6]=b0*a02+b1*a12+b2*a22+b3*a32;out[7]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[8];b1=b[9];b2=b[10];b3=b[11];out[8]=b0*a00+b1*a10+b2*a20+b3*a30;out[9]=b0*a01+b1*a11+b2*a21+b3*a31;out[10]=b0*a02+b1*a12+b2*a22+b3*a32;out[11]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[12];b1=b[13];b2=b[14];b3=b[15];out[12]=b0*a00+b1*a10+b2*a20+b3*a30;out[13]=b0*a01+b1*a11+b2*a21+b3*a31;out[14]=b0*a02+b1*a12+b2*a22+b3*a32;out[15]=\nb0*a03+b1*a13+b2*a23+b3*a33;return out}function translate$1(out,a,v){var x=v[0],y=v[1],z=v[2];var a00,a01,a02,a03;var a10,a11,a12,a13;var a20,a21,a22,a23;if(a===out){out[12]=a[0]*x+a[4]*y+a[8]*z+a[12];out[13]=a[1]*x+a[5]*y+a[9]*z+a[13];out[14]=a[2]*x+a[6]*y+a[10]*z+a[14];out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]}else{a00=a[0];a01=a[1];a02=a[2];a03=a[3];a10=a[4];a11=a[5];a12=a[6];a13=a[7];a20=a[8];a21=a[9];a22=a[10];a23=a[11];out[0]=a00;out[1]=a01;out[2]=a02;out[3]=a03;out[4]=a10;out[5]=a11;out[6]=a12;out[7]=\na13;out[8]=a20;out[9]=a21;out[10]=a22;out[11]=a23;out[12]=a00*x+a10*y+a20*z+a[12];out[13]=a01*x+a11*y+a21*z+a[13];out[14]=a02*x+a12*y+a22*z+a[14];out[15]=a03*x+a13*y+a23*z+a[15]}return out}function scale$5(out,a,v){var x=v[0],y=v[1],z=v[2];out[0]=a[0]*x;out[1]=a[1]*x;out[2]=a[2]*x;out[3]=a[3]*x;out[4]=a[4]*y;out[5]=a[5]*y;out[6]=a[6]*y;out[7]=a[7]*y;out[8]=a[8]*z;out[9]=a[9]*z;out[10]=a[10]*z;out[11]=a[11]*z;out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out}function rotate$1(out,\na,rad,axis){var x=axis[0],y=axis[1],z=axis[2];var len=Math.hypot(x,y,z);var s,c,t;var a00,a01,a02,a03;var a10,a11,a12,a13;var a20,a21,a22,a23;var b00,b01,b02;var b10,b11,b12;var b20,b21,b22;if(len<EPSILON)return null;len=1/len;x*=len;y*=len;z*=len;s=Math.sin(rad);c=Math.cos(rad);t=1-c;a00=a[0];a01=a[1];a02=a[2];a03=a[3];a10=a[4];a11=a[5];a12=a[6];a13=a[7];a20=a[8];a21=a[9];a22=a[10];a23=a[11];b00=x*x*t+c;b01=y*x*t+z*s;b02=z*x*t-y*s;b10=x*y*t-z*s;b11=y*y*t+c;b12=z*y*t+x*s;b20=x*z*t+y*s;b21=y*z*t-x*\ns;b22=z*z*t+c;out[0]=a00*b00+a10*b01+a20*b02;out[1]=a01*b00+a11*b01+a21*b02;out[2]=a02*b00+a12*b01+a22*b02;out[3]=a03*b00+a13*b01+a23*b02;out[4]=a00*b10+a10*b11+a20*b12;out[5]=a01*b10+a11*b11+a21*b12;out[6]=a02*b10+a12*b11+a22*b12;out[7]=a03*b10+a13*b11+a23*b12;out[8]=a00*b20+a10*b21+a20*b22;out[9]=a01*b20+a11*b21+a21*b22;out[10]=a02*b20+a12*b21+a22*b22;out[11]=a03*b20+a13*b21+a23*b22;if(a!==out){out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}return out}function rotateX$3(out,a,rad){var s=\nMath.sin(rad);var c=Math.cos(rad);var a10=a[4];var a11=a[5];var a12=a[6];var a13=a[7];var a20=a[8];var a21=a[9];var a22=a[10];var a23=a[11];if(a!==out){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[4]=a10*c+a20*s;out[5]=a11*c+a21*s;out[6]=a12*c+a22*s;out[7]=a13*c+a23*s;out[8]=a20*c-a10*s;out[9]=a21*c-a11*s;out[10]=a22*c-a12*s;out[11]=a23*c-a13*s;return out}function rotateY$3(out,a,rad){var s=Math.sin(rad);var c=Math.cos(rad);var a00=a[0];\nvar a01=a[1];var a02=a[2];var a03=a[3];var a20=a[8];var a21=a[9];var a22=a[10];var a23=a[11];if(a!==out){out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[0]=a00*c-a20*s;out[1]=a01*c-a21*s;out[2]=a02*c-a22*s;out[3]=a03*c-a23*s;out[8]=a00*s+a20*c;out[9]=a01*s+a21*c;out[10]=a02*s+a22*c;out[11]=a03*s+a23*c;return out}function rotateZ$3(out,a,rad){var s=Math.sin(rad);var c=Math.cos(rad);var a00=a[0];var a01=a[1];var a02=a[2];var a03=a[3];var a10=\na[4];var a11=a[5];var a12=a[6];var a13=a[7];if(a!==out){out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[0]=a00*c+a10*s;out[1]=a01*c+a11*s;out[2]=a02*c+a12*s;out[3]=a03*c+a13*s;out[4]=a10*c-a00*s;out[5]=a11*c-a01*s;out[6]=a12*c-a02*s;out[7]=a13*c-a03*s;return out}function fromTranslation$1(out,v){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=\nv[2];out[15]=1;return out}function fromScaling(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=v[1];out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=v[2];out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function fromRotation$1(out,rad,axis){var x=axis[0],y=axis[1],z=axis[2];var len=Math.hypot(x,y,z);var s,c,t;if(len<EPSILON)return null;len=1/len;x*=len;y*=len;z*=len;s=Math.sin(rad);c=Math.cos(rad);t=1-c;out[0]=x*x*t+c;out[1]=y*x*t+z*s;out[2]=z*x*t-y*s;out[3]=0;out[4]=x*y*t-z*\ns;out[5]=y*y*t+c;out[6]=z*y*t+x*s;out[7]=0;out[8]=x*z*t+y*s;out[9]=y*z*t-x*s;out[10]=z*z*t+c;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function fromXRotation(out,rad){var s=Math.sin(rad);var c=Math.cos(rad);out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=c;out[6]=s;out[7]=0;out[8]=0;out[9]=-s;out[10]=c;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function fromYRotation(out,rad){var s=Math.sin(rad);var c=Math.cos(rad);out[0]=c;out[1]=0;out[2]=-s;out[3]=0;out[4]=\n0;out[5]=1;out[6]=0;out[7]=0;out[8]=s;out[9]=0;out[10]=c;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function fromZRotation(out,rad){var s=Math.sin(rad);var c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=0;out[3]=0;out[4]=-s;out[5]=c;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function fromRotationTranslation$1(out,q,v){var x=q[0],y=q[1],z=q[2],w=q[3];var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var xy=x*y2;var xz=x*z2;var yy=\ny*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;out[0]=1-(yy+zz);out[1]=xy+wz;out[2]=xz-wy;out[3]=0;out[4]=xy-wz;out[5]=1-(xx+zz);out[6]=yz+wx;out[7]=0;out[8]=xz+wy;out[9]=yz-wx;out[10]=1-(xx+yy);out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=v[2];out[15]=1;return out}function fromQuat2(out,a){var translation=new ARRAY_TYPE(3);var bx=-a[0],by=-a[1],bz=-a[2],bw=a[3],ax=a[4],ay=a[5],az=a[6],aw=a[7];var magnitude=bx*bx+by*by+bz*bz+bw*bw;if(magnitude>0){translation[0]=(ax*bw+aw*bx+ay*bz-\naz*by)*2/magnitude;translation[1]=(ay*bw+aw*by+az*bx-ax*bz)*2/magnitude;translation[2]=(az*bw+aw*bz+ax*by-ay*bx)*2/magnitude}else{translation[0]=(ax*bw+aw*bx+ay*bz-az*by)*2;translation[1]=(ay*bw+aw*by+az*bx-ax*bz)*2;translation[2]=(az*bw+aw*bz+ax*by-ay*bx)*2}fromRotationTranslation$1(out,a,translation);return out}function getTranslation$1(out,mat){out[0]=mat[12];out[1]=mat[13];out[2]=mat[14];return out}function getScaling(out,mat){var m11=mat[0];var m12=mat[1];var m13=mat[2];var m21=mat[4];var m22=\nmat[5];var m23=mat[6];var m31=mat[8];var m32=mat[9];var m33=mat[10];out[0]=Math.hypot(m11,m12,m13);out[1]=Math.hypot(m21,m22,m23);out[2]=Math.hypot(m31,m32,m33);return out}function getRotation(out,mat){var scaling=new ARRAY_TYPE(3);getScaling(scaling,mat);var is1=1/scaling[0];var is2=1/scaling[1];var is3=1/scaling[2];var sm11=mat[0]*is1;var sm12=mat[1]*is2;var sm13=mat[2]*is3;var sm21=mat[4]*is1;var sm22=mat[5]*is2;var sm23=mat[6]*is3;var sm31=mat[8]*is1;var sm32=mat[9]*is2;var sm33=mat[10]*is3;var trace=\nsm11+sm22+sm33;var S=0;if(trace>0){S=Math.sqrt(trace+1)*2;out[3]=.25*S;out[0]=(sm23-sm32)/S;out[1]=(sm31-sm13)/S;out[2]=(sm12-sm21)/S}else if(sm11>sm22&&sm11>sm33){S=Math.sqrt(1+sm11-sm22-sm33)*2;out[3]=(sm23-sm32)/S;out[0]=.25*S;out[1]=(sm12+sm21)/S;out[2]=(sm31+sm13)/S}else if(sm22>sm33){S=Math.sqrt(1+sm22-sm11-sm33)*2;out[3]=(sm31-sm13)/S;out[0]=(sm12+sm21)/S;out[1]=.25*S;out[2]=(sm23+sm32)/S}else{S=Math.sqrt(1+sm33-sm11-sm22)*2;out[3]=(sm12-sm21)/S;out[0]=(sm31+sm13)/S;out[1]=(sm23+sm32)/S;out[2]=\n.25*S}return out}function decompose(out_r,out_t,out_s,mat){out_t[0]=mat[12];out_t[1]=mat[13];out_t[2]=mat[14];var m11=mat[0];var m12=mat[1];var m13=mat[2];var m21=mat[4];var m22=mat[5];var m23=mat[6];var m31=mat[8];var m32=mat[9];var m33=mat[10];out_s[0]=Math.hypot(m11,m12,m13);out_s[1]=Math.hypot(m21,m22,m23);out_s[2]=Math.hypot(m31,m32,m33);var is1=1/out_s[0];var is2=1/out_s[1];var is3=1/out_s[2];var sm11=m11*is1;var sm12=m12*is2;var sm13=m13*is3;var sm21=m21*is1;var sm22=m22*is2;var sm23=m23*is3;\nvar sm31=m31*is1;var sm32=m32*is2;var sm33=m33*is3;var trace=sm11+sm22+sm33;var S=0;if(trace>0){S=Math.sqrt(trace+1)*2;out_r[3]=.25*S;out_r[0]=(sm23-sm32)/S;out_r[1]=(sm31-sm13)/S;out_r[2]=(sm12-sm21)/S}else if(sm11>sm22&&sm11>sm33){S=Math.sqrt(1+sm11-sm22-sm33)*2;out_r[3]=(sm23-sm32)/S;out_r[0]=.25*S;out_r[1]=(sm12+sm21)/S;out_r[2]=(sm31+sm13)/S}else if(sm22>sm33){S=Math.sqrt(1+sm22-sm11-sm33)*2;out_r[3]=(sm31-sm13)/S;out_r[0]=(sm12+sm21)/S;out_r[1]=.25*S;out_r[2]=(sm23+sm32)/S}else{S=Math.sqrt(1+\nsm33-sm11-sm22)*2;out_r[3]=(sm12-sm21)/S;out_r[0]=(sm31+sm13)/S;out_r[1]=(sm23+sm32)/S;out_r[2]=.25*S}return out_r}function fromRotationTranslationScale(out,q,v,s){var x=q[0],y=q[1],z=q[2],w=q[3];var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var xy=x*y2;var xz=x*z2;var yy=y*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;var sx=s[0];var sy=s[1];var sz=s[2];out[0]=(1-(yy+zz))*sx;out[1]=(xy+wz)*sx;out[2]=(xz-wy)*sx;out[3]=0;out[4]=(xy-wz)*sy;out[5]=(1-(xx+zz))*sy;out[6]=(yz+wx)*sy;out[7]=\n0;out[8]=(xz+wy)*sz;out[9]=(yz-wx)*sz;out[10]=(1-(xx+yy))*sz;out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=v[2];out[15]=1;return out}function fromRotationTranslationScaleOrigin(out,q,v,s,o){var x=q[0],y=q[1],z=q[2],w=q[3];var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var xy=x*y2;var xz=x*z2;var yy=y*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;var sx=s[0];var sy=s[1];var sz=s[2];var ox=o[0];var oy=o[1];var oz=o[2];var out0=(1-(yy+zz))*sx;var out1=(xy+wz)*sx;var out2=(xz-wy)*sx;var out4=\n(xy-wz)*sy;var out5=(1-(xx+zz))*sy;var out6=(yz+wx)*sy;var out8=(xz+wy)*sz;var out9=(yz-wx)*sz;var out10=(1-(xx+yy))*sz;out[0]=out0;out[1]=out1;out[2]=out2;out[3]=0;out[4]=out4;out[5]=out5;out[6]=out6;out[7]=0;out[8]=out8;out[9]=out9;out[10]=out10;out[11]=0;out[12]=v[0]+ox-(out0*ox+out4*oy+out8*oz);out[13]=v[1]+oy-(out1*ox+out5*oy+out9*oz);out[14]=v[2]+oz-(out2*ox+out6*oy+out10*oz);out[15]=1;return out}function fromQuat(out,q){var x=q[0],y=q[1],z=q[2],w=q[3];var x2=x+x;var y2=y+y;var z2=z+z;var xx=\nx*x2;var yx=y*x2;var yy=y*y2;var zx=z*x2;var zy=z*y2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;out[0]=1-yy-zz;out[1]=yx+wz;out[2]=zx-wy;out[3]=0;out[4]=yx-wz;out[5]=1-xx-zz;out[6]=zy+wx;out[7]=0;out[8]=zx+wy;out[9]=zy-wx;out[10]=1-xx-yy;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function frustum(out,left,right,bottom,top,near,far){var rl=1/(right-left);var tb=1/(top-bottom);var nf=1/(near-far);out[0]=near*2*rl;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=near*2*tb;out[6]=0;out[7]=\n0;out[8]=(right+left)*rl;out[9]=(top+bottom)*tb;out[10]=(far+near)*nf;out[11]=-1;out[12]=0;out[13]=0;out[14]=far*near*2*nf;out[15]=0;return out}function perspectiveNO(out,fovy,aspect,near,far){var f=1/Math.tan(fovy/2);out[0]=f/aspect;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=f;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[11]=-1;out[12]=0;out[13]=0;out[15]=0;if(far!=null&&far!==Infinity){var nf=1/(near-far);out[10]=(far+near)*nf;out[14]=2*far*near*nf}else{out[10]=-1;out[14]=-2*near}return out}var perspective=\nperspectiveNO;function perspectiveZO(out,fovy,aspect,near,far){var f=1/Math.tan(fovy/2);out[0]=f/aspect;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=f;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[11]=-1;out[12]=0;out[13]=0;out[15]=0;if(far!=null&&far!==Infinity){var nf=1/(near-far);out[10]=far*nf;out[14]=far*near*nf}else{out[10]=-1;out[14]=-near}return out}function perspectiveFromFieldOfView(out,fov,near,far){var upTan=Math.tan(fov.upDegrees*Math.PI/180);var downTan=Math.tan(fov.downDegrees*Math.PI/180);\nvar leftTan=Math.tan(fov.leftDegrees*Math.PI/180);var rightTan=Math.tan(fov.rightDegrees*Math.PI/180);var xScale=2/(leftTan+rightTan);var yScale=2/(upTan+downTan);out[0]=xScale;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=yScale;out[6]=0;out[7]=0;out[8]=-((leftTan-rightTan)*xScale*.5);out[9]=(upTan-downTan)*yScale*.5;out[10]=far/(near-far);out[11]=-1;out[12]=0;out[13]=0;out[14]=far*near/(near-far);out[15]=0;return out}function orthoNO(out,left,right,bottom,top,near,far){var lr=1/(left-right);var bt=\n1/(bottom-top);var nf=1/(near-far);out[0]=-2*lr;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=-2*bt;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=2*nf;out[11]=0;out[12]=(left+right)*lr;out[13]=(top+bottom)*bt;out[14]=(far+near)*nf;out[15]=1;return out}var ortho=orthoNO;function orthoZO(out,left,right,bottom,top,near,far){var lr=1/(left-right);var bt=1/(bottom-top);var nf=1/(near-far);out[0]=-2*lr;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=-2*bt;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=nf;out[11]=0;\nout[12]=(left+right)*lr;out[13]=(top+bottom)*bt;out[14]=near*nf;out[15]=1;return out}function lookAt(out,eye,center,up){var x0,x1,x2,y0,y1,y2,z0,z1,z2,len;var eyex=eye[0];var eyey=eye[1];var eyez=eye[2];var upx=up[0];var upy=up[1];var upz=up[2];var centerx=center[0];var centery=center[1];var centerz=center[2];if(Math.abs(eyex-centerx)<EPSILON&&Math.abs(eyey-centery)<EPSILON&&Math.abs(eyez-centerz)<EPSILON)return identity$2(out);z0=eyex-centerx;z1=eyey-centery;z2=eyez-centerz;len=1/Math.hypot(z0,z1,\nz2);z0*=len;z1*=len;z2*=len;x0=upy*z2-upz*z1;x1=upz*z0-upx*z2;x2=upx*z1-upy*z0;len=Math.hypot(x0,x1,x2);if(!len){x0=0;x1=0;x2=0}else{len=1/len;x0*=len;x1*=len;x2*=len}y0=z1*x2-z2*x1;y1=z2*x0-z0*x2;y2=z0*x1-z1*x0;len=Math.hypot(y0,y1,y2);if(!len){y0=0;y1=0;y2=0}else{len=1/len;y0*=len;y1*=len;y2*=len}out[0]=x0;out[1]=y0;out[2]=z0;out[3]=0;out[4]=x1;out[5]=y1;out[6]=z1;out[7]=0;out[8]=x2;out[9]=y2;out[10]=z2;out[11]=0;out[12]=-(x0*eyex+x1*eyey+x2*eyez);out[13]=-(y0*eyex+y1*eyey+y2*eyez);out[14]=-(z0*\neyex+z1*eyey+z2*eyez);out[15]=1;return out}function targetTo(out,eye,target,up){var eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2];var z0=eyex-target[0],z1=eyey-target[1],z2=eyez-target[2];var len=z0*z0+z1*z1+z2*z2;if(len>0){len=1/Math.sqrt(len);z0*=len;z1*=len;z2*=len}var x0=upy*z2-upz*z1,x1=upz*z0-upx*z2,x2=upx*z1-upy*z0;len=x0*x0+x1*x1+x2*x2;if(len>0){len=1/Math.sqrt(len);x0*=len;x1*=len;x2*=len}out[0]=x0;out[1]=x1;out[2]=x2;out[3]=0;out[4]=z1*x2-z2*x1;out[5]=z2*x0-z0*x2;out[6]=\nz0*x1-z1*x0;out[7]=0;out[8]=z0;out[9]=z1;out[10]=z2;out[11]=0;out[12]=eyex;out[13]=eyey;out[14]=eyez;out[15]=1;return out}function str$5(a){return\"mat4(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\", \"+a[6]+\", \"+a[7]+\", \"+a[8]+\", \"+a[9]+\", \"+a[10]+\", \"+a[11]+\", \"+a[12]+\", \"+a[13]+\", \"+a[14]+\", \"+a[15]+\")\"}function frob(a){return Math.hypot(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])}function add$5(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=\na[2]+b[2];out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];out[6]=a[6]+b[6];out[7]=a[7]+b[7];out[8]=a[8]+b[8];out[9]=a[9]+b[9];out[10]=a[10]+b[10];out[11]=a[11]+b[11];out[12]=a[12]+b[12];out[13]=a[13]+b[13];out[14]=a[14]+b[14];out[15]=a[15]+b[15];return out}function subtract$3(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];out[4]=a[4]-b[4];out[5]=a[5]-b[5];out[6]=a[6]-b[6];out[7]=a[7]-b[7];out[8]=a[8]-b[8];out[9]=a[9]-b[9];out[10]=a[10]-b[10];out[11]=a[11]-b[11];out[12]=\na[12]-b[12];out[13]=a[13]-b[13];out[14]=a[14]-b[14];out[15]=a[15]-b[15];return out}function multiplyScalar(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;out[4]=a[4]*b;out[5]=a[5]*b;out[6]=a[6]*b;out[7]=a[7]*b;out[8]=a[8]*b;out[9]=a[9]*b;out[10]=a[10]*b;out[11]=a[11]*b;out[12]=a[12]*b;out[13]=a[13]*b;out[14]=a[14]*b;out[15]=a[15]*b;return out}function multiplyScalarAndAdd(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;out[4]=\na[4]+b[4]*scale;out[5]=a[5]+b[5]*scale;out[6]=a[6]+b[6]*scale;out[7]=a[7]+b[7]*scale;out[8]=a[8]+b[8]*scale;out[9]=a[9]+b[9]*scale;out[10]=a[10]+b[10]*scale;out[11]=a[11]+b[11]*scale;out[12]=a[12]+b[12]*scale;out[13]=a[13]+b[13]*scale;out[14]=a[14]+b[14]*scale;out[15]=a[15]+b[15]*scale;return out}function exactEquals$5(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===\nb[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function equals$5(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var a4=a[4],a5=a[5],a6=a[6],a7=a[7];var a8=a[8],a9=a[9],a10=a[10],a11=a[11];var a12=a[12],a13=a[13],a14=a[14],a15=a[15];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];var b4=b[4],b5=b[5],b6=b[6],b7=b[7];var b8=b[8],b9=b[9],b10=b[10],b11=b[11];var b12=b[12],b13=b[13],b14=b[14],b15=b[15];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),\nMath.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))&&Math.abs(a9-b9)<=EPSILON*Math.max(1,Math.abs(a9),\nMath.abs(b9))&&Math.abs(a10-b10)<=EPSILON*Math.max(1,Math.abs(a10),Math.abs(b10))&&Math.abs(a11-b11)<=EPSILON*Math.max(1,Math.abs(a11),Math.abs(b11))&&Math.abs(a12-b12)<=EPSILON*Math.max(1,Math.abs(a12),Math.abs(b12))&&Math.abs(a13-b13)<=EPSILON*Math.max(1,Math.abs(a13),Math.abs(b13))&&Math.abs(a14-b14)<=EPSILON*Math.max(1,Math.abs(a14),Math.abs(b14))&&Math.abs(a15-b15)<=EPSILON*Math.max(1,Math.abs(a15),Math.abs(b15))}var mul$5=multiply$5;var sub$3=subtract$3;var mat4=Object.freeze({__proto__:null,\ncreate:create$5,clone:clone$5,copy:copy$5,fromValues:fromValues$5,set:set$5,identity:identity$2,transpose:transpose,invert:invert$2,adjoint:adjoint,determinant:determinant,multiply:multiply$5,translate:translate$1,scale:scale$5,rotate:rotate$1,rotateX:rotateX$3,rotateY:rotateY$3,rotateZ:rotateZ$3,fromTranslation:fromTranslation$1,fromScaling:fromScaling,fromRotation:fromRotation$1,fromXRotation:fromXRotation,fromYRotation:fromYRotation,fromZRotation:fromZRotation,fromRotationTranslation:fromRotationTranslation$1,\nfromQuat2:fromQuat2,getTranslation:getTranslation$1,getScaling:getScaling,getRotation:getRotation,decompose:decompose,fromRotationTranslationScale:fromRotationTranslationScale,fromRotationTranslationScaleOrigin:fromRotationTranslationScaleOrigin,fromQuat:fromQuat,frustum:frustum,perspectiveNO:perspectiveNO,perspective:perspective,perspectiveZO:perspectiveZO,perspectiveFromFieldOfView:perspectiveFromFieldOfView,orthoNO:orthoNO,ortho:ortho,orthoZO:orthoZO,lookAt:lookAt,targetTo:targetTo,str:str$5,frob:frob,\nadd:add$5,subtract:subtract$3,multiplyScalar:multiplyScalar,multiplyScalarAndAdd:multiplyScalarAndAdd,exactEquals:exactEquals$5,equals:equals$5,mul:mul$5,sub:sub$3});function create$4(){var out=new ARRAY_TYPE(3);if(ARRAY_TYPE!=Float32Array){out[0]=0;out[1]=0;out[2]=0}return out}function clone$4(a){var out=new ARRAY_TYPE(3);out[0]=a[0];out[1]=a[1];out[2]=a[2];return out}function length$4(a){var x=a[0];var y=a[1];var z=a[2];return Math.hypot(x,y,z)}function fromValues$4(x,y,z){var out=new ARRAY_TYPE(3);\nout[0]=x;out[1]=y;out[2]=z;return out}function copy$4(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];return out}function set$4(out,x,y,z){out[0]=x;out[1]=y;out[2]=z;return out}function add$4(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];return out}function subtract$2(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];return out}function multiply$4(out,a,b){out[0]=a[0]*b[0];out[1]=a[1]*b[1];out[2]=a[2]*b[2];return out}function divide$2(out,a,b){out[0]=a[0]/b[0];out[1]=a[1]/b[1];\nout[2]=a[2]/b[2];return out}function ceil$2(out,a){out[0]=Math.ceil(a[0]);out[1]=Math.ceil(a[1]);out[2]=Math.ceil(a[2]);return out}function floor$2(out,a){out[0]=Math.floor(a[0]);out[1]=Math.floor(a[1]);out[2]=Math.floor(a[2]);return out}function min$2(out,a,b){out[0]=Math.min(a[0],b[0]);out[1]=Math.min(a[1],b[1]);out[2]=Math.min(a[2],b[2]);return out}function max$2(out,a,b){out[0]=Math.max(a[0],b[0]);out[1]=Math.max(a[1],b[1]);out[2]=Math.max(a[2],b[2]);return out}function round$2(out,a){out[0]=\nMath.round(a[0]);out[1]=Math.round(a[1]);out[2]=Math.round(a[2]);return out}function scale$4(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;return out}function scaleAndAdd$2(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;return out}function distance$2(a,b){var x=b[0]-a[0];var y=b[1]-a[1];var z=b[2]-a[2];return Math.hypot(x,y,z)}function squaredDistance$2(a,b){var x=b[0]-a[0];var y=b[1]-a[1];var z=b[2]-a[2];return x*x+y*y+z*z}function squaredLength$4(a){var x=\na[0];var y=a[1];var z=a[2];return x*x+y*y+z*z}function negate$2(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=-a[2];return out}function inverse$2(out,a){out[0]=1/a[0];out[1]=1/a[1];out[2]=1/a[2];return out}function normalize$4(out,a){var x=a[0];var y=a[1];var z=a[2];var len=x*x+y*y+z*z;if(len>0)len=1/Math.sqrt(len);out[0]=a[0]*len;out[1]=a[1]*len;out[2]=a[2]*len;return out}function dot$4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cross$2(out,a,b){var ax=a[0],ay=a[1],az=a[2];var bx=b[0],by=b[1],\nbz=b[2];out[0]=ay*bz-az*by;out[1]=az*bx-ax*bz;out[2]=ax*by-ay*bx;return out}function lerp$4(out,a,b,t){var ax=a[0];var ay=a[1];var az=a[2];out[0]=ax+t*(b[0]-ax);out[1]=ay+t*(b[1]-ay);out[2]=az+t*(b[2]-az);return out}function slerp$1(out,a,b,t){var angle=Math.acos(Math.min(Math.max(dot$4(a,b),-1),1));var sinTotal=Math.sin(angle);var ratioA=Math.sin((1-t)*angle)/sinTotal;var ratioB=Math.sin(t*angle)/sinTotal;out[0]=ratioA*a[0]+ratioB*b[0];out[1]=ratioA*a[1]+ratioB*b[1];out[2]=ratioA*a[2]+ratioB*b[2];\nreturn out}function hermite(out,a,b,c,d,t){var factorTimes2=t*t;var factor1=factorTimes2*(2*t-3)+1;var factor2=factorTimes2*(t-2)+t;var factor3=factorTimes2*(t-1);var factor4=factorTimes2*(3-2*t);out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4;out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4;out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4;return out}function bezier(out,a,b,c,d,t){var inverseFactor=1-t;var inverseFactorTimesTwo=inverseFactor*inverseFactor;var factorTimes2=\nt*t;var factor1=inverseFactorTimesTwo*inverseFactor;var factor2=3*t*inverseFactorTimesTwo;var factor3=3*factorTimes2*inverseFactor;var factor4=factorTimes2*t;out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4;out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4;out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4;return out}function random$3(out,scale){scale=scale||1;var r=RANDOM()*2*Math.PI;var z=RANDOM()*2-1;var zScale=Math.sqrt(1-z*z)*scale;out[0]=Math.cos(r)*zScale;out[1]=\nMath.sin(r)*zScale;out[2]=z*scale;return out}function transformMat4$2(out,a,m){var x=a[0],y=a[1],z=a[2];var w=m[3]*x+m[7]*y+m[11]*z+m[15];w=w||1;out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w;out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w;out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w;return out}function transformMat3$1(out,a,m){var x=a[0],y=a[1],z=a[2];out[0]=x*m[0]+y*m[3]+z*m[6];out[1]=x*m[1]+y*m[4]+z*m[7];out[2]=x*m[2]+y*m[5]+z*m[8];return out}function transformQuat$1(out,a,q){var qx=q[0],qy=q[1],qz=q[2],qw=q[3];var x=\na[0],y=a[1],z=a[2];var uvx=qy*z-qz*y,uvy=qz*x-qx*z,uvz=qx*y-qy*x;var uuvx=qy*uvz-qz*uvy,uuvy=qz*uvx-qx*uvz,uuvz=qx*uvy-qy*uvx;var w2=qw*2;uvx*=w2;uvy*=w2;uvz*=w2;uuvx*=2;uuvy*=2;uuvz*=2;out[0]=x+uvx+uuvx;out[1]=y+uvy+uuvy;out[2]=z+uvz+uuvz;return out}function rotateX$2(out,a,b,rad){var p=[],r=[];p[0]=a[0]-b[0];p[1]=a[1]-b[1];p[2]=a[2]-b[2];r[0]=p[0];r[1]=p[1]*Math.cos(rad)-p[2]*Math.sin(rad);r[2]=p[1]*Math.sin(rad)+p[2]*Math.cos(rad);out[0]=r[0]+b[0];out[1]=r[1]+b[1];out[2]=r[2]+b[2];return out}function rotateY$2(out,\na,b,rad){var p=[],r=[];p[0]=a[0]-b[0];p[1]=a[1]-b[1];p[2]=a[2]-b[2];r[0]=p[2]*Math.sin(rad)+p[0]*Math.cos(rad);r[1]=p[1];r[2]=p[2]*Math.cos(rad)-p[0]*Math.sin(rad);out[0]=r[0]+b[0];out[1]=r[1]+b[1];out[2]=r[2]+b[2];return out}function rotateZ$2(out,a,b,rad){var p=[],r=[];p[0]=a[0]-b[0];p[1]=a[1]-b[1];p[2]=a[2]-b[2];r[0]=p[0]*Math.cos(rad)-p[1]*Math.sin(rad);r[1]=p[0]*Math.sin(rad)+p[1]*Math.cos(rad);r[2]=p[2];out[0]=r[0]+b[0];out[1]=r[1]+b[1];out[2]=r[2]+b[2];return out}function angle$1(a,b){var ax=\na[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2],mag=Math.sqrt((ax*ax+ay*ay+az*az)*(bx*bx+by*by+bz*bz)),cosine=mag&&dot$4(a,b)/mag;return Math.acos(Math.min(Math.max(cosine,-1),1))}function zero$2(out){out[0]=0;out[1]=0;out[2]=0;return out}function str$4(a){return\"vec3(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\")\"}function exactEquals$4(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}function equals$4(a,b){var a0=a[0],a1=a[1],a2=a[2];var b0=b[0],b1=b[1],b2=b[2];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),\nMath.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))}var sub$2=subtract$2;var mul$4=multiply$4;var div$2=divide$2;var dist$2=distance$2;var sqrDist$2=squaredDistance$2;var len$4=length$4;var sqrLen$4=squaredLength$4;var forEach$2=function(){var vec=create$4();return function(a,stride,offset,count,fn,arg){var i,l;if(!stride)stride=3;if(!offset)offset=0;if(count)l=Math.min(count*stride+offset,a.length);else l=a.length;\nfor(i=offset;i<l;i+=stride){vec[0]=a[i];vec[1]=a[i+1];vec[2]=a[i+2];fn(vec,vec,arg);a[i]=vec[0];a[i+1]=vec[1];a[i+2]=vec[2]}return a}}();var vec3=Object.freeze({__proto__:null,create:create$4,clone:clone$4,length:length$4,fromValues:fromValues$4,copy:copy$4,set:set$4,add:add$4,subtract:subtract$2,multiply:multiply$4,divide:divide$2,ceil:ceil$2,floor:floor$2,min:min$2,max:max$2,round:round$2,scale:scale$4,scaleAndAdd:scaleAndAdd$2,distance:distance$2,squaredDistance:squaredDistance$2,squaredLength:squaredLength$4,\nnegate:negate$2,inverse:inverse$2,normalize:normalize$4,dot:dot$4,cross:cross$2,lerp:lerp$4,slerp:slerp$1,hermite:hermite,bezier:bezier,random:random$3,transformMat4:transformMat4$2,transformMat3:transformMat3$1,transformQuat:transformQuat$1,rotateX:rotateX$2,rotateY:rotateY$2,rotateZ:rotateZ$2,angle:angle$1,zero:zero$2,str:str$4,exactEquals:exactEquals$4,equals:equals$4,sub:sub$2,mul:mul$4,div:div$2,dist:dist$2,sqrDist:sqrDist$2,len:len$4,sqrLen:sqrLen$4,forEach:forEach$2});function create$3(){var out=\nnew ARRAY_TYPE(4);if(ARRAY_TYPE!=Float32Array){out[0]=0;out[1]=0;out[2]=0;out[3]=0}return out}function clone$3(a){var out=new ARRAY_TYPE(4);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}function fromValues$3(x,y,z,w){var out=new ARRAY_TYPE(4);out[0]=x;out[1]=y;out[2]=z;out[3]=w;return out}function copy$3(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}function set$3(out,x,y,z,w){out[0]=x;out[1]=y;out[2]=z;out[3]=w;return out}function add$3(out,a,b){out[0]=a[0]+b[0];\nout[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];return out}function subtract$1(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];return out}function multiply$3(out,a,b){out[0]=a[0]*b[0];out[1]=a[1]*b[1];out[2]=a[2]*b[2];out[3]=a[3]*b[3];return out}function divide$1(out,a,b){out[0]=a[0]/b[0];out[1]=a[1]/b[1];out[2]=a[2]/b[2];out[3]=a[3]/b[3];return out}function ceil$1(out,a){out[0]=Math.ceil(a[0]);out[1]=Math.ceil(a[1]);out[2]=Math.ceil(a[2]);out[3]=Math.ceil(a[3]);return out}\nfunction floor$1(out,a){out[0]=Math.floor(a[0]);out[1]=Math.floor(a[1]);out[2]=Math.floor(a[2]);out[3]=Math.floor(a[3]);return out}function min$1(out,a,b){out[0]=Math.min(a[0],b[0]);out[1]=Math.min(a[1],b[1]);out[2]=Math.min(a[2],b[2]);out[3]=Math.min(a[3],b[3]);return out}function max$1(out,a,b){out[0]=Math.max(a[0],b[0]);out[1]=Math.max(a[1],b[1]);out[2]=Math.max(a[2],b[2]);out[3]=Math.max(a[3],b[3]);return out}function round$1(out,a){out[0]=Math.round(a[0]);out[1]=Math.round(a[1]);out[2]=Math.round(a[2]);\nout[3]=Math.round(a[3]);return out}function scale$3(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;return out}function scaleAndAdd$1(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;return out}function distance$1(a,b){var x=b[0]-a[0];var y=b[1]-a[1];var z=b[2]-a[2];var w=b[3]-a[3];return Math.hypot(x,y,z,w)}function squaredDistance$1(a,b){var x=b[0]-a[0];var y=b[1]-a[1];var z=b[2]-a[2];var w=b[3]-a[3];return x*x+y*y+z*z+w*\nw}function length$3(a){var x=a[0];var y=a[1];var z=a[2];var w=a[3];return Math.hypot(x,y,z,w)}function squaredLength$3(a){var x=a[0];var y=a[1];var z=a[2];var w=a[3];return x*x+y*y+z*z+w*w}function negate$1(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=-a[2];out[3]=-a[3];return out}function inverse$1(out,a){out[0]=1/a[0];out[1]=1/a[1];out[2]=1/a[2];out[3]=1/a[3];return out}function normalize$3(out,a){var x=a[0];var y=a[1];var z=a[2];var w=a[3];var len=x*x+y*y+z*z+w*w;if(len>0)len=1/Math.sqrt(len);out[0]=\nx*len;out[1]=y*len;out[2]=z*len;out[3]=w*len;return out}function dot$3(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function cross$1(out,u,v,w){var A=v[0]*w[1]-v[1]*w[0],B=v[0]*w[2]-v[2]*w[0],C=v[0]*w[3]-v[3]*w[0],D=v[1]*w[2]-v[2]*w[1],E=v[1]*w[3]-v[3]*w[1],F=v[2]*w[3]-v[3]*w[2];var G=u[0];var H=u[1];var I=u[2];var J=u[3];out[0]=H*F-I*E+J*D;out[1]=-(G*F)+I*C-J*B;out[2]=G*E-H*C+J*A;out[3]=-(G*D)+H*B-I*A;return out}function lerp$3(out,a,b,t){var ax=a[0];var ay=a[1];var az=a[2];var aw=a[3];out[0]=\nax+t*(b[0]-ax);out[1]=ay+t*(b[1]-ay);out[2]=az+t*(b[2]-az);out[3]=aw+t*(b[3]-aw);return out}function random$2(out,scale){scale=scale||1;var v1,v2,v3,v4;var s1,s2;do{v1=RANDOM()*2-1;v2=RANDOM()*2-1;s1=v1*v1+v2*v2}while(s1>=1);do{v3=RANDOM()*2-1;v4=RANDOM()*2-1;s2=v3*v3+v4*v4}while(s2>=1);var d=Math.sqrt((1-s1)/s2);out[0]=scale*v1;out[1]=scale*v2;out[2]=scale*v3*d;out[3]=scale*v4*d;return out}function transformMat4$1(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w;out[1]=\nm[1]*x+m[5]*y+m[9]*z+m[13]*w;out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w;out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w;return out}function transformQuat(out,a,q){var x=a[0],y=a[1],z=a[2];var qx=q[0],qy=q[1],qz=q[2],qw=q[3];var ix=qw*x+qy*z-qz*y;var iy=qw*y+qz*x-qx*z;var iz=qw*z+qx*y-qy*x;var iw=-qx*x-qy*y-qz*z;out[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy;out[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz;out[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx;out[3]=a[3];return out}function zero$1(out){out[0]=0;out[1]=0;out[2]=0;out[3]=0;return out}function str$3(a){return\"vec4(\"+\na[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"}function exactEquals$3(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}function equals$3(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))}var sub$1=subtract$1;\nvar mul$3=multiply$3;var div$1=divide$1;var dist$1=distance$1;var sqrDist$1=squaredDistance$1;var len$3=length$3;var sqrLen$3=squaredLength$3;var forEach$1=function(){var vec=create$3();return function(a,stride,offset,count,fn,arg){var i,l;if(!stride)stride=4;if(!offset)offset=0;if(count)l=Math.min(count*stride+offset,a.length);else l=a.length;for(i=offset;i<l;i+=stride){vec[0]=a[i];vec[1]=a[i+1];vec[2]=a[i+2];vec[3]=a[i+3];fn(vec,vec,arg);a[i]=vec[0];a[i+1]=vec[1];a[i+2]=vec[2];a[i+3]=vec[3]}return a}}();\nvar vec4=Object.freeze({__proto__:null,create:create$3,clone:clone$3,fromValues:fromValues$3,copy:copy$3,set:set$3,add:add$3,subtract:subtract$1,multiply:multiply$3,divide:divide$1,ceil:ceil$1,floor:floor$1,min:min$1,max:max$1,round:round$1,scale:scale$3,scaleAndAdd:scaleAndAdd$1,distance:distance$1,squaredDistance:squaredDistance$1,length:length$3,squaredLength:squaredLength$3,negate:negate$1,inverse:inverse$1,normalize:normalize$3,dot:dot$3,cross:cross$1,lerp:lerp$3,random:random$2,transformMat4:transformMat4$1,\ntransformQuat:transformQuat,zero:zero$1,str:str$3,exactEquals:exactEquals$3,equals:equals$3,sub:sub$1,mul:mul$3,div:div$1,dist:dist$1,sqrDist:sqrDist$1,len:len$3,sqrLen:sqrLen$3,forEach:forEach$1});function create$2(){var out=new ARRAY_TYPE(4);if(ARRAY_TYPE!=Float32Array){out[0]=0;out[1]=0;out[2]=0}out[3]=1;return out}function identity$1(out){out[0]=0;out[1]=0;out[2]=0;out[3]=1;return out}function setAxisAngle(out,axis,rad){rad=rad*.5;var s=Math.sin(rad);out[0]=s*axis[0];out[1]=s*axis[1];out[2]=s*\naxis[2];out[3]=Math.cos(rad);return out}function getAxisAngle(out_axis,q){var rad=Math.acos(q[3])*2;var s=Math.sin(rad/2);if(s>EPSILON){out_axis[0]=q[0]/s;out_axis[1]=q[1]/s;out_axis[2]=q[2]/s}else{out_axis[0]=1;out_axis[1]=0;out_axis[2]=0}return rad}function getAngle(a,b){var dotproduct=dot$2(a,b);return Math.acos(2*dotproduct*dotproduct-1)}function multiply$2(out,a,b){var ax=a[0],ay=a[1],az=a[2],aw=a[3];var bx=b[0],by=b[1],bz=b[2],bw=b[3];out[0]=ax*bw+aw*bx+ay*bz-az*by;out[1]=ay*bw+aw*by+az*bx-\nax*bz;out[2]=az*bw+aw*bz+ax*by-ay*bx;out[3]=aw*bw-ax*bx-ay*by-az*bz;return out}function rotateX$1(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3];var bx=Math.sin(rad),bw=Math.cos(rad);out[0]=ax*bw+aw*bx;out[1]=ay*bw+az*bx;out[2]=az*bw-ay*bx;out[3]=aw*bw-ax*bx;return out}function rotateY$1(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3];var by=Math.sin(rad),bw=Math.cos(rad);out[0]=ax*bw-az*by;out[1]=ay*bw+aw*by;out[2]=az*bw+ax*by;out[3]=aw*bw-ay*by;return out}function rotateZ$1(out,a,\nrad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3];var bz=Math.sin(rad),bw=Math.cos(rad);out[0]=ax*bw+ay*bz;out[1]=ay*bw-ax*bz;out[2]=az*bw+aw*bz;out[3]=aw*bw-az*bz;return out}function calculateW(out,a){var x=a[0],y=a[1],z=a[2];out[0]=x;out[1]=y;out[2]=z;out[3]=Math.sqrt(Math.abs(1-x*x-y*y-z*z));return out}function exp(out,a){var x=a[0],y=a[1],z=a[2],w=a[3];var r=Math.sqrt(x*x+y*y+z*z);var et=Math.exp(w);var s=r>0?et*Math.sin(r)/r:0;out[0]=x*s;out[1]=y*s;out[2]=z*s;out[3]=et*Math.cos(r);return out}\nfunction ln(out,a){var x=a[0],y=a[1],z=a[2],w=a[3];var r=Math.sqrt(x*x+y*y+z*z);var t=r>0?Math.atan2(r,w)/r:0;out[0]=x*t;out[1]=y*t;out[2]=z*t;out[3]=.5*Math.log(x*x+y*y+z*z+w*w);return out}function pow(out,a,b){ln(out,a);scale$2(out,out,b);exp(out,out);return out}function slerp(out,a,b,t){var ax=a[0],ay=a[1],az=a[2],aw=a[3];var bx=b[0],by=b[1],bz=b[2],bw=b[3];var omega,cosom,sinom,scale0,scale1;cosom=ax*bx+ay*by+az*bz+aw*bw;if(cosom<0){cosom=-cosom;bx=-bx;by=-by;bz=-bz;bw=-bw}if(1-cosom>EPSILON){omega=\nMath.acos(cosom);sinom=Math.sin(omega);scale0=Math.sin((1-t)*omega)/sinom;scale1=Math.sin(t*omega)/sinom}else{scale0=1-t;scale1=t}out[0]=scale0*ax+scale1*bx;out[1]=scale0*ay+scale1*by;out[2]=scale0*az+scale1*bz;out[3]=scale0*aw+scale1*bw;return out}function random$1(out){var u1=RANDOM();var u2=RANDOM();var u3=RANDOM();var sqrt1MinusU1=Math.sqrt(1-u1);var sqrtU1=Math.sqrt(u1);out[0]=sqrt1MinusU1*Math.sin(2*Math.PI*u2);out[1]=sqrt1MinusU1*Math.cos(2*Math.PI*u2);out[2]=sqrtU1*Math.sin(2*Math.PI*u3);\nout[3]=sqrtU1*Math.cos(2*Math.PI*u3);return out}function invert$1(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var dot=a0*a0+a1*a1+a2*a2+a3*a3;var invDot=dot?1/dot:0;out[0]=-a0*invDot;out[1]=-a1*invDot;out[2]=-a2*invDot;out[3]=a3*invDot;return out}function conjugate$1(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=-a[2];out[3]=a[3];return out}function fromMat3(out,m){var fTrace=m[0]+m[4]+m[8];var fRoot;if(fTrace>0){fRoot=Math.sqrt(fTrace+1);out[3]=.5*fRoot;fRoot=.5/fRoot;out[0]=(m[5]-m[7])*fRoot;out[1]=(m[6]-\nm[2])*fRoot;out[2]=(m[1]-m[3])*fRoot}else{var i=0;if(m[4]>m[0])i=1;if(m[8]>m[i*3+i])i=2;var j=(i+1)%3;var k=(i+2)%3;fRoot=Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k]+1);out[i]=.5*fRoot;fRoot=.5/fRoot;out[3]=(m[j*3+k]-m[k*3+j])*fRoot;out[j]=(m[j*3+i]+m[i*3+j])*fRoot;out[k]=(m[k*3+i]+m[i*3+k])*fRoot}return out}function fromEuler(out,x,y,z){var order=arguments.length>4&&arguments[4]!==undefined?arguments[4]:ANGLE_ORDER;var halfToRad=Math.PI/360;x*=halfToRad;z*=halfToRad;y*=halfToRad;var sx=Math.sin(x);var cx=\nMath.cos(x);var sy=Math.sin(y);var cy=Math.cos(y);var sz=Math.sin(z);var cz=Math.cos(z);switch(order){case \"xyz\":out[0]=sx*cy*cz+cx*sy*sz;out[1]=cx*sy*cz-sx*cy*sz;out[2]=cx*cy*sz+sx*sy*cz;out[3]=cx*cy*cz-sx*sy*sz;break;case \"xzy\":out[0]=sx*cy*cz-cx*sy*sz;out[1]=cx*sy*cz-sx*cy*sz;out[2]=cx*cy*sz+sx*sy*cz;out[3]=cx*cy*cz+sx*sy*sz;break;case \"yxz\":out[0]=sx*cy*cz+cx*sy*sz;out[1]=cx*sy*cz-sx*cy*sz;out[2]=cx*cy*sz-sx*sy*cz;out[3]=cx*cy*cz+sx*sy*sz;break;case \"yzx\":out[0]=sx*cy*cz+cx*sy*sz;out[1]=cx*sy*\ncz+sx*cy*sz;out[2]=cx*cy*sz-sx*sy*cz;out[3]=cx*cy*cz-sx*sy*sz;break;case \"zxy\":out[0]=sx*cy*cz-cx*sy*sz;out[1]=cx*sy*cz+sx*cy*sz;out[2]=cx*cy*sz+sx*sy*cz;out[3]=cx*cy*cz-sx*sy*sz;break;case \"zyx\":out[0]=sx*cy*cz-cx*sy*sz;out[1]=cx*sy*cz+sx*cy*sz;out[2]=cx*cy*sz-sx*sy*cz;out[3]=cx*cy*cz+sx*sy*sz;break;default:throw new Error(\"Unknown angle order \"+order);}return out}function str$2(a){return\"quat(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"}var clone$2=clone$3;var fromValues$2=fromValues$3;var copy$2=copy$3;\nvar set$2=set$3;var add$2=add$3;var mul$2=multiply$2;var scale$2=scale$3;var dot$2=dot$3;var lerp$2=lerp$3;var length$2=length$3;var len$2=length$2;var squaredLength$2=squaredLength$3;var sqrLen$2=squaredLength$2;var normalize$2=normalize$3;var exactEquals$2=exactEquals$3;function equals$2(a,b){return Math.abs(dot$3(a,b))>=1-EPSILON}var rotationTo=function(){var tmpvec3=create$4();var xUnitVec3=fromValues$4(1,0,0);var yUnitVec3=fromValues$4(0,1,0);return function(out,a,b){var dot=dot$4(a,b);if(dot<\n-.999999){cross$2(tmpvec3,xUnitVec3,a);if(len$4(tmpvec3)<1E-6)cross$2(tmpvec3,yUnitVec3,a);normalize$4(tmpvec3,tmpvec3);setAxisAngle(out,tmpvec3,Math.PI);return out}else if(dot>.999999){out[0]=0;out[1]=0;out[2]=0;out[3]=1;return out}else{cross$2(tmpvec3,a,b);out[0]=tmpvec3[0];out[1]=tmpvec3[1];out[2]=tmpvec3[2];out[3]=1+dot;return normalize$2(out,out)}}}();var sqlerp=function(){var temp1=create$2();var temp2=create$2();return function(out,a,b,c,d,t){slerp(temp1,a,d,t);slerp(temp2,b,c,t);slerp(out,\ntemp1,temp2,2*t*(1-t));return out}}();var setAxes=function(){var matr=create$6();return function(out,view,right,up){matr[0]=right[0];matr[3]=right[1];matr[6]=right[2];matr[1]=up[0];matr[4]=up[1];matr[7]=up[2];matr[2]=-view[0];matr[5]=-view[1];matr[8]=-view[2];return normalize$2(out,fromMat3(out,matr))}}();var quat=Object.freeze({__proto__:null,create:create$2,identity:identity$1,setAxisAngle:setAxisAngle,getAxisAngle:getAxisAngle,getAngle:getAngle,multiply:multiply$2,rotateX:rotateX$1,rotateY:rotateY$1,\nrotateZ:rotateZ$1,calculateW:calculateW,exp:exp,ln:ln,pow:pow,slerp:slerp,random:random$1,invert:invert$1,conjugate:conjugate$1,fromMat3:fromMat3,fromEuler:fromEuler,str:str$2,clone:clone$2,fromValues:fromValues$2,copy:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,dot:dot$2,lerp:lerp$2,length:length$2,len:len$2,squaredLength:squaredLength$2,sqrLen:sqrLen$2,normalize:normalize$2,exactEquals:exactEquals$2,equals:equals$2,rotationTo:rotationTo,sqlerp:sqlerp,setAxes:setAxes});function create$1(){var dq=\nnew ARRAY_TYPE(8);if(ARRAY_TYPE!=Float32Array){dq[0]=0;dq[1]=0;dq[2]=0;dq[4]=0;dq[5]=0;dq[6]=0;dq[7]=0}dq[3]=1;return dq}function clone$1(a){var dq=new ARRAY_TYPE(8);dq[0]=a[0];dq[1]=a[1];dq[2]=a[2];dq[3]=a[3];dq[4]=a[4];dq[5]=a[5];dq[6]=a[6];dq[7]=a[7];return dq}function fromValues$1(x1,y1,z1,w1,x2,y2,z2,w2){var dq=new ARRAY_TYPE(8);dq[0]=x1;dq[1]=y1;dq[2]=z1;dq[3]=w1;dq[4]=x2;dq[5]=y2;dq[6]=z2;dq[7]=w2;return dq}function fromRotationTranslationValues(x1,y1,z1,w1,x2,y2,z2){var dq=new ARRAY_TYPE(8);\ndq[0]=x1;dq[1]=y1;dq[2]=z1;dq[3]=w1;var ax=x2*.5,ay=y2*.5,az=z2*.5;dq[4]=ax*w1+ay*z1-az*y1;dq[5]=ay*w1+az*x1-ax*z1;dq[6]=az*w1+ax*y1-ay*x1;dq[7]=-ax*x1-ay*y1-az*z1;return dq}function fromRotationTranslation(out,q,t){var ax=t[0]*.5,ay=t[1]*.5,az=t[2]*.5,bx=q[0],by=q[1],bz=q[2],bw=q[3];out[0]=bx;out[1]=by;out[2]=bz;out[3]=bw;out[4]=ax*bw+ay*bz-az*by;out[5]=ay*bw+az*bx-ax*bz;out[6]=az*bw+ax*by-ay*bx;out[7]=-ax*bx-ay*by-az*bz;return out}function fromTranslation(out,t){out[0]=0;out[1]=0;out[2]=0;out[3]=\n1;out[4]=t[0]*.5;out[5]=t[1]*.5;out[6]=t[2]*.5;out[7]=0;return out}function fromRotation(out,q){out[0]=q[0];out[1]=q[1];out[2]=q[2];out[3]=q[3];out[4]=0;out[5]=0;out[6]=0;out[7]=0;return out}function fromMat4(out,a){var outer=create$2();getRotation(outer,a);var t=new ARRAY_TYPE(3);getTranslation$1(t,a);fromRotationTranslation(out,outer,t);return out}function copy$1(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];return out}function identity(out){out[0]=\n0;out[1]=0;out[2]=0;out[3]=1;out[4]=0;out[5]=0;out[6]=0;out[7]=0;return out}function set$1(out,x1,y1,z1,w1,x2,y2,z2,w2){out[0]=x1;out[1]=y1;out[2]=z1;out[3]=w1;out[4]=x2;out[5]=y2;out[6]=z2;out[7]=w2;return out}var getReal=copy$2;function getDual(out,a){out[0]=a[4];out[1]=a[5];out[2]=a[6];out[3]=a[7];return out}var setReal=copy$2;function setDual(out,q){out[4]=q[0];out[5]=q[1];out[6]=q[2];out[7]=q[3];return out}function getTranslation(out,a){var ax=a[4],ay=a[5],az=a[6],aw=a[7],bx=-a[0],by=-a[1],bz=\n-a[2],bw=a[3];out[0]=(ax*bw+aw*bx+ay*bz-az*by)*2;out[1]=(ay*bw+aw*by+az*bx-ax*bz)*2;out[2]=(az*bw+aw*bz+ax*by-ay*bx)*2;return out}function translate(out,a,v){var ax1=a[0],ay1=a[1],az1=a[2],aw1=a[3],bx1=v[0]*.5,by1=v[1]*.5,bz1=v[2]*.5,ax2=a[4],ay2=a[5],az2=a[6],aw2=a[7];out[0]=ax1;out[1]=ay1;out[2]=az1;out[3]=aw1;out[4]=aw1*bx1+ay1*bz1-az1*by1+ax2;out[5]=aw1*by1+az1*bx1-ax1*bz1+ay2;out[6]=aw1*bz1+ax1*by1-ay1*bx1+az2;out[7]=-ax1*bx1-ay1*by1-az1*bz1+aw2;return out}function rotateX(out,a,rad){var bx=\n-a[0],by=-a[1],bz=-a[2],bw=a[3],ax=a[4],ay=a[5],az=a[6],aw=a[7],ax1=ax*bw+aw*bx+ay*bz-az*by,ay1=ay*bw+aw*by+az*bx-ax*bz,az1=az*bw+aw*bz+ax*by-ay*bx,aw1=aw*bw-ax*bx-ay*by-az*bz;rotateX$1(out,a,rad);bx=out[0];by=out[1];bz=out[2];bw=out[3];out[4]=ax1*bw+aw1*bx+ay1*bz-az1*by;out[5]=ay1*bw+aw1*by+az1*bx-ax1*bz;out[6]=az1*bw+aw1*bz+ax1*by-ay1*bx;out[7]=aw1*bw-ax1*bx-ay1*by-az1*bz;return out}function rotateY(out,a,rad){var bx=-a[0],by=-a[1],bz=-a[2],bw=a[3],ax=a[4],ay=a[5],az=a[6],aw=a[7],ax1=ax*bw+aw*bx+\nay*bz-az*by,ay1=ay*bw+aw*by+az*bx-ax*bz,az1=az*bw+aw*bz+ax*by-ay*bx,aw1=aw*bw-ax*bx-ay*by-az*bz;rotateY$1(out,a,rad);bx=out[0];by=out[1];bz=out[2];bw=out[3];out[4]=ax1*bw+aw1*bx+ay1*bz-az1*by;out[5]=ay1*bw+aw1*by+az1*bx-ax1*bz;out[6]=az1*bw+aw1*bz+ax1*by-ay1*bx;out[7]=aw1*bw-ax1*bx-ay1*by-az1*bz;return out}function rotateZ(out,a,rad){var bx=-a[0],by=-a[1],bz=-a[2],bw=a[3],ax=a[4],ay=a[5],az=a[6],aw=a[7],ax1=ax*bw+aw*bx+ay*bz-az*by,ay1=ay*bw+aw*by+az*bx-ax*bz,az1=az*bw+aw*bz+ax*by-ay*bx,aw1=aw*bw-\nax*bx-ay*by-az*bz;rotateZ$1(out,a,rad);bx=out[0];by=out[1];bz=out[2];bw=out[3];out[4]=ax1*bw+aw1*bx+ay1*bz-az1*by;out[5]=ay1*bw+aw1*by+az1*bx-ax1*bz;out[6]=az1*bw+aw1*bz+ax1*by-ay1*bx;out[7]=aw1*bw-ax1*bx-ay1*by-az1*bz;return out}function rotateByQuatAppend(out,a,q){var qx=q[0],qy=q[1],qz=q[2],qw=q[3],ax=a[0],ay=a[1],az=a[2],aw=a[3];out[0]=ax*qw+aw*qx+ay*qz-az*qy;out[1]=ay*qw+aw*qy+az*qx-ax*qz;out[2]=az*qw+aw*qz+ax*qy-ay*qx;out[3]=aw*qw-ax*qx-ay*qy-az*qz;ax=a[4];ay=a[5];az=a[6];aw=a[7];out[4]=ax*\nqw+aw*qx+ay*qz-az*qy;out[5]=ay*qw+aw*qy+az*qx-ax*qz;out[6]=az*qw+aw*qz+ax*qy-ay*qx;out[7]=aw*qw-ax*qx-ay*qy-az*qz;return out}function rotateByQuatPrepend(out,q,a){var qx=q[0],qy=q[1],qz=q[2],qw=q[3],bx=a[0],by=a[1],bz=a[2],bw=a[3];out[0]=qx*bw+qw*bx+qy*bz-qz*by;out[1]=qy*bw+qw*by+qz*bx-qx*bz;out[2]=qz*bw+qw*bz+qx*by-qy*bx;out[3]=qw*bw-qx*bx-qy*by-qz*bz;bx=a[4];by=a[5];bz=a[6];bw=a[7];out[4]=qx*bw+qw*bx+qy*bz-qz*by;out[5]=qy*bw+qw*by+qz*bx-qx*bz;out[6]=qz*bw+qw*bz+qx*by-qy*bx;out[7]=qw*bw-qx*bx-qy*\nby-qz*bz;return out}function rotateAroundAxis(out,a,axis,rad){if(Math.abs(rad)<EPSILON)return copy$1(out,a);var axisLength=Math.hypot(axis[0],axis[1],axis[2]);rad=rad*.5;var s=Math.sin(rad);var bx=s*axis[0]/axisLength;var by=s*axis[1]/axisLength;var bz=s*axis[2]/axisLength;var bw=Math.cos(rad);var ax1=a[0],ay1=a[1],az1=a[2],aw1=a[3];out[0]=ax1*bw+aw1*bx+ay1*bz-az1*by;out[1]=ay1*bw+aw1*by+az1*bx-ax1*bz;out[2]=az1*bw+aw1*bz+ax1*by-ay1*bx;out[3]=aw1*bw-ax1*bx-ay1*by-az1*bz;var ax=a[4],ay=a[5],az=a[6],\naw=a[7];out[4]=ax*bw+aw*bx+ay*bz-az*by;out[5]=ay*bw+aw*by+az*bx-ax*bz;out[6]=az*bw+aw*bz+ax*by-ay*bx;out[7]=aw*bw-ax*bx-ay*by-az*bz;return out}function add$1(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];out[6]=a[6]+b[6];out[7]=a[7]+b[7];return out}function multiply$1(out,a,b){var ax0=a[0],ay0=a[1],az0=a[2],aw0=a[3],bx1=b[4],by1=b[5],bz1=b[6],bw1=b[7],ax1=a[4],ay1=a[5],az1=a[6],aw1=a[7],bx0=b[0],by0=b[1],bz0=b[2],bw0=b[3];out[0]=ax0*\nbw0+aw0*bx0+ay0*bz0-az0*by0;out[1]=ay0*bw0+aw0*by0+az0*bx0-ax0*bz0;out[2]=az0*bw0+aw0*bz0+ax0*by0-ay0*bx0;out[3]=aw0*bw0-ax0*bx0-ay0*by0-az0*bz0;out[4]=ax0*bw1+aw0*bx1+ay0*bz1-az0*by1+ax1*bw0+aw1*bx0+ay1*bz0-az1*by0;out[5]=ay0*bw1+aw0*by1+az0*bx1-ax0*bz1+ay1*bw0+aw1*by0+az1*bx0-ax1*bz0;out[6]=az0*bw1+aw0*bz1+ax0*by1-ay0*bx1+az1*bw0+aw1*bz0+ax1*by0-ay1*bx0;out[7]=aw0*bw1-ax0*bx1-ay0*by1-az0*bz1+aw1*bw0-ax1*bx0-ay1*by0-az1*bz0;return out}var mul$1=multiply$1;function scale$1(out,a,b){out[0]=a[0]*b;\nout[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;out[4]=a[4]*b;out[5]=a[5]*b;out[6]=a[6]*b;out[7]=a[7]*b;return out}var dot$1=dot$2;function lerp$1(out,a,b,t){var mt=1-t;if(dot$1(a,b)<0)t=-t;out[0]=a[0]*mt+b[0]*t;out[1]=a[1]*mt+b[1]*t;out[2]=a[2]*mt+b[2]*t;out[3]=a[3]*mt+b[3]*t;out[4]=a[4]*mt+b[4]*t;out[5]=a[5]*mt+b[5]*t;out[6]=a[6]*mt+b[6]*t;out[7]=a[7]*mt+b[7]*t;return out}function invert(out,a){var sqlen=squaredLength$1(a);out[0]=-a[0]/sqlen;out[1]=-a[1]/sqlen;out[2]=-a[2]/sqlen;out[3]=a[3]/sqlen;out[4]=\n-a[4]/sqlen;out[5]=-a[5]/sqlen;out[6]=-a[6]/sqlen;out[7]=a[7]/sqlen;return out}function conjugate(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=-a[2];out[3]=a[3];out[4]=-a[4];out[5]=-a[5];out[6]=-a[6];out[7]=a[7];return out}var length$1=length$2;var len$1=length$1;var squaredLength$1=squaredLength$2;var sqrLen$1=squaredLength$1;function normalize$1(out,a){var magnitude=squaredLength$1(a);if(magnitude>0){magnitude=Math.sqrt(magnitude);var a0=a[0]/magnitude;var a1=a[1]/magnitude;var a2=a[2]/magnitude;var a3=\na[3]/magnitude;var b0=a[4];var b1=a[5];var b2=a[6];var b3=a[7];var a_dot_b=a0*b0+a1*b1+a2*b2+a3*b3;out[0]=a0;out[1]=a1;out[2]=a2;out[3]=a3;out[4]=(b0-a0*a_dot_b)/magnitude;out[5]=(b1-a1*a_dot_b)/magnitude;out[6]=(b2-a2*a_dot_b)/magnitude;out[7]=(b3-a3*a_dot_b)/magnitude}return out}function str$1(a){return\"quat2(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\", \"+a[6]+\", \"+a[7]+\")\"}function exactEquals$1(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===\nb[5]&&a[6]===b[6]&&a[7]===b[7]}function equals$1(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=EPSILON*Math.max(1,Math.abs(a4),\nMath.abs(b4))&&Math.abs(a5-b5)<=EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))}var quat2=Object.freeze({__proto__:null,create:create$1,clone:clone$1,fromValues:fromValues$1,fromRotationTranslationValues:fromRotationTranslationValues,fromRotationTranslation:fromRotationTranslation,fromTranslation:fromTranslation,fromRotation:fromRotation,fromMat4:fromMat4,copy:copy$1,identity:identity,\nset:set$1,getReal:getReal,getDual:getDual,setReal:setReal,setDual:setDual,getTranslation:getTranslation,translate:translate,rotateX:rotateX,rotateY:rotateY,rotateZ:rotateZ,rotateByQuatAppend:rotateByQuatAppend,rotateByQuatPrepend:rotateByQuatPrepend,rotateAroundAxis:rotateAroundAxis,add:add$1,multiply:multiply$1,mul:mul$1,scale:scale$1,dot:dot$1,lerp:lerp$1,invert:invert,conjugate:conjugate,length:length$1,len:len$1,squaredLength:squaredLength$1,sqrLen:sqrLen$1,normalize:normalize$1,str:str$1,exactEquals:exactEquals$1,\nequals:equals$1});function create(){var out=new ARRAY_TYPE(2);if(ARRAY_TYPE!=Float32Array){out[0]=0;out[1]=0}return out}function clone(a){var out=new ARRAY_TYPE(2);out[0]=a[0];out[1]=a[1];return out}function fromValues(x,y){var out=new ARRAY_TYPE(2);out[0]=x;out[1]=y;return out}function copy(out,a){out[0]=a[0];out[1]=a[1];return out}function set(out,x,y){out[0]=x;out[1]=y;return out}function add(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];return out}function subtract(out,a,b){out[0]=a[0]-b[0];out[1]=\na[1]-b[1];return out}function multiply(out,a,b){out[0]=a[0]*b[0];out[1]=a[1]*b[1];return out}function divide(out,a,b){out[0]=a[0]/b[0];out[1]=a[1]/b[1];return out}function ceil(out,a){out[0]=Math.ceil(a[0]);out[1]=Math.ceil(a[1]);return out}function floor(out,a){out[0]=Math.floor(a[0]);out[1]=Math.floor(a[1]);return out}function min(out,a,b){out[0]=Math.min(a[0],b[0]);out[1]=Math.min(a[1],b[1]);return out}function max(out,a,b){out[0]=Math.max(a[0],b[0]);out[1]=Math.max(a[1],b[1]);return out}function round(out,\na){out[0]=Math.round(a[0]);out[1]=Math.round(a[1]);return out}function scale(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;return out}function scaleAndAdd(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;return out}function distance(a,b){var x=b[0]-a[0],y=b[1]-a[1];return Math.hypot(x,y)}function squaredDistance(a,b){var x=b[0]-a[0],y=b[1]-a[1];return x*x+y*y}function length(a){var x=a[0],y=a[1];return Math.hypot(x,y)}function squaredLength(a){var x=a[0],y=a[1];return x*x+y*y}function negate(out,\na){out[0]=-a[0];out[1]=-a[1];return out}function inverse(out,a){out[0]=1/a[0];out[1]=1/a[1];return out}function normalize(out,a){var x=a[0],y=a[1];var len=x*x+y*y;if(len>0)len=1/Math.sqrt(len);out[0]=a[0]*len;out[1]=a[1]*len;return out}function dot(a,b){return a[0]*b[0]+a[1]*b[1]}function cross(out,a,b){var z=a[0]*b[1]-a[1]*b[0];out[0]=out[1]=0;out[2]=z;return out}function lerp(out,a,b,t){var ax=a[0],ay=a[1];out[0]=ax+t*(b[0]-ax);out[1]=ay+t*(b[1]-ay);return out}function random(out,scale){scale=scale||\n1;var r=RANDOM()*2*Math.PI;out[0]=Math.cos(r)*scale;out[1]=Math.sin(r)*scale;return out}function transformMat2(out,a,m){var x=a[0],y=a[1];out[0]=m[0]*x+m[2]*y;out[1]=m[1]*x+m[3]*y;return out}function transformMat2d(out,a,m){var x=a[0],y=a[1];out[0]=m[0]*x+m[2]*y+m[4];out[1]=m[1]*x+m[3]*y+m[5];return out}function transformMat3(out,a,m){var x=a[0],y=a[1];out[0]=m[0]*x+m[3]*y+m[6];out[1]=m[1]*x+m[4]*y+m[7];return out}function transformMat4(out,a,m){var x=a[0];var y=a[1];out[0]=m[0]*x+m[4]*y+m[12];out[1]=\nm[1]*x+m[5]*y+m[13];return out}function rotate(out,a,b,rad){var p0=a[0]-b[0],p1=a[1]-b[1],sinC=Math.sin(rad),cosC=Math.cos(rad);out[0]=p0*cosC-p1*sinC+b[0];out[1]=p0*sinC+p1*cosC+b[1];return out}function angle(a,b){var x1=a[0],y1=a[1],x2=b[0],y2=b[1],mag=Math.sqrt((x1*x1+y1*y1)*(x2*x2+y2*y2)),cosine=mag&&(x1*x2+y1*y2)/mag;return Math.acos(Math.min(Math.max(cosine,-1),1))}function zero(out){out[0]=0;out[1]=0;return out}function str(a){return\"vec2(\"+a[0]+\", \"+a[1]+\")\"}function exactEquals(a,b){return a[0]===\nb[0]&&a[1]===b[1]}function equals(a,b){var a0=a[0],a1=a[1];var b0=b[0],b1=b[1];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))}var len=length;var sub=subtract;var mul=multiply;var div=divide;var dist=distance;var sqrDist=squaredDistance;var sqrLen=squaredLength;var forEach=function(){var vec=create();return function(a,stride,offset,count,fn,arg){var i,l;if(!stride)stride=2;if(!offset)offset=0;if(count)l=Math.min(count*\nstride+offset,a.length);else l=a.length;for(i=offset;i<l;i+=stride){vec[0]=a[i];vec[1]=a[i+1];fn(vec,vec,arg);a[i]=vec[0];a[i+1]=vec[1]}return a}}();var vec2=Object.freeze({__proto__:null,create:create,clone:clone,fromValues:fromValues,copy:copy,set:set,add:add,subtract:subtract,multiply:multiply,divide:divide,ceil:ceil,floor:floor,min:min,max:max,round:round,scale:scale,scaleAndAdd:scaleAndAdd,distance:distance,squaredDistance:squaredDistance,length:length,squaredLength:squaredLength,negate:negate,\ninverse:inverse,normalize:normalize,dot:dot,cross:cross,lerp:lerp,random:random,transformMat2:transformMat2,transformMat2d:transformMat2d,transformMat3:transformMat3,transformMat4:transformMat4,rotate:rotate,angle:angle,zero:zero,str:str,exactEquals:exactEquals,equals:equals,len:len,sub:sub,mul:mul,div:div,dist:dist,sqrDist:sqrDist,sqrLen:sqrLen,forEach:forEach});exports.glMatrix=common;exports.mat2=mat2;exports.mat2d=mat2d;exports.mat3=mat3;exports.mat4=mat4;exports.quat=quat;exports.quat2=quat2;\nexports.vec2=vec2;exports.vec3=vec3;exports.vec4=vec4;Object.defineProperty(exports,\"__esModule\",{value:true})});\n\n}\n\n// ../3rdparty/grapheme-splitter.js\n{\nfunction GraphemeSplitter(){function h(a,c){void 0===c&&(c=0);var b=a.charCodeAt(c);if(55296<=b&&56319>=b&&c<a.length-1){var d=b;a=a.charCodeAt(c+1);return 56320<=a&&57343>=a?1024*(d-55296)+(a-56320)+65536:d}return 56320<=b&&57343>=b&&1<=c?(d=a.charCodeAt(c-1),a=b,55296<=d&&56319>=d?1024*(d-55296)+(a-56320)+65536:a):b}function l(a,c,b){var d=[a].concat(c).concat([b]),e=d[d.length-2],g=d.lastIndexOf(14);if(1<g&&d.slice(1,g).every(function(f){return 3==f})&&-1==[3,13,17].indexOf(a))return 2;a=d.lastIndexOf(4);\nif(0<a&&d.slice(1,a).every(function(f){return 4==f})&&-1==[12,4].indexOf(e))return 1==d.filter(function(f){return 4==f}).length%2?3:4;if(0==e&&1==b)return 0;if(2==e||0==e||1==e)return 14==b&&c.every(function(f){return 3==f})?2:1;if(2==b||0==b||1==b)return 1;if(6!=e||6!=b&&7!=b&&9!=b&&10!=b)if(9!=e&&7!=e||7!=b&&8!=b)if(10!=e&&8!=e||8!=b){if(3==b||15==b||5==b||12==e)return 0}else return 0;else return 0;else return 0;a=-1!=d.indexOf(3)?d.lastIndexOf(3)-1:d.length-2;return-1!=[13,17].indexOf(d[a])&&d.slice(a+\n1,-1).every(function(f){return 3==f})&&14==b||15==e&&-1!=[16,17].indexOf(b)?0:-1!=c.indexOf(4)?2:4==e&&4==b?0:1}function k(a){return 1536<=a&&1541>=a||1757==a||1807==a||2274==a||3406==a||69821==a||70082<=a&&70083>=a||72250==a||72326<=a&&72329>=a||73030==a?12:13==a?0:10==a?1:0<=a&&9>=a||11<=a&&12>=a||14<=a&&31>=a||127<=a&&159>=a||173==a||1564==a||6158==a||8203==a||8206<=a&&8207>=a||8232==a||8233==a||8234<=a&&8238>=a||8288<=a&&8292>=a||8293==a||8294<=a&&8303>=a||55296<=a&&57343>=a||65279==a||65520<=\na&&65528>=a||65529<=a&&65531>=a||113824<=a&&113827>=a||119155<=a&&119162>=a||917504==a||917505==a||917506<=a&&917535>=a||917632<=a&&917759>=a||918E3<=a&&921599>=a?2:768<=a&&879>=a||1155<=a&&1159>=a||1160<=a&&1161>=a||1425<=a&&1469>=a||1471==a||1473<=a&&1474>=a||1476<=a&&1477>=a||1479==a||1552<=a&&1562>=a||1611<=a&&1631>=a||1648==a||1750<=a&&1756>=a||1759<=a&&1764>=a||1767<=a&&1768>=a||1770<=a&&1773>=a||1809==a||1840<=a&&1866>=a||1958<=a&&1968>=a||2027<=a&&2035>=a||2070<=a&&2073>=a||2075<=a&&2083>=\na||2085<=a&&2087>=a||2089<=a&&2093>=a||2137<=a&&2139>=a||2260<=a&&2273>=a||2275<=a&&2306>=a||2362==a||2364==a||2369<=a&&2376>=a||2381==a||2385<=a&&2391>=a||2402<=a&&2403>=a||2433==a||2492==a||2494==a||2497<=a&&2500>=a||2509==a||2519==a||2530<=a&&2531>=a||2561<=a&&2562>=a||2620==a||2625<=a&&2626>=a||2631<=a&&2632>=a||2635<=a&&2637>=a||2641==a||2672<=a&&2673>=a||2677==a||2689<=a&&2690>=a||2748==a||2753<=a&&2757>=a||2759<=a&&2760>=a||2765==a||2786<=a&&2787>=a||2810<=a&&2815>=a||2817==a||2876==a||2878==\na||2879==a||2881<=a&&2884>=a||2893==a||2902==a||2903==a||2914<=a&&2915>=a||2946==a||3006==a||3008==a||3021==a||3031==a||3072==a||3134<=a&&3136>=a||3142<=a&&3144>=a||3146<=a&&3149>=a||3157<=a&&3158>=a||3170<=a&&3171>=a||3201==a||3260==a||3263==a||3266==a||3270==a||3276<=a&&3277>=a||3285<=a&&3286>=a||3298<=a&&3299>=a||3328<=a&&3329>=a||3387<=a&&3388>=a||3390==a||3393<=a&&3396>=a||3405==a||3415==a||3426<=a&&3427>=a||3530==a||3535==a||3538<=a&&3540>=a||3542==a||3551==a||3633==a||3636<=a&&3642>=a||3655<=\na&&3662>=a||3761==a||3764<=a&&3769>=a||3771<=a&&3772>=a||3784<=a&&3789>=a||3864<=a&&3865>=a||3893==a||3895==a||3897==a||3953<=a&&3966>=a||3968<=a&&3972>=a||3974<=a&&3975>=a||3981<=a&&3991>=a||3993<=a&&4028>=a||4038==a||4141<=a&&4144>=a||4146<=a&&4151>=a||4153<=a&&4154>=a||4157<=a&&4158>=a||4184<=a&&4185>=a||4190<=a&&4192>=a||4209<=a&&4212>=a||4226==a||4229<=a&&4230>=a||4237==a||4253==a||4957<=a&&4959>=a||5906<=a&&5908>=a||5938<=a&&5940>=a||5970<=a&&5971>=a||6002<=a&&6003>=a||6068<=a&&6069>=a||6071<=\na&&6077>=a||6086==a||6089<=a&&6099>=a||6109==a||6155<=a&&6157>=a||6277<=a&&6278>=a||6313==a||6432<=a&&6434>=a||6439<=a&&6440>=a||6450==a||6457<=a&&6459>=a||6679<=a&&6680>=a||6683==a||6742==a||6744<=a&&6750>=a||6752==a||6754==a||6757<=a&&6764>=a||6771<=a&&6780>=a||6783==a||6832<=a&&6845>=a||6846==a||6912<=a&&6915>=a||6964==a||6966<=a&&6970>=a||6972==a||6978==a||7019<=a&&7027>=a||7040<=a&&7041>=a||7074<=a&&7077>=a||7080<=a&&7081>=a||7083<=a&&7085>=a||7142==a||7144<=a&&7145>=a||7149==a||7151<=a&&7153>=\na||7212<=a&&7219>=a||7222<=a&&7223>=a||7376<=a&&7378>=a||7380<=a&&7392>=a||7394<=a&&7400>=a||7405==a||7412==a||7416<=a&&7417>=a||7616<=a&&7673>=a||7675<=a&&7679>=a||8204==a||8400<=a&&8412>=a||8413<=a&&8416>=a||8417==a||8418<=a&&8420>=a||8421<=a&&8432>=a||11503<=a&&11505>=a||11647==a||11744<=a&&11775>=a||12330<=a&&12333>=a||12334<=a&&12335>=a||12441<=a&&12442>=a||42607==a||42608<=a&&42610>=a||42612<=a&&42621>=a||42654<=a&&42655>=a||42736<=a&&42737>=a||43010==a||43014==a||43019==a||43045<=a&&43046>=\na||43204<=a&&43205>=a||43232<=a&&43249>=a||43302<=a&&43309>=a||43335<=a&&43345>=a||43392<=a&&43394>=a||43443==a||43446<=a&&43449>=a||43452==a||43493==a||43561<=a&&43566>=a||43569<=a&&43570>=a||43573<=a&&43574>=a||43587==a||43596==a||43644==a||43696==a||43698<=a&&43700>=a||43703<=a&&43704>=a||43710<=a&&43711>=a||43713==a||43756<=a&&43757>=a||43766==a||44005==a||44008==a||44013==a||64286==a||65024<=a&&65039>=a||65056<=a&&65071>=a||65438<=a&&65439>=a||66045==a||66272==a||66422<=a&&66426>=a||68097<=a&&\n68099>=a||68101<=a&&68102>=a||68108<=a&&68111>=a||68152<=a&&68154>=a||68159==a||68325<=a&&68326>=a||69633==a||69688<=a&&69702>=a||69759<=a&&69761>=a||69811<=a&&69814>=a||69817<=a&&69818>=a||69888<=a&&69890>=a||69927<=a&&69931>=a||69933<=a&&69940>=a||70003==a||70016<=a&&70017>=a||70070<=a&&70078>=a||70090<=a&&70092>=a||70191<=a&&70193>=a||70196==a||70198<=a&&70199>=a||70206==a||70367==a||70371<=a&&70378>=a||70400<=a&&70401>=a||70460==a||70462==a||70464==a||70487==a||70502<=a&&70508>=a||70512<=a&&70516>=\na||70712<=a&&70719>=a||70722<=a&&70724>=a||70726==a||70832==a||70835<=a&&70840>=a||70842==a||70845==a||70847<=a&&70848>=a||70850<=a&&70851>=a||71087==a||71090<=a&&71093>=a||71100<=a&&71101>=a||71103<=a&&71104>=a||71132<=a&&71133>=a||71219<=a&&71226>=a||71229==a||71231<=a&&71232>=a||71339==a||71341==a||71344<=a&&71349>=a||71351==a||71453<=a&&71455>=a||71458<=a&&71461>=a||71463<=a&&71467>=a||72193<=a&&72198>=a||72201<=a&&72202>=a||72243<=a&&72248>=a||72251<=a&&72254>=a||72263==a||72273<=a&&72278>=a||\n72281<=a&&72283>=a||72330<=a&&72342>=a||72344<=a&&72345>=a||72752<=a&&72758>=a||72760<=a&&72765>=a||72767==a||72850<=a&&72871>=a||72874<=a&&72880>=a||72882<=a&&72883>=a||72885<=a&&72886>=a||73009<=a&&73014>=a||73018==a||73020<=a&&73021>=a||73023<=a&&73029>=a||73031==a||92912<=a&&92916>=a||92976<=a&&92982>=a||94095<=a&&94098>=a||113821<=a&&113822>=a||119141==a||119143<=a&&119145>=a||119150<=a&&119154>=a||119163<=a&&119170>=a||119173<=a&&119179>=a||119210<=a&&119213>=a||119362<=a&&119364>=a||121344<=\na&&121398>=a||121403<=a&&121452>=a||121461==a||121476==a||121499<=a&&121503>=a||121505<=a&&121519>=a||122880<=a&&122886>=a||122888<=a&&122904>=a||122907<=a&&122913>=a||122915<=a&&122916>=a||122918<=a&&122922>=a||125136<=a&&125142>=a||125252<=a&&125258>=a||917536<=a&&917631>=a||917760<=a&&917999>=a?3:127462<=a&&127487>=a?4:2307==a||2363==a||2366<=a&&2368>=a||2377<=a&&2380>=a||2382<=a&&2383>=a||2434<=a&&2435>=a||2495<=a&&2496>=a||2503<=a&&2504>=a||2507<=a&&2508>=a||2563==a||2622<=a&&2624>=a||2691==\na||2750<=a&&2752>=a||2761==a||2763<=a&&2764>=a||2818<=a&&2819>=a||2880==a||2887<=a&&2888>=a||2891<=a&&2892>=a||3007==a||3009<=a&&3010>=a||3014<=a&&3016>=a||3018<=a&&3020>=a||3073<=a&&3075>=a||3137<=a&&3140>=a||3202<=a&&3203>=a||3262==a||3264<=a&&3265>=a||3267<=a&&3268>=a||3271<=a&&3272>=a||3274<=a&&3275>=a||3330<=a&&3331>=a||3391<=a&&3392>=a||3398<=a&&3400>=a||3402<=a&&3404>=a||3458<=a&&3459>=a||3536<=a&&3537>=a||3544<=a&&3550>=a||3570<=a&&3571>=a||3635==a||3763==a||3902<=a&&3903>=a||3967==a||4145==\na||4155<=a&&4156>=a||4182<=a&&4183>=a||4228==a||6070==a||6078<=a&&6085>=a||6087<=a&&6088>=a||6435<=a&&6438>=a||6441<=a&&6443>=a||6448<=a&&6449>=a||6451<=a&&6456>=a||6681<=a&&6682>=a||6741==a||6743==a||6765<=a&&6770>=a||6916==a||6965==a||6971==a||6973<=a&&6977>=a||6979<=a&&6980>=a||7042==a||7073==a||7078<=a&&7079>=a||7082==a||7143==a||7146<=a&&7148>=a||7150==a||7154<=a&&7155>=a||7204<=a&&7211>=a||7220<=a&&7221>=a||7393==a||7410<=a&&7411>=a||7415==a||43043<=a&&43044>=a||43047==a||43136<=a&&43137>=a||\n43188<=a&&43203>=a||43346<=a&&43347>=a||43395==a||43444<=a&&43445>=a||43450<=a&&43451>=a||43453<=a&&43456>=a||43567<=a&&43568>=a||43571<=a&&43572>=a||43597==a||43755==a||43758<=a&&43759>=a||43765==a||44003<=a&&44004>=a||44006<=a&&44007>=a||44009<=a&&44010>=a||44012==a||69632==a||69634==a||69762==a||69808<=a&&69810>=a||69815<=a&&69816>=a||69932==a||70018==a||70067<=a&&70069>=a||70079<=a&&70080>=a||70188<=a&&70190>=a||70194<=a&&70195>=a||70197==a||70368<=a&&70370>=a||70402<=a&&70403>=a||70463==a||70465<=\na&&70468>=a||70471<=a&&70472>=a||70475<=a&&70477>=a||70498<=a&&70499>=a||70709<=a&&70711>=a||70720<=a&&70721>=a||70725==a||70833<=a&&70834>=a||70841==a||70843<=a&&70844>=a||70846==a||70849==a||71088<=a&&71089>=a||71096<=a&&71099>=a||71102==a||71216<=a&&71218>=a||71227<=a&&71228>=a||71230==a||71340==a||71342<=a&&71343>=a||71350==a||71456<=a&&71457>=a||71462==a||72199<=a&&72200>=a||72249==a||72279<=a&&72280>=a||72343==a||72751==a||72766==a||72873==a||72881==a||72884==a||94033<=a&&94078>=a||119142==\na||119149==a?5:4352<=a&&4447>=a||43360<=a&&43388>=a?6:4448<=a&&4519>=a||55216<=a&&55238>=a?7:4520<=a&&4607>=a||55243<=a&&55291>=a?8:44032==a||44060==a||44088==a||44116==a||44144==a||44172==a||44200==a||44228==a||44256==a||44284==a||44312==a||44340==a||44368==a||44396==a||44424==a||44452==a||44480==a||44508==a||44536==a||44564==a||44592==a||44620==a||44648==a||44676==a||44704==a||44732==a||44760==a||44788==a||44816==a||44844==a||44872==a||44900==a||44928==a||44956==a||44984==a||45012==a||45040==a||\n45068==a||45096==a||45124==a||45152==a||45180==a||45208==a||45236==a||45264==a||45292==a||45320==a||45348==a||45376==a||45404==a||45432==a||45460==a||45488==a||45516==a||45544==a||45572==a||45600==a||45628==a||45656==a||45684==a||45712==a||45740==a||45768==a||45796==a||45824==a||45852==a||45880==a||45908==a||45936==a||45964==a||45992==a||46020==a||46048==a||46076==a||46104==a||46132==a||46160==a||46188==a||46216==a||46244==a||46272==a||46300==a||46328==a||46356==a||46384==a||46412==a||46440==a||46468==\na||46496==a||46524==a||46552==a||46580==a||46608==a||46636==a||46664==a||46692==a||46720==a||46748==a||46776==a||46804==a||46832==a||46860==a||46888==a||46916==a||46944==a||46972==a||47E3==a||47028==a||47056==a||47084==a||47112==a||47140==a||47168==a||47196==a||47224==a||47252==a||47280==a||47308==a||47336==a||47364==a||47392==a||47420==a||47448==a||47476==a||47504==a||47532==a||47560==a||47588==a||47616==a||47644==a||47672==a||47700==a||47728==a||47756==a||47784==a||47812==a||47840==a||47868==a||\n47896==a||47924==a||47952==a||47980==a||48008==a||48036==a||48064==a||48092==a||48120==a||48148==a||48176==a||48204==a||48232==a||48260==a||48288==a||48316==a||48344==a||48372==a||48400==a||48428==a||48456==a||48484==a||48512==a||48540==a||48568==a||48596==a||48624==a||48652==a||48680==a||48708==a||48736==a||48764==a||48792==a||48820==a||48848==a||48876==a||48904==a||48932==a||48960==a||48988==a||49016==a||49044==a||49072==a||49100==a||49128==a||49156==a||49184==a||49212==a||49240==a||49268==a||49296==\na||49324==a||49352==a||49380==a||49408==a||49436==a||49464==a||49492==a||49520==a||49548==a||49576==a||49604==a||49632==a||49660==a||49688==a||49716==a||49744==a||49772==a||49800==a||49828==a||49856==a||49884==a||49912==a||49940==a||49968==a||49996==a||50024==a||50052==a||50080==a||50108==a||50136==a||50164==a||50192==a||50220==a||50248==a||50276==a||50304==a||50332==a||50360==a||50388==a||50416==a||50444==a||50472==a||50500==a||50528==a||50556==a||50584==a||50612==a||50640==a||50668==a||50696==a||\n50724==a||50752==a||50780==a||50808==a||50836==a||50864==a||50892==a||50920==a||50948==a||50976==a||51004==a||51032==a||51060==a||51088==a||51116==a||51144==a||51172==a||51200==a||51228==a||51256==a||51284==a||51312==a||51340==a||51368==a||51396==a||51424==a||51452==a||51480==a||51508==a||51536==a||51564==a||51592==a||51620==a||51648==a||51676==a||51704==a||51732==a||51760==a||51788==a||51816==a||51844==a||51872==a||51900==a||51928==a||51956==a||51984==a||52012==a||52040==a||52068==a||52096==a||52124==\na||52152==a||52180==a||52208==a||52236==a||52264==a||52292==a||52320==a||52348==a||52376==a||52404==a||52432==a||52460==a||52488==a||52516==a||52544==a||52572==a||52600==a||52628==a||52656==a||52684==a||52712==a||52740==a||52768==a||52796==a||52824==a||52852==a||52880==a||52908==a||52936==a||52964==a||52992==a||53020==a||53048==a||53076==a||53104==a||53132==a||53160==a||53188==a||53216==a||53244==a||53272==a||53300==a||53328==a||53356==a||53384==a||53412==a||53440==a||53468==a||53496==a||53524==a||\n53552==a||53580==a||53608==a||53636==a||53664==a||53692==a||53720==a||53748==a||53776==a||53804==a||53832==a||53860==a||53888==a||53916==a||53944==a||53972==a||54E3==a||54028==a||54056==a||54084==a||54112==a||54140==a||54168==a||54196==a||54224==a||54252==a||54280==a||54308==a||54336==a||54364==a||54392==a||54420==a||54448==a||54476==a||54504==a||54532==a||54560==a||54588==a||54616==a||54644==a||54672==a||54700==a||54728==a||54756==a||54784==a||54812==a||54840==a||54868==a||54896==a||54924==a||54952==\na||54980==a||55008==a||55036==a||55064==a||55092==a||55120==a||55148==a||55176==a?9:44033<=a&&44059>=a||44061<=a&&44087>=a||44089<=a&&44115>=a||44117<=a&&44143>=a||44145<=a&&44171>=a||44173<=a&&44199>=a||44201<=a&&44227>=a||44229<=a&&44255>=a||44257<=a&&44283>=a||44285<=a&&44311>=a||44313<=a&&44339>=a||44341<=a&&44367>=a||44369<=a&&44395>=a||44397<=a&&44423>=a||44425<=a&&44451>=a||44453<=a&&44479>=a||44481<=a&&44507>=a||44509<=a&&44535>=a||44537<=a&&44563>=a||44565<=a&&44591>=a||44593<=a&&44619>=\na||44621<=a&&44647>=a||44649<=a&&44675>=a||44677<=a&&44703>=a||44705<=a&&44731>=a||44733<=a&&44759>=a||44761<=a&&44787>=a||44789<=a&&44815>=a||44817<=a&&44843>=a||44845<=a&&44871>=a||44873<=a&&44899>=a||44901<=a&&44927>=a||44929<=a&&44955>=a||44957<=a&&44983>=a||44985<=a&&45011>=a||45013<=a&&45039>=a||45041<=a&&45067>=a||45069<=a&&45095>=a||45097<=a&&45123>=a||45125<=a&&45151>=a||45153<=a&&45179>=a||45181<=a&&45207>=a||45209<=a&&45235>=a||45237<=a&&45263>=a||45265<=a&&45291>=a||45293<=a&&45319>=a||\n45321<=a&&45347>=a||45349<=a&&45375>=a||45377<=a&&45403>=a||45405<=a&&45431>=a||45433<=a&&45459>=a||45461<=a&&45487>=a||45489<=a&&45515>=a||45517<=a&&45543>=a||45545<=a&&45571>=a||45573<=a&&45599>=a||45601<=a&&45627>=a||45629<=a&&45655>=a||45657<=a&&45683>=a||45685<=a&&45711>=a||45713<=a&&45739>=a||45741<=a&&45767>=a||45769<=a&&45795>=a||45797<=a&&45823>=a||45825<=a&&45851>=a||45853<=a&&45879>=a||45881<=a&&45907>=a||45909<=a&&45935>=a||45937<=a&&45963>=a||45965<=a&&45991>=a||45993<=a&&46019>=a||46021<=\na&&46047>=a||46049<=a&&46075>=a||46077<=a&&46103>=a||46105<=a&&46131>=a||46133<=a&&46159>=a||46161<=a&&46187>=a||46189<=a&&46215>=a||46217<=a&&46243>=a||46245<=a&&46271>=a||46273<=a&&46299>=a||46301<=a&&46327>=a||46329<=a&&46355>=a||46357<=a&&46383>=a||46385<=a&&46411>=a||46413<=a&&46439>=a||46441<=a&&46467>=a||46469<=a&&46495>=a||46497<=a&&46523>=a||46525<=a&&46551>=a||46553<=a&&46579>=a||46581<=a&&46607>=a||46609<=a&&46635>=a||46637<=a&&46663>=a||46665<=a&&46691>=a||46693<=a&&46719>=a||46721<=a&&\n46747>=a||46749<=a&&46775>=a||46777<=a&&46803>=a||46805<=a&&46831>=a||46833<=a&&46859>=a||46861<=a&&46887>=a||46889<=a&&46915>=a||46917<=a&&46943>=a||46945<=a&&46971>=a||46973<=a&&46999>=a||47001<=a&&47027>=a||47029<=a&&47055>=a||47057<=a&&47083>=a||47085<=a&&47111>=a||47113<=a&&47139>=a||47141<=a&&47167>=a||47169<=a&&47195>=a||47197<=a&&47223>=a||47225<=a&&47251>=a||47253<=a&&47279>=a||47281<=a&&47307>=a||47309<=a&&47335>=a||47337<=a&&47363>=a||47365<=a&&47391>=a||47393<=a&&47419>=a||47421<=a&&47447>=\na||47449<=a&&47475>=a||47477<=a&&47503>=a||47505<=a&&47531>=a||47533<=a&&47559>=a||47561<=a&&47587>=a||47589<=a&&47615>=a||47617<=a&&47643>=a||47645<=a&&47671>=a||47673<=a&&47699>=a||47701<=a&&47727>=a||47729<=a&&47755>=a||47757<=a&&47783>=a||47785<=a&&47811>=a||47813<=a&&47839>=a||47841<=a&&47867>=a||47869<=a&&47895>=a||47897<=a&&47923>=a||47925<=a&&47951>=a||47953<=a&&47979>=a||47981<=a&&48007>=a||48009<=a&&48035>=a||48037<=a&&48063>=a||48065<=a&&48091>=a||48093<=a&&48119>=a||48121<=a&&48147>=a||\n48149<=a&&48175>=a||48177<=a&&48203>=a||48205<=a&&48231>=a||48233<=a&&48259>=a||48261<=a&&48287>=a||48289<=a&&48315>=a||48317<=a&&48343>=a||48345<=a&&48371>=a||48373<=a&&48399>=a||48401<=a&&48427>=a||48429<=a&&48455>=a||48457<=a&&48483>=a||48485<=a&&48511>=a||48513<=a&&48539>=a||48541<=a&&48567>=a||48569<=a&&48595>=a||48597<=a&&48623>=a||48625<=a&&48651>=a||48653<=a&&48679>=a||48681<=a&&48707>=a||48709<=a&&48735>=a||48737<=a&&48763>=a||48765<=a&&48791>=a||48793<=a&&48819>=a||48821<=a&&48847>=a||48849<=\na&&48875>=a||48877<=a&&48903>=a||48905<=a&&48931>=a||48933<=a&&48959>=a||48961<=a&&48987>=a||48989<=a&&49015>=a||49017<=a&&49043>=a||49045<=a&&49071>=a||49073<=a&&49099>=a||49101<=a&&49127>=a||49129<=a&&49155>=a||49157<=a&&49183>=a||49185<=a&&49211>=a||49213<=a&&49239>=a||49241<=a&&49267>=a||49269<=a&&49295>=a||49297<=a&&49323>=a||49325<=a&&49351>=a||49353<=a&&49379>=a||49381<=a&&49407>=a||49409<=a&&49435>=a||49437<=a&&49463>=a||49465<=a&&49491>=a||49493<=a&&49519>=a||49521<=a&&49547>=a||49549<=a&&\n49575>=a||49577<=a&&49603>=a||49605<=a&&49631>=a||49633<=a&&49659>=a||49661<=a&&49687>=a||49689<=a&&49715>=a||49717<=a&&49743>=a||49745<=a&&49771>=a||49773<=a&&49799>=a||49801<=a&&49827>=a||49829<=a&&49855>=a||49857<=a&&49883>=a||49885<=a&&49911>=a||49913<=a&&49939>=a||49941<=a&&49967>=a||49969<=a&&49995>=a||49997<=a&&50023>=a||50025<=a&&50051>=a||50053<=a&&50079>=a||50081<=a&&50107>=a||50109<=a&&50135>=a||50137<=a&&50163>=a||50165<=a&&50191>=a||50193<=a&&50219>=a||50221<=a&&50247>=a||50249<=a&&50275>=\na||50277<=a&&50303>=a||50305<=a&&50331>=a||50333<=a&&50359>=a||50361<=a&&50387>=a||50389<=a&&50415>=a||50417<=a&&50443>=a||50445<=a&&50471>=a||50473<=a&&50499>=a||50501<=a&&50527>=a||50529<=a&&50555>=a||50557<=a&&50583>=a||50585<=a&&50611>=a||50613<=a&&50639>=a||50641<=a&&50667>=a||50669<=a&&50695>=a||50697<=a&&50723>=a||50725<=a&&50751>=a||50753<=a&&50779>=a||50781<=a&&50807>=a||50809<=a&&50835>=a||50837<=a&&50863>=a||50865<=a&&50891>=a||50893<=a&&50919>=a||50921<=a&&50947>=a||50949<=a&&50975>=a||\n50977<=a&&51003>=a||51005<=a&&51031>=a||51033<=a&&51059>=a||51061<=a&&51087>=a||51089<=a&&51115>=a||51117<=a&&51143>=a||51145<=a&&51171>=a||51173<=a&&51199>=a||51201<=a&&51227>=a||51229<=a&&51255>=a||51257<=a&&51283>=a||51285<=a&&51311>=a||51313<=a&&51339>=a||51341<=a&&51367>=a||51369<=a&&51395>=a||51397<=a&&51423>=a||51425<=a&&51451>=a||51453<=a&&51479>=a||51481<=a&&51507>=a||51509<=a&&51535>=a||51537<=a&&51563>=a||51565<=a&&51591>=a||51593<=a&&51619>=a||51621<=a&&51647>=a||51649<=a&&51675>=a||51677<=\na&&51703>=a||51705<=a&&51731>=a||51733<=a&&51759>=a||51761<=a&&51787>=a||51789<=a&&51815>=a||51817<=a&&51843>=a||51845<=a&&51871>=a||51873<=a&&51899>=a||51901<=a&&51927>=a||51929<=a&&51955>=a||51957<=a&&51983>=a||51985<=a&&52011>=a||52013<=a&&52039>=a||52041<=a&&52067>=a||52069<=a&&52095>=a||52097<=a&&52123>=a||52125<=a&&52151>=a||52153<=a&&52179>=a||52181<=a&&52207>=a||52209<=a&&52235>=a||52237<=a&&52263>=a||52265<=a&&52291>=a||52293<=a&&52319>=a||52321<=a&&52347>=a||52349<=a&&52375>=a||52377<=a&&\n52403>=a||52405<=a&&52431>=a||52433<=a&&52459>=a||52461<=a&&52487>=a||52489<=a&&52515>=a||52517<=a&&52543>=a||52545<=a&&52571>=a||52573<=a&&52599>=a||52601<=a&&52627>=a||52629<=a&&52655>=a||52657<=a&&52683>=a||52685<=a&&52711>=a||52713<=a&&52739>=a||52741<=a&&52767>=a||52769<=a&&52795>=a||52797<=a&&52823>=a||52825<=a&&52851>=a||52853<=a&&52879>=a||52881<=a&&52907>=a||52909<=a&&52935>=a||52937<=a&&52963>=a||52965<=a&&52991>=a||52993<=a&&53019>=a||53021<=a&&53047>=a||53049<=a&&53075>=a||53077<=a&&53103>=\na||53105<=a&&53131>=a||53133<=a&&53159>=a||53161<=a&&53187>=a||53189<=a&&53215>=a||53217<=a&&53243>=a||53245<=a&&53271>=a||53273<=a&&53299>=a||53301<=a&&53327>=a||53329<=a&&53355>=a||53357<=a&&53383>=a||53385<=a&&53411>=a||53413<=a&&53439>=a||53441<=a&&53467>=a||53469<=a&&53495>=a||53497<=a&&53523>=a||53525<=a&&53551>=a||53553<=a&&53579>=a||53581<=a&&53607>=a||53609<=a&&53635>=a||53637<=a&&53663>=a||53665<=a&&53691>=a||53693<=a&&53719>=a||53721<=a&&53747>=a||53749<=a&&53775>=a||53777<=a&&53803>=a||\n53805<=a&&53831>=a||53833<=a&&53859>=a||53861<=a&&53887>=a||53889<=a&&53915>=a||53917<=a&&53943>=a||53945<=a&&53971>=a||53973<=a&&53999>=a||54001<=a&&54027>=a||54029<=a&&54055>=a||54057<=a&&54083>=a||54085<=a&&54111>=a||54113<=a&&54139>=a||54141<=a&&54167>=a||54169<=a&&54195>=a||54197<=a&&54223>=a||54225<=a&&54251>=a||54253<=a&&54279>=a||54281<=a&&54307>=a||54309<=a&&54335>=a||54337<=a&&54363>=a||54365<=a&&54391>=a||54393<=a&&54419>=a||54421<=a&&54447>=a||54449<=a&&54475>=a||54477<=a&&54503>=a||54505<=\na&&54531>=a||54533<=a&&54559>=a||54561<=a&&54587>=a||54589<=a&&54615>=a||54617<=a&&54643>=a||54645<=a&&54671>=a||54673<=a&&54699>=a||54701<=a&&54727>=a||54729<=a&&54755>=a||54757<=a&&54783>=a||54785<=a&&54811>=a||54813<=a&&54839>=a||54841<=a&&54867>=a||54869<=a&&54895>=a||54897<=a&&54923>=a||54925<=a&&54951>=a||54953<=a&&54979>=a||54981<=a&&55007>=a||55009<=a&&55035>=a||55037<=a&&55063>=a||55065<=a&&55091>=a||55093<=a&&55119>=a||55121<=a&&55147>=a||55149<=a&&55175>=a||55177<=a&&55203>=a?10:9757==\na||9977==a||9994<=a&&9997>=a||127877==a||127938<=a&&127940>=a||127943==a||127946<=a&&127948>=a||128066<=a&&128067>=a||128070<=a&&128080>=a||128110==a||128112<=a&&128120>=a||128124==a||128129<=a&&128131>=a||128133<=a&&128135>=a||128170==a||128372<=a&&128373>=a||128378==a||128400==a||128405<=a&&128406>=a||128581<=a&&128583>=a||128587<=a&&128591>=a||128675==a||128692<=a&&128694>=a||128704==a||128716==a||129304<=a&&129308>=a||129310<=a&&129311>=a||129318==a||129328<=a&&129337>=a||129341<=a&&129342>=a||\n129489<=a&&129501>=a?13:127995<=a&&127999>=a?14:8205==a?15:9792==a||9794==a||9877<=a&&9878>=a||9992==a||10084==a||127752==a||127806==a||127859==a||127891==a||127908==a||127912==a||127979==a||127981==a||128139==a||128187<=a&&128188>=a||128295==a||128300==a||128488==a||128640==a||128658==a?16:128102<=a&&128105>=a?17:11}this.nextBreak=function(a,c){void 0===c&&(c=0);if(0>c)return 0;if(c>=a.length-1)return a.length;var b=k(h(a,c)),d=[];for(c+=1;c<a.length;c++){var e=a,g=c-1;if(!(55296<=e.charCodeAt(g)&&\n56319>=e.charCodeAt(g)&&56320<=e.charCodeAt(g+1)&&57343>=e.charCodeAt(g+1))){e=k(h(a,c));if(l(b,d,e))return c;d.push(e)}}return a.length};this.splitGraphemes=function(a){for(var c=[],b=0,d;(d=this.nextBreak(a,b))<a.length;)c.push(a.slice(b,d)),b=d;b<a.length&&c.push(a.slice(b));return c};this.iterateGraphemes=function(a){var c=0,b={next:function(){var d;if((d=this.nextBreak(a,c))<a.length){var e=a.slice(c,d);c=d;return{value:e,done:!1}}return c<a.length?(e=a.slice(c),c=a.length,{value:e,done:!1}):\n{value:void 0,done:!0}}.bind(this)};\"undefined\"!==typeof Symbol&&Symbol.iterator&&(b[Symbol.iterator]=function(){return b});return b};this.countGraphemes=function(a){for(var c=0,b=0,d;(d=this.nextBreak(a,b))<a.length;)b=d,c++;b<a.length&&c++;return c};return this}self.GraphemeSplitter=GraphemeSplitter;\n\n}\n\n// 3rdparty/poly-decomp.js\n{\n'use strict';function lineInt(l1,l2,precision){precision=precision||0;var i=[0,0];var a1,b1,c1,a2,b2,c2,det;a1=l1[1][1]-l1[0][1];b1=l1[0][0]-l1[1][0];c1=a1*l1[0][0]+b1*l1[0][1];a2=l2[1][1]-l2[0][1];b2=l2[0][0]-l2[1][0];c2=a2*l2[0][0]+b2*l2[0][1];det=a1*b2-a2*b1;if(!scalar_eq(det,0,precision)){i[0]=(b2*c1-b1*c2)/det;i[1]=(a1*c2-a2*c1)/det}return i}\nfunction lineSegmentsIntersect(p1,p2,q1,q2){var dx=p2[0]-p1[0];var dy=p2[1]-p1[1];var da=q2[0]-q1[0];var db=q2[1]-q1[1];if(da*dy-db*dx===0)return false;var s=(dx*(q1[1]-p1[1])+dy*(p1[0]-q1[0]))/(da*dy-db*dx);var t=(da*(p1[1]-q1[1])+db*(q1[0]-p1[0]))/(db*dx-da*dy);return s>=0&&s<=1&&t>=0&&t<=1}function triangleArea(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function isLeft(a,b,c){return triangleArea(a,b,c)>0}function isLeftOn(a,b,c){return triangleArea(a,b,c)>=0}\nfunction isRight(a,b,c){return triangleArea(a,b,c)<0}function isRightOn(a,b,c){return triangleArea(a,b,c)<=0}var tmpPoint1=[],tmpPoint2=[];\nfunction collinear(a,b,c,thresholdAngle){if(!thresholdAngle)return triangleArea(a,b,c)===0;else{var ab=tmpPoint1,bc=tmpPoint2;ab[0]=b[0]-a[0];ab[1]=b[1]-a[1];bc[0]=c[0]-b[0];bc[1]=c[1]-b[1];var dot=ab[0]*bc[0]+ab[1]*bc[1],magA=Math.sqrt(ab[0]*ab[0]+ab[1]*ab[1]),magB=Math.sqrt(bc[0]*bc[0]+bc[1]*bc[1]),angle=Math.acos(dot/(magA*magB));return angle<thresholdAngle}}function sqdist(a,b){var dx=b[0]-a[0];var dy=b[1]-a[1];return dx*dx+dy*dy}\nfunction polygonAt(polygon,i){var s=polygon.length;return polygon[i<0?i%s+s:i%s]}function polygonClear(polygon){polygon.length=0}function polygonAppend(polygon,poly,from,to){for(var i=from;i<to;i++)polygon.push(poly[i])}\nfunction polygonMakeCCW(polygon){var br=0,v=polygon;for(var i=1;i<polygon.length;++i)if(v[i][1]<v[br][1]||v[i][1]===v[br][1]&&v[i][0]>v[br][0])br=i;if(!isLeft(polygonAt(polygon,br-1),polygonAt(polygon,br),polygonAt(polygon,br+1))){polygonReverse(polygon);return true}else return false}function polygonReverse(polygon){var tmp=[];var N=polygon.length;for(var i=0;i!==N;i++)tmp.push(polygon.pop());for(var i=0;i!==N;i++)polygon[i]=tmp[i]}\nfunction polygonIsReflex(polygon,i){return isRight(polygonAt(polygon,i-1),polygonAt(polygon,i),polygonAt(polygon,i+1))}var tmpLine1=[],tmpLine2=[];\nfunction polygonCanSee(polygon,a,b){var p,dist,l1=tmpLine1,l2=tmpLine2;if(isLeftOn(polygonAt(polygon,a+1),polygonAt(polygon,a),polygonAt(polygon,b))&&isRightOn(polygonAt(polygon,a-1),polygonAt(polygon,a),polygonAt(polygon,b)))return false;dist=sqdist(polygonAt(polygon,a),polygonAt(polygon,b));for(var i=0;i!==polygon.length;++i){if((i+1)%polygon.length===a||i===a)continue;if(isLeftOn(polygonAt(polygon,a),polygonAt(polygon,b),polygonAt(polygon,i+1))&&isRightOn(polygonAt(polygon,a),polygonAt(polygon,\nb),polygonAt(polygon,i))){l1[0]=polygonAt(polygon,a);l1[1]=polygonAt(polygon,b);l2[0]=polygonAt(polygon,i);l2[1]=polygonAt(polygon,i+1);p=lineInt(l1,l2);if(sqdist(polygonAt(polygon,a),p)<dist)return false}}return true}\nfunction polygonCanSee2(polygon,a,b){for(var i=0;i!==polygon.length;++i){if(i===a||i===b||(i+1)%polygon.length===a||(i+1)%polygon.length===b)continue;if(lineSegmentsIntersect(polygonAt(polygon,a),polygonAt(polygon,b),polygonAt(polygon,i),polygonAt(polygon,i+1)))return false}return true}\nfunction polygonCopy(polygon,i,j,targetPoly){var p=targetPoly||[];polygonClear(p);if(i<j)for(var k=i;k<=j;k++)p.push(polygon[k]);else{for(var k=0;k<=j;k++)p.push(polygon[k]);for(var k=i;k<polygon.length;k++)p.push(polygon[k])}return p}\nfunction polygonGetCutEdges(polygon){var min=[],tmp1=[],tmp2=[],tmpPoly=[];var nDiags=Number.MAX_VALUE;for(var i=0;i<polygon.length;++i)if(polygonIsReflex(polygon,i))for(var j=0;j<polygon.length;++j)if(polygonCanSee(polygon,i,j)){tmp1=polygonGetCutEdges(polygonCopy(polygon,i,j,tmpPoly));tmp2=polygonGetCutEdges(polygonCopy(polygon,j,i,tmpPoly));for(var k=0;k<tmp2.length;k++)tmp1.push(tmp2[k]);if(tmp1.length<nDiags){min=tmp1;nDiags=tmp1.length;min.push([polygonAt(polygon,i),polygonAt(polygon,j)])}}return min}\nfunction polygonDecomp(polygon){var edges=polygonGetCutEdges(polygon);if(edges.length>0)return polygonSlice(polygon,edges);else return[polygon]}\nfunction polygonSlice(polygon,cutEdges){if(cutEdges.length===0)return[polygon];if(cutEdges instanceof Array&&cutEdges.length&&cutEdges[0]instanceof Array&&cutEdges[0].length===2&&cutEdges[0][0]instanceof Array){var polys=[polygon];for(var i=0;i<cutEdges.length;i++){var cutEdge=cutEdges[i];for(var j=0;j<polys.length;j++){var poly=polys[j];var result=polygonSlice(poly,cutEdge);if(result){polys.splice(j,1);polys.push(result[0],result[1]);break}}}return polys}else{var cutEdge=cutEdges;var i=polygon.indexOf(cutEdge[0]);\nvar j=polygon.indexOf(cutEdge[1]);if(i!==-1&&j!==-1)return[polygonCopy(polygon,i,j),polygonCopy(polygon,j,i)];else return false}}function polygonIsSimple(polygon){var path=polygon,i;for(i=0;i<path.length-1;i++)for(var j=0;j<i-1;j++)if(lineSegmentsIntersect(path[i],path[i+1],path[j],path[j+1]))return false;for(i=1;i<path.length-2;i++)if(lineSegmentsIntersect(path[0],path[path.length-1],path[i],path[i+1]))return false;return true}\nfunction getIntersectionPoint(p1,p2,q1,q2,delta){delta=delta||0;var a1=p2[1]-p1[1];var b1=p1[0]-p2[0];var c1=a1*p1[0]+b1*p1[1];var a2=q2[1]-q1[1];var b2=q1[0]-q2[0];var c2=a2*q1[0]+b2*q1[1];var det=a1*b2-a2*b1;if(!scalar_eq(det,0,delta))return[(b2*c1-b1*c2)/det,(a1*c2-a2*c1)/det];else return[0,0]}\nfunction polygonQuickDecomp(polygon,result,reflexVertices,steinerPoints,delta,maxlevel,level){maxlevel=maxlevel||100;level=level||0;delta=delta||25;result=typeof result!==\"undefined\"?result:[];reflexVertices=reflexVertices||[];steinerPoints=steinerPoints||[];var upperInt=[0,0],lowerInt=[0,0],p=[0,0];var upperDist=0,lowerDist=0,d=0,closestDist=0;var upperIndex=0,lowerIndex=0,closestIndex=0;var lowerPoly=[],upperPoly=[];var poly=polygon,v=polygon;if(v.length<3)return result;level++;if(level>maxlevel){console.warn(\"quickDecomp: max level (\"+\nmaxlevel+\") reached.\");return result}for(var i=0;i<polygon.length;++i)if(polygonIsReflex(poly,i)){reflexVertices.push(poly[i]);upperDist=lowerDist=Number.MAX_VALUE;for(var j=0;j<polygon.length;++j){if(isLeft(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j))&&isRightOn(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j-1))){p=getIntersectionPoint(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j),polygonAt(poly,j-1));if(isRight(polygonAt(poly,i+1),polygonAt(poly,i),p)){d=sqdist(poly[i],\np);if(d<lowerDist){lowerDist=d;lowerInt=p;lowerIndex=j}}}if(isLeft(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j+1))&&isRightOn(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j))){p=getIntersectionPoint(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j),polygonAt(poly,j+1));if(isLeft(polygonAt(poly,i-1),polygonAt(poly,i),p)){d=sqdist(poly[i],p);if(d<upperDist){upperDist=d;upperInt=p;upperIndex=j}}}}if(lowerIndex===(upperIndex+1)%polygon.length){p[0]=(lowerInt[0]+upperInt[0])/2;\np[1]=(lowerInt[1]+upperInt[1])/2;steinerPoints.push(p);if(i<upperIndex){polygonAppend(lowerPoly,poly,i,upperIndex+1);lowerPoly.push(p);upperPoly.push(p);if(lowerIndex!==0)polygonAppend(upperPoly,poly,lowerIndex,poly.length);polygonAppend(upperPoly,poly,0,i+1)}else{if(i!==0)polygonAppend(lowerPoly,poly,i,poly.length);polygonAppend(lowerPoly,poly,0,upperIndex+1);lowerPoly.push(p);upperPoly.push(p);polygonAppend(upperPoly,poly,lowerIndex,i+1)}}else{if(lowerIndex>upperIndex)upperIndex+=polygon.length;\nclosestDist=Number.MAX_VALUE;if(upperIndex<lowerIndex)return result;for(var j=lowerIndex;j<=upperIndex;++j)if(isLeftOn(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j))&&isRightOn(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j))){d=sqdist(polygonAt(poly,i),polygonAt(poly,j));if(d<closestDist&&polygonCanSee2(poly,i,j)){closestDist=d;closestIndex=j%polygon.length}}if(i<closestIndex){polygonAppend(lowerPoly,poly,i,closestIndex+1);if(closestIndex!==0)polygonAppend(upperPoly,poly,closestIndex,\nv.length);polygonAppend(upperPoly,poly,0,i+1)}else{if(i!==0)polygonAppend(lowerPoly,poly,i,v.length);polygonAppend(lowerPoly,poly,0,closestIndex+1);polygonAppend(upperPoly,poly,closestIndex,i+1)}}if(lowerPoly.length<upperPoly.length){polygonQuickDecomp(lowerPoly,result,reflexVertices,steinerPoints,delta,maxlevel,level);polygonQuickDecomp(upperPoly,result,reflexVertices,steinerPoints,delta,maxlevel,level)}else{polygonQuickDecomp(upperPoly,result,reflexVertices,steinerPoints,delta,maxlevel,level);polygonQuickDecomp(lowerPoly,\nresult,reflexVertices,steinerPoints,delta,maxlevel,level)}return result}result.push(polygon);return result}function polygonRemoveCollinearPoints(polygon,precision){var num=0;for(var i=polygon.length-1;polygon.length>3&&i>=0;--i)if(collinear(polygonAt(polygon,i-1),polygonAt(polygon,i),polygonAt(polygon,i+1),precision)){polygon.splice(i%polygon.length,1);num++}return num}\nfunction polygonRemoveDuplicatePoints(polygon,precision){for(var i=polygon.length-1;i>=1;--i){var pi=polygon[i];for(var j=i-1;j>=0;--j)if(points_eq(pi,polygon[j],precision)){polygon.splice(i,1);continue}}}function scalar_eq(a,b,precision){precision=precision||0;return Math.abs(a-b)<=precision}function points_eq(a,b,precision){return scalar_eq(a[0],b[0],precision)&&scalar_eq(a[1],b[1],precision)}\nself.polyDecomp={decomp:polygonDecomp,quickDecomp:polygonQuickDecomp,isSimple:polygonIsSimple,removeCollinearPoints:polygonRemoveCollinearPoints,removeDuplicatePoints:polygonRemoveDuplicatePoints,makeCCW:polygonMakeCCW};\n\n}\n\n// lib/c3.js\n{\n'use strict';let isReady=false;let hasAppStarted=false;let buildMode=\"dev\";const C3=self.C3=class C3{constructor(){throw TypeError(\"static class can't be instantiated\");}static SetReady(){isReady=true}static IsReady(){return isReady}static SetAppStarted(){hasAppStarted=true}static HasAppStarted(){return hasAppStarted}static SetBuildMode(m){buildMode=m}static GetBuildMode(){return buildMode}static IsReleaseBuild(){return buildMode===\"final\"}};C3.isDebug=false;C3.isDebugDefend=false;\nC3.hardwareConcurrency=navigator.hardwareConcurrency||2;self.C3X={};\n\n}\n\n// ../lib/queryParser.js\n{\n'use strict';const C3=self.C3;\nC3.QueryParser=class QueryParser{constructor(queryString){this._queryString=queryString;this._parameters=new Map;this._Parse()}_Parse(){let str=this._queryString;if(str.startsWith(\"?\")||str.startsWith(\"#\"))str=str.substr(1);const arr=str.split(\"&\");for(const p of arr)this._ParseParameter(p)}_ParseParameter(p){if(!p)return;if(!p.includes(\"=\")){this._parameters.set(p,null);return}const i=p.indexOf(\"=\");const parameterName=decodeURIComponent(p.substring(0,i));const parameterValue=decodeURIComponent(p.substring(i+\n1));this._parameters.set(parameterName,parameterValue)}LogAll(){for(const e of this._parameters)console.log(\"[QueryParser] Parameter '\"+e[0]+\"' = \"+(e[1]===null?\"null\":\"'\"+e[1]+\"'\"))}Has(name){return this._parameters.has(name)}Get(name){const ret=this._parameters.get(name);if(typeof ret===\"undefined\")return null;else return ret}ClearHash(){history.replaceState(\"\",document.title,location.pathname+location.search)}Reparse(str){this._queryString=str;this._parameters.clear();this._Parse()}};\nC3.QueryString=new C3.QueryParser(location.search);C3.LocationHashString=new C3.QueryParser(location.hash);if(C3.QueryString.Has(\"perf\"))C3.isPerformanceProfiling=true;if(C3.QueryString.Get(\"mode\")!==\"dev\")C3.SetBuildMode(\"final\");\n\n}\n\n// ../lib/detect/detect.js\n{\n'use strict';const C3=self.C3;const UNKNOWN=\"(unknown)\";C3.Platform={OS:UNKNOWN,OSVersion:UNKNOWN,Browser:UNKNOWN,BrowserVersion:UNKNOWN,BrowserVersionNumber:NaN,BrowserEngine:UNKNOWN,Context:\"browser\",IsDesktop:true,IsMobile:false,IsAppleOS:false,IsIpadOS:false,GetDetailedInfo:async()=>{}};const windowsNTVerMap=new Map([[5,\"2000\"],[5.1,\"XP\"],[5.2,\"XP\"],[6,\"Vista\"],[6.1,\"7\"],[6.2,\"8\"],[6.3,\"8.1\"],[10,\"10\"]]);\nfunction GetWindowsNTVersionName(ntVer){const num=parseFloat(ntVer);const ret=windowsNTVerMap.get(num);if(ret)return ret;if(num>=13)return\"11\";return\"NT \"+ntVer}const uaStr=navigator.userAgent;const uaData=navigator[\"userAgentData\"];\nif(uaData&&uaData[\"brands\"].length>0){C3.Platform.OS=uaData[\"platform\"];C3.Platform.IsMobile=uaData[\"mobile\"];C3.Platform.IsDesktop=!C3.Platform.IsMobile;const RECOGNIZED_BROWSERS=new Map([[\"Google Chrome\",\"Chrome\"],[\"Microsoft Edge\",\"Edge\"],[\"Opera\",\"Opera\"],[\"Opera GX\",\"Opera GX\"],[\"Mozilla Firefox\",\"Firefox\"],[\"Apple Safari\",\"Safari\"],[\"NW.js\",\"NW.js\"]]);const RECOGNIZED_ENGINES=new Map([[\"Chromium\",\"Chromium\"],[\"Gecko\",\"Gecko\"],[\"WebKit\",\"WebKit\"]]);function ReadBrandList(brands){let browser=\n\"\";let browser_version=\"\";let engine=\"\";let engine_version=\"\";for(const o of brands){const recognizedBrowser=RECOGNIZED_BROWSERS.get(o[\"brand\"]);if(!browser&&recognizedBrowser){browser=recognizedBrowser;browser_version=o[\"version\"]}const recognizedEngine=RECOGNIZED_ENGINES.get(o[\"brand\"]);if(!engine&&recognizedEngine){engine=recognizedEngine;engine_version=o[\"version\"]}}if(!browser&&engine===\"Chromium\"){C3.Platform.Browser=\"Chromium\";C3.Platform.BrowserVersion=engine_version}C3.Platform.Browser=browser||\nUNKNOWN;C3.Platform.BrowserVersion=browser_version||UNKNOWN;C3.Platform.BrowserEngine=engine||UNKNOWN}ReadBrandList(uaData[\"brands\"]);let didGetDetailedInfo=false;C3.Platform.GetDetailedInfo=async()=>{if(didGetDetailedInfo)return;try{const details=await navigator[\"userAgentData\"][\"getHighEntropyValues\"]([\"platformVersion\",\"fullVersionList\"]);ReadBrandList(details[\"fullVersionList\"]);if(C3.Platform.OS===\"Windows\")C3.Platform.OSVersion=GetWindowsNTVersionName(details[\"platformVersion\"]);else C3.Platform.OSVersion=\ndetails[\"platformVersion\"];didGetDetailedInfo=true}catch(err){console.warn(\"Failed to get detailed user agent information: \",err)}}}else{function RunTest(regex_or_arr,handler){const arr=Array.isArray(regex_or_arr)?regex_or_arr:[regex_or_arr];for(const regex of arr){const result=regex.exec(uaStr);if(result){handler(result);break}}}RunTest(/windows\\s+nt\\s+([\\d\\.]+)/i,result=>{C3.Platform.OS=\"Windows\";const ntVer=result[1];C3.Platform.OSVersion=GetWindowsNTVersionName(ntVer)});RunTest(/mac\\s+os\\s+x\\s+([\\d\\._]+)/i,\nresult=>{C3.Platform.OS=\"macOS\";C3.Platform.OSVersion=result[1].replace(/_/g,\".\")});RunTest(/CrOS/,()=>{C3.Platform.OS=\"Chrome OS\"});RunTest(/linux|openbsd|freebsd|netbsd/i,()=>{C3.Platform.OS=\"Linux\"});RunTest(/android/i,()=>{C3.Platform.OS=\"Android\"});RunTest(/android\\s+([\\d\\.]+)/i,result=>{C3.Platform.OS=\"Android\";C3.Platform.OSVersion=result[1]});if(C3.Platform.OS===UNKNOWN){RunTest(/(iphone|ipod|ipad)/i,result=>{C3.Platform.OS=\"iOS\"});RunTest([/iphone\\s+os\\s+([\\d\\._]+)/i,/ipad[^)]*os\\s+([\\d\\._]+)/i],\nresult=>{C3.Platform.OS=\"iOS\";C3.Platform.OSVersion=result[1].replace(/_/g,\".\")})}const hasChrome=/chrome\\//i.test(uaStr);const hasChromium=/chromium\\//i.test(uaStr);const hasEdge=/edg\\//i.test(uaStr);const hasOpera=/OPR\\//.test(uaStr);const hasNWjs=/nwjs/i.test(uaStr);const hasSafari=/safari\\//i.test(uaStr);const hasWebKit=/webkit/i.test(uaStr);if(!hasEdge&&!hasOpera)RunTest(/chrome\\/([\\d\\.]+)/i,result=>{C3.Platform.Browser=\"Chrome\";C3.Platform.BrowserVersion=result[1];C3.Platform.BrowserEngine=\n\"Chromium\"});RunTest(/edg\\/([\\d\\.]+)/i,result=>{C3.Platform.Browser=\"Edge\";C3.Platform.BrowserVersion=result[1];C3.Platform.BrowserEngine=\"Chromium\"});RunTest(/OPR\\/([\\d\\.]+)/,result=>{C3.Platform.Browser=\"Opera\";C3.Platform.BrowserVersion=result[1];C3.Platform.BrowserEngine=\"Chromium\"});RunTest(/chromium\\/([\\d\\.]+)/i,result=>{C3.Platform.Browser=\"Chromium\";C3.Platform.BrowserVersion=result[1];C3.Platform.BrowserEngine=\"Chromium\"});RunTest(/nwjs\\/[0-9.]+/i,result=>{C3.Platform.Browser=\"NW.js\";C3.Platform.BrowserVersion=\nresult[1];C3.Platform.BrowserEngine=\"Chromium\";C3.Platform.Context=\"nwjs\"});RunTest(/firefox\\/([\\d\\.]+)/i,result=>{C3.Platform.Browser=\"Firefox\";C3.Platform.BrowserVersion=result[1];C3.Platform.BrowserEngine=\"Gecko\"});if(hasSafari&&!hasChrome&&!hasChromium&&!hasEdge&&!hasOpera&&!hasNWjs){C3.Platform.Browser=\"Safari\";C3.Platform.BrowserEngine=\"WebKit\";RunTest(/version\\/([\\d\\.]+)/i,result=>{C3.Platform.BrowserVersion=result[1]});RunTest(/crios\\/([\\d\\.]+)/i,result=>{C3.Platform.Browser=\"Chrome for iOS\";\nC3.Platform.BrowserVersion=result[1]});RunTest(/fxios\\/([\\d\\.]+)/i,result=>{C3.Platform.Browser=\"Firefox for iOS\";C3.Platform.BrowserVersion=result[1]});RunTest(/edgios\\/([\\d\\.]+)/i,result=>{C3.Platform.Browser=\"Edge for iOS\";C3.Platform.BrowserVersion=result[1]})}if(C3.Platform.BrowserEngine===UNKNOWN&&hasWebKit)C3.Platform.BrowserEngine=\"WebKit\";if(C3.Platform.OS===\"Android\"&&C3.Platform.Browser===\"Safari\")C3.Platform.Browser=\"Stock\";const desktopOSs=new Set([\"Windows\",\"macOS\",\"Linux\",\"Chrome OS\"]);\nconst isDesktop=desktopOSs.has(C3.Platform.OS)||C3.Platform.Context===\"nwjs\";C3.Platform.IsDesktop=isDesktop;C3.Platform.IsMobile=!isDesktop}if(C3.Platform.Browser===\"Chrome\"&&C3.Platform.Context===\"browser\"&&/wv\\)/.test(uaStr))C3.Platform.Context=\"webview\";if(C3.Platform.Context!==\"nwjs\"&&typeof window!==\"undefined\"&&(window.matchMedia&&window.matchMedia(\"(display-mode: standalone)\").matches||navigator[\"standalone\"]))C3.Platform.Context=\"webapp\";C3.Platform.BrowserVersionNumber=parseFloat(C3.Platform.BrowserVersion);\nconst looksLikeIPadOS=C3.Platform.OS===\"macOS\"&&navigator[\"maxTouchPoints\"]&&navigator[\"maxTouchPoints\"]>2;if(looksLikeIPadOS){C3.Platform.OS=\"iOS\";C3.Platform.OSVersion=C3.Platform.BrowserVersion;C3.Platform.IsDesktop=false;C3.Platform.IsMobile=true;C3.Platform.IsIpadOS=true}C3.Platform.IsAppleOS=C3.Platform.OS===\"macOS\"||C3.Platform.OS===\"iOS\";\n\n}\n\n// ../lib/storage/kvStorage.js\n{\n'use strict';{const VERSION=2;const STORE_NAME=\"keyvaluepairs\";const DATABASE_PROMISE_MAP=new Map;const SUPPORTS_GETALL=typeof IDBObjectStore!==\"undefined\"&&typeof IDBObjectStore.prototype.getAll===\"function\";const SUPPORTS_GETALLKEYS=typeof IDBObjectStore!==\"undefined\"&&typeof IDBObjectStore.prototype.getAllKeys===\"function\";function asyncifyRequest(request){return new Promise((res,rej)=>{request.onsuccess=()=>res(request.result);request.onerror=()=>rej(request.error)})}function asyncifyTransaction(tx){return new Promise((res,\nrej)=>{tx.oncomplete=()=>res();tx.onerror=()=>rej(tx.error);tx.onabort=()=>rej(tx.error)})}function openReadOnlyTransaction(name,method){return openTransaction(name,method)}function openWriteTransaction(name,method){return openTransaction(name,method,true)}async function openTransaction(name,method,write=false,allowRetry=true){const db=await lazyOpenDatabase(name);try{const tx=db.transaction([STORE_NAME],write?\"readwrite\":\"readonly\");return method(tx)}catch(err){if(allowRetry&&err[\"name\"]===\"InvalidStateError\"){DATABASE_PROMISE_MAP.delete(name);\nreturn openTransaction(name,method,write,false)}else throw err;}}function lazyOpenDatabase(name){RequireString(name);let dbPromise=DATABASE_PROMISE_MAP.get(name);if(!(dbPromise instanceof Promise)){dbPromise=openDatabase(name);DATABASE_PROMISE_MAP.set(name,dbPromise);dbPromise.catch(err=>DATABASE_PROMISE_MAP.delete(name))}return dbPromise}async function openDatabase(name){RequireString(name);const openRequest=indexedDB.open(name,VERSION);openRequest.addEventListener(\"upgradeneeded\",e=>{try{const db=\ne.target.result;db.createObjectStore(STORE_NAME)}catch(err){console.error(`Failed to create objectstore for database ${name}`,err)}});return asyncifyRequest(openRequest)}function RequireString(x){if(typeof x!==\"string\")throw new TypeError(\"expected string\");}function getEntriesFromCursor(tx,type){const request=tx.objectStore(STORE_NAME).openCursor();return new Promise(resolve=>{const results=[];request.onsuccess=event=>{const cursor=event.target.result;if(cursor){switch(type){case \"entries\":results.push([cursor.key,\ncursor.value]);break;case \"keys\":results.push(cursor.key);break;case \"values\":results.push(cursor.value);break}cursor.continue()}else resolve(results)}})}class KVStorageContainer{constructor(name){RequireString(name);this.name=name}async ready(){await lazyOpenDatabase(this.name)}set(key,value){RequireString(key);return openWriteTransaction(this.name,async tx=>{const request=tx.objectStore(STORE_NAME).put(value,key);const requestPromise=asyncifyRequest(request);const txPromise=asyncifyTransaction(tx);\nawait Promise.all([txPromise,requestPromise])})}get(key){RequireString(key);return openReadOnlyTransaction(this.name,async tx=>{const request=tx.objectStore(STORE_NAME).get(key);const requestPromise=asyncifyRequest(request);const txPromise=asyncifyTransaction(tx);const [_,value]=await Promise.all([txPromise,requestPromise]);return value})}delete(key){RequireString(key);return openWriteTransaction(this.name,async tx=>{const request=tx.objectStore(STORE_NAME).delete(key);const requestPromise=asyncifyRequest(request);\nconst txPromise=asyncifyTransaction(tx);await Promise.all([txPromise,requestPromise])})}clear(){return openWriteTransaction(this.name,async tx=>{const request=tx.objectStore(STORE_NAME).clear();const requestPromise=asyncifyRequest(request);const txPromise=asyncifyTransaction(tx);await Promise.all([txPromise,requestPromise])})}keys(){return openReadOnlyTransaction(this.name,async tx=>{let requestPromise;if(SUPPORTS_GETALLKEYS){const request=tx.objectStore(STORE_NAME).getAllKeys();requestPromise=asyncifyRequest(request)}else requestPromise=\ngetEntriesFromCursor(tx,\"keys\");const txPromise=asyncifyTransaction(tx);const [_,value]=await Promise.all([txPromise,requestPromise]);return value})}values(){return openReadOnlyTransaction(this.name,async tx=>{let requestPromise;if(SUPPORTS_GETALL){const request=tx.objectStore(STORE_NAME).getAll();requestPromise=asyncifyRequest(request)}else requestPromise=getEntriesFromCursor(tx,\"values\");const txPromise=asyncifyTransaction(tx);const [_,value]=await Promise.all([txPromise,requestPromise]);return value})}entries(){return openReadOnlyTransaction(this.name,\nasync tx=>{const requestPromise=getEntriesFromCursor(tx,\"entries\");const txPromise=asyncifyTransaction(tx);const [_,value]=await Promise.all([txPromise,requestPromise]);return value})}}self.KVStorageContainer=KVStorageContainer};\n\n}\n\n// ../lib/storage/localForageAdaptor.js\n{\n'use strict';{const KVStorageContainer=self.KVStorageContainer;const CRITICAL_ERRORS=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\\.open\\(\\) called in an invalid security context/i];const memoryStorage=new WeakMap;let isInMemory=false;if(typeof indexedDB===\"undefined\"){isInMemory=true;\nconsole.warn(\"Unable to use local storage because indexedDB is not defined\")}function NOT_IMPLEMENTED(name){throw new Error(`\"${name}\" is not implemented`);}function DISALLOW_CALLBACK(fn){if(typeof fn===\"function\")throw new Error(`localforage callback API is not implemented; please use the promise API instead`);}function StructuredClone(value){if(typeof value===\"object\")return new Promise(resolve=>{const {port1,port2}=new MessageChannel;port2.onmessage=ev=>resolve(ev.data);port1.postMessage(value)});\nelse return Promise.resolve(value)}class ForageAdaptor{constructor(inst){this._inst=inst;memoryStorage.set(this,new Map)}_MaybeSwitchToMemoryFallback(err){if(isInMemory)return;for(const regex of CRITICAL_ERRORS)if(err&&regex.test(err.message)){console.error(\"Unable to use local storage, reverting to in-memory store: \",err,err.message);isInMemory=true;break}}async _getItemFallback(name){const value=memoryStorage.get(this).get(name);const ret=await StructuredClone(value);return typeof ret===\"undefined\"?\nnull:ret}async _setItemFallback(name,value){value=await StructuredClone(value);memoryStorage.get(this).set(name,value)}_removeItemFallback(name){memoryStorage.get(this).delete(name)}_clearFallback(){memoryStorage.get(this).clear()}_keysFallback(){return Array.from(memoryStorage.get(this).keys())}IsUsingFallback(){return isInMemory}async getItem(key,successCallback){DISALLOW_CALLBACK(successCallback);if(isInMemory)return await this._getItemFallback(key);let result;try{result=await this._inst.get(key)}catch(err){this._MaybeSwitchToMemoryFallback(err);\nif(isInMemory)return await this._getItemFallback(key);else{console.error(`Error reading '${key}' from storage, returning null: `,err);return null}}return typeof result===\"undefined\"?null:result}async setItem(key,value,successCallback){DISALLOW_CALLBACK(successCallback);if(typeof value===\"undefined\")value=null;if(isInMemory){await this._setItemFallback(key,value);return}try{await this._inst.set(key,value)}catch(err){this._MaybeSwitchToMemoryFallback(err);if(isInMemory)await this._setItemFallback(key,\nvalue);else throw err;}}async removeItem(key,successCallback){DISALLOW_CALLBACK(successCallback);if(isInMemory){this._removeItemFallback(key);return}try{await this._inst.delete(key)}catch(err){this._MaybeSwitchToMemoryFallback(err);if(isInMemory)this._removeItemFallback(key);else console.error(`Error removing '${key}' from storage: `,err)}}async clear(successCallback){DISALLOW_CALLBACK(successCallback);if(isInMemory){this._clearFallback();return}try{await this._inst.clear()}catch(err){this._MaybeSwitchToMemoryFallback(err);\nif(isInMemory)this._clearFallback();else console.error(`Error clearing storage: `,err)}}async keys(successCallback){DISALLOW_CALLBACK(successCallback);if(isInMemory)return this._keysFallback();let result=[];try{result=await this._inst.keys()}catch(err){this._MaybeSwitchToMemoryFallback(err);if(isInMemory)return this._keysFallback();else console.error(`Error getting storage keys: `,err)}return result}ready(successCallback){DISALLOW_CALLBACK(successCallback);if(isInMemory)return Promise.resolve(true);\nelse return this._inst.ready()}createInstance(options){if(typeof options!==\"object\")throw new TypeError(\"invalid options object\");const name=options[\"name\"];if(typeof name!==\"string\")throw new TypeError(\"invalid store name\");const inst=new KVStorageContainer(name);return new ForageAdaptor(inst)}length(successCallback){NOT_IMPLEMENTED(\"localforage.length()\")}key(index,successCallback){NOT_IMPLEMENTED(\"localforage.key()\")}iterate(iteratorCallback,successCallback){NOT_IMPLEMENTED(\"localforage.iterate()\")}setDriver(driverName){NOT_IMPLEMENTED(\"localforage.setDriver()\")}config(options){NOT_IMPLEMENTED(\"localforage.config()\")}defineDriver(customDriver){NOT_IMPLEMENTED(\"localforage.defineDriver()\")}driver(){NOT_IMPLEMENTED(\"localforage.driver()\")}supports(driverName){NOT_IMPLEMENTED(\"localforage.supports()\")}dropInstance(){NOT_IMPLEMENTED(\"localforage.dropInstance()\")}disableMemoryMode(){isInMemory=\nfalse}}self[\"localforage\"]=new ForageAdaptor(new KVStorageContainer(\"localforage\"))};\n\n}\n\n// ../lib/misc/supports.js\n{\n'use strict';const C3=self.C3;C3.Supports={};C3.Supports.WebAnimations=(()=>{try{if(C3.Platform.Browser===\"Safari\")return false;if(typeof document===\"undefined\")return false;const e=document.createElement(\"div\");if(typeof e.animate===\"undefined\")return false;const player=e.animate([{opacity:\"0\"},{opacity:\"1\"}],1E3);return typeof player.reverse!==\"undefined\"}catch(e){return false}})();C3.Supports.DialogElement=typeof HTMLDialogElement!==\"undefined\";C3.Supports.RequestIdleCallback=!!self.requestIdleCallback;\nC3.Supports.ImageBitmap=!!self.createImageBitmap;C3.Supports.ImageBitmapOptions=false;C3.Supports.ImageBitmapOptionsResize=false;\nif(C3.Supports.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{\"premultiplyAlpha\":\"none\"}).then(()=>{C3.Supports.ImageBitmapOptions=true}).catch(()=>{C3.Supports.ImageBitmapOptions=false})}catch(err){C3.Supports.ImageBitmapOptions=false}try{self.createImageBitmap(new ImageData(32,32),{\"resizeWidth\":10,\"resizeHeight\":10}).then(imageBitmap=>{C3.Supports.ImageBitmapOptionsResize=imageBitmap.width===10&&imageBitmap.height===10}).catch(()=>{C3.Supports.ImageBitmapOptionsResize=false})}catch(err){C3.Supports.ImageBitmapOptionsResize=\nfalse}}C3.Supports.ClipboardReadText=!!(navigator[\"clipboard\"]&&navigator[\"clipboard\"][\"readText\"]&&C3.Platform.Browser!==\"Firefox\");C3.Supports.PermissionsQuery=!!(navigator[\"permissions\"]&&navigator[\"permissions\"][\"query\"]);C3.Supports.ClipboardPermissionsQuery=false;if(C3.Supports.PermissionsQuery){const permission={\"name\":\"clipboard-read\"};navigator[\"permissions\"][\"query\"](permission).then(()=>{C3.Supports.ClipboardPermissionsQuery=true}).catch(()=>{C3.Supports.ClipboardPermissionsQuery=false})}\nC3.Supports.AsyncClipboardApi=!!(navigator[\"permissions\"]&&navigator[\"clipboard\"]&&self[\"ClipboardItem\"]);C3.Supports.Proxies=typeof Proxy!==\"undefined\";C3.Supports.DownloadAttribute=(()=>{if(typeof document===\"undefined\")return false;const a=document.createElement(\"a\");return typeof a.download!==\"undefined\"})();C3.Supports.Fetch=typeof fetch===\"function\";C3.Supports.PersistentStorage=!!(self.isSecureContext&&C3.Platform.Browser!==\"Opera\"&&(navigator[\"storage\"]&&navigator[\"storage\"][\"persist\"]));\nC3.Supports.StorageQuotaEstimate=!!(self.isSecureContext&&(navigator[\"storage\"]&&navigator[\"storage\"][\"estimate\"]));C3.Supports.Fullscreen=(()=>{if(typeof document===\"undefined\")return false;if(C3.Platform.OS===\"iOS\")return false;const elem=document.documentElement;return!!(elem.requestFullscreen||elem.msRequestFullscreen||elem.mozRequestFullScreen||elem.webkitRequestFullscreen)})();C3.Supports.ImageDecoder=typeof self[\"ImageDecoder\"]!==\"undefined\";C3.Supports.WebCodecs=!!self[\"VideoEncoder\"];\nC3.Supports.NativeFileSystemAPI=!!self[\"showOpenFilePicker\"];C3.Supports.QueryLocalFonts=!!self[\"queryLocalFonts\"];C3.Supports.UserActivation=!!navigator[\"userActivation\"];C3.Supports.CanvasToBlobWebP=false;\n(async()=>{let canvas;if(typeof document===\"undefined\")canvas=new OffscreenCanvas(32,32);else{canvas=document.createElement(\"canvas\");canvas.width=32;canvas.height=32}const ctx=canvas.getContext(\"2d\");ctx.fillStyle=\"blue\";ctx.fillRect(0,0,32,32);let blob=null;try{if(canvas.toBlob)blob=await new Promise(resolve=>canvas.toBlob(resolve,\"image/webp\",1));else if(canvas[\"convertToBlob\"])blob=await canvas[\"convertToBlob\"]({\"type\":\"image/webp\",\"quality\":1});C3.Supports.CanvasToBlobWebP=blob&&blob.type===\n\"image/webp\"}catch(err){C3.Supports.CanvasToBlobWebP=false}})();\n\n}\n\n// ../lib/misc/polyfills.js\n{\n'use strict';const C3=self.C3;if(!String.prototype.trimStart){const startWhitespace=/^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]*/;String.prototype.trimStart=function trimStart(){return this.replace(startWhitespace,\"\")}}\nif(!String.prototype.trimEnd){const endWhitespace=/[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]*$/;String.prototype.trimEnd=function trimEnd(){return this.replace(endWhitespace,\"\")}}if(!String.prototype.replaceAll)String.prototype.replaceAll=function replaceAll(find,replace){return this.replace(new RegExp(C3.EscapeRegex(find),\"g\"),replace)};if(!Array.prototype.values)Array.prototype.values=function*(){for(const i of this)yield i};\nif(!Array.prototype.flat){function arrayFlat(arr,depth){return arr.reduce((acc,val)=>{if(depth>0&&Array.isArray(val)){Array.prototype.push.apply(acc,arrayFlat(val,depth-1));return acc}else{acc.push(val);return acc}},[])}Array.prototype.flat=function(depth=1){return arrayFlat(this,depth)}}if(!Array.prototype.at)Array.prototype.at=function at(n){n=Math.trunc(n)||0;if(n<0)n+=this.length;if(n<0||n>=this.length)return undefined;return this[n]};\nif(!String.prototype.at)String.prototype.at=function at(n){n=Math.trunc(n)||0;if(n<0)n+=this.length;if(n<0||n>=this.length)return undefined;return this[n]};if(!RegExp.escape)RegExp.escape=function(s){return String(s).replace(/[\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\")};\nif(navigator[\"storage\"]&&!navigator[\"storage\"][\"estimate\"]&&navigator[\"webkitTemporaryStorage\"]&&navigator[\"webkitTemporaryStorage\"][\"queryUsageAndQuota\"])navigator[\"storage\"][\"estimate\"]=function(){return new Promise((resolve,reject)=>{return navigator[\"webkitTemporaryStorage\"][\"queryUsageAndQuota\"]((usage,quota)=>resolve({\"usage\":usage,\"quota\":quota}),reject)})};if(typeof self.isSecureContext===\"undefined\")self.isSecureContext=location.protocol===\"https:\";\nif(typeof self[\"globalThis\"]===\"undefined\")self[\"globalThis\"]=self;\n\n}\n\n// lib/misc/assert.js\n{\n'use strict';const C3=self.C3;function assertFail(msg_){let stack=C3.GetCallStack();let msg=\"Assertion failure: \"+msg_+\"\\n\\nStack trace:\\n\"+stack;console.error(msg)}self.assert=function assert(cnd_,msg_){if(!cnd_)assertFail(msg_)};\n\n}\n\n// ../lib/misc/typeChecks.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;C3.IsNumber=function IsNumber(x){return typeof x===\"number\"};C3.IsFiniteNumber=function IsFiniteNumber(x){return C3.IsNumber(x)&&isFinite(x)};C3.RequireNumber=function RequireNumber(x){if(!C3.IsNumber(x))throw new TypeError(\"expected number\");};C3.RequireOptionalNumber=function RequireOptionalNumber(x){if(C3.IsNullOrUndefined(x))return};\nC3.RequireNumberInRange=function RequireNumberInRange(x,low,high){if(!C3.IsNumber(x)||isNaN(x)||low>x||high<x)throw new RangeError(\"number outside of range\");};C3.RequireAllNumber=function RequireAllNumber(...args){for(let a of args);};C3.RequireFiniteNumber=function RequireFiniteNumber(x){if(!C3.IsFiniteNumber(x))throw new TypeError(\"expected finite number\");};C3.RequireOptionalFiniteNumber=function RequireOptionalFiniteNumber(x){if(C3.IsNullOrUndefined(x))return};\nC3.RequireAllFiniteNumber=function RequireAllFiniteNumber(...args){for(let a of args);};C3.IsString=function IsString(x){return typeof x===\"string\"};C3.RequireString=function RequireString(x){if(!C3.IsString(x))throw new TypeError(\"expected string\");};C3.RequireOptionalString=function RequireOptionalString(x){if(C3.IsNullOrUndefined(x))return};C3.RequireAllString=function RequireAllString(...args){for(let a of args);};\nC3.IsSimpleObject=function IsSimpleObject(x){if(typeof x!==\"object\"||x===null)return false;let proto=Object.getPrototypeOf(x);return proto?proto.constructor===Object:proto===null};C3.RequireSimpleObject=function RequireSimpleObject(x){if(!C3.IsSimpleObject(x))throw new TypeError(\"expected simple object\");};C3.RequireOptionalSimpleObject=function RequireSimpleObject(x){if(C3.IsNullOrUndefined(x))return;if(!C3.IsSimpleObject(x))throw new TypeError(\"expected simple object\");};\nC3.IsObject=function IsObject(x){return typeof x===\"object\"&&x!==null&&!Array.isArray(x)};C3.RequireObject=function RequireObject(x){if(!C3.IsObject(x))throw new TypeError(\"expected object\");};C3.RequireOptionalObject=function RequireOptionalObject(x){if(C3.IsNullOrUndefined(x))return};C3.RequireAllObject=function RequireAllObject(...args){for(let a of args);};C3.IsFileLike=function IsFileLike(x){return C3.WeakIsInstanceOf(x,Blob)&&typeof x[\"name\"]===\"string\"};\nC3.RequireFileLike=function RequireFileLike(x){if(!C3.IsFileLike(x))throw new TypeError(\"expected file\");};C3.RequireOptionalFileLike=function RequireOptionalFileLike(x){if(C3.IsNullOrUndefined(x))return};C3.IsArray=function IsArray(x){return Array.isArray(x)};C3.RequireArray=function RequireArray(x){if(!C3.IsArray(x))throw new TypeError(\"expected array\");};C3.RequireOptionalArray=function RequireOptionalArray(x){if(C3.IsNullOrUndefined(x))return};\nC3.RequireAllArray=function RequireAllArray(...args){for(let a of args);};C3.Is2DArray=function(x){if(!C3.IsArray(x))return false;if(!x.length)return true;if(!C3.IsArray(x[0]))return false;return true};C3.Require2DArray=function Require2DArray(x){if(!C3.Is2DArray(x))throw new TypeError(\"expected 2d array\");for(let arr of x)if(!C3.IsArray(arr))throw new TypeError(\"expected 2d array\");};C3.RequireOptional2DArray=function Require2DArray(x){if(C3.IsNullOrUndefined(x))return};\nC3.IsFunction=function IsFunction(x){return typeof x===\"function\"};C3.RequireFunction=function RequireFunction(x,f){if(!C3.IsFunction(x))throw new TypeError(\"expected function\");if(!C3.IsNullOrUndefined(f))if(x!==f)throw new TypeError(\"expected same function reference\");};C3.RequireOptionalFunction=function RequireOptionalFunction(x){if(C3.IsNullOrUndefined(x))return};C3.RequireAllFunction=function RequireAllFunction(...args){for(let a of args);};\nC3.RequireAnyFunction=function RequireAllFunction(x,...args){if(!C3.IsFunction(x))throw new TypeError(\"expected function\");if(!args.length)throw new Error(\"missing comparison functions\");for(let a of args)if(!C3.IsNullOrUndefined(a))if(x===a)return;throw new TypeError(\"expected same function reference\");};C3.RequireOptionalAllFunction=function RequireAllFunction(...args){if(C3.IsNullOrUndefined(args))return;for(let a of args);};C3.IsInstanceOf=function IsInstanceOf(x,t){return x instanceof t};\nC3.IsInstanceOfAny=function IsInstanceOfAny(x,...args){for(let t of args)if(C3.IsInstanceOf(x,t))return true;return false};C3.RequireInstanceOf=function RequireInstanceOf(x,t){if(!C3.IsInstanceOf(x,t))throw new TypeError(\"unexpected type\");};C3.RequireOptionalInstanceOf=function RequireOptionalInstanceOf(x,t){if(C3.IsNullOrUndefined(x))return};C3.RequireAllInstanceOf=function RequireAllInstanceOf(t,...args){for(let a of args);};\nC3.RequireAnyInstanceOf=function RequireAnyInstanceOf(x,...args){if(!C3.IsInstanceOfAny(x,...args))throw new TypeError(\"unexpected type\");};C3.RequireAnyOptionalInstanceOf=function RequireAnyOptionalInstanceOf(x,...args){if(C3.IsNullOrUndefined(x))return;if(!C3.IsInstanceOfAny(x,...args))throw new TypeError(\"unexpected type\");};C3.IsArrayOf=function IsArrayOf(x,t){for(let i of x)if(!C3.IsInstanceOf(i,t))return false;return true};\nC3.IsArrayOfFiniteNumbers=function IsArrayOfFiniteNumbers(x){for(let i of x)if(!C3.IsFiniteNumber(i))return false;return true};C3.RequireArrayOf=function RequireArrayOf(x,t){for(let i of x);};C3.RequireOptionalArrayOf=function RequireOptionalArrayOf(x,t){if(C3.IsNullOrUndefined(x))return;for(let i of x);};C3.RequireArrayOfAny=function RequireArrayOf(x,...args){for(let i of x);};\nC3.RequireOptionalArrayOfAny=function RequireOptionalArrayOfAny(x,...args){if(C3.IsNullOrUndefined(x))return;for(let i of x);};C3.IsDOMNode=function IsDOMNode(d,n){if(C3.IsNullOrUndefined(d)||!C3.IsString(d.nodeName))return false;return!n||C3.equalsNoCase(d.nodeName,n)};C3.RequireDOMNode=function RequireDOMNode(d,n){if(C3.IsNullOrUndefined(d)||!C3.IsString(d.nodeName))throw new TypeError(\"expected DOM node\");if(n&&!C3.equalsNoCase(d.nodeName,n))throw new TypeError(`expected DOM '${n}' node`);};\nC3.RequireOptionalDOMNode=function RequireOptionalDOMNode(d,n){if(C3.IsNullOrUndefined(d))return};C3.IsHTMLElement=function IsHTMLElement(e,t){if(C3.IsNullOrUndefined(e)||!C3.IsString(e.tagName))return false;return!t||C3.equalsNoCase(e.tagName,t)};C3.RequireHTMLElement=function RequireHTMLElement(e,t){if(C3.IsNullOrUndefined(e)||!C3.IsString(e.tagName))throw new TypeError(\"expected HTML element\");if(t&&!C3.equalsNoCase(e.tagName,t))throw new TypeError(`expected HTML '${t}' element`);};\nC3.RequireOptionalHTMLElement=function RequireOptionalHTMLElement(e,t){if(C3.IsNullOrUndefined(e))return};C3.IsDrawable=function IsDrawable(d){return C3.IsHTMLElement(d,\"img\")||C3.IsHTMLElement(d,\"canvas\")||C3.IsHTMLElement(d,\"video\")||typeof OffscreenCanvas!==\"undefined\"&&d instanceof OffscreenCanvas||typeof ImageBitmap!==\"undefined\"&&d instanceof ImageBitmap};C3.RequireDrawable=function RequireDrawable(d){if(!C3.IsDrawable(d))throw new TypeError(\"expected drawable\");};\nC3.RequireOptionalDrawable=function RequireOptionalDrawable(d){if(C3.IsNullOrUndefined(d))return};C3.IsDrawableOrImageData=function IsDrawableOrImageData(x){if(x instanceof ImageData)return true;return C3.IsDrawable(x)};C3.RequireDrawableOrImageData=function RequireDrawableOrImageData(d){if(!C3.IsDrawableOrImageData(d))throw new TypeError(\"expected drawable or image data\");};\nC3.RequireOptionalDrawableOrImageData=function RequireOptionalDrawableOrImageData(d){if(C3.IsNullOrUndefined(d))return;if(!C3.IsDrawableOrImageData(d))throw new TypeError(\"expected drawable or image data\");};C3.IsStringLike=function IsStringLike(x){return typeof x===\"string\"||C3.HtmlString&&x instanceof C3.HtmlString||x instanceof C3.BBString};C3.RequireStringLike=function RequireStringLike(x){if(!C3.IsStringLike(x))throw new TypeError(\"expected string-like\");};C3.RequireOptionalStringLike=function RequireOptionalStringLike(x){if(C3.IsNullOrUndefined(x))return};\nC3.RequireAllStringLike=function RequireAllStringLike(...args){for(let a of args);};C3.RequireOverride=function RequireOverride(){throw new Error(\"must be overridden\");};C3.NotYetImplemented=function NotYetImplemented(){throw new Error(\"not yet implemented\");};C3.IsDefined=function isDefined(obj,...follow){let currentObject=obj;if(typeof currentObject===\"undefined\")return false;for(let key of follow){if(typeof currentObject[key]===\"undefined\")return false;currentObject=currentObject[key]}return true};\nC3.IsNullOrUndefined=function(x){return typeof x===\"undefined\"||x===null};C3.AreArrayElementsOfSameType=function(arr){let type=arr[0].constructor;for(let x of arr)if(x.constructor!==type)return false;return type};C3.AreArrayElementsOfType=function(arr,t){for(let x of arr)if(!(x instanceof t))return false;return true};const TypedArray=Object.getPrototypeOf(Uint8Array);C3.IsTypedArray=function(view){return C3.IsInstanceOf(view,TypedArray)};C3.RequireTypedArray=function(view){};\nC3.WeakRequireTypedArray=function WeakRequireTypedArray(inst){C3.WeakRequireInstanceOf(inst,TypedArray)};C3.WeakRequireAnyInstanceOf=function WeakRequireAnyInstanceOf(inst,...ctors){if(!C3.WeakIsAnyInstanceOf(inst,...ctors))throw new TypeError(\"unexpected type\");};C3.WeakIsAnyInstanceOf=function WeakIsAnyInstanceOf(inst,...ctors){for(const ctor of ctors)if(C3.WeakIsInstanceOf(inst,ctor))return true;return false};\nC3.WeakRequireInstanceOf=function WeakRequireInstanceOf(inst,ctor){if(!C3.WeakIsInstanceOf(inst,ctor))throw new TypeError(\"unexpected type\");};C3.WeakIsInstanceOf=function WeakIsInstanceOf(inst,ctor){while(inst=Object.getPrototypeOf(inst))if(inst.constructor.name===ctor.name)return true;return false};C3X.RequireNumber=C3.RequireNumber;C3X.RequireOptionalNumber=C3.RequireOptionalNumber;C3X.RequireFiniteNumber=C3.RequireFiniteNumber;C3X.RequireOptionalFiniteNumber=C3.RequireOptionalFiniteNumber;\nC3X.RequireString=C3.RequireString;C3X.RequireOptionalString=C3.RequireOptionalString;C3X.RequireObject=C3.RequireObject;C3X.RequireOptionalObject=C3.RequireOptionalObject;C3X.RequireArray=C3.RequireArray;C3X.RequireOptionalArray=C3.RequireOptionalArray;C3X.RequireFunction=C3.RequireFunction;C3X.RequireOptionalFunction=C3.RequireOptionalFunction;C3X.RequireInstanceOf=C3.RequireInstanceOf;C3X.RequireOptionalInstanceOf=C3.RequireOptionalInstanceOf;C3X.IsNullOrUndefined=C3.IsNullOrUndefined;\n\n}\n\n// ../lib/misc/jsutil.js\n{\n'use strict';const C3=self.C3;const logRafIds=new Map;C3.ColorLog=function(message,color){console.log(`%c${message}`,`font-weight: bold; color:${color}`)};C3.RafLog=function RaFLog(name,...args){if(!logRafIds.has(name))logRafIds.set(name,-1);if(logRafIds.get(name)===-1)logRafIds.set(name,requestAnimationFrame(()=>{console.log(`%c${name}`,\"font-weight: bold\",...args);logRafIds.set(name,-1)}))};let measures;\nC3.StartMeasure=function StartMeasure(name){performance.mark(name);if(!measures)measures=new Map;if(!measures.has(name))measures.set(name,{current:0,total:0,average:0,calls:1,toString:function(){return`${name} :: current => ${this.current.toPrecision(3)} :: average => ${this.average.toPrecision(3)} :: calls => ${this.calls}`}})};\nC3.EndMeasure=function EndMeasure(name){performance.measure(`measure-${name}`,name);const entry=performance.getEntriesByName(`measure-${name}`)[0];const m=measures.get(name);m.current=entry.duration;m.total+=m.current;m.average=m.total/m.calls;console.log(m.toString());m.calls++;performance.clearMarks(name);performance.clearMeasures(`measure-${name}`)};C3.GetCallStack=function GetCallStack(){return(new Error).stack};C3.Debugger=function Debugger(){debugger};\nC3.cast=function cast(o,T){if(o&&o instanceof T)return o;else return null};\nC3.getName=function getName(o){if(typeof o===\"undefined\")return\"undefined\";if(o===null)return\"null\";if(typeof o===\"boolean\")return\"<boolean>\";if(C3.IsNumber(o))return\"<number>\";if(C3.IsString(o))return\"<string>\";if(C3.IsArray(o))return\"<array>\";if(typeof o===\"symbol\")return\"<\"+o.toString()+\">\";if(C3.IsFunction(o)){if(o.name&&o.name!==\"Function\")return o.name;return\"<anonymous function>\"}if(typeof o===\"object\"){if(o.constructor&&o.constructor.name&&o.constructor.name!==\"Object\")return o.constructor.name;\nreturn\"<anonymous object>\"}return\"<unknown>\"};C3.getType=function getType(o){if(o===null)return\"null\";if(Array.isArray(o))return\"array\";return typeof o};C3.range=function*range(a,b){if(!isFinite(Math.abs(a-b)))throw new Error(\"Invalid parameters\");if(a>b)for(let i=a-1;i>=b;i--)yield i;else for(let i=a;i<b;i++)yield i};\nfunction isValidTypeChange(from,to){let fromType=C3.getType(from);let toType=C3.getType(to);if(fromType===\"null\"||toType===\"null\")return true;if(fromType===\"undefined\"||toType===\"undefined\")return false;return fromType===toType}let ctorObjectToProxy=new Map;let ctorProxyToObject=new Map;let proxyToObject=new WeakMap;let releasedObjects=new WeakMap;C3.DefendHandler={};const VALID_GET_MISSING_KEYS=new Set([\"then\",\"splice\"]);\nfunction logDefendedObjectWarning(msg){console.warn(\"[Defence] \"+msg+\" @\",C3.GetCallStack())}\nC3.DefendHandler.get=function defended_get(target,key){if(!(key in target)&&typeof key!==\"symbol\"&&!VALID_GET_MISSING_KEYS.has(key))logDefendedObjectWarning(`Accessed missing property '${key}' from defended object '${C3.getName(target)}', returning undefined`);if(releasedObjects.has(target)&&typeof key!==\"symbol\"&&!VALID_GET_MISSING_KEYS.has(key))logDefendedObjectWarning(`Accessed property '${key}' on a released object '${C3.getName(target)}'\\nObject was originally released at: ${releasedObjects.get(target)})\\nCall stack at access: `);return target[key]};\nC3.DefendHandler.set=function defended_set(target,key,value){if(!(key in target)&&!ctorObjectToProxy.has(target))logDefendedObjectWarning(`Set non-existent property '${key}' to '${value}' on defended object '${C3.getName(target)}'`);if(!isValidTypeChange(target[key],value)&&!ctorObjectToProxy.has(target))logDefendedObjectWarning(`Set '${C3.getType(target[key])}' property '${key}' to type '${C3.getType(value)}' on defended object '${C3.getName(target)}'`);if(releasedObjects.has(target))logDefendedObjectWarning(`Set property '${key}' on a released object '${C3.getName(target)}'\\nObject was originally released at: ${releasedObjects.get(target)})\\nCall stack at access: `);\ntarget[key]=value;return true};C3.DefendHandler.deleteProperty=function defended_deleteProperty(target,key){throw new ReferenceError(`Cannot delete property '${key}' from defended object '${C3.getName(target)}'`);};C3.DefendHandler.defineProperty=function defended_defineProperty(target,key,desc){throw new ReferenceError(`Cannot define property '${key}' on defended object '${C3.getName(target)}'`);};\nC3.DefendHandler.enumerate=function defended_enumerate(target){throw new ReferenceError(`Cannot enumerate defended object '${C3.getName(target)}'`);};let checkRafId=-1;\nfunction CheckDefendedObjectsUsedCorrectly(){checkRafId=-1;if(ctorObjectToProxy.size>0||ctorProxyToObject.size>0){let uniqueNames=new Set([...ctorObjectToProxy.keys()].map(o=>C3.getName(o)));let leftoverNames=[...uniqueNames].join(\",\");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${leftoverNames}`);ctorObjectToProxy.clear();ctorProxyToObject.clear()}}\nC3.DefendedBase=class DefendedBase{constructor(){if(!C3.isDebugDefend||!C3.Supports.Proxies)return;let newTarget=new.target;let realObject=Object.create(newTarget.prototype);let proxy=new Proxy(realObject,C3.DefendHandler);ctorObjectToProxy.set(realObject,proxy);ctorProxyToObject.set(proxy,realObject);proxyToObject.set(proxy,realObject);if(checkRafId===-1)checkRafId=requestAnimationFrame(CheckDefendedObjectsUsedCorrectly);return proxy}};\nC3.debugDefend=function debugDefend(o){if(C3.isDebugDefend&&C3.Supports.Proxies&&o instanceof C3.DefendedBase){if(!ctorProxyToObject.has(o))return o;let realObject=ctorProxyToObject.get(o);ctorProxyToObject.delete(o);ctorObjectToProxy.delete(realObject);return o}else if(C3.isDebug)return Object.seal(o);else return o};\nC3.New=function New(Type,...args){let o;try{o=new Type(...args)}catch(e){ctorProxyToObject.clear();ctorObjectToProxy.clear();throw e;}if(C3.isDebugDefend)VerifyObjectPropertiesConsistent(Type,o);return C3.debugDefend(o)};C3.Release=function Release(o){let realObject=proxyToObject.get(o);if(realObject)releasedObjects.set(realObject,C3.GetCallStack())};C3.WasReleased=function(o){let realObject=proxyToObject.get(o);if(!realObject)return false;return!!releasedObjects.get(realObject)};\nlet typeProperties=new Map;function getObjectPropertySet(o){let ret=new Set;for(let k in o)ret.add(k);return ret}\nfunction VerifyObjectPropertiesConsistent(Type,o){let properties=getObjectPropertySet(o);let existingProperties=typeProperties.get(Type);if(existingProperties){let inconsistentProperties=[];for(let k of existingProperties.values())if(properties.has(k))properties.delete(k);else inconsistentProperties.push(k);C3.appendArray(inconsistentProperties,[...properties]);if(inconsistentProperties.length)console.warn(`[Defence] '${C3.getName(Type)}' constructor creates inconsistent properties: ${inconsistentProperties.join(\", \")}`)}else typeProperties.set(Type,properties)}\nC3.PerfMark=class PerfMark{constructor(name){this._name=\"\";if(name)this.start(name)}start(name){if(!C3.isPerformanceProfiling)return;this._name=name;performance.mark(this._name+\"-Start\")}end(){if(!C3.isPerformanceProfiling)return;performance.mark(this._name+\"-End\");performance.measure(this._name,this._name+\"-Start\",this._name+\"-End\")}next(name){if(!C3.isPerformanceProfiling)return;this.end();this._name=name;performance.mark(this._name+\"-Start\")}};\n\n}\n\n// ../lib/misc/mathutil.js\n{\n'use strict';const C3=self.C3;const TWO_PI=Math.PI*2;const D_TO_R=Math.PI/180;const R_TO_D=180/Math.PI;C3.wrap=function wrap(x,min,max){x=Math.floor(x);min=Math.floor(min);max=Math.floor(max);const diff=max-min;if(diff===0)return max;if(x<min){const r=max-(min-x)%diff;return r===max?0:r}else return min+(x-min)%diff};C3.mapToRange=function mapToRange(x,inMin,inMax,outMin,outMax){return(x-inMin)*(outMax-outMin)/(inMax-inMin)+outMin};\nC3.normalize=function normalize(value,minimum,maximum){if(minimum-maximum===0)return 1;return(value-minimum)/(maximum-minimum)};C3.clamp=function clamp(x,a,b){if(x<a)return a;else if(x>b)return b;else return x};C3.clampAngle=function clampAngle(a){a%=TWO_PI;if(a<0)a+=TWO_PI;return a};C3.toRadians=function toRadians(x){return x*D_TO_R};C3.toDegrees=function toDegrees(x){return x*R_TO_D};C3.distanceTo=function distanceTo(x1,y1,x2,y2){return Math.hypot(x2-x1,y2-y1)};\nC3.distanceSquared=function distanceSquared(x1,y1,x2,y2){const dx=x2-x1;const dy=y2-y1;return dx*dx+dy*dy};C3.angleTo=function angleTo(x1,y1,x2,y2){return Math.atan2(y2-y1,x2-x1)};C3.angleDiff=function angleDiff(a1,a2){if(a1===a2)return 0;let s1=Math.sin(a1);let c1=Math.cos(a1);let s2=Math.sin(a2);let c2=Math.cos(a2);let n=s1*s2+c1*c2;if(n>=1)return 0;if(n<=-1)return Math.PI;return Math.acos(n)};\nC3.angleRotate=function angleRotate(start,end,step){let ss=Math.sin(start);let cs=Math.cos(start);let se=Math.sin(end);let ce=Math.cos(end);if(Math.acos(ss*se+cs*ce)>step)if(cs*se-ss*ce>0)return C3.clampAngle(start+step);else return C3.clampAngle(start-step);else return C3.clampAngle(end)};C3.angleClockwise=function angleClockwise(a1,a2){let s1=Math.sin(a1);let c1=Math.cos(a1);let s2=Math.sin(a2);let c2=Math.cos(a2);return c1*s2-s1*c2<=0};\nC3.angleLerp=function angleLerp(a,b,x,r=0){let diff=C3.angleDiff(a,b);const revs=TWO_PI*r;if(C3.angleClockwise(b,a))return C3.clampAngle(a+(diff+revs)*x);else return C3.clampAngle(a-(diff+revs)*x)};C3.angleLerpClockwise=function angleLerpClockwise(a,b,x,r=0){const diff=C3.angleDiff(a,b);const revs=TWO_PI*r;if(C3.angleClockwise(b,a))return C3.clampAngle(a+(diff+revs)*x);return C3.clampAngle(a+(TWO_PI-diff+revs)*x)};\nC3.angleLerpAntiClockwise=function angleLerpAntiClockwise(a,b,x,r=0){const diff=C3.angleDiff(a,b);const revs=TWO_PI*r;if(C3.angleClockwise(b,a))return C3.clampAngle(a-(-TWO_PI+diff-revs)*x);return C3.clampAngle(a-(diff+revs)*x)};C3.angleReflect=function angleReflect(a,b){const diff=C3.angleDiff(a,b);if(C3.angleClockwise(a,b))return C3.clampAngle(b-diff);else return C3.clampAngle(b+diff)};C3.lerp=function lerp(a,b,x){return a+x*(b-a)};\nC3.unlerp=function unlerp(a,b,x){if(a===b)return 0;return(x-a)/(b-a)};C3.relerp=function relerp(a,b,x,c,d){return C3.lerp(c,d,C3.unlerp(a,b,x))};C3.qarp=function qarp(a,b,c,x){return C3.lerp(C3.lerp(a,b,x),C3.lerp(b,c,x),x)};C3.cubic=function cubic(a,b,c,d,x){return C3.lerp(C3.qarp(a,b,c,x),C3.qarp(b,c,d,x),x)};C3.cosp=function cosp(a,b,x){return(a+b+(a-b)*Math.cos(x*Math.PI))/2};C3.isPOT=function isPOT(x){return x>0&&(x-1&x)===0};\nC3.nextHighestPowerOfTwo=function nextHighestPowerOfTwo(x){--x;for(let i=1;i<32;i<<=1)x=x|x>>i;return x+1};C3.roundToNearestFraction=function roundToNearestFraction(x,n){return Math.round(x*n)/n};C3.floorToNearestFraction=function floorToNearestFraction(x,n){return Math.floor(x*n)/n};C3.roundToDp=function roundToDp(x,dp){dp=Math.max(Math.floor(dp),0);const m=Math.pow(10,dp);return Math.round(x*m)/m};\nC3.countDecimals=function countDecimals(value){if(Math.floor(value)!==value)return value.toString().split(\".\")[1].length||0;return 0};C3.toFixed=function toFixed(n,dp){let ret=n.toFixed(dp);let last=ret.length-1;for(;last>=0&&ret.charAt(last)===\"0\";--last);if(last>=0&&ret.charAt(last)===\".\")--last;if(last<0)return ret;return ret.substr(0,last+1)};C3.PackRGB=function PackRGB(red,green,blue){return C3.clamp(red,0,255)|C3.clamp(green,0,255)<<8|C3.clamp(blue,0,255)<<16};const ALPHAEX_SHIFT=1024;\nconst ALPHAEX_MAX=1023;const RGBEX_SHIFT=16384;const RGBEX_MAX=8191;const RGBEX_MIN=-8192;\nC3.PackRGBAEx=function PackRGBAEx(red,green,blue,alpha){red=C3.clamp(Math.floor(red*1024),RGBEX_MIN,RGBEX_MAX);green=C3.clamp(Math.floor(green*1024),RGBEX_MIN,RGBEX_MAX);blue=C3.clamp(Math.floor(blue*1024),RGBEX_MIN,RGBEX_MAX);alpha=C3.clamp(Math.floor(alpha*ALPHAEX_MAX),0,ALPHAEX_MAX);if(red<0)red+=RGBEX_SHIFT;if(green<0)green+=RGBEX_SHIFT;if(blue<0)blue+=RGBEX_SHIFT;return-(red*RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT+green*RGBEX_SHIFT*ALPHAEX_SHIFT+blue*ALPHAEX_SHIFT+alpha)};\nC3.PackRGBEx=function PackRGBEx(red,green,blue){return C3.PackRGBAEx(red,green,blue,1)};function isNegativeZero(x){return x===0&&1/x<0}C3.GetRValue=function GetRValue(rgb){if(rgb>=0)return(rgb&255)/255;else{let v=Math.floor(-rgb/(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT));if(v>RGBEX_MAX)v-=RGBEX_SHIFT;return v/1024}};\nC3.GetGValue=function GetGValue(rgb){if(rgb>=0)return((rgb&65280)>>8)/255;else{let v=Math.floor(-rgb%(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT)/(RGBEX_SHIFT*ALPHAEX_SHIFT));if(v>RGBEX_MAX)v-=RGBEX_SHIFT;return v/1024}};C3.GetBValue=function GetBValue(rgb){if(rgb>=0)return((rgb&16711680)>>16)/255;else{let v=Math.floor(-rgb%(RGBEX_SHIFT*ALPHAEX_SHIFT)/ALPHAEX_SHIFT);if(v>RGBEX_MAX)v-=RGBEX_SHIFT;return v/1024}};\nC3.GetAValue=function GetAValue(rgb){if(isNegativeZero(rgb))return 0;else if(rgb>=0)return 1;else{const v=Math.floor(-rgb%ALPHAEX_SHIFT);return v/ALPHAEX_MAX}};C3.greatestCommonDivisor=function greatestCommonDivisor(a,b){a=Math.floor(a);b=Math.floor(b);while(b!==0){let t=b;b=a%b;a=t}return a};const COMMON_ASPECT_RATIOS=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];\nC3.getAspectRatio=function getAspectRatio(w,h){w=Math.floor(w);h=Math.floor(h);if(w===h)return[1,1];for(let aspect of COMMON_ASPECT_RATIOS){let approxH=w/aspect[0]*aspect[1];if(Math.abs(h-approxH)<1)return aspect.slice(0);approxH=w/aspect[1]*aspect[0];if(Math.abs(h-approxH)<1)return[aspect[1],aspect[0]]}let gcd=C3.greatestCommonDivisor(w,h);return[w/gcd,h/gcd]};\nC3.segmentsIntersect=function segmentsIntersect(a1x,a1y,a2x,a2y,b1x,b1y,b2x,b2y){const min_ax=Math.min(a1x,a2x);const max_ax=Math.max(a1x,a2x);const min_bx=Math.min(b1x,b2x);const max_bx=Math.max(b1x,b2x);if(max_ax<min_bx||min_ax>max_bx)return false;const min_ay=Math.min(a1y,a2y);const max_ay=Math.max(a1y,a2y);const min_by=Math.min(b1y,b2y);const max_by=Math.max(b1y,b2y);if(max_ay<min_by||min_ay>max_by)return false;const dpx=b1x-a1x+b2x-a2x;const dpy=b1y-a1y+b2y-a2y;const qax=a2x-a1x;const qay=a2y-\na1y;const qbx=b2x-b1x;const qby=b2y-b1y;const d=Math.abs(qay*qbx-qby*qax);const la=qbx*dpy-qby*dpx;if(Math.abs(la)>d)return false;const lb=qax*dpy-qay*dpx;return Math.abs(lb)<=d};\nC3.segmentsIntersectPreCalc=function segmentsIntersectPreCalc(a1x,a1y,a2x,a2y,min_ax,max_ax,min_ay,max_ay,b1x,b1y,b2x,b2y){const min_bx=Math.min(b1x,b2x);const max_bx=Math.max(b1x,b2x);if(max_ax<min_bx||min_ax>max_bx)return false;const min_by=Math.min(b1y,b2y);const max_by=Math.max(b1y,b2y);if(max_ay<min_by||min_ay>max_by)return false;const dpx=b1x-a1x+b2x-a2x;const dpy=b1y-a1y+b2y-a2y;const qax=a2x-a1x;const qay=a2y-a1y;const qbx=b2x-b1x;const qby=b2y-b1y;const d=Math.abs(qay*qbx-qby*qax);const la=\nqbx*dpy-qby*dpx;if(Math.abs(la)>d)return false;const lb=qax*dpy-qay*dpx;return Math.abs(lb)<=d};\nC3.segmentIntersectsQuad=function segmentIntersectsQuad(x1,y1,x2,y2,q){const min_x=Math.min(x1,x2);const max_x=Math.max(x1,x2);const min_y=Math.min(y1,y2);const max_y=Math.max(y1,y2);const tlx=q.getTlx(),tly=q.getTly(),trx=q.getTrx(),try_=q.getTry(),brx=q.getBrx(),bry=q.getBry(),blx=q.getBlx(),bly=q.getBly();return C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,tlx,tly,trx,try_)||C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,trx,try_,brx,bry)||C3.segmentsIntersectPreCalc(x1,\ny1,x2,y2,min_x,max_x,min_y,max_y,brx,bry,blx,bly)||C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,blx,bly,tlx,tly)};\nC3.segmentIntersectsAnyN=function segmentIntersectsAnyN(x1,y1,x2,y2,points){const min_x=Math.min(x1,x2);const max_x=Math.max(x1,x2);const min_y=Math.min(y1,y2);const max_y=Math.max(y1,y2);let i=0;for(let last=points.length-4;i<=last;i+=2)if(C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,points[i],points[i+1],points[i+2],points[i+3]))return true;return C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,points[i],points[i+1],points[0],points[1])};const NO_HIT=2;\nconst PADDING=1E-6;C3.rayIntersect=function rayIntersect(rx1,ry1,rx2,ry2,sx1,sy1,sx2,sy2){const rdx=rx2-rx1;const rdy=ry2-ry1;const sdx=sx2-sx1;const sdy=sy2-sy1;const det=rdx*sdy-rdy*sdx;if(det===0)return NO_HIT;const gamma=((ry1-ry2)*(sx2-rx1)+rdx*(sy2-ry1))/det;if(0<gamma&&gamma<1+PADDING)return(sdy*(sx2-rx1)+(sx1-sx2)*(sy2-ry1))/det;return NO_HIT};\nC3.rayIntersectExtended=function rayIntersect(rx1,ry1,rx2,ry2,sx1,sy1,sx2,sy2,f){const dx=(sx2-sx1)*f;const dy=(sy2-sy1)*f;return C3.rayIntersect(rx1,ry1,rx2,ry2,sx1-dx,sy1-dy,sx2+dx,sy2+dy)};\nC3.isPointInTriangleInclusive=function isPointInTriangleInclusive(px,py,tx1,ty1,tx2,ty2,tx3,ty3){const v0x=tx2-tx1;const v0y=ty2-ty1;const v1x=tx3-tx1;const v1y=ty3-ty1;const v2x=px-tx1;const v2y=py-ty1;const dot00=v0x*v0x+v0y*v0y;const dot01=v0x*v1x+v0y*v1y;const dot02=v0x*v2x+v0y*v2y;const dot11=v1x*v1x+v1y*v1y;const dot12=v1x*v2x+v1y*v2y;const invDenom=1/(dot00*dot11-dot01*dot01);const u=(dot11*dot02-dot01*dot12)*invDenom;const v=(dot00*dot12-dot01*dot02)*invDenom;return u>=0&&v>=0&&u+v<=1};\nC3.triangleCartesianToBarycentric=function triangleCartesianToBarycentric(px,py,tx1,ty1,tx2,ty2,tx3,ty3){const v0x=tx2-tx1;const v0y=ty2-ty1;const v1x=tx3-tx1;const v1y=ty3-ty1;const v2x=px-tx1;const v2y=py-ty1;const dot00=v0x*v0x+v0y*v0y;const dot01=v0x*v1x+v0y*v1y;const dot11=v1x*v1x+v1y*v1y;const dot20=v2x*v0x+v2y*v0y;const dot21=v2x*v1x+v2y*v1y;const denom=dot00*dot11-dot01*dot01;const v=(dot11*dot20-dot01*dot21)/denom;const w=(dot00*dot21-dot01*dot20)/denom;const u=1-v-w;return[u,v,w]};\nC3.triangleBarycentricToCartesian3d=function triangleBarycentricToCartesian3d(u,v,w,tx1,ty1,tz1,tx2,ty2,tz2,tx3,ty3,tz3){return[u*tx1+v*tx2+w*tx3,u*ty1+v*ty2+w*ty3,u*tz1+v*tz2+w*tz3]};\n\n}\n\n// ../lib/misc/miscutil.js\n{\n'use strict';const C3=self.C3;let mainDocument=null;let baseHref=\"\";if(typeof document!==\"undefined\"){mainDocument=document;const baseElem=document.querySelector(\"base\");baseHref=baseElem&&baseElem.hasAttribute(\"href\")?baseElem.getAttribute(\"href\"):\"\";if(baseHref){if(baseHref.startsWith(\"/\"))baseHref=baseHref.substr(1);if(!baseHref.endsWith(\"/\"))baseHref+=\"/\"}}C3.GetBaseHref=function GetBaseHref(){return baseHref};\nC3.GetBaseURL=function GetBaseURL(){if(!mainDocument)return\"\";const loc=mainDocument.location;return C3.GetPathFromURL(loc.origin+loc.pathname)+baseHref};C3.GetPathFromURL=function GetPathFromURL(url){if(!url.length)return url;if(url.endsWith(\"/\")||url.endsWith(\"\\\\\"))return url;const lastSlash=Math.max(url.lastIndexOf(\"/\"),url.lastIndexOf(\"\\\\\"));if(lastSlash===-1)return\"\";return url.substr(0,lastSlash+1)};\nC3.GetFilenameFromURL=function GetFilenameFromURL(url){if(!url.length)return url;if(url.endsWith(\"/\")||url.endsWith(\"\\\\\"))return\"\";const lastSlash=Math.max(url.lastIndexOf(\"/\"),url.lastIndexOf(\"\\\\\"));if(lastSlash===-1)return url;return url.substr(lastSlash+1)};C3.GetFileExtension=function GetFileExtension(filename){let i=filename.lastIndexOf(\".\");if(i<1)return\"\";else return filename.substr(i)};\nC3.SetFileExtension=function SetFileExtension(filename,newExt){const i=filename.lastIndexOf(\".\");if(i===-1)return filename+\".\"+newExt;else return filename.substr(0,i+1)+newExt};C3.GetFileNamePart=function GetFileNamePart(filename){let i=filename.lastIndexOf(\".\");if(i<1)return filename;else return filename.substr(0,i)};C3.NormalizeFileSeparator=function NormalizeFileSeparator(path){return path.replace(/\\\\/g,\"/\")};\nC3.IsFileExtension=function IsFileExtension(filename,extension){const ext=filename?C3.GetFileExtension(filename).slice(1):\"\";return extension===ext};\nC3.FileNameEquals=function FileNameEquals(file_or_filename,other_file_or_filename){let firstName;let secondName;if(C3.IsFileLike(file_or_filename))firstName=C3.GetFileNamePart(file_or_filename[\"name\"]);if(C3.IsString(file_or_filename))firstName=C3.GetFileNamePart(file_or_filename);if(C3.IsFileLike(other_file_or_filename))secondName=C3.GetFileNamePart(other_file_or_filename[\"name\"]);if(C3.IsString(other_file_or_filename))secondName=C3.GetFileNamePart(other_file_or_filename);return firstName===secondName};\nC3.ParseFilePath=function ParseFilePath(path){path=C3.NormalizeFileSeparator(path);let root=/^\\w:\\//.exec(path);if(root){root=root[0];path=path.slice(3);if(path[0]!==\"/\")path=\"/\"+path}else root=\"\";path=path.replace(/\\/{2,}/g,\"/\");if(path.length>1&&path.slice(-1)===\"/\")path=path.slice(0,-1);const start=path.lastIndexOf(\"/\")+1;let dir=\"\",base=path,name,ext=\"\";if(start>0){dir=path.slice(0,start);base=path.slice(start)}name=base;const end=base.lastIndexOf(\".\");if(end>0){ext=base.slice(end);name=base.slice(0,\n-ext.length)}const full=root+dir+base;return{dir,base,name,root,ext,full}};C3.Wait=function Wait(delay,argument){return new Promise((resolve,reject)=>{self.setTimeout(resolve,delay,argument)})};C3.swallowException=function swallowException(f){try{f()}catch(e){if(C3.isDebug)console.warn(\"Swallowed exception: \",e)}};C3.noop=function noop(){};C3.equalsNoCase=function equalsNoCase(a,b){if(typeof a!==\"string\"||typeof b!==\"string\")return false;return a===b||a.normalize().toLowerCase()===b.normalize().toLowerCase()};\nC3.equalsCase=function equalsCase(a,b){if(typeof a!==\"string\"||typeof b!==\"string\")return false;if(a===b)return true;return a.normalize()===b.normalize()};C3.typedArraySet16=function typedArraySet16(dest,src,i){dest[i++]=src[0];dest[i++]=src[1];dest[i++]=src[2];dest[i++]=src[3];dest[i++]=src[4];dest[i++]=src[5];dest[i++]=src[6];dest[i++]=src[7];dest[i++]=src[8];dest[i++]=src[9];dest[i++]=src[10];dest[i++]=src[11];dest[i++]=src[12];dest[i++]=src[13];dest[i++]=src[14];dest[i]=src[15]};\nC3.truncateArray=function truncateArray(arr,index){arr.length=index};C3.clearArray=function clearArray(arr){if(!arr)return;if(arr.length===0)return;C3.truncateArray(arr,0)};C3.clear2DArray=function clear2DArray(arr){if(!arr)return;for(let i=0;i<arr.length;i++){let a=arr[i];C3.truncateArray(a,0)}C3.truncateArray(arr,0)};C3.extendArray=function extendArray(arr,len,filler){len=len|0;const arrayLength=arr.length;if(len<=arrayLength)return;for(let i=arrayLength;i<len;++i)arr.push(filler)};\nC3.resizeArray=function resizeArray(arr,len,filler){len=len|0;const arrayLength=arr.length;if(len<arrayLength)C3.truncateArray(arr,len);else if(len>arrayLength)C3.extendArray(arr,len,filler)};C3.shallowAssignArray=function shallowAssignArray(dest,src){C3.clearArray(dest);C3.appendArray(dest,src)};C3.appendArray=function appendArray(a,b){if(b.length<1E4)a.push(...b);else for(let i=0,len=b.length;i<len;++i)a.push(b[i])};\nC3.arrayRemove=function(arr,index){index=Math.floor(index);if(index<0||index>=arr.length)return;let len=arr.length-1;for(let i=index;i<len;++i)arr[i]=arr[i+1];C3.truncateArray(arr,len)};C3.arrayFindRemove=function arrayFindRemove(a,o){let i=a.indexOf(o);if(i>=0)a.splice(i,1)};C3.arraysEqual=function arraysEqual(a,b){let len=a.length;if(b.length!==len)return false;for(let i=0;i<len;++i)if(a[i]!==b[i])return false;return true};\nC3.arrayFilterOut=function arrayFilterOut(arr,callback){let ret=[];let j=0;for(let i=0,len=arr.length;i<len;++i){let item=arr[i];if(callback(item))ret.push(item);else{arr[j]=item;++j}}C3.truncateArray(arr,j);return ret};C3.arrayRemoveAllInSet=function arrayRemoveAllInSet(arr,s){const oldLen=arr.length;let j=0;for(let i=0,len=arr.length;i<len;++i){let item=arr[i];if(!s.has(item))arr[j++]=item}C3.truncateArray(arr,j);return oldLen-j};\nC3.isArrayIndexInBounds=function isArrayIndexInBounds(index,array){if(index!==Math.floor(index))return false;return index>=0&&index<array.length};C3.validateArrayIndex=function validateArrayIndex(index,array){if(!C3.isArrayIndexInBounds(index,array))throw new RangeError(\"array index out of bounds\");};C3.cloneArray=function cloneArray(array){return array.slice()};\nC3.deepCloneArray=function deepCloneArray(array,f){let ret=[];for(let e of array)if(C3.IsObject(e)){let clone=f(e);if(!clone)throw new Error(\"missing clone\");if(clone.constructor!==e.constructor)throw new Error(\"object is not a clone\");ret.push(clone)}else if(C3.IsArray(e))ret.push(C3.deepCloneArray(e,f));else ret.push(e);return ret};C3.clone2DArray=function cloneArray(array){let ret=[];for(let arr of array)ret.push(arr.slice());return ret};\nC3.mergeSets=function mergeSets(set1,set2){return new Set([...set1,...set2])};C3.mergeSetsInPlace=function mergeSetsInPlace(set1,set2){for(const item of set2)set1.add(item);return set1};C3.first=function first(iterable){for(let i of iterable)return i;return null};C3.xor=function(x,y){return!x!==!y};C3.compare=function compare(x,cmp,y){switch(cmp){case 0:return x===y;case 1:return x!==y;case 2:return x<y;case 3:return x<=y;case 4:return x>y;case 5:return x>=y;default:return false}};\nC3.hasAnyOwnProperty=function hasAnyOwnProperty(o){for(let p in o)if(o.hasOwnProperty(p))return true;return false};\nC3.PromiseAllWithProgress=function PromiseAllWithProgress(arr,progressCallback){if(!arr.length)return Promise.resolve([]);return new Promise((resolve,reject)=>{const results=[];let numberCompleted=0;let cancelled=false;for(let i=0,len=arr.length;i<len;++i){results.push(void 0);arr[i].then(result=>{if(cancelled)return;results[i]=result;++numberCompleted;if(numberCompleted===arr.length)resolve(results);else progressCallback(numberCompleted,arr.length)}).catch(err=>{cancelled=true;reject(err)})}})};\nlet memoryCallbacks=[];C3.AddLibraryMemoryCallback=function AddLibraryMemoryCallback(f){memoryCallbacks.push(f)};C3.GetEstimatedLibraryMemoryUsage=function GetEstimatedLibraryMemoryUsage(){let ret=0;for(let f of memoryCallbacks){let m=f();ret+=m}return Math.floor(ret)};let nextTaskId=1;const activeTaskIds=new Map;const taskMessageChannel=new MessageChannel;taskMessageChannel.port2.onmessage=function OnTask(e){const id=e.data;const callback=activeTaskIds.get(id);activeTaskIds.delete(id);if(callback)callback(performance.now())};\nC3.RequestUnlimitedAnimationFrame=function RequestUnlimitedAnimationFrame(callback){const id=nextTaskId++;activeTaskIds.set(id,callback);taskMessageChannel.port1.postMessage(id);return id};C3.CancelUnlimitedAnimationFrame=function CancelUnlimitedAnimationFrame(id){activeTaskIds.delete(id)};C3.PostTask=C3.RequestUnlimitedAnimationFrame;C3.WaitForNextTask=function WaitForNextTask(){return new Promise(resolve=>C3.PostTask(resolve))};const activeRPAFids=new Set;\nC3.RequestPostAnimationFrame=function RequestPostAnimationFrame(callback){const id=self.requestAnimationFrame(async timestamp=>{await C3.WaitForNextTask();if(!activeRPAFids.has(id))return;activeRPAFids.delete(id);callback(timestamp)});activeRPAFids.add(id);return id};C3.CancelPostAnimationFrame=function CancelPostAnimationFrame(id){if(!activeRPAFids.has(id))return;self.cancelAnimationFrame(id);activeRPAFids.delete(id)};\n\n}\n\n// lib/misc/runtimeutil.js\n{\n'use strict';const C3=self.C3;C3.IsAbsoluteURL=function IsAbsoluteURL(url){return/^(?:[a-z\\-]+:)?\\/\\//.test(url)||url.substr(0,5)===\"data:\"||url.substr(0,5)===\"blob:\"};C3.IsRelativeURL=function IsRelativeURL(url){return!C3.IsAbsoluteURL(url)};C3.ThrowIfNotOk=function ThrowIfNotOk(response){if(!response.ok)throw new Error(`fetch '${response.url}' response returned ${response.status} ${response.statusText}`);};\nC3.FetchOk=function FetchOk(url,init){return fetch(url,init).then(response=>{C3.ThrowIfNotOk(response);return response})};C3.FetchText=function FetchText(url){return C3.FetchOk(url).then(response=>response.text())};C3.FetchJson=function FetchJson(url){return C3.FetchOk(url).then(response=>response.json())};C3.FetchBlob=function FetchBlob(url){return C3.FetchOk(url).then(response=>response.blob())};C3.FetchArrayBuffer=function FetchArrayBuffer(url){return C3.FetchOk(url).then(response=>response.arrayBuffer())};\nC3.FetchImage=function FetchImage(url){return new Promise((resolve,reject)=>{const img=new Image;img.onload=()=>resolve(img);img.onerror=err=>reject(err);img.src=url})};C3.BlobToArrayBuffer=function BlobToArrayBuffer(blob){if(typeof blob[\"arrayBuffer\"]===\"function\")return blob[\"arrayBuffer\"]();else return new Promise((resolve,reject)=>{const fileReader=new FileReader;fileReader.onload=()=>resolve(fileReader.result);fileReader.onerror=()=>reject(fileReader.error);fileReader.readAsArrayBuffer(blob)})};\nC3.BlobToString=function BlobToString(blob){if(typeof blob[\"text\"]===\"function\")return blob[\"text\"]();else return new Promise((resolve,reject)=>{const fileReader=new FileReader;fileReader.onload=()=>resolve(fileReader.result);fileReader.onerror=()=>reject(fileReader.error);fileReader.readAsText(blob)})};C3.BlobToJson=function BlobToJson(blob){return C3.BlobToString(blob).then(text=>JSON.parse(text))};\nC3.BlobToImage=async function BlobToImage(blob,decodeImage){let blobUrl=URL.createObjectURL(blob);try{const img=await C3.FetchImage(blobUrl);URL.revokeObjectURL(blobUrl);blobUrl=\"\";if(decodeImage&&typeof img[\"decode\"]===\"function\")await img[\"decode\"]();return img}finally{if(blobUrl)URL.revokeObjectURL(blobUrl)}};\nC3.CreateCanvas=function CreateCanvas(width,height){if(typeof document!==\"undefined\"&&typeof document.createElement===\"function\"){const canvas=document.createElement(\"canvas\");canvas.width=width;canvas.height=height;return canvas}else return new OffscreenCanvas(width,height)};\nC3.CanvasToBlob=function CanvasToBlob(canvas,type,quality){if(typeof quality!==\"number\")quality=1;type=type||\"image/png\";quality=C3.clamp(quality,0,1);if(canvas.toBlob)return new Promise(resolve=>canvas.toBlob(resolve,type,quality));else if(canvas[\"convertToBlob\"])return canvas[\"convertToBlob\"]({\"type\":type,\"quality\":quality});else throw new Error(\"could not convert canvas to blob\");};\nC3.DrawableToBlob=function DrawableToBlob(drawable,type,quality){const canvas=C3.CreateCanvas(drawable.width,drawable.height);const ctx=canvas.getContext(\"2d\");ctx.drawImage(drawable,0,0);return C3.CanvasToBlob(canvas,type,quality)};\nC3.ImageDataToBlob=function ImageDataToBlob(imageData,type,quality){if(C3.Supports.ImageBitmapOptions)return createImageBitmap(imageData,{\"premultiplyAlpha\":\"none\"}).then(imageBitmap=>C3.DrawableToBlob(imageBitmap,type,quality));else if(C3.Supports.ImageBitmap)return createImageBitmap(imageData).then(imageBitmap=>C3.DrawableToBlob(imageBitmap,type,quality));else{const canvas=C3.CreateCanvas(imageData.width,imageData.height);const ctx=canvas.getContext(\"2d\");ctx.putImageData(imageData,0,0);return C3.CanvasToBlob(canvas,\ntype,quality)}};C3.CopySet=function CopySet(dest,src){dest.clear();for(const x of src)dest.add(x)};C3.MapToObject=function MapToObject(map){const ret=Object.create(null);for(const [k,v]of map.entries())ret[k]=v;return ret};C3.ObjectToMap=function ObjectToMap(o,map){map.clear();for(const [k,v]of Object.entries(o))map.set(k,v)};\nC3.ToSuperJSON=function ToSuperJSON(v){if(typeof v===\"object\"&&v!==null)if(v instanceof Set)return{\"_c3type_\":\"set\",\"data\":[...v].map(o=>ToSuperJSON(o))};else if(v instanceof Map)return{\"_c3type_\":\"map\",\"data\":[...v].map(pair=>[pair[0],ToSuperJSON(pair[1])])};else{const ret=Object.create(null);for(const [key,value]of Object.entries(v))ret[key]=ToSuperJSON(value);return ret}return v};\nC3.FromSuperJSON=function FromSuperJSON(v){if(typeof v===\"object\"&v!==null)if(v[\"_c3type_\"]===\"set\")return new Set(v[\"data\"].map(o=>FromSuperJSON(o)));else if(v[\"_c3type_\"]===\"map\")return new Map(v[\"data\"].map(pair=>[pair[0],FromSuperJSON(pair[1])]));else{const ret=Object.create(null);for(const [key,value]of Object.entries(v))ret[key]=FromSuperJSON(value);return ret}return v};\nC3.CSSToCamelCase=function(str){if(str.startsWith(\"--\"))return str;let ret=\"\";let isAfterHyphen=false;for(const ch of str)if(ch===\"-\")isAfterHyphen=true;else if(isAfterHyphen){ret+=ch.toUpperCase();isAfterHyphen=false}else ret+=ch;return ret};C3.IsIterator=function(o){return typeof o===\"object\"&&typeof o.next===\"function\"};\nC3.MakeFilledArray=function MakeFilledArray(len,data){const ret=[];if(typeof data===\"function\")for(let i=0;i<len;++i)ret.push(data());else for(let i=0;i<len;++i)ret.push(data);return ret};\n\n}\n\n// ../lib/misc/color.js\n{\n'use strict';const C3=self.C3;const HSL_TEST=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?/i;const HSLA_TEST=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?,([0-9.])/i;function padTwoDigits(str){if(str.length===0)return\"00\";else if(str.length===1)return\"0\"+str;else return str}function hueToRGB(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p}\nC3.Color=class Color{constructor(r,g,b,a){this._r=NaN;this._g=NaN;this._b=NaN;this._a=NaN;this._r=0;this._g=0;this._b=0;this._a=0;if(r instanceof C3.Color)this.set(r);else this.setRgba(r||0,g||0,b||0,a||0)}setRgb(r,g,b){this._r=+r;this._g=+g;this._b=+b;this.clamp();return this}setRgba(r,g,b,a){this._r=+r;this._g=+g;this._b=+b;this._a=+a;this.clamp();return this}set(c){this._r=c._r;this._g=c._g;this._b=c._b;this._a=c._a;return this}copy(c){return this.set(c)}add(c){this._r+=c._r;this._g+=c._g;this._b+=\nc._b;this._a+=c._a;this.clamp()}addRgb(r,g,b,a=0){this._r+=+r;this._g+=+g;this._b+=+b;this._a+=+a;this.clamp()}diff(c){this.setR(Math.max(this._r,c._r)-Math.min(this._r,c._r));this.setG(Math.max(this._g,c._g)-Math.min(this._g,c._g));this.setB(Math.max(this._b,c._b)-Math.min(this._b,c._b));this.setA(Math.max(this._a,c._a)-Math.min(this._a,c._a));this.clamp()}copyRgb(c){this._r=c._r;this._g=c._g;this._b=c._b}setR(r){this._r=C3.clamp(+r,0,1)}getR(){return this._r}setG(g){this._g=C3.clamp(+g,0,1)}getG(){return this._g}setB(b){this._b=\nC3.clamp(+b,0,1)}getB(){return this._b}setA(a){this._a=C3.clamp(+a,0,1)}getA(){return this._a}clone(){return C3.New(C3.Color,this._r,this._g,this._b,this._a)}toArray(){return[this._r,this._g,this._b,this._a]}toTypedArray(){return new Float64Array(this.toArray())}writeToTypedArray(ta,i){ta[i++]=this._r;ta[i++]=this._g;ta[i++]=this._b;ta[i]=this._a}writeRGBToTypedArray(ta,i){ta[i++]=this._r;ta[i++]=this._g;ta[i]=this._b}equals(c){return this._r===c._r&&this._g===c._g&&this._b===c._b&&this._a===c._a}equalsIgnoringAlpha(c){return this._r===\nc._r&&this._g===c._g&&this._b===c._b}equalsRgb(r,g,b){return this._r===r&&this._g===g&&this._b===b}equalsRgba(r,g,b,a){return this._r===r&&this._g===g&&this._b===b&&this._a===a}equalsF32Array(arr,offset){return arr[offset]===Math.fround(this._r)&&arr[offset+1]===Math.fround(this._g)&&arr[offset+2]===Math.fround(this._b)&&arr[offset+3]===Math.fround(this._a)}equalsRGBF32Array(arr,offset){return arr[offset]===Math.fround(this._r)&&arr[offset+1]===Math.fround(this._g)&&arr[offset+2]===Math.fround(this._b)}multiply(c){this._r*=\nc._r;this._g*=c._g;this._b*=c._b;this._a*=c._a}multiplyAlpha(a){this._r*=a;this._g*=a;this._b*=a;this._a*=a}premultiply(){this._r*=this._a;this._g*=this._a;this._b*=this._a;return this}unpremultiply(){this._r/=this._a;this._g/=this._a;this._b/=this._a;return this}clamp(){this._r=C3.clamp(this._r,0,1);this._g=C3.clamp(this._g,0,1);this._b=C3.clamp(this._b,0,1);this._a=C3.clamp(this._a,0,1);return this}setFromRgbValue(rgb){this._r=C3.GetRValue(rgb);this._g=C3.GetGValue(rgb);this._b=C3.GetBValue(rgb);\nthis._a=C3.GetAValue(rgb)}getCssRgb(_r,_g,_b){const r=C3.IsFiniteNumber(_r)?_r:this.getR();const g=C3.IsFiniteNumber(_g)?_g:this.getG();const b=C3.IsFiniteNumber(_b)?_b:this.getB();return`rgb(${r*100}%, ${g*100}%, ${b*100}%)`}getCssRgba(_r,_g,_b,_a){const r=C3.IsFiniteNumber(_r)?_r:this.getR();const g=C3.IsFiniteNumber(_g)?_g:this.getG();const b=C3.IsFiniteNumber(_b)?_b:this.getB();const a=C3.IsFiniteNumber(_a)?_a:this.getA();return`rgba(${r*100}%, ${g*100}%, ${b*100}%, ${a})`}toHexString(){const rh=\nMath.round(this.getR()*255);const gh=Math.round(this.getG()*255);const bh=Math.round(this.getB()*255);return\"#\"+padTwoDigits(rh.toString(16))+padTwoDigits(gh.toString(16))+padTwoDigits(bh.toString(16))}parseHexString(str){if(typeof str!==\"string\")return false;str=str.trim();if(str.charAt(0)===\"#\")str=str.substr(1);let rv;let gv;let bv;if(str.length===3){rv=parseInt(str[0],16)/15;gv=parseInt(str[1],16)/15;bv=parseInt(str[2],16)/15}else if(str.length===6){rv=parseInt(str.substr(0,2),16)/255;gv=parseInt(str.substr(2,\n2),16)/255;bv=parseInt(str.substr(4,2),16)/255}else return false;if(isFinite(rv))this.setR(rv);if(isFinite(gv))this.setG(gv);if(isFinite(bv))this.setB(bv);this.setA(1);return true}toCommaSeparatedRgb(){const rv=Math.round(this.getR()*255);const gv=Math.round(this.getG()*255);const bv=Math.round(this.getB()*255);return`${rv}, ${gv}, ${bv}`}toRgbArray(){const rv=Math.round(this.getR()*255);const gv=Math.round(this.getG()*255);const bv=Math.round(this.getB()*255);return[rv,gv,bv]}parseCommaSeparatedRgb(str){if(typeof str!==\n\"string\")return false;str=str.replace(/^rgb\\(|\\)|%/,\"\");const arr=str.split(\",\");if(arr.length<3)return false;const rv=parseInt(arr[0].trim(),10)/255;const gv=parseInt(arr[1].trim(),10)/255;const bv=parseInt(arr[2].trim(),10)/255;if(isFinite(rv))this.setR(rv);if(isFinite(gv))this.setG(gv);if(isFinite(bv))this.setB(bv);this.setA(1);return true}parseCommaSeparatedPercentageRgb(str){if(typeof str!==\"string\")return false;str=str.replace(/^rgb\\(|\\)|%/,\"\");const arr=str.split(\",\");if(arr.length<3)return false;\nconst rv=parseInt(arr[0].trim(),10)/100;const gv=parseInt(arr[1].trim(),10)/100;const bv=parseInt(arr[2].trim(),10)/100;if(isFinite(rv))this.setR(rv);if(isFinite(gv))this.setG(gv);if(isFinite(bv))this.setB(bv);this.setA(1);return true}parseCommaSeparatedRgba(str){if(typeof str!==\"string\")return false;str=str.replace(/^rgba\\(|\\)|%/,\"\");const arr=str.split(\",\");if(arr.length<4)return false;const rv=parseInt(arr[0].trim(),10)/255;const gv=parseInt(arr[1].trim(),10)/255;const bv=parseInt(arr[2].trim(),\n10)/255;const av=parseFloat(arr[3].trim());if(isFinite(rv))this.setR(rv);if(isFinite(gv))this.setG(gv);if(isFinite(bv))this.setB(bv);if(isFinite(av))this.setA(av);return true}parseCommaSeparatedPercentageRgba(str){if(typeof str!==\"string\")return false;str=str.replace(/^rgba\\(|\\)|%/,\"\");const arr=str.split(\",\");if(arr.length<4)return false;const rv=parseInt(arr[0].trim(),10)/100;const gv=parseInt(arr[1].trim(),10)/100;const bv=parseInt(arr[2].trim(),10)/100;const av=parseFloat(arr[3].trim());if(isFinite(rv))this.setR(rv);\nif(isFinite(gv))this.setG(gv);if(isFinite(bv))this.setB(bv);if(isFinite(av))this.setA(av);return true}parseString(str){if(typeof str!==\"string\")return false;str=str.replace(/\\s+/,\"\");if(str.includes(\",\"))if(str.startsWith(\"rgb(\"))if(str.includes(\"%\"))return this.parseCommaSeparatedPercentageRgb(str);else return this.parseCommaSeparatedRgb(str);else if(str.startsWith(\"rgba(\"))if(str.includes(\"%\"))return this.parseCommaSeparatedPercentageRgba(str);else return this.parseCommaSeparatedRgba(str);else if(str.startsWith(\"hsl(\")||\nstr.startsWith(\"hsla(\"))return this.parseHSLString(str);else{const components=str.split(\",\");if(str.includes(\"%\")){if(components.length===3)return this.parseCommaSeparatedPercentageRgb(str);else if(components.length===4)return this.parseCommaSeparatedPercentageRgba(str);return false}else{if(components.length===3)return this.parseCommaSeparatedRgb(str);else if(components.length===4)return this.parseCommaSeparatedRgba(str);return false}}else return this.parseHexString(str)}toJSON(){return[this._r,this._g,\nthis._b,this._a]}setFromHSLA(h,s,l,a){let r;let g;let b;h%=360;s=C3.clamp(s,0,100);l=C3.clamp(l,0,100);a=C3.clamp(a,0,1);h/=360;s/=100;l/=100;if(s===0)r=g=b=l;else{const q=l<.5?l*(1+s):l+s-l*s;const p=2*l-q;r=hueToRGB(p,q,h+1/3);g=hueToRGB(p,q,h);b=hueToRGB(p,q,h-1/3)}this.setR(r);this.setG(g);this.setB(b);this.setA(a);return this}parseHSLString(str){const cleanString=str.replace(/ |hsl|hsla|\\(|\\)|;/gi,\"\");const hsl=HSL_TEST.exec(cleanString);const hsla=HSLA_TEST.exec(cleanString);if(hsl&&hsl.length===\n4){this.setFromHSLA(+hsl[1],+hsl[2],+hsl[3],1);return true}else if(hsla&&hsla.length===5){this.setFromHSLA(+hsl[1],+hsl[2],+hsl[3],+hsl[4]);return true}return false}toHSLAString(){const r=this._r;const g=this._g;const b=this._b;const a=this._a;const h=C3.Color.GetHue(r,g,b);const s=C3.Color.GetSaturation(r,g,b);const l=C3.Color.GetLuminosity(r,g,b);return`hsla(${h}, ${s}%, ${l}%, ${a})`}toHSLAArray(){const r=this._r;const g=this._g;const b=this._b;return[C3.Color.GetHue(r,g,b),C3.Color.GetSaturation(r,\ng,b),C3.Color.GetLuminosity(r,g,b),this._a]}setFromJSON(arr){if(!Array.isArray(arr))return;if(arr.length<3)return;this._r=arr[0];this._g=arr[1];this._b=arr[2];if(arr.length>=4)this._a=arr[3];else this._a=1}set r(r){this.setR(r)}get r(){return this.getR()}set g(g){this.setG(g)}get g(){return this.getG()}set b(b){this.setB(b)}get b(){return this.getB()}set a(a){this.setA(a)}get a(){return this.getA()}setAtIndex(i,v){switch(i){case 0:this.setR(v);break;case 1:this.setG(v);break;case 2:this.setB(v);break;\ncase 3:this.setA(v);break;default:throw new RangeError(\"invalid color index\");}}getAtIndex(i){switch(i){case 0:return this.getR();case 1:return this.getG();case 2:return this.getB();case 3:return this.getA();default:throw new RangeError(\"invalid color index\");}}static Equals(color_or_json_1,color_or_json_2){let c1;let c2;if(Array.isArray(color_or_json_1)){c1=new C3.Color;c1.setFromJSON(color_or_json_1)}else if(color_or_json_1 instanceof C3.Color)c1=color_or_json_1;else throw new Error(\"unexpected type\");\nif(Array.isArray(color_or_json_2)){c2=new C3.Color;c2.setFromJSON(color_or_json_2)}else if(color_or_json_2 instanceof C3.Color)c2=color_or_json_2;else throw new Error(\"unexpected type\");return c1.equals(c2)}static DiffChannel(channel1,channel2){return C3.clamp(Math.max(channel1,channel2)-Math.min(channel1,channel2),0,1)}static Diff(c1,c2){const ret=new C3.Color;ret.setR(Math.max(c1._r,c2._r)-Math.min(c1._r,c2._r));ret.setG(Math.max(c1._g,c2._g)-Math.min(c1._g,c2._g));ret.setB(Math.max(c1._b,c2._b)-\nMath.min(c1._b,c2._b));ret.setA(Math.max(c1._a,c2._a)-Math.min(c1._a,c2._a));return ret}static DiffNoAlpha(c1,c2){const ret=new C3.Color(0,0,0,1);ret.setR(Math.max(c1._r,c2._r)-Math.min(c1._r,c2._r));ret.setG(Math.max(c1._g,c2._g)-Math.min(c1._g,c2._g));ret.setB(Math.max(c1._b,c2._b)-Math.min(c1._b,c2._b));return ret}static GetHue(r,g,b){const max=Math.max(r,g,b);const min=Math.min(r,g,b);if(max===min)return 0;let h=0;switch(max){case r:h=(g-b)/(max-min)+(g<b?6:0);break;case g:h=(b-r)/(max-min)+2;\nbreak;case b:h=(r-g)/(max-min)+4;break}return Math.round(h/6*360)}static GetSaturation(r,g,b){const max=Math.max(r,g,b);const min=Math.min(r,g,b);if(max===min)return 0;const l=(max+min)/2;const d=max-min;const s=l>.5?d/(2-max-min):d/(max+min);return Math.round(s*100)}static GetLuminosity(r,g,b){const max=Math.max(r,g,b);const min=Math.min(r,g,b);const l=(max+min)/2;if(!max)return 0;return Math.round(l*100)}};C3.Color.White=Object.freeze(C3.New(C3.Color,1,1,1,1));\nC3.Color.Black=Object.freeze(C3.New(C3.Color,0,0,0,1));C3.Color.TransparentBlack=Object.freeze(C3.New(C3.Color,0,0,0,0));\n\n}\n\n// ../lib/misc/vector2.js\n{\n'use strict';const C3=self.C3;\nC3.Vector2=class Vector2{constructor(x,y){this._x=0;this._y=0;if(x instanceof C3.Vector2)this.copy(x);else this.set(x||0,y||0)}set(x,y){this._x=+x;this._y=+y}copy(v){this._x=v._x;this._y=v._y}equals(v){return this._x===v._x&&this._y===v._y}equalsValues(x,y){return this._x===x&&this._y===y}equalsF32Array(arr,offset){return arr[offset]===Math.fround(this._x)&&arr[offset+1]===Math.fround(this._y)}setX(x){this._x=+x}getX(){return this._x}setY(y){this._y=+y}getY(){return this._y}toArray(){return[this._x,this._y]}toTypedArray(){return new Float64Array(this.toArray())}writeToTypedArray(ta,\ni){ta[i++]=this._x;ta[i]=this._y}offset(x,y){this._x+=+x;this._y+=+y}scale(x,y){this._x*=x;this._y*=y}divide(x,y){this._x/=x;this._y/=y}round(){this._x=Math.round(this._x);this._y=Math.round(this._y)}floor(){this._x=Math.floor(this._x);this._y=Math.floor(this._y)}ceil(){this._x=Math.ceil(this._x);this._y=Math.ceil(this._y)}angle(){return C3.angleTo(0,0,this._x,this._y)}lengthSquared(){return this._x*this._x+this._y*this._y}length(){return Math.hypot(this._x,this._y)}rotatePrecalc(sin_a,cos_a){const temp=\nthis._x*cos_a-this._y*sin_a;this._y=this._y*cos_a+this._x*sin_a;this._x=temp}rotate(a){if(a===0)return;this.rotatePrecalc(Math.sin(a),Math.cos(a))}rotateAbout(a,x,y){if(a===0||x===this._x&&y===this._y)return;this._x-=x;this._y-=y;this.rotatePrecalc(Math.sin(a),Math.cos(a));this._x+=+x;this._y+=+y}move(a,dist){if(dist===0)return;this._x+=Math.cos(a)*dist;this._y+=Math.sin(a)*dist}normalize(){const m=this.length();if(m!==0&&m!==1){this._x/=m;this._y/=m}}clamp(lower,upper){this._x=C3.clamp(this._x,lower,\nupper);this._y=C3.clamp(this._y,lower,upper)}};\n\n}\n\n// ../lib/misc/rect.js\n{\n'use strict';const C3=self.C3;\nC3.Rect=class Rect{constructor(left,top,right,bottom){this._left=NaN;this._top=NaN;this._right=NaN;this._bottom=NaN;this._left=0;this._top=0;this._right=0;this._bottom=0;if(left instanceof C3.Rect)this.copy(left);else this.set(left||0,top||0,right||0,bottom||0)}set(left,top,right,bottom){this._left=+left;this._top=+top;this._right=+right;this._bottom=+bottom}setWH(left,top,width,height){left=+left;top=+top;this._left=left;this._top=top;this._right=left+ +width;this._bottom=top+ +height}copy(rect){this._left=\n+rect._left;this._top=+rect._top;this._right=+rect._right;this._bottom=+rect._bottom}clone(){return new C3.Rect(this._left,this._top,this._right,this._bottom)}static Merge(first,second){const ret=new C3.Rect;ret.setLeft(Math.min(first._left,second._left));ret.setTop(Math.min(first._top,second._top));ret.setRight(Math.max(first._right,second._right));ret.setBottom(Math.max(first._bottom,second._bottom));return ret}static FromObject(o){return new C3.Rect(o.left,o.top,o.right,o.bottom)}equals(rect){return this._left===\nrect._left&&this._top===rect._top&&this._right===rect._right&&this._bottom===rect._bottom}equalsWH(x,y,w,h){return this._left===x&&this._top===y&&this.width()===w&&this.height()===h}equalsF32Array(arr,offset){return arr[offset]===Math.fround(this._left)&&arr[offset+1]===Math.fround(this._top)&&arr[offset+2]===Math.fround(this._right)&&arr[offset+3]===Math.fround(this._bottom)}setLeft(l){this._left=+l}getLeft(){return this._left}setTop(t){this._top=+t}getTop(){return this._top}setRight(r){this._right=\n+r}getRight(){return this._right}setBottom(b){this._bottom=+b}getBottom(){return this._bottom}toArray(){return[this._left,this._top,this._right,this._bottom]}toTypedArray(){return new Float64Array(this.toArray())}toDOMRect(){return new DOMRect(this._left,this._top,this.width(),this.height())}writeToTypedArray(ta,i){ta[i++]=this._left;ta[i++]=this._top;ta[i++]=this._right;ta[i]=this._bottom}writeAsQuadToTypedArray(ta,i){ta[i++]=this._left;ta[i++]=this._top;ta[i++]=this._right;ta[i++]=this._top;ta[i++]=\nthis._right;ta[i++]=this._bottom;ta[i++]=this._left;ta[i]=this._bottom}writeAsQuadToTypedArray3D(ta,i,z){ta[i++]=this._left;ta[i++]=this._top;ta[i++]=z;ta[i++]=this._right;ta[i++]=this._top;ta[i++]=z;ta[i++]=this._right;ta[i++]=this._bottom;ta[i++]=z;ta[i++]=this._left;ta[i++]=this._bottom;ta[i]=z}width(){return this._right-this._left}height(){return this._bottom-this._top}midX(){return(this._left+this._right)/2}midY(){return(this._top+this._bottom)/2}offset(x,y){x=+x;y=+y;this._left+=x;this._top+=\ny;this._right+=x;this._bottom+=y}offsetLeft(x){this._left+=+x}offsetTop(y){this._top+=+y}offsetRight(x){this._right+=+x}offsetBottom(y){this._bottom+=+y}toSquare(axis){if(axis!==\"x\")throw new Error(\"invalid axis, only 'x' supported\");if(this._top<this._bottom)if(this._left<this._right)this._bottom=this._top+this.width();else this._bottom=this._top-this.width();else if(this._left<this._right)this._bottom=this._top-this.width();else this._bottom=this._top+this.width()}inflate(x,y){x=+x;y=+y;this._left-=\nx;this._top-=y;this._right+=x;this._bottom+=y}deflate(x,y){x=+x;y=+y;this._left+=x;this._top+=y;this._right-=x;this._bottom-=y}multiply(x,y){this._left*=x;this._top*=y;this._right*=x;this._bottom*=y}divide(x,y){this._left/=x;this._top/=y;this._right/=x;this._bottom/=y}mirrorAround(origin){this._left=+origin-this._left;this._right=+origin-this._right}flipAround(origin){this._top=+origin-this._top;this._bottom=+origin-this._bottom}rotate90DegreesAround(normalizedX,normalizedY){const w=this.width();\nconst h=this.height();const cx=this.getLeft()+w*normalizedX;const cy=this.getTop()+h*normalizedY;this.setWH(cx-h*normalizedY,cy-w*normalizedX,h,w)}swapLeftRight(){const temp=this._left;this._left=this._right;this._right=temp}swapTopBottom(){const temp=this._top;this._top=this._bottom;this._bottom=temp}shuntY(h){const top=this._top;this._top=+h-this._bottom;this._bottom=+h-top}round(){this._left=Math.round(this._left);this._top=Math.round(this._top);this._right=Math.round(this._right);this._bottom=\nMath.round(this._bottom)}roundInner(){this._left=Math.ceil(this._left);this._top=Math.ceil(this._top);this._right=Math.floor(this._right);this._bottom=Math.floor(this._bottom)}roundOuter(){this._left=Math.floor(this._left);this._top=Math.floor(this._top);this._right=Math.ceil(this._right);this._bottom=Math.ceil(this._bottom)}floor(){this._left=Math.floor(this._left);this._top=Math.floor(this._top);this._right=Math.floor(this._right);this._bottom=Math.floor(this._bottom)}ceil(){this._left=Math.ceil(this._left);\nthis._top=Math.ceil(this._top);this._right=Math.ceil(this._right);this._bottom=Math.ceil(this._bottom)}clamp(l,t,r,b){this._left=Math.max(this._left,+l);this._top=Math.max(this._top,+t);this._right=Math.min(this._right,+r);this._bottom=Math.min(this._bottom,+b)}clampBoth(l,t,r,b){l=+l;t=+t;r=+r;b=+b;this._left=C3.clamp(this._left,l,r);this._top=C3.clamp(this._top,t,b);this._right=C3.clamp(this._right,l,r);this._bottom=C3.clamp(this._bottom,t,b)}normalize(){if(this._left>this._right)this.swapLeftRight();\nif(this._top>this._bottom)this.swapTopBottom()}intersectsRect(rect){return!(rect._right<this._left||rect._bottom<this._top||rect._left>this._right||rect._top>this._bottom)}intersectsRectOffset(rect,x,y){return!(rect._right+x<this._left||rect._bottom+y<this._top||rect._left+x>this._right||rect._top+y>this._bottom)}containsPoint(x,y){return x>=this._left&&x<=this._right&&y>=this._top&&y<=this._bottom}containsRect(rect){return rect._left>=this._left&&rect._top>=this._top&&rect._right<=this._right&&rect._bottom<=\nthis._bottom}expandToContain(rect){if(rect._left<this._left)this._left=+rect._left;if(rect._top<this._top)this._top=+rect._top;if(rect._right>this._right)this._right=+rect._right;if(rect._bottom>this._bottom)this._bottom=+rect._bottom}lerpInto(rect){this._left=C3.lerp(rect._left,rect._right,this._left);this._top=C3.lerp(rect._top,rect._bottom,this._top);this._right=C3.lerp(rect._left,rect._right,this._right);this._bottom=C3.lerp(rect._top,rect._bottom,this._bottom)}};\n\n}\n\n// ../lib/misc/quad.js\n{\n'use strict';const C3=self.C3;\nC3.Quad=class Quad{constructor(tlx,tly,trx,try_,brx,bry,blx,bly){this._tlx=NaN;this._tly=NaN;this._trx=NaN;this._try=NaN;this._brx=NaN;this._bry=NaN;this._blx=NaN;this._bly=NaN;this._tlx=0;this._tly=0;this._trx=0;this._try=0;this._brx=0;this._bry=0;this._blx=0;this._bly=0;if(tlx instanceof C3.Quad)this.copy(tlx);else this.set(tlx||0,tly||0,trx||0,try_||0,brx||0,bry||0,blx||0,bly||0)}set(tlx,tly,trx,try_,brx,bry,blx,bly){this._tlx=+tlx;this._tly=+tly;this._trx=+trx;this._try=+try_;this._brx=+brx;this._bry=\n+bry;this._blx=+blx;this._bly=+bly}setRect(left,top,right,bottom){this.set(left,top,right,top,right,bottom,left,bottom)}copy(q){this._tlx=q._tlx;this._tly=q._tly;this._trx=q._trx;this._try=q._try;this._brx=q._brx;this._bry=q._bry;this._blx=q._blx;this._bly=q._bly}equals(q){return this._tlx===q._tlx&&this._tly===q._tly&&this._trx===q._trx&&this._try===q._try&&this._brx===q._brx&&this._bry===q._bry&&this._blx===q._blx&&this._bly===q._bly}setTlx(v){this._tlx=+v}getTlx(){return this._tlx}setTly(v){this._tly=\n+v}getTly(){return this._tly}setTrx(v){this._trx=+v}getTrx(){return this._trx}setTry(v){this._try=+v}getTry(){return this._try}setBrx(v){this._brx=+v}getBrx(){return this._brx}setBry(v){this._bry=+v}getBry(){return this._bry}setBlx(v){this._blx=+v}getBlx(){return this._blx}setBly(v){this._bly=+v}getBly(){return this._bly}toDOMQuad(){return new DOMQuad(new DOMPoint(this._tlx,this._tly),new DOMPoint(this._trx,this._try),new DOMPoint(this._brx,this._bry),new DOMPoint(this._blx,this._bly))}toArray(){return[this._tlx,\nthis._tly,this._trx,this._try,this._brx,this._bry,this._blx,this._bly]}toTypedArray(){return new Float64Array(this.toArray())}writeToTypedArray(ta,i){ta[i++]=this._tlx;ta[i++]=this._tly;ta[i++]=this._trx;ta[i++]=this._try;ta[i++]=this._brx;ta[i++]=this._bry;ta[i++]=this._blx;ta[i]=this._bly}writeToTypedArray3D(ta,i,z){ta[i++]=this._tlx;ta[i++]=this._tly;ta[i++]=z;ta[i++]=this._trx;ta[i++]=this._try;ta[i++]=z;ta[i++]=this._brx;ta[i++]=this._bry;ta[i++]=z;ta[i++]=this._blx;ta[i++]=this._bly;ta[i]=z}offset(x,\ny){x=+x;y=+y;this._tlx+=x;this._tly+=y;this._trx+=x;this._try+=y;this._brx+=x;this._bry+=y;this._blx+=x;this._bly+=y}round(){this._tlx=Math.round(this._tlx);this._tly=Math.round(this._tly);this._trx=Math.round(this._trx);this._try=Math.round(this._try);this._brx=Math.round(this._brx);this._bry=Math.round(this._bry);this._blx=Math.round(this._blx);this._bly=Math.round(this._bly)}floor(){this._tlx=Math.floor(this._tlx);this._tly=Math.floor(this._tly);this._trx=Math.floor(this._trx);this._try=Math.floor(this._try);\nthis._brx=Math.floor(this._brx);this._bry=Math.floor(this._bry);this._blx=Math.floor(this._blx);this._bly=Math.floor(this._bly)}ceil(){this._tlx=Math.ceil(this._tlx);this._tly=Math.ceil(this._tly);this._trx=Math.ceil(this._trx);this._try=Math.ceil(this._try);this._brx=Math.ceil(this._brx);this._bry=Math.ceil(this._bry);this._blx=Math.ceil(this._blx);this._bly=Math.ceil(this._bly)}setFromRect(rect){this._tlx=rect._left;this._tly=rect._top;this._trx=rect._right;this._try=rect._top;this._brx=rect._right;\nthis._bry=rect._bottom;this._blx=rect._left;this._bly=rect._bottom}setFromRotatedRect(rect,a){if(a===0)this.setFromRect(rect);else this.setFromRotatedRectPrecalc(rect,Math.sin(a),Math.cos(a))}setFromRotatedRectPrecalc(rect,sin_a,cos_a){const left_sin_a=rect._left*sin_a;const top_sin_a=rect._top*sin_a;const right_sin_a=rect._right*sin_a;const bottom_sin_a=rect._bottom*sin_a;const left_cos_a=rect._left*cos_a;const top_cos_a=rect._top*cos_a;const right_cos_a=rect._right*cos_a;const bottom_cos_a=rect._bottom*\ncos_a;this._tlx=left_cos_a-top_sin_a;this._tly=top_cos_a+left_sin_a;this._trx=right_cos_a-top_sin_a;this._try=top_cos_a+right_sin_a;this._brx=right_cos_a-bottom_sin_a;this._bry=bottom_cos_a+right_sin_a;this._blx=left_cos_a-bottom_sin_a;this._bly=bottom_cos_a+left_sin_a}getBoundingBox(rect){rect.set(Math.min(this._tlx,this._trx,this._brx,this._blx),Math.min(this._tly,this._try,this._bry,this._bly),Math.max(this._tlx,this._trx,this._brx,this._blx),Math.max(this._tly,this._try,this._bry,this._bly))}containsPoint(x,\ny){let v0x=this._trx-this._tlx;let v0y=this._try-this._tly;const v1x=this._brx-this._tlx;const v1y=this._bry-this._tly;const v2x=x-this._tlx;const v2y=y-this._tly;let dot00=v0x*v0x+v0y*v0y;let dot01=v0x*v1x+v0y*v1y;let dot02=v0x*v2x+v0y*v2y;const dot11=v1x*v1x+v1y*v1y;const dot12=v1x*v2x+v1y*v2y;let invDenom=1/(dot00*dot11-dot01*dot01);let u=(dot11*dot02-dot01*dot12)*invDenom;let v=(dot00*dot12-dot01*dot02)*invDenom;if(u>=0&&v>0&&u+v<1)return true;v0x=this._blx-this._tlx;v0y=this._bly-this._tly;dot00=\nv0x*v0x+v0y*v0y;dot01=v0x*v1x+v0y*v1y;dot02=v0x*v2x+v0y*v2y;invDenom=1/(dot00*dot11-dot01*dot01);u=(dot11*dot02-dot01*dot12)*invDenom;v=(dot00*dot12-dot01*dot02)*invDenom;return u>=0&&v>0&&u+v<1}midX(){return(this._tlx+this._trx+this._brx+this._blx)/4}midY(){return(this._tly+this._try+this._bry+this._bly)/4}intersectsSegment(x1,y1,x2,y2){if(this.containsPoint(x1,y1)||this.containsPoint(x2,y2))return true;return C3.segmentIntersectsQuad(x1,y1,x2,y2,this)}intersectsQuad(rhs){let midX=rhs.midX();let midY=\nrhs.midY();if(this.containsPoint(midX,midY))return true;midX=this.midX();midY=this.midY();if(rhs.containsPoint(midX,midY))return true;const tlx=this._tlx,tly=this._tly,trx=this._trx,try_=this._try,brx=this._brx,bry=this._bry,blx=this._blx,bly=this._bly;return C3.segmentIntersectsQuad(tlx,tly,trx,try_,rhs)||C3.segmentIntersectsQuad(trx,try_,brx,bry,rhs)||C3.segmentIntersectsQuad(brx,bry,blx,bly,rhs)||C3.segmentIntersectsQuad(blx,bly,tlx,tly,rhs)}rotatePointsAnticlockwise(){const tlx=this._tlx;const tly=\nthis._tly;this._tlx=this._trx;this._tly=this._try;this._trx=this._brx;this._try=this._bry;this._brx=this._blx;this._bry=this._bly;this._blx=tlx;this._bly=tly}mirror(){this._swap(0,2);this._swap(1,3);this._swap(6,4);this._swap(7,5)}flip(){this._swap(0,6);this._swap(1,7);this._swap(2,4);this._swap(3,5)}diag(){this._swap(2,6);this._swap(3,7)}_swap(i,j){const tmp=this._getAtIndex(i);this._setAtIndex(i,this._getAtIndex(j));this._setAtIndex(j,tmp)}_getAtIndex(i){switch(i){case 0:return this._tlx;case 1:return this._tly;\ncase 2:return this._trx;case 3:return this._try;case 4:return this._brx;case 5:return this._bry;case 6:return this._blx;case 7:return this._bly;default:throw new RangeError(\"invalid quad point index\");}}_setAtIndex(i,v){v=+v;switch(i){case 0:this._tlx=v;break;case 1:this._tly=v;break;case 2:this._trx=v;break;case 3:this._try=v;break;case 4:this._brx=v;break;case 5:this._bry=v;break;case 6:this._blx=v;break;case 7:this._bly=v;break;default:throw new RangeError(\"invalid quad point index\");}}};\n\n}\n\n// lib/misc/collisionPoly.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;const DEFAULT_POLY_POINTS=[0,0,1,0,1,1,0,1];const tempQuad=C3.New(C3.Quad);\nC3.CollisionPoly=class CollisionPoly extends C3.DefendedBase{constructor(pointsArr,enabled=true){super();if(!pointsArr)pointsArr=DEFAULT_POLY_POINTS;this._ptsArr=Float64Array.from(pointsArr);this._bbox=new C3.Rect;this._isBboxChanged=true;this._enabled=enabled}Release(){}pointsArr(){return this._ptsArr}pointCount(){return this._ptsArr.length/2}setPoints(pointsArr){if(this._ptsArr.length===pointsArr.length)this._ptsArr.set(pointsArr);else this._ptsArr=Float64Array.from(pointsArr);this._isBboxChanged=\ntrue}setDefaultPoints(){this.setPoints(DEFAULT_POLY_POINTS)}copy(poly){this.setPoints(poly._ptsArr)}setBboxChanged(){this._isBboxChanged=true}_updateBbox(){if(!this._isBboxChanged)return;const ptsArr=this._ptsArr;let left=ptsArr[0];let top=ptsArr[1];let right=left;let bottom=top;for(let i=0,len=ptsArr.length;i<len;i+=2){const x=ptsArr[i];const y=ptsArr[i+1];if(x<left)left=x;if(x>right)right=x;if(y<top)top=y;if(y>bottom)bottom=y}this._bbox.set(left,top,right,bottom);this._isBboxChanged=false}setFromRect(rc,\noffX,offY){let ptsArr=this._ptsArr;if(ptsArr.length!==8){ptsArr=new Float64Array(8);this._ptsArr=ptsArr}ptsArr[0]=rc.getLeft()-offX;ptsArr[1]=rc.getTop()-offY;ptsArr[2]=rc.getRight()-offX;ptsArr[3]=rc.getTop()-offY;ptsArr[4]=rc.getRight()-offX;ptsArr[5]=rc.getBottom()-offY;ptsArr[6]=rc.getLeft()-offX;ptsArr[7]=rc.getBottom()-offY;this._bbox.copy(rc);if(offX!==0||offY!==0)this._bbox.offset(-offX,-offY);this._isBboxChanged=false}setFromQuad(q,offX,offY){tempQuad.copy(q);tempQuad.offset(offX,offY);this.setPoints(tempQuad.toArray());\nthis._isBboxChanged=true}transform(w,h,a){let sina=0;let cosa=1;if(a!==0){sina=Math.sin(a);cosa=Math.cos(a)}this.transformPrecalc(w,h,sina,cosa)}transformPrecalc(w,h,sina,cosa){const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2){const j=i+1;const x=ptsArr[i]*w;const y=ptsArr[j]*h;ptsArr[i]=x*cosa-y*sina;ptsArr[j]=y*cosa+x*sina}this._isBboxChanged=true}offset(x,y){const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2){ptsArr[i]+=x;ptsArr[i+1]+=y}}containsPoint(a2x,a2y){const ptsArr=\nthis._ptsArr;if(a2x===ptsArr[0]&&a2y===ptsArr[1])return true;this._updateBbox();const bbox=this._bbox;const a1x=bbox.getLeft()-110;const a1y=bbox.getTop()-101;const a3x=bbox.getRight()+131;const a3y=bbox.getBottom()+120;let minAx12=0;let minAy12=0;let maxAx12=0;let maxAy12=0;let minAx32=0;let minAy32=0;let maxAx32=0;let maxAy32=0;if(a1x<a2x){minAx12=a1x;maxAx12=a2x}else{minAx12=a2x;maxAx12=a1x}if(a1y<a2y){minAy12=a1y;maxAy12=a2y}else{minAy12=a2y;maxAy12=a1y}if(a3x<a2x){minAx32=a3x;maxAx32=a2x}else{minAx32=\na2x;maxAx32=a3x}if(a3y<a2y){minAy32=a3y;maxAy32=a2y}else{minAy32=a2y;maxAy32=a3y}let count1=0;let count2=0;for(let i=0,len=ptsArr.length;i<len;i+=2){const j=(i+2)%len;const b1x=ptsArr[i];const b1y=ptsArr[i+1];const b2x=ptsArr[j];const b2y=ptsArr[j+1];if(C3.segmentsIntersectPreCalc(a1x,a1y,a2x,a2y,minAx12,maxAx12,minAy12,maxAy12,b1x,b1y,b2x,b2y))++count1;if(C3.segmentsIntersectPreCalc(a3x,a3y,a2x,a2y,minAx32,maxAx32,minAy32,maxAy32,b1x,b1y,b2x,b2y))++count2}return count1%2===1||count2%2===1}intersectsPoly(poly,\noffX,offY){const rPts=poly._ptsArr;const lPts=this._ptsArr;if(this.containsPoint(rPts[0]+offX,rPts[1]+offY))return true;if(poly.containsPoint(lPts[0]-offX,lPts[1]-offY))return true;for(let i=0,leni=lPts.length;i<leni;i+=2){const j=(i+2)%leni;const a1x=lPts[i];const a1y=lPts[i+1];const a2x=lPts[j];const a2y=lPts[j+1];let minAx=0;let minAy=0;let maxAx=0;let maxAy=0;if(a1x<a2x){minAx=a1x;maxAx=a2x}else{minAx=a2x;maxAx=a1x}if(a1y<a2y){minAy=a1y;maxAy=a2y}else{minAy=a2y;maxAy=a1y}for(let k=0,lenk=rPts.length;k<\nlenk;k+=2){const l=(k+2)%lenk;const b1x=rPts[k]+offX;const b1y=rPts[k+1]+offY;const b2x=rPts[l]+offX;const b2y=rPts[l+1]+offY;if(C3.segmentsIntersectPreCalc(a1x,a1y,a2x,a2y,minAx,maxAx,minAy,maxAy,b1x,b1y,b2x,b2y))return true}}return false}intersectsSegment(offX,offY,a1x,a1y,a2x,a2y){if(this.containsPoint(a1x-offX,a1y-offY))return true;if(this.containsPoint(a2x-offX,a2y-offY))return true;let minAx=0;let minAy=0;let maxAx=0;let maxAy=0;if(a1x<a2x){minAx=a1x;maxAx=a2x}else{minAx=a2x;maxAx=a1x}if(a1y<\na2y){minAy=a1y;maxAy=a2y}else{minAy=a2y;maxAy=a1y}const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2){const j=(i+2)%len;const b1x=ptsArr[i]+offX;const b1y=ptsArr[i+1]+offY;const b2x=ptsArr[j]+offX;const b2y=ptsArr[j+1]+offY;if(C3.segmentsIntersectPreCalc(a1x,a1y,a2x,a2y,minAx,maxAx,minAy,maxAy,b1x,b1y,b2x,b2y))return true}return false}mirror(px){const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2)ptsArr[i]=px*2-ptsArr[i];this._isBboxChanged=true}flip(py){const ptsArr=\nthis._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2){const j=i+1;ptsArr[j]=py*2-ptsArr[j]}this._isBboxChanged=true}diag(){const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2){const j=i+1;const temp=ptsArr[i];ptsArr[i]=ptsArr[j];ptsArr[j]=temp}this._isBboxChanged=true}GetMidX(){const ptsArr=this._ptsArr;let ret=0;for(let i=0,len=ptsArr.length;i<len;i+=2)ret+=ptsArr[i];return ret/this.pointCount()}GetMidY(){const ptsArr=this._ptsArr;let ret=0;for(let i=0,len=ptsArr.length;i<len;i+=\n2)ret+=ptsArr[i+1];return ret/this.pointCount()}GetPointsArray(){return this._ptsArr}GetPointCount(){return this.pointCount()}IsEnabled(){return this._enabled}};\n\n}\n\n// lib/misc/pairMap.js\n{\n'use strict';const C3=self.C3;\nC3.PairMap=class PairMap extends C3.DefendedBase{constructor(iterable){super();this._firstMap=new Map;if(iterable)for(const [x,y,value]of iterable)this.Set(x,y,value)}Release(){this.Clear();this._firstMap=null}Clear(){const firstMap=this._firstMap;for(const secondMap of firstMap.values())secondMap.clear();firstMap.clear()}Set(x,y,value){const firstMap=this._firstMap;let secondMap=firstMap.get(x);if(!secondMap){secondMap=new Map;firstMap.set(x,secondMap)}secondMap.set(y,value)}Get(x,y){const secondMap=\nthis._firstMap.get(x);if(!secondMap)return secondMap;return secondMap.get(y)}Has(x,y){const secondMap=this._firstMap.get(x);if(!secondMap)return false;return secondMap.has(y)}Delete(x,y){const firstMap=this._firstMap;const secondMap=firstMap.get(x);if(!secondMap)return false;const ret=secondMap.delete(y);if(ret&&secondMap.size===0)firstMap.delete(x);return ret}DeleteEither(k){const firstMap=this._firstMap;const secondMap=firstMap.get(k);if(secondMap){secondMap.clear();firstMap.delete(k)}for(const [x,\nsecondMap]of firstMap.entries())if(secondMap.delete(k)&&secondMap.size===0)firstMap.delete(x)}GetSize(){let ret=0;for(const secondMap of this._firstMap.values())ret+=secondMap.size;return ret}*values(){for(const secondMap of this._firstMap.values())yield*secondMap.values()}*keyPairs(){for(const [x,secondMap]of this._firstMap.entries())for(const y of secondMap.keys())yield[x,y]}*entries(){for(const [x,secondMap]of this._firstMap.entries())for(const [y,value]of secondMap.entries())yield[x,y,value]}};\n\n}\n\n// lib/misc/arraySet.js\n{\n'use strict';const C3=self.C3;\nC3.ArraySet=class ArraySet extends C3.DefendedBase{constructor(){super();this._set=new Set;this._arr=[];this._needToRebuildArray=false}Release(){this.Clear()}Clear(){this._set.clear();C3.clearArray(this._arr);this._needToRebuildArray=false}Add(v){if(this._set.has(v))return;this._set.add(v);if(!this._needToRebuildArray)this._arr.push(v)}Has(v){return this._set.has(v)}Delete(v){if(this._set.delete(v))this._needToRebuildArray=true}GetSize(){return this._set.size}IsEmpty(){return this._set.size===0}GetArray(){if(this._needToRebuildArray){this._RebuildArray();\nthis._needToRebuildArray=false}return this._arr}_RebuildArray(){const arr=this._arr;C3.clearArray(arr);for(const v of this._set)arr.push(v)}};\n\n}\n\n// ../lib/misc/ease.js\n{\n'use strict';const C3=self.C3;const EASE_MAP=new Map;const PREDEFINED_EASE_MAP=new Map;const CUSTOM_EASE_EDITOR_MAP=new Map;const CUSTOM_EASE_RUNTIME_MAP=new Map;const PRIVATE_EASE_MAP=new Map;const BUILT_IN_TRANSITION_MAP=new Map;const ALIAS_MAP=new Map;ALIAS_MAP.set(\"linear\",\"noease\");ALIAS_MAP.set(\"default\",\"noease\");\nconst EASE_TRANSLATION_KEYS=[\"default\",\"noease\",\"easeinquad\",\"easeoutquad\",\"easeinoutquad\",\"easeincubic\",\"easeoutcubic\",\"easeinoutcubic\",\"easeinquart\",\"easeoutquart\",\"easeinoutquart\",\"easeinquint\",\"easeoutquint\",\"easeinoutquint\",\"easeinsine\",\"easeoutsine\",\"easeinoutsine\",\"easeinexpo\",\"easeoutexpo\",\"easeinoutexpo\",\"easeincirc\",\"easeoutcirc\",\"easeinoutcirc\",\"easeinelastic\",\"easeoutelastic\",\"easeinoutelastic\",\"easeinback\",\"easeoutback\",\"easeinoutback\",\"easeinbounce\",\"easeoutbounce\",\"easeinoutbounce\"];\nconst SHORT_EASE_TRANSLATION_KEYS=[\"default\",\"noease\",\"quad\",\"cubic\",\"quart\",\"quint\",\"sine\",\"expo\",\"circ\",\"elastic\",\"back\",\"bounce\"];\nconst EASE_API2INTERNAL_NAMES=new Map([[\"linear\",\"noease\"],[\"in-sine\",\"easeinsine\"],[\"out-sine\",\"easeoutsine\"],[\"in-out-sine\",\"easeinoutsine\"],[\"in-elastic\",\"easeinelastic\"],[\"out-elastic\",\"easeoutelastic\"],[\"in-out-elastic\",\"easeinoutelastic\"],[\"in-back\",\"easeinback\"],[\"out-back\",\"easeoutback\"],[\"in-out-back\",\"easeinoutback\"],[\"in-bounce\",\"easeinbounce\"],[\"out-bounce\",\"easeoutbounce\"],[\"in-out-bounce\",\"easeinoutbounce\"],[\"in-cubic\",\"easeincubic\"],[\"out-cubic\",\"easeoutcubic\"],[\"in-out-cubic\",\"easeinoutcubic\"],\n[\"in-quadratic\",\"easeinquad\"],[\"out-quadratic\",\"easeoutquad\"],[\"in-out-quadratic\",\"easeinoutquad\"],[\"in-quartic\",\"easeinquart\"],[\"out-quartic\",\"easeoutquart\"],[\"in-out-quartic\",\"easeinoutquart\"],[\"in-quintic\",\"easeinquint\"],[\"out-quintic\",\"easeoutquint\"],[\"in-out-quintic\",\"easeinoutquint\"],[\"in-circular\",\"easeincirc\"],[\"out-circular\",\"easeoutcirc\"],[\"in-out-circular\",\"easeinoutcirc\"],[\"in-exponential\",\"easeinexpo\"],[\"out-exponential\",\"easeoutexpo\"],[\"in-out-exponential\",\"easeinoutexpo\"]]);\nself.Ease=class Ease{constructor(){}static InheritEase(){return\"default\"}static DefaultEase(){return\"noease\"}static ToInternal(ease){return EASE_API2INTERNAL_NAMES.get(ease)}static GetEditorEaseNames(project,...filter){this._CreateEaseMap();let customEaseMap;if(project){if(!CUSTOM_EASE_EDITOR_MAP.has(project))CUSTOM_EASE_EDITOR_MAP.set(project,new Map);customEaseMap=CUSTOM_EASE_EDITOR_MAP.get(project)}else customEaseMap=CUSTOM_EASE_RUNTIME_MAP;const sortedCustomEases=[...customEaseMap.keys()];sortedCustomEases.sort();\nreturn[...PREDEFINED_EASE_MAP.keys()].concat(sortedCustomEases).filter(ease=>!filter.includes(ease))}static GetRuntimeEaseNames(){this._CreateEaseMap();const sortedCustomEases=[...CUSTOM_EASE_RUNTIME_MAP.keys()];sortedCustomEases.sort();return[...PREDEFINED_EASE_MAP.keys()].concat(sortedCustomEases)}static GetCustomRuntimeEaseNames(){this._CreateEaseMap();const sortedCustomEases=[...CUSTOM_EASE_RUNTIME_MAP.keys()];sortedCustomEases.sort();return sortedCustomEases}static IsPredefinedTranslatedName(easeName){for(const k of EASE_TRANSLATION_KEYS){const translatedName=\nself.lang(`ui.bars.timeline.eases.${k}`);if(translatedName===easeName)return true}for(const k of SHORT_EASE_TRANSLATION_KEYS){const translatedName=self.lang(`ui.bars.timeline.short-eases.${k}`);if(translatedName===easeName)return true}}static IsNamePredefined(easeName){this._CreateEaseMap();return[...PREDEFINED_EASE_MAP.keys()].includes(easeName)}static _GetEase(easeName){const realEaseName=ALIAS_MAP.get(easeName);if(realEaseName)return EASE_MAP.get(realEaseName);if(Ease.IsNamePredefined(easeName))return EASE_MAP.get(easeName);\nif(PRIVATE_EASE_MAP.has(easeName))return PRIVATE_EASE_MAP.get(easeName)}static GetBuiltInTransition(builtInTransitionName){this._CreateEaseMap();return BUILT_IN_TRANSITION_MAP.get(builtInTransitionName)}static GetEditorEase(easeName,project){this._CreateEaseMap();const ease=Ease._GetEase(easeName);if(ease)return ease;if(!project)throw new Error(\"missing ease function\");return CUSTOM_EASE_EDITOR_MAP.get(project).get(easeName)}static HasEditorEase(easeName,project){this._CreateEaseMap();const ease=\nEase._GetEase(easeName);if(ease)return true;return!!CUSTOM_EASE_EDITOR_MAP.get(project).get(easeName)}static GetRuntimeEase(easeName){this._CreateEaseMap();const ease=Ease._GetEase(easeName);if(ease)return ease;return CUSTOM_EASE_RUNTIME_MAP.get(easeName)}static GetEaseFromIndex(index){this._CreateEaseMap();const names=this.GetRuntimeEaseNames();return names[index]}static GetIndexForEase(name,project){this._CreateEaseMap();const names=this.GetEditorEaseNames(project);return names.indexOf(name)}static GetIndexForEaseAtRuntime(name){return this.GetIndexForEase(name)}static _CreateEaseMap(){if(EASE_MAP.size!==\n0)return;this._AddPredifinedEase(\"default\",()=>{});this._AddPredifinedEase(\"noease\",[{\"x\":0,\"y\":0,\"sax\":.336,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.336,\"eay\":0,\"se\":false,\"ee\":true}],true);this._AddPredifinedEase(\"easeinsine\",[{\"x\":0,\"y\":0,\"sax\":.485,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.038,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeoutsine\",[{\"x\":0,\"y\":0,\"sax\":.038,\"say\":0,\"eax\":0,\"eay\":0,\n\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.485,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinoutsine\",[{\"x\":0,\"y\":0,\"sax\":.336,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.336,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinelastic\",[{\"x\":0,\"y\":0,\"sax\":.018,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":.116,\"y\":.002,\"sax\":.025,\"say\":0,\"eax\":-.025,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.266,\"y\":-.005,\"sax\":.024,\"say\":0,\n\"eax\":-.021,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.416,\"y\":.016,\"sax\":.024,\"say\":0,\"eax\":-.026,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.566,\"y\":-.045,\"sax\":.061,\"say\":0,\"eax\":-.025,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.716,\"y\":.132,\"sax\":.072,\"say\":-.004,\"eax\":-.045,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.866,\"y\":-.373,\"sax\":.06,\"say\":0,\"eax\":-.049,\"eay\":-.002,\"se\":true,\"ee\":true},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.038,\"eay\":-.263,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeoutelastic\",[{\"x\":0,\"y\":0,\"sax\":.038,\n\"say\":.263,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":.136,\"y\":1.373,\"sax\":.049,\"say\":.002,\"eax\":-.06,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.286,\"y\":.868,\"sax\":.045,\"say\":0,\"eax\":-.072,\"eay\":.004,\"se\":true,\"ee\":true},{\"x\":.436,\"y\":1.045,\"sax\":.025,\"say\":0,\"eax\":-.061,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.586,\"y\":.984,\"sax\":.026,\"say\":0,\"eax\":-.024,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.736,\"y\":1.005,\"sax\":.021,\"say\":0,\"eax\":-.024,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.886,\"y\":.998,\"sax\":.025,\"say\":0,\"eax\":-.025,\n\"eay\":0,\"se\":true,\"ee\":true},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.018,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinoutelastic\",[{\"x\":0,\"y\":0,\"sax\":.025,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":.067,\"y\":.001,\"sax\":.025,\"say\":0,\"eax\":-.025,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.18,\"y\":-.005,\"sax\":.025,\"say\":0,\"eax\":-.025,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.292,\"y\":.025,\"sax\":.053,\"say\":0,\"eax\":-.025,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.405,\"y\":-.118,\"sax\":.069,\"say\":0,\"eax\":-.027,\n\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.597,\"y\":1.118,\"sax\":.027,\"say\":0,\"eax\":-.069,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.71,\"y\":.975,\"sax\":.025,\"say\":0,\"eax\":-.053,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.822,\"y\":1.005,\"sax\":.025,\"say\":0,\"eax\":-.025,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.935,\"y\":.999,\"sax\":.025,\"say\":0,\"eax\":-.025,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.025,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinback\",[{\"x\":0,\"y\":0,\"sax\":.35,\"say\":0,\"eax\":0,\"eay\":0,\n\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.34,\"eay\":-1.579,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeoutback\",[{\"x\":0,\"y\":0,\"sax\":.34,\"say\":1.579,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.35,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinoutback\",[{\"x\":0,\"y\":0,\"sax\":.035,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":.242,\"y\":-.1,\"sax\":.258,\"say\":0,\"eax\":-.025,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":.76,\"y\":1.1,\"sax\":.025,\"say\":0,\n\"eax\":-.26,\"eay\":0,\"se\":true,\"ee\":true},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.035,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinbounce\",[{\"x\":0,\"y\":0,\"sax\":.033,\"say\":.025,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":.092,\"y\":0,\"sax\":.026,\"say\":.078,\"eax\":-.033,\"eay\":.025,\"se\":true,\"ee\":true},{\"x\":.274,\"y\":0,\"sax\":.097,\"say\":.319,\"eax\":-.026,\"eay\":.078,\"se\":true,\"ee\":true},{\"x\":.637,\"y\":0,\"sax\":.105,\"say\":.625,\"eax\":-.097,\"eay\":.319,\"se\":true,\"ee\":true},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\n\"eax\":-.125,\"eay\":-.004,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeoutbounce\",[{\"x\":0,\"y\":0,\"sax\":.125,\"say\":.004,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":.365,\"y\":1,\"sax\":.097,\"say\":-.319,\"eax\":-.105,\"eay\":-.625,\"se\":true,\"ee\":true},{\"x\":.728,\"y\":1,\"sax\":.026,\"say\":-.078,\"eax\":-.097,\"eay\":-.319,\"se\":true,\"ee\":true},{\"x\":.91,\"y\":1,\"sax\":.033,\"say\":-.025,\"eax\":-.026,\"eay\":-.078,\"se\":true,\"ee\":true},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.033,\"eay\":-.025,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinoutbounce\",\n[{\"x\":0,\"y\":0,\"sax\":.01,\"say\":.006,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":.046,\"y\":0,\"sax\":.021,\"say\":.038,\"eax\":-.01,\"eay\":.006,\"se\":true,\"ee\":true},{\"x\":.137,\"y\":0,\"sax\":.059,\"say\":.158,\"eax\":-.021,\"eay\":.038,\"se\":true,\"ee\":true},{\"x\":.319,\"y\":0,\"sax\":.117,\"say\":.744,\"eax\":-.059,\"eay\":.158,\"se\":true,\"ee\":true},{\"x\":.683,\"y\":1,\"sax\":.059,\"say\":-.158,\"eax\":-.117,\"eay\":-.744,\"se\":true,\"ee\":true},{\"x\":.865,\"y\":1,\"sax\":.021,\"say\":-.038,\"eax\":-.059,\"eay\":-.158,\"se\":true,\"ee\":true},{\"x\":.956,\"y\":1,\n\"sax\":.01,\"say\":-.006,\"eax\":-.021,\"eay\":-.038,\"se\":true,\"ee\":true},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.01,\"eay\":-.006,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeincubic\",[{\"x\":0,\"y\":0,\"sax\":.75,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.138,\"eay\":-.321,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeoutcubic\",[{\"x\":0,\"y\":0,\"sax\":.138,\"say\":.321,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.75,\"eay\":0,\"se\":false,\"ee\":true}]);\nthis._AddPredifinedEase(\"easeinoutcubic\",[{\"x\":0,\"y\":0,\"sax\":.285,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":.5,\"y\":.5,\"sax\":.081,\"say\":.272,\"eax\":-.081,\"eay\":-.272,\"se\":true,\"ee\":true},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.285,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinquad\",[{\"x\":0,\"y\":0,\"sax\":.4,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.178,\"eay\":-.392,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeoutquad\",[{\"x\":0,\"y\":0,\n\"sax\":.178,\"say\":.392,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.4,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinoutquad\",[{\"x\":0,\"y\":0,\"sax\":.25,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":.5,\"y\":.5,\"sax\":.03,\"say\":.065,\"eax\":-.03,\"eay\":-.065,\"se\":true,\"ee\":true},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.25,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinquart\",[{\"x\":0,\"y\":0,\"sax\":.25,\"say\":1,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},\n{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.5,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeoutquart\",[{\"x\":0,\"y\":0,\"sax\":.5,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.25,\"eay\":-1,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinoutquart\",[{\"x\":0,\"y\":0,\"sax\":.765,\"say\":.03,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.765,\"eay\":-.03,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinquint\",[{\"x\":0,\"y\":0,\"sax\":.6,\n\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.2,\"eay\":-1,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeoutquint\",[{\"x\":0,\"y\":0,\"sax\":.2,\"say\":1,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.6,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinoutquint\",[{\"eax\":0,\"eay\":0,\"ee\":false,\"sax\":.84,\"say\":0,\"se\":true,\"x\":0,\"y\":0},{\"eax\":-.84,\"eay\":0,\"ee\":true,\"sax\":0,\"say\":0,\"se\":false,\"x\":1,\"y\":1}]);this._AddPredifinedEase(\"easeincirc\",\n[{\"x\":0,\"y\":0,\"sax\":.25,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.024,\"eay\":-.808,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeoutcirc\",[{\"x\":0,\"y\":0,\"sax\":.024,\"say\":.808,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.25,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinoutcirc\",[{\"x\":0,\"y\":0,\"sax\":.125,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":.5,\"y\":.5,\"sax\":.02,\"say\":.428,\"eax\":-.02,\"eay\":-.428,\n\"se\":true,\"ee\":true},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.125,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinexpo\",[{\"x\":0,\"y\":0,\"sax\":.66,\"say\":0,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.14,\"eay\":-1,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeoutexpo\",[{\"x\":0,\"y\":0,\"sax\":.14,\"say\":1,\"eax\":0,\"eay\":0,\"se\":true,\"ee\":false},{\"x\":1,\"y\":1,\"sax\":0,\"say\":0,\"eax\":-.66,\"eay\":0,\"se\":false,\"ee\":true}]);this._AddPredifinedEase(\"easeinoutexpo\",[{\"eax\":0,\n\"eay\":0,\"ee\":false,\"sax\":.345,\"say\":0,\"se\":true,\"x\":0,\"y\":0},{\"eax\":-.06,\"eay\":-.5,\"ee\":true,\"sax\":.06,\"say\":.5,\"se\":true,\"x\":.5,\"y\":.5},{\"eax\":-.335,\"eay\":0,\"ee\":true,\"sax\":0,\"say\":0,\"se\":false,\"x\":1,\"y\":1}]);this._AddPrivateCustomEase(\"cubicbezier\",this.EaseCubicBezier);this._AddPrivateCustomEase(\"spline\",this.EaseSpline)}static _AddPredifinedEase(name,dataArray_or_function,linear=false){if(typeof dataArray_or_function===\"function\")Ease._AddEase(name,dataArray_or_function,\"predefined\");else if(C3.IsArray(dataArray_or_function))if(self.BuiltInTransition){const builtInTransition=\nC3.New(self.BuiltInTransition,name,linear);builtInTransition.SetFromJson(dataArray_or_function);Ease._AddEase(name,(t,sv,dv,tt)=>builtInTransition.Interpolate(t,sv,dv,tt),\"predefined\");BUILT_IN_TRANSITION_MAP.set(name,builtInTransition)}else{const builtInTransition=C3.New(C3.Transition,[name,dataArray_or_function.map(data=>{return[data[\"x\"],data[\"y\"],data[\"sax\"],data[\"say\"],data[\"eax\"],data[\"eay\"],data[\"se\"],data[\"ee\"]]})],false);builtInTransition.MakeLinear(linear);Ease._AddEase(name,(t,sv,dv,tt)=>\nbuiltInTransition.Interpolate(t,sv,dv,tt),\"predefined\")}else throw new Error(\"unexpected arguments\");}static _AddPrivateCustomEase(name,func){Ease._AddEase(name,func,\"private\")}static AddCustomEase(name,func,project){this._CreateEaseMap();Ease._AddEase(name,func,\"custom\",project)}static RemoveCustomEase(name,project){if(this.IsNamePredefined(name))return;if([...PRIVATE_EASE_MAP.keys()].includes(name))return;const customEaseMap=CUSTOM_EASE_EDITOR_MAP.get(project);if(customEaseMap)customEaseMap.delete(name)}static _AddEase(name,\nfunc,mode,project){switch(mode){case \"predefined\":{EASE_MAP.set(name,func);PREDEFINED_EASE_MAP.set(name,func);break}case \"custom\":{if(project){if(!CUSTOM_EASE_EDITOR_MAP.has(project))CUSTOM_EASE_EDITOR_MAP.set(project,new Map);const customEaseMap=CUSTOM_EASE_EDITOR_MAP.get(project);customEaseMap.set(name,func)}else CUSTOM_EASE_RUNTIME_MAP.set(name,func);break}case \"private\":{EASE_MAP.set(name,func);PRIVATE_EASE_MAP.set(name,func);break}default:throw new Error(\"unexpected ease mode\");}}static NoEase(t,\nb,c,d){return c*t/d+b}static EaseInQuad(t,b,c,d){return c*(t/=d)*t+b}static EaseOutQuad(t,b,c,d){return-c*(t/=d)*(t-2)+b}static EaseInOutQuad(t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b}static EaseInCubic(t,b,c,d){return c*(t/=d)*t*t+b}static EaseOutCubic(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b}static EaseInOutCubic(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b}static EaseInQuart(t,b,c,d){return c*(t/=d)*t*t*t+b}static EaseOutQuart(t,b,c,d){return-c*((t=\nt/d-1)*t*t*t-1)+b}static EaseInOutQuart(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b}static EaseInQuint(t,b,c,d){return c*(t/=d)*t*t*t*t+b}static EaseOutQuint(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b}static EaseInOutQuint(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b}static EaseInSine(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b}static EaseOutSine(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b}static EaseInOutSine(t,b,c,d){return-c/2*\n(Math.cos(Math.PI*t/d)-1)+b}static EaseInExpo(t,b,c,d){return t===0?b:c*Math.pow(2,10*(t/d-1))+b}static EaseOutExpo(t,b,c,d){return t===d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b}static EaseInOutExpo(t,b,c,d){if(t===0)return b;if(t===d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b}static EaseInCirc(t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b}static EaseOutCirc(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b}static EaseInOutCirc(t,b,c,d){if((t/=d/2)<1)return-c/\n2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b}static EaseInElastic(t,b,c,d){let s=1.70158;let p=0;let a=c;if(t===0)return b;if((t/=d)===1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;s=p/4}else s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b}static EaseOutElastic(t,b,c,d){let s=1.70158;let p=0;let a=c;if(t===0)return b;if((t/=d)===1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;s=p/4}else s=p/(2*Math.PI)*Math.asin(c/a);return a*\nMath.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b}static EaseInOutElastic(t,b,c,d){let s=1.70158;let p=0;let a=c;if(t===0)return b;if((t/=d/2)===2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;s=p/4}else s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b}static EaseInBack(t,b,c,d,s){if(s===undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b}static EaseOutBack(t,\nb,c,d,s){if(s===undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b}static EaseInOutBack(t,b,c,d,s){if(s===undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=1.525)+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b}static EaseInBounce(t,b,c,d){return c-Ease.EaseOutBounce(d-t,0,c,d)+b}static EaseOutBounce(t,b,c,d){if((t/=d)<1/2.75)return c*(7.5625*t*t)+b;else if(t<2/2.75)return c*(7.5625*(t-=1.5/2.75)*t+.75)+b;else if(t<2.5/2.75)return c*(7.5625*(t-=2.25/2.75)*t+.9375)+b;else return c*\n(7.5625*(t-=2.625/2.75)*t+.984375)+b}static EaseInOutBounce(t,b,c,d){if(t<d/2)return Ease.EaseInBounce(t*2,0,c,d)*.5+b;return Ease.EaseOutBounce(t*2-d,0,c,d)*.5+c*.5+b}static EaseCubicBezier(t,p0,p1,p2,p3){const _0=p0;const _1=3*t*(p1-p0);const _2=3*t**2*(p0+p2-2*p1);const _3=t**3*(p3-p0+3*p1-3*p2);return _0+_1+_2+_3}static EaseSpline(t,sx,sy,x1,y1,x2,y2,ex,ey,samples){if(x1===y1&&x2===y2)return t;const tx=get_t_for_x(t,sx,x1,x2,ex,samples);const va=a(sy,y1,y2,ey);const vb=b(sy,y1,y2,ey);const vc=\nc(sy,y1,y2,ey);return calc_bezier(tx,va,vb,vc)}static GetBezierSamples(startx,a1x,a2x,endx){const ret=[];const va=a(startx,a1x,a2x,endx);const vb=b(startx,a1x,a2x,endx);const vc=c(startx,a1x,a2x,endx);for(let i=0;i<SAMPLE_COUNT;++i){const sample=calc_bezier(i*SAMPLE_STEP,va,vb,vc);ret.push(sample)}return ret}};const SAMPLE_COUNT=11;const SAMPLE_STEP=1/(SAMPLE_COUNT-1);const NEWTON_RAPHSON_ITERATIONS=4;const NEWTON_RAPHSON_MIN_SLOPE=.01;const SUBDIVISION_PRECISION=1E-7;\nconst SUBDIVISION_MAX_ITERATIONS=10;const a=(p0,p1,p2,p3)=>{return p3-3*p2+3*p1-p0};const b=(p0,p1,p2,p3)=>{return 3*p2-6*p1+3*p0};const c=(p0,p1,p2,p3)=>{return 3*(p1-p0)};const calc_bezier=(aT,a,b,c)=>{return((a*aT+b)*aT+c)*aT};const get_slope=(aT,a,b,c)=>{return 3*a*aT*aT+2*b*aT+c};\nconst get_t_for_x=(aX,p0,p1,p2,p3,samples)=>{if(aX==1)return 1;let intervalStart=0;let currentSampleIndex=1;let currentSampleValue=samples[currentSampleIndex];let lastSampleIndex=SAMPLE_COUNT-1;let lastSampleValue=samples[SAMPLE_COUNT-1];while(currentSampleIndex!=lastSampleIndex&&currentSampleValue<=aX){currentSampleIndex++;currentSampleValue=samples[currentSampleIndex];intervalStart+=SAMPLE_STEP}currentSampleIndex--;currentSampleValue=samples[currentSampleIndex];const dist=(aX-currentSampleValue)/\n(samples[currentSampleIndex+1]-currentSampleValue);let guess=intervalStart+dist*SAMPLE_STEP;const va=a(p0,p1,p2,p3);const vb=b(p0,p1,p2,p3);const vc=c(p0,p1,p2,p3);const initSlope=get_slope(guess,va,vb,vc);if(initSlope===0)return guess;else if(initSlope>=NEWTON_RAPHSON_MIN_SLOPE){for(let i=0;i<NEWTON_RAPHSON_ITERATIONS;++i){const x=calc_bezier(guess,va,vb,vc)-aX;const slope=get_slope(guess,va,vb,vc);guess-=x/slope}return guess}else{let aA=intervalStart;let aB=intervalStart+SAMPLE_STEP;let i=0;let precissionLimit;\nlet maxIterations;do{guess=aA+(aB-aA)/2;let x=calc_bezier(guess,va,vb,vc)-aX;if(x>0)aB=guess;else aA=guess;precissionLimit=Math.abs(x)>SUBDIVISION_PRECISION;maxIterations=++i<SUBDIVISION_MAX_ITERATIONS}while(precissionLimit&&maxIterations);return guess}};\n\n}\n\n// ../lib/misc/probability.js\n{\n'use strict';const C3=self.C3;function RequireStringOrNumber(value){if(!C3.IsString(value));}\nC3.ProbabilityTable=class ProbabilityTable{constructor(name){this._items=[];this._name=name||\"\";this._totalWeight=0}Release(){this.Clear();this._items=null}GetName(){return this._name}Clear(){C3.clear2DArray(this._items);this._totalWeight=0}GetTotalWeight(){return this._totalWeight}Sample(t=Math.random()*this.GetTotalWeight()){let sumWeight=0;for(const [weight,value]of this._items){sumWeight+=weight;if(t<sumWeight)return value}return 0}AddItem(weight,value){RequireStringOrNumber(value);this._totalWeight+=\nweight;this._items.push([weight,value])}RemoveItem(weight,value){RequireStringOrNumber(value);const ignoreWeight=weight===0;for(let i=0;i<this._items.length;i++){const item=this._items[i];const doesWeightMatch=ignoreWeight||item[0]===weight;const doesValueMatch=item[1]===value;if(doesWeightMatch&&doesValueMatch){this._items.splice(i,1);this._totalWeight-=item[0];break}}}asJSON(){return JSON.stringify(this._items)}static fromJSON(str){const table=new C3.ProbabilityTable;const items=JSON.parse(str);\nfor(const item of items){const weight=item[0];const value=item[1];table.AddItem(weight,value)}return table}};\n\n}\n\n// lib/misc/screenReaderText.js\n{\n'use strict';const C3=self.C3;let nextId=0;\nC3.ScreenReaderText=class ScreenReaderText{constructor(runtime,text){this._runtime=runtime;this._text=text;this._id=nextId++;this._runtime.PostComponentMessageToDOM(\"runtime\",\"screen-reader-text\",{\"type\":\"create\",\"id\":this._id,\"text\":this._text})}Release(){this._runtime.PostComponentMessageToDOM(\"runtime\",\"screen-reader-text\",{\"type\":\"release\",\"id\":this._id});this._runtime=null;this._text=\"\";this._id=-1}SetText(text){if(this._text===text)return;this._text=text;this._runtime.PostComponentMessageToDOM(\"runtime\",\n\"screen-reader-text\",{\"type\":\"update\",\"id\":this._id,\"text\":this._text})}};\n\n}\n\n// ../lib/events/event.js\n{\n'use strict';const C3=self.C3;\nC3.Event=class Event{constructor(type,cancelable){this.type=type;this.cancelable=!!cancelable;this.defaultPrevented=false;this.propagationStopped=false;this.isAsync=false}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=true}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.isAsync)throw new Error(`cannot stop async event '${this.type}' propagation`);this.propagationStopped=true}};\n\n}\n\n// ../lib/events/handler.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;\nC3.Event.Handler=class EventHandler extends C3.DefendedBase{constructor(type){super();this._type=type;this._captureListeners=[];this._captureListenersSet=new Set;this._listeners=[];this._listenersSet=new Set;this._fireDepth=0;this._queueModifyListeners=[]}Release(){if(this._fireDepth>0)return;C3.clearArray(this._captureListeners);this._captureListenersSet.clear();C3.clearArray(this._listeners);this._listenersSet.clear();C3.clearArray(this._queueModifyListeners);C3.Release(this)}_AddListener(func,\ncapture){if(this._IsFiring()){this._queueModifyListeners.push({op:\"add\",func,capture});return}if(capture){if(this._captureListenersSet.has(func))return;this._captureListeners.push(func);this._captureListenersSet.add(func)}else{if(this._listenersSet.has(func))return;this._listeners.push(func);this._listenersSet.add(func)}}_RemoveListener(func,capture){if(this._IsFiring()){this._queueModifyListeners.push({op:\"remove\",func,capture});return}if(capture){if(this._captureListenersSet.has(func)){this._captureListenersSet.delete(func);\nC3.arrayFindRemove(this._captureListeners,func)}}else if(this._listenersSet.has(func)){this._listenersSet.delete(func);C3.arrayFindRemove(this._listeners,func)}}_IsEmpty(){return!this._captureListeners.length&&!this._listeners.length}_IsFiring(){return this._fireDepth>0}_ProcessQueuedListeners(){const removeListenersSet=new Set;const removeCaptureListenersSet=new Set;for(const q of this._queueModifyListeners)if(q.op===\"add\"){this._AddListener(q.func,q.capture);if(q.capture)removeCaptureListenersSet.delete(q.func);\nelse removeListenersSet.delete(q.func)}else if(q.op===\"remove\")if(q.capture){this._captureListenersSet.delete(q.func);removeCaptureListenersSet.add(q.func)}else{this._listenersSet.delete(q.func);removeListenersSet.add(q.func)}else throw new Error(\"invalid op\");C3.arrayRemoveAllInSet(this._listeners,removeListenersSet);C3.arrayRemoveAllInSet(this._captureListeners,removeCaptureListenersSet);C3.clearArray(this._queueModifyListeners)}_FireCancellable(event){this._IncreaseFireDepth();let isStopped=false;\nfor(let i=0,len=this._captureListeners.length;i<len;++i){this._captureListeners[i](event);if(event.propagationStopped){isStopped=true;break}}if(!isStopped)for(let i=0,len=this._listeners.length;i<len;++i){this._listeners[i](event);if(event.propagationStopped)break}this._DecreaseFireDepth();return!event.defaultPrevented}_FireNonCancellable(event){this._IncreaseFireDepth();for(let i=0,len=this._captureListeners.length;i<len;++i)this._captureListeners[i](event);for(let i=0,len=this._listeners.length;i<\nlen;++i)this._listeners[i](event);this._DecreaseFireDepth();return true}_IncreaseFireDepth(){this._fireDepth++}_DecreaseFireDepth(){this._fireDepth--;if(this._fireDepth===0&&this._queueModifyListeners.length>0)this._ProcessQueuedListeners()}SetDelayRemoveEventsEnabled(e){if(e)this._IncreaseFireDepth();else this._DecreaseFireDepth()}_FireAsync(event){let callbackPromises=[];for(let i=0,len=this._captureListeners.length;i<len;++i){let func=this._captureListeners[i];callbackPromises.push(C3.Asyncify(()=>\nfunc(event)))}for(let i=0,len=this._listeners.length;i<len;++i){let func=this._listeners[i];callbackPromises.push(C3.Asyncify(()=>func(event)))}return Promise.all(callbackPromises).then(()=>!event.defaultPrevented)}_FireAndWait_AsyncOptional(event){const results=[];this._IncreaseFireDepth();for(let i=0,len=this._captureListeners.length;i<len;++i){const ret=this._captureListeners[i](event);if(ret instanceof Promise)results.push(ret)}for(let i=0,len=this._listeners.length;i<len;++i){const ret=this._listeners[i](event);\nif(ret instanceof Promise)results.push(ret)}this._DecreaseFireDepth();if(results.length)return Promise.all(results).then(()=>!event.defaultPrevented);else return!event.defaultPrevented}async _FireAndWaitAsync(event){return await this._FireAndWait_AsyncOptional(event)}async _FireAndWaitAsyncSequential(event){this._IncreaseFireDepth();for(let i=0,len=this._captureListeners.length;i<len;++i){const ret=this._captureListeners[i](event);if(ret instanceof Promise)await ret}for(let i=0,len=this._listeners.length;i<\nlen;++i){const ret=this._listeners[i](event);if(ret instanceof Promise)await ret}this._DecreaseFireDepth();return!event.defaultPrevented}*_FireAsGenerator(event){this._IncreaseFireDepth();for(let i=0,len=this._captureListeners.length;i<len;++i){const ret=this._captureListeners[i](event);if(C3.IsIterator(ret))yield*ret}for(let i=0,len=this._listeners.length;i<len;++i){const ret=this._listeners[i](event);if(C3.IsIterator(ret))yield*ret}this._DecreaseFireDepth()}};\n\n}\n\n// ../lib/events/dispatcher.js\n{\n'use strict';const C3=self.C3;\nC3.Event.Dispatcher=class EventDispatcher extends C3.DefendedBase{constructor(){super();this._eventHandlers=new Map;this._dispatcherWasReleased=false}Release(){if(this._dispatcherWasReleased)throw new Error(\"already released\");this.ClearEvents();this._dispatcherWasReleased=true;C3.Release(this)}WasReleased(){return this._dispatcherWasReleased}ClearEvents(){for(let handler of this._eventHandlers.values())handler.Release();this._eventHandlers.clear()}_GetHandlerByType(type,create_if_missing){let handler=\nthis._eventHandlers.get(type);if(handler)return handler;if(create_if_missing){handler=C3.New(C3.Event.Handler,type);this._eventHandlers.set(type,handler);return handler}return null}HasAnyHandlerFor(type){return this._eventHandlers.has(type)}addEventListener(type,func,capture){let handler=this._GetHandlerByType(type,true);handler._AddListener(func,!!capture)}removeEventListener(type,func,capture){let handler=this._GetHandlerByType(type,false);if(!handler)return;handler._RemoveListener(func,!!capture);\nif(handler._IsEmpty())this._eventHandlers.delete(type)}dispatchEvent(event){const handler=this._GetHandlerByType(event.type,false);if(!handler)return true;if(event.cancelable)return handler._FireCancellable(event);else return handler._FireNonCancellable(event)}dispatchEventAsync(event){const handler=this._GetHandlerByType(event.type,false);if(!handler)return Promise.resolve(true);event.isAsync=true;return handler._FireAsync(event)}async dispatchEventAndClearAsync(event){const handler=this._GetHandlerByType(event.type,\nfalse);if(!handler)return true;this._eventHandlers.delete(event.type);event.isAsync=true;const ret=await handler._FireAsync(event);handler.Release();return ret}async dispatchEventAndWaitAsync(event){const handler=this._GetHandlerByType(event.type,false);if(!handler)return true;return await handler._FireAndWaitAsync(event)}dispatchEventAndWait_AsyncOptional(event){const handler=this._GetHandlerByType(event.type,false);if(!handler)return true;return handler._FireAndWait_AsyncOptional(event)}async dispatchEventAndWaitAsyncSequential(event){const handler=\nthis._GetHandlerByType(event.type,false);if(!handler)return true;return await handler._FireAndWaitAsyncSequential(event)}dispatchGeneratorEvent(event){const handler=this._GetHandlerByType(event.type,false);if(!handler)return null;if(event.cancelable)throw new Error(\"not supported\");else return handler._FireAsGenerator(event)}SetDelayRemoveEventsEnabled(e){for(const handler of this._eventHandlers.values())handler.SetDelayRemoveEventsEnabled(e)}};\n\n}\n\n// ../lib/util/asyncify.js\n{\n'use strict';const C3=self.C3;const SETTIMEOUT_WORK_DURATION=12;const SETTIMEOUT_INTERVAL=16;const IDLECALLBACK_TIMEOUT=35;const SUPPORTS_RIC=typeof requestIdleCallback!==\"undefined\";let workQueue=[];let callbackId=-1;let highThroughputMode=0;function SetNewCallback(timerTimeout){if(SUPPORTS_RIC&&highThroughputMode===0)callbackId=requestIdleCallback(DoAsyncifiedWork,{timeout:IDLECALLBACK_TIMEOUT});else callbackId=setTimeout(DoAsyncifiedWork,highThroughputMode>0?1:timerTimeout)}\nfunction DoAsyncifiedWork(deadline){callbackId=-1;if(!workQueue.length)return;let startTime=performance.now();let curTime=startTime;let jobCount=0;let estimatedNextJobDuration=0;do{DoNextAsyncifiedJob(workQueue.shift());curTime=performance.now();++jobCount;estimatedNextJobDuration=(curTime-startTime)/jobCount*1.1}while(workQueue.length&&(SUPPORTS_RIC&&highThroughputMode===0&&typeof deadline!==\"undefined\"?estimatedNextJobDuration<deadline[\"timeRemaining\"]():curTime-startTime+estimatedNextJobDuration<\nSETTIMEOUT_WORK_DURATION));if(callbackId===-1&&workQueue.length){let workDuration=curTime-startTime;let timeout=Math.max(SETTIMEOUT_INTERVAL-workDuration,4);SetNewCallback(timeout)}}function DoNextAsyncifiedJob(w){let ret;try{ret=w.func()}catch(e){w.reject(e);return}w.resolve(ret)}let asyncifyDisabled=C3.QueryString.Has(\"disable-asyncify\");if(asyncifyDisabled)console.warn(\"[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously.\");\nC3.Asyncify=function Asyncify(func){let stack=null;if(C3.isDebug)stack=C3.GetCallStack();return new Promise((resolve,reject)=>{workQueue.push({func:func,resolve:resolve,reject:reject,stack:stack});if(asyncifyDisabled){DoNextAsyncifiedJob(workQueue.pop());return}if(callbackId===-1)SetNewCallback(SETTIMEOUT_INTERVAL)})};\nC3.Asyncify.SetHighThroughputMode=function SetHighThroughputMode(m){if(m)++highThroughputMode;else{--highThroughputMode;if(highThroughputMode<0)throw new Error(\"already turned off high throughput mode\");}};\n\n}\n\n// ../lib/util/idleTimeout.js\n{\n'use strict';const C3=self.C3;const IDLE_CHECK_MIN_INTERVAL=1E3;const IDLE_CHECK_TIMER_OVERSHOOT=100;let cachedNowTime=-1;function ClearTimeCache(){cachedNowTime=-1}C3.FastGetDateNow=function FastGetDateNow(){if(cachedNowTime===-1){cachedNowTime=Date.now();self.setTimeout(ClearTimeCache,16)}return cachedNowTime};let timerId=-1;let nextDeadline=-1;let activeIdleTimeouts=new Set;\nfunction CheckActiveIdleTimeouts(){timerId=-1;nextDeadline=-1;let nowTime=Date.now();for(let i of activeIdleTimeouts)if(i._CheckTimeout(nowTime)){let deadline=i._GetDeadline();if(nextDeadline===-1||deadline<nextDeadline)nextDeadline=deadline}else activeIdleTimeouts.delete(i);if(nextDeadline!==-1){let duration=Math.max(nextDeadline-nowTime+IDLE_CHECK_TIMER_OVERSHOOT,IDLE_CHECK_MIN_INTERVAL);timerId=self.setTimeout(CheckActiveIdleTimeouts,duration)}}\nC3.IdleTimeout=class IdleTimeout{constructor(callback,timeoutInSeconds){this._callback=callback;this._timeout=timeoutInSeconds*1E3;this._deadline=0;this._isActive=false}Reset(){let nowTime=C3.FastGetDateNow();this._deadline=nowTime+this._timeout;if(!this._isActive){activeIdleTimeouts.add(this);this._isActive=true}if(timerId===-1){nextDeadline=this._deadline;timerId=self.setTimeout(CheckActiveIdleTimeouts,this._timeout+IDLE_CHECK_TIMER_OVERSHOOT)}else if(this._deadline<nextDeadline&&nextDeadline>nowTime+\nIDLE_CHECK_MIN_INTERVAL){self.clearTimeout(timerId);nextDeadline=this._deadline;timerId=self.setTimeout(CheckActiveIdleTimeouts,this._timeout+IDLE_CHECK_TIMER_OVERSHOOT)}}_CheckTimeout(nowTime){if(nowTime>=this._deadline){if(this._callback()){this._deadline=nowTime+this._timeout;return true}this._isActive=false;return false}return true}_GetDeadline(){return this._deadline}Cancel(){if(this._isActive){activeIdleTimeouts.delete(this);this._isActive=false;if(activeIdleTimeouts.size===0&&timerId!==-1){self.clearTimeout(timerId);\ntimerId=-1;nextDeadline=-1}}}Release(){this.Cancel();this._callback=null}};\n\n}\n\n// ../lib/util/disposable.js\n{\n'use strict';const C3=self.C3;\nC3.Disposable=class Disposable{constructor(disposeAction){this._disposed=false;this._disposeAction=disposeAction}Dispose(){if(this._disposed)return;this._disposed=true;if(this._disposeAction){this._disposeAction();this._disposeAction=null}}IsDisposed(){return this._disposed}Release(){this.Dispose()}static Release(instance){return new Disposable(()=>instance.Release())}static From(eventDispatcher,eventNames,eventHandler,opts,scope){if(typeof opts===\"undefined\"||opts===null)opts=false;else if(typeof opts!==\n\"boolean\"&&typeof opts!==\"object\")throw new TypeError(\"invalid event listener options\");if(scope)eventHandler=eventHandler.bind(scope);if(eventNames.includes(\" \")){eventNames=eventNames.split(\" \");const disposable=new C3.CompositeDisposable;for(let eventName of eventNames){eventDispatcher.addEventListener(eventName,eventHandler,opts);disposable.Add(C3.New(C3.Disposable,()=>eventDispatcher.removeEventListener(eventName,eventHandler,opts)))}return disposable}else{eventDispatcher.addEventListener(eventNames,\neventHandler,opts);return C3.New(C3.Disposable,()=>eventDispatcher.removeEventListener(eventNames,eventHandler,opts))}}};C3.StubDisposable=class StubDisposable extends C3.Disposable{SetAction(disposeAction){this._disposeAction=disposeAction}};\nC3.CompositeDisposable=class CompositeDisposable extends C3.Disposable{constructor(...disposables){super();this._disposables=new Set;for(let disposable of disposables)this.Add(disposable)}Add(...disposables){if(this._disposed)throw new Error(\"already disposed\");for(let disposable of disposables)this._disposables.add(disposable)}Remove(disposable){if(this._disposed)throw new Error(\"already disposed\");this._disposables.delete(disposable)}RemoveAll(){if(this._disposed)throw new Error(\"already disposed\");\nif(!this._disposables)return;for(let disposable of this._disposables)disposable.Dispose();this._disposables.clear()}IsDisposed(){return this._disposed}Dispose(){if(this._disposed)throw new Error(\"already disposed\");this._disposed=true;for(let disposable of this._disposables)disposable.Dispose();this._disposables.clear();this._disposables=null}Release(){this.Dispose()}};\n\n}\n\n// lib/util/kahanSum.js\n{\n'use strict';const C3=self.C3;C3.KahanSum=class KahanSum extends C3.DefendedBase{constructor(){super();this._c=0;this._y=0;this._t=0;this._sum=0}Add(v){v=+v;this._y=v-this._c;this._t=this._sum+this._y;this._c=this._t-this._sum-this._y;this._sum=this._t}Subtract(v){this._sum-=+v}Get(){return this._sum}Reset(){this._c=0;this._y=0;this._t=0;this._sum=0}Set(s){this._c=0;this._y=0;this._t=0;this._sum=+s}Copy(ks){this._c=ks._c;this._y=ks._y;this._t=ks._t;this._sum=ks._sum}Release(){}};\n\n}\n\n// lib/util/redblackset.js\n{\n'use strict';const C3=self.C3;const js_cols={};const RED=true;const BLACK=false;js_cols.RBnode=function(tree){this.tree=tree;this.right=this.tree.sentinel;this.left=this.tree.sentinel;this.parent=null;this.color=false;this.key=null};js_cols.RedBlackSet=function(compare_func){this.size=0;this.sentinel=new js_cols.RBnode(this);this.sentinel.color=BLACK;this.root=this.sentinel;this.root.parent=this.sentinel;this.compare=compare_func||this.default_compare};\njs_cols.RedBlackSet.prototype.default_compare=function(a,b){if(a<b)return-1;else if(b<a)return 1;else return 0};js_cols.RedBlackSet.prototype.clone=function(){var rv=new js_cols.RedBlackSet(this.compare);rv.insertAll(this);return rv};js_cols.RedBlackSet.prototype.clear=function(){this.size=0;this.sentinel=new js_cols.RBnode(this);this.sentinel.color=BLACK;this.root=this.sentinel;this.root.parent=this.sentinel};\njs_cols.RedBlackSet.prototype.leftRotate=function(x){var y=x.right;x.right=y.left;if(y.left!=this.sentinel)y.left.parent=x;y.parent=x.parent;if(x.parent==this.sentinel)this.root=y;else if(x==x.parent.left)x.parent.left=y;else x.parent.right=y;y.left=x;x.parent=y};\njs_cols.RedBlackSet.prototype.rightRotate=function(x){var y=x.left;x.left=y.right;if(y.right!=this.sentinel)y.right.parent=x;y.parent=x.parent;if(x.parent==this.sentinel)this.root=y;else if(x==x.parent.right)x.parent.right=y;else x.parent.left=y;y.right=x;x.parent=y};\njs_cols.RedBlackSet.prototype.insert=function(key){if(!this.contains(key)){var z=new js_cols.RBnode(this);z.key=key;var y=this.sentinel;var x=this.root;while(x!=this.sentinel){y=x;if(this.compare(z.key,x.key)<0)x=x.left;else x=x.right}z.parent=y;if(y==this.sentinel)this.root=z;else if(this.compare(z.key,y.key)<0)y.left=z;else y.right=z;z.left=this.sentinel;z.right=this.sentinel;z.color=RED;this.insertFixup(z);this.size++}else{var node=this.get_(key);node.key=key}};\njs_cols.RedBlackSet.prototype.insertFixup=function(z){while(z!=this.sentinel&&z!=this.root&&z.parent.color==RED)if(z.parent==z.parent.parent.left){var y=z.parent.parent.right;if(y.color==RED){z.parent.color=BLACK;y.color=BLACK;z.parent.parent.color=RED;z=z.parent.parent}else{if(z==z.parent.right){z=z.parent;this.leftRotate(z)}z.parent.color=BLACK;z.parent.parent.color=RED;if(z.parent.parent!=this.sentinel)this.rightRotate(z.parent.parent)}}else{var y=z.parent.parent.left;if(y.color==RED){z.parent.color=\nBLACK;y.color=BLACK;z.parent.parent.color=RED;z=z.parent.parent}else{if(z==z.parent.left){z=z.parent;this.rightRotate(z)}z.parent.color=BLACK;z.parent.parent.color=RED;if(z.parent.parent!=this.sentinel)this.leftRotate(z.parent.parent)}}this.root.color=BLACK};\njs_cols.RedBlackSet.prototype.delete_=function(z){var y;var x;if(z.left==this.sentinel||z.right==this.sentinel)y=z;else y=this.successor_(z);if(y.left!=this.sentinel)x=y.left;else x=y.right;x.parent=y.parent;if(y.parent==this.sentinel)this.root=x;else if(y==y.parent.left)y.parent.left=x;else y.parent.right=x;if(y!=z)z.key=y.key;if(y.color==BLACK)this.deleteFixup(x);this.size--};\njs_cols.RedBlackSet.prototype.deleteFixup=function(x){while(x!=this.root&&x.color==BLACK)if(x==x.parent.left){var w=x.parent.right;if(w.color==RED){w.color=BLACK;x.parent.color=RED;this.leftRotate(x.parent);w=x.parent.right}if(w.left.color==BLACK&&w.right.color==BLACK){w.color=RED;x=x.parent}else{if(w.right.color==BLACK){w.left.color=BLACK;w.color=RED;this.rightRotate(w);w=x.parent.right}w.color=x.parent.color;x.parent.color=BLACK;w.right.color=BLACK;this.leftRotate(x.parent);x=this.root}}else{var w=\nx.parent.left;if(w.color==RED){w.color=BLACK;x.parent.color=RED;this.rightRotate(x.parent);w=x.parent.left}if(w.right.color==BLACK&&w.left.color==BLACK){w.color=RED;x=x.parent}else{if(w.left.color==BLACK){w.right.color=BLACK;w.color=RED;this.leftRotate(w);w=x.parent.left}w.color=x.parent.color;x.parent.color=BLACK;w.left.color=BLACK;this.rightRotate(x.parent);x=this.root}}x.color=BLACK};\njs_cols.RedBlackSet.prototype.remove=function(key){var x=this.get_(key);if(x!=this.sentinel){var retval=x.key;this.delete_(x);return retval}else return null};js_cols.RedBlackSet.prototype.removeSwapped=function(value,key){this.remove(key)};js_cols.RedBlackSet.prototype.min=function(x){while(x.left!=this.sentinel)x=x.left;return x};js_cols.RedBlackSet.prototype.max=function(x){while(x.right!=this.sentinel)x=x.right;return x};\njs_cols.RedBlackSet.prototype.successor_=function(x){if(x.right!=this.sentinel)return this.min(x.right);var y=x.parent;while(y!=this.sentinel&&x==y.right){x=y;y=y.parent}return y};js_cols.RedBlackSet.prototype.predeccessor_=function(x){if(x.left!=this.sentinel)return this.max(x.left);var y=x.parent;while(y!=this.sentinel&&x==y.left){x=y;y=y.parent}return y};\njs_cols.RedBlackSet.prototype.successor=function(key){if(this.size>0){var x=this.get_(key);if(x==this.sentinel)return null;if(x.right!=this.sentinel)return this.min(x.right).key;var y=x.parent;while(y!=this.sentinel&&x==y.right){x=y;y=y.parent}if(y!=this.sentinel)return y.key;else return null}else return null};\njs_cols.RedBlackSet.prototype.predecessor=function(key){if(this.size>0){var x=this.get_(key);if(x==this.sentinel)return null;if(x.left!=this.sentinel)return this.max(x.left).key;var y=x.parent;while(y!=this.sentinel&&x==y.left){x=y;y=y.parent}if(y!=this.sentinel)return y.key;else return null}else return null};js_cols.RedBlackSet.prototype.getMin=function(){return this.min(this.root).key};js_cols.RedBlackSet.prototype.getMax=function(){return this.max(this.root).key};\njs_cols.RedBlackSet.prototype.get_=function(key){var x=this.root;while(x!=this.sentinel&&this.compare(x.key,key)!=0)if(this.compare(key,x.key)<0)x=x.left;else x=x.right;return x};js_cols.RedBlackSet.prototype.contains=function(key){return this.get_(key).key!=null};js_cols.RedBlackSet.prototype.getValues=function(){var ret=[];this.forEach(function(x){ret.push(x)});return ret};\njs_cols.RedBlackSet.prototype.insertAll=function(col){if(js_cols.typeOf(col)==\"array\")for(var i=0;i<col.length;i++)this.insert(col[i]);else if(js_cols.typeOf(col.forEach)==\"function\")col.forEach(this.insert,this);else if(js_cols.typeOf(col.getValues)==\"function\"){var arr=col.getValues();for(var i=0;i<arr.length;i++)this.insert(arr[i])}else if(js_cols.typeOf(col)==\"object\")for(var key in col)this.insert(col[key])};\njs_cols.RedBlackSet.prototype.removeAll=function(col){if(js_cols.typeOf(col)==\"array\")for(var i=0;i<col.length;i++)this.remove(col[i]);else if(js_cols.typeOf(col.forEach)==\"function\")col.forEach(this.removeSwapped,this);else if(js_cols.typeOf(col.getValues)==\"function\"){var arr=col.getValues();for(var i=0;i<arr.length;i++)this.remove(arr[i])}else if(js_cols.typeOf(col)==\"object\")for(var key in col)this.remove(col[key])};\njs_cols.RedBlackSet.prototype.containsAll=function(col){if(js_cols.typeOf(col)==\"array\"){for(var i=0;i<col.length;i++)if(!this.contains(col[i]))return false;return true}else if(js_cols.typeOf(col.forEach)==\"function\")return col.every(this.contains,this);else if(js_cols.typeOf(col.getValues)==\"function\"){var arr=col.getValues();for(var i=0;i<arr.length;i++)if(!this.contains(arr[i]))return false;return true}else if(js_cols.typeOf(col)==\"object\"){for(var key in col)if(!this.contains(col[key]))return false;\nreturn true}};js_cols.RedBlackSet.prototype.range=function(from,to){var retArray=[];this.traverseFromTo(function(x){retArray.push(x)},from,to);return retArray};js_cols.RedBlackSet.prototype.traverse=function(f,opt_obj){if(this.isEmpty())return;var node=this.min(this.root);while(node!=this.sentinel){if(f.call(opt_obj,node.key,this))return;node=this.successor_(node)}};\njs_cols.RedBlackSet.prototype.traverseFrom=function(f,fromKey,opt_obj){if(this.isEmpty())return;var node=this.get_(fromKey);while(node!=this.sentinel){if(f.call(opt_obj,node.key,this))return;node=this.successor_(node)}};js_cols.RedBlackSet.prototype.traverseTo=function(f,toKey,opt_obj){if(this.isEmpty())return;var node=this.min(this.root);var toNode=this.get_(toKey);while(node!=toNode){if(f.call(opt_obj,node.key,this))return;node=this.successor_(node)}};\njs_cols.RedBlackSet.prototype.traverseFromTo=function(f,fromKey,toKey,opt_obj){if(this.isEmpty())return;var node=this.get_(fromKey);var toNode=this.get_(toKey);while(node!=toNode){if(f.call(opt_obj,node.key,this))return;node=this.successor_(node)}};js_cols.RedBlackSet.prototype.traverseBackwards=function(f,opt_obj){if(this.isEmpty())return;var node=this.max(this.root);while(node!=this.sentinel){if(f.call(opt_obj,node.key,this))return;node=this.predeccessor_(node)}};\njs_cols.RedBlackSet.prototype.forEach=function(f,opt_obj){if(this.isEmpty())return;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))f.call(opt_obj,n.key,n.key,this)};js_cols.RedBlackSet.prototype.some=function(f,opt_obj){if(this.isEmpty())return false;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))if(f.call(opt_obj,n.key,n.key,this))return true;return false};\njs_cols.RedBlackSet.prototype.every=function(f,opt_obj){if(this.isEmpty())return false;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))if(!f.call(opt_obj,n.key,n.key,this))return false;return true};js_cols.RedBlackSet.prototype.map=function(f,opt_obj){var rv=[];if(this.isEmpty())return rv;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))rv.push(f.call(opt_obj,n.key,n.key,this));return rv};\njs_cols.RedBlackSet.prototype.filter=function(f,opt_obj){var rv=[];if(this.isEmpty())return rv;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))if(f.call(opt_obj,n.key,n.key,this))rv.push(n.key);return rv};js_cols.RedBlackSet.prototype.getCount=function(){return this.size};js_cols.RedBlackSet.prototype.isEmpty=function(){return this.size==0};\njs_cols.RedBlackSet.prototype.isSubsetOf=function(col){var colCount=js_cols.getCount(col);if(this.getCount()>colCount)return false;var i=0;if(this.isEmpty())return true;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))if(js_cols.contains.call(col,col,n.key))i++;return i==this.getCount()};\njs_cols.RedBlackSet.prototype.intersection=function(col){var result=new js_cols.RedBlackSet(this.compare);if(this.isEmpty())return result;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))if(col.contains.call(col,n.key,n.key,this))result.insert(n.key);return result};\nC3.RedBlackSet=class RedBlackSet extends C3.DefendedBase{constructor(sortFunc){super();this._rbSet=new js_cols.RedBlackSet(sortFunc);this._enableQueue=false;this._queueInsert=new Set;this._queueRemove=new Set}Add(item){if(this._enableQueue)if(this._rbSet.contains(item))this._queueRemove.delete(item);else this._queueInsert.add(item);else this._rbSet.insert(item)}Remove(item){if(this._enableQueue)if(this._rbSet.contains(item))this._queueRemove.add(item);else this._queueInsert.delete(item);else this._rbSet.remove(item)}Has(item){if(this._enableQueue){if(this._queueInsert.has(item))return true;\nreturn!this._queueRemove.has(item)&&this._rbSet.contains(item)}else return this._rbSet.contains(item)}Clear(){this._rbSet.clear();this._queueInsert.clear();this._queueRemove.clear()}toArray(){if(this._enableQueue)throw new Error(\"cannot be used in queueing mode\");return this._rbSet.getValues()}GetSize(){return this._rbSet.getCount()+this._queueInsert.size-this._queueRemove.size}IsEmpty(){return this.GetSize()===0}Front(){if(this.IsEmpty())throw new Error(\"empty set\");if(this._enableQueue)throw new Error(\"cannot be used in queueing mode\");\nconst rbSet=this._rbSet;const n=rbSet.min(rbSet.root);return n.key}Shift(){if(this.IsEmpty())throw new Error(\"empty set\");if(this._enableQueue)throw new Error(\"cannot be used in queueing mode\");const item=this.Front();this.Remove(item);return item}SetQueueingEnabled(q){q=!!q;if(this._enableQueue===q)return;this._enableQueue=q;if(!q){for(const item of this._queueRemove)this._rbSet.remove(item);this._queueRemove.clear();for(const item of this._queueInsert)this._rbSet.insert(item);this._queueInsert.clear()}}ForEach(func){this._rbSet.forEach(func)}*values(){if(this.IsEmpty())return;\nconst rbSet=this._rbSet;for(let n=rbSet.min(rbSet.root);n!=rbSet.sentinel;n=rbSet.successor_(n))yield n.key}[Symbol.iterator](){return this.values()}};\n\n}\n\n// ../lib/util/promiseThrottle.js\n{\n'use strict';const C3=self.C3;\nC3.PromiseThrottle=class PromiseThrottle{constructor(maxParallel=C3.hardwareConcurrency){this._maxParallel=maxParallel;this._queue=[];this._activeCount=0}Add(func){return new Promise((resolve,reject)=>{this._queue.push({func,resolve,reject});this._MaybeStartNext()})}_FindInQueue(func){for(let i=0,len=this._queue.length;i<len;++i)if(this._queue[i].func===func)return i;return-1}RemoveAndResolve(func,value){const i=this._FindInQueue(func);if(i===-1)throw new Error(\"cannot find promise to resolve\");this._queue[i].resolve(value);\nthis._queue.splice(i,1)}RemoveAndReject(func,value){const i=this._FindInQueue(func);if(i===-1)throw new Error(\"cannot find promise to reject\");this._queue[i].reject(value);this._queue.splice(i,1)}async _MaybeStartNext(){if(!this._queue.length)return;if(this._activeCount>=this._maxParallel)return;this._activeCount++;const job=this._queue.shift();try{const result=await job.func();job.resolve(result)}catch(err){job.reject(err)}this._activeCount--;this._MaybeStartNext()}static async Batch(concurrency,\nmethods){const results=[];let failed=false;const execute=async _=>{let fn;while(fn=methods.pop()){if(failed)return;try{results.push(await fn())}catch(e){failed=true;throw e;}}};const promises=[];while(concurrency--)promises.push(execute());await Promise.all(promises);return results}};\n\n}\n\n// ../lib/util/rateLimiter.js\n{\n'use strict';const C3=self.C3;\nC3.RateLimiter=class RateLimiter{constructor(callback,interval,intervalOnBattery){this._callback=callback;this._interval=interval;this._intervalOnBattery=intervalOnBattery||interval*2;this._timerId=-1;this._lastCallTime=-Infinity;this._timerCallFunc=()=>this._OnTimer();this._ignoreReset=false;this._canRunImmediate=false;this._callbackArguments=null}SetCanRunImmediate(c){this._canRunImmediate=!!c}_GetInterval(){if(typeof C3.Battery!==\"undefined\"&&C3.Battery.IsOnBatteryPower())return this._intervalOnBattery;else return this._interval}Call(...args){if(this._timerId!==\n-1)return;this._callbackArguments=args;let nowTime=C3.FastGetDateNow();let timeSinceLastCall=nowTime-this._lastCallTime;let interval=this._GetInterval();if(timeSinceLastCall>=interval&&this._canRunImmediate){this._lastCallTime=nowTime;this._RunCallback()}else this._timerId=self.setTimeout(this._timerCallFunc,Math.max(interval-timeSinceLastCall,4))}_RunCallback(){this._ignoreReset=true;const args=this._callbackArguments;this._callbackArguments=null;if(args)this._callback(...args);else this._callback();\nthis._ignoreReset=false}Reset(){if(this._ignoreReset)return;this._CancelTimer();this._callbackArguments=null;this._lastCallTime=C3.FastGetDateNow()}_OnTimer(){this._timerId=-1;this._lastCallTime=C3.FastGetDateNow();this._RunCallback()}_CancelTimer(){if(this._timerId!==-1){self.clearTimeout(this._timerId);this._timerId=-1}}Release(){this._CancelTimer();this._callback=null;this._callbackArguments=null;this._timerCallFunc=null}};\n\n}\n\n// ../lib/util/svgRaster/svgRasterManager.js\n{\n'use strict';const C3=self.C3;\nC3.SVGRasterManager=class SVGRasterManager{constructor(){this._images=new Map;this._allowNpotSurfaces=false;this._getBaseSizeCallback=null;this._rasterAtSizeCallback=null;this._releaseResultCallback=null;this._redrawCallback=null}SetNpotSurfaceAllowed(a){this._allowNpotSurfaces=!!a}IsNpotSurfaceAllowed(){return this._allowNpotSurfaces}SetGetBaseSizeCallback(f){this._getBaseSizeCallback=f}GetBaseSize(dataSource){if(!this._getBaseSizeCallback)throw new Error(\"no get base size callback set\");return this._getBaseSizeCallback(dataSource)}SetRasterAtSizeCallback(f){this._rasterAtSizeCallback=\nf}RasterAtSize(dataSource,context,surfaceWidth,surfaceHeight,imageWidth,imageHeight){if(!this._rasterAtSizeCallback)throw new Error(\"no raster at size callback set\");return this._rasterAtSizeCallback(dataSource,context,surfaceWidth,surfaceHeight,imageWidth,imageHeight)}SetReleaseResultCallback(f){this._releaseResultCallback=f}ReleaseResult(rasterizedResult){if(!this._releaseResultCallback)throw new Error(\"no release result callback set\");this._releaseResultCallback(rasterizedResult)}SetRedrawCallback(f){this._redrawCallback=\nf}Redraw(){if(!this._redrawCallback)throw new Error(\"no redraw callback set\");this._redrawCallback()}AddImage(dataSource){let ret=this._images.get(dataSource);if(!ret){ret=C3.New(C3.SVGRasterImage,this,dataSource);this._images.set(dataSource,ret)}ret.IncReference();return ret}_RemoveImage(ri){this._images.delete(ri.GetDataSource())}OnTexturesChanged(){for(const ri of this._images.values()){ri.ReleaseRasterizedResult();ri.ForceRasterAgain()}}};\n\n}\n\n// ../lib/util/svgRaster/svgRasterImage.js\n{\n'use strict';const C3=self.C3;const MAX_SURFACE_SIZE=4096;\nC3.SVGRasterImage=class SVGRasterImage{constructor(manager,dataSource){this._manager=manager;this._dataSource=dataSource;this._refCount=0;this._baseWidth=0;this._baseHeight=0;this._getBaseSizePromise=this._manager.GetBaseSize(dataSource).then(baseSize=>{if(!this._manager)return;this._baseWidth=baseSize[0];this._baseHeight=baseSize[1];this._manager.Redraw()}).catch(err=>{console.error(\"[SVG] Error loading SVG: \",err);this._hadError=true;if(this._manager)this._manager.Redraw()});this._rasterSurfaceWidth=\n0;this._rasterSurfaceHeight=0;this._rasterImageWidth=0;this._rasterImageHeight=0;this._isRasterizing=false;this._rasterizedResult=null;this._forceRaster=false;this._hadError=false}Release(){if(this._refCount<=0)throw new Error(\"already released\");this._refCount--;if(this._refCount===0)this._Release()}ReleaseRasterizedResult(){if(this._rasterizedResult){this._manager.ReleaseResult(this._rasterizedResult);this._rasterizedResult=null}}_Release(){this.ReleaseRasterizedResult();this._manager._RemoveImage(this);\nthis._manager=null}GetDataSource(){return this._dataSource}IncReference(){this._refCount++}HasReferences(){return this._refCount>0}GetRasterizedResult(){return this._rasterizedResult}ForceRasterAgain(){this._forceRaster=true}async StartRasterForSize(context,width,height){if(width===0||height===0||this._hadError)return;if(this._isRasterizing)return;let rasterSurfaceWidth=C3.nextHighestPowerOfTwo(Math.ceil(width));let rasterSurfaceHeight=C3.nextHighestPowerOfTwo(Math.ceil(height));const maxDim=Math.max(rasterSurfaceWidth,\nrasterSurfaceHeight);if(maxDim>MAX_SURFACE_SIZE){const scale=MAX_SURFACE_SIZE/maxDim;width*=scale;height*=scale;rasterSurfaceWidth=Math.min(Math.ceil(rasterSurfaceWidth*scale),MAX_SURFACE_SIZE);rasterSurfaceHeight=Math.min(Math.ceil(rasterSurfaceHeight*scale),MAX_SURFACE_SIZE)}if(width<rasterSurfaceWidth&&height<rasterSurfaceHeight){const imageAspectRatio=width/height;const surfaceAspectRatio=rasterSurfaceWidth/rasterSurfaceHeight;if(surfaceAspectRatio>imageAspectRatio){width=rasterSurfaceHeight*\nimageAspectRatio;height=rasterSurfaceHeight}else{width=rasterSurfaceWidth;height=rasterSurfaceWidth/imageAspectRatio}}if(this._manager.IsNpotSurfaceAllowed()){rasterSurfaceWidth=Math.ceil(width);rasterSurfaceHeight=Math.ceil(height)}if(rasterSurfaceWidth<=this._rasterSurfaceWidth&&rasterSurfaceHeight<=this._rasterSurfaceHeight&&!this._forceRaster)return;this._isRasterizing=true;this._rasterSurfaceWidth=rasterSurfaceWidth;this._rasterSurfaceHeight=rasterSurfaceHeight;const newRasterizedResult=await this._manager.RasterAtSize(this._dataSource,\ncontext,this._rasterSurfaceWidth,this._rasterSurfaceHeight,width,height);if(!this._manager)return;this.ReleaseRasterizedResult();this._rasterizedResult=newRasterizedResult;this._rasterImageWidth=width;this._rasterImageHeight=height;this._isRasterizing=false;this._forceRaster=false;this._manager.Redraw()}WhenBaseSizeReady(){return this._getBaseSizePromise}GetBaseWidth(){return this._baseWidth}GetBaseHeight(){return this._baseHeight}GetRasterWidth(){return this._rasterImageWidth}GetRasterHeight(){return this._rasterImageHeight}HadError(){return this._hadError}};\n\n}\n\n// ../lib/str/str.js\n{\n'use strict';const C3=self.C3;C3.UTF8_BOM=\"\\ufeff\";const NUMERIC_CHARS=new Set([...\"0123456789\"]);C3.IsNumericChar=function IsNumericChar(c){return NUMERIC_CHARS.has(c)};const WHITESPACE_CHARS=new Set([...\" \\t\\n\\r\\u00a0\\u0085\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u200b\\u2028\\u2029\\u202f\\u205f\\u3000\"]);C3.IsWhitespaceChar=function IsWhitespaceChar(c){return WHITESPACE_CHARS.has(c)};C3.FilterWhitespace=function FilterWhitespace(str){return[...str].filter(ch=>!C3.IsWhitespaceChar(ch)).join(\"\")};\nC3.IsStringAllWhitespace=function IsStringAllWhitespace(str){for(const ch of str)if(!C3.IsWhitespaceChar(ch))return false;return true};C3.IsCharArrayAllWhitespace=function IsStringAllWhitespace(chArr){for(const ch of chArr)if(!C3.IsWhitespaceChar(ch))return false;return true};C3.IsUnprintableChar=function IsUnprintableChar(c){return c.length===1&&c.charCodeAt(0)<32};C3.FilterUnprintableChars=function FilterUnprintableChars(str){return[...str].filter(ch=>!C3.IsUnprintableChar(ch)).join(\"\")};\nconst NUMERIC_STRING_CHARS=new Set([...\"0123456789.+-e\"]);C3.IsStringNumber=function IsStringNumber(str){str=str.trim();if(!str.length)return false;let firstChar=str.charAt(0);if(firstChar!==\"-\"&&!NUMERIC_CHARS.has(firstChar))return false;for(let ch of str)if(!NUMERIC_STRING_CHARS.has(ch))return false;return true};C3.RemoveTrailingDigits=function RemoveTrailingDigits(str){let i=str.length;while(i>0){let prev_ch=str.charAt(i-1);if(!C3.IsNumericChar(prev_ch))break;--i}return str.substr(0,i)};\nC3.IncrementNumberAtEndOf=function IncrementNumberAtEndOf(str){let baseStr=C3.RemoveTrailingDigits(str);let numberStr=str.substr(baseStr.length);if(numberStr)numberStr=(parseInt(numberStr,10)+1).toString();else numberStr=\"2\";return baseStr+numberStr};const HTML_ENTITY_MAP=new Map([[\"&\",\"&amp;\"],[\"<\",\"&lt;\"],[\">\",\"&gt;\"],['\"',\"&quot;\"],[\"'\",\"&#39;\"]]);function lookupHtmlEntity(s){return HTML_ENTITY_MAP.get(s)}const HTML_ENTITY_REGEX=/[&<>\"']/g;\nC3.EscapeHTML=function EscapeHTML(str){return str.replace(HTML_ENTITY_REGEX,lookupHtmlEntity)};C3.EscapeJS=function EscapeJS(str){let ret=C3.ReplaceAll(str,\"\\\\\",\"\\\\\\\\\");ret=C3.ReplaceAll(ret,'\"','\\\\\"');ret=C3.ReplaceAll(ret,\"\\t\",\"\\\\t\");ret=C3.ReplaceAll(ret,\"\\r\",\"\");return C3.ReplaceAll(ret,\"\\n\",\"\\\\n\")};C3.EscapeXML=function EscapeXML(str){let ret=C3.ReplaceAll(str,\"&\",\"&amp;\");ret=C3.ReplaceAll(ret,\"<\",\"&lt;\");ret=C3.ReplaceAll(ret,\">\",\"&gt;\");return C3.ReplaceAll(ret,'\"',\"&quot;\")};\nconst ESCAPE_REGEX=/[-[\\]{}()*+?.,\\\\^$|#\\s]/g;C3.EscapeRegex=function EscapeRegex(str){return str.replace(ESCAPE_REGEX,\"\\\\$&\")};C3.CountCharsInString=function CountCharsInString(str,ch){let count=0;for(const c of str)if(c===ch)++count;return count};\nC3.FindAll=function FindAll(str,find,matchCase=false){if(!find)return[];if(!matchCase){str=str.toLowerCase();find=find.toLowerCase()}const findLen=find.length;let startIndex=0;let index=0;let ret=[];while((index=str.indexOf(find,startIndex))>-1){ret.push(index);startIndex=index+findLen}return ret};C3.ReplaceAll=function ReplaceAll(str,find,replace){return str.replaceAll(find,()=>replace)};\nC3.ReplaceAllCaseInsensitive=function ReplaceAll(str,find,replace){return str.replace(new RegExp(C3.EscapeRegex(find),\"gi\"),()=>replace)};C3.SetElementContent=function SetElementContent(elem,stringlike){if(typeof stringlike===\"string\")elem.textContent=stringlike;else if(stringlike.isPlainText())elem.textContent=stringlike.toString();else{elem.innerHTML=stringlike.toHTML();if(stringlike instanceof C3.BBString)stringlike.attachLinkHandlers(elem)}};\nC3.StringLikeEquals=function StringLikeEquals(a,b){if(a instanceof C3.HtmlString||a instanceof C3.BBString)return a.equals(b);else if(b instanceof C3.HtmlString||b instanceof C3.BBString)return b.equals(a);else return a===b};C3.StringSubstitute=function StringSubstitute(str,...arr){let ret=str;for(let i=0,len=arr.length;i<len;++i){const sub=`{${i}}`;if(!str.includes(sub))throw new Error(`missing placeholder '${sub}' in string substitution`);ret=ret.replace(sub,arr[i].toString())}return ret};\nC3.StringSubstituteAllowMissing=function StringSubstituteAllowMissing(str,...arr){let ret=str;let lowestMissingIndex=-1;let highestUsedIndex=-1;for(let i=0,len=arr.length;i<len;++i){const sub=`{${i}}`;if(str.includes(sub)){highestUsedIndex=i;ret=ret.replace(sub,arr[i].toString())}else if(lowestMissingIndex===-1)lowestMissingIndex=i}if(lowestMissingIndex>=0&&highestUsedIndex>=0&&lowestMissingIndex<highestUsedIndex)throw new Error(`missing placeholder '${lowestMissingIndex}' in string substitution`);\nreturn ret};C3.StringSubstituteMap=function StringSubstituteMap(str,o){let ret=str;for(let [placeholder,substitution]of Object.entries(o))ret=ret.replaceAll(placeholder,substitution.toString());return ret};C3.SortAZ=function SortAZ(a,b){if(a>b)return 1;else if(a<b)return-1;else return 0};C3.SortAZCaseInsensitive=function SortAZCaseInsensitive(a,b){let lowerA=a.toLowerCase();let lowerB=b.toLowerCase();if(lowerA>lowerB)return 1;else if(lowerA<lowerB)return-1;else return 0};let intlSegmenter=null;\nlet graphemeSplitter=null;if(self[\"Intl\"]&&self[\"Intl\"][\"Segmenter\"])intlSegmenter=new self[\"Intl\"][\"Segmenter\"];else graphemeSplitter=new self.GraphemeSplitter;C3.SplitGraphemes=function SplitGraphemes(str){if(intlSegmenter){const ret=[];for(const s of intlSegmenter[\"segment\"](str))ret.push(s[\"segment\"]);return ret}else return graphemeSplitter.splitGraphemes(str)};C3.IterateGraphemes=function*IterateGraphemes(str){if(intlSegmenter)for(const s of intlSegmenter[\"segment\"](str))yield s[\"segment\"];else yield*graphemeSplitter.iterateGraphemes(str)};\nC3.CountGraphemes=function CountGraphemes(str){if(intlSegmenter){let ret=0;for(const s of intlSegmenter[\"segment\"](str))++ret;return ret}else return graphemeSplitter.countGraphemes(str)};const KILOBYTE=1024;const MEGABYTE=KILOBYTE*1024;const GIGABYTE=MEGABYTE*1024;const TERABYTE=GIGABYTE*1024;\nC3.FormatDataSize=function FormatDataSize(sizeInBytes,asRate){let rootKey=\"common.\"+(asRate?\"dataRates\":\"dataSizes\")+\".\";const langSub=self.langSub;if(sizeInBytes<KILOBYTE)return langSub(rootKey+\"bytes\",sizeInBytes);else if(sizeInBytes<MEGABYTE){let kb=sizeInBytes/KILOBYTE;if(kb<10)kb=Math.round(kb*10)/10;else kb=Math.round(kb);return langSub(rootKey+\"kilobytes\",kb)}else if(sizeInBytes<GIGABYTE){let mb=sizeInBytes/MEGABYTE;if(mb<10)mb=Math.round(mb*10)/10;else mb=Math.round(mb);return langSub(rootKey+\n\"megabytes\",mb)}else if(sizeInBytes<TERABYTE){let gb=sizeInBytes/GIGABYTE;if(gb<10)gb=Math.round(gb*10)/10;else gb=Math.round(gb);return langSub(rootKey+\"gigabytes\",gb)}else{let tb=sizeInBytes/TERABYTE;if(tb<10)tb=Math.round(tb*10)/10;else tb=Math.round(tb);return langSub(rootKey+\"terabytes\",tb)}};const DEFAULT_FORMATTIME_OPTS={approximate:false,days:true,hours:true,minutes:true,seconds:true};\nC3.FormatTime=function FormatTime(secondsTotal,opts){opts=Object.assign({},DEFAULT_FORMATTIME_OPTS,opts);C3.Lang.PushContext(\"common.time\");const parts=[];const lang=self.lang;const langPluralSub=self.langPluralSub;if(opts.days){const days=Math.floor(secondsTotal/(24*3600));if(days>0){secondsTotal-=days*24*3600;parts.push(langPluralSub(\".days\",null,days))}}if(opts.hours){const hours=Math.floor(secondsTotal/3600);if(hours>0||parts.length){secondsTotal-=hours*3600;parts.push(langPluralSub(\".hours\",\nnull,hours))}}if(opts.minutes){const minutes=Math.floor(secondsTotal/60);if(minutes>0||parts.length||!opts.seconds){secondsTotal-=minutes*60;parts.push(langPluralSub(\".minutes\",null,minutes))}}if(opts.seconds){const seconds=Math.floor(secondsTotal%60);parts.push(langPluralSub(\".seconds\",null,seconds))}const ret=(opts.approximate?lang(\".approx-prefix\"):\"\")+parts.join(lang(\".separator\"));C3.Lang.PopContext();return ret};\nC3.ZeroPad=function(n,d){let s=n<0?\"-\":\"\";n=Math.abs(n);let nStr=n.toString();let zeroes=d-nStr.length;for(let i=0;i<zeroes;++i)s+=\"0\";return s+nStr};C3.StringToTitleCase=function StringToTitleCase(str){return str.toLowerCase().replace(/\\b\\w/g,t=>t.toUpperCase())};\nC3.CompareVersionStrings=function CompareVersionStrings(v1,v2){let a1=v1.split(\".\").map(s=>s.trim());let a2=v2.split(\".\").map(s=>s.trim());C3.resizeArray(a1,4,\"0\");C3.resizeArray(a2,4,\"0\");a1=a1.map(s=>parseInt(s,10));a2=a2.map(s=>parseInt(s,10));for(let i=0;i<4;++i){const diff=a1[i]-a2[i];if(diff!==0)return diff<0?-1:1}return 0};C3.CreateGUID=function CreateGUID(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,c=>{const r=Math.floor(Math.random()*16);const v=c===\"x\"?r:r&3|8;return v.toString(16)})};\nC3.StringHammingDistance=function StringHammingDistance(a,b){if(a.length!==b.length)throw new Error(\"strings must be same length\");let ret=0;for(let i=0,len=a.length;i<len;++i)if(a.charAt(i)!==b.charAt(i))++ret;return ret};\nC3.StringLevenshteinDistance=function StringLevenshteinDistance(a,b){if(a.length===0)return b.length;if(b.length===0)return a.length;let tmp,i,j,prev,val,row;if(a.length>b.length){tmp=a;a=b;b=tmp}row=Array(a.length+1);for(i=0;i<=a.length;i++)row[i]=i;for(i=1;i<=b.length;i++){prev=i;for(j=1;j<=a.length;j++){if(b[i-1]===a[j-1])val=row[j-1];else val=Math.min(row[j-1]+1,Math.min(prev+1,row[j]+1));row[j-1]=prev;prev=val}row[a.length]=prev}return row[a.length]};\n\n}\n\n// ../lib/str/bbstring.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;\nconst BB_CODE_MAP=new Map([[\"b\",\"strong\"],[\"i\",\"em\"],[\"s\",\"s\"],[\"u\",\"u\"],[\"sub\",\"sub\"],[\"sup\",\"sup\"],[\"small\",\"small\"],[\"mark\",\"mark\"],[\"code\",\"code\"],[\"a1\",\"a\"],[\"a2\",\"a\"],[\"a3\",\"a\"],[\"a4\",\"a\"],[\"a5\",\"a\"],[\"a6\",\"a\"],[\"a7\",\"a\"],[\"a8\",\"a\"],[\"a9\",\"a\"],[\"tip1\",\"abbr\"],[\"tip2\",\"abbr\"],[\"tip3\",\"abbr\"],[\"tip4\",\"abbr\"],[\"tip5\",\"abbr\"],[\"tip6\",\"abbr\"],[\"tip7\",\"abbr\"],[\"tip8\",\"abbr\"],[\"tip9\",\"abbr\"],[\"bad\",[\"span\",\"bbCodeBad\"]],[\"good\",[\"span\",\"bbCodeGood\"]],[\"info\",[\"span\",\"bbCodeInfo\"]],[\"h1\",[\"span\",\"bbCodeH1\"]],\n[\"h2\",[\"span\",\"bbCodeH2\"]],[\"h3\",[\"span\",\"bbCodeH3\"]],[\"h4\",[\"span\",\"bbCodeH4\"]],[\"item\",[\"span\",\"bbCodeItem\"]]]);const SELF_CLOSING_TAGS=new Set([\"icon\"]);const BBREGEX=/\\[(\\/?)([a-zA-Z0-9]+)\\]/g;const CUSTOM_BBREGEX=/\\[(\\/?)([^\\[\\n]*?)\\]/g;let linkActions=null;let tipList=null;let classIndex=0;\nfunction bbToHtmlReplacerFunc(match,closeSlash,tagName){const entry=BB_CODE_MAP.get(tagName);if(entry)if(typeof entry===\"string\"){if(entry===\"a\"&&linkActions.length===0||entry===\"abbr\"&&tipList.length===0)return match;if(entry===\"a\"&&!closeSlash){const index=parseInt(tagName.substring(1),10)-1;if(index<0||index>=linkActions.length)throw new Error(\"invalid bbcode link substitution\");const linkAction=linkActions[index];if(typeof linkAction===\"string\")return`<a href=\"${linkActions[index]}\">`;else if(typeof linkAction===\n\"function\")return`<a class=\"bblink${index}\">`;else throw new TypeError(\"invalid bbcode link action\");}else if(entry===\"abbr\"&&!closeSlash){const index=parseInt(tagName.substring(3),10)-1;if(index<0||index>=tipList.length)throw new Error(\"invalid bbcode tip substitution\");const tip=tipList[index];let tipStr=\"\";if(typeof tip===\"string\")tipStr=tip;else if(typeof tip===\"function\")tipStr=tip();if(typeof tipStr!==\"string\")throw new TypeError(\"invalid bbcode tip\");return`<abbr title=\"${C3.ReplaceAll(tipStr,\n'\"',\"&quot;\")}\">`}else return\"<\"+closeSlash+entry+\">\"}else if(Array.isArray(entry)){let tag=entry[0];let className=entry[1];if(closeSlash)return\"</\"+tag+\">\";else return`<${tag} class=\"${className}\">`}else;else if(tagName===\"class\")if(closeSlash)return\"</span>\";else return`<span class=\"bbclass${classIndex++}\">`;else return match}const LINEBREAK_REGEX=/\\n/g;\nC3.BBString=class BBString{constructor(str,opts){this._bbstr=opts&&opts.noEscape?str:C3.EscapeHTML(str);this._htmlstr=\"\";this._convertLineBreaks=false;this._linkActions=[];this._tipList=[];if(opts){this._convertLineBreaks=!!opts.convertLineBreaks;if(opts.links){if(opts.links.length>9)throw new Error(\"too many links\");this._linkActions=opts.links}if(opts.tips){if(opts.tips.length>9)throw new Error(\"too many tips\");this._tipList=opts.tips}}this._hasAnyBBtags=this._bbstr.includes(\"[\");this._needsLineBreakConversion=\nthis._convertLineBreaks&&this._bbstr.includes(\"\\n\");this._isPlain=!this._hasAnyBBtags&&!this._needsLineBreakConversion&&!this._bbstr.includes(\"&\");this._hasParsedFragments=false;this._fragments=[]}toString(){return this._bbstr}valueOf(){return this._bbstr}isPlainText(){return this._isPlain}toPlainText(){if(this._hasAnyBBtags)return this._bbstr.replace(BBREGEX,\"\");else return this._bbstr}toHTML(){if(this._isPlain)return this._bbstr;if(!this._htmlstr&&this._bbstr){let str=this._bbstr;if(this._hasAnyBBtags){classIndex=\n0;linkActions=this._linkActions;tipList=this._tipList;str=str.replace(BBREGEX,bbToHtmlReplacerFunc);linkActions=null;tipList=null}if(this._needsLineBreakConversion)str=str.replace(LINEBREAK_REGEX,\"<br>\");this._htmlstr=str}return this._htmlstr}attachLinkHandlers(parentElem){if(!this._linkActions.length)return;for(let i=0,len=this._linkActions.length;i<len;++i){const linkAction=this._linkActions[i];if(typeof linkAction!==\"function\")continue;const linkElem=parentElem.querySelector(\".bblink\"+i);if(!linkElem)throw new Error(\"unable to attach BBString link handler\");\nlinkElem.onclick=linkAction}}equals(s){if(s instanceof C3.HtmlString)return this.toHTML()===s.toHTML();else if(s instanceof C3.BBString)return this._bbstr===s._bbstr;else return this._bbstr===s}toFragmentList(){if(this._hasParsedFragments)return this._fragments;const fragments=[];const bbStr=this._bbstr;const styleStack=[];CUSTOM_BBREGEX.lastIndex=0;let prevIndex=0;let result=null;while((result=CUSTOM_BBREGEX.exec(bbStr))!==null){const index=result.index;if(index>0&&bbStr.charAt(index-1)===\"\\\\\")continue;\nconst matchStr=result[0];const closeSlash=result[1];const tagName=result[2];const strFrag=bbStr.substring(prevIndex,index);prevIndex=index+matchStr.length;if(strFrag)fragments.push({text:strFrag,styles:styleStack.slice(0)});if(!tagName)continue;if(closeSlash){const lowerTagName=tagName.toLowerCase();for(let i=styleStack.length-1;i>=0;--i)if(styleStack[i].tag===lowerTagName){styleStack.splice(i,1);break}}else{let tag=tagName;let param=null;const eq=tagName.indexOf(\"=\");if(eq!==-1){tag=tagName.substring(0,\neq).toLowerCase();param=tagName.substring(eq+1)}else tag=tag.toLowerCase();if(SELF_CLOSING_TAGS.has(tag))if(tag===\"icon\")fragments.push({icon:param,styles:styleStack.slice(0)});else throw new Error(`unknown self-closing tag ${tag}`);else styleStack.push({tag,param})}}if(prevIndex<bbStr.length)fragments.push({text:bbStr.substring(prevIndex),styles:styleStack.slice(0)});for(const frag of fragments)if(frag.text)frag.text=this._ProcessBBCodeEscapeSequences(frag.text);this._fragments=fragments.map(frag=>\n{if(frag.icon)return C3.New(C3.IconFragment,{icon:frag.icon,styles:frag.styles});else return C3.New(C3.TextFragment,{chArr:C3.SplitGraphemes(frag.text),styles:frag.styles})});this._hasParsedFragments=true;return this._fragments}_ProcessBBCodeEscapeSequences(text){text=C3.ReplaceAll(text,\"\\\\[\",\"[\");return C3.ReplaceAll(text,\"\\\\\\\\\",\"\\\\\")}static StripTags(str){return C3.New(C3.BBString,str,{noEscape:true}).toPlainText()}static StripAnyTags(str){return str.replace(CUSTOM_BBREGEX,\"\")}};\n\n}\n\n// ../lib/str/textLayout/wordWrap.js\n{\n'use strict';const C3=self.C3;function IsWordBreakWhiteSpace(ch){if(ch===\"\\u00a0\"||ch===\"\\u202f\")return false;else return C3.IsWhitespaceChar(ch)}function WordBreakTrimEnd(chArr){while(chArr.length>0&&IsWordBreakWhiteSpace(chArr.at(-1)))chArr.pop()}function IsNewline(ch){return ch===\"\\n\"||ch===\"\\r\\n\"}\nC3.WordWrap=class WordWrap{constructor(){this._lines=[];this._iconSet=null}GetLines(){return this._lines}GetLineCount(){return this._lines.length}SetIconSet(iconSet){this._iconSet=iconSet}_MeasureLine(line,measureFunc){let width=0;let height=0;let fbbAscent=0;let fbbDescent=0;let topToAlphabeticDistance=0;for(const frag of line){if(frag.GetWidth()===-1){const m=measureFunc(frag);frag.SetHeight(m.height);frag.SetFontBoundingBoxAscent(m.fontBoundingBoxAscent||0);frag.SetFontBoundingBoxDescent(m.fontBoundingBoxDescent||\n0);frag.SetTopToAlphabeticDistance(m.topToAlphabeticDistance||0);if(frag.IsText())frag.SetWidth(m.width);else if(frag.IsIcon())frag.CalculateWidthFromHeight(this._iconSet)}width+=frag.GetWidth();height=Math.max(height,frag.GetHeight());fbbAscent=Math.max(fbbAscent,frag.GetFontBoundingBoxAscent());fbbDescent=Math.max(fbbDescent,frag.GetFontBoundingBoxDescent());topToAlphabeticDistance=Math.max(topToAlphabeticDistance,frag.GetTopToAlphabeticDistance())}return{width,height,fontBoundingBoxAscent:fbbAscent,\nfontBoundingBoxDescent:fbbDescent,topToAlphabeticDistance}}_AddLine(fragments,width,height,fbbAscent,fbbDescent,topToAlphabeticDistance){this._lines.push(C3.New(C3.WordWrap.Line,{fragments,width,height,fontBoundingBoxAscent:fbbAscent,fontBoundingBoxDescent:fbbDescent,topToAlphabeticDistance}))}WordWrap(fragmentArr,measureFunc,wrapWidth,wrapMode,endOfLineMargin){if(typeof fragmentArr===\"string\")fragmentArr=[C3.New(C3.TextFragment,{chArr:C3.SplitGraphemes(fragmentArr)})];C3.clearArray(this._lines);\nif(!fragmentArr.length||fragmentArr.length===1&&fragmentArr[0].IsText()&&fragmentArr[0].IsEmpty()||wrapWidth<2)return;if(fragmentArr.length===1){const frag=fragmentArr[0];if(frag.IsText()&&frag.GetLength()<=100&&!frag.HasNewLine()){let {width,height,fontBoundingBoxAscent,fontBoundingBoxDescent,topToAlphabeticDistance}=measureFunc(frag);width+=endOfLineMargin;frag.SetWidth(width);frag.SetHeight(height);frag.SetFontBoundingBoxAscent(fontBoundingBoxAscent||0);frag.SetFontBoundingBoxDescent(fontBoundingBoxDescent||\n0);frag.SetTopToAlphabeticDistance(topToAlphabeticDistance||0);if(width<=wrapWidth){this._AddLine([frag],width,height,fontBoundingBoxAscent,fontBoundingBoxDescent,topToAlphabeticDistance);return}}}let tokenisedFragments;if(wrapMode===\"word\")tokenisedFragments=this._TokeniseWords(fragmentArr);else{tokenisedFragments=[];for(const frag of fragmentArr)if(frag.IsText()){const chArr=frag.GetCharacterArray();C3.appendArray(tokenisedFragments,chArr.map(ch=>[C3.New(C3.TextFragment,{chArr:[ch],styles:frag.GetStyles()})]))}else tokenisedFragments.push([frag])}this._WrapText(tokenisedFragments,\nmeasureFunc,wrapWidth,endOfLineMargin)}_TokeniseWords(fragmentArr){const ret=[];let curWord=[];let isCurWhitespace=false;for(const frag of fragmentArr){const styles=frag.GetStyles();if(frag.IsIcon()){if(curWord.length>0)ret.push(curWord);ret.push([frag]);curWord=[];continue}for(const ch of frag.GetCharacterArray())if(IsNewline(ch)){if(curWord.length>0)ret.push(curWord);const newlineFrag=C3.New(C3.TextFragment,{chArr:[\"\\n\"],styles});ret.push([newlineFrag]);curWord=[]}else if(curWord.length===0){const newFrag=\nC3.New(C3.TextFragment,{chArr:[ch],styles});curWord.push(newFrag);isCurWhitespace=IsWordBreakWhiteSpace(ch)}else{const isWhitespace=IsWordBreakWhiteSpace(ch);if(isWhitespace===isCurWhitespace){const curFrag=curWord.at(-1);if(curFrag.GetStyles()===styles)curFrag._AppendChar(ch);else{const newFrag=C3.New(C3.TextFragment,{chArr:[ch],styles});curWord.push(newFrag)}}else{ret.push(curWord);curWord=[];const newFrag=C3.New(C3.TextFragment,{chArr:[ch],styles});curWord.push(newFrag);isCurWhitespace=isWhitespace}}}if(curWord.length>\n0)ret.push(curWord);return ret}_CopyLine(line){return line.map(f=>f._Clone())}_AddWordToLine(currentLine,curWord){const lastFrag=currentLine.length?currentLine.at(-1):null;let i=0;if(lastFrag&&lastFrag.IsText()&&curWord[0].IsText()&&curWord[0].GetStyles()===lastFrag.GetStyles()){lastFrag._Append(curWord[0].GetCharacterArray());i=1}for(let len=curWord.length;i<len;++i){const f=curWord[i];currentLine.push(f._Clone())}}_WrapText(tokenisedFragments,measureFunc,wrapWidth,endOfLineMargin){let currentLine=\n[];let currentLineWidth=0;let currentLineHeight=0;let currentLineFbbAscent=0;let currentLineFbbDescent=0;let currentLineTopToAlphabetic=0;for(const curWord of tokenisedFragments){if(curWord.length===1&&curWord[0].IsText()&&curWord[0].GetLength()===1&&IsNewline(curWord[0].GetCharacterArray()[0])){if(currentLineHeight===0){const tempFrag=C3.New(C3.TextFragment,{chArr:[\" \"],styles:curWord[0].GetStyles()});const m=measureFunc(tempFrag);currentLineHeight=m.height;currentLineFbbAscent=m.fontBoundingBoxAscent||\n0;currentLineFbbDescent=m.fontBoundingBoxDescent||0;currentLineTopToAlphabetic=m.topToAlphabeticDistance||0}this._AddLine(currentLine,currentLineWidth,currentLineHeight,currentLineFbbAscent,currentLineFbbDescent,currentLineTopToAlphabetic);currentLine=[];currentLineWidth=0;currentLineHeight=0;currentLineFbbAscent=0;currentLineFbbDescent=0;currentLineTopToAlphabetic=0;continue}const tryLine=this._CopyLine(currentLine);this._AddWordToLine(tryLine,curWord);const tryMetrics=this._MeasureLine(tryLine,\nmeasureFunc);const tryLineWidth=tryMetrics.width;if(tryLineWidth>=wrapWidth){if(currentLine.length>0)this._AddLine(currentLine,currentLineWidth,currentLineHeight,currentLineFbbAscent,currentLineFbbDescent,currentLineTopToAlphabetic);currentLine=[];if(curWord[0].IsText()&&C3.IsCharArrayAllWhitespace(curWord[0].GetCharacterArray())){currentLineWidth=0;currentLineHeight=0;currentLineFbbAscent=0;currentLineFbbDescent=0;currentLineTopToAlphabetic=0}else{this._AddWordToLine(currentLine,curWord);const metrics=\nthis._MeasureLine(currentLine,measureFunc);currentLineWidth=metrics.width;currentLineHeight=metrics.height;currentLineFbbAscent=metrics.fontBoundingBoxAscent;currentLineFbbDescent=metrics.fontBoundingBoxDescent;currentLineTopToAlphabetic=metrics.topToAlphabeticDistance}}else{currentLine=tryLine;currentLineWidth=tryLineWidth;currentLineHeight=tryMetrics.height;currentLineFbbAscent=tryMetrics.fontBoundingBoxAscent;currentLineFbbDescent=tryMetrics.fontBoundingBoxDescent;currentLineTopToAlphabetic=tryMetrics.topToAlphabeticDistance}}if(currentLine.length>\n0)this._AddLine(currentLine,currentLineWidth,currentLineHeight,currentLineFbbAscent,currentLineFbbDescent,currentLineTopToAlphabetic);this._TrimLinesTrailingWhitespace(measureFunc,endOfLineMargin)}_TrimLinesTrailingWhitespace(measureFunc,endOfLineMargin){for(const line of this._lines){const fragments=line._GetFragmentsArray();if(!fragments.length)continue;let lastFrag=fragments.at(-1);if(lastFrag.IsText()){const chArr=lastFrag.GetCharacterArray();const trimmedArr=chArr.slice(0);WordBreakTrimEnd(trimmedArr);\nif(trimmedArr.length===0){line.OffsetWidth(-lastFrag.GetWidth());fragments.pop()}else if(trimmedArr.length<chArr.length){lastFrag.SetCharacterArray(trimmedArr);const trimmedWidth=measureFunc(lastFrag).width;const diff=lastFrag.GetWidth()-trimmedWidth;lastFrag.SetWidth(trimmedWidth);line.OffsetWidth(-diff)}if(endOfLineMargin!==0&&fragments.length>0){lastFrag=fragments.at(-1);lastFrag.OffsetWidth(endOfLineMargin);line.OffsetWidth(endOfLineMargin)}}}}Clear(){C3.clearArray(this._lines)}GetMaxLineWidth(){return this._lines.reduce((a,\nv)=>Math.max(a,v.GetWidth()),0)}GetTotalLineHeight(){return this._lines.reduce((a,v)=>a+v.GetHeight(),0)}};\n\n}\n\n// ../lib/str/textLayout/line.js\n{\n'use strict';const C3=self.C3;\nC3.WordWrap.Line=class WordWrapLine{constructor(opts){this._fragments=opts.fragments||[];this._width=opts.width||-1;this._height=opts.height||-1;this._fontBoundingBoxAscent=opts.fontBoundingBoxAscent||-1;this._fontBoundingBoxDescent=opts.fontBoundingBoxDescent||-1;this._topToAlphabeticDistance=opts.topToAlphabeticDistance||-1;this._posX=0;this._posY=0}fragments(){return this._fragments.values()}_GetFragmentsArray(){return this._fragments}OffsetWidth(w){this._width+=w}GetWidth(){return this._width}GetHeight(){return this._height}GetFoundBoundingBoxAscent(){return this._fontBoundingBoxAscent}GetFontBoundingBoxDescent(){return this._fontBoundingBoxDescent}GetTopToAlphabeticDistance(){return this._topToAlphabeticDistance}SetPosX(x){this._posX=x}GetPosX(){return this._posX}SetPosY(y){this._posY=\ny}GetPosY(){return this._posY}};\n\n}\n\n// ../lib/str/textLayout/fragmentBase.js\n{\n'use strict';const C3=self.C3;\nC3.FragmentBase=class FragmentBase{constructor(opts){this._styles=opts.styles||[];this._width=opts.width||-1;this._height=opts.height||-1;this._fontBoundingBoxAscent=opts.fontBoundingBoxAscent||-1;this._fontBoundingBoxDescent=opts.fontBoundingBoxDescent||-1;this._topToAlphabeticDistance=opts.topToAlphabeticDistance||-1;this._posX=0;this._posY=0}IsText(){return false}IsIcon(){return false}GetStyles(){return this._styles}GetStyleTag(tag){const styles=this._styles;for(let i=styles.length-1;i>=0;--i){const s=\nstyles[i];if(s.tag===tag)return s}return null}HasStyleTag(tag){return!!this.GetStyleTag(tag)}GetStyleMap(){const ret=new Map;for(const s of this._styles)ret.set(s.tag,s.param);return ret}OffsetWidth(w){this._width+=w}SetWidth(w){this._width=w}GetWidth(){return this._width}SetHeight(h){this._height=h}GetHeight(){return this._height}SetFontBoundingBoxAscent(v){this._fontBoundingBoxAscent=v}GetFontBoundingBoxAscent(){return this._fontBoundingBoxAscent}SetFontBoundingBoxDescent(v){this._fontBoundingBoxDescent=\nv}GetFontBoundingBoxDescent(){return this._fontBoundingBoxDescent}SetTopToAlphabeticDistance(v){this._topToAlphabeticDistance=v}GetTopToAlphabeticDistance(){return this._topToAlphabeticDistance}SetPosX(x){this._posX=x}GetPosX(){return this._posX}SetPosY(y){this._posY=y}GetPosY(){return this._posY}};\n\n}\n\n// ../lib/str/textLayout/textFragment.js\n{\n'use strict';const C3=self.C3;\nC3.TextFragment=class TextFragment extends C3.FragmentBase{constructor(opts){super(opts);this._chArr=opts.chArr}IsText(){return true}_Append(chArr){C3.appendArray(this._chArr,chArr);this._width=-1;this._height=-1;this._fontBoundingBoxAscent=-1;this._fontBoundingBoxDescent=-1;this._topToAlphabeticDistance=-1}_AppendChar(ch){this._chArr.push(ch)}_Clone(){return C3.New(C3.TextFragment,{chArr:this._chArr.slice(0),styles:this._styles,width:this._width,height:this._height,fontBoundingBoxAscent:this._fontBoundingBoxAscent,\nfontBoundingBoxDescent:this._fontBoundingBoxDescent,topToAlphabeticDistance:this._topToAlphabeticDistance})}GetCharacterArray(){return this._chArr}SetCharacterArray(arr){this._chArr=arr}GetLength(){return this._chArr.length}IsEmpty(){return this._chArr.length===0}HasNewLine(){return this._chArr.includes(\"\\n\")}};\n\n}\n\n// ../lib/str/textLayout/iconFragment.js\n{\n'use strict';const C3=self.C3;\nC3.IconFragment=class IconFragment extends C3.FragmentBase{constructor(opts){super(opts);this._icon=opts.icon}IsIcon(){return true}GetIconParameter(){return this._icon}_Clone(){return C3.New(C3.IconFragment,{icon:this._icon,styles:this._styles,width:this._width,height:this._height,fontBoundingBoxAscent:this._fontBoundingBoxAscent,fontBoundingBoxDescent:this._fontBoundingBoxDescent,topToAlphabeticDistance:this._topToAlphabeticDistance})}GetTextIcon(iconSet){if(!iconSet)return null;let index=Number(this._icon);\nif(String(index)===this._icon){index=Math.floor(index);return iconSet.GetTextIconByIndex(index)}else return iconSet.GetTextIconByTag(this._icon)}CalculateWidthFromHeight(iconSet){const textIcon=this.GetTextIcon(iconSet);if(!textIcon){this._width=0;return}this._width=this._height*textIcon.GetWidth()/textIcon.GetHeight()}GetDrawable(iconSet){const textIcon=this.GetTextIcon(iconSet);return textIcon?textIcon.GetDrawable():null}GetLength(){return 1}};\n\n}\n\n// ../lib/str/textLayout/textIconManager.js\n{\n'use strict';const C3=self.C3;\nC3.TextIconManager=class TextIconManager{constructor(opts){this._iconSets=new Map;this._getIconSetMetaCallback=opts.getIconSetMeta;this._getIconSetContentCallback=opts.getIconSetContent}Release(){for(const iconSet of this._iconSets.values())iconSet.Release();this._iconSets.clear()}GetIconSet(iconSource){let iconSet=this._iconSets.get(iconSource);if(iconSet)return iconSet;const iconMeta=this._getIconSetMetaCallback(iconSource);iconSet=C3.New(C3.TextIconSet,this,{source:iconSource,iconMeta});this._iconSets.set(iconSource,\niconSet);return iconSet}HasIconSet(iconSource){return this._iconSets.has(iconSource)}DeleteIconSet(iconSource){const iconSet=this._iconSets.get(iconSource);if(iconSet)iconSet.Release();this._iconSets.delete(iconSource)}async _GetIconSetContent(iconSource){return await this._getIconSetContentCallback(iconSource)}};\n\n}\n\n// ../lib/str/textLayout/textIconSet.js\n{\n'use strict';const C3=self.C3;\nC3.TextIconSet=class TextIconSet{constructor(textIconManager,opts){this._textIconManager=textIconManager;this._source=opts.source;this._iconsArray=[];this._iconsByTag=new Map;this._hasStartedLoad=false;this._isLoading=false;this._loadPromise=null;const iconMetaArr=opts.iconMeta.icons;for(let i=0,len=iconMetaArr.length;i<len;++i){const m=iconMetaArr[i];const textIcon=C3.New(C3.TextIcon,this,{index:i,tag:m.tag,source:m.source,width:m.width,height:m.height});this._iconsArray.push(textIcon);if(m.tag)this._iconsByTag.set(m.tag.toLowerCase(),\ntextIcon)}}Release(){for(const textIcon of this._iconsArray)textIcon.Release();C3.clearArray(this._iconsArray);this._iconsByTag.clear();this._textIconManager=null;this._source=null}HasLoaded(){return this._hasStartedLoad}IsLoading(){return this._isLoading}LoadContent(){if(!this._loadPromise)this._loadPromise=this._DoLoadContent();return this._loadPromise}async _DoLoadContent(){if(this._hasStartedLoad)return;this._hasStartedLoad=true;this._isLoading=true;const iconContent=await this._textIconManager._GetIconSetContent(this._source);\nif(!this._textIconManager)return;const iconsArr=iconContent.icons;for(let i=0,len=Math.min(iconsArr.length,this._iconsArray.length);i<len;++i){const drawable=iconsArr[i].drawable;this._iconsArray[i]._SetDrawable(drawable)}this._isLoading=false}GetTextIconByIndex(index){index=Math.floor(index);if(index<0||index>=this._iconsArray.length)return null;return this._iconsArray[index]}GetTextIconByTag(tag){return this._iconsByTag.get(tag.toLowerCase())||null}};\n\n}\n\n// ../lib/str/textLayout/textIcon.js\n{\n'use strict';const C3=self.C3;C3.TextIcon=class TextIcon{constructor(textIconSet,opts){this._textIconSet=textIconSet;this._source=opts.source||null;this._index=opts.index;this._tag=opts.tag;this._width=opts.width;this._height=opts.height;this._drawable=null}Release(){this._width=0;this._height=0;this._textIconSet=null}GetSource(){return this._source}GetWidth(){return this._width}GetHeight(){return this._height}_SetDrawable(drawable){this._drawable=drawable}GetDrawable(){return this._drawable}};\n\n}\n\n// ../lib/gfx/gfx.js\n{\n'use strict';const C3=self.C3;const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const vec4=glMatrix.vec4;const mat4=glMatrix.mat4;const tempVec3a=vec3.create();const tempVec3b=vec3.create();const tempVec3c=vec3.create();const tempVec4=vec4.create();const tempMat4=mat4.create();const neartl=vec3.create();const neartr=vec3.create();const nearbl=vec3.create();const nearbr=vec3.create();const fartl=vec3.create();const fartr=vec3.create();const farbl=vec3.create();const farbr=vec3.create();\nconst unitViewport=vec4.fromValues(0,0,1,1);\nC3.Gfx={Project(objx,objy,objz,mv,proj,viewport,windowCoordinate){const fTemp0=mv[0]*objx+mv[4]*objy+mv[8]*objz+mv[12];const fTemp1=mv[1]*objx+mv[5]*objy+mv[9]*objz+mv[13];const fTemp2=mv[2]*objx+mv[6]*objy+mv[10]*objz+mv[14];const fTemp3=mv[3]*objx+mv[7]*objy+mv[11]*objz+mv[15];let fTemp4=proj[0]*fTemp0+proj[4]*fTemp1+proj[8]*fTemp2+proj[12]*fTemp3;let fTemp5=proj[1]*fTemp0+proj[5]*fTemp1+proj[9]*fTemp2+proj[13]*fTemp3;let fTemp6=proj[2]*fTemp0+proj[6]*fTemp1+proj[10]*fTemp2+proj[14]*fTemp3;let fTemp7=\nproj[3]*fTemp0+proj[7]*fTemp1+proj[11]*fTemp2+proj[15]*fTemp3;if(fTemp7===0)return false;fTemp7=1/fTemp7;fTemp4*=fTemp7;fTemp5*=fTemp7;fTemp6*=fTemp7;windowCoordinate[0]=(fTemp4*.5+.5)*viewport[2]+viewport[0];windowCoordinate[1]=(fTemp5*.5+.5)*viewport[3]+viewport[1];windowCoordinate[2]=(1+fTemp6)*.5;return true},Unproject(winx,winy,winz,mv,proj,viewport,objectCoordinate){const A=tempMat4;const vec=tempVec4;mat4.multiply(A,proj,mv);if(mat4.invert(A,A)===null)return false;vec[0]=(winx-viewport[0])/\nviewport[2]*2-1;vec[1]=(winy-viewport[1])/viewport[3]*2-1;vec[2]=2*winz-1;vec[3]=1;vec4.transformMat4(vec,vec,A);if(vec[3]===0)return false;vec[3]=1/vec[3];objectCoordinate[0]=vec[0]*vec[3];objectCoordinate[1]=vec[1]*vec[3];objectCoordinate[2]=vec[2]*vec[3];return true},UnprojectScreenToWorldZ(winx,winy,worldZ,mv,proj,viewport,objectCoordinate){const nearPt=tempVec3a;const farPt=tempVec3b;if(!C3.Gfx.Unproject(winx,winy,0,mv,proj,viewport,nearPt))return false;if(!C3.Gfx.Unproject(winx,winy,1,mv,proj,\nviewport,farPt))return false;const dirVec=tempVec3b;vec3.subtract(dirVec,farPt,nearPt);const planeNormal=tempVec3c;vec3.set(planeNormal,0,0,1);const planeConstant=-worldZ;const denominator=vec3.dot(planeNormal,dirVec);let distance=0;if(denominator===0){const planeDistToPt=vec3.dot(planeNormal,nearPt)+planeConstant;if(planeDistToPt!==0)return false}else{distance=-(vec3.dot(nearPt,planeNormal)+planeConstant)/denominator;if(distance<0)return false}vec3.scaleAndAdd(objectCoordinate,nearPt,dirVec,distance);\nreturn true}};function PlaneFromPoints(ptA,ptB,ptC,plane){const normal=tempVec3c;vec3.subtract(tempVec3a,ptC,ptB);vec3.subtract(tempVec3b,ptA,ptB);vec3.cross(normal,tempVec3a,tempVec3b);vec3.normalize(normal,normal);plane.set(normal[0],normal[1],normal[2],vec3.dot(ptA,normal))}\nfunction IsInFrontOfPlane(minX,minY,minZ,maxX,maxY,maxZ,plane){const nx=plane.x;const ny=plane.y;const nz=plane.z;const d=plane.w;const nxT=plane.xF;const nyT=plane.yF;const nzT=plane.zF;const nxF=1-nxT;const nyF=1-nyT;const nzF=1-nzT;const minD=nx*minX*nxT+nx*maxX*nxF+ny*minY*nyT+ny*maxY*nyF+nz*minZ*nzT+nz*maxZ*nzF;if(minD>=d)return true;const maxD=nx*maxX*nxT+nx*minX*nxF+ny*maxY*nyT+ny*minY*nyF+nz*maxZ*nzT+nz*minZ*nzF;return maxD>d}\nfunction IsPointInFrontOfPlane(x,y,z,plane){const nx=plane.x;const ny=plane.y;const nz=plane.z;const d=plane.w;const minD=nx*x+ny*y+nz*z;return minD>=d}class Plane{constructor(){this.x=NaN;this.y=NaN;this.z=NaN;this.w=NaN;this.xF=NaN;this.yF=NaN;this.zF=NaN}set(x,y,z,w){this.x=x;this.y=y;this.z=z;this.w=w;this.xF=x>0?1:0;this.yF=y>0?1:0;this.zF=z>0?1:0}}\nC3.Gfx.ViewFrustum=class ViewFrustum{constructor(){this._leftP=new Plane;this._topP=new Plane;this._rightP=new Plane;this._bottomP=new Plane;this._nearP=new Plane;this._farP=new Plane}CalculatePlanes(mv,proj){const vp=unitViewport;C3.Gfx.Unproject(0,1,0,mv,proj,vp,neartl);C3.Gfx.Unproject(1,1,0,mv,proj,vp,neartr);C3.Gfx.Unproject(0,0,0,mv,proj,vp,nearbl);C3.Gfx.Unproject(1,0,0,mv,proj,vp,nearbr);C3.Gfx.Unproject(0,1,1,mv,proj,vp,fartl);C3.Gfx.Unproject(1,1,1,mv,proj,vp,fartr);C3.Gfx.Unproject(0,0,\n1,mv,proj,vp,farbl);C3.Gfx.Unproject(1,0,1,mv,proj,vp,farbr);PlaneFromPoints(nearbl,neartl,fartl,this._leftP);PlaneFromPoints(neartl,neartr,fartr,this._topP);PlaneFromPoints(neartr,nearbr,farbr,this._rightP);PlaneFromPoints(nearbr,nearbl,farbl,this._bottomP);PlaneFromPoints(farbl,fartl,fartr,this._farP);PlaneFromPoints(nearbr,neartr,neartl,this._nearP)}ContainsAABB(minX,minY,minZ,maxX,maxY,maxZ){return IsInFrontOfPlane(minX,minY,minZ,maxX,maxY,maxZ,this._leftP)&&IsInFrontOfPlane(minX,minY,minZ,maxX,\nmaxY,maxZ,this._topP)&&IsInFrontOfPlane(minX,minY,minZ,maxX,maxY,maxZ,this._rightP)&&IsInFrontOfPlane(minX,minY,minZ,maxX,maxY,maxZ,this._bottomP)&&IsInFrontOfPlane(minX,minY,minZ,maxX,maxY,maxZ,this._nearP)&&IsInFrontOfPlane(minX,minY,minZ,maxX,maxY,maxZ,this._farP)}IsBehindNearPlane(x,y,z){return!IsPointInFrontOfPlane(x,y,z,this._nearP)}};\n\n}\n\n// ../lib/gfx/rendererBase.js\n{\n'use strict';const C3=self.C3;const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const vec4=glMatrix.vec4;const mat4=glMatrix.mat4;const tempMat4=mat4.create();const tmpVec3a=vec3.fromValues(0,0,0);const tmpVec3b=vec3.fromValues(0,0,0);const tmpVec3c=vec3.fromValues(0,0,0);const defaultUpVector=vec3.fromValues(0,1,0);const tmpVec4=vec4.fromValues(0,0,0,0);const tmpQuad=new C3.Quad;const tmpRect=new C3.Rect;const defaultTexCoordsQuad=new C3.Quad(0,0,1,0,1,1,0,1);\nconst DEFAULT_RENDERERBASE_OPTS={nearZ:1,farZ:1E4};const matWebGLtoWebGPU=mat4.fromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);\nC3.Gfx.RendererBase=class RendererBase{constructor(opts){opts=Object.assign({},DEFAULT_RENDERERBASE_OPTS,opts);this._width=0;this._height=0;this._fovY=C3.toRadians(45);this._tan_fovY_2=Math.tan(this._fovY/2);this._matP=mat4.create();this._matMV=mat4.create();this._zAxisScale=false;this._nearZ=opts.nearZ;this._farZ=opts.farZ;this._allShaderPrograms=[];this._shaderProgramsByName=new Map;this._spTextureFill=null;this._spPoints=null;this._spTilemapFill=null;this._spTileRandomization=null;this._spColorFill=\nnull;this._spLinearGradientFill=null;this._spPenumbraFill=null;this._spHardEllipseFill=null;this._spHardEllipseOutline=null;this._spSmoothEllipseFill=null;this._spSmoothEllipseOutline=null;this._spSmoothLineFill=null;this._stateGroups=new Map;this._currentStateGroup=null;this._blendModeTable=[];this._namedBlendModeMap=new Map;this._baseZ=0;this._currentZ=0;this._lineWidth=1;this._lineWidthStack=[this._lineWidth];this._lineCap=1;this._lineCapStack=[this._lineCap];this._lineOffset=.5;this._lineOffsetStack=\n[this._lineOffset];this._frameNumber=0;this._enableMipmaps=true;this._hasMajorPerformanceCaveat=false}FillIndexBufferData(indexData){let i=0,len=indexData.length,fv=0;while(i<len){indexData[i++]=fv;indexData[i++]=fv+1;indexData[i++]=fv+2;indexData[i++]=fv;indexData[i++]=fv+2;indexData[i++]=fv+3;fv+=4}}_ClearState(){this._baseZ=0;this._currentZ=0;this._spTextureFill=null;this._spPoints=null;this._spTilemapFill=null;this._spTileRandomization=null;this._spColorFill=null;this._spLinearGradientFill=null;\nthis._spPenumbraFill=null;this._spHardEllipseFill=null;this._spHardEllipseOutline=null;this._spSmoothEllipseFill=null;this._spSmoothEllipseOutline=null;this._spSmoothLineFill=null;this._ClearAllShaderPrograms()}InitState(){this._ClearState();this._currentStateGroup=null}OnDeviceOrContextLost(){for(const s of this._allShaderPrograms)s.Release();this._ClearState()}GetWidth(){return this._width}GetHeight(){return this._height}GetDefaultCameraZ(viewH){if(this.IsZAxisScaleNormalized())return 100;else return viewH/\n(2*this._GetTanFovYDiv2())}GetZAxisScaleFactor(viewH){if(this.IsZAxisScaleNormalized()){const realZunits=viewH/(2*this._GetTanFovYDiv2());return realZunits/this.GetDefaultCameraZ(viewH)}else return 1}SetNearZ(z){this._nearZ=z}GetNearZ(){return this._nearZ}SetFarZ(z){this._farZ=z}GetFarZ(){return this._farZ}SetFovY(f){this._fovY=f;this._tan_fovY_2=Math.tan(this._fovY/2)}GetFovY(){return this._fovY}_GetTanFovYDiv2(){return this._tan_fovY_2}SetZAxisScaleNormalized(){this._zAxisScale=false}SetZAxisScaleRegular(){this._zAxisScale=\ntrue}IsZAxisScaleNormalized(){return!this._zAxisScale}IsZAxisScaleRegular(){return this._zAxisScale}CalculatePerspectiveMatrix(outMat,aspect,vpX=.5,vpY=.5){const zNear=this.GetNearZ();const zFar=this.GetFarZ();const fovY=this.GetFovY();if(vpX===.5&&vpY===.5)if(this.IsWebGPU())mat4.perspectiveZO(outMat,fovY,aspect,zNear,zFar);else mat4.perspective(outMat,fovY,aspect,zNear,zFar);else{vpX=1-vpX;const fLeft=vpX*2-2;const fRight=vpX*2;const fBottom=vpY*2-2;const fTop=vpY*2;const fH=this._GetTanFovYDiv2()*\nzNear;const fW=fH*aspect;mat4.frustum(outMat,fLeft*fW,fRight*fW,fBottom*fH,fTop*fH,zNear,zFar);if(this.IsWebGPU())mat4.mul(outMat,matWebGLtoWebGPU,outMat)}}CalculateOrthographicMatrix(outMat,width,height,scale=1){const dpr=self.devicePixelRatio;const worldScale=this.GetDefaultCameraZ(height)*2*dpr*this._GetTanFovYDiv2()/height;const hScaleX=width*worldScale/(2*dpr*scale);const hScaleY=height*worldScale/(2*dpr*scale);const left=-hScaleX;const right=hScaleX;const bottom=-hScaleY;const top=hScaleY;if(this.IsWebGPU())mat4.orthoZO(outMat,\nleft,right,bottom,top,this.GetNearZ(),this.GetFarZ());else mat4.ortho(outMat,left,right,bottom,top,this.GetNearZ(),this.GetFarZ())}CalculateLookAtModelView(outMat,cam,look,up,viewH,zScale=1){let worldScale=1;if(this.IsZAxisScaleNormalized())worldScale=200*this._GetTanFovYDiv2()/viewH;const worldScaleVec3=tmpVec3c;vec3.set(worldScaleVec3,worldScale,-worldScale,1);const tmpCam=tmpVec3a;const tmpLook=tmpVec3b;vec3.multiply(tmpCam,cam,worldScaleVec3);vec3.multiply(tmpLook,look,worldScaleVec3);mat4.lookAt(outMat,\ntmpCam,tmpLook,up||defaultUpVector);worldScaleVec3[2]=zScale;mat4.scale(outMat,outMat,worldScaleVec3)}CalculateLookAtModelView2(camX,camY,camZ,lookX,lookY,lookZ,viewH,zScale){vec3.set(tmpVec3a,camX,camY,camZ);vec3.set(tmpVec3b,lookX,lookY,lookZ);this.CalculateLookAtModelView(tempMat4,tmpVec3a,tmpVec3b,defaultUpVector,viewH,zScale);return tempMat4}_AddShaderProgram(sp){this._allShaderPrograms.push(sp);this._shaderProgramsByName.set(sp.GetName(),sp)}_RemoveShaderProgram(sp){const i=this._allShaderPrograms.indexOf(sp);\nif(i!==-1)this._allShaderPrograms.splice(i,1);this._shaderProgramsByName.delete(sp.GetName())}_ClearAllShaderPrograms(){C3.clearArray(this._allShaderPrograms);this._shaderProgramsByName.clear()}GetShaderProgramByName(name){return this._shaderProgramsByName.get(name)||null}GetTextureFillShaderProgram(){return this._spTextureFill}SetTextureFillMode(){this.SetProgram(this._spTextureFill)}GetPointsRenderingProgram(){return this._spPoints}SetPointsRenderingProgram(){this.SetProgram(this._spPoints)}SetTilemapFillMode(){this.SetProgram(this._spTilemapFill)}SetTileRandomizationMode(){this.SetProgram(this._spTileRandomization)}SetColorFillMode(){this.SetProgram(this._spColorFill)}SetLinearGradientFillMode(){this.SetProgram(this._spLinearGradientFill)}SetPenumbraFillMode(){this.SetProgram(this._spPenumbraFill)}SetHardEllipseFillMode(){this.SetProgram(this._spHardEllipseFill)}SetHardEllipseOutlineMode(){this.SetProgram(this._spHardEllipseOutline)}SetSmoothEllipseFillMode(){this.SetProgram(this._spSmoothEllipseFill)}SetSmoothEllipseOutlineMode(){this.SetProgram(this._spSmoothEllipseOutline)}SetSmoothLineFillMode(){this.SetProgram(this._spSmoothLineFill)}_SetCurrentStateGroup(sg){this._currentStateGroup=\nsg}GetCurrentStateGroup(){return this._currentStateGroup}AcquireStateGroup(shaderProgram_or_name,blendMode,color,zElevation){const key=C3.Gfx.StateGroup.MakeKey(shaderProgram_or_name,blendMode,color,zElevation);let stateGroup=this._stateGroups.get(key);if(!stateGroup){stateGroup=C3.New(C3.Gfx.StateGroup,this,shaderProgram_or_name,blendMode,color,zElevation);this._stateGroups.set(key,stateGroup)}stateGroup.AddRef();return stateGroup}ReleaseStateGroup(stateGroup){stateGroup.DecRef();if(stateGroup._GetRefCount()===\n0){if(this._currentStateGroup===stateGroup)this._currentStateGroup=null;this._stateGroups.delete(stateGroup.GetKey());stateGroup.Release()}}_InitBlendModeData(blendModeData){C3.clearArray(this._blendModeTable);this._namedBlendModeMap.clear();let number=0;for(const bmd of blendModeData){const name=bmd[0];const srcBlend=bmd[1];const destBlend=bmd[2];this._blendModeTable.push([srcBlend,destBlend]);this._namedBlendModeMap.set(name,{number,srcBlend,destBlend});number++}}_GetBlendByIndex(blendIndex){return this._blendModeTable[blendIndex]}GetSrcBlendByIndex(blendIndex){return this._GetBlendByIndex(blendIndex)[0]}GetDestBlendByIndex(blendIndex){return this._GetBlendByIndex(blendIndex)[1]}GetNamedBlend(blendName){const ret=\nthis._namedBlendModeMap.get(blendName);if(typeof ret===\"undefined\")throw new Error(\"invalid blend name\");return ret}NamedBlendToNumber(blendName){const ret=this._namedBlendModeMap.get(blendName);if(typeof ret===\"undefined\")throw new Error(\"invalid blend name\");return ret.number}SetBaseZ(z){this._baseZ=z}GetBaseZ(){return this._baseZ}SetCurrentZ(z){this._currentZ=z;this._currentStateGroup=null}GetCurrentZ(){return this._currentZ}Line(x1,y1,x2,y2){const a=C3.angleTo(x1,y1,x2,y2);const sin_a=Math.sin(a);\nconst cos_a=Math.cos(a);const halfLineWidth=this._lineWidth*.5;const sin_a_hlw=sin_a*halfLineWidth;const cos_a_hlw=cos_a*halfLineWidth;const lineCap=this._lineCap;if(lineCap===2)this.LinePreCalc_LineCap2(x1,y1,0,x2,y2,0,sin_a_hlw,cos_a_hlw);else if(lineCap===1)this.LinePreCalc_LineCap1(x1,y1,0,x2,y2,0,sin_a_hlw,cos_a_hlw);else this.LinePreCalc_LineCap0(x1,y1,0,x2,y2,0,sin_a_hlw,cos_a_hlw)}Line3D(x1,y1,z1,x2,y2,z2){const a=C3.angleTo(x1,y1,x2,y2);const sin_a=Math.sin(a);const cos_a=Math.cos(a);const halfLineWidth=\nthis._lineWidth*.5;const sin_a_hlw=sin_a*halfLineWidth;const cos_a_hlw=cos_a*halfLineWidth;const lineCap=this._lineCap;if(lineCap===2)this.LinePreCalc_LineCap2(x1,y1,z1,x2,y2,z2,sin_a_hlw,cos_a_hlw);else if(lineCap===1)this.LinePreCalc_LineCap1(x1,y1,z1,x2,y2,z2,sin_a_hlw,cos_a_hlw);else this.LinePreCalc_LineCap0(x1,y1,z1,x2,y2,z2,sin_a_hlw,cos_a_hlw)}LinePreCalc_LineCap2(x1,y1,z1,x2,y2,z2,sin_a_hlw,cos_a_hlw){const lineOffset=this._lineOffset;const startX=x1+lineOffset-cos_a_hlw;const startY=y1+\nlineOffset-sin_a_hlw;const endX=x2+lineOffset+cos_a_hlw;const endY=y2+lineOffset+sin_a_hlw;const cos_a_lw=cos_a_hlw*2;const sin_a_lw=sin_a_hlw*2;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw+cos_a_lw;const bly=startY+cos_a_hlw+sin_a_lw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=endX-sin_a_hlw-cos_a_lw;const bry=endY+cos_a_hlw-sin_a_lw;this.Quad3D2(tlx,tly,z1,trx,try_,z2,brx,bry,z2,blx,bly,z1,defaultTexCoordsQuad)}LinePreCalc_LineCap1(x1,y1,z1,x2,\ny2,z2,sin_a_hlw,cos_a_hlw){const lineOffset=this._lineOffset;const startX=x1+lineOffset-cos_a_hlw;const startY=y1+lineOffset-sin_a_hlw;const endX=x2+lineOffset+cos_a_hlw;const endY=y2+lineOffset+sin_a_hlw;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw;const bly=startY+cos_a_hlw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=endX-sin_a_hlw;const bry=endY+cos_a_hlw;this.Quad3D2(tlx,tly,z1,trx,try_,z2,brx,bry,z2,blx,bly,z1,defaultTexCoordsQuad)}LinePreCalc_LineCap0(x1,\ny1,z1,x2,y2,z2,sin_a_hlw,cos_a_hlw){const lineOffset=this._lineOffset;const startX=x1+lineOffset;const startY=y1+lineOffset;const endX=x2+lineOffset;const endY=y2+lineOffset;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw;const bly=startY+cos_a_hlw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=endX-sin_a_hlw;const bry=endY+cos_a_hlw;this.Quad3D2(tlx,tly,z1,trx,try_,z2,brx,bry,z2,blx,bly,z1,defaultTexCoordsQuad)}TexturedLine(x1,y1,x2,y2,u,v){const a=\nC3.angleTo(x1,y1,x2,y2);const sin_a=Math.sin(a);const cos_a=Math.cos(a);const halfLineWidth=this._lineWidth*.5;const sin_a_hlw=sin_a*halfLineWidth;const cos_a_hlw=cos_a*halfLineWidth;const lineCap=this._lineCap;if(lineCap===2)this.TexturedLinePreCalc_LineCap2(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v);else if(lineCap===1)this.TexturedLinePreCalc_LineCap1(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v);else this.TexturedLinePreCalc_LineCap0(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v)}TexturedLinePreCalc_LineCap2(x1,y1,x2,\ny2,sin_a_hlw,cos_a_hlw,u,v){const lineOffset=this._lineOffset;const startX=x1+lineOffset-cos_a_hlw;const startY=y1+lineOffset-sin_a_hlw;const endX=x2+lineOffset+cos_a_hlw;const endY=y2+lineOffset+sin_a_hlw;const cos_a_lw=cos_a_hlw*2;const sin_a_lw=sin_a_hlw*2;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw+cos_a_lw;const bly=startY+cos_a_hlw+sin_a_lw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=endX-sin_a_hlw-cos_a_lw;const bry=endY+cos_a_hlw-sin_a_lw;\ntmpQuad.set(tlx,tly,trx,try_,brx,bry,blx,bly);tmpRect.set(u,0,v,0);this.Quad3(tmpQuad,tmpRect)}TexturedLinePreCalc_LineCap1(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v){const lineOffset=this._lineOffset;const startX=x1+lineOffset-cos_a_hlw;const startY=y1+lineOffset-sin_a_hlw;const endX=x2+lineOffset+cos_a_hlw;const endY=y2+lineOffset+sin_a_hlw;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw;const bly=startY+cos_a_hlw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=\nendX-sin_a_hlw;const bry=endY+cos_a_hlw;tmpQuad.set(tlx,tly,trx,try_,brx,bry,blx,bly);tmpRect.set(u,0,v,0);this.Quad3(tmpQuad,tmpRect)}TexturedLinePreCalc_LineCap0(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v){const lineOffset=this._lineOffset;const startX=x1+lineOffset;const startY=y1+lineOffset;const endX=x2+lineOffset;const endY=y2+lineOffset;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw;const bly=startY+cos_a_hlw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=\nendX-sin_a_hlw;const bry=endY+cos_a_hlw;tmpQuad.set(tlx,tly,trx,try_,brx,bry,blx,bly);tmpRect.set(u,0,v,0);this.Quad3(tmpQuad,tmpRect)}LineRect(left,top,right,bottom){const halfLineWidth=this._lineWidth*.5;const lineCap=this._lineCap;if(lineCap===2)this._LineRectPreCalc_LineCap2(left,top,right,bottom,halfLineWidth);else if(lineCap===1)this._LineRectPreCalc_LineCap1(left,top,right,bottom,halfLineWidth);else this._LineRectPreCalc_LineCap0(left,top,right,bottom,halfLineWidth)}_LineRectPreCalc_LineCap2(left,\ntop,right,bottom,halfLineWidth){this.LinePreCalc_LineCap2(left,top,0,right,top,0,0,halfLineWidth);this.LinePreCalc_LineCap2(right,top,0,right,bottom,0,halfLineWidth,0);this.LinePreCalc_LineCap2(right,bottom,0,left,bottom,0,0,-halfLineWidth);this.LinePreCalc_LineCap2(left,bottom,0,left,top,0,-halfLineWidth,0)}_LineRectPreCalc_LineCap1(left,top,right,bottom,halfLineWidth){this.LinePreCalc_LineCap1(left,top,0,right,top,0,0,halfLineWidth);this.LinePreCalc_LineCap1(right,top,0,right,bottom,0,halfLineWidth,\n0);this.LinePreCalc_LineCap1(right,bottom,0,left,bottom,0,0,-halfLineWidth);this.LinePreCalc_LineCap1(left,bottom,0,left,top,0,-halfLineWidth,0)}_LineRectPreCalc_LineCap0(left,top,right,bottom,halfLineWidth){this.LinePreCalc_LineCap0(left,top,0,right,top,0,0,halfLineWidth);this.LinePreCalc_LineCap0(right,top,0,right,bottom,0,halfLineWidth,0);this.LinePreCalc_LineCap0(right,bottom,0,left,bottom,0,0,-halfLineWidth);this.LinePreCalc_LineCap0(left,bottom,0,left,top,0,-halfLineWidth,0)}LineRect2(r){this.LineRect(r.getLeft(),\nr.getTop(),r.getRight(),r.getBottom())}LineQuad(q){const a=C3.angleTo(q.getTlx(),q.getTly(),q.getTrx(),q.getTry());const sin_a=Math.sin(a);const cos_a=Math.cos(a);const halfLineWidth=this._lineWidth*.5;const sin_a_hlw=sin_a*halfLineWidth;const cos_a_hlw=cos_a*halfLineWidth;const lineCap=this._lineCap;if(lineCap===2)this._LineQuadPreCalc_LineCap2(q,sin_a_hlw,cos_a_hlw);else if(lineCap===1)this._LineQuadPreCalc_LineCap1(q,sin_a_hlw,cos_a_hlw);else this._LineQuadPreCalc_LineCap0(q,sin_a_hlw,cos_a_hlw)}_LineQuadPreCalc_LineCap2(q,\nsin_a_hlw,cos_a_hlw){this.LinePreCalc_LineCap2(q.getTlx(),q.getTly(),0,q.getTrx(),q.getTry(),0,sin_a_hlw,cos_a_hlw);this.LinePreCalc_LineCap2(q.getTrx(),q.getTry(),0,q.getBrx(),q.getBry(),0,cos_a_hlw,-sin_a_hlw);this.LinePreCalc_LineCap2(q.getBrx(),q.getBry(),0,q.getBlx(),q.getBly(),0,-sin_a_hlw,-cos_a_hlw);this.LinePreCalc_LineCap2(q.getBlx(),q.getBly(),0,q.getTlx(),q.getTly(),0,-cos_a_hlw,sin_a_hlw)}_LineQuadPreCalc_LineCap1(q,sin_a_hlw,cos_a_hlw){this.LinePreCalc_LineCap1(q.getTlx(),q.getTly(),\n0,q.getTrx(),q.getTry(),0,sin_a_hlw,cos_a_hlw);this.LinePreCalc_LineCap1(q.getTrx(),q.getTry(),0,q.getBrx(),q.getBry(),0,cos_a_hlw,-sin_a_hlw);this.LinePreCalc_LineCap1(q.getBrx(),q.getBry(),0,q.getBlx(),q.getBly(),0,-sin_a_hlw,-cos_a_hlw);this.LinePreCalc_LineCap1(q.getBlx(),q.getBly(),0,q.getTlx(),q.getTly(),0,-cos_a_hlw,sin_a_hlw)}_LineQuadPreCalc_LineCap0(q,sin_a_hlw,cos_a_hlw){this.LinePreCalc_LineCap0(q.getTlx(),q.getTly(),0,q.getTrx(),q.getTry(),0,sin_a_hlw,cos_a_hlw);this.LinePreCalc_LineCap0(q.getTrx(),\nq.getTry(),0,q.getBrx(),q.getBry(),0,cos_a_hlw,-sin_a_hlw);this.LinePreCalc_LineCap0(q.getBrx(),q.getBry(),0,q.getBlx(),q.getBly(),0,-sin_a_hlw,-cos_a_hlw);this.LinePreCalc_LineCap0(q.getBlx(),q.getBly(),0,q.getTlx(),q.getTly(),0,-cos_a_hlw,sin_a_hlw)}SetLineWidth(n){this._lineWidth=n;this._lineWidthStack[this._lineWidthStack.length-1]=n}GetLineWidth(){return this._lineWidth}PushLineWidth(n){if(this._lineWidthStack.length>=100)throw new Error(\"pushed too many line widths - check push/pop pairs\");\nthis._lineWidthStack.push(n);this._lineWidth=n}PopLineWidth(){if(this._lineWidthStack.length<=1)throw new Error(\"cannot pop last line width - check push/pop pairs\");this._lineWidthStack.pop();this._lineWidth=this._lineWidthStack.at(-1)}SetLineCapButt(){this._lineCap=0;this._lineCapStack[this._lineCapStack.length-1]=0}SetLineCapSquare(){this._lineCap=1;this._lineCapStack[this._lineCapStack.length-1]=0}SetLineCapZag(){this._lineCap=2;this._lineCapStack[this._lineCapStack.length-1]=0}PushLineCap(type){if(type===\n\"butt\")this.PushLineCapButt();else if(type===\"square\")this.PushLineCapSquare();else if(type===\"zag\")this.PushLineCapZag();else throw new Error(\"invalid line cap\");}PushLineCapButt(){if(this._lineCapStack.length>=100)throw new Error(\"pushed too many line caps - check push/pop pairs\");this._lineCapStack.push(0);this._lineCap=0}PushLineCapSquare(){if(this._lineCapStack.length>=100)throw new Error(\"pushed too many line caps - check push/pop pairs\");this._lineCapStack.push(1);this._lineCap=1}PushLineCapZag(){if(this._lineCapStack.length>=\n100)throw new Error(\"pushed too many line caps - check push/pop pairs\");this._lineCapStack.push(2);this._lineCap=2}PopLineCap(){if(this._lineCapStack.length<=1)throw new Error(\"cannot pop last line cap - check push/pop pairs\");this._lineCapStack.pop();this._lineCap=this._lineCapStack.at(-1)}SetLineOffset(n){this._lineOffset=n;this._lineOffsetStack[this._lineOffsetStack.length-1]=n}GetLineOffset(){return this._lineOffset}PushLineOffset(n){if(this._lineOffsetStack.length>=100)throw new Error(\"pushed too many line offsets - check push/pop pairs\");\nthis._lineOffsetStack.push(n);this._lineOffset=n}PopLineOffset(){if(this._lineOffsetStack.length<=1)throw new Error(\"cannot pop last line offset - check push/pop pairs\");this._lineOffsetStack.pop();this._lineOffset=this._lineOffsetStack.at(-1)}ConvexPoly(pts){const pts_count=pts.length/2;if(pts_count<3)throw new Error(\"need at least 3 points\");const tris=pts_count-2;const last_tri=tris-1;const p0x=pts[0];const p0y=pts[1];for(let i=0;i<tris;i+=2){const i2=i*2;const p1x=pts[i2+2];const p1y=pts[i2+3];\nconst p2x=pts[i2+4];const p2y=pts[i2+5];if(i===last_tri)this.Quad2(p0x,p0y,p1x,p1y,p2x,p2y,p2x,p2y);else{const p3x=pts[i2+6];const p3y=pts[i2+7];this.Quad2(p0x,p0y,p1x,p1y,p2x,p2y,p3x,p3y)}}}GetNumVertexComponents(){return 3}Finish(){this.EndBatch(true);this._frameNumber++}GetFrameNumber(){return this._frameNumber}IncrementFrameNumber(){this._frameNumber++}SetMipmapsEnabled(e){this._enableMipmaps=!!e}AreMipmapsEnabled(){return this._enableMipmaps}SetHasMajorPerformanceCaveat(c){this._hasMajorPerformanceCaveat=\n!!c}HasMajorPerformanceCaveat(){return this._hasMajorPerformanceCaveat}IsWebGL(){return false}IsWebGPU(){return false}GetEstimatedBackBufferMemoryUsage(){}GetEstimatedRenderBufferMemoryUsage(){}GetEstimatedTextureMemoryUsage(){}GetEstimatedTotalMemoryUsage(){return this.GetEstimatedBackBufferMemoryUsage()+this.GetEstimatedRenderBufferMemoryUsage()+this.GetEstimatedTextureMemoryUsage()}};\n\n}\n\n// ../lib/gfx/shaderProgramBase.js\n{\n'use strict';const C3=self.C3;\nC3.Gfx.ShaderProgramBase=class ShaderProgramBase{constructor(renderer,shaderInfo){this._name=shaderInfo.name;this._renderer=renderer;this._extendBoxHorizontal=shaderInfo.extendBoxHorizontal||0;this._extendBoxVertical=shaderInfo.extendBoxVertical||0;this._crossSampling=!!shaderInfo.crossSampling;this._mustPreDraw=!!shaderInfo.mustPreDraw;this._preservesOpaqueness=!!shaderInfo.preservesOpaqueness;this._animated=!!shaderInfo.animated;this._blendsBackground=!!shaderInfo.blendsBackground;this._usesDepth=\n!!shaderInfo.usesDepth;this._usesAnySrcRectOrPixelSize=false;this._needsPostDrawOrExtendBox=this._crossSampling||this._blendsBackground||this._extendBoxHorizontal!==0||this._extendBoxVertical!==0}Release(){this._renderer=null}GetRenderer(){return this._renderer}GetName(){return this._name}ExtendsBox(){return this._extendBoxHorizontal!==0||this._extendBoxVertical!==0}GetBoxExtendHorizontal(){return this._extendBoxHorizontal}GetBoxExtendVertical(){return this._extendBoxVertical}UsesCrossSampling(){return this._crossSampling}MustPreDraw(){return this._mustPreDraw}PreservesOpaqueness(){return this._preservesOpaqueness}IsAnimated(){return this._animated}BlendsBackground(){return this._blendsBackground}UsesDepth(){return this._usesDepth}UsesAnySrcRectOrPixelSize(){return this._usesAnySrcRectOrPixelSize}NeedsPostDrawOrExtendsBox(){return this._needsPostDrawOrExtendBox}UsesIsSrcTexRotated(){return false}};\n\n}\n\n// ../lib/gfx/stateGroup.js\n{\n'use strict';const C3=self.C3;\nC3.Gfx.StateGroup=class StateGroup{constructor(renderer,shaderProgram_or_name,blendMode,color,zElevation){this._renderer=renderer;this._refCount=0;this._shaderProgram=null;this._shaderProgramName=\"\";this._blendMode=blendMode;this._color=C3.New(C3.Color);this._color.set(color);this._zElevation=zElevation;if(typeof shaderProgram_or_name===\"string\")this._shaderProgramName=shaderProgram_or_name;else{this._shaderProgram=shaderProgram_or_name;this._shaderProgramName=this._shaderProgram.GetName()}}Release(){if(this._refCount>0)throw new Error(\"releasing state group still in use\");\nthis._renderer=null;this._shaderProgram=null;this._shaderProgramName=\"\"}Apply(){const renderer=this._renderer;renderer.SetProgram(this._shaderProgram);renderer.SetBlendMode(this._blendMode);renderer.SetColor(this._color);renderer.SetCurrentZ(this._zElevation);renderer._SetCurrentStateGroup(this)}GetKey(){return C3.Gfx.StateGroup.MakeKey(this._shaderProgramName,this._blendMode,this._color,this._zElevation)}AddRef(){++this._refCount}DecRef(){--this._refCount}_GetRefCount(){return this._refCount}OnContextLost(){this._shaderProgram=\nnull}OnContextRestored(renderer){this._shaderProgram=renderer.GetShaderProgramByName(this._shaderProgramName);if(!this._shaderProgram)throw new Error(\"failed to restore shader program\");}static MakeKey(shaderProgram_or_name,blendMode,c,zElevation){const shaderProgramName=typeof shaderProgram_or_name===\"string\"?shaderProgram_or_name:shaderProgram_or_name.GetName();return shaderProgramName+\",\"+blendMode+\",\"+c.getR()+\",\"+c.getG()+\",\"+c.getB()+\",\"+c.getA()+\",\"+zElevation}};\n\n}\n\n// ../lib/gfx/mesh.js\n{\n'use strict';const C3=self.C3;const tempQuadTex=C3.New(C3.Quad);function interpolateQuad(srcX,srcY,quad){const qtlx=quad.getTlx();const qtly=quad.getTly();const qtrx=quad.getTrx()-qtlx;const qtry=quad.getTry()-qtly;const qblx=quad.getBlx()-qtlx;const qbly=quad.getBly()-qtly;const xix=qtrx*srcX;const xiy=qtry*srcX;const yix=qblx*srcY;const yiy=qbly*srcY;return[qtlx+xix+yix,qtly+xiy+yiy]}\nC3.Gfx.MeshPoint=class MeshPoint{constructor(mesh,col,row){this._mesh=mesh;this._col=col;this._row=row;this._x=NaN;this._y=NaN;this._zElevation=NaN;this._u=NaN;this._v=NaN;this._x=0;this._y=0;this._zElevation=0;this._u=0;this._v=0}_Init(x,y,u,v){this._x=x;this._y=y;this._u=u;this._v=v}GetX(){return this._x}SetX(x){if(this._x===x)return;this._x=x;this._mesh._SetPointsChanged()}GetY(){return this._y}SetY(y){if(this._y===y)return;this._y=y;this._mesh._SetPointsChanged()}GetZElevation(){return this._zElevation}SetZElevation(z){if(this._zElevation===\nz)return;this._zElevation=Math.max(z,0);this._mesh._SetPointsChanged()}GetU(){return this._u}SetU(u){this._u=u}GetV(){return this._v}SetV(v){this._v=v}_Interpolate_TexRect(srcPoint,quadPos,rcTex){[this._x,this._y]=interpolateQuad(srcPoint._x,srcPoint._y,quadPos);this._zElevation=srcPoint._zElevation;this._u=C3.lerp(rcTex.getLeft(),rcTex.getRight(),srcPoint._u);this._v=C3.lerp(rcTex.getTop(),rcTex.getBottom(),srcPoint._v)}_Interpolate_TexQuad(srcPoint,quadPos,quadTex){[this._x,this._y]=interpolateQuad(srcPoint._x,\nsrcPoint._y,quadPos);this._zElevation=srcPoint._zElevation;[this._u,this._v]=interpolateQuad(srcPoint._u,srcPoint._v,quadTex)}SaveToJson(){return{\"x\":this.GetX(),\"y\":this.GetY(),\"z\":this.GetZElevation(),\"u\":this.GetU(),\"v\":this.GetV()}}LoadFromJson(o){this.SetX(o[\"x\"]);this.SetY(o[\"y\"]);if(o.hasOwnProperty(\"z\"))this.SetZElevation(o[\"z\"]);this.SetU(o[\"u\"]);this.SetV(o[\"v\"])}GetMesh(){return this._mesh}GetColumn(){return this._col}GetRow(){return this._row}};\nC3.Gfx.Mesh=class Mesh{constructor(hsize,vsize,owner){if(hsize<2||vsize<2)throw new Error(\"invalid mesh size\");this._hsize=hsize;this._vsize=vsize;this._owner=owner||null;this._pts=[];this._minX=0;this._minY=0;this._maxX=1;this._maxY=1;this._maxZ=0;this._pointsChanged=false;const lastX=hsize-1;const lastY=vsize-1;for(let y=0;y<vsize;++y){const row=[];for(let x=0;x<hsize;++x){const meshPoint=C3.New(C3.Gfx.MeshPoint,this,x,y);const xf=x/lastX;const yf=y/lastY;meshPoint._Init(xf,yf,xf,yf);row.push(meshPoint)}this._pts.push(row)}}Release(){C3.clearArray(this._pts)}GetHSize(){return this._hsize}GetVSize(){return this._vsize}GetOwner(){return this._owner}_GetPoints(){return this._pts}_SetPointsChanged(){this._pointsChanged=\ntrue}_MaybeComputeBounds(){if(!this._pointsChanged)return;let minX=Infinity;let minY=Infinity;let maxX=-Infinity;let maxY=-Infinity;let maxZ=0;for(const row of this._pts)for(const meshPoint of row){const x=meshPoint.GetX();const y=meshPoint.GetY();minX=Math.min(minX,x);minY=Math.min(minY,y);maxX=Math.max(maxX,x);maxY=Math.max(maxY,y);maxZ=Math.max(maxZ,meshPoint.GetZElevation())}this._minX=minX;this._minY=minY;this._maxX=maxX;this._maxY=maxY;this._maxZ=maxZ;this._pointsChanged=false}GetMinX(){this._MaybeComputeBounds();\nreturn this._minX}GetMinY(){this._MaybeComputeBounds();return this._minY}GetMaxX(){this._MaybeComputeBounds();return this._maxX}GetMaxY(){this._MaybeComputeBounds();return this._maxY}GetMaxZ(){this._MaybeComputeBounds();return this._maxZ}HasAnyZElevation(){return this.GetMaxZ()>0}GetMeshPointAt(x,y){x=Math.floor(x);y=Math.floor(y);if(x<0||x>=this._hsize||y<0||y>=this._vsize)return null;return this._pts[y][x]}CalculateTransformedMesh(srcMesh,quadPos,rcTex_or_quad){const isTexRect=rcTex_or_quad instanceof\nC3.Rect;if(srcMesh.GetHSize()!==this.GetHSize()||srcMesh.GetVSize()!==this.GetVSize())throw new Error(\"source mesh wrong size\");const srcPts=srcMesh._pts;const destPts=this._pts;for(let y=0,lenY=destPts.length;y<lenY;++y){const srcRow=srcPts[y];const destRow=destPts[y];for(let x=0,lenX=destRow.length;x<lenX;++x){const srcPoint=srcRow[x];const destPoint=destRow[x];if(isTexRect)destPoint._Interpolate_TexRect(srcPoint,quadPos,rcTex_or_quad);else destPoint._Interpolate_TexQuad(srcPoint,quadPos,rcTex_or_quad)}}}Draw(renderer){const pts=\nthis._pts;let prevRow=pts[0];for(let y=1,lenY=pts.length;y<lenY;++y){const row=pts[y];let tl=prevRow[0];let bl=row[0];for(let x=1,lenX=row.length;x<lenX;++x){const tr=prevRow[x];const br=row[x];tempQuadTex.set(tl.GetU(),tl.GetV(),tr.GetU(),tr.GetV(),br.GetU(),br.GetV(),bl.GetU(),bl.GetV());renderer.Quad3D2(tl.GetX(),tl.GetY(),tl.GetZElevation(),tr.GetX(),tr.GetY(),tr.GetZElevation(),br.GetX(),br.GetY(),br.GetZElevation(),bl.GetX(),bl.GetY(),bl.GetZElevation(),tempQuadTex);tl=tr;bl=br}prevRow=row}}Outline(renderer,\ntransformFunc){if(!transformFunc)transformFunc=(x,y,z)=>[x,y,z];const pts=this._pts;let prevRow=pts[0];for(let y=1,lenY=pts.length;y<lenY;++y){const row=pts[y];let tl=prevRow[0];let bl=row[0];for(let x=1,lenX=row.length;x<lenX;++x){const tr=prevRow[x];const br=row[x];const [tlx,tly,tlz]=transformFunc(tl.GetX(),tl.GetY(),tl.GetZElevation());const [trx,try_,trz]=transformFunc(tr.GetX(),tr.GetY(),tr.GetZElevation());const [brx,bry,brz]=transformFunc(br.GetX(),br.GetY(),br.GetZElevation());const [blx,\nbly,blz]=transformFunc(bl.GetX(),bl.GetY(),bl.GetZElevation());renderer.Line3D(tlx,tly,tlz,trx,try_,trz);renderer.Line3D(tlx,tly,tlz,brx,bry,brz);renderer.Line3D(tlx,tly,tlz,blx,bly,blz);if(x===lenX-1)renderer.Line3D(trx,try_,trz,brx,bry,brz);if(y===lenY-1)renderer.Line3D(blx,bly,blz,brx,bry,brz);tl=tr;bl=br}prevRow=row}}InsertPolyMeshVertices(srcPoly){const RAY_EXT_DIST=.001;const MIN_RAY_DIST=0;const MAX_RAY_DIST=.99999999;const inPts=srcPoly.pointsArr();const outPts=[];const colCount=this.GetHSize()-\n1;const rowCount=this.GetVSize()-1;const colWidthNorm=1/colCount;const rowHeightNorm=1/rowCount;const lastCol=colCount-1;const lastRow=rowCount-1;let curX=inPts[0];let curY=inPts[1];let curCol=C3.clamp(Math.floor(curX*colCount),0,lastCol);let curRow=C3.clamp(Math.floor(curY*rowCount),0,lastRow);let isUpper=true;let nextX=0;let nextY=0;let rayHit=0;const NOTHING_DISABLED=-1;const DISABLE_DIAGONAL=0;const DISABLE_LEFT_EDGE=1;const DISABLE_TOP_EDGE=2;const DISABLE_RIGHT_EDGE=3;const DISABLE_BOTTOM_EDGE=\n4;let disableCheck=NOTHING_DISABLED;const addVertexAtRayHit=()=>{curX=C3.clamp(C3.lerp(curX,nextX,rayHit),0,1);curY=C3.clamp(C3.lerp(curY,nextY,rayHit),0,1);outPts.push(curX,curY)};for(let i=0,len=inPts.length;i<len;i+=2){curX=inPts[i];curY=inPts[i+1];outPts.push(curX,curY);curCol=C3.clamp(Math.floor(curX*colCount),0,lastCol);curRow=C3.clamp(Math.floor(curY*rowCount),0,lastRow);const j=(i+2)%len;nextX=inPts[j];nextY=inPts[j+1];disableCheck=NOTHING_DISABLED;while(true){if(outPts.length>1E6)throw new Error(\"Too many mesh poly points\");\nconst srcTlx=curCol*colWidthNorm;const srcTly=curRow*rowHeightNorm;const srcBrx=(curCol+1)*colWidthNorm;const srcBry=(curRow+1)*rowHeightNorm;isUpper=C3.isPointInTriangleInclusive(curX,curY,srcTlx,srcTly,srcBrx,srcTly,srcBrx,srcBry);if(disableCheck!==DISABLE_DIAGONAL){rayHit=C3.rayIntersectExtended(curX,curY,nextX,nextY,srcTlx,srcTly,srcBrx,srcBry,-RAY_EXT_DIST);if(rayHit>=MIN_RAY_DIST&&rayHit<=MAX_RAY_DIST){addVertexAtRayHit();isUpper=!isUpper;disableCheck=DISABLE_DIAGONAL;continue}}if(curRow>0&&\ndisableCheck!==DISABLE_TOP_EDGE){rayHit=C3.rayIntersectExtended(curX,curY,nextX,nextY,srcTlx,srcTly,srcBrx,srcTly,RAY_EXT_DIST);if(rayHit>=MIN_RAY_DIST&&rayHit<=MAX_RAY_DIST){addVertexAtRayHit();curRow--;isUpper=false;disableCheck=DISABLE_BOTTOM_EDGE;continue}}if(curCol<lastCol&&disableCheck!==DISABLE_RIGHT_EDGE){rayHit=C3.rayIntersectExtended(curX,curY,nextX,nextY,srcBrx,srcTly,srcBrx,srcBry,RAY_EXT_DIST);if(rayHit>=MIN_RAY_DIST&&rayHit<=MAX_RAY_DIST){addVertexAtRayHit();curCol++;isUpper=false;disableCheck=\nDISABLE_LEFT_EDGE;continue}}if(curCol>0&&disableCheck!==DISABLE_LEFT_EDGE){rayHit=C3.rayIntersectExtended(curX,curY,nextX,nextY,srcTlx,srcTly,srcTlx,srcBry,RAY_EXT_DIST);if(rayHit>=MIN_RAY_DIST&&rayHit<=MAX_RAY_DIST){addVertexAtRayHit();curCol--;isUpper=true;disableCheck=DISABLE_RIGHT_EDGE;continue}}if(curRow<lastRow&&disableCheck!==DISABLE_BOTTOM_EDGE){rayHit=C3.rayIntersectExtended(curX,curY,nextX,nextY,srcTlx,srcBry,srcBrx,srcBry,RAY_EXT_DIST);if(rayHit>=MIN_RAY_DIST&&rayHit<=MAX_RAY_DIST){addVertexAtRayHit();\ncurRow++;isUpper=true;disableCheck=DISABLE_TOP_EDGE;continue}}break}}return C3.New(C3.CollisionPoly,outPts)}TransformCollisionPoly(srcPoly,destPoly){const ptsArr=this._TransformPolyPoints(srcPoly);this._SimplifyPoly(ptsArr);destPoly.setPoints(ptsArr)}_TransformPolyPoints(srcPoly){const outPts=[];const ptsArr=srcPoly.pointsArr();for(let i=0,len=ptsArr.length;i<len;i+=2){const srcX=ptsArr[i];const srcY=ptsArr[i+1];const [destX,destY]=this.TransformPoint(srcX,srcY);outPts.push(destX,destY)}return outPts}TransformPoint(srcX,\nsrcY){const lastCol=this.GetHSize()-1;const lastRow=this.GetVSize()-1;const colWidthNorm=1/lastCol;const rowHeightNorm=1/lastRow;const srcCol=C3.clamp(Math.floor(srcX*lastCol),0,lastCol-1);const srcRow=C3.clamp(Math.floor(srcY*lastRow),0,lastRow-1);const srcTlx=srcCol*colWidthNorm;const srcTly=srcRow*rowHeightNorm;const srcBrx=(srcCol+1)*colWidthNorm;const srcBry=(srcRow+1)*rowHeightNorm;const destTl=this.GetMeshPointAt(srcCol,srcRow);const destBr=this.GetMeshPointAt(srcCol+1,srcRow+1);const isUpper=\nC3.isPointInTriangleInclusive(srcX,srcY,srcTlx,srcTly,srcBrx,srcTly,srcBrx,srcBry);const srcAltX=isUpper?srcTlx+colWidthNorm:srcTlx;const srcAltY=isUpper?srcTly:srcTly+rowHeightNorm;const destAlt=this.GetMeshPointAt(srcCol+(isUpper?1:0),srcRow+(isUpper?0:1));const [u,v,w]=C3.triangleCartesianToBarycentric(srcX,srcY,srcTlx,srcTly,srcAltX,srcAltY,srcBrx,srcBry);return C3.triangleBarycentricToCartesian3d(u,v,w,destTl.GetX(),destTl.GetY(),destTl.GetZElevation(),destAlt.GetX(),destAlt.GetY(),destAlt.GetZElevation(),\ndestBr.GetX(),destBr.GetY(),destBr.GetZElevation())}_SimplifyPoly(ptsArr){const outPts=[];const NZ_EPSILON=1E-7;const R_EPSILON=.001;let curX=ptsArr[0];let curY=ptsArr[1];let lastDx=curX-ptsArr.at(-2);let lastDy=curY-ptsArr.at(-1);for(let i=0,len=ptsArr.length;i<len;i+=2){const j=(i+2)%len;const nextX=ptsArr[j];const nextY=ptsArr[j+1];const dx=nextX-curX;const dy=nextY-curY;const bothXNearZero=Math.abs(dx)<NZ_EPSILON&&Math.abs(lastDx)<NZ_EPSILON&&Math.sign(dy)===Math.sign(lastDy);const bothYNearZero=\nMath.abs(dy)<NZ_EPSILON&&Math.abs(lastDy)<NZ_EPSILON&&Math.sign(dx)===Math.sign(lastDx);if(!bothXNearZero&&!bothYNearZero&&Math.abs(dx/lastDx-dy/lastDy)>R_EPSILON||dx==0&&dy===0)outPts.push(curX,curY);curX=nextX;curY=nextY;lastDx=dx;lastDy=dy}if(outPts.length>=6&&outPts.length<ptsArr.length)C3.shallowAssignArray(ptsArr,outPts)}SaveToJson(){return{\"cols\":this.GetHSize(),\"rows\":this.GetVSize(),\"points\":this._pts.map(row=>row.map(pt=>pt.SaveToJson()))}}LoadFromJson(o){const cols=this.GetHSize();const rows=\nthis.GetVSize();if(o[\"cols\"]!==cols||o[\"rows\"]!==rows)throw new Error(\"mesh data wrong size\");const meshRows=o[\"points\"];for(let y=0;y<rows;++y){const rowData=meshRows[y];for(let x=0;x<cols;++x){const pt=this.GetMeshPointAt(x,y);pt.LoadFromJson(rowData[x])}}}};\n\n}\n\n// ../lib/gfx/webgl/texture.js\n{\n'use strict';const C3=self.C3;const VALID_PIXEL_FORMATS=new Set([\"rgba8\",\"rgb8\",\"rgba4\",\"rgb5_a1\",\"rgb565\"]);const VALID_SAMPLINGS=new Set([\"nearest\",\"bilinear\",\"trilinear\"]);const VALID_MIPMAP_QUALITIES=new Set([\"default\",\"low\",\"high\"]);const VALID_WRAP_MODES=new Set([\"clamp-to-edge\",\"repeat\",\"mirror-repeat\"]);\nfunction GetFormatSpecifiers(pixelFormat,gl){let sizedinternalformat;let internalformat;let format;let type;switch(pixelFormat){case \"rgba8\":sizedinternalformat=gl.RGBA8;internalformat=gl.RGBA;format=gl.RGBA;type=gl.UNSIGNED_BYTE;break;case \"rgb8\":sizedinternalformat=gl.RGB8;internalformat=gl.RGB;format=gl.RGB;type=gl.UNSIGNED_BYTE;break;case \"rgba4\":sizedinternalformat=gl.RGBA4;internalformat=gl.RGBA;format=gl.RGBA;type=gl.UNSIGNED_SHORT_4_4_4_4;break;case \"rgb5_a1\":sizedinternalformat=gl.RGB5_A1;\ninternalformat=gl.RGBA;format=gl.RGBA;type=gl.UNSIGNED_SHORT_5_5_5_1;break;case \"rgb565\":sizedinternalformat=gl.RGB565;internalformat=gl.RGB;format=gl.RGB;type=gl.UNSIGNED_SHORT_5_6_5;break;default:throw new Error(\"invalid pixel format\");}return{sizedinternalformat,internalformat,format,type}}\nconst CREATEFROM_DEFAULT_OPTIONS={wrapX:\"clamp-to-edge\",wrapY:\"clamp-to-edge\",sampling:\"trilinear\",anisotropy:0,pixelFormat:\"rgba8\",mipMap:true,mipMapQuality:\"default\",premultiplyAlpha:true,isSvg:false,width:-1,height:-1};const UPDATE_DEFAULT_OPTIONS={premultiplyAlpha:true,flipY:false};const allTextures=new Set;\nC3.Gfx.WebGLRendererTexture=class WebGLRendererTexture{constructor(renderer){this._renderer=renderer;this._texture=null;this._width=0;this._height=0;this._isStatic=true;this._wrapX=\"clamp-to-edge\";this._wrapY=\"clamp-to-edge\";this._sampling=\"trilinear\";this._anisotropy=0;this._pixelFormat=\"rgba8\";this._isMipMapped=false;this._mipMapQuality=\"default\";this._refCount=0}_CreateStatic(data,opts){if((typeof HTMLImageElement===\"undefined\"||!(data instanceof HTMLImageElement))&&(typeof HTMLCanvasElement===\n\"undefined\"||!(data instanceof HTMLCanvasElement))&&(typeof ImageBitmap===\"undefined\"||!(data instanceof ImageBitmap))&&(typeof OffscreenCanvas===\"undefined\"||!(data instanceof OffscreenCanvas))&&!(data instanceof ImageData)&&!(data instanceof ArrayBuffer)&&data!==null)throw new Error(\"invalid texture source\");opts=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,opts);if(this._texture)throw new Error(\"already created texture\");this._wrapX=opts.wrapX;this._wrapY=opts.wrapY;this._sampling=opts.sampling;\nthis._anisotropy=opts.anisotropy;this._pixelFormat=opts.pixelFormat;this._isMipMapped=!!opts.mipMap&&this._renderer.AreMipmapsEnabled();this._mipMapQuality=opts.mipMapQuality;if(!VALID_WRAP_MODES.has(this._wrapX)||!VALID_WRAP_MODES.has(this._wrapY))throw new Error(\"invalid wrap mode\");if(!VALID_SAMPLINGS.has(this._sampling))throw new Error(\"invalid sampling\");if(!VALID_PIXEL_FORMATS.has(this._pixelFormat))throw new Error(\"invalid pixel format\");if(!VALID_MIPMAP_QUALITIES.has(this._mipMapQuality))throw new Error(\"invalid mipmap quality\");\nthis._isStatic=true;if(data instanceof ArrayBuffer||data===null||opts.isSvg){this._width=opts.width;this._height=opts.height;if(data instanceof ArrayBuffer&&data.byteLength!==this._width*this._height*4)throw new Error(\"ArrayBuffer wrong size\");}else{this._width=data.width;this._height=data.height}if(this._width<=0||this._height<=0)throw new Error(\"invalid texture data size\");if(opts.isSvg){const canvas=C3.CreateCanvas(this._width,this._height);const ctx=canvas.getContext(\"2d\");ctx.drawImage(data,\n0,0,this._width,this._height);data=canvas}const isPOT=C3.isPOT(this._width)&&C3.isPOT(this._height);const maxTextureSize=this._renderer.GetMaxTextureSize();if(this._width>maxTextureSize||this._height>maxTextureSize)throw new Error(\"texture data exceeds maximum texture size\");const gl=this._renderer.GetContext();const webglVersion=this._renderer.GetWebGLVersionNumber();this._texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,this._texture);gl.pixelStorei(gl[\"UNPACK_PREMULTIPLY_ALPHA_WEBGL\"],opts.premultiplyAlpha);\ngl.pixelStorei(gl[\"UNPACK_FLIP_Y_WEBGL\"],false);const formatspec=GetFormatSpecifiers(this._pixelFormat,gl);if(!this._renderer.SupportsNPOTTextures()&&!isPOT&&this._IsTiled()){if(data===null)throw new Error(\"cannot pass null data when creating a NPOT tiled texture without NPOT support\");if(data instanceof ArrayBuffer)data=new ImageData(new Uint8ClampedArray(data),this._width,this._height);if(data instanceof ImageData){const tmpCanvas=C3.CreateCanvas(this._width,this._height);const tmpCtx=tmpCanvas.getContext(\"2d\");\ntmpCtx.putImageData(data,0,0);data=tmpCanvas}const canvas=C3.CreateCanvas(C3.nextHighestPowerOfTwo(this._width),C3.nextHighestPowerOfTwo(this._height));const ctx=canvas.getContext(\"2d\");ctx.imageSmoothingEnabled=this._sampling!==\"nearest\";ctx.drawImage(data,0,0,this._width,this._height,0,0,canvas.width,canvas.height);gl.texImage2D(gl.TEXTURE_2D,0,formatspec.internalformat,formatspec.format,formatspec.type,canvas)}else if(webglVersion>=2){let levels;if(this._isMipMapped)levels=Math.floor(Math.log2(Math.max(this._width,\nthis._height))+1);else levels=1;gl.texStorage2D(gl.TEXTURE_2D,levels,formatspec.sizedinternalformat,this._width,this._height);if(data instanceof ArrayBuffer)gl.texSubImage2D(gl.TEXTURE_2D,0,0,0,this._width,this._height,formatspec.format,formatspec.type,new Uint8Array(data));else if(data!==null)gl.texSubImage2D(gl.TEXTURE_2D,0,0,0,formatspec.format,formatspec.type,data)}else if(data instanceof ArrayBuffer)gl.texImage2D(gl.TEXTURE_2D,0,formatspec.internalformat,this._width,this._height,0,formatspec.format,\nformatspec.type,new Uint8Array(data));else if(data===null)gl.texImage2D(gl.TEXTURE_2D,0,formatspec.internalformat,this._width,this._height,0,formatspec.format,formatspec.type,null);else gl.texImage2D(gl.TEXTURE_2D,0,formatspec.internalformat,formatspec.format,formatspec.type,data);if(data!==null)this._SetTextureParameters(gl);gl.bindTexture(gl.TEXTURE_2D,null);this._renderer._ResetLastTexture();this._refCount=1;allTextures.add(this)}_CreateDynamic(width,height,opts){opts=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,\nopts);if(this._texture)throw new Error(\"already created texture\");this._wrapX=opts.wrapX;this._wrapY=opts.wrapY;this._sampling=opts.sampling;this._pixelFormat=opts.pixelFormat;this._isMipMapped=!!opts.mipMap&&this._renderer.AreMipmapsEnabled();this._mipMapQuality=opts.mipMapQuality;if(!VALID_WRAP_MODES.has(this._wrapX)||!VALID_WRAP_MODES.has(this._wrapY))throw new Error(\"invalid wrap mode\");if(!VALID_SAMPLINGS.has(this._sampling))throw new Error(\"invalid sampling\");if(!VALID_PIXEL_FORMATS.has(this._pixelFormat))throw new Error(\"invalid pixel format\");\nif(!VALID_MIPMAP_QUALITIES.has(this._mipMapQuality))throw new Error(\"invalid mipmap quality\");this._isStatic=false;this._width=Math.floor(width);this._height=Math.floor(height);const isPOT=C3.isPOT(this._width)&&C3.isPOT(this._height);const maxTextureSize=this._renderer.GetMaxTextureSize();if(this._width<=0||this._height<=0)throw new Error(\"invalid texture size\");if(this._width>maxTextureSize||this._height>maxTextureSize)throw new Error(\"texture exceeds maximum texture size\");if(!this._renderer.SupportsNPOTTextures()&&\nthis._IsTiled()&&!isPOT)throw new Error(\"non-power-of-two tiled textures not supported\");const gl=this._renderer.GetContext();const webglVersion=this._renderer.GetWebGLVersionNumber();this._texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,this._texture);gl.pixelStorei(gl[\"UNPACK_PREMULTIPLY_ALPHA_WEBGL\"],opts.premultiplyAlpha);gl.pixelStorei(gl[\"UNPACK_FLIP_Y_WEBGL\"],false);const formatspec=GetFormatSpecifiers(this._pixelFormat,gl);const internalformat=webglVersion>=2?formatspec.sizedinternalformat:\nformatspec.internalformat;gl.texImage2D(gl.TEXTURE_2D,0,internalformat,this._width,this._height,0,formatspec.format,formatspec.type,null);this._SetTextureParameters(gl);gl.bindTexture(gl.TEXTURE_2D,null);this._renderer._ResetLastTexture();this._refCount=1;allTextures.add(this)}_GetMipMapHint(gl){if(this._mipMapQuality===\"default\")return this._isStatic?gl.NICEST:gl.FASTEST;else if(this._mipMapQuality===\"low\")return gl.FASTEST;else if(this._mipMapQuality===\"high\")return gl.NICEST;else throw new Error(\"invalid mipmap quality\");\n}_IsTiled(){return this._wrapX!==\"clamp-to-edge\"||this._wrapY!==\"clamp-to-edge\"}_GetTextureWrapMode(gl,wrapMode){if(wrapMode===\"clamp-to-edge\")return gl.CLAMP_TO_EDGE;else if(wrapMode===\"repeat\")return gl.REPEAT;else if(wrapMode===\"mirror-repeat\")return gl.MIRRORED_REPEAT;else throw new Error(\"invalid wrap mode\");}_SetTextureParameters(gl){const isPOT=C3.isPOT(this._width)&&C3.isPOT(this._height);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,this._GetTextureWrapMode(gl,this._wrapX));gl.texParameteri(gl.TEXTURE_2D,\ngl.TEXTURE_WRAP_T,this._GetTextureWrapMode(gl,this._wrapY));if(this._sampling===\"nearest\"){gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);this._isMipMapped=false}else{gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);if((isPOT||this._renderer.SupportsNPOTTextures())&&this._isMipMapped){gl.hint(gl.GENERATE_MIPMAP_HINT,this._GetMipMapHint(gl));gl.generateMipmap(gl.TEXTURE_2D);const useTrilinear=this._sampling===\n\"trilinear\"&&!this._renderer.HasMajorPerformanceCaveat();gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,useTrilinear?gl.LINEAR_MIPMAP_LINEAR:gl.LINEAR_MIPMAP_NEAREST)}else{gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);this._isMipMapped=false}}const anisotropicExt=this._renderer._GetAnisotropicExtension();if(anisotropicExt&&this._anisotropy>0&&this._sampling!==\"nearest\")gl.texParameterf(gl.TEXTURE_2D,anisotropicExt[\"TEXTURE_MAX_ANISOTROPY_EXT\"],Math.min(this._anisotropy,this._renderer._GetMaxAnisotropy()))}_Update(data,\nopts){if((typeof HTMLImageElement===\"undefined\"||!(data instanceof HTMLImageElement))&&(typeof HTMLVideoElement===\"undefined\"||!(data instanceof HTMLVideoElement))&&(typeof HTMLCanvasElement===\"undefined\"||!(data instanceof HTMLCanvasElement))&&(typeof ImageBitmap===\"undefined\"||!(data instanceof ImageBitmap))&&(typeof OffscreenCanvas===\"undefined\"||!(data instanceof OffscreenCanvas))&&!(data instanceof ImageData))throw new Error(\"invalid texture source\");if(!this._texture||this._refCount<=0)throw new Error(\"texture not created\");\nif(this._isStatic)throw new Error(\"cannot update static texture\");opts=Object.assign({},UPDATE_DEFAULT_OPTIONS,opts);const dataWidth=data.width||data.videoWidth;const dataHeight=data.height||data.videoHeight;const webglVersion=this._renderer.GetWebGLVersionNumber();const gl=this._renderer.GetContext();gl.bindTexture(gl.TEXTURE_2D,this._texture);gl.pixelStorei(gl[\"UNPACK_PREMULTIPLY_ALPHA_WEBGL\"],opts.premultiplyAlpha);gl.pixelStorei(gl[\"UNPACK_FLIP_Y_WEBGL\"],!!opts.flipY);const formatspec=GetFormatSpecifiers(this._pixelFormat,\ngl);const internalformat=webglVersion>=2?formatspec.sizedinternalformat:formatspec.internalformat;try{if(this._width===dataWidth&&this._height===dataHeight){const isPOT=C3.isPOT(this._width)&&C3.isPOT(this._height);gl.texSubImage2D(gl.TEXTURE_2D,0,0,0,formatspec.format,formatspec.type,data);if((isPOT||this._renderer.SupportsNPOTTextures())&&this._isMipMapped){gl.hint(gl.GENERATE_MIPMAP_HINT,this._GetMipMapHint(gl));gl.generateMipmap(gl.TEXTURE_2D)}}else{this._width=dataWidth;this._height=dataHeight;\nconst isPOT=C3.isPOT(this._width)&&C3.isPOT(this._height);if(!this._renderer.SupportsNPOTTextures()&&this._IsTiled()&&!isPOT)throw new Error(\"non-power-of-two tiled textures not supported\");gl.texImage2D(gl.TEXTURE_2D,0,internalformat,formatspec.format,formatspec.type,data);if((isPOT||this._renderer.SupportsNPOTTextures())&&this._isMipMapped){gl.hint(gl.GENERATE_MIPMAP_HINT,this._GetMipMapHint(gl));gl.generateMipmap(gl.TEXTURE_2D)}}}catch(e){console.error(\"Error updating WebGL texture: \",e)}gl.bindTexture(gl.TEXTURE_2D,\nnull);this._renderer._ResetLastTexture()}_Delete(){if(this._refCount>0)throw new Error(\"texture still has references\");if(!this._texture)throw new Error(\"already deleted texture\");allTextures.delete(this);const gl=this._renderer.GetContext();gl.deleteTexture(this._texture);this._texture=null}IsValid(){return!!this._texture}_GetTexture(){return this._texture}GetRenderer(){return this._renderer}AddReference(){this._refCount++}SubtractReference(){if(this._refCount<=0)throw new Error(\"no more references\");\nthis._refCount--}GetReferenceCount(){return this._refCount}GetWidth(){return this._width}GetHeight(){return this._height}IsStatic(){return this._isStatic}GetEstimatedMemoryUsage(){let size=this._width*this._height;switch(this._pixelFormat){case \"rgba8\":size*=4;break;case \"rgb8\":size*=3;break;case \"rgba4\":case \"rgb5_a1\":case \"rgb565\":size*=2;break}if(this._isMipMapped)size+=Math.floor(size/3);return size}static OnContextLost(){allTextures.clear()}static allTextures(){return allTextures.values()}};\n\n}\n\n// ../lib/gfx/webgl/renderTarget.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const mat4=glMatrix.mat4;const VALID_SAMPLINGS=new Set([\"nearest\",\"bilinear\",\"trilinear\"]);const DEFAULT_RENDERTARGET_OPTIONS={sampling:\"trilinear\",alpha:true,depth:false,isSampled:true,isDefaultSize:true,multisampling:0};const allRenderTargets=new Set;\nC3.Gfx.WebGLRenderTarget=class WebGLRenderTarget{constructor(renderer){this._renderer=renderer;this._frameBuffer=null;this._frameBufferNoDepth=null;this._texture=null;this._renderBuffer=null;this._width=0;this._height=0;this._isDefaultSize=true;this._sampling=\"trilinear\";this._alpha=true;this._depth=false;this._isSampled=true;this._multisampling=0;this._projectionMatrix=mat4.create();this._lastFov=0;this._lastNearZ=0;this._lastFarZ=0}_Create(width,height,opts){opts=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,\nopts);const webGLVersion=this._renderer.GetWebGLVersionNumber();if(this._texture||this._renderBuffer)throw new Error(\"already created render target\");this._sampling=opts.sampling;this._alpha=!!opts.alpha;this._depth=!!opts.depth;this._isSampled=!!opts.isSampled;this._isDefaultSize=!!opts.isDefaultSize;this._multisampling=opts.multisampling;if(!VALID_SAMPLINGS.has(this._sampling))throw new Error(\"invalid sampling\");if(this._multisampling>0&&(webGLVersion<2||this._isSampled))throw new Error(\"invalid use of multisampling\");\nif(webGLVersion<2)this._isSampled=true;this._width=width;this._height=height;if(this._width<=0||this._height<=0)throw new Error(\"invalid render target size\");this._CalculateProjection();const gl=this._renderer.GetContext();this._frameBuffer=gl.createFramebuffer();if(this._depth)this._frameBufferNoDepth=gl.createFramebuffer();if(this._isSampled){this._texture=this._renderer.CreateDynamicTexture(this._width,this._height,{sampling:this._sampling,pixelFormat:this._alpha?\"rgba8\":\"rgb8\",mipMap:false});\nconst tex=this._texture._GetTexture();gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBuffer);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,tex,0);if(this._depth){gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBufferNoDepth);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,tex,0)}}else{this._renderBuffer=gl.createRenderbuffer();gl.bindRenderbuffer(gl.RENDERBUFFER,this._renderBuffer);const internalFormat=this._alpha?gl.RGBA8:gl.RGB8;if(this._multisampling>\n0){const formatSamples=gl.getInternalformatParameter(gl.RENDERBUFFER,internalFormat,gl.SAMPLES);if(formatSamples&&formatSamples[0]){const maxSamples=formatSamples[0];if(this._multisampling>maxSamples)this._multisampling=maxSamples}else this._multisampling=0}if(this._multisampling===0)gl.renderbufferStorage(gl.RENDERBUFFER,internalFormat,this._width,this._height);else gl.renderbufferStorageMultisample(gl.RENDERBUFFER,this._multisampling,internalFormat,this._width,this._height);gl.bindFramebuffer(gl.FRAMEBUFFER,\nthis._frameBuffer);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.RENDERBUFFER,this._renderBuffer);if(this._depth){gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBufferNoDepth);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.RENDERBUFFER,this._renderBuffer)}gl.bindRenderbuffer(gl.RENDERBUFFER,null)}const rendererDepthBuffer=this._renderer._GetDepthBuffer();if(this._depth&&rendererDepthBuffer){gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBuffer);if(this._renderer._CanSampleDepth())gl.framebufferTexture2D(gl.FRAMEBUFFER,\ngl.DEPTH_STENCIL_ATTACHMENT,gl.TEXTURE_2D,rendererDepthBuffer,0);else gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_STENCIL_ATTACHMENT,gl.RENDERBUFFER,rendererDepthBuffer)}gl.bindFramebuffer(gl.FRAMEBUFFER,null);allRenderTargets.add(this)}_Resize(width,height){if(this._width===width&&this._height===height)return;this._width=width;this._height=height;this._CalculateProjection();const gl=this._renderer.GetContext();gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBuffer);if(this._texture)this._texture._Update(new ImageData(this._width,\nthis._height));else{gl.bindRenderbuffer(gl.RENDERBUFFER,this._renderBuffer);gl.renderbufferStorage(gl.RENDERBUFFER,this._alpha?gl.RGBA8:gl.RGB8,this._width,this._height);gl.bindRenderbuffer(gl.RENDERBUFFER,null)}const rendererDepthBuffer=this._renderer._GetDepthBuffer();if(this._depth&&rendererDepthBuffer)if(this._renderer._CanSampleDepth())gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.DEPTH_STENCIL_ATTACHMENT,gl.TEXTURE_2D,rendererDepthBuffer,0);else gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_STENCIL_ATTACHMENT,\ngl.RENDERBUFFER,rendererDepthBuffer);gl.bindFramebuffer(gl.FRAMEBUFFER,null)}_Delete(){if(!this._texture&&!this._renderBuffer)throw new Error(\"already deleted render target\");allRenderTargets.delete(this);const gl=this._renderer.GetContext();if(this._texture){gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBuffer);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,null,0);if(this._depth){gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBufferNoDepth);gl.framebufferTexture2D(gl.FRAMEBUFFER,\ngl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,null,0)}this._renderer.DeleteTexture(this._texture);this._texture=null}else if(this._renderBuffer){gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBuffer);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.RENDERBUFFER,null);if(this._depth){gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBufferNoDepth);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.RENDERBUFFER,null)}gl.deleteRenderbuffer(this._renderBuffer);this._renderBuffer=null}gl.bindFramebuffer(gl.FRAMEBUFFER,\nnull);if(this._renderer.GetWebGLVersionNumber()>=2){gl.bindFramebuffer(gl.READ_FRAMEBUFFER,null);gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER,null)}gl.deleteFramebuffer(this._frameBuffer);if(this._depth)gl.deleteFramebuffer(this._frameBufferNoDepth);const batchState=this._renderer.GetBatchState();batchState.currentFramebuffer=null;batchState.currentFramebufferNoDepth=null;this._frameBuffer=null}_CalculateProjection(){this._renderer.CalculatePerspectiveMatrix(this._projectionMatrix,this._width/this._height);\nthis._lastFov=this._renderer.GetFovY();this._lastNearZ=this._renderer.GetNearZ();this._lastFarZ=this._renderer.GetFarZ()}_GetFramebuffer(){return this._frameBuffer}_GetFramebufferNoDepth(){return this._frameBufferNoDepth}GetRenderer(){return this._renderer}GetTexture(){return this._texture}GetProjectionMatrix(){if(this._renderer.GetFovY()!==this._lastFov||this._renderer.GetNearZ()!==this._lastNearZ||this._renderer.GetFarZ()!==this._lastFarZ)this._CalculateProjection();return this._projectionMatrix}IsLinearSampling(){return this._sampling!==\n\"nearest\"}HasAlpha(){return this._alpha}IsSampled(){return this._isSampled}HasDepthBuffer(){return this._depth}GetWidth(){return this._width}GetHeight(){return this._height}IsDefaultSize(){return this._isDefaultSize}GetMultisampling(){return this._multisampling}GetOptions(){const ret={sampling:this._sampling,alpha:this._alpha,isSampled:this._isSampled};if(!this._isDefaultSize){ret.width=this._width;ret.height=this._height}return ret}IsCompatibleWithOptions(opts){opts=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,\nopts);if(opts.sampling!==\"nearest\"!==this.IsLinearSampling())return false;if(!!opts.alpha!==this.HasAlpha())return false;if(!!opts.depth!==this.HasDepthBuffer())return false;if(this._renderer.GetWebGLVersionNumber()>=2)if(!!opts.isSampled!==this.IsSampled())return false;if(typeof opts.width===\"number\"||typeof opts.height===\"number\")return!this.IsDefaultSize()&&this.GetWidth()===Math.floor(opts.width)&&this.GetHeight()===Math.floor(opts.height);else return this.IsDefaultSize()}_GetWebGLTexture(){if(!this._texture)return null;\nreturn this._texture._GetTexture()}GetEstimatedMemoryUsage(){if(this._texture)return this._texture.GetEstimatedMemoryUsage();return this._width*this._height*(this._alpha?4:3)}static async DebugReadPixelsToBlob(renderer,renderTarget){const imageData=await renderer.ReadBackRenderTargetToImageData(renderTarget,true);return await C3.ImageDataToBlob(imageData)}static OnContextLost(){allRenderTargets.clear()}static allRenderTargets(){return allRenderTargets.values()}static ResizeAll(width,height){for(const rt of allRenderTargets)if(rt.IsDefaultSize())rt._Resize(width,\nheight)}};\n\n}\n\n// ../lib/gfx/webgl/shaderProgram.js\n{\n'use strict';const C3=self.C3;const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const mat4=glMatrix.mat4;\nconst RESERVED_UNIFORM_NAMES=new Set([\"aPos\",\"aTex\",\"aPoints\",\"matP\",\"matMV\",\"samplerFront\",\"samplerBack\",\"samplerDepth\",\"destStart\",\"destEnd\",\"srcStart\",\"srcEnd\",\"srcOriginStart\",\"srcOriginEnd\",\"pixelSize\",\"seconds\",\"devicePixelRatio\",\"layerScale\",\"layerAngle\",\"layoutStart\",\"layoutEnd\",\"color\",\"color2_\",\"pointTexStart\",\"pointTexEnd\",\"zElevation\",\"tileSize\",\"tileSpacing\",\"outlineThickness\",\"zNear\",\"zFar\"]);\nC3.Gfx.WebGLShaderProgram=class WebGLShaderProgram extends C3.Gfx.ShaderProgramBase{static async Compile(renderer,shaderInfo){const gl=renderer.GetContext();const fragSrc=shaderInfo.src;const vertexSrc=shaderInfo.vertexSrc;const name=shaderInfo.name;const fragmentShader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(fragmentShader,fragSrc);gl.compileShader(fragmentShader);const vertexShader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vertexShader,vertexSrc);gl.compileShader(vertexShader);\nconst shaderProgram=gl.createProgram();gl.attachShader(shaderProgram,fragmentShader);gl.attachShader(shaderProgram,vertexShader);gl.bindAttribLocation(shaderProgram,0,\"aPos\");gl.bindAttribLocation(shaderProgram,1,\"aTex\");gl.bindAttribLocation(shaderProgram,2,\"aPoints\");gl.linkProgram(shaderProgram);const parallelShaderCompileExt=renderer._GetParallelShaderCompileExtension();if(parallelShaderCompileExt)await renderer._WaitForObjectReady(()=>gl.getProgramParameter(shaderProgram,parallelShaderCompileExt[\"COMPLETION_STATUS_KHR\"]));\nelse await C3.Wait(5);if(!gl.getShaderParameter(fragmentShader,gl.COMPILE_STATUS)){const log=gl.getShaderInfoLog(fragmentShader);gl.deleteShader(fragmentShader);gl.deleteShader(vertexShader);gl.deleteProgram(shaderProgram);throw new Error(\"Error compiling fragment shader: \"+log);}if(!gl.getShaderParameter(vertexShader,gl.COMPILE_STATUS)){const log=gl.getShaderInfoLog(vertexShader);gl.deleteShader(fragmentShader);gl.deleteShader(vertexShader);gl.deleteProgram(shaderProgram);throw new Error(\"Error compiling vertex shader: \"+\nlog);}if(!gl.getProgramParameter(shaderProgram,gl.LINK_STATUS)){const log=gl.getProgramInfoLog(shaderProgram);gl.deleteShader(fragmentShader);gl.deleteShader(vertexShader);gl.deleteProgram(shaderProgram);throw new Error(\"Error linking shader program: \"+log);}const infoLog=C3.FilterUnprintableChars(gl.getProgramInfoLog(shaderProgram)||\"\").trim();if(infoLog&&!C3.IsStringAllWhitespace(infoLog))console.info(`[WebGL] Shader program '${name}' compilation log: `,infoLog);gl.deleteShader(fragmentShader);\ngl.deleteShader(vertexShader);return shaderProgram}static async Create(renderer,shaderInfo){const shaderProgram=await C3.Gfx.WebGLShaderProgram.Compile(renderer,shaderInfo);return new C3.Gfx.WebGLShaderProgram(renderer,shaderProgram,shaderInfo)}constructor(renderer,shaderProgram,shaderInfo){super(renderer,shaderInfo);const gl=renderer.GetContext();const batchState=renderer.GetBatchState();renderer.EndBatch();gl.useProgram(shaderProgram);this._gl=gl;this._shaderProgram=shaderProgram;this._isDeviceTransform=\nshaderInfo.name===\"<default-device-transform>\";const locAPos=gl.getAttribLocation(shaderProgram,\"aPos\");const locATex=gl.getAttribLocation(shaderProgram,\"aTex\");this._locAPoints=gl.getAttribLocation(shaderProgram,\"aPoints\");if(locAPos!==-1){gl.bindBuffer(gl.ARRAY_BUFFER,renderer._vertexBuffer);gl.vertexAttribPointer(locAPos,renderer.GetNumVertexComponents(),gl.FLOAT,false,0,0);gl.enableVertexAttribArray(locAPos)}if(locATex!==-1){gl.bindBuffer(gl.ARRAY_BUFFER,renderer._texcoordBuffer);gl.vertexAttribPointer(locATex,\n2,gl.FLOAT,false,0,0);gl.enableVertexAttribArray(locATex)}if(this._locAPoints!==-1){gl.bindBuffer(gl.ARRAY_BUFFER,renderer._pointBuffer);gl.vertexAttribPointer(this._locAPoints,4,gl.FLOAT,false,0,0);gl.enableVertexAttribArray(this._locAPoints)}gl.bindBuffer(gl.ARRAY_BUFFER,null);this._uMatP=new C3.Gfx.WebGLShaderUniform(this,\"matP\",\"mat4\");this._uMatMV=new C3.Gfx.WebGLShaderUniform(this,\"matMV\",\"mat4\");this._uColor=new C3.Gfx.WebGLShaderUniform(this,\"color\",\"vec4\");this._uSamplerFront=new C3.Gfx.WebGLShaderUniform(this,\n\"samplerFront\",\"sampler\");this._uPointTexStart=new C3.Gfx.WebGLShaderUniform(this,\"pointTexStart\",\"vec2\");this._uPointTexEnd=new C3.Gfx.WebGLShaderUniform(this,\"pointTexEnd\",\"vec2\");this._uZElevation=new C3.Gfx.WebGLShaderUniform(this,\"zElevation\",\"float\");this._uTileSize=new C3.Gfx.WebGLShaderUniform(this,\"tileSize\",\"vec2\");this._uTileSpacing=new C3.Gfx.WebGLShaderUniform(this,\"tileSpacing\",\"vec2\");this._uColor2=new C3.Gfx.WebGLShaderUniform(this,\"color2_\",\"vec4\");this._uOutlineThickness=new C3.Gfx.WebGLShaderUniform(this,\n\"outlineThickness\",\"float\");this._uSamplerBack=new C3.Gfx.WebGLShaderUniform(this,\"samplerBack\",\"sampler\");this._uSamplerDepth=new C3.Gfx.WebGLShaderUniform(this,\"samplerDepth\",\"sampler\");this._uDestStart=new C3.Gfx.WebGLShaderUniform(this,\"destStart\",\"vec2\");this._uDestEnd=new C3.Gfx.WebGLShaderUniform(this,\"destEnd\",\"vec2\");this._uSrcStart=new C3.Gfx.WebGLShaderUniform(this,\"srcStart\",\"vec2\");this._uSrcEnd=new C3.Gfx.WebGLShaderUniform(this,\"srcEnd\",\"vec2\");this._uSrcOriginStart=new C3.Gfx.WebGLShaderUniform(this,\n\"srcOriginStart\",\"vec2\");this._uSrcOriginEnd=new C3.Gfx.WebGLShaderUniform(this,\"srcOriginEnd\",\"vec2\");this._uPixelSize=new C3.Gfx.WebGLShaderUniform(this,\"pixelSize\",\"vec2\");this._uSeconds=new C3.Gfx.WebGLShaderUniform(this,\"seconds\",\"float\");this._uDevicePixelRatio=new C3.Gfx.WebGLShaderUniform(this,\"devicePixelRatio\",\"float\");this._uLayerScale=new C3.Gfx.WebGLShaderUniform(this,\"layerScale\",\"float\");this._uLayerAngle=new C3.Gfx.WebGLShaderUniform(this,\"layerAngle\",\"float\");this._uLayoutStart=new C3.Gfx.WebGLShaderUniform(this,\n\"layoutStart\",\"vec2\");this._uLayoutEnd=new C3.Gfx.WebGLShaderUniform(this,\"layoutEnd\",\"vec2\");this._uZNear=new C3.Gfx.WebGLShaderUniform(this,\"zNear\",\"float\");this._uZFar=new C3.Gfx.WebGLShaderUniform(this,\"zFar\",\"float\");this._hasAnyOptionalUniforms=!!(this._uPixelSize.IsUsed()||this._uSeconds.IsUsed()||this._uSamplerBack.IsUsed()||this._uDestStart.IsUsed()||this._uDestEnd.IsUsed()||this._uSrcStart.IsUsed()||this._uSrcEnd.IsUsed()||this._uSrcOriginStart.IsUsed()||this._uSrcOriginEnd.IsUsed()||this._uDevicePixelRatio.IsUsed()||\nthis._uLayerScale.IsUsed()||this._uLayerAngle.IsUsed()||this._uLayoutStart.IsUsed()||this._uLayoutEnd.IsUsed());const customParameterDefs=shaderInfo.parameters||[];this._uCustomParameters=[];this._usesAnySrcRectOrPixelSize=this._uPixelSize.IsUsed()||this._uSrcStart.IsUsed()||this._uSrcEnd.IsUsed()||this._uSrcOriginStart.IsUsed()||this._uSrcOriginEnd.IsUsed();this._hasCurrentMatP=false;this._hasCurrentMatMV=false;this._uColor.Init4f(1,1,1,1);this._uColor2.Init4f(1,1,1,1);this._uSamplerFront.Init1i(0);\nthis._uSamplerBack.Init1i(1);this._uSamplerDepth.Init1i(2);this._uPointTexStart.Init2f(0,0);this._uPointTexEnd.Init2f(1,1);this._uZElevation.Init1f(0);this._uTileSize.Init2f(0,0);this._uTileSpacing.Init2f(0,0);this._uDestStart.Init2f(0,0);this._uDestEnd.Init2f(1,1);this._uSrcStart.Init2f(0,0);this._uSrcEnd.Init2f(0,0);this._uSrcOriginStart.Init2f(0,0);this._uSrcOriginEnd.Init2f(0,0);this._uPixelSize.Init2f(0,0);this._uDevicePixelRatio.Init1f(1);this._uZNear.Init1f(renderer.GetNearZ());this._uZFar.Init1f(renderer.GetFarZ());\nthis._uLayerScale.Init1f(1);this._uLayerAngle.Init1f(0);this._uSeconds.Init1f(0);this._uLayoutStart.Init2f(0,0);this._uLayoutEnd.Init2f(0,0);this._uOutlineThickness.Init1f(1);for(const p of customParameterDefs){const uniformName=p[0];const paramType=p[2];const shaderUniform=new C3.Gfx.WebGLShaderUniform(this,uniformName,paramType);if(paramType===\"color\")shaderUniform.Init3f(0,0,0);else shaderUniform.Init1f(0);this._uCustomParameters.push(shaderUniform)}if(this._isDeviceTransform)this._UpdateDeviceTransformUniforms(batchState.currentMatP);\nelse{this.UpdateMatP(batchState.currentMatP,true);this.UpdateMatMV(batchState.currentMV,true)}const currentShader=batchState.currentShader;gl.useProgram(currentShader?currentShader._shaderProgram:null)}Release(){this._gl.deleteProgram(this._shaderProgram);this._shaderProgram=null;this._renderer._RemoveShaderProgram(this);this._gl=null;super.Release()}GetWebGLContext(){return this._gl}GetShaderProgram(){return this._shaderProgram}GetParameterCount(){return this._uCustomParameters.length}GetParameterType(paramIndex){if(paramIndex<\n0||paramIndex>=this._uCustomParameters.length)return null;return this._uCustomParameters[paramIndex].GetType()}AreCustomParametersAlreadySetInBatch(params){for(let i=0,len=params.length;i<len;++i)if(!this._uCustomParameters[i].IsSetToCustomInBatch(params[i]))return false;return true}SetCustomParametersInBatch(params){for(let i=0,len=params.length;i<len;++i)this._uCustomParameters[i].SetBatchValueCustom(params[i])}AreOptionalUniformsAlreadySetInBatch(destRect,srcRect,srcOriginRect,layoutRect,pixelWidth,\npixelHeight,dpr,layerScale,layerAngle,time){if(this._uSamplerBack.IsUsed())return false;if(this._uPixelSize.IsUsed()&&!this._uPixelSize.IsSetTo2InBatch(pixelWidth,pixelHeight))return false;if(this._uDestStart.IsUsed()&&!this._uDestStart.IsSetTo2InBatch(destRect.getLeft(),destRect.getTop()))return false;if(this._uDestEnd.IsUsed()&&!this._uDestEnd.IsSetTo2InBatch(destRect.getRight(),destRect.getBottom()))return false;if(this._uDevicePixelRatio.IsUsed()&&!this._uDevicePixelRatio.IsSetTo1InBatch(dpr))return false;\nif(this._uLayerScale.IsUsed()&&!this._uLayerScale.IsSetTo1InBatch(layerScale))return false;if(this._uLayerAngle.IsUsed()&&!this._uLayerAngle.IsSetTo1InBatch(layerAngle))return false;if(this._uSrcStart.IsUsed()&&!this._uSrcStart.IsSetTo2InBatch(srcRect.getLeft(),srcRect.getTop()))return false;if(this._uSrcEnd.IsUsed()&&!this._uSrcEnd.IsSetTo2InBatch(srcRect.getRight(),srcRect.getBottom()))return false;if(this._uSrcOriginStart.IsUsed()&&!this._uSrcOriginStart.IsSetTo2InBatch(srcOriginRect.getLeft(),\nsrcOriginRect.getTop()))return false;if(this._uSrcOriginEnd.IsUsed()&&!this._uSrcOriginEnd.IsSetTo2InBatch(srcOriginRect.getRight(),srcOriginRect.getBottom()))return false;if(this._uLayoutStart.IsUsed()&&!this._uLayoutStart.IsSetTo2InBatch(layoutRect.getLeft(),layoutRect.getTop()))return false;if(this._uLayoutEnd.IsUsed()&&!this._uLayoutEnd.IsSetTo2InBatch(layoutRect.getTop(),layoutRect.getBottom()))return false;if(this._uSeconds.IsUsed()&&!this._uSeconds.IsSetTo1InBatch(time))return false;return true}SetOptionalUniformsInBatch(destRect,\nsrcRect,srcOriginRect,layoutRect,pixelWidth,pixelHeight,dpr,layerScale,layerAngle,time){if(this._uSamplerBack.IsUsed())return;if(this._uPixelSize.IsUsed())this._uPixelSize.SetBatch2(pixelWidth,pixelHeight);if(this._uDestStart.IsUsed())this._uDestStart.SetBatch2(destRect.getLeft(),destRect.getTop());if(this._uDestEnd.IsUsed())this._uDestEnd.SetBatch2(destRect.getRight(),destRect.getBottom());if(this._uDevicePixelRatio.IsUsed())this._uDevicePixelRatio.SetBatch1(dpr);if(this._uLayerScale.IsUsed())this._uLayerScale.SetBatch1(layerScale);\nif(this._uLayerAngle.IsUsed())this._uLayerAngle.SetBatch1(layerAngle);if(this._uSrcStart.IsUsed())this._uSrcStart.SetBatch2(srcRect.getLeft(),srcRect.getTop());if(this._uSrcEnd.IsUsed())this._uSrcEnd.SetBatch2(srcRect.getRight(),srcRect.getBottom());if(this._uSrcOriginStart.IsUsed())this._uSrcOriginStart.SetBatch2(srcOriginRect.getLeft(),srcOriginRect.getTop());if(this._uSrcOriginEnd.IsUsed())this._uSrcOriginEnd.SetBatch2(srcOriginRect.getRight(),srcOriginRect.getBottom());if(this._uLayoutStart.IsUsed())this._uLayoutStart.SetBatch2(layoutRect.getLeft(),\nlayoutRect.getTop());if(this._uLayoutEnd.IsUsed())this._uLayoutEnd.SetBatch2(layoutRect.getTop(),layoutRect.getBottom());if(this._uSeconds.IsUsed())this._uSeconds.SetBatch1(time)}UpdateMatP(matP,force){if(this._hasCurrentMatP&&!force)return;if(this._isDeviceTransform)return;if(this._uMatP.IsUsed())this._uMatP.UpdateMatrix4fv(matP);this._hasCurrentMatP=true}SetMatPStale(){this._hasCurrentMatP=false}UpdateMatMV(matMV,force){if(this._hasCurrentMatMV&&!force)return;if(this._isDeviceTransform)return;if(this._uMatMV.IsUsed())this._uMatMV.UpdateMatrix4fv(matMV);\nthis._hasCurrentMatMV=true}SetMatMVStale(){this._hasCurrentMatMV=false}_UpdateDeviceTransformUniforms(matP){if(!this._isDeviceTransform)throw new Error(\"not device transform shader\");this._uMatP.UpdateMatrix4fv(matP);const renderer=this._renderer;const scrollX=renderer.GetWidth()/2;const scrollY=renderer.GetHeight()/2;const tempMat4=renderer.CalculateLookAtModelView2(scrollX,scrollY,renderer.GetDefaultCameraZ(renderer.GetHeight()),scrollX,scrollY,0,renderer.GetHeight());this._uMatMV.UpdateMatrix4fv(tempMat4)}UpdateColor(c){if(this._uColor.IsUsed())this._uColor.Update4f(c[0],\nc[1],c[2],c[3])}static GetReservedUniformNames(){return RESERVED_UNIFORM_NAMES}static GetDefaultVertexShaderSource(useHighP){const texPrecision=useHighP?\"highmedp\":\"mediump\";return[`#ifdef GL_FRAGMENT_PRECISION_HIGH`,`#define highmedp highp`,`#else`,`#define highmedp mediump`,`#endif`,`attribute highp vec3 aPos;`,`attribute ${texPrecision} vec2 aTex;`,`varying ${texPrecision} vec2 vTex;`,`uniform highp mat4 matP;`,`uniform highp mat4 matMV;`,`void main(void) {`,`\tgl_Position = matP * matMV * vec4(aPos, 1.0);`,\n`\tvTex = aTex;`,`}`].join(\"\\n\")}static GetDefaultVertexShaderSource_WebGL2(useHighP){const texPrecision=useHighP?\"highp\":\"mediump\";return[`#version 300 es`,`in highp vec3 aPos;`,`in ${texPrecision} vec2 aTex;`,`out ${texPrecision} vec2 vTex;`,`uniform highp mat4 matP;`,`uniform highp mat4 matMV;`,`void main(void) {`,`\tgl_Position = matP * matMV * vec4(aPos, 1.0);`,`\tvTex = aTex;`,`}`].join(\"\\n\")}static GetTextureFillFragmentShaderSource_WebGL1_NoFragDepth(){return[\"varying mediump vec2 vTex;\",\"uniform lowp vec4 color;\",\n\"uniform lowp sampler2D samplerFront;\",\"void main(void) {\",\"\\tgl_FragColor = texture2D(samplerFront, vTex) * color;\",\"}\"].join(\"\\n\")}static GetTextureFillFragmentShaderSource_WebGL1_FragDepthEXT(){return[\"#extension GL_EXT_frag_depth : enable\",\"varying mediump vec2 vTex;\",\"uniform lowp vec4 color;\",\"uniform lowp sampler2D samplerFront;\",\"void main(void) {\",\"\\tgl_FragColor = texture2D(samplerFront, vTex) * color;\",\"\\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);\",\"}\"].join(\"\\n\")}static GetTextureFillFragmentShaderSource_WebGL2(){return[\"#version 300 es\",\n\"in mediump vec2 vTex;\",\"out lowp vec4 outColor;\",\"uniform lowp vec4 color;\",\"uniform lowp sampler2D samplerFront;\",\"void main(void) {\",\"\\toutColor = texture(samplerFront, vTex) * color;\",\"\\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);\",\"}\"].join(\"\\n\")}static GetTilemapFragmentShaderSource_WebGL1_NoFragDepth(){return[\"#ifdef GL_FRAGMENT_PRECISION_HIGH\",\"#define highmedp highp\",\"#else\",\"#define highmedp mediump\",\"#endif\",\"varying highmedp vec2 vTex;\",\"uniform lowp vec4 color;\",\"uniform lowp sampler2D samplerFront;\",\n\"uniform highmedp vec2 srcStart;\",\"uniform highmedp vec2 pixelSize;\",\"uniform highmedp vec2 tileSize;\",\"uniform highmedp vec2 tileSpacing;\",\"void main(void) {\",\"\\thighmedp vec2 tile = floor(vTex);\",\"\\thighmedp vec2 tex = fract(vTex);\",\"\\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);\",\"\\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;\",\"\\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;\",\"\\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;\",\n\"}\"].join(\"\\n\")}static GetTilemapFragmentShaderSource_WebGL1_FragDepthEXT(){return[\"#extension GL_EXT_frag_depth : enable\",\"#ifdef GL_FRAGMENT_PRECISION_HIGH\",\"#define highmedp highp\",\"#else\",\"#define highmedp mediump\",\"#endif\",\"varying highmedp vec2 vTex;\",\"uniform lowp vec4 color;\",\"uniform lowp sampler2D samplerFront;\",\"uniform highmedp vec2 srcStart;\",\"uniform highmedp vec2 pixelSize;\",\"uniform highmedp vec2 tileSize;\",\"uniform highmedp vec2 tileSpacing;\",\"void main(void) {\",\"\\thighmedp vec2 tile = floor(vTex);\",\n\"\\thighmedp vec2 tex = fract(vTex);\",\"\\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);\",\"\\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;\",\"\\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;\",\"\\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;\",\"\\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);\",\"}\"].join(\"\\n\")}static GetTilemapFragmentShaderSource_WebGL2(){return[\"#version 300 es\",\"in highp vec2 vTex;\",\n\"out lowp vec4 outColor;\",\"uniform lowp vec4 color;\",\"uniform lowp sampler2D samplerFront;\",\"uniform highp vec2 srcStart;\",\"uniform highp vec2 pixelSize;\",\"uniform highp vec2 tileSize;\",\"uniform highp vec2 tileSpacing;\",\"void main(void) {\",\"\\thighp vec2 tile = floor(vTex);\",\"\\thighp vec2 tex = fract(vTex);\",\"\\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);\",\"\\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;\",\"\\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;\",\n\"\\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;\",\"\\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);\",\"}\"].join(\"\\n\")}static GetTileRandomizationFragmentShaderSource(webGLVer,hasFragDepthExt,useDerivatives){let prefix=\"\";if(webGLVer>=2)prefix=\"#version 300 es\\n\";else{if(hasFragDepthExt)prefix=\"#extension GL_EXT_frag_depth : enable\\n\";if(useDerivatives){prefix+=\"#extension GL_EXT_shader_texture_lod : enable\\n\";prefix+=\"#extension GL_OES_standard_derivatives : enable\\n\"}}return prefix+\n`\r\n#ifdef GL_FRAGMENT_PRECISION_HIGH\r\n#define highmedp highp\r\n#else\r\n#define highmedp mediump\r\n#endif\r\nprecision highmedp float;\r\n${webGLVer>=2?\"in\":\"varying\"} vec2 vTex;\r\n${webGLVer>=2?\"out lowp vec4 outColor;\":\"\"}\r\nuniform lowp vec4 color;\r\nuniform lowp sampler2D samplerFront;\r\nuniform vec2 pixelSize;\r\n\r\nuniform vec2 tileSize;\r\nuniform vec2 tileSpacing;\r\nuniform float outlineThickness;\r\n\r\nconst float PI = 3.1415926;\r\n\r\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\r\n{\r\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\r\n}\r\n\r\nvec3 randVec3(vec2 seed)\r\n{\r\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\r\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\r\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\r\n}\r\n\r\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\r\n{\r\n\tvec2 posRandom = tileSize;\r\n\tfloat angleRandom = outlineThickness;\r\n\t\r\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\r\n\t\r\n\tfloat angle = angleRandom * rand.z * PI;\r\n\tfloat sin_a = sin(angle);\r\n\tfloat cos_a = cos(angle);\r\n\tfloat aspect = pixelSize.x / pixelSize.y;\r\n\r\n\tvec2 mid = tile + vec2(0.5, 0.5);\r\n\tvec2 dp = uv - mid;\r\n\tdp.x /= aspect;\r\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\r\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\r\n\tr.x *= aspect;\r\n\r\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\r\n\t\r\n\t${webGLVer>=2?\"return textureGrad(samplerFront, p, ddx, ddy);\":\"\"}\r\n\t${webGLVer<2&&useDerivatives?\"return texture2DGradEXT(samplerFront, p, ddx, ddy);\":\"\"}\r\n\t${webGLVer<2&&!useDerivatives?\"return texture2D(samplerFront, p);\":\"\"}\r\n}\r\n\r\nvoid main(void) {\r\n\t\r\n\t${webGLVer<2?\"lowp vec4 outColor;\":\"\"}\r\n\t\r\n\tfloat blendMarginX = tileSpacing.x;\r\n\tfloat blendMarginY = tileSpacing.y;\r\n\t\r\n\tvec2 tile = floor(vTex);\r\n\tvec2 tex = fract(vTex);\r\n\tvec2 ddx = ${webGLVer>=2||useDerivatives?\"dFdx(vTex)\":\"vec2(0.0, 0.0)\"};\r\n\tvec2 ddy = ${webGLVer>=2||useDerivatives?\"dFdy(vTex)\":\"vec2(0.0, 0.0)\"};\r\n\t\r\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\r\n\t\r\n\tbool inLeftMargin = (tex.x < blendMarginX);\r\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\r\n\tbool inTopMargin = (tex.y < blendMarginY);\r\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\r\n\t\r\n\tif (inLeftMargin)\r\n\t{\r\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\r\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\r\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\r\n\t\t\r\n\t\tif (inTopMargin)\r\n\t\t{\r\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\r\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\r\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\r\n\t\t\t\r\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\r\n\t\t}\r\n\t\telse if (inBottomMargin)\r\n\t\t{\r\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\r\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\r\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\r\n\t\t\t\r\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\toutColor = leftMixedTile;\r\n\t\t}\r\n\t}\r\n\telse if (inRightMargin)\r\n\t{\r\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\r\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\r\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\r\n\t\t\r\n\t\tif (inTopMargin)\r\n\t\t{\r\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\r\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\r\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\r\n\t\t\t\r\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\r\n\t\t}\r\n\t\telse if (inBottomMargin)\r\n\t\t{\r\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\r\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\r\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\r\n\t\t\t\r\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\toutColor = rightMixedTile;\r\n\t\t}\r\n\t}\r\n\telse if (inTopMargin)\r\n\t{\r\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\r\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\r\n\t}\r\n\telse if (inBottomMargin)\r\n\t{\r\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\r\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\r\n\t}\r\n\telse\r\n\t{\r\n\t\toutColor = curTile;\r\n\t}\r\n\t\r\n\toutColor *= color;\r\n\t${webGLVer<2?\"gl_FragColor = outColor;\":\"\"}\r\n\t${webGLVer>=2?\"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);\":\"\"}\r\n\t${webGLVer<2&&hasFragDepthExt?\"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);\":\"\"}\r\n}\r\n`}static GetPointVertexShaderSource_WebGL1(){return[\"attribute vec4 aPoints;\",\"varying float pointOpacity;\",\"uniform float zElevation;\",\"uniform mat4 matP;\",\"uniform mat4 matMV;\",\"void main(void) {\",\"\\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);\",\"\\tgl_PointSize = aPoints.z;\",\"\\tpointOpacity = aPoints.w;\",\"}\"].join(\"\\n\")}static GetPointVertexShaderSource_WebGL2(){return[\"#version 300 es\",\"in vec4 aPoints;\",\"out float pointOpacity;\",\"uniform float zElevation;\",\"uniform mat4 matP;\",\n\"uniform mat4 matMV;\",\"void main(void) {\",\"\\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);\",\"\\tgl_PointSize = aPoints.z;\",\"\\tpointOpacity = aPoints.w;\",\"}\"].join(\"\\n\")}static GetPointFragmentShaderSource_WebGL1_NoFragDepth(){return[\"uniform lowp sampler2D samplerFront;\",\"varying lowp float pointOpacity;\",\"uniform mediump vec2 pointTexStart;\",\"uniform mediump vec2 pointTexEnd;\",\"uniform lowp vec4 color;\",\"void main(void) {\",\"\\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);\",\n\"\\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);\",\"\\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));\",\"\\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;\",\"}\"].join(\"\\n\")}static GetPointFragmentShaderSource_WebGL1_FragDepthEXT(){return[\"#extension GL_EXT_frag_depth : enable\",\"uniform lowp sampler2D samplerFront;\",\"varying lowp float pointOpacity;\",\"uniform mediump vec2 pointTexStart;\",\n\"uniform mediump vec2 pointTexEnd;\",\"uniform lowp vec4 color;\",\"void main(void) {\",\"\\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);\",\"\\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);\",\"\\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));\",\"\\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;\",\"\\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);\",\n\"}\"].join(\"\\n\")}static GetPointFragmentShaderSource_WebGL2(){return[\"#version 300 es\",\"uniform lowp sampler2D samplerFront;\",\"in lowp float pointOpacity;\",\"uniform mediump vec2 pointTexStart;\",\"uniform mediump vec2 pointTexEnd;\",\"uniform lowp vec4 color;\",\"out lowp vec4 outColor;\",\"void main(void) {\",\"\\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);\",\"\\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);\",\"\\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));\",\n\"\\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;\",\"\\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);\",\"}\"].join(\"\\n\")}static GetColorFillFragmentShaderSource(){return[\"uniform lowp vec4 color;\",\"void main(void) {\",\"\\tgl_FragColor = color;\",\"}\"].join(\"\\n\")}static GetLinearGradientFillFragmentShaderSource(){return[\"precision lowp float;\",\"varying mediump vec2 vTex;\",\"uniform vec4 color;\",\"uniform vec4 color2_;\",\"vec3 fromLinear(vec3 linearRGB)\",\n\"{\",\"\\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));\",\"\\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);\",\"\\tvec3 lower = linearRGB * vec3(12.92);\",\"\\treturn mix(higher, lower, vec3(cutoff));\",\"}\",\"vec3 toLinear(vec3 sRGB)\",\"{\",\"\\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));\",\"\\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));\",\"\\tvec3 lower = sRGB/vec3(12.92);\",\"\\treturn mix(higher, lower, vec3(cutoff));\",\"}\",\"void main(void) {\",\"\\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);\",\n\"\\tfloat a = mix(color.a, color2_.a, vTex.x);\",\"\\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);\",\"}\"].join(\"\\n\")}static GetPenumbraFillFragmentShaderSource(){return[`#ifdef GL_FRAGMENT_PRECISION_HIGH`,`#define highmedp highp`,`#else`,`#define highmedp mediump`,`#endif`,`precision lowp float;`,`varying highmedp vec2 vTex;`,`uniform vec4 color;`,`void main(void) {`,`\thighmedp float grad = vTex.x / (1.0 - vTex.y);`,`\tgl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,\n`}`].join(\"\\n\")}static GetSmoothLineFillFragmentShaderSource(){return[\"varying mediump vec2 vTex;\",\"uniform lowp vec4 color;\",\"void main(void) {\",\"\\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;\",\"\\tgl_FragColor = color * f;\",\"}\"].join(\"\\n\")}static GetHardEllipseFillFragmentShaderSource(){return[\"varying mediump vec2 vTex;\",\"uniform lowp vec4 color;\",\"void main(void) {\",\"\\tmediump vec2 diff = vTex - vec2(0.5, 0.5);\",\"\\tmediump vec2 diffSq = diff * diff;\",\"\\tmediump float f = step(diffSq.x + diffSq.y, 0.25);\",\n\"\\tgl_FragColor = color * f;\",\"}\"].join(\"\\n\")}static GetHardEllipseOutlineFragmentShaderSource(){return[\"varying mediump vec2 vTex;\",\"uniform lowp vec4 color;\",\"uniform mediump vec2 pixelSize;\",\"uniform mediump float outlineThickness;\",\"void main(void) {\",\"\\tmediump vec2 diff = vTex - vec2(0.5, 0.5);\",\"\\tmediump vec2 diffSq = diff * diff;\",\"\\tmediump float distSq = diffSq.x + diffSq.y;\",\"\\tmediump vec2 norm = normalize(diff);\",\"\\tmediump vec2 halfNorm = norm * 0.5;\",\"\\tmediump float innerF = step(distSq, 0.25);\",\n\"\\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;\",\"\\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;\",\"\\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);\",\"\\tgl_FragColor = color * innerF * outerF;\",\"}\"].join(\"\\n\")}static GetSmoothEllipseFillFragmentShaderSource(){return[\"varying mediump vec2 vTex;\",\"uniform lowp vec4 color;\",\"uniform mediump vec2 pixelSize;\",\"void main(void) {\",\"\\tmediump vec2 diff = vTex - vec2(0.5, 0.5);\",\"\\tmediump vec2 diffSq = diff * diff;\",\n\"\\tmediump vec2 norm = normalize(diff);\",\"\\tmediump vec2 halfNorm = norm * 0.5;\",\"\\tmediump vec2 halfNormSq = halfNorm * halfNorm;\",\"\\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;\",\"\\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;\",\"\\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);\",\"\\tgl_FragColor = color * f;\",\"}\"].join(\"\\n\")}static GetSmoothEllipseOutlineFragmentShaderSource(){return[\"varying mediump vec2 vTex;\",\"uniform lowp vec4 color;\",\n\"uniform mediump vec2 pixelSize;\",\"uniform mediump float outlineThickness;\",\"void main(void) {\",\"\\tmediump vec2 diff = vTex - vec2(0.5, 0.5);\",\"\\tmediump vec2 diffSq = diff * diff;\",\"\\tmediump float distSq = diffSq.x + diffSq.y;\",\"\\tmediump vec2 norm = normalize(diff);\",\"\\tmediump vec2 halfNorm = norm * 0.5;\",\"\\tmediump vec2 halfNormSq = halfNorm * halfNorm;\",\"\\tmediump vec2 pxNorm = pixelSize * norm;\",\"\\tmediump vec2 innerEdge1 = halfNorm - pxNorm;\",\"\\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;\",\n\"\\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);\",\"\\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;\",\"\\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;\",\"\\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);\",\"\\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;\",\"\\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);\",\"\\tgl_FragColor = color * innerF * outerF;\",\n\"}\"].join(\"\\n\")}};\n\n}\n\n// ../lib/gfx/webgl/shaderUniform.js\n{\n'use strict';const C3=self.C3;const glMatrix=self.glMatrix;const mat4=glMatrix.mat4;const TYPE_SIZES=new Map([[\"float\",1],[\"percent\",1],[\"sampler\",1],[\"vec2\",2],[\"vec3\",3],[\"color\",3],[\"vec4\",4],[\"mat4\",16]]);\nC3.Gfx.WebGLShaderUniform=class WebGLShaderUniform{constructor(owner,name,type){if(!TYPE_SIZES.has(type))throw new Error(\"invalid uniform type\");this._owner=owner;this._gl=this._owner.GetWebGLContext();this._name=name;this._type=type;this._isColorType=this._type===\"color\";this._location=this._gl.getUniformLocation(this._owner.GetShaderProgram(),name);this._isUsed=!!this._location;const typeSize=TYPE_SIZES.get(type);this._lastValue=new Float32Array(typeSize);this._lastBatchValue=new Float32Array(typeSize)}Release(){this._owner=\nnull;this._gl=null;this._location=null}IsUsed(){return this._isUsed}GetType(){return this._type}IsColorType(){return this._isColorType}Init1f(v0){if(!this.IsUsed())return;this._lastValue[0]=v0;this._lastBatchValue.set(this._lastValue);this._gl.uniform1f(this._location,v0)}Init1i(v0){if(!this.IsUsed())return;this._lastValue[0]=v0;this._lastBatchValue.set(this._lastValue);this._gl.uniform1i(this._location,v0)}Init2f(v0,v1){if(!this.IsUsed())return;this._lastValue[0]=v0;this._lastValue[1]=v1;this._lastBatchValue.set(this._lastValue);\nthis._gl.uniform2f(this._location,v0,v1)}Init3f(v0,v1,v2){if(!this.IsUsed())return;this._lastValue[0]=v0;this._lastValue[1]=v1;this._lastValue[2]=v2;this._lastBatchValue.set(this._lastValue);this._gl.uniform3f(this._location,v0,v1,v2)}Init4f(v0,v1,v2,v3){if(!this.IsUsed())return;this._lastValue[0]=v0;this._lastValue[1]=v1;this._lastValue[2]=v2;this._lastValue[3]=v3;this._lastBatchValue.set(this._lastValue);this._gl.uniform4f(this._location,v0,v1,v2,v3)}Update1f(v0){v0=Math.fround(v0);const lastValue=\nthis._lastValue;if(lastValue[0]===v0)return;lastValue[0]=v0;this._gl.uniform1f(this._location,v0)}Update1i(v0){const lastValue=this._lastValue;if(lastValue[0]===v0)return;lastValue[0]=v0;this._gl.uniform1i(this._location,v0)}Update2f(v0,v1){v0=Math.fround(v0);v1=Math.fround(v1);const lastValue=this._lastValue;if(lastValue[0]===v0&&lastValue[1]===v1)return;lastValue[0]=v0;lastValue[1]=v1;this._gl.uniform2f(this._location,v0,v1)}Update3f(v0,v1,v2){v0=Math.fround(v0);v1=Math.fround(v1);v2=Math.fround(v2);\nconst lastValue=this._lastValue;if(lastValue[0]===v0&&lastValue[1]===v1&&lastValue[2]===v2)return;lastValue[0]=v0;lastValue[1]=v1;lastValue[2]=v2;this._gl.uniform3f(this._location,v0,v1,v2)}Update4f(v0,v1,v2,v3){v0=Math.fround(v0);v1=Math.fround(v1);v2=Math.fround(v2);v3=Math.fround(v3);const lastValue=this._lastValue;if(lastValue[0]===v0&&lastValue[1]===v1&&lastValue[2]===v2&&lastValue[3]===v3)return;lastValue[0]=v0;lastValue[1]=v1;lastValue[2]=v2;lastValue[3]=v3;this._gl.uniform4f(this._location,\nv0,v1,v2,v3)}UpdateMatrix4fv(m){const lastValue=this._lastValue;if(mat4.exactEquals(lastValue,m))return;C3.typedArraySet16(lastValue,m,0);this._gl.uniformMatrix4fv(this._location,false,m)}IsSetToCustomInBatch(p){const batchValue=this._lastBatchValue;if(this.IsColorType())return batchValue[0]===Math.fround(p.getR())&&batchValue[1]===Math.fround(p.getG())&&batchValue[2]===Math.fround(p.getB());else return batchValue[0]===Math.fround(p)}SetBatchValueCustom(p){const batchValue=this._lastBatchValue;if(this.IsColorType()){batchValue[0]=\np.getR();batchValue[1]=p.getG();batchValue[2]=p.getB()}else batchValue[0]=p}IsSetTo1InBatch(x){return this._lastBatchValue[0]===Math.fround(x)}IsSetTo2InBatch(x,y){const batchValue=this._lastBatchValue;return batchValue[0]===Math.fround(x)&&batchValue[1]===Math.fround(y)}SetBatch1(x){this._lastBatchValue[0]=x}SetBatch2(x,y){const batchValue=this._lastBatchValue;batchValue[0]=x;batchValue[1]=y}};\n\n}\n\n// ../lib/gfx/webgl/batchJob.js\n{\n'use strict';const C3=self.C3;const glMatrix=self.glMatrix;const vec4=glMatrix.vec4;const mat4=glMatrix.mat4;const BATCH_NULL=0;const BATCH_QUAD=1;const BATCH_SETTEXTURE=2;const BATCH_SETCOLOR=3;const BATCH_SETBLEND=4;const BATCH_SETVIEWPORT=5;const BATCH_SETPROJECTION=6;const BATCH_SETMODELVIEW=7;const BATCH_SETRENDERTARGET=8;const BATCH_CLEARSURFACE=9;const BATCH_POINTS=10;const BATCH_SETPROGRAM=11;const BATCH_SETPROGRAMPARAMETERS=12;const BATCH_SETPROGRAMCUSTOMPARAMETERS=13;\nconst BATCH_INVALIDATEFRAMEBUFFER=14;const BATCH_SETPOINTTEXCOORDS=15;const BATCH_SETTILEMAPINFO=16;const BATCH_BLITFRAMEBUFFER=17;const BATCH_STARTQUERY=18;const BATCH_ENDQUERY=19;const BATCH_SETELLIPSEPARAMS=20;const BATCH_SETGRADIENTCOLOR=21;const BATCH_CLEARDEPTH=22;const BATCH_SETDEPTHENABLED=23;const BATCH_SETDEPTHSAMPLINGENABLED=24;const BATCH_COPLANAR_STARTSTENCILPASS=25;const BATCH_COPLANAR_STARTCOLORPASS=26;const BATCH_COPLANAR_RESTORE=27;const BATCH_SET_SCISSOR=28;\nconst BATCH_SETTILERANDOMIZATIONINFO=29;C3.Gfx.BatchState=class BatchState{constructor(renderer){this.renderer=renderer;this.currentMV=mat4.create();this.currentMatP=mat4.create();this.currentFramebuffer=null;this.currentFramebufferNoDepth=null;this.isDepthSamplingEnabled=false;this.currentColor=vec4.fromValues(1,1,1,1);this.currentShader=null;this.pointTexCoords=new C3.Rect;this.clearColor=C3.New(C3.Color,0,0,0,0)}};\nC3.Gfx.WebGLBatchJob=class WebGLBatchJob{constructor(batchState){const arrayBuffer=new ArrayBuffer(96);this._type=0;this._batchState=batchState;this._gl=batchState.renderer.GetContext();this._startIndex=0;this._indexCount=0;this._texParam=null;this._mat4param=new Float32Array(arrayBuffer,0,16);this._colorParam=new Float32Array(arrayBuffer,64,4);this._srcOriginRect=new Float32Array(arrayBuffer,80,4);this._shaderParams=[]}InitQuad(startIndex,indexCount){this._type=BATCH_QUAD;this._startIndex=startIndex;\nthis._indexCount=indexCount}DoQuad(){const gl=this._gl;gl.drawElements(gl.TRIANGLES,this._indexCount,gl.UNSIGNED_SHORT,this._startIndex)}InitSetTexture(rendererTex){this._type=BATCH_SETTEXTURE;this._texParam=rendererTex}DoSetTexture(){const gl=this._gl;const texParam=this._texParam;gl.bindTexture(gl.TEXTURE_2D,texParam?texParam._GetTexture():null)}InitSetColor(c){this._type=BATCH_SETCOLOR;c.writeToTypedArray(this._colorParam,0)}DoSetColor(){const c=this._colorParam;const batchState=this._batchState;\nvec4.copy(batchState.currentColor,c);batchState.currentShader.UpdateColor(c)}InitSetGradientColor(c){this._type=BATCH_SETGRADIENTCOLOR;c.writeToTypedArray(this._colorParam,0)}DoSetGradientColor(){const c=this._colorParam;const s=this._batchState.currentShader;if(s._uColor2.IsUsed())s._uColor2.Update4f(c[0],c[1],c[2],c[3])}InitSetBlend(s,d){this._type=BATCH_SETBLEND;this._startIndex=s;this._indexCount=d}DoSetBlend(){this._gl.blendFunc(this._startIndex,this._indexCount)}InitSetViewport(x,y,w,h){this._type=\nBATCH_SETVIEWPORT;const colorParam=this._colorParam;colorParam[0]=x;colorParam[1]=y;colorParam[2]=w;colorParam[3]=h}DoSetViewport(){const colorParam=this._colorParam;this._gl.viewport(colorParam[0],colorParam[1],colorParam[2],colorParam[3])}InitSetProjection(m){this._type=BATCH_SETPROJECTION;mat4.copy(this._mat4param,m)}DoSetProjection(){const batchState=this._batchState;const allShaderPrograms=batchState.renderer._allShaderPrograms;const currentShader=batchState.currentShader;const mat4param=this._mat4param;\nfor(let i=0,len=allShaderPrograms.length;i<len;++i){const s=allShaderPrograms[i];if(s===currentShader)s.UpdateMatP(mat4param,true);else s.SetMatPStale()}mat4.copy(batchState.currentMatP,mat4param)}InitSetModelView(m){this._type=BATCH_SETMODELVIEW;mat4.copy(this._mat4param,m)}DoSetModelView(){const batchState=this._batchState;const allShaderPrograms=batchState.renderer._allShaderPrograms;const currentShader=batchState.currentShader;const mat4param=this._mat4param;for(let i=0,len=allShaderPrograms.length;i<\nlen;++i){const s=allShaderPrograms[i];if(s===currentShader)s.UpdateMatMV(mat4param,true);else s.SetMatMVStale()}mat4.copy(batchState.currentMV,mat4param)}InitSetRenderTarget(renderTarget){this._type=BATCH_SETRENDERTARGET;this._texParam=renderTarget}DoSetRenderTarget(){const gl=this._gl;const renderTarget=this._texParam;const batchState=this._batchState;if(renderTarget){batchState.currentFramebuffer=renderTarget._GetFramebuffer();batchState.currentFramebufferNoDepth=renderTarget._GetFramebufferNoDepth();\nif(batchState.isDepthSamplingEnabled&&batchState.currentFramebufferNoDepth)gl.bindFramebuffer(gl.FRAMEBUFFER,batchState.currentFramebufferNoDepth);else gl.bindFramebuffer(gl.FRAMEBUFFER,batchState.currentFramebuffer)}else{batchState.currentFramebuffer=null;batchState.currentFramebufferNoDepth=null;gl.bindFramebuffer(gl.FRAMEBUFFER,null)}}InitClearSurface(c){this._type=BATCH_CLEARSURFACE;c.writeToTypedArray(this._mat4param,0)}InitClearSurface2(r,g,b,a){this._type=BATCH_CLEARSURFACE;const c=this._mat4param;\nc[0]=r;c[1]=g;c[2]=b;c[3]=a}DoClearSurface(){const gl=this._gl;const mat4param=this._mat4param;const batchState=this._batchState;const lastClearColor=batchState.clearColor;const r=mat4param[0];const g=mat4param[1];const b=mat4param[2];const a=mat4param[3];if(!lastClearColor.equalsRgba(r,g,b,a)){gl.clearColor(r,g,b,a);lastClearColor.setRgba(r,g,b,a)}gl.clear(gl.COLOR_BUFFER_BIT)}InitSetPointTexCoords(rect){this._type=BATCH_SETPOINTTEXCOORDS;rect.writeToTypedArray(this._mat4param,0)}DoSetPointTextureCoords(){const mat4param=\nthis._mat4param;this._batchState.pointTexCoords.set(mat4param[0],mat4param[1],mat4param[2],mat4param[3])}InitPoints(startIndex,z){this._type=BATCH_POINTS;this._startIndex=startIndex;this._indexCount=1;this._mat4param[0]=z}DoPoints(){const gl=this._gl;const batchState=this._batchState;const renderer=batchState.renderer;const s=renderer._spPoints;gl.useProgram(s._shaderProgram);s.UpdateMatP(batchState.currentMatP,false);s.UpdateMatMV(batchState.currentMV,false);const ptc=batchState.pointTexCoords;if(s._uPointTexStart.IsUsed())s._uPointTexStart.Update2f(ptc.getLeft(),\nptc.getTop());if(s._uPointTexEnd.IsUsed())s._uPointTexEnd.Update2f(ptc.getRight(),ptc.getBottom());const z=this._mat4param[0];if(s._uZElevation.IsUsed())s._uZElevation.Update1f(z);if(s._uColor.IsUsed()){const c=batchState.currentColor;s._uColor.Update4f(c[0],c[1],c[2],c[3])}gl.drawArrays(gl.POINTS,this._startIndex/4,this._indexCount);gl.useProgram(batchState.currentShader._shaderProgram)}InitSetProgram(program){this._type=BATCH_SETPROGRAM;this._texParam=program}DoSetProgram(){const gl=this._gl;const batchState=\nthis._batchState;const s=this._texParam;batchState.currentShader=s;gl.useProgram(s._shaderProgram);s.UpdateMatP(batchState.currentMatP,false);s.UpdateMatMV(batchState.currentMV,false);if(s._uColor.IsUsed()){const c=batchState.currentColor;s._uColor.Update4f(c[0],c[1],c[2],c[3])}}InitSetProgramParameters(){this._type=BATCH_SETPROGRAMPARAMETERS}DoSetProgramParameters(){const s=this._batchState.currentShader;const gl=this._gl;const mat4param=this._mat4param;const colorParam=this._colorParam;const srcOriginRect=\nthis._srcOriginRect;if(s._uSamplerBack.IsUsed()){const renderer=this._batchState.renderer;const texParam=this._texParam;if(renderer._lastTexture1!==texParam){gl.activeTexture(gl.TEXTURE1);gl.bindTexture(gl.TEXTURE_2D,texParam?texParam._GetTexture():null);renderer._lastTexture1=texParam;gl.activeTexture(gl.TEXTURE0)}}if(s._uPixelSize.IsUsed())s._uPixelSize.Update2f(mat4param[0],mat4param[1]);if(s._uDestStart.IsUsed())s._uDestStart.Update2f(mat4param[2],mat4param[3]);if(s._uDestEnd.IsUsed())s._uDestEnd.Update2f(mat4param[4],\nmat4param[5]);if(s._uDevicePixelRatio.IsUsed())s._uDevicePixelRatio.Update1f(this._indexCount);if(s._uLayerScale.IsUsed())s._uLayerScale.Update1f(mat4param[6]);if(s._uLayerAngle.IsUsed())s._uLayerAngle.Update1f(mat4param[7]);if(s._uSrcStart.IsUsed())s._uSrcStart.Update2f(mat4param[12],mat4param[13]);if(s._uSrcEnd.IsUsed())s._uSrcEnd.Update2f(mat4param[14],mat4param[15]);if(s._uSrcOriginStart.IsUsed())s._uSrcOriginStart.Update2f(srcOriginRect[0],srcOriginRect[1]);if(s._uSrcOriginEnd.IsUsed())s._uSrcOriginEnd.Update2f(srcOriginRect[2],\nsrcOriginRect[3]);if(s._uLayoutStart.IsUsed())s._uLayoutStart.Update2f(colorParam[0],colorParam[1]);if(s._uLayoutEnd.IsUsed())s._uLayoutEnd.Update2f(colorParam[2],colorParam[3]);if(s._uSeconds.IsUsed())s._uSeconds.Update1f(this._startIndex)}InitSetProgramCustomParameters(){this._type=BATCH_SETPROGRAMCUSTOMPARAMETERS}DoSetProgramCustomParameters(){const s=this._batchState.currentShader;const uCustomParameters=s._uCustomParameters;const shaderParams=this._shaderParams;for(let i=0,len=uCustomParameters.length;i<\nlen;++i){const shaderUniform=uCustomParameters[i];const paramValue=shaderParams[i];if(shaderUniform.IsColorType())shaderUniform.Update3f(paramValue.getR(),paramValue.getG(),paramValue.getB());else shaderUniform.Update1f(paramValue)}}InitInvalidateFramebuffer(fbo){this._type=BATCH_INVALIDATEFRAMEBUFFER;this._texParam=fbo}DoInvalidateFramebuffer(){const gl=this._gl;const fbo=this._texParam;const lastBoundFbo=this._batchState.currentFramebuffer;if(fbo!==lastBoundFbo)gl.bindFramebuffer(gl.FRAMEBUFFER,\nfbo);gl.invalidateFramebuffer(gl.FRAMEBUFFER,[gl.COLOR_ATTACHMENT0]);if(fbo!==lastBoundFbo)gl.bindFramebuffer(gl.FRAMEBUFFER,lastBoundFbo)}InitBlitFramebuffer(sourceRenderTarget,destRenderTarget,mode){this._type=BATCH_BLITFRAMEBUFFER;const mat4param=this._mat4param;const renderer=this._batchState.renderer;mat4param[0]=sourceRenderTarget.GetWidth();mat4param[1]=sourceRenderTarget.GetHeight();mat4param[2]=destRenderTarget?destRenderTarget.GetWidth():renderer.GetWidth();mat4param[3]=destRenderTarget?\ndestRenderTarget.GetHeight():renderer.GetHeight();mat4param[4]=sourceRenderTarget.IsLinearSampling()?1:0;mat4param[5]=mode===\"stretch\";const shaderParams=this._shaderParams;C3.clearArray(shaderParams);shaderParams.push(sourceRenderTarget._GetFramebuffer());shaderParams.push(destRenderTarget?destRenderTarget._GetFramebuffer():null)}DoBlitFramebuffer(){const mat4param=this._mat4param;const shaderParams=this._shaderParams;const gl=this._gl;const srcWidth=mat4param[0];const srcHeight=mat4param[1];const destWidth=\nmat4param[2];const destHeight=mat4param[3];const isLinearSampling=mat4param[4]!==0;const isStretch=mat4param[5]!==0;const srcFbo=shaderParams[0];const destFbo=shaderParams[1];gl.bindFramebuffer(gl.READ_FRAMEBUFFER,srcFbo);gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER,destFbo);if(isStretch)gl.blitFramebuffer(0,0,srcWidth,srcHeight,0,0,destWidth,destHeight,gl.COLOR_BUFFER_BIT,isLinearSampling?gl.LINEAR:gl.NEAREST);else{const w=Math.min(srcWidth,destWidth);const h=Math.min(srcHeight,destHeight);const srcOffY=\nMath.max(srcHeight-destHeight,0);const destOffY=Math.max(destHeight-srcHeight,0);gl.blitFramebuffer(0,srcOffY,w,h+srcOffY,0,destOffY,w,h+destOffY,gl.COLOR_BUFFER_BIT,gl.NEAREST)}}InitStartQuery(query){this._type=BATCH_STARTQUERY;this._texParam=query}DoStartQuery(){this._texParam.BeginTimeElapsed();this._texParam=null}InitEndQuery(query){this._type=BATCH_ENDQUERY;this._texParam=query}DoEndQuery(){this._texParam.EndTimeElapsed();this._texParam=null}InitSetEllipseParams(pixelW,pixelH,outlineThickness){this._type=\nBATCH_SETELLIPSEPARAMS;const mat4param=this._mat4param;mat4param[0]=pixelW;mat4param[1]=pixelH;mat4param[2]=outlineThickness}DoSetEllipseParams(){const s=this._batchState.currentShader;const mat4param=this._mat4param;if(s._uPixelSize.IsUsed())s._uPixelSize.Update2f(mat4param[0],mat4param[1]);if(s._uOutlineThickness.IsUsed())s._uOutlineThickness.Update1f(mat4param[2])}InitSetTilemapInfo(srcRect,textureWidth,textureHeight,tileWidth,tileHeight,tileSpacingX,tileSpacingY){this._type=BATCH_SETTILEMAPINFO;\nconst mat4param=this._mat4param;srcRect.writeToTypedArray(mat4param,0);mat4param[4]=1/textureWidth;mat4param[5]=1/textureHeight;mat4param[6]=tileWidth/textureWidth;mat4param[7]=tileHeight/textureHeight;mat4param[8]=tileSpacingX/textureWidth;mat4param[9]=tileSpacingY/textureHeight}DoSetTilemapInfo(){const s=this._batchState.currentShader;const mat4param=this._mat4param;if(s._uSrcStart.IsUsed())s._uSrcStart.Update2f(mat4param[0],mat4param[1]);if(s._uPixelSize.IsUsed())s._uPixelSize.Update2f(mat4param[4],\nmat4param[5]);if(s._uTileSize.IsUsed())s._uTileSize.Update2f(mat4param[6],mat4param[7]);if(s._uTileSpacing.IsUsed())s._uTileSpacing.Update2f(mat4param[8],mat4param[9])}InitSetTileRandomizationInfo(textureWidth,textureHeight,xRandom,yRandom,angleRandom,blendMarginX,blendMarginY){this._type=BATCH_SETTILERANDOMIZATIONINFO;const mat4param=this._mat4param;mat4param[0]=1/textureWidth;mat4param[1]=1/textureHeight;mat4param[2]=xRandom;mat4param[3]=yRandom;mat4param[4]=angleRandom;mat4param[5]=blendMarginX;\nmat4param[6]=blendMarginY}DoSetTileRandomizationInfo(){const s=this._batchState.currentShader;const mat4param=this._mat4param;if(s._uPixelSize.IsUsed())s._uPixelSize.Update2f(mat4param[0],mat4param[1]);if(s._uTileSize.IsUsed())s._uTileSize.Update2f(mat4param[2],mat4param[3]);if(s._uOutlineThickness.IsUsed())s._uOutlineThickness.Update1f(mat4param[4]);if(s._uTileSpacing.IsUsed())s._uTileSpacing.Update2f(mat4param[5],mat4param[6])}InitClearDepth(isDepthEnabled){this._type=BATCH_CLEARDEPTH;this._startIndex=\nisDepthEnabled?1:0}DoClearDepth(){const gl=this._gl;const isDepthEnabled=this._startIndex!==0;if(!isDepthEnabled)gl.depthMask(true);gl.clear(gl.DEPTH_BUFFER_BIT);if(!isDepthEnabled)gl.depthMask(false)}InitSetDepthEnabled(e){this._type=BATCH_SETDEPTHENABLED;this._startIndex=e?1:0}DoSetDepthEnabled(){const gl=this._gl;if(this._startIndex===0){gl.disable(gl.DEPTH_TEST);gl.depthMask(false)}else{gl.enable(gl.DEPTH_TEST);gl.depthMask(true)}}InitSetDepthSamplingEnabled(e){this._type=BATCH_SETDEPTHSAMPLINGENABLED;\nthis._startIndex=e?1:0}DoSetDepthSamplingEnabled(){const gl=this._gl;const batchState=this._batchState;const renderer=batchState.renderer;const isDepthSamplingEnabled=this._startIndex!==0;batchState.isDepthSamplingEnabled=isDepthSamplingEnabled;gl.activeTexture(gl.TEXTURE2);if(isDepthSamplingEnabled){if(batchState.currentFramebufferNoDepth)gl.bindFramebuffer(gl.FRAMEBUFFER,batchState.currentFramebufferNoDepth);gl.bindTexture(gl.TEXTURE_2D,renderer._GetDepthBuffer())}else{gl.bindTexture(gl.TEXTURE_2D,\nnull);if(batchState.currentFramebufferNoDepth)gl.bindFramebuffer(gl.FRAMEBUFFER,batchState.currentFramebuffer)}gl.activeTexture(gl.TEXTURE0)}InitCoplanarStartStencilPass(){this._type=BATCH_COPLANAR_STARTSTENCILPASS}DoCoplanarStartStencilPass(){const gl=this._gl;gl.clear(gl.STENCIL_BUFFER_BIT);gl.enable(gl.STENCIL_TEST);gl.stencilFunc(gl.ALWAYS,1,1);gl.stencilOp(gl.KEEP,gl.KEEP,gl.REPLACE);gl.colorMask(false,false,false,false)}InitCoplanarStartColorPass(){this._type=BATCH_COPLANAR_STARTCOLORPASS}DoCoplanarStartColorPass(){const gl=\nthis._gl;gl.colorMask(true,true,true,true);gl.stencilFunc(gl.EQUAL,1,1);gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP)}InitCoplanarRestore(){this._type=BATCH_COPLANAR_RESTORE}DoCoplanarRestore(){const gl=this._gl;gl.disable(gl.STENCIL_TEST)}InitSetScissor(enable,x,y,w,h){this._type=BATCH_SET_SCISSOR;this._startIndex=enable?1:0;const mat4param=this._mat4param;mat4param[0]=x;mat4param[1]=y;mat4param[2]=w;mat4param[3]=h}DoSetScissor(){const gl=this._gl;const mat4param=this._mat4param;if(this._startIndex===1){gl.enable(gl.SCISSOR_TEST);\ngl.scissor(mat4param[0],mat4param[1],mat4param[2],mat4param[3])}else gl.disable(gl.SCISSOR_TEST)}Run(){switch(this._type){case 1:this.DoQuad();return;case 2:this.DoSetTexture();return;case 3:this.DoSetColor();return;case 4:this.DoSetBlend();return;case 5:this.DoSetViewport();return;case 6:this.DoSetProjection();return;case 7:this.DoSetModelView();return;case 8:this.DoSetRenderTarget();return;case 9:this.DoClearSurface();return;case 10:this.DoPoints();return;case 11:this.DoSetProgram();return;case 12:this.DoSetProgramParameters();\nreturn;case 13:this.DoSetProgramCustomParameters();return;case 14:this.DoInvalidateFramebuffer();return;case 15:this.DoSetPointTextureCoords();return;case 16:this.DoSetTilemapInfo();return;case 17:this.DoBlitFramebuffer();return;case 18:this.DoStartQuery();return;case 19:this.DoEndQuery();return;case 20:this.DoSetEllipseParams();return;case 21:this.DoSetGradientColor();return;case 22:this.DoClearDepth();return;case 23:this.DoSetDepthEnabled();return;case 24:this.DoSetDepthSamplingEnabled();return;\ncase 25:this.DoCoplanarStartStencilPass();return;case 26:this.DoCoplanarStartColorPass();return;case 27:this.DoCoplanarRestore();return;case 28:this.DoSetScissor();return;case 29:this.DoSetTileRandomizationInfo();return}}};\n\n}\n\n// ../lib/gfx/text.js\n{\n'use strict';const C3=self.C3;const MAX_TEXTURE_SIZE=4096;const EXTRA_LINE_HEIGHT=4;const GENERIC_FONT_FAMILIES=new Set([\"serif\",\"sans-serif\",\"monospace\",\"cursive\",\"fantasy\",\"system-ui\",\"ui-serif\",\"ui-sans-serif\",\"ui-monospace\",\"ui-rounded\",\"math\",\"emoji\",\"fangsong\"]);const DEFAULT_OPTS={timeout:60};const tempColor=new C3.Color(0,0,0,1);const VALID_HORIZ_ALIGNMENTS=new Set([\"left\",\"center\",\"right\"]);const VALID_VERT_ALIGNMENTS=new Set([\"top\",\"center\",\"bottom\"]);\nconst VALID_WORD_WRAP_MODES=new Set([\"word\",\"character\"]);const allRendererTexts=new Set;if(C3.FontManager)C3.FontManager.addEventListener(\"fontload\",e=>{const fontName=e.font.GetName();for(const f of allRendererTexts)if(f.IsBBCodeEnabled()||C3.equalsNoCase(f.GetFontName(),fontName))f._SetTextChanged()});\nfunction fillOrStrokeText(ctx,isStroke,text,x,y,maxWidth){if(isStroke)if(C3.Platform.BrowserEngine===\"Gecko\")ctx.strokeText(text,x,y,maxWidth);else ctx.strokeText(text,x,y);else if(C3.Platform.BrowserEngine===\"Gecko\")ctx.fillText(text,x,y,maxWidth);else ctx.fillText(text,x,y)}function fillOrStrokeRect(ctx,isStroke,x,y,w,h){if(isStroke)ctx.strokeRect(x,y,w,h);else ctx.fillRect(x,y,w,h)}function ptToPx(pt){return pt*(4/3)}\nfunction getOffsetParam(paramStr,fragHeight){paramStr=paramStr.trim();const param=parseFloat(paramStr);if(!isFinite(param))return 0;if(paramStr.endsWith(\"%\"))return fragHeight*param/100;else return param}let didCheckFoundBoundingBoxSupport=false;let supportsFontBoundingBoxMeasurements=false;\nC3.Gfx.RendererText=class RendererText{constructor(renderer,opts){opts=Object.assign({},DEFAULT_OPTS,opts);this._renderer=renderer;this._fontName=\"Arial\";this._fontSize=16;this._fontSizeScale=1;this._lineHeight=0;this._isBold=false;this._isItalic=false;this._colorStr=\"black\";this._isBBcodeEnabled=false;this._iconSet=null;this._iconSmoothing=true;this.onloadfont=null;this._alreadyLoadedFonts=new Set;this._horizontalAlign=\"left\";this._verticalAlign=\"top\";this._text=\"\";this._bbString=null;this._wrappedText=\nC3.New(C3.WordWrap);this._wrapMode=\"word\";this._textChanged=false;this._drawMaxCharCount=-1;this._drawCharCount=0;this._cssWidth=0;this._cssHeight=0;this._width=0;this._height=0;this._zoom=1;this._changed=false;this._textCanvas=null;this._textContext=null;this._measureContext=null;this._measureContextTop=null;this._lastCanvasWidth=-1;this._lastCanvasHeight=-1;this._lastTextCanvasFont=\"\";this._lastMeasureCanvasFont=\"\";this._lastTextCanvasFillStyle=\"\";this._lastTextCanvasOpacity=1;this._lastTextCanvasLineWidth=\n1;this._measureTextCallback=frag=>this._MeasureText(frag);this._texture=null;this._rcTex=new C3.Rect;this._scaleFactor=1;this._textureTimeout=new C3.IdleTimeout(()=>{this.ReleaseTexture();this._SetTextCanvasSize(8,8)},opts.timeout);this.ontextureupdate=null;this._wasReleased=false;allRendererTexts.add(this)}Release(){this.onloadfont=null;this._alreadyLoadedFonts.clear();this._iconSet=null;this._bbString=null;this._textCanvas=null;this._textContext=null;this._measureContext=null;this._measureContextTop=\nnull;this._measureTextCallback=null;this._textureTimeout.Release();this.ontextureupdate=null;this.ReleaseTexture();this._wrappedText.Clear();this._wrappedText=null;this._renderer=null;this._wasReleased=true;allRendererTexts.delete(this)}_SetChanged(){this._changed=true}_SetTextChanged(){this._SetChanged();this._wrappedText.Clear();this._textChanged=true}SetBBCodeEnabled(e){e=!!e;if(this._isBBcodeEnabled===e)return;this._isBBcodeEnabled=e;const textBaseline=this._isBBcodeEnabled?\"alphabetic\":\"top\";\nif(this._textContext)this._textContext.textBaseline=textBaseline;if(this._measureContext)this._measureContext.textBaseline=textBaseline;this._SetTextChanged()}IsBBCodeEnabled(){return this._isBBcodeEnabled}SetIconSet(iconSet){if(this._iconSet===iconSet)return;this._iconSet=iconSet;this._wrappedText.SetIconSet(iconSet);if(this._iconSet&&this._iconSet.IsLoading())this._iconSet.LoadContent().then(()=>this._SetChanged());this._SetTextChanged()}SetIconSmoothing(s){s=!!s;if(this._iconSmoothing===s)return;\nthis._iconSmoothing=s;this._SetChanged()}SetFontName(fontName){if(!fontName)fontName=\"serif\";if(this._fontName===fontName)return;this._fontName=fontName;this._SetTextChanged()}GetFontName(){return this._fontName}SetFontSize(fontSize){if(fontSize<.1)fontSize=.1;if(this._fontSize===fontSize)return;this._fontSize=fontSize;this._SetTextChanged()}SetFontSizeScale(s){if(this._fontSizeScale===s)return;this._fontSizeScale=s;this._SetTextChanged()}SetLineHeight(h){if(this._lineHeight===h)return;this._lineHeight=\nh;this._SetChanged()}SetBold(bold){bold=!!bold;if(this._isBold===bold)return;this._isBold=bold;this._SetTextChanged()}SetItalic(italic){italic=!!italic;if(this._isItalic===italic)return;this._isItalic=italic;this._SetTextChanged()}SetDrawMaxCharacterCount(n){n=Math.floor(n);if(this._drawMaxCharCount===n)return;this._drawMaxCharCount=n;this._SetChanged()}GetDrawMaxCharacterCount(){return this._drawMaxCharCount}_GetFontString(useCssUnits,frag){let ret=[];if(this._isBold||frag.HasStyleTag(\"b\"))ret.push(\"bold\");\nif(this._isItalic||frag.HasStyleTag(\"i\"))ret.push(\"italic\");const sizeStyle=frag.GetStyleTag(\"size\");const fontSize=(sizeStyle?parseFloat(sizeStyle.param):this._fontSize)*this._fontSizeScale;if(useCssUnits)ret.push(fontSize+\"pt\");else ret.push(fontSize*this.GetDrawScale()+\"pt\");let fontName=this._fontName;const fontStyle=frag.GetStyleTag(\"font\");if(fontStyle&&fontStyle.param){fontName=fontStyle.param;if(this.onloadfont&&!this._alreadyLoadedFonts.has(fontName)){this.onloadfont(fontName);this._alreadyLoadedFonts.add(fontName)}}if(fontName)if(GENERIC_FONT_FAMILIES.has(fontName))ret.push(fontName);\nelse ret.push('\"'+fontName+'\"');return ret.join(\" \")}SetColor(c){if(c instanceof C3.Color)c=c.getCssRgb();if(this._colorStr===c)return;this._colorStr=c;this._SetChanged()}SetColorRgb(r,g,b){tempColor.setRgb(r,g,b);this.SetColor(tempColor)}SetHorizontalAlignment(h){if(!VALID_HORIZ_ALIGNMENTS.has(h))throw new Error(\"invalid horizontal alignment\");if(this._horizontalAlign===h)return;this._horizontalAlign=h;this._SetChanged()}SetVerticalAlignment(v){if(!VALID_VERT_ALIGNMENTS.has(v))throw new Error(\"invalid vertical alignment\");\nif(this._verticalAlign===v)return;this._verticalAlign=v;this._SetChanged()}SetWordWrapMode(m){if(!VALID_WORD_WRAP_MODES.has(m))throw new Error(\"invalid word wrap mode\");if(this._wrapMode===m)return;this._wrapMode=m;this._SetTextChanged()}SetText(text){if(this._text===text)return;this._text=text;this._SetTextChanged()}GetDrawScale(){return this._scaleFactor*this._zoom*self.devicePixelRatio}SetSize(cssWidth,cssHeight,zoom){if(typeof zoom===\"undefined\")zoom=1;if(cssWidth<=0||cssWidth<=0)return;if(this._cssWidth===\ncssWidth&&this._cssHeight===cssHeight&&this._zoom===zoom)return;const oldCssWidth=this._cssWidth;this._cssWidth=cssWidth;this._cssHeight=cssHeight;this._zoom=zoom;const dpr=self.devicePixelRatio;this._width=this._cssWidth*this._zoom*dpr;this._height=this._cssHeight*this._zoom*dpr;const maxDim=Math.max(this._width,this._height);const maxTextureSize=Math.min(this._renderer.GetMaxTextureSize(),MAX_TEXTURE_SIZE);let scale=1;if(maxDim>maxTextureSize){scale=maxTextureSize/maxDim;this._width=Math.min(this._width*\nscale,maxTextureSize);this._height=Math.min(this._height*scale,maxTextureSize)}this._scaleFactor=scale;if(this._cssWidth!==oldCssWidth)this._SetTextChanged();else this._SetChanged()}GetWidth(){return this._width}GetHeight(){return this._height}GetZoom(){return this._zoom}GetTextWidth(){this._MaybeWrapText();return this._wrappedText.GetMaxLineWidth()}GetTextHeight(){this._MaybeWrapText();return this._wrappedText.GetTotalLineHeight()+this._wrappedText.GetLineCount()*(this._lineHeight+EXTRA_LINE_HEIGHT)-\nthis._lineHeight}GetLengthInGraphemes(){this._MaybeWrapText();let ret=0;for(const line of this._wrappedText.GetLines())for(const frag of line.fragments())ret+=frag.GetLength();return ret}GetTexture(){this._textureTimeout.Reset();this._MaybeUpdate();return this._texture}HitTestFragment(x,y){this._MaybeUpdate();const scale=this.GetDrawScale();const lines=this._wrappedText.GetLines();for(const line of lines){const yOff=line.GetFontBoundingBoxDescent()*scale;if(y>=line.GetPosY()-line.GetHeight()*scale+\nyOff&&y<line.GetPosY()+yOff)for(const frag of line.fragments())if(x>=frag.GetPosX()&&x<frag.GetPosX()+frag.GetWidth()*scale)return frag}return null}*fragmentsWithTag(tag){this._MaybeUpdate();const lines=this._wrappedText.GetLines();for(const line of lines)for(const frag of line.fragments()){const tagStyle=frag.GetStyleTag(\"tag\");if(tagStyle&&C3.equalsNoCase(tagStyle.param,tag))yield frag}}FindFragmentWithTag(tag,index){for(const frag of this.fragmentsWithTag(tag))if(index===0)return frag;else--index;\nreturn null}CountFragmentsWithTag(tag){let count=0;for(const frag of this.fragmentsWithTag(tag))++count;return count}_MaybeUpdate(){if(this._texture&&!this._changed&&!this._textChanged)return;if(this._wasReleased)return;if(this._width<=0||this._height<=0)return;this._changed=false;this._DoUpdate()}_DoUpdate(){if(this._wasReleased)return;this._SetTextCanvasSize(Math.max(C3.nextHighestPowerOfTwo(Math.ceil(this._width)),128),Math.max(C3.nextHighestPowerOfTwo(Math.ceil(this._height)),64));this._MaybeWrapText();\nthis._DrawTextToCanvas();this._UpdateTexture();this._textureTimeout.Reset()}_SetTextCanvasSize(w,h){if(!this._textCanvas)this._textCanvas=C3.CreateCanvas(16,16);let wasReset=false;if(this._lastCanvasWidth!==w||this._lastCanvasHeight!==h){this._lastCanvasWidth=w;this._lastCanvasHeight=h;this._textCanvas.width=w;this._textCanvas.height=h;wasReset=true}if(!this._textContext){this._textContext=this._textCanvas.getContext(\"2d\");wasReset=true}if(wasReset){this._textContext.textBaseline=this._isBBcodeEnabled?\n\"alphabetic\":\"top\";this._textContext.font=this._lastTextCanvasFont;this._textContext.fillStyle=this._lastTextCanvasFillStyle;this._textContext.strokeStyle=this._lastTextCanvasFillStyle;this._textContext.globalAlpha=this._lastTextCanvasOpacity;this._textContext.lineWidth=this._lastTextCanvasLineWidth}else this._textContext.clearRect(0,0,w,h)}_MaybeCreateMeasureContext(){if(this._measureContext)return;this._measureContext=C3.CreateCanvas(16,16).getContext(\"2d\");this._measureContextTop=C3.CreateCanvas(16,\n16).getContext(\"2d\");this._measureContext.textBaseline=this._isBBcodeEnabled?\"alphabetic\":\"top\";this._measureContextTop.textBaseline=\"top\"}_SetMeasureFontString(fontString){if(this._lastMeasureCanvasFont===fontString)return;this._lastMeasureCanvasFont=fontString;this._measureContext.font=fontString;this._measureContextTop.font=fontString}_SupportsFontBoundingBoxMeasurements(){if(!didCheckFoundBoundingBoxSupport){didCheckFoundBoundingBoxSupport=true;this._MaybeCreateMeasureContext();const textMetrics=\nthis._measureContext.measureText(\"test\");supportsFontBoundingBoxMeasurements=typeof textMetrics[\"fontBoundingBoxAscent\"]===\"number\"&&typeof textMetrics[\"fontBoundingBoxDescent\"]===\"number\"}return supportsFontBoundingBoxMeasurements}_MaybeWrapText(){if(!this._textChanged)return;this._MaybeCreateMeasureContext();if(this._isBBcodeEnabled&&(!this._bbString||this._bbString.toString()!==this._text))this._bbString=new C3.BBString(this._text,{noEscape:true});this._wrappedText.WordWrap(this._isBBcodeEnabled?\nthis._bbString.toFragmentList():this._text,this._measureTextCallback,this._cssWidth,this._wrapMode,0);this._textChanged=false}_MeasureText(frag){const text=frag.IsText()?frag.GetCharacterArray().join(\"\"):\" \";this._SetMeasureFontString(this._GetFontString(true,frag));const sizeStyle=frag.GetStyleTag(\"size\");const fontSize=(sizeStyle?parseFloat(sizeStyle.param):this._fontSize)*this._fontSizeScale;const textMetrics=this._measureContext.measureText(text);let topToAlphabeticDistance=0;if(this._isBBcodeEnabled&&\nthis._SupportsFontBoundingBoxMeasurements()){const textMetricsTop=this._measureContextTop.measureText(text);topToAlphabeticDistance=textMetrics[\"fontBoundingBoxAscent\"]-textMetricsTop[\"fontBoundingBoxAscent\"]}return{width:textMetrics.width,height:ptToPx(fontSize),fontBoundingBoxAscent:textMetrics[\"fontBoundingBoxAscent\"]||0,fontBoundingBoxDescent:textMetrics[\"fontBoundingBoxDescent\"]||0,topToAlphabeticDistance}}_SetDrawFontString(fontString){if(this._lastTextCanvasFont===fontString)return;this._lastTextCanvasFont=\nfontString;this._textContext.font=fontString}_SetDrawCanvasColor(styleStr){if(this._lastTextCanvasFillStyle===styleStr)return;this._lastTextCanvasFillStyle=styleStr;this._textContext.fillStyle=styleStr;this._textContext.strokeStyle=styleStr}_SetDrawCanvasOpacity(o){if(this._lastTextCanvasOpacity===o)return;this._lastTextCanvasOpacity=o;this._textContext.globalAlpha=o}_SetDrawCanvasLineWith(w){if(this._lastTextCanvasLineWidth===w)return;this._lastTextCanvasLineWidth=w;this._textContext.lineWidth=w}_DrawTextToCanvas(){this._textContext.imageSmoothingEnabled=\nthis._iconSmoothing;this._drawCharCount=0;const scale=this.GetDrawScale();const lineSpaceHeight=(EXTRA_LINE_HEIGHT+this._lineHeight)*scale;let penY=0;const lines=this._wrappedText.GetLines();if(lines.length===0)return;const useFontBoundingBoxMeasurements=this._isBBcodeEnabled&&this._SupportsFontBoundingBoxMeasurements();let firstLineTextHeight=lines[0].GetHeight()*scale;if(this._verticalAlign===\"center\"){const linesTotalHeight=lines.reduce((a,v)=>a+v.GetHeight()*scale+lineSpaceHeight,0)-lineSpaceHeight;\npenY=Math.max(this._height/2-linesTotalHeight/2,0);if(useFontBoundingBoxMeasurements)firstLineTextHeight=lines[0].GetTopToAlphabeticDistance()*scale}else if(this._verticalAlign===\"bottom\"){const linesTotalHeight=lines.reduce((a,v)=>a+v.GetHeight()*scale+lineSpaceHeight,0)-this._lineHeight*scale;const lastLineDescentHeight=useFontBoundingBoxMeasurements?lines.at(-1).GetFontBoundingBoxDescent()*scale:0;penY=this._height-linesTotalHeight-lastLineDescentHeight-2}for(let i=0,len=lines.length;i<len;++i){const line=\nlines[i];const curLineTextHeight=line.GetHeight()*scale;const startPenY=penY;if(this._isBBcodeEnabled){penY+=i===0?firstLineTextHeight:curLineTextHeight;if(i>0&&penY>this._height-EXTRA_LINE_HEIGHT*scale)break}else if(i>0&&penY>=this._height-curLineTextHeight)break;if(startPenY>=0)this._DrawTextLine(line,penY,scale);if(!this._isBBcodeEnabled)penY+=curLineTextHeight;penY+=lineSpaceHeight}}_DrawTextLine(line,penY,scale){let penX=0;if(this._horizontalAlign===\"center\")penX=(this._width-line.GetWidth()*\nscale)/2;else if(this._horizontalAlign===\"right\")penX=this._width-line.GetWidth()*scale;line.SetPosX(penX);line.SetPosY(penY);for(const frag of line.fragments()){this._DrawFragment(frag,penX,penY,scale,line.GetHeight());penX+=frag.GetWidth()*scale}}_DrawFragment(frag,penX,penY,scale,lineHeight){const offsetXStyle=frag.GetStyleTag(\"offsetx\");penX+=offsetXStyle?getOffsetParam(offsetXStyle.param,frag.GetHeight())*scale:0;const offsetYStyle=frag.GetStyleTag(\"offsety\");penY+=offsetYStyle?getOffsetParam(offsetYStyle.param,\nfrag.GetHeight())*scale:0;if(frag.IsIcon()){const iconOffsetYStyle=frag.GetStyleTag(\"iconoffsety\");penY+=iconOffsetYStyle?getOffsetParam(iconOffsetYStyle.param,frag.GetHeight())*scale:.2*frag.GetHeight()*scale}frag.SetPosX(penX);frag.SetPosY(penY);const textContext=this._textContext;const lineFontScale=lineHeight/16;let fragWidth=frag.GetWidth()*scale;const fragHeight=frag.GetHeight()*scale;const fragFontScale=frag.GetHeight()/16;const lineSpaceHeight=(EXTRA_LINE_HEIGHT+this._lineHeight)*scale;let chArr=\nfrag.IsText()?frag.GetCharacterArray():null;if(this._drawMaxCharCount!==-1){if(this._drawCharCount>=this._drawMaxCharCount)return;if(frag.IsText())if(this._drawCharCount+chArr.length>this._drawMaxCharCount){chArr=chArr.slice(0,this._drawMaxCharCount-this._drawCharCount);fragWidth=this._MeasureText(frag).width*scale}this._drawCharCount+=frag.GetLength()}const backgroundStyle=frag.GetStyleTag(\"background\");const hasUnderline=frag.HasStyleTag(\"u\");const hasStrikethrough=frag.HasStyleTag(\"s\");if(frag.IsText()&&\nC3.IsCharArrayAllWhitespace(chArr)&&!backgroundStyle&&!hasUnderline&&!hasStrikethrough||frag.HasStyleTag(\"hide\"))return;if(backgroundStyle){this._SetDrawCanvasColor(backgroundStyle.param);textContext.fillRect(penX,penY-fragHeight,fragWidth,fragHeight+lineSpaceHeight)}const colorStyle=frag.GetStyleTag(\"color\");this._SetDrawCanvasColor(colorStyle?colorStyle.param:this._colorStr);const opacityStyle=frag.GetStyleTag(\"opacity\");this._SetDrawCanvasOpacity(opacityStyle?parseFloat(opacityStyle.param)/100:\n1);const lineThicknessStyle=frag.GetStyleTag(\"linethickness\");const lineThicknessScale=lineThicknessStyle?parseFloat(lineThicknessStyle.param):1;const isStroke=frag.HasStyleTag(\"stroke\");if(isStroke)this._SetDrawCanvasLineWith(fragFontScale*.5*lineThicknessScale*this.GetDrawScale());if(frag.IsText()){const text=chArr.join(\"\");this._SetDrawFontString(this._GetFontString(false,frag));fillOrStrokeText(textContext,isStroke,text,penX,penY,fragWidth);if(!isStroke){this._SetDrawCanvasLineWith(fragFontScale*\n.5*lineThicknessScale*this.GetDrawScale());const outlineStyle=frag.GetStyleTag(\"outline\");if(outlineStyle){this._SetDrawCanvasColor(outlineStyle.param);fillOrStrokeText(textContext,true,text,penX,penY,fragWidth)}}}else if(frag.IsIcon())if(frag.GetWidth()>0){const drawable=frag.GetDrawable(this._iconSet);if(drawable)textContext.drawImage(drawable,penX,penY-fragHeight,fragWidth,fragHeight)}this._SetDrawCanvasColor(colorStyle?colorStyle.param:this._colorStr);if(hasUnderline)fillOrStrokeRect(textContext,\nisStroke,penX,penY+scale*lineFontScale,fragWidth,scale*lineFontScale*lineThicknessScale);if(hasStrikethrough){const defaultStrikeY=penY-fragHeight/4;const defaultStrikeHeight=scale*fragFontScale;const strikeYMid=defaultStrikeY+defaultStrikeHeight/2;textContext.fillRect(penX,strikeYMid-defaultStrikeHeight*lineThicknessScale/2,fragWidth,defaultStrikeHeight*lineThicknessScale)}}_UpdateTexture(){if(this._renderer.IsContextLost())return;if(!this._texture)this._texture=this._renderer.CreateDynamicTexture(this._textCanvas.width,\nthis._textCanvas.height,{mipMap:true,mipMapQuality:\"high\"});this._renderer.UpdateTexture(this._textCanvas,this._texture);this._rcTex.set(0,0,this._width/this._texture.GetWidth(),this._height/this._texture.GetHeight());if(this.ontextureupdate)this.ontextureupdate()}GetTexRect(){return this._rcTex}ReleaseTexture(){if(this._texture){if(!this._renderer.IsContextLost())this._renderer.DeleteTexture(this._texture);this._texture=null}}static OnContextLost(){for(const rendererText of allRendererTexts)rendererText.ReleaseTexture()}static GetAll(){return allRendererTexts.values()}};\n\n}\n\n// ../lib/gfx/webgl/query.js\n{\n'use strict';const C3=self.C3;\nclass WebGLRealTimeElapsedQuery{constructor(renderer){this._gl=renderer.GetContext();this._version=renderer.GetWebGLVersionNumber();this._timerExt=renderer._GetDisjointTimerQueryExtension();this._query=null;this._isActive=false;this._hasResult=false;this._result=0;if(this._version===1)this._query=this._timerExt[\"createQueryEXT\"]();else this._query=this._gl[\"createQuery\"]()}Release(){this._DeleteQueryObject();this._gl=null;this._timerExt=null;this._hasResult=false}_DeleteQueryObject(){if(!this._query)return;if(this._version===\n1)this._timerExt[\"deleteQueryEXT\"](this._query);else this._gl[\"deleteQuery\"](this._query);this._query=null}BeginTimeElapsed(){if(this._isActive)throw new Error(\"query already active\");if(this._version===1)this._timerExt[\"beginQueryEXT\"](this._timerExt[\"TIME_ELAPSED_EXT\"],this._query);else this._gl[\"beginQuery\"](this._timerExt[\"TIME_ELAPSED_EXT\"],this._query);this._isActive=true}EndTimeElapsed(){if(!this._isActive)throw new Error(\"query not active\");if(this._version===1)this._timerExt[\"endQueryEXT\"](this._timerExt[\"TIME_ELAPSED_EXT\"]);\nelse this._gl[\"endQuery\"](this._timerExt[\"TIME_ELAPSED_EXT\"]);this._isActive=false}CheckForResult(){if(!this._query||this._hasResult||this._isActive)return;let available=false;if(this._version===1)available=this._timerExt[\"getQueryObjectEXT\"](this._query,this._timerExt[\"QUERY_RESULT_AVAILABLE_EXT\"]);else available=this._gl[\"getQueryParameter\"](this._query,this._gl[\"QUERY_RESULT_AVAILABLE\"]);const disjoint=this._gl.getParameter(this._timerExt[\"GPU_DISJOINT_EXT\"]);if(available&&!disjoint){if(this._version===\n1)this._result=this._timerExt[\"getQueryObjectEXT\"](this._query,this._timerExt[\"QUERY_RESULT_EXT\"]);else this._result=this._gl[\"getQueryParameter\"](this._query,this._gl[\"QUERY_RESULT\"]);this._result/=1E9;this._hasResult=true}if(available||disjoint)this._DeleteQueryObject()}HasResult(){return this._hasResult}GetResult(){if(!this._hasResult)throw new Error(\"no result available\");return this._result}}\nC3.Gfx.WebGLTimeElapsedQuery=class WebGLTimeElapsedQuery{constructor(renderer){this._renderer=renderer;this._frameNumber=renderer.GetFrameNumber();this._isActive=false;this._parentQuery=null;this._isNested=false;this._realQuery=null;this._queries=[]}Release(){for(const q of this._queries)if(q instanceof WebGLRealTimeElapsedQuery)q.Release();C3.clearArray(this._queries);this._parentQuery=null;this._realQuery=null;this._renderer=null}BeginTimeElapsed(){if(this._isActive)throw new Error(\"query already active\");\nconst stack=this._renderer._GetTimeQueryStack();if(stack.length>0){this._isNested=true;this._parentQuery=stack.at(-1);this._parentQuery._EndReal();this._parentQuery._queries.push(this)}else{this._isNested=false;this._parentQuery=null}this._isActive=true;stack.push(this);this._StartReal()}EndTimeElapsed(){if(!this._isActive)throw new Error(\"query not active\");const top=this._renderer._GetTimeQueryStack().pop();if(top!==this)throw new Error(\"can only end most nested query\");this._isActive=false;this._EndReal();\nif(this._parentQuery){this._parentQuery._StartReal();this._parentQuery=null}}_StartReal(){this._realQuery=C3.New(WebGLRealTimeElapsedQuery,this._renderer);this._queries.push(this._realQuery);this._realQuery.BeginTimeElapsed()}_EndReal(){this._realQuery.EndTimeElapsed();this._realQuery=null}CheckForResult(){for(const q of this._queries)q.CheckForResult()}IsNested(){return this._isNested}HasResult(){return this._queries.every(q=>q.HasResult())}GetResult(){return this._queries.reduce((a,v)=>a+v.GetResult(),\n0)}GetFrameNumber(){return this._frameNumber}};\n\n}\n\n// ../lib/gfx/webgl/queryResultBuffer.js\n{\n'use strict';const C3=self.C3;\nC3.Gfx.WebGLQueryResultBuffer=class WebGLQueryResultBuffer{constructor(renderer,maxQueries=1E3){this._renderer=renderer;this._maxQueries=maxQueries;this._buffer=[];this._renderer._AddQueryResultBuffer(this)}Release(){this.Clear();this._renderer._RemoveQueryResultBuffer(this);this._renderer=null}Clear(){for(const q of this._buffer)q.Release();C3.clearArray(this._buffer)}AddTimeElapsedQuery(){const ret=new C3.Gfx.WebGLTimeElapsedQuery(this._renderer);this._buffer.push(ret);if(this._buffer.length>this._maxQueries){const oldest=\nthis._buffer.shift();oldest.Release()}return ret}CheckForResults(toFrameNumber){for(const q of this._buffer){if(q.GetFrameNumber()>=toFrameNumber)return;if(q.IsNested())return;q.CheckForResult()}}GetFrameRangeResultSum(startFrame,endFrame){if(endFrame<=startFrame)return NaN;let sum=0;for(const q of this._buffer){if(q.GetFrameNumber()>=endFrame)break;if(q.GetFrameNumber()<startFrame)continue;if(q.HasResult())sum+=q.GetResult();else return NaN}return sum}DeleteAllBeforeFrameNumber(frameNumber){for(let i=\n0,len=this._buffer.length;i<len;++i){const q=this._buffer[i];if(q.GetFrameNumber()<frameNumber)q.Release();else{if(i>0)this._buffer.splice(0,i);return}}}};\n\n}\n\n// ../lib/gfx/webgl/webglRenderer.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const vec4=glMatrix.vec4;const mat4=glMatrix.mat4;const DEFAULT_WEBGLRENDERER_OPTS={powerPreference:\"default\",enableGpuProfiling:true,alpha:false,lowLatency:false,depth:false,canSampleDepth:false,maxWebGLVersion:2,failIfMajorPerformanceCaveat:false};const VALID_POWER_PREFERENCES=new Set([\"default\",\"low-power\",\"high-performance\"]);const MAX_VERTICES=8E3;const MAX_INDICES=MAX_VERTICES/2*3;\nconst MAX_POINTS=8E3;const LAST_POINT=MAX_POINTS-4;const PARTIAL_TEXTURE_UPLOAD_CHUNK_SIZE=256*1024;const defaultTexCoordsQuad=new C3.Quad(0,0,1,0,1,1,0,1);const tmpProjection=mat4.create();const tmpModelView=mat4.create();const tmpQuad=new C3.Quad;const tmpRect=new C3.Rect;let loseContextExtension=null;\nif(C3.isDebug){self.debug_lose_webgl_context=function(){if(!loseContextExtension){console.warn(\"WEBGL_lose_context not supported\");return}loseContextExtension.loseContext()};self.debug_restore_webgl_context=function(){if(!loseContextExtension){console.warn(\"WEBGL_lose_context not supported\");return}loseContextExtension.restoreContext()}}const pendingPolls=new Set;let pollRafId=-1;\nfunction CheckPendingPolls(){pollRafId=-1;for(const info of pendingPolls)if(info.checkFunc()){info.resolve();pendingPolls.delete(info)}if(pendingPolls.size>0)pollRafId=self.requestAnimationFrame(CheckPendingPolls)}\nC3.Gfx.WebGLRenderer=class WebGLRenderer extends C3.Gfx.RendererBase{constructor(canvas,opts){super(opts);opts=Object.assign({},DEFAULT_WEBGLRENDERER_OPTS,opts);if(!VALID_POWER_PREFERENCES.has(opts.powerPreference))throw new Error(\"invalid power preference\");const attribs={\"alpha\":!!opts.alpha,\"depth\":false,\"antialias\":false,\"powerPreference\":opts.powerPreference,\"failIfMajorPerformanceCaveat\":!!opts.failIfMajorPerformanceCaveat};if(opts.lowLatency){attribs[\"desynchronized\"]=true;attribs[\"preserveDrawingBuffer\"]=\ntrue}let gl=null;let version=0;if(opts.maxWebGLVersion>=2){gl=canvas.getContext(\"webgl2\",attribs);version=2}if(!gl){gl=canvas.getContext(\"webgl\",attribs);version=1}if(!gl)throw new Error(\"renderer-unavailable (could not get WebGL context)\");this._gl=gl;this._attribs=gl.getContextAttributes();if(opts.lowLatency&&!this._attribs[\"desynchronized\"])console.info(\"[WebGLRenderer] Low-latency mode specified but is not supported here\");this._versionString=gl.getParameter(gl.VERSION);this._version=version;\nthis._viewport=vec4.create();this._didChangeTransform=false;this._bbProjectionMatrix=mat4.create();this._usesDepthBuffer=!!opts.depth;this._canSampleDepth=!!(opts.depth&&opts.canSampleDepth);this._isDepthEnabled=this._usesDepthBuffer;this._isDepthSamplingEnabled=false;this._depthBuffer=null;this._isAutoSizeDepthBuffer=true;this._depthBufferWidth=0;this._depthBufferHeight=0;this._vertexBuffer=null;this._texcoordBuffer=null;this._indexBuffer=null;this._pointBuffer=null;this._vertexData=new Float32Array(MAX_VERTICES*\nthis.GetNumVertexComponents());this._indexData=new Uint16Array(MAX_INDICES);this._texcoordData=new Float32Array(MAX_VERTICES*2);this._pointData=new Float32Array(MAX_POINTS*4);this._vertexPtr=0;this._texPtr=0;this._pointPtr=0;this._lastVertexPtr=0;this._lastProgram=null;this._spDeviceTransformTextureFill=null;this._batch=[];this._batchPtr=0;this._topOfBatch=0;this._currentRenderTarget=null;this._lastPointZ=0;this._batchState=C3.New(C3.Gfx.BatchState,this);this._lastColor=C3.New(C3.Color,1,1,1,1);this._lastTexture0=\nnull;this._lastTexture1=null;this._lastSrcBlend=0;this._lastDestBlend=0;this._lastPointTexCoords=new C3.Rect;this._lastScissorRect=C3.New(C3.Rect,0,0,-1,-1);this._coplanarMode=0;this._maxTextureSize=-1;this._minPointSize=0;this._maxPointSize=0;this._highpPrecision=0;this._unmaskedVendor=\"(unavailable)\";this._unmaskedRenderer=\"(unavailable)\";this._extensions=[];this._isInitialisingAfterContextRestored=false;this._parallelShaderCompileExt=null;this._anisotropicExt=null;this._depthTextureExt=null;this._fragDepthExt=\nnull;this._stdDerivativesExt=null;this._textureLodExt=null;this._maxAnisotropy=0;this._isGpuProfilingEnabled=!!opts.enableGpuProfiling;this._timerExt=null;this._allQueryResultBuffers=new Set;this._timeQueryStack=[];this.FillIndexBufferData(this._indexData)}IsWebGL(){return true}async InitState(){super.InitState();const gl=this._gl;const numVertexComponents=this.GetNumVertexComponents();this._lastColor.setRgba(1,1,1,1);this._lastTexture0=null;this._lastTexture1=null;this._vertexPtr=0;this._pointPtr=\n0;this._lastVertexPtr=MAX_VERTICES*numVertexComponents-4*numVertexComponents;C3.clearArray(this._batch);this._batchPtr=0;this._topOfBatch=0;this._lastProgram=null;this._currentRenderTarget=null;this._lastPointTexCoords.set(0,0,1,1);this._lastPointZ=0;const batchState=this._batchState;batchState.currentShader=null;batchState.currentFramebuffer=null;batchState.currentFramebufferNoDepth=null;vec4.set(batchState.currentColor,1,1,1,1);batchState.clearColor.setRgba(0,0,0,0);batchState.pointTexCoords.set(0,\n0,1,1);gl.clearColor(0,0,0,0);gl.clear(gl.COLOR_BUFFER_BIT);gl.enable(gl.BLEND);gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA);this._lastSrcBlend=gl.ONE;this._lastDestBlend=gl.ONE_MINUS_SRC_ALPHA;this._InitBlendModes(gl);gl.disable(gl.CULL_FACE);gl.disable(gl.STENCIL_TEST);gl.disable(gl.DITHER);if(this._usesDepthBuffer){gl.enable(gl.DEPTH_TEST);gl.depthMask(true);gl.depthFunc(gl.LEQUAL)}else{gl.disable(gl.DEPTH_TEST);gl.depthMask(false)}this._isDepthEnabled=this._usesDepthBuffer;this._isDepthSamplingEnabled=\nfalse;this._pointBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this._pointBuffer);gl.bufferData(gl.ARRAY_BUFFER,this._pointData.byteLength,gl.DYNAMIC_DRAW);this._vertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this._vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,this._vertexData.byteLength,gl.DYNAMIC_DRAW);this._texcoordBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this._texcoordBuffer);gl.bufferData(gl.ARRAY_BUFFER,this._texcoordData.byteLength,gl.DYNAMIC_DRAW);this._indexBuffer=\ngl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this._indexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,this._indexData,gl.STATIC_DRAW);gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,null);this._maxTextureSize=gl.getParameter(gl.MAX_TEXTURE_SIZE);const pointsizes=gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);this._minPointSize=pointsizes[0];this._maxPointSize=pointsizes[1];const highpVertex=gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT);const highpFrag=gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,\ngl.HIGH_FLOAT);if(highpVertex&&highpFrag)this._highpPrecision=Math.min(highpVertex[\"precision\"],highpFrag[\"precision\"]);else this._highpPrecision=0;if(this._maxPointSize>2048)this._maxPointSize=2048;this._extensions=gl.getSupportedExtensions();const debug_ext=gl.getExtension(\"WEBGL_debug_renderer_info\");if(debug_ext){this._unmaskedVendor=gl.getParameter(debug_ext[\"UNMASKED_VENDOR_WEBGL\"]);this._unmaskedRenderer=gl.getParameter(debug_ext[\"UNMASKED_RENDERER_WEBGL\"])}this._parallelShaderCompileExt=gl.getExtension(\"KHR_parallel_shader_compile\");\nif(C3.isDebug)loseContextExtension=gl.getExtension(\"WEBGL_lose_context\");if(this._isGpuProfilingEnabled)if(this.GetWebGLVersionNumber()===1){if(C3.Platform.BrowserEngine!==\"Chromium\"||C3.Platform.BrowserVersionNumber>=81||typeof document!==\"undefined\")this._timerExt=gl.getExtension(\"EXT_disjoint_timer_query\")}else this._timerExt=gl.getExtension(\"EXT_disjoint_timer_query_webgl2\")||gl.getExtension(\"EXT_disjoint_timer_query\");this._anisotropicExt=gl.getExtension(\"EXT_texture_filter_anisotropic\");if(this._anisotropicExt)this._maxAnisotropy=\ngl.getParameter(this._anisotropicExt[\"MAX_TEXTURE_MAX_ANISOTROPY_EXT\"]);else this._maxAnisotropy=0;if(this.GetWebGLVersionNumber()<2&&this._usesDepthBuffer&&this._canSampleDepth){this._depthTextureExt=gl.getExtension(\"WEBGL_depth_texture\");if(!this._depthTextureExt)throw new Error(\"no depth texture support\");}if(this.GetWebGLVersionNumber()<2){this._fragDepthExt=gl.getExtension(\"EXT_frag_depth\");this._stdDerivativesExt=gl.getExtension(\"OES_standard_derivatives\");this._textureLodExt=gl.getExtension(\"EXT_shader_texture_lod\")}const WebGLShaderProgram=\nC3.Gfx.WebGLShaderProgram;const vsSource=WebGLShaderProgram.GetDefaultVertexShaderSource(false);let textureFillFragmentSrc=WebGLShaderProgram.GetTextureFillFragmentShaderSource_WebGL1_NoFragDepth();let textureFillVertexSrc=vsSource;let pointFragmentSrc=WebGLShaderProgram.GetPointFragmentShaderSource_WebGL1_NoFragDepth();let pointVertexSrc=WebGLShaderProgram.GetPointVertexShaderSource_WebGL1();let tilemapFragmentSrc=WebGLShaderProgram.GetTilemapFragmentShaderSource_WebGL1_NoFragDepth();let tilemapVertexSrc=\nWebGLShaderProgram.GetDefaultVertexShaderSource(true);let useFragDepthExt=false;if(this._usesDepthBuffer&&(C3.Platform.Browser!==\"Safari\"||C3.Platform.BrowserVersionNumber>=15.5))if(this.GetWebGLVersionNumber()<2){if(this._fragDepthExt){textureFillFragmentSrc=WebGLShaderProgram.GetTextureFillFragmentShaderSource_WebGL1_FragDepthEXT();pointFragmentSrc=WebGLShaderProgram.GetPointFragmentShaderSource_WebGL1_FragDepthEXT();tilemapFragmentSrc=WebGLShaderProgram.GetTilemapFragmentShaderSource_WebGL1_FragDepthEXT();\nuseFragDepthExt=true}}else{textureFillVertexSrc=WebGLShaderProgram.GetDefaultVertexShaderSource_WebGL2();textureFillFragmentSrc=WebGLShaderProgram.GetTextureFillFragmentShaderSource_WebGL2();pointFragmentSrc=WebGLShaderProgram.GetPointFragmentShaderSource_WebGL2();pointVertexSrc=WebGLShaderProgram.GetPointVertexShaderSource_WebGL2();tilemapFragmentSrc=WebGLShaderProgram.GetTilemapFragmentShaderSource_WebGL2();tilemapVertexSrc=WebGLShaderProgram.GetDefaultVertexShaderSource_WebGL2(true)}const tileRandomizationFragmentSrc=\nWebGLShaderProgram.GetTileRandomizationFragmentShaderSource(this.GetWebGLVersionNumber(),useFragDepthExt,this._stdDerivativesExt&&this._textureLodExt);const tileRandomizationVertexSrc=this.GetWebGLVersionNumber()>=2?WebGLShaderProgram.GetDefaultVertexShaderSource_WebGL2():vsSource;const DEFAULT_SHADER_PROGRAMS=[[textureFillFragmentSrc,textureFillVertexSrc,\"<default>\"],[textureFillFragmentSrc,textureFillVertexSrc,\"<default-device-transform>\"],[pointFragmentSrc,pointVertexSrc,\"<point>\"],[WebGLShaderProgram.GetColorFillFragmentShaderSource(),\nvsSource,\"<fill>\"],[WebGLShaderProgram.GetLinearGradientFillFragmentShaderSource(),vsSource,\"<lineargradient>\"],[WebGLShaderProgram.GetPenumbraFillFragmentShaderSource(),vsSource,\"<penumbra>\"],[WebGLShaderProgram.GetHardEllipseFillFragmentShaderSource(),vsSource,\"<hardellipse>\"],[WebGLShaderProgram.GetHardEllipseOutlineFragmentShaderSource(),vsSource,\"<hardellipseoutline>\"],[WebGLShaderProgram.GetSmoothEllipseFillFragmentShaderSource(),vsSource,\"<smoothellipse>\"],[WebGLShaderProgram.GetSmoothEllipseOutlineFragmentShaderSource(),\nvsSource,\"<smoothellipseoutline>\"],[WebGLShaderProgram.GetSmoothLineFillFragmentShaderSource(),vsSource,\"<smoothline>\"],[tilemapFragmentSrc,tilemapVertexSrc,\"<tilemap>\"],[tileRandomizationFragmentSrc,tileRandomizationVertexSrc,\"<tilerandomization>\"]];const defaultShaders=await Promise.all(DEFAULT_SHADER_PROGRAMS.map(i=>this.CreateShaderProgram({src:i[0],vertexSrc:i[1],name:i[2]})));this._spTextureFill=defaultShaders[0];this._spDeviceTransformTextureFill=defaultShaders[1];this._spPoints=defaultShaders[2];\nthis._spColorFill=defaultShaders[3];this._spLinearGradientFill=defaultShaders[4];this._spPenumbraFill=defaultShaders[5];this._spHardEllipseFill=defaultShaders[6];this._spHardEllipseOutline=defaultShaders[7];this._spSmoothEllipseFill=defaultShaders[8];this._spSmoothEllipseOutline=defaultShaders[9];this._spSmoothLineFill=defaultShaders[10];this._spTilemapFill=defaultShaders[11];this._spTileRandomization=defaultShaders[12];this.SetTextureFillMode()}async CreateShaderProgram(shaderInfo){const ret=await C3.Gfx.WebGLShaderProgram.Create(this,\nshaderInfo);this._AddShaderProgram(ret);return ret}ResetLastProgram(){this._lastProgram=null}SetSize(w,h,force){if(this._width===w&&this._height===h&&!force)return;this.EndBatch();const gl=this._gl;const batchState=this._batchState;this._width=w;this._height=h;this._SetViewport(0,0,w,h);this.CalculatePerspectiveMatrix(this._bbProjectionMatrix,w/h);this.SetProjectionMatrix(this._bbProjectionMatrix);if(this._spDeviceTransformTextureFill){gl.useProgram(this._spDeviceTransformTextureFill.GetShaderProgram());\nthis._spDeviceTransformTextureFill._UpdateDeviceTransformUniforms(this._matP);this._lastProgram=this._spDeviceTransformTextureFill;this._batchState.currentShader=this._spDeviceTransformTextureFill}gl.bindTexture(gl.TEXTURE_2D,null);gl.activeTexture(gl.TEXTURE1);gl.bindTexture(gl.TEXTURE_2D,null);gl.activeTexture(gl.TEXTURE0);this._lastTexture0=null;this._lastTexture1=null;if(this._usesDepthBuffer&&this._isAutoSizeDepthBuffer)this._SetDepthBufferSize(this._width,this._height);if(this._currentRenderTarget)this._currentRenderTarget._Resize(this._width,\nthis._height);gl.bindFramebuffer(gl.FRAMEBUFFER,null);this._currentRenderTarget=null;batchState.currentFramebuffer=null;batchState.currentFramebufferNoDepth=null}_SetDepthBufferSize(width,height){const gl=this._gl;if(this._depthBuffer&&this._depthBufferWidth===width&&this._depthBufferHeight===height)return;if(this._canSampleDepth){if(this._depthBuffer)gl.deleteTexture(this._depthBuffer);this._depthBuffer=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,this._depthBuffer);gl.texParameteri(gl.TEXTURE_2D,\ngl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);if(this.GetWebGLVersionNumber()>=2)gl.texImage2D(gl.TEXTURE_2D,0,gl.DEPTH24_STENCIL8,width,height,0,gl.DEPTH_STENCIL,gl.UNSIGNED_INT_24_8,null);else if(this._depthTextureExt)gl.texImage2D(gl.TEXTURE_2D,0,gl.DEPTH_STENCIL,width,height,0,gl.DEPTH_STENCIL,this._depthTextureExt[\"UNSIGNED_INT_24_8_WEBGL\"],\nnull);else;gl.bindTexture(gl.TEXTURE_2D,null)}else{if(this._depthBuffer)gl.deleteRenderbuffer(this._depthBuffer);this._depthBuffer=gl.createRenderbuffer();gl.bindRenderbuffer(gl.RENDERBUFFER,this._depthBuffer);gl.renderbufferStorage(gl.RENDERBUFFER,this._version>=2?gl.DEPTH24_STENCIL8:gl.DEPTH_STENCIL,width,height);gl.bindRenderbuffer(gl.RENDERBUFFER,null)}this._depthBufferWidth=width;this._depthBufferHeight=height}SetFixedSizeDepthBuffer(width,height){if(!this._usesDepthBuffer)return;this._isAutoSizeDepthBuffer=\nfalse;this._SetDepthBufferSize(width,height)}SetAutoSizeDepthBuffer(){if(!this._usesDepthBuffer)return;this._isAutoSizeDepthBuffer=true;this._SetDepthBufferSize(this._width,this._height)}_SetViewport(x,y,w,h){const viewport=this._viewport;if(viewport[0]===x&&viewport[1]===y&&viewport[2]===w&&viewport[3]===h)return;const b=this.PushBatch();b.InitSetViewport(x,y,w,h);vec4.set(viewport,x,y,w,h);this._topOfBatch=0}SetFovY(f){super.SetFovY(f);this.CalculatePerspectiveMatrix(this._bbProjectionMatrix,this._width/\nthis._height)}SetNearZ(z){super.SetNearZ(z);this.CalculatePerspectiveMatrix(this._bbProjectionMatrix,this._width/this._height)}SetFarZ(z){super.SetFarZ(z);this.CalculatePerspectiveMatrix(this._bbProjectionMatrix,this._width/this._height)}SetProjectionMatrix(matP){if(mat4.exactEquals(this._matP,matP))return;const b=this.PushBatch();b.InitSetProjection(matP);mat4.copy(this._matP,matP);this._topOfBatch=0;this._didChangeTransform=true}SetDefaultRenderTargetProjectionState(){let projectionMatrix;let viewportWidth,\nviewportHeight;const currentRenderTarget=this._currentRenderTarget;if(currentRenderTarget===null){projectionMatrix=this._bbProjectionMatrix;viewportWidth=this.GetWidth();viewportHeight=this.GetHeight()}else{projectionMatrix=currentRenderTarget.GetProjectionMatrix();viewportWidth=currentRenderTarget.GetWidth();viewportHeight=currentRenderTarget.GetHeight()}this.SetProjectionMatrix(projectionMatrix);this._SetViewport(0,0,viewportWidth,viewportHeight)}SetModelViewMatrix(matMV){if(mat4.exactEquals(this._matMV,\nmatMV))return;const b=this.PushBatch();b.InitSetModelView(matMV);mat4.copy(this._matMV,matMV);this._topOfBatch=0;this._didChangeTransform=true}ResetDidChangeTransformFlag(){this._didChangeTransform=false}DidChangeTransform(){return this._didChangeTransform}GetBatchState(){return this._batchState}PushBatch(){const batch=this._batch;if(this._batchPtr===batch.length)batch.push(new C3.Gfx.WebGLBatchJob(this._batchState));return batch[this._batchPtr++]}EndBatch(){if(this._batchPtr===0)return;if(this.IsContextLost())return;\nthis._WriteBuffers();this._ExecuteBatch();this._batchPtr=0;this._vertexPtr=0;this._texPtr=0;this._pointPtr=0;this._topOfBatch=0}_WriteBuffers(){const gl=this._gl;if(this._pointPtr>0){gl.bindBuffer(gl.ARRAY_BUFFER,this._pointBuffer);gl.bufferSubData(gl.ARRAY_BUFFER,0,this._pointData.subarray(0,this._pointPtr))}if(this._vertexPtr>0){gl.bindBuffer(gl.ARRAY_BUFFER,this._vertexBuffer);gl.bufferSubData(gl.ARRAY_BUFFER,0,this._vertexData.subarray(0,this._vertexPtr));gl.bindBuffer(gl.ARRAY_BUFFER,this._texcoordBuffer);\ngl.bufferSubData(gl.ARRAY_BUFFER,0,this._texcoordData.subarray(0,this._texPtr))}}_ExecuteBatch(){const batch=this._batch;for(let i=0,len=this._batchPtr;i<len;++i)batch[i].Run()}GetOpacity(){return this._lastColor.getA()}SetColorRgba(r,g,b,a){const lastColor=this._lastColor;if(lastColor.equalsRgba(r,g,b,a))return;lastColor.setRgba(r,g,b,a);const batch=this.PushBatch();batch.InitSetColor(lastColor);this._topOfBatch=0;this._currentStateGroup=null}SetOpacity(a){const lastColor=this._lastColor;if(lastColor.getA()===\na)return;lastColor.setA(a);const batch=this.PushBatch();batch.InitSetColor(lastColor);this._topOfBatch=0;this._currentStateGroup=null}SetColor(c){const lastColor=this._lastColor;if(lastColor.equals(c))return;lastColor.set(c);const batch=this.PushBatch();batch.InitSetColor(lastColor);this._topOfBatch=0;this._currentStateGroup=null}ResetColor(){this.SetColorRgba(1,1,1,1)}GetColor(){return this._lastColor}SetTexture(rendererTex){if(rendererTex===this._lastTexture0)return;const b=this.PushBatch();b.InitSetTexture(rendererTex);\nthis._lastTexture0=rendererTex;this._topOfBatch=0}_ResetLastTexture(){this._lastTexture0=null}SetBlendMode(bm){const arr=this._GetBlendByIndex(bm);this._SetBlend(arr[0],arr[1])}SetNamedBlendMode(bm){const o=this.GetNamedBlend(bm);this._SetBlend(o.srcBlend,o.destBlend)}_SetBlend(s,d){if(s===this._lastSrcBlend&&d===this._lastDestBlend)return;const b=this.PushBatch();b.InitSetBlend(s,d);this._lastSrcBlend=s;this._lastDestBlend=d;this._topOfBatch=0;this._currentStateGroup=null}IsPremultipliedAlphaBlend(){return this._lastSrcBlend===\nthis._gl.ONE&&this._lastDestBlend===this._gl.ONE_MINUS_SRC_ALPHA}SetAlphaBlend(){this._SetBlend(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)}SetNoPremultiplyAlphaBlend(){this._SetBlend(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA)}SetCopyBlend(){this._SetBlend(this._gl.ONE,this._gl.ZERO)}Rect(r){this.Rect2(r.getLeft(),r.getTop(),r.getRight(),r.getBottom())}Rect2(left,top,right,bottom){this.Quad2(left,top,right,top,right,bottom,left,bottom)}_ExtendQuadBatch(){let v=this._vertexPtr;if(v>=this._lastVertexPtr){this.EndBatch();\nv=0}if(this._topOfBatch===1)this._batch[this._batchPtr-1]._indexCount+=6;else{const b=this.PushBatch();b.InitQuad(v,6);this._topOfBatch=1}}_WriteQuadToVertexBuffer(quad){quad.writeToTypedArray3D(this._vertexData,this._vertexPtr,this._baseZ+this._currentZ);this._vertexPtr+=12}Quad(quad){this._ExtendQuadBatch();this._WriteQuadToVertexBuffer(quad);defaultTexCoordsQuad.writeToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}Quad2(tlx,tly,trx,try_,brx,bry,blx,bly){this._ExtendQuadBatch();const vd=\nthis._vertexData;let v=this._vertexPtr;const z=this._baseZ+this._currentZ;vd[v++]=tlx;vd[v++]=tly;vd[v++]=z;vd[v++]=trx;vd[v++]=try_;vd[v++]=z;vd[v++]=brx;vd[v++]=bry;vd[v++]=z;vd[v++]=blx;vd[v++]=bly;vd[v++]=z;this._vertexPtr=v;defaultTexCoordsQuad.writeToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}Quad3(quad,rcTex){this._ExtendQuadBatch();this._WriteQuadToVertexBuffer(quad);rcTex.writeAsQuadToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}Quad4(quad,uv){this._ExtendQuadBatch();\nthis._WriteQuadToVertexBuffer(quad);uv.writeToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}Quad3D(tlx,tly,tlz,trx,try_,trz,brx,bry,brz,blx,bly,blz,rcTex){this._ExtendQuadBatch();const vd=this._vertexData;let v=this._vertexPtr;const z=this._baseZ+this._currentZ;vd[v++]=tlx;vd[v++]=tly;vd[v++]=z+tlz;vd[v++]=trx;vd[v++]=try_;vd[v++]=z+trz;vd[v++]=brx;vd[v++]=bry;vd[v++]=z+brz;vd[v++]=blx;vd[v++]=bly;vd[v++]=z+blz;this._vertexPtr=v;rcTex.writeAsQuadToTypedArray(this._texcoordData,this._texPtr);\nthis._texPtr+=8}Quad3D2(tlx,tly,tlz,trx,try_,trz,brx,bry,brz,blx,bly,blz,uv){this._ExtendQuadBatch();const vd=this._vertexData;let v=this._vertexPtr;const z=this._baseZ+this._currentZ;vd[v++]=tlx;vd[v++]=tly;vd[v++]=z+tlz;vd[v++]=trx;vd[v++]=try_;vd[v++]=z+trz;vd[v++]=brx;vd[v++]=bry;vd[v++]=z+brz;vd[v++]=blx;vd[v++]=bly;vd[v++]=z+blz;this._vertexPtr=v;uv.writeToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}FullscreenQuad(mode,curTex){this.SetCurrentZ(0);mat4.copy(tmpProjection,this._matP);\nmat4.copy(tmpModelView,this._matMV);this.SetDefaultRenderTargetProjectionState();const [width,height]=this.GetRenderTargetSize(this._currentRenderTarget);const tempMat4b=this.CalculateLookAtModelView2(0,0,this.GetDefaultCameraZ(height),0,0,0,height);this.SetModelViewMatrix(tempMat4b);if(mode===\"crop\"&&this._currentRenderTarget&&curTex){const left=this._width/2;const top=this._height/2;const srcW=curTex.GetWidth();const srcH=curTex.GetHeight();const destW=this._currentRenderTarget.GetWidth();const destH=\nthis._currentRenderTarget.GetHeight();const copyW=Math.min(destW,srcW);const copyH=Math.min(destH,srcH);const srcOffY=Math.max(srcH-destH,0);const destOffY=Math.max(destH-srcH,0);tmpRect.set(-left,top-destOffY,-left+copyW,top-copyH-destOffY);tmpQuad.setFromRect(tmpRect);tmpRect.set(0,srcOffY,copyW,copyH+srcOffY);tmpRect.divide(srcW,srcH);this.Quad3(tmpQuad,tmpRect)}else{const halfW=width/2;const halfH=height/2;this.Rect2(-halfW,halfH,halfW,-halfH)}this.SetProjectionMatrix(tmpProjection);this.SetModelViewMatrix(tmpModelView)}StartRenderingPoints(rect){if(this._lastPointTexCoords.equals(rect))return;\nthis._lastPointTexCoords.copy(rect);const b=this.PushBatch();b.InitSetPointTexCoords(rect);this._topOfBatch=0}FinishRenderingPoints(){}Point(x_,y_,size_,opacity_){if(this._pointPtr>=LAST_POINT)this.EndBatch();let p=this._pointPtr;const z=this._baseZ+this._currentZ;if(this._topOfBatch===2&&this._lastPointZ===z)this._batch[this._batchPtr-1]._indexCount++;else{const b=this.PushBatch();b.InitPoints(p,z);this._topOfBatch=2;this._lastPointZ=z}const pd=this._pointData;pd[p++]=x_;pd[p++]=y_;pd[p++]=size_;\npd[p++]=opacity_;this._pointPtr=p}SetProgram(program){if(this._lastProgram===program)return;const b=this.PushBatch();b.InitSetProgram(program);this._lastProgram=program;this._topOfBatch=0;this._currentStateGroup=null}SetDeviceTransformTextureFillMode(){this.SetProgram(this._spDeviceTransformTextureFill)}SetGradientColor(c){const b=this.PushBatch();b.InitSetGradientColor(c);this._topOfBatch=0}SetEllipseParams(pixelW,pixelH,outlineThickness=1){const b=this.PushBatch();b.InitSetEllipseParams(pixelW,\npixelH,outlineThickness);this._topOfBatch=0}SetTilemapInfo(srcRect,textureWidth,textureHeight,tileWidth,tileHeight,tileSpacingX,tileSpacingY){if(this._lastProgram!==this._spTilemapFill)throw new Error(\"must set tilemap fill mode first\");const b=this.PushBatch();b.InitSetTilemapInfo(srcRect,textureWidth,textureHeight,tileWidth,tileHeight,tileSpacingX,tileSpacingY);this._topOfBatch=0}SetTileRandomizationInfo(textureWidth,textureHeight,xRandom,yRandom,angleRandom,blendMarginX,blendMarginY){if(this._lastProgram!==\nthis._spTileRandomization)throw new Error(\"must set tile randomization mode first\");const b=this.PushBatch();b.InitSetTileRandomizationInfo(textureWidth,textureHeight,xRandom,yRandom,angleRandom,blendMarginX,blendMarginY);this._topOfBatch=0}SetProgramParameters(backTex,destRect,srcRect,srcOriginRect,layoutRect,pixelWidth,pixelHeight,dpr,layerScale,layerAngle,time){const s=this._lastProgram;time=time%10800;if(!s._hasAnyOptionalUniforms||s.AreOptionalUniformsAlreadySetInBatch(destRect,srcRect,srcOriginRect,\nlayoutRect,pixelWidth,pixelHeight,dpr,layerScale,layerAngle,time))return;const b=this.PushBatch();b.InitSetProgramParameters();s.SetOptionalUniformsInBatch(destRect,srcRect,srcOriginRect,layoutRect,pixelWidth,pixelHeight,dpr,layerScale,layerAngle,time);const mat4param=b._mat4param;mat4param[0]=pixelWidth;mat4param[1]=pixelHeight;destRect.writeToTypedArray(mat4param,2);mat4param[6]=layerScale;mat4param[7]=layerAngle;srcRect.writeToTypedArray(mat4param,12);const colorParam=b._colorParam;layoutRect.writeToTypedArray(colorParam,\n0);const tmp=colorParam[1];colorParam[1]=colorParam[3];colorParam[3]=tmp;srcOriginRect.writeToTypedArray(b._srcOriginRect,0);b._startIndex=time;b._indexCount=dpr;if(s._uSamplerBack.IsUsed())b._texParam=backTex?backTex.GetTexture():null;else b._texParam=null;this._topOfBatch=0}SetProgramCustomParameters(params){const s=this._lastProgram;if(params.length===0||s.AreCustomParametersAlreadySetInBatch(params))return;const b=this.PushBatch();b.InitSetProgramCustomParameters();s.SetCustomParametersInBatch(params);\nC3.shallowAssignArray(b._shaderParams,params);this._topOfBatch=0}ClearRgba(r,g,b_,a){const b=this.PushBatch();b.InitClearSurface2(r,g,b_,a);this._topOfBatch=0}Clear(c){const b=this.PushBatch();b.InitClearSurface(c);this._topOfBatch=0}Start(){}Finish(){super.Finish();this._gl.flush()}ClearDepth(){if(!this._usesDepthBuffer||!this._currentRenderTarget||!this._currentRenderTarget.HasDepthBuffer())return;const batch=this.PushBatch();batch.InitClearDepth(this._isDepthEnabled);this._topOfBatch=0}SetDepthEnabled(e){e=\n!!e;if(this._isDepthEnabled===e)return;if(!this._usesDepthBuffer)return;this._isDepthEnabled=e;const batch=this.PushBatch();batch.InitSetDepthEnabled(e);this._topOfBatch=0}IsDepthEnabled(){return this._isDepthEnabled}_GetDepthBuffer(){return this._depthBuffer}_CanSampleDepth(){return this._canSampleDepth}SetDepthSamplingEnabled(e){e=!!e;if(!this._canSampleDepth)return;if(this._isDepthSamplingEnabled===e)return;if(e&&this.IsDepthEnabled())throw new Error(\"depth still enabled\");this._isDepthSamplingEnabled=\ne;const batch=this.PushBatch();batch.InitSetDepthSamplingEnabled(e);this._topOfBatch=0}SetScissorRect(x,y,w,h,rtHeight_=0){x=Math.floor(x);y=Math.floor(y);w=Math.floor(w);h=Math.floor(h);if(this._lastScissorRect.equalsWH(x,y,w,h))return;this._lastScissorRect.setWH(x,y,w,h);const rtHeight=rtHeight_||this.GetRenderTargetSize(this.GetRenderTarget())[1];y=rtHeight-y-h;const batch=this.PushBatch();batch.InitSetScissor(true,x,y,w,h);this._topOfBatch=0}RemoveScissorRect(){if(this._lastScissorRect.getRight()===\n-1)return;this._lastScissorRect.set(0,0,-1,-1);const batch=this.PushBatch();batch.InitSetScissor(false,0,0,0,0);this._topOfBatch=0}CheckForQueryResults(){for(const qrb of this._allQueryResultBuffers)qrb.CheckForResults(this._frameNumber)}IsContextLost(){return!this._gl||this._gl.isContextLost()||this._isInitialisingAfterContextRestored}OnContextLost(){super.OnDeviceOrContextLost();C3.Gfx.WebGLRendererTexture.OnContextLost();C3.Gfx.WebGLRenderTarget.OnContextLost();C3.Gfx.RendererText.OnContextLost();\nfor(const qrb of this._allQueryResultBuffers)qrb.Clear();this._extensions=[];this._timerExt=null;this._parallelShaderCompileExt=null;this._anisotropicExt=null;this._depthTextureExt=null;this._fragDepthExt=null;this._stdDerivativesExt=null;this._textureLodExt=null;this._maxAnisotropy=0;this._unmaskedVendor=\"(unavailable)\";this._unmaskedRenderer=\"(unavailable)\";this._lastProgram=null;this._spDeviceTransformTextureFill=null;this._depthBuffer=null;for(const stateGroup of this._stateGroups.values())stateGroup.OnContextLost()}async OnContextRestored(){this._isInitialisingAfterContextRestored=\ntrue;await this.InitState();this._isInitialisingAfterContextRestored=false;for(const stateGroup of this._stateGroups.values())stateGroup.OnContextRestored(this);this.SetSize(this._width,this._height,true)}CreateStaticTexture(data,opts){if(this.IsContextLost())throw new Error(\"context lost\");this.EndBatch();const rendererTex=C3.New(C3.Gfx.WebGLRendererTexture,this);rendererTex._CreateStatic(data,opts);return rendererTex}async CreateStaticTextureAsync(data,opts){if(this.IsContextLost())throw new Error(\"context lost\");\nopts=Object.assign({},opts);if(C3.Supports.ImageBitmapOptions){let imageBitmap=await createImageBitmap(data,{\"premultiplyAlpha\":\"premultiply\"});const isTiled=opts.wrapX&&opts.wrapX!==\"clamp-to-edge\"||opts.wrapY&&opts.wrapY!==\"clamp-to-edge\";const isPOT=C3.isPOT(imageBitmap.width)&&C3.isPOT(imageBitmap.height);if(!this.SupportsNPOTTextures()&&!isPOT&&isTiled)if(C3.Supports.ImageBitmapOptionsResize){imageBitmap=await createImageBitmap(data,{\"premultiplyAlpha\":\"premultiply\",\"resizeWidth\":C3.nextHighestPowerOfTwo(imageBitmap.width),\n\"resizeHeight\":C3.nextHighestPowerOfTwo(imageBitmap.height)});opts.premultiplyAlpha=false}else imageBitmap=await createImageBitmap(data,{\"premultiplyAlpha\":\"none\"});else opts.premultiplyAlpha=false;return await C3.Asyncify(()=>this.CreateStaticTexture(imageBitmap,opts))}else{if(data instanceof Blob){if(typeof Image===\"undefined\")throw new Error(\"texture upload variant not supported in worker\");const img=await C3.BlobToImage(data);data=img}return await C3.Asyncify(()=>this.CreateStaticTexture(data,\nopts))}}CreateDynamicTexture(width,height,opts){this.EndBatch();const rendererTex=C3.New(C3.Gfx.WebGLRendererTexture,this);rendererTex._CreateDynamic(width,height,opts);return rendererTex}UpdateTexture(data,rendererTex,opts){this.EndBatch();rendererTex._Update(data,opts)}DeleteTexture(rendererTex){if(!rendererTex)return;rendererTex.SubtractReference();if(rendererTex.GetReferenceCount()>0)return;this.EndBatch();if(rendererTex===this._lastTexture0){this._gl.bindTexture(this._gl.TEXTURE_2D,null);this._lastTexture0=\nnull}if(rendererTex===this._lastTexture1){this._gl.activeTexture(this._gl.TEXTURE1);this._gl.bindTexture(this._gl.TEXTURE_2D,null);this._gl.activeTexture(this._gl.TEXTURE0);this._lastTexture1=null}rendererTex._Delete()}CreateRenderTarget(opts){let width=this._width;let height=this._height;let isDefaultSize=true;if(opts){if(typeof opts.width===\"number\"){width=Math.floor(opts.width);isDefaultSize=false}if(typeof opts.height===\"number\"){height=Math.floor(opts.height);isDefaultSize=false}}if(width<=0||\nheight<=0)throw new Error(\"invalid size\");this.EndBatch();const renderTarget=C3.New(C3.Gfx.WebGLRenderTarget,this);renderTarget._Create(width,height,Object.assign({isDefaultSize},opts));this._currentRenderTarget=null;this._batchState.currentFramebuffer=null;this._batchState.currentFramebufferNoDepth=null;return renderTarget}SetRenderTarget(renderTarget,updateProjection=true){if(renderTarget===this._currentRenderTarget)return;if(renderTarget&&renderTarget.IsDefaultSize())renderTarget._Resize(this._width,\nthis._height);const b=this.PushBatch();b.InitSetRenderTarget(renderTarget);this._currentRenderTarget=renderTarget;this._topOfBatch=0;if(updateProjection)this.SetDefaultRenderTargetProjectionState()}GetRenderTarget(){return this._currentRenderTarget}GetRenderTargetSize(renderTarget){if(renderTarget)return[renderTarget.GetWidth(),renderTarget.GetHeight()];else return[this._width,this._height]}CopyRenderTarget(renderTarget,mode=\"stretch\"){if(this._version<2||this._currentRenderTarget&&this._currentRenderTarget.GetMultisampling()>\n0){this.SetCopyBlend();this.ResetColor();this.DrawRenderTarget(renderTarget,mode)}else{const b=this.PushBatch();b.InitBlitFramebuffer(renderTarget,this._currentRenderTarget,mode);this._topOfBatch=0}}DrawRenderTarget(renderTarget,mode=\"stretch\"){const tex=renderTarget.GetTexture();if(!tex)throw new Error(\"not a texture-backed render target\");this.SetTexture(tex);this.FullscreenQuad(mode,tex)}InvalidateRenderTarget(renderTarget){if(this._version<2)return;const b=this.PushBatch();b.InitInvalidateFramebuffer(renderTarget._GetFramebuffer());\nthis._topOfBatch=0}DeleteRenderTarget(renderTarget){this.SetRenderTarget(null);this.EndBatch();const renderTex=renderTarget.GetTexture();if(renderTex===this._lastTexture0){this._gl.bindTexture(this._gl.TEXTURE_2D,null);this._lastTexture0=null}if(renderTex===this._lastTexture1){this._gl.activeTexture(this._gl.TEXTURE1);this._gl.bindTexture(this._gl.TEXTURE_2D,null);this._gl.activeTexture(this._gl.TEXTURE0);this._lastTexture1=null}renderTarget._Delete()}async ReadBackRenderTargetToImageData(renderTarget,\nforceSynchronous,areaRect){this.EndBatch();const oldRenderTarget=this._currentRenderTarget;let width,height,framebuffer;if(renderTarget){width=renderTarget.GetWidth();height=renderTarget.GetHeight();framebuffer=renderTarget._GetFramebuffer()}else{width=this.GetWidth();height=this.GetHeight();framebuffer=null}let x=0;let y=0;let areaWidth=width;let areaHeight=height;if(areaRect){x=C3.clamp(Math.floor(areaRect.getLeft()),0,width-1);y=C3.clamp(Math.floor(areaRect.getTop()),0,height-1);let w=areaRect.width();\nif(w===0)w=width-x;else w=C3.clamp(Math.floor(w),0,width-x);let h=areaRect.height();if(h===0)h=height-y;else h=C3.clamp(Math.floor(h),0,height-y);areaWidth=w;areaHeight=h;y=height-(y+areaHeight)}const gl=this._gl;gl.bindFramebuffer(gl.FRAMEBUFFER,framebuffer);const restorePreviousRenderTarget=()=>{gl.bindFramebuffer(gl.FRAMEBUFFER,null);this._currentRenderTarget=null;this._batchState.currentFramebuffer=null;this._batchState.currentFramebufferNoDepth=null;this.SetRenderTarget(oldRenderTarget)};let imageData;\nif(!forceSynchronous&&this.GetWebGLVersionNumber()>=2){gl.bindFramebuffer(gl.READ_FRAMEBUFFER,framebuffer);const pixelBuffer=gl.createBuffer();const bufferSize=areaWidth*areaHeight*4;const PIXEL_PACK_BUFFER=gl[\"PIXEL_PACK_BUFFER\"];gl.bindBuffer(PIXEL_PACK_BUFFER,pixelBuffer);gl.bufferData(PIXEL_PACK_BUFFER,bufferSize,gl[\"STREAM_READ\"]);gl.readPixels(x,y,areaWidth,areaHeight,gl.RGBA,gl.UNSIGNED_BYTE,0);gl.bindFramebuffer(gl.READ_FRAMEBUFFER,null);gl.bindBuffer(PIXEL_PACK_BUFFER,null);restorePreviousRenderTarget();\nconst sync=gl[\"fenceSync\"](gl[\"SYNC_GPU_COMMANDS_COMPLETE\"],0);await this._WaitForObjectReady(()=>gl[\"getSyncParameter\"](sync,gl[\"SYNC_STATUS\"])===gl[\"SIGNALED\"]);gl[\"deleteSync\"](sync);imageData=new ImageData(areaWidth,areaHeight);gl.bindBuffer(PIXEL_PACK_BUFFER,pixelBuffer);gl[\"getBufferSubData\"](PIXEL_PACK_BUFFER,0,new Uint8Array(imageData.data.buffer),0,bufferSize);gl.bindBuffer(PIXEL_PACK_BUFFER,null);gl.deleteBuffer(pixelBuffer)}else{imageData=new ImageData(areaWidth,areaHeight);gl.readPixels(x,\ny,areaWidth,areaHeight,gl.RGBA,gl.UNSIGNED_BYTE,new Uint8Array(imageData.data.buffer));restorePreviousRenderTarget()}return imageData}CoplanarStartStencilPass(){this.SetDepthEnabled(true);const batch=this.PushBatch();batch.InitCoplanarStartStencilPass();this._topOfBatch=0;this._coplanarMode=1}CoplanarStartColorPass(){this.SetDepthEnabled(false);const batch=this.PushBatch();batch.InitCoplanarStartColorPass();this._topOfBatch=0;this._coplanarMode=2}IsCoplanarColorPass(){return this._coplanarMode===\n2}CoplanarRestoreStandardRendering(){this.SetDepthEnabled(true);const batch=this.PushBatch();batch.InitCoplanarRestore();this._topOfBatch=0;this._coplanarMode=0}StartQuery(query){if(!this.SupportsGPUProfiling())return;const b=this.PushBatch();b.InitStartQuery(query);this._topOfBatch=0}EndQuery(query){if(!this.SupportsGPUProfiling())return;const b=this.PushBatch();b.InitEndQuery(query);this._topOfBatch=0}_WaitForObjectReady(checkFunc){const ret=new Promise(resolve=>pendingPolls.add({resolve,checkFunc}));\nif(pollRafId===-1)pollRafId=self.requestAnimationFrame(CheckPendingPolls);return ret}IsDesynchronized(){return!!this._attribs[\"desynchronized\"]}GetEstimatedBackBufferMemoryUsage(){return this._width*this._height*(this._attribs[\"alpha\"]?4:3)}GetEstimatedRenderBufferMemoryUsage(){let ret=0;for(const t of C3.Gfx.WebGLRenderTarget.allRenderTargets()){if(t.GetTexture())continue;ret+=t.GetEstimatedMemoryUsage()}return ret}GetEstimatedTextureMemoryUsage(){let ret=0;for(const t of C3.Gfx.WebGLRendererTexture.allTextures())ret+=\nt.GetEstimatedMemoryUsage();return ret}GetWebGLVersionString(){return this._versionString}GetWebGLVersionNumber(){return this._version}GetDisplayName(){return\"webgl\"+this.GetWebGLVersionNumber()}SupportsNPOTTextures(){return this.GetWebGLVersionNumber()>=2}GetMaxTextureSize(){return this._maxTextureSize}GetMinPointSize(){return this._minPointSize}GetMaxPointSize(){return this._maxPointSize}SupportsHighP(){return this._highpPrecision!==0}GetHighPPrecision(){return this._highpPrecision}GetUnmaskedVendor(){return this._unmaskedVendor}GetUnmaskedRenderer(){return this._unmaskedRenderer}GetWebGLExtensionsAnalyticsString(){if(this.GetWebGLVersionNumber()>=\n2)return\"webgl2\";else{const exts=[];if(this._fragDepthExt)exts.push(\"EXT_frag_depth\");if(this._stdDerivativesExt)exts.push(\"OES_standard_derivatives\");if(this._textureLodExt)exts.push(\"EXT_shader_texture_lod\");if(exts.length>0)return\"webgl1:\"+exts.join(\",\");else return\"webgl1:none\"}}GetExtensions(){return this._extensions}SupportsGPUProfiling(){return!!this._timerExt}_GetDisjointTimerQueryExtension(){return this._timerExt}_GetParallelShaderCompileExtension(){return this._parallelShaderCompileExt}_GetAnisotropicExtension(){return this._anisotropicExt}_GetMaxAnisotropy(){return this._maxAnisotropy}_AddQueryResultBuffer(qrb){this._allQueryResultBuffers.add(qrb)}_RemoveQueryResultBuffer(qrb){this._allQueryResultBuffers.delete(qrb)}_GetTimeQueryStack(){return this._timeQueryStack}GetContext(){return this._gl}_InitBlendModes(gl){this._InitBlendModeData([[\"normal\",\ngl.ONE,gl.ONE_MINUS_SRC_ALPHA],[\"additive\",gl.ONE,gl.ONE],[\"xor\",gl.ONE,gl.ONE_MINUS_SRC_ALPHA],[\"copy\",gl.ONE,gl.ZERO],[\"destination-over\",gl.ONE_MINUS_DST_ALPHA,gl.ONE],[\"source-in\",gl.DST_ALPHA,gl.ZERO],[\"destination-in\",gl.ZERO,gl.SRC_ALPHA],[\"source-out\",gl.ONE_MINUS_DST_ALPHA,gl.ZERO],[\"destination-out\",gl.ZERO,gl.ONE_MINUS_SRC_ALPHA],[\"source-atop\",gl.DST_ALPHA,gl.ONE_MINUS_SRC_ALPHA],[\"destination-atop\",gl.ONE_MINUS_DST_ALPHA,gl.SRC_ALPHA]])}CreateRendererText(){return C3.New(C3.Gfx.RendererText,\nthis)}CreateWebGLText(){return this.CreateRendererText()}};\n\n}\n\n// ../lib/gfx/effectCompositor/effectChainManager.js\n{\n'use strict';const C3=self.C3;const DEFAULT_CTOR_OPTS={getDrawSize:null,getRenderTarget:null,releaseRenderTarget:null,getTime:null,redraw:null};\nC3.Gfx.EffectChainManager=class EffectChainManager{constructor(opts){opts=Object.assign({},DEFAULT_CTOR_OPTS,opts);this._cbGetDrawSize=opts.getDrawSize;this._cbGetRenderTarget=opts.getRenderTarget;this._cbReleaseRenderTarget=opts.releaseRenderTarget;this._cbGetTime=opts.getTime;this._cbRedraw=opts.redraw;this._webgpuBackTexture=null;this._allEffectChains=new Set}_AddEffectChain(ec){this._allEffectChains.add(ec)}_RemoveEffectChain(ec){this._allEffectChains.delete(ec)}OnContextLost(){this._webgpuBackTexture=\nnull;for(const ec of this._allEffectChains)ec.OnContextLost()}GetDrawSize(renderer){if(this._cbGetDrawSize)return this._cbGetDrawSize(renderer);else return[renderer.GetWidth(),renderer.GetHeight()]}GetRenderTarget(effectChain){return this._cbGetRenderTarget(effectChain)}ReleaseRenderTarget(rt,effectChain){this._cbReleaseRenderTarget(rt,effectChain)}GetTime(){return this._cbGetTime()}Redraw(effectChain){this._cbRedraw(effectChain)}_GetWebGPUBackTexture(renderer,width,height){if(this._webgpuBackTexture&&\n(this._webgpuBackTexture.GetWidth()!==width||this._webgpuBackTexture.GetHeight()!==height)){renderer.DeleteTexture(this._webgpuBackTexture);this._webgpuBackTexture=null}if(this._webgpuBackTexture===null)this._webgpuBackTexture=renderer.CreateStaticTexture(null,{width,height,sampling:\"nearest\",mipMap:false});return this._webgpuBackTexture}};\n\n}\n\n// ../lib/gfx/effectCompositor/effectChain.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;const glMatrix=self.glMatrix;const mat4=glMatrix.mat4;const tempRect=C3.New(C3.Rect);const tempRect2=C3.New(C3.Rect);const tempRect3=C3.New(C3.Rect);const tempRect4=C3.New(C3.Rect);const tempMat4a=mat4.create();const tempMat4b=mat4.create();const DEFAULT_CTOR_OPTS={drawContent:null,getSourceTextureInfo:null,getShaderParameters:null,invalidateRenderTargets:false};\nconst DEFAULT_BUILDSTEPS_OPTS={indexMap:null,forcePreDraw:false,forcePostDraw:false,is3D:false,isSourceTextureRotated:false,isRotatedOrNegativeSizeInstance:false,useFullSurface:false};\nC3.Gfx.EffectChain=class EffectChain{constructor(manager,opts){opts=Object.assign({},DEFAULT_CTOR_OPTS,opts);this._manager=manager;this._cbDrawContent=opts.drawContent;this._cbGetSourceTextureInfo=opts.getSourceTextureInfo;this._cbGetShaderParameters=opts.getShaderParameters;this._cbDrawContentHook=null;this._shaderProgramList=[];this._shaderProgramIndices=[];this._steps=[];this._needsRebuild=false;this._blendMode=0;this._isAnyShaderAnimated=false;this._isAnyShaderDepthSampling=false;this._isAnyShaderBackgroundBlending=\nfalse;this._isAnyShaderCrossSampling=false;this._isAnyIsSrcTexRotated=false;this._useCopyTextureBackgroundSampling=false;this._didChangeTransform=false;this._depthEnabledAtStart=false;this._coplanarColorPassAtStart=false;this._canUseFastPath=false;this._useFullSurface=false;this._isSourceTextureRotated=false;this._numTempSurfacesRequired=0;this._renderTargets=[null,null,null];this._invalidateRenderTargets=!!opts.invalidateRenderTargets;this._boxExtendHorizontal=0;this._boxExtendVertical=0;this._drawWidth=\n0;this._drawHeight=0;this._contentObject=null;this._contextObject=null;this._layoutRect=C3.New(C3.Rect);this._drawSurfaceRect=C3.New(C3.Rect);this._rcTexOriginal=C3.New(C3.Rect);this._rcTexBounce=C3.New(C3.Rect);this._rcTexDest=C3.New(C3.Rect);this._devicePixelRatio=1;this._layerScale=1;this._layerAngle=0;this._time=0;this._destRenderTarget=null;this._backTex=null;this._compositOffX=0;this._compositOffY=0;this._updateOwnProjection=false;this._projectionMatrix=mat4.create();this._modelViewMatrix=mat4.create();\nthis._manager._AddEffectChain(this)}Release(){this._manager._RemoveEffectChain(this);C3.clearArray(this._steps);C3.clearArray(this._shaderProgramList);C3.clearArray(this._shaderProgramIndices);this._contentObject=null;this._contextObject=null;this._cbDrawContent=null;this._cbGetSourceTextureInfo=null;this._cbGetShaderParameters=null}OnContextLost(){this._needsRebuild=true;C3.clearArray(this._steps);C3.clearArray(this._shaderProgramList);C3.clearArray(this._shaderProgramIndices)}NeedsRebuild(){return this._needsRebuild}BuildSteps(shaderProgramList,\nopts){opts=Object.assign({},DEFAULT_BUILDSTEPS_OPTS,opts);C3.clearArray(this._steps);this._boxExtendHorizontal=0;this._boxExtendVertical=0;this._isAnyShaderAnimated=false;this._isAnyShaderDepthSampling=false;this._isAnyShaderBackgroundBlending=false;this._isAnyShaderCrossSampling=false;this._isAnyIsSrcTexRotated=false;this._useCopyTextureBackgroundSampling=false;this._numTempSurfacesRequired=0;this._isSourceTextureRotated=!!opts.isSourceTextureRotated;this._useFullSurface=!!opts.useFullSurface;this._needsRebuild=\nfalse;C3.shallowAssignArray(this._shaderProgramList,shaderProgramList);if(shaderProgramList.length===0)return;if(opts.indexMap){if(opts.indexMap.length!==shaderProgramList.length)throw new Error(\"incorrect indexMap length\");C3.shallowAssignArray(this._shaderProgramIndices,opts.indexMap)}else{C3.clearArray(this._shaderProgramIndices);for(let i=0,len=shaderProgramList.length;i<len;++i)this._shaderProgramIndices.push(i)}for(const s of shaderProgramList){this._boxExtendHorizontal+=s.GetBoxExtendHorizontal();\nthis._boxExtendVertical+=s.GetBoxExtendVertical();if(s.IsAnimated())this._isAnyShaderAnimated=true;if(s.UsesDepth())this._isAnyShaderDepthSampling=true;if(s.BlendsBackground())this._isAnyShaderBackgroundBlending=true;if(s.UsesCrossSampling())this._isAnyShaderCrossSampling=true;if(s.UsesIsSrcTexRotated())this._isAnyIsSrcTexRotated=true}this._useCopyTextureBackgroundSampling=this._ShouldUseCopyTextureBackgroundSampling(shaderProgramList[0].GetRenderer());const doPreDraw=this._ShouldPreDraw(shaderProgramList[0],\nopts);const doPostDraw=this._ShouldPostDraw(shaderProgramList.at(-1),opts);if(shaderProgramList.length===1&&!doPreDraw&&!doPostDraw){this._canUseFastPath=true;return}this._canUseFastPath=false;let lastTargetId=0;if(doPreDraw){this._numTempSurfacesRequired=1;this._steps.push(C3.New(C3.Gfx.EffectChain.Step.PreDraw,this,-1,1));lastTargetId=1}for(let i=0,len=shaderProgramList.length;i<len;++i)if(i===0&&!doPreDraw){this._numTempSurfacesRequired=1;this._steps.push(C3.New(C3.Gfx.EffectChain.Step.FirstBounce,\nthis,-1,1,i));lastTargetId=1}else{let nextTargetId=lastTargetId===1?2:1;if(i===len-1&&!doPostDraw)nextTargetId=0;this._numTempSurfacesRequired=Math.max(this._numTempSurfacesRequired,nextTargetId);this._steps.push(C3.New(C3.Gfx.EffectChain.Step.Bounce,this,lastTargetId,nextTargetId,i));lastTargetId=nextTargetId}if(doPostDraw)this._steps.push(C3.New(C3.Gfx.EffectChain.Step.PostDraw,this,lastTargetId,0))}_ShouldPreDraw(firstShaderProgram,opts){if(opts.forcePreDraw||firstShaderProgram.MustPreDraw()||\nopts.is3D||firstShaderProgram.UsesDepth()&&!this._useFullSurface||(this._boxExtendHorizontal!==0||this._boxExtendVertical!==0))return true;if(firstShaderProgram.GetRenderer().IsWebGL())return firstShaderProgram.BlendsBackground()&&(opts.isRotatedOrNegativeSizeInstance||opts.isSourceTextureRotated)||firstShaderProgram.UsesAnySrcRectOrPixelSize()&&opts.isSourceTextureRotated;else return false}_ShouldPostDraw(lastShaderProgram,opts){if(opts.forcePostDraw)return true;if(lastShaderProgram.GetRenderer().IsWebGL())return lastShaderProgram.BlendsBackground()||\nlastShaderProgram.UsesCrossSampling();else return(lastShaderProgram.BlendsBackground()||lastShaderProgram.UsesCrossSampling())&&this._UseRenderTargetBackgroundSampling()}_ShouldUseCopyTextureBackgroundSampling(renderer){return renderer.IsWebGPU()&&this._isAnyShaderBackgroundBlending&&!this._isAnyShaderCrossSampling}Render(renderer,destRenderTarget,opts){if(renderer.IsWebGPU()&&destRenderTarget===null)destRenderTarget=renderer.GetBackbufferRenderTarget();this._destRenderTarget=destRenderTarget;this._contentObject=\nopts.contentObject||null;this._contextObject=opts.contextObject||null;this._blendMode=opts.blendMode||0;this._devicePixelRatio=opts.devicePixelRatio||1;this._layerScale=opts.layerScale||1;this._layerAngle=opts.layerAngle||0;this._time=typeof opts.time===\"number\"?opts.time:this._manager.GetTime();this._didChangeTransform=false;renderer.ResetDidChangeTransformFlag();if(this._isAnyShaderAnimated)this._Redraw();let didCalcDrawSizeAndRects=false;if(this._UseCopyTextureBackgroundSampling()){this._CalculateDrawSizeAndRectangles(renderer,\nopts);didCalcDrawSizeAndRects=true;this._backTex=this._manager._GetWebGPUBackTexture(renderer,this._drawWidth,this._drawHeight);tempRect.copy(this._drawSurfaceRect);tempRect.roundOuter();if(renderer.IsWebGPU())renderer._MaybeDoPendingClearRenderPass(this._destRenderTarget);renderer.CopyTextureToTexture(this._destRenderTarget.GetTexture(),this._backTex,tempRect.getLeft(),tempRect.getTop(),tempRect.width(),tempRect.height())}if(this._canUseFastPath){this._Render_FastPath(renderer,opts);return}if(!didCalcDrawSizeAndRects)this._CalculateDrawSizeAndRectangles(renderer,\nopts);renderer.SetAlphaBlend();renderer.ResetColor();renderer.SetBaseZ(0);renderer.SetCurrentZ(0);this._cbDrawContentHook=opts.drawContentHook||null;this._compositOffX=opts.compositOffX||0;this._compositOffY=opts.compositOffY||0;this._updateOwnProjection=!!opts.updateOwnProjection;this._OnBeforeStartEffectChain(renderer);this._renderTargets[0]=destRenderTarget;this._renderTargets[1]=this._numTempSurfacesRequired>=1?this._GetRenderTarget():null;this._renderTargets[2]=this._numTempSurfacesRequired===\n2?this._GetRenderTarget():null;for(const step of this._steps){const srcTarget=this._GetRenderTargetForId(step.GetSrcTargetId());const destTarget=this._GetRenderTargetForId(step.GetDestTargetId());if(renderer.IsWebGPU())step.Run_WebGPU(renderer,srcTarget,destTarget);else step.Run_WebGL(renderer,srcTarget,destTarget)}if(this._renderTargets[1])this._ReleaseRenderTarget(this._renderTargets[1]);if(this._renderTargets[2])this._ReleaseRenderTarget(this._renderTargets[2]);this._renderTargets.fill(null);this._OnAfterEndEffectChain(renderer);\nthis._destRenderTarget=null;this._backTex=null;this._contentObject=null;this._contextObject=null;this._cbDrawContentHook=null}_CalculateDrawSizeAndRectangles(renderer,opts){const [drawWidth,drawHeight]=this._manager.GetDrawSize(renderer);this._SetDrawSize(renderer,drawWidth,drawHeight);this._CalculateRectangles(opts)}_SetDrawSize(renderer,drawWidth,drawHeight){if(drawWidth<=0||drawHeight<=0)throw new Error(\"invalid draw size\");if(this._drawWidth!==drawWidth||this._drawHeight!==drawHeight)this._CalculateDeviceTransformMatrices(renderer,\ndrawWidth,drawHeight,0,0,this._projectionMatrix,this._modelViewMatrix);this._drawWidth=drawWidth;this._drawHeight=drawHeight}_CalculateDeviceTransformMatrices(renderer,width,height,offX,offY,projMat,mvMat){const scrollX=width/2+offX;const scrollY=height/2+offY;renderer.CalculatePerspectiveMatrix(projMat,width/height);const tempMat4=renderer.CalculateLookAtModelView2(scrollX,scrollY,renderer.GetDefaultCameraZ(height),scrollX,scrollY,0,height);mat4.copy(mvMat,tempMat4)}_CalculateRectangles(opts){this._layoutRect.copy(opts.layoutRect);\nif(opts.drawSurfaceRect)this._drawSurfaceRect.copy(opts.drawSurfaceRect);else this._drawSurfaceRect.set(0,0,this._drawWidth,this._drawHeight);this._rcTexOriginal.copy(this._drawSurfaceRect);this._rcTexOriginal.divide(this._drawWidth,this._drawHeight);const boxScale=this._layerScale*this._devicePixelRatio;this._drawSurfaceRect.inflate(this._boxExtendHorizontal*boxScale,this._boxExtendVertical*boxScale);this._rcTexDest.copy(this._drawSurfaceRect);this._rcTexDest.divide(this._drawWidth,this._drawHeight);\nthis._drawSurfaceRect.clampBoth(0,0,this._drawWidth,this._drawHeight);this._rcTexBounce.copy(this._drawSurfaceRect);this._rcTexBounce.divide(this._drawWidth,this._drawHeight)}_OnBeforeStartEffectChain(renderer){this._depthEnabledAtStart=renderer.IsDepthEnabled();this._coplanarColorPassAtStart=renderer.IsCoplanarColorPass();if(this._useFullSurface){renderer.SetDepthEnabled(false);if(this._isAnyShaderDepthSampling)renderer.SetDepthSamplingEnabled(true)}else{tempRect.copy(this._drawSurfaceRect);if(renderer.IsWebGL()){const boxScale=\nthis._layerScale*this._devicePixelRatio;tempRect.inflate(Math.max(this._boxExtendHorizontal,1)*boxScale,Math.max(this._boxExtendVertical,1)*boxScale);tempRect.roundOuter();tempRect.clamp(0,0,this._drawWidth,this._drawHeight)}else tempRect.roundOuter();renderer.SetScissorRect(tempRect.getLeft(),tempRect.getTop(),tempRect.width(),tempRect.height(),this._drawHeight)}}_OnAfterEffectChainDrawContent(renderer){renderer.ResetColor();if(!this._useFullSurface){if(this._coplanarColorPassAtStart)renderer.CoplanarRestoreStandardRendering();\nrenderer.SetDepthEnabled(false);if(this._isAnyShaderDepthSampling)renderer.SetDepthSamplingEnabled(true)}if(renderer.IsWebGPU())renderer.SetNormalizedCoordsProgramVariant(true)}_OnAfterEndEffectChain(renderer){renderer.SetDepthSamplingEnabled(false);if(this._coplanarColorPassAtStart)renderer.CoplanarStartColorPass();renderer.SetDepthEnabled(this._depthEnabledAtStart);if(!this._useFullSurface)renderer.RemoveScissorRect();if(renderer.IsWebGPU())renderer.SetNormalizedCoordsProgramVariant(false);this._didChangeTransform=\nrenderer.DidChangeTransform()}_ClampRcTexDest(){this._rcTexDest.clamp(0,0,1,1)}_GetRenderTargetForId(id){return id<0?null:this._renderTargets[id]}_GetRenderTarget(){return this._manager.GetRenderTarget(this)}_GetDestRenderTarget(){return this._destRenderTarget}_ReleaseRenderTarget(rt){this._manager.ReleaseRenderTarget(rt,this)}_GetShaderProgramAt(i){return this._shaderProgramList[i]}_DrawContent(renderer){if(this._cbDrawContentHook)this._cbDrawContentHook(this,renderer,()=>this._cbDrawContent(renderer,\nthis));else this._cbDrawContent(renderer,this);if(!this._canUseFastPath)this._OnAfterEffectChainDrawContent(renderer)}_IsRenderTargetSameSizeAndOffset(renderer){if(this._useFullSurface)return true;if(this._compositOffX!==0||this._compositOffY!==0)return false;const [rtWidth,rtHeight]=renderer.GetRenderTargetSize(renderer.GetRenderTarget());if(rtWidth!==this._drawWidth||rtHeight!==this._drawHeight)return false;return true}_SetDeviceTransform(renderer,isLast){let projMat=this._projectionMatrix;let mvMat=\nthis._modelViewMatrix;if(isLast&&!this._IsRenderTargetSameSizeAndOffset(renderer)){projMat=tempMat4a;mvMat=tempMat4b;const [rtWidth,rtHeight]=renderer.GetRenderTargetSize(renderer.GetRenderTarget());this._CalculateDeviceTransformMatrices(renderer,rtWidth,rtHeight,this._compositOffX,this._compositOffY,projMat,mvMat);if(!this._useFullSurface)renderer.RemoveScissorRect()}renderer.SetProjectionMatrix(projMat);renderer.SetModelViewMatrix(mvMat)}_Redraw(){this._manager.Redraw(this)}_GetShaderParameters(index,\nrenderer){return this._cbGetShaderParameters(this._shaderProgramIndices[index],renderer)}_SetProgramParameters(renderer,index){let rcTexDest=this._rcTexDest;let srcRect=this._rcTexBounce;let srcOriginRect=this._rcTexOriginal;if(renderer.IsWebGL()){tempRect2.copy(rcTexDest);tempRect2.flipAround(1);rcTexDest=tempRect2;tempRect3.copy(srcRect);tempRect3.flipAround(1);srcRect=tempRect3;tempRect4.copy(srcOriginRect);tempRect4.flipAround(1);srcOriginRect=tempRect4}this._DoSetProgramParameters(renderer,index,\nsrcRect,srcOriginRect,rcTexDest,1/this._drawWidth,1/this._drawHeight)}_SetFirstBounceProgramParameters(renderer,index){let srcRect=this._rcTexBounce;let srcOriginRect=this._rcTexOriginal;let pixelWidth=1/this._drawWidth;let pixelHeight=1/this._drawHeight;if(this._cbGetSourceTextureInfo){let {srcTexRect,srcWidth,srcHeight}=this._cbGetSourceTextureInfo(this._contentObject);if(!srcTexRect){tempRect.set(0,0,0,0);srcTexRect=tempRect}if(!srcWidth)srcWidth=this._drawWidth;if(!srcHeight)srcHeight=this._drawHeight;\nsrcRect=srcTexRect;srcOriginRect=srcTexRect;pixelWidth=1/srcWidth;pixelHeight=1/srcHeight}else if(renderer.IsWebGL()){tempRect3.copy(srcRect);tempRect3.flipAround(1);srcRect=tempRect3;tempRect4.copy(srcOriginRect);tempRect4.flipAround(1);srcOriginRect=tempRect4}let rcTexDest=this._rcTexDest;if(renderer.IsWebGL()){rcTexDest=tempRect2;rcTexDest.copy(this._rcTexDest);rcTexDest.flipAround(1)}this._DoSetProgramParameters(renderer,index,srcRect,srcOriginRect,rcTexDest,pixelWidth,pixelHeight);if(renderer.IsWebGPU()&&\nthis._isAnyIsSrcTexRotated)renderer.SetProgramParameter_IsSrcTexRotated(this._isSourceTextureRotated)}_GetBackTex(renderer){if(this._isAnyShaderBackgroundBlending)if(renderer.IsWebGPU())if(this._UseCopyTextureBackgroundSampling())return this._backTex;else return this._destRenderTarget.GetTexture();else return this._destRenderTarget;else return null}_DoSetProgramParameters(renderer,index,srcRect,srcOriginRect,rcTexDest,pixelWidth,pixelHeight){renderer.SetProgramParameters(this._GetBackTex(renderer),\nrcTexDest,srcRect,srcOriginRect,this._layoutRect,pixelWidth,pixelHeight,this._devicePixelRatio,this._layerScale,this._layerAngle,this._time);renderer.SetProgramCustomParameters(this._GetShaderParameters(index,renderer))}_Render_FastPath(renderer,opts){const shaderProgram=this._shaderProgramList[0];const wasDepthEnabled=renderer.IsDepthEnabled();const usesDepth=shaderProgram.UsesDepth();if(usesDepth){renderer.SetDepthEnabled(false);renderer.SetDepthSamplingEnabled(true);this._rcTexDest.set(0,0,1,1);\nthis._rcTexOriginal.set(0,0,1,1)}renderer.SetProgram(shaderProgram);renderer.SetBlendMode(this._blendMode);renderer.SetRenderTarget(this._destRenderTarget);let pixelWidth=0;let pixelHeight=1;this._rcTexOriginal.set(0,0,1,1);if(shaderProgram.UsesAnySrcRectOrPixelSize()&&this._cbGetSourceTextureInfo){const {srcTexRect,srcWidth,srcHeight}=this._cbGetSourceTextureInfo(this._contentObject);if(srcTexRect)this._rcTexOriginal.copy(srcTexRect);pixelWidth=Number.isFinite(srcWidth)?1/srcWidth:0;pixelHeight=\nNumber.isFinite(srcHeight)?1/srcHeight:0}else{const [drawWidth,drawHeight]=this._manager.GetDrawSize(renderer);pixelWidth=1/drawWidth;pixelHeight=1/drawHeight}if(opts.layoutRect)this._layoutRect.copy(opts.layoutRect);else this._layoutRect.set(0,0,0,0);renderer.SetProgramParameters(this._GetBackTex(renderer),this._rcTexDest,this._rcTexOriginal,this._rcTexOriginal,this._layoutRect,pixelWidth,pixelHeight,this._devicePixelRatio,this._layerScale,this._layerAngle,this._time);renderer.SetProgramCustomParameters(this._GetShaderParameters(0,\nrenderer));if(renderer.IsWebGPU()&&this._isAnyIsSrcTexRotated)renderer.SetProgramParameter_IsSrcTexRotated(this._isSourceTextureRotated);renderer.SetBaseZ(0);this._DrawContent(renderer);if(usesDepth){renderer.SetDepthSamplingEnabled(false);renderer.SetDepthEnabled(wasDepthEnabled)}}_UseCopyTextureBackgroundSampling(){return this._useCopyTextureBackgroundSampling}_UseRenderTargetBackgroundSampling(){return!this._useCopyTextureBackgroundSampling}IsAnyShaderBackgroundBlending(){return this._isAnyShaderBackgroundBlending}CanSkipCalculatingDrawSurfaceRect(){if(!this._canUseFastPath)return false;\nif(this._UseCopyTextureBackgroundSampling())return false;return true}UseFullSurface(){return this._useFullSurface}GetContentObject(){return this._contentObject}GetContextObject(){return this._contextObject}_GetBlendMode(){return this._blendMode}_UpdateOwnProjection(){return this._updateOwnProjection}DidChangeTransform(){return this._didChangeTransform}_GetDrawSurfaceRect(){return this._drawSurfaceRect}_GetRcTexBounce(){return this._rcTexBounce}_ShouldInvalidateRenderTargets(){return this._invalidateRenderTargets}async DebugLogRenderTargetContents(msg,\nrenderer,renderTarget){}};\n\n}\n\n// ../lib/gfx/effectCompositor/step.js\n{\n'use strict';const C3=self.C3;\nC3.Gfx.EffectChain.Step=class EffectChainStep{constructor(effectChain,srcTargetId,destTargetId,index=-1){this._effectChain=effectChain;this._srcTargetId=srcTargetId;this._destTargetId=destTargetId;this._index=index}GetEffectChain(){return this._effectChain}GetSrcTargetId(){return this._srcTargetId}GetDestTargetId(){return this._destTargetId}GetIndex(){return this._index}GetShaderProgram(){return this.GetEffectChain()._GetShaderProgramAt(this.GetIndex())}Run_WebGL(renderer,srcRenderTarget,destRenderTarget){}Run_WebGPU(renderer,\nsrcRenderTarget,destRenderTarget){}};\n\n}\n\n// ../lib/gfx/effectCompositor/preDrawStep.js\n{\n'use strict';const C3=self.C3;\nC3.Gfx.EffectChain.Step.PreDraw=class PreDrawStep extends C3.Gfx.EffectChain.Step{constructor(effectChain,srcTargetId,destTargetId,index){super(effectChain,srcTargetId,destTargetId,index)}Run_WebGL(renderer,srcRenderTarget,destRenderTarget){const effectChain=this.GetEffectChain();renderer.SetAlphaBlend();renderer.SetTextureFillMode();renderer.SetRenderTarget(destRenderTarget,effectChain._UpdateOwnProjection());renderer.ClearRgba(0,0,0,0);effectChain._DrawContent(renderer);effectChain._ClampRcTexDest()}Run_WebGPU(renderer,\nsrcRenderTarget,destRenderTarget){const effectChain=this.GetEffectChain();renderer.SetAlphaBlend();renderer.SetTextureFillMode();renderer.SetRenderTarget(destRenderTarget,false);renderer.ClearRgba(0,0,0,0);effectChain._DrawContent(renderer);effectChain._ClampRcTexDest()}};\n\n}\n\n// ../lib/gfx/effectCompositor/postDrawStep.js\n{\n'use strict';const C3=self.C3;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);\nC3.Gfx.EffectChain.Step.PostDraw=class PostDrawStep extends C3.Gfx.EffectChain.Step{constructor(effectChain,srcTargetId,destTargetId,index){super(effectChain,srcTargetId,destTargetId,index)}Run_WebGL(renderer,srcRenderTarget,destRenderTarget){const effectChain=this.GetEffectChain();renderer.SetTextureFillMode();renderer.SetRenderTarget(destRenderTarget);effectChain._SetDeviceTransform(renderer,true);renderer.SetBlendMode(effectChain._GetBlendMode());renderer.SetTexture(srcRenderTarget.GetTexture());\ntempQuad.setFromRect(effectChain._GetDrawSurfaceRect());tempRect.copy(effectChain._GetRcTexBounce());tempRect.flipAround(1);renderer.Quad3(tempQuad,tempRect);if(effectChain._ShouldInvalidateRenderTargets())renderer.InvalidateRenderTarget(srcRenderTarget)}Run_WebGPU(renderer,srcRenderTarget,destRenderTarget){const effectChain=this.GetEffectChain();renderer.SetTextureFillMode();renderer.SetRenderTarget(destRenderTarget,false);if(effectChain._IsRenderTargetSameSizeAndOffset(renderer))tempQuad.setFromRect(effectChain._GetRcTexBounce());\nelse{renderer.SetNormalizedCoordsProgramVariant(false);effectChain._SetDeviceTransform(renderer,true);tempQuad.setFromRect(effectChain._GetDrawSurfaceRect())}renderer.SetBackTexture(null);renderer.SetBlendMode(effectChain._GetBlendMode());renderer.SetTexture(srcRenderTarget.GetTexture());if(effectChain.UseFullSurface())renderer.FullscreenQuad();else renderer.Quad3(tempQuad,effectChain._GetRcTexBounce())}};\n\n}\n\n// ../lib/gfx/effectCompositor/firstBounceStep.js\n{\n'use strict';const C3=self.C3;\nC3.Gfx.EffectChain.Step.FirstBounce=class FirstBounceStep extends C3.Gfx.EffectChain.Step{constructor(effectChain,srcTargetId,destTargetId,index){super(effectChain,srcTargetId,destTargetId,index)}Run_WebGL(renderer,srcRenderTarget,destRenderTarget){const effectChain=this.GetEffectChain();renderer.SetRenderTarget(destRenderTarget,effectChain._UpdateOwnProjection());renderer.ClearRgba(0,0,0,0);renderer.SetCopyBlend();renderer.SetProgram(this.GetShaderProgram());effectChain._SetFirstBounceProgramParameters(renderer,this.GetIndex());\neffectChain._DrawContent(renderer);effectChain._ClampRcTexDest()}Run_WebGPU(renderer,srcRenderTarget,destRenderTarget){const effectChain=this.GetEffectChain();renderer.SetRenderTarget(destRenderTarget,false);renderer.ClearRgba(0,0,0,0);renderer.SetCopyBlend();renderer.SetProgram(this.GetShaderProgram());effectChain._SetFirstBounceProgramParameters(renderer,this.GetIndex());effectChain._DrawContent(renderer);effectChain._ClampRcTexDest()}};\n\n}\n\n// ../lib/gfx/effectCompositor/bounceStep.js\n{\n'use strict';const C3=self.C3;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);\nC3.Gfx.EffectChain.Step.Bounce=class BounceStep extends C3.Gfx.EffectChain.Step{constructor(effectChain,srcTargetId,destTargetId,index){super(effectChain,srcTargetId,destTargetId,index)}Run_WebGL(renderer,srcRenderTarget,destRenderTarget){const effectChain=this.GetEffectChain();renderer.SetRenderTarget(destRenderTarget);const isLast=this.GetDestTargetId()===0;if(isLast)renderer.SetBlendMode(effectChain._GetBlendMode());else{renderer.ClearRgba(0,0,0,0);renderer.SetCopyBlend()}renderer.SetProgram(this.GetShaderProgram());\neffectChain._SetProgramParameters(renderer,this.GetIndex());renderer.SetTexture(srcRenderTarget.GetTexture());effectChain._SetDeviceTransform(renderer,isLast);tempQuad.setFromRect(effectChain._GetDrawSurfaceRect());tempRect.copy(effectChain._GetRcTexBounce());tempRect.flipAround(1);renderer.Quad3(tempQuad,tempRect);if(effectChain._ShouldInvalidateRenderTargets())renderer.InvalidateRenderTarget(srcRenderTarget)}Run_WebGPU(renderer,srcRenderTarget,destRenderTarget){const effectChain=this.GetEffectChain();\nrenderer.SetRenderTarget(destRenderTarget,false);const isLast=this.GetDestTargetId()===0;if(isLast){renderer.SetBlendMode(effectChain._GetBlendMode());renderer.SetBackTexture(null);if(effectChain._IsRenderTargetSameSizeAndOffset(renderer))tempQuad.setFromRect(effectChain._GetRcTexBounce());else{renderer.SetNormalizedCoordsProgramVariant(false);effectChain._SetDeviceTransform(renderer,true);tempQuad.setFromRect(effectChain._GetDrawSurfaceRect())}}else{renderer.ClearRgba(0,0,0,0);renderer.SetCopyBlend();\ntempQuad.setFromRect(effectChain._GetRcTexBounce())}renderer.SetProgram(this.GetShaderProgram());effectChain._SetProgramParameters(renderer,this.GetIndex());renderer.SetTexture(srcRenderTarget.GetTexture());if(effectChain.UseFullSurface())renderer.FullscreenQuad();else renderer.Quad3(tempQuad,effectChain._GetRcTexBounce())}};\n\n}\n\n// interfaces/IRuntime.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;let runtime=null;const keysDownByKey=new Set;function SortZOrderList(a,b){const layerA=a[0];const layerB=b[0];const diff=layerA-layerB;if(diff!==0)return diff;const indexA=a[1];const indexB=b[1];return indexA-indexB}const tempZOrderList=[];const tempInstances=[];let didWarnInAlertPolyfill=false;\nself.IRuntime=class IRuntime{constructor(runtime_,objects){runtime=runtime_;Object.defineProperties(this,{assets:{value:runtime.GetAssetManager().GetIAssetManager(),writable:false},objects:{value:objects,writable:false},globalVars:{value:{},writable:false},projectName:{value:runtime.GetProjectName(),writable:false},projectVersion:{value:runtime.GetProjectVersion(),writable:false},storage:{value:new self.IStorage(runtime),writable:false},isInWorker:{value:runtime.IsInWorker(),writable:false},viewportWidth:{value:runtime.GetOriginalViewportWidth(),\nwritable:false},viewportHeight:{value:runtime.GetOriginalViewportHeight(),writable:false}});runtime.UserScriptDispatcher().addEventListener(\"keydown\",e=>{if(keysDownByKey.has(e[\"key\"])){e.stopPropagation();return}keysDownByKey.add(e[\"key\"])});runtime.UserScriptDispatcher().addEventListener(\"keyup\",e=>keysDownByKey.delete(e[\"key\"]));runtime.Dispatcher().addEventListener(\"window-blur\",()=>keysDownByKey.clear());if(runtime.IsInWorker())self[\"alert\"]=message=>{if(!didWarnInAlertPolyfill){didWarnInAlertPolyfill=\ntrue;console.warn(\"[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.\")}return this.alert(message)}}_InitGlobalVars(globalVarDescriptors){Object.defineProperties(this.globalVars,\nglobalVarDescriptors)}addEventListener(name,func){runtime.UserScriptDispatcher().addEventListener(name,func)}removeEventListener(name,func){runtime.UserScriptDispatcher().removeEventListener(name,func)}callFunction(name,...params){C3X.RequireString(name);const eventSheetManager=runtime.GetEventSheetManager();const functionBlock=eventSheetManager.GetFunctionBlockByName(name);if(!functionBlock)throw new Error(`cannot find function name '${name}'`);if(!functionBlock.IsEnabled())return functionBlock.GetDefaultReturnValue();\nif(params.length<functionBlock.GetFunctionParameterCount())throw new Error(`not enough function parameters passed for '${name}' (${params.length} passed, ${functionBlock.GetFunctionParameterCount()} expected)`);const callEventBlock=functionBlock.GetEventBlock();let allSolModifiers=callEventBlock.GetSolModifiersIncludingParents();const currentEvent=eventSheetManager.GetCurrentEvent();if(currentEvent){allSolModifiers=allSolModifiers.slice(0);const allSolModifiersSet=new Set(allSolModifiers);for(const objectClass of currentEvent.GetSolModifiersIncludingParents())if(!allSolModifiersSet.has(objectClass)){allSolModifiers.push(objectClass);\nallSolModifiersSet.add(objectClass)}for(const objectClass of eventSheetManager.GetDynamicSolModifiersSet())if(!allSolModifiersSet.has(objectClass)){allSolModifiers.push(objectClass);allSolModifiersSet.add(objectClass)}}const ret=callEventBlock.RunAsExpressionFunctionCall(allSolModifiers,functionBlock.IsCopyPicked(),functionBlock.GetReturnType(),functionBlock.GetDefaultReturnValue(),...params);return ret}setReturnValue(v){const frame=runtime.GetEventStack().GetCurrentExpFuncStackFrame();if(!frame)throw new Error(\"not in a function which returns a value\");\nswitch(frame.GetFunctionReturnType()){case 1:if(typeof v===\"number\")frame.SetFunctionReturnValue(v);break;case 2:if(typeof v===\"string\")frame.SetFunctionReturnValue(v);break;case 3:if(typeof v===\"number\"||typeof v===\"string\")frame.SetFunctionReturnValue(v);break}}getViewportSize(){return[runtime.GetOriginalViewportWidth(),runtime.GetOriginalViewportHeight()]}get dt(){return runtime.GetDt()}get dtRaw(){return runtime.GetDtRaw()}get gameTime(){return runtime.GetGameTime()}get wallTime(){return runtime.GetWallTime()}get timeScale(){return runtime.GetTimeScale()}set timeScale(t){C3X.RequireFiniteNumber(t);\nruntime.SetTimeScale(t)}get fps(){return runtime.GetFPS()}get cpuUtilisation(){return runtime.GetMainThreadTime()}get gpuUtilisation(){return runtime.GetGPUUtilisation()}random(){return runtime.Random()}get layout(){return runtime.GetMainRunningLayout().GetILayout()}getLayout(nameOrIndex){const layoutManager=runtime.GetLayoutManager();let layout=null;if(typeof nameOrIndex===\"number\"||typeof nameOrIndex===\"string\")layout=layoutManager.GetLayout(nameOrIndex);else throw new TypeError(\"expected string or number\");\nif(!layout)throw new Error(\"invalid layout\");return layout.GetILayout()}getAllLayouts(){return runtime.GetLayoutManager().GetAllLayouts().map(layout=>layout.GetILayout())}goToLayout(nameOrIndex){const layoutManager=runtime.GetLayoutManager();let layout=null;if(typeof nameOrIndex===\"number\"||typeof nameOrIndex===\"string\")layout=layoutManager.GetLayout(nameOrIndex);else throw new TypeError(\"expected string or number\");if(!layout)throw new Error(\"invalid layout\");if(layoutManager.IsPendingChangeMainLayout())return;\nlayoutManager.ChangeMainLayout(layout)}get keyboard(){const ret=runtime._GetCommonScriptInterfaces().keyboard;if(!ret)throw new Error(\"runtime.keyboard used but Keyboard object missing - add it to your project first\");return ret}get mouse(){const ret=runtime._GetCommonScriptInterfaces().mouse;if(!ret)throw new Error(\"runtime.mouse used but Mouse object missing - add it to your project first\");return ret}get touch(){const ret=runtime._GetCommonScriptInterfaces().touch;if(!ret)throw new Error(\"runtime.touch used but Touch object missing - add it to your project first\");\nreturn ret}invokeDownload(url,filename){C3X.RequireString(url);C3X.RequireString(filename);runtime.InvokeDownload(url,filename)}getInstanceByUid(uid){C3X.RequireFiniteNumber(uid);const ret=runtime.GetInstanceByUID(uid);return ret?ret.GetInterfaceClass():null}sortZOrder(iterable,callback){C3X.RequireFunction(callback);const layout=runtime.GetCurrentLayout();for(const iinst of iterable){const inst=runtime._UnwrapIWorldInstance(iinst);const wi=inst.GetWorldInfo();tempZOrderList.push([wi.GetLayer().GetIndex(),\nwi.GetZIndex()]);tempInstances.push(inst)}if(tempZOrderList.length===0)return;tempZOrderList.sort(SortZOrderList);tempInstances.sort((a,b)=>callback(a.GetInterfaceClass(),b.GetInterfaceClass()));let anyChanged=false;for(let i=0,len=tempZOrderList.length;i<len;++i){const inst=tempInstances[i];const layer=layout.GetLayerByIndex(tempZOrderList[i][0]);const toZ=tempZOrderList[i][1];const layerInstances=layer._GetInstances();if(layerInstances[toZ]!==inst){layerInstances[toZ]=inst;inst.GetWorldInfo()._SetLayer(layer,\ntrue);layer.SetZIndicesChanged();anyChanged=true}}if(anyChanged)runtime.UpdateRender();C3.clearArray(tempZOrderList);C3.clearArray(tempInstances)}async createWorker(url,opts){const messageChannel=new MessageChannel;const port1=messageChannel.port1;const port2=messageChannel.port2;await runtime.PostComponentMessageToDOMAsync(\"runtime\",\"script-create-worker\",{\"url\":url,\"opts\":opts,\"port2\":port2},[port2]);return port1}alert(message){return runtime.PostComponentMessageToDOMAsync(\"runtime\",\"alert\",{\"message\":message+\n(runtime.IsInWorker()?\" [via Web Worker]\":\"\")})}};\n\n}\n\n// interfaces/IAssetManager.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;let assetManager=null;\nself.IAssetManager=class IAssetManager{constructor(assetManager_){assetManager=assetManager_;Object.defineProperties(this,{isWebMOpusSupported:{value:assetManager.IsAudioFormatSupported(\"audio/webm; codecs=opus\"),writable:false}})}fetchText(url){return assetManager.FetchText(url)}fetchJson(url){return assetManager.FetchJson(url)}fetchBlob(url){return assetManager.FetchBlob(url)}fetchArrayBuffer(url){return assetManager.FetchArrayBuffer(url)}getProjectFileUrl(url){return assetManager.GetProjectFileUrl(url)}getMediaFileUrl(url){if(assetManager.GetFileStructure()===\"flat\"&&\nC3.IsRelativeURL(url))url=url.toLowerCase();return assetManager.GetMediaFileUrl(url)}get mediaFolder(){return assetManager.GetMediaSubfolder()}async decodeWebMOpus(audioContext,arrayBuffer){if(this.isWebMOpusSupported)throw new Error(\"decodeWebMOpus(): not supported because WebM Opus is supported by the platform\");const decodedArrayBuffer=await assetManager.GetRuntime()._WasmDecodeWebMOpus(arrayBuffer);const decodedFloats=new Float32Array(decodedArrayBuffer);const audioBuffer=audioContext[\"createBuffer\"](1,\ndecodedFloats.length,48E3);const channelBuffer=audioBuffer[\"getChannelData\"](0);channelBuffer.set(decodedFloats);return audioBuffer}loadScripts(...urls){return assetManager.LoadScripts(...urls)}compileWebAssembly(url){return assetManager.CompileWebAssembly(url)}loadStyleSheet(url){return assetManager.LoadStyleSheet(url)}};\n\n}\n\n// interfaces/IStorage.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;self.IStorage=class IStorage{constructor(runtime){this._storage=runtime._GetProjectStorage()}getItem(key){C3X.RequireString(key);return this._storage.getItem(key)}setItem(key,value){C3X.RequireString(key);return this._storage.setItem(key,value)}removeItem(key){C3X.RequireString(key);return this._storage.removeItem(key)}clear(){return this._storage.clear()}keys(){return this._storage.keys()}};\n\n}\n\n// interfaces/IObjectClass.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;\nself.IObjectClass=class IObjectClass{constructor(objectClass){map.set(this,objectClass);Object.defineProperties(this,{name:{value:objectClass.GetName(),writable:false}});objectClass.GetRuntime()._MapScriptInterface(this,objectClass)}addEventListener(type,func){C3X.RequireString(type);C3X.RequireFunction(func);map.get(this).UserScriptDispatcher().addEventListener(type,func)}removeEventListener(type,func){C3X.RequireString(type);C3X.RequireFunction(func);map.get(this).UserScriptDispatcher().removeEventListener(type,\nfunc)}getAllInstances(){return[...this.instances()]}getFirstInstance(){return C3.first(this.instances())}getPickedInstances(){return[...this.pickedInstances()]}getFirstPickedInstance(){return C3.first(this.pickedInstances())}*instances(){for(const inst of map.get(this).instancesIncludingPendingCreate())yield inst.GetInterfaceClass()}*pickedInstances(){for(const inst of map.get(this).GetCurrentSol().GetInstances())yield inst.GetInterfaceClass()}setInstanceClass(Class){C3X.RequireFunction(Class);const objectClass=\nmap.get(this);if(objectClass.GetInstanceCount()>0)throw new Error(\"setInstanceClass() called too late, because instances have already been created - call in runOnStartup\");map.get(this)._SetUserScriptInstanceClass(Class)}createInstance(layerNameOrIndex,x,y,createHierarchy,template){C3X.RequireNumber(x);C3X.RequireNumber(y);if(typeof layerNameOrIndex!==\"number\"&&typeof layerNameOrIndex!==\"string\")throw new TypeError(\"invalid layer parameter\");const objectClass=map.get(this);const runtime=objectClass.GetRuntime();\nconst layer=runtime.GetMainRunningLayout().GetLayer(layerNameOrIndex);if(!layer)throw new Error(\"invalid layer\");const inst=runtime.CreateInstance(objectClass,layer,x,y,createHierarchy,template);if(createHierarchy)layer.SortAndAddInstancesByZIndex(inst);const eventSheetManager=runtime.GetEventSheetManager();eventSheetManager.BlockFlushingInstances(true);inst._TriggerOnCreatedOnSelfAndRelated();eventSheetManager.BlockFlushingInstances(false);if(!eventSheetManager.IsInEventEngine()&&!runtime.GetLayoutManager().IsEndingLayout())runtime.FlushPendingInstances();\nreturn inst.GetInterfaceClass()}};\n\n}\n\n// interfaces/ILayout.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;const VALID_WHERE_STRINGS=[\"above\",\"below\",\"top-sublayer\",\"bottom-sublayer\"];\nself.ILayout=class ILayout{constructor(layout){map.set(this,layout);const effectInstanceArr=[];const effectList=layout.GetEffectList();const effectCount=effectList.GetAllEffectTypes().length;for(let i=0;i<effectCount;++i)effectInstanceArr.push(new self.IEffectInstance(effectList,i));Object.defineProperties(this,{name:{value:layout.GetName(),writable:false},index:{value:layout.GetIndex(),writable:false},effects:{value:effectInstanceArr,writable:false}})}addEventListener(type,func){C3X.RequireString(type);\nC3X.RequireFunction(func);map.get(this).UserScriptDispatcher().addEventListener(type,func)}removeEventListener(type,func){C3X.RequireString(type);C3X.RequireFunction(func);map.get(this).UserScriptDispatcher().removeEventListener(type,func)}get width(){return map.get(this).GetWidth()}set width(w){C3X.RequireFiniteNumber(w);map.get(this).SetWidth(w)}get height(){return map.get(this).GetHeight()}set height(h){C3X.RequireFiniteNumber(h);map.get(this).SetHeight(h)}setSize(w,h){C3X.RequireFiniteNumber(w);\nC3X.RequireFiniteNumber(h);const layout=map.get(this);layout.SetWidth(w);layout.SetHeight(h)}getSize(){const layout=map.get(this);return[layout.GetWidth(),layout.GetHeight()]}set scale(s){C3X.RequireFiniteNumber(s);map.get(this).SetScale(s)}get scale(){return map.get(this).GetScale()}set angle(a){C3X.RequireFiniteNumber(a);map.get(this).SetAngle(a)}get angle(){return map.get(this).GetAngle()}set scrollX(x){C3X.RequireNumber(x);map.get(this).SetScrollX(x)}get scrollX(){return map.get(this).GetScrollX()}set scrollY(y){C3X.RequireNumber(y);\nmap.get(this).SetScrollY(y)}get scrollY(){return map.get(this).GetScrollY()}scrollTo(x,y){C3X.RequireNumber(x);C3X.RequireNumber(y);const layout=map.get(this);layout.SetScrollX(x);layout.SetScrollY(y)}getScrollPosition(){const layout=map.get(this);return[layout.GetScrollX(),layout.GetScrollY()]}getLayer(nameOrIndex){const layout=map.get(this);let layer=null;if(typeof nameOrIndex===\"number\"||typeof nameOrIndex===\"string\")layer=layout.GetLayer(nameOrIndex);else throw new TypeError(\"expected string or number\");\nif(!layer)return null;return layer.GetILayer()}getAllLayers(){return map.get(this).GetLayers().map(layer=>layer.GetILayer())}*allLayers(){for(const layer of map.get(this).allLayers())yield layer.GetILayer()}addLayer(layerName,iInsertBy,whereStr){const ILayer=self.ILayer;C3X.RequireString(layerName);C3X.RequireOptionalInstanceOf(iInsertBy,ILayer);const insertBy=iInsertBy?ILayer._Unwrap(iInsertBy):null;const where=VALID_WHERE_STRINGS.indexOf(whereStr);if(where<0)throw new Error(\"invalid location\");\nmap.get(this).AddLayer(layerName,insertBy,where)}moveLayer(iLayer,iInsertBy,whereStr){const ILayer=self.ILayer;C3X.RequireInstanceOf(iLayer,ILayer);const layer=ILayer._Unwrap(iLayer);if(!layer)throw new Error(\"invalid layer\");C3X.RequireOptionalInstanceOf(iInsertBy,ILayer);const insertBy=iInsertBy?ILayer._Unwrap(iInsertBy):null;const where=VALID_WHERE_STRINGS.indexOf(whereStr);if(where<0)throw new Error(\"invalid location\");map.get(this).MoveLayer(layer,insertBy,where)}removeLayer(iLayer){const ILayer=\nself.ILayer;C3X.RequireInstanceOf(iLayer,ILayer);const layer=ILayer._Unwrap(iLayer);if(!layer)throw new Error(\"invalid layer\");const runtime=layer.GetRuntime();map.get(this).RemoveLayer(layer);if(!runtime.GetEventSheetManager().IsInEventEngine())runtime.FlushPendingInstances()}removeAllDynamicLayers(){const layout=map.get(this);const runtime=layout.GetRuntime();layout.RemoveAllDynamicLayers();if(!runtime.GetEventSheetManager().IsInEventEngine())runtime.FlushPendingInstances()}setVanishingPoint(vpX,\nvpY){C3X.RequireFiniteNumber(vpX);C3X.RequireFiniteNumber(vpY);map.get(this).SetVanishingPointXY(vpX,vpY)}getVanishingPoint(){return map.get(this)._GetVanishingPoint()}set projection(p){C3X.RequireString(p);const layout=map.get(this);if(p===\"perspective\")layout.SetPerspectiveProjection();else if(p===\"orthographic\")layout.SetOrthographicProjection();else throw new Error(\"invalid projection\");}get projection(){if(map.get(this).IsOrthographicProjection())return\"orthographic\";else return\"perspective\"}};\n\n}\n\n// interfaces/ILayer.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;const BLEND_MODE_TO_INDEX=new Map([[\"normal\",0],[\"additive\",1],[\"copy\",3],[\"destination-over\",4],[\"source-in\",5],[\"destination-in\",6],[\"source-out\",7],[\"destination-out\",8],[\"source-atop\",9],[\"destination-atop\",10]]);const INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(a=>[a[1],a[0]]));const tempColor=C3.New(C3.Color);\nself.ILayer=class ILayer{constructor(layer){map.set(this,layer);const effectInstanceArr=[];const effectList=layer.GetEffectList();const effectCount=effectList.GetAllEffectTypes().length;for(let i=0;i<effectCount;++i)effectInstanceArr.push(new self.IEffectInstance(effectList,i));Object.defineProperties(this,{name:{value:layer.GetName(),writable:false},layout:{value:layer.GetLayout().GetILayout(),writable:false},effects:{value:effectInstanceArr,writable:false}})}static _Unwrap(ilayer){return map.get(ilayer)}get parentLayer(){const parent=\nmap.get(this).GetParentLayer();return parent?parent.GetILayer():null}*parentLayers(){for(const parent of map.get(this).parentLayers())yield parent.GetILayer()}*subLayers(){for(const layer of map.get(this).GetSubLayers())yield layer.GetILayer()}*allSubLayers(){for(const subLayer of map.get(this).GetSubLayers())for(const layer of subLayer.selfAndAllSubLayers())yield layer.GetILayer()}get index(){return map.get(this).GetIndex()}get isVisible(){return map.get(this)._IsVisibleFlagSet()}set isVisible(v){map.get(this).SetVisible(v)}get isSelfAndParentsVisible(){return map.get(this).IsVisible()}get isInteractive(){return map.get(this).IsInteractive()}set isInteractive(i){map.get(this).SetInteractive(i)}get isSelfAndParentsInteractive(){return map.get(this).IsSelfAndParentsInteractive()}get opacity(){return map.get(this).GetOpacity()}set opacity(o){o=\nC3.clamp(+o,0,1);if(isNaN(o))return;map.get(this).SetOpacity(o)}set scale(s){C3X.RequireFiniteNumber(s);map.get(this).SetOwnScale(s)}get scale(){return map.get(this).GetOwnScale()}set scaleRate(r){C3X.RequireFiniteNumber(r);map.get(this).SetScaleRate(r)}get scaleRate(){return map.get(this).GetScaleRate()}set angle(a){C3X.RequireFiniteNumber(a);map.get(this).SetAngle(a)}get angle(){return map.get(this).GetOwnAngle()}set parallaxX(p){C3X.RequireFiniteNumber(p);map.get(this).SetParallaxX(p)}get parallaxX(){return map.get(this).GetParallaxX()}set parallaxY(p){C3X.RequireFiniteNumber(p);\nmap.get(this).SetParallaxY(p)}get parallaxY(){return map.get(this).GetParallaxY()}set zElevation(z){C3X.RequireFiniteNumber(z);map.get(this).SetZElevation(z)}get zElevation(){return map.get(this).GetZElevation()}set isTransparent(t){map.get(this).SetTransparent(t)}get isTransparent(){return map.get(this).IsTransparent()}set isForceOwnTexture(f){map.get(this).SetForceOwnTexture(f)}get isForceOwnTexture(){return map.get(this).IsForceOwnTexture()}set blendMode(bm){C3X.RequireString(bm);const index=BLEND_MODE_TO_INDEX.get(bm);\nif(typeof index!==\"number\")throw new Error(\"invalid blend mode\");map.get(this).SetBlendMode(index)}get blendMode(){return INDEX_TO_BLEND_MODE.get(map.get(this).GetBlendMode())}set backgroundColor(arr){C3X.RequireArray(arr);if(arr.length<3)throw new Error(\"expected 3 elements\");tempColor.setRgb(arr[0],arr[1],arr[2]);const layer=map.get(this);const bgColor=layer.GetBackgroundColor();if(bgColor.equalsIgnoringAlpha(tempColor))return;bgColor.copyRgb(tempColor);layer.GetRuntime().UpdateRender()}get backgroundColor(){const c=\nmap.get(this).GetBackgroundColor();return[c.getR(),c.getG(),c.getB()]}set scrollX(x){C3X.RequireNumber(x);const layer=map.get(this);layer.SetOwnScrollPositionEnabled(true);layer.SetScrollX(x)}get scrollX(){return map.get(this).GetScrollX()}set scrollY(y){C3X.RequireNumber(y);const layer=map.get(this);layer.SetOwnScrollPositionEnabled(true);layer.SetScrollY(y)}get scrollY(){return map.get(this).GetScrollY()}scrollTo(x,y){C3X.RequireNumber(x);C3X.RequireNumber(y);const layer=map.get(this);layer.SetOwnScrollPositionEnabled(true);\nlayer.SetScrollX(x);layer.SetScrollY(y)}getScrollPosition(){const layer=map.get(this);return[layer.GetScrollX(),layer.GetScrollY()]}restoreScrollPosition(){map.get(this).SetOwnScrollPositionEnabled(false)}getViewport(){return map.get(this).GetViewport().toDOMRect()}cssPxToLayer(clientX,clientY,z=0){C3X.RequireNumber(clientX);C3X.RequireNumber(clientY);C3X.RequireNumber(z);const layer=map.get(this);const runtime=layer.GetRuntime();return layer.CanvasCssToLayer(clientX-runtime.GetCanvasClientX(),clientY-\nruntime.GetCanvasClientY(),z)}layerToCssPx(layerX,layerY,z=0){C3X.RequireNumber(layerX);C3X.RequireNumber(layerY);C3X.RequireNumber(z);const layer=map.get(this);const runtime=layer.GetRuntime();const [clientX,clientY]=layer.LayerToCanvasCss(layerX,layerY,z);return[clientX+runtime.GetCanvasClientX(),clientY+runtime.GetCanvasClientY()]}};\n\n}\n\n// interfaces/IInstance.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;const dispatchers=new WeakMap;function GetDispatcher(iinst){let dispatcher=dispatchers.get(iinst);if(dispatcher)return dispatcher;dispatcher=C3.New(C3.Event.Dispatcher);dispatchers.set(iinst,dispatcher);return dispatcher}let initInst=null;\nself.IInstance=class IInstance{constructor(){map.set(this,initInst);const descriptors={runtime:{value:initInst.GetRuntime().GetIRuntime(),writable:false},objectType:{value:initInst.GetObjectClass().GetIObjectClass(),writable:false},uid:{value:initInst.GetUID(),writable:false}};initInst._GetInstVarsScriptDescriptor(descriptors);initInst._GetBehaviorsScriptDescriptor(descriptors);Object.defineProperties(this,descriptors);initInst.GetRuntime()._MapScriptInterface(this,initInst)}static _Init(inst){initInst=\ninst}static _GetInitInst(){return initInst}_Release(){const dispatcher=dispatchers.get(this);if(dispatcher){dispatcher.Release();dispatchers.delete(this)}map.delete(this)}addEventListener(type,func,capture){C3X.RequireString(type);C3X.RequireFunction(func);GetDispatcher(this).addEventListener(type,func,capture)}removeEventListener(type,func,capture){C3X.RequireString(type);C3X.RequireFunction(func);GetDispatcher(this).removeEventListener(type,func,capture)}dispatchEvent(e){GetDispatcher(this).dispatchEvent(e)}destroy(){const inst=\nmap.get(this);const runtime=inst.GetRuntime();runtime.DestroyInstance(inst);if(!runtime.GetEventSheetManager().IsInEventEngine()&&!runtime.GetLayoutManager().IsEndingLayout())runtime.FlushPendingInstances()}getOtherContainerInstances(){const siblings=map.get(this).GetSiblings();return siblings?siblings.map(s=>s.GetInterfaceClass()):[]}*otherContainerInstances(){const inst=map.get(this);if(!inst.IsInContainer())return;for(const s of inst.siblings())yield s.GetInterfaceClass()}get templateName(){return map.get(this).GetTemplateName()}set timeScale(t){C3X.RequireFiniteNumber(t);\nmap.get(this).SetTimeScale(t)}get timeScale(){return map.get(this).GetActiveTimeScale()}restoreTimeScale(){map.get(this).RestoreTimeScale()}};\n\n}\n\n// interfaces/IWorldInstance.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const IInstance=self.IInstance;const ILayer=self.ILayer;const map=new WeakMap;const BLEND_MODE_TO_INDEX=new Map([[\"normal\",0],[\"additive\",1],[\"copy\",3],[\"destination-over\",4],[\"source-in\",5],[\"destination-in\",6],[\"source-out\",7],[\"destination-out\",8],[\"source-atop\",9],[\"destination-atop\",10]]);const INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(a=>[a[1],a[0]]));const tempColor=C3.New(C3.Color);\nself.IWorldInstance=class IWorldInstance extends IInstance{constructor(){super();const inst=IInstance._GetInitInst();map.set(this,inst);const effectInstanceArr=[];const wi=inst.GetWorldInfo();const instanceEffectList=wi.GetInstanceEffectList();if(instanceEffectList){const effectCount=wi.GetObjectClass().GetEffectList().GetAllEffectTypes().length;for(let i=0;i<effectCount;++i)effectInstanceArr.push(new self.IEffectInstance(instanceEffectList,i))}const descriptors={effects:{value:effectInstanceArr,\nwritable:false}};Object.defineProperties(this,descriptors)}get layout(){return map.get(this).GetWorldInfo().GetLayout().GetILayout()}get layer(){return map.get(this).GetWorldInfo().GetLayer().GetILayer()}get x(){return map.get(this).GetWorldInfo().GetX()}set x(v){v=+v;const wi=map.get(this).GetWorldInfo();if(isNaN(v)||wi.GetX()===v)return;wi.SetX(v);wi.SetBboxChanged()}get y(){return map.get(this).GetWorldInfo().GetY()}set y(v){v=+v;const wi=map.get(this).GetWorldInfo();if(isNaN(v)||wi.GetY()===v)return;\nwi.SetY(v);wi.SetBboxChanged()}setPosition(x,y){x=+x;y=+y;const wi=map.get(this).GetWorldInfo();if(isNaN(x)||isNaN(y)||wi.GetX()===x&&wi.GetY()===y)return;wi.SetXY(x,y);wi.SetBboxChanged()}getPosition(){const wi=map.get(this).GetWorldInfo();return[wi.GetX(),wi.GetY()]}offsetPosition(dx,dy){dx=+dx;dy=+dy;if(isNaN(dx)||isNaN(dy)||dx===0&&dy===0)return;const wi=map.get(this).GetWorldInfo();wi.OffsetXY(dx,dy);wi.SetBboxChanged()}get zElevation(){return map.get(this).GetWorldInfo().GetZElevation()}set zElevation(z){z=\n+z;const inst=map.get(this);const wi=inst.GetWorldInfo();if(isNaN(z)||wi.GetZElevation()===z)return;wi.SetZElevation(z);inst.GetRuntime().UpdateRender()}get totalZElevation(){return map.get(this).GetWorldInfo().GetTotalZElevation()}get width(){return map.get(this).GetWorldInfo().GetWidth()}set width(w){w=+w;const wi=map.get(this).GetWorldInfo();if(isNaN(w)||wi.GetWidth()===w)return;wi.SetWidth(w);wi.SetBboxChanged()}get height(){return map.get(this).GetWorldInfo().GetHeight()}set height(h){h=+h;const wi=\nmap.get(this).GetWorldInfo();if(isNaN(h)||wi.GetHeight()===h)return;wi.SetHeight(h);wi.SetBboxChanged()}setSize(w,h){w=+w;h=+h;const wi=map.get(this).GetWorldInfo();if(isNaN(w)||isNaN(h)||wi.GetWidth()===w&&wi.GetHeight()===h)return;wi.SetSize(w,h);wi.SetBboxChanged()}getSize(){const wi=map.get(this).GetWorldInfo();return[wi.GetWidth(),wi.GetHeight()]}get angle(){return map.get(this).GetWorldInfo().GetAngle()}set angle(a){a=C3.clampAngle(+a);const wi=map.get(this).GetWorldInfo();if(isNaN(a)||wi.GetAngle()===\na)return;wi.SetAngle(a);wi.SetBboxChanged()}get angleDegrees(){return C3.toDegrees(this.angle)}set angleDegrees(a){this.angle=C3.toRadians(a)}getBoundingBox(){return map.get(this).GetWorldInfo().GetBoundingBox().toDOMRect()}getBoundingQuad(){return map.get(this).GetWorldInfo().GetBoundingQuad().toDOMQuad()}get isVisible(){return map.get(this).GetWorldInfo().IsVisible()}set isVisible(v){v=!!v;const inst=map.get(this);const wi=inst.GetWorldInfo();if(wi.IsVisible()===v)return;wi.SetVisible(v);inst.GetRuntime().UpdateRender()}get opacity(){return map.get(this).GetWorldInfo().GetOpacity()}set opacity(o){o=\nC3.clamp(+o,0,1);const inst=map.get(this);const wi=inst.GetWorldInfo();if(isNaN(o)||wi.GetOpacity()===o)return;wi.SetOpacity(o);inst.GetRuntime().UpdateRender()}set colorRgb(arr){C3X.RequireArray(arr);if(arr.length<3)throw new Error(\"expected 3 elements\");tempColor.setRgb(arr[0],arr[1],arr[2]);const inst=map.get(this);const wi=inst.GetWorldInfo();if(wi.GetUnpremultipliedColor().equalsIgnoringAlpha(tempColor))return;wi.SetUnpremultipliedColor(tempColor);inst.GetRuntime().UpdateRender()}get colorRgb(){const c=\nmap.get(this).GetWorldInfo().GetUnpremultipliedColor();return[c.getR(),c.getG(),c.getB()]}set blendMode(bm){C3X.RequireString(bm);const index=BLEND_MODE_TO_INDEX.get(bm);if(typeof index!==\"number\")throw new Error(\"invalid blend mode\");const inst=map.get(this);const wi=inst.GetWorldInfo();wi.SetBlendMode(index);inst.GetRuntime().UpdateRender()}get blendMode(){return INDEX_TO_BLEND_MODE.get(map.get(this).GetWorldInfo().GetBlendMode())}moveToTop(){map.get(this).GetWorldInfo().ZOrderMoveToTop()}moveToBottom(){map.get(this).GetWorldInfo().ZOrderMoveToBottom()}moveToLayer(ilayer){C3X.RequireInstanceOf(ilayer,\nILayer);const layer=ILayer._Unwrap(ilayer);if(!layer)throw new Error(\"invalid layer\");map.get(this).GetWorldInfo().ZOrderMoveToLayer(layer)}moveAdjacentToInstance(other,isAfter){C3X.RequireInstanceOf(other,IWorldInstance);map.get(this).GetWorldInfo().ZOrderMoveAdjacentToInstance(map.get(other),isAfter)}get zIndex(){return map.get(this).GetWorldInfo().GetZIndex()}get isCollisionEnabled(){return map.get(this).GetWorldInfo().IsCollisionEnabled()}set isCollisionEnabled(e){map.get(this).GetWorldInfo().SetCollisionEnabled(!!e)}containsPoint(x,\ny){C3X.RequireNumber(x);C3X.RequireNumber(y);return map.get(this).GetWorldInfo().ContainsPoint(+x,+y)}testOverlap(worldInstance){C3X.RequireInstanceOf(worldInstance,IWorldInstance);const a=map.get(this);const b=map.get(worldInstance);return a.GetRuntime().GetCollisionEngine().TestOverlap(a,b)}testOverlapSolid(){const inst=map.get(this);const overlapInst=inst.GetRuntime().GetCollisionEngine().TestOverlapSolid(inst);return overlapInst?overlapInst.GetInterfaceClass():null}getParent(){const parent=map.get(this).GetParent();\nreturn parent?parent.GetInterfaceClass():null}getTopParent(){const parent=map.get(this).GetTopParent();return parent?parent.GetInterfaceClass():null}*parents(){for(const parent of map.get(this).parents())yield parent.GetInterfaceClass()}getChildCount(){return map.get(this).GetChildCount()}getChildAt(index){const child=map.get(this).GetChildAt(index);return child?child.GetInterfaceClass():null}*children(){for(const child of map.get(this).children())yield child.GetInterfaceClass()}*allChildren(){for(const child of map.get(this).allChildren())yield child.GetInterfaceClass()}addChild(ichild,\nopts){C3X.RequireInstanceOf(ichild,IWorldInstance);C3X.RequireOptionalObject(opts);if(!opts)opts={};const inst=map.get(this);const child=map.get(ichild);inst.AddChild(child,opts)}removeChild(ichild){C3X.RequireInstanceOf(ichild,IWorldInstance);const inst=map.get(this);const child=map.get(ichild);inst.RemoveChild(child)}removeFromParent(){const inst=map.get(this);if(!inst.HasParent())return;const parent=inst.GetParent();parent.RemoveChild(inst)}createMesh(hsize,vsize){C3X.RequireFiniteNumber(hsize);\nC3X.RequireFiniteNumber(vsize);map.get(this).GetWorldInfo().CreateMesh(hsize,vsize)}releaseMesh(){const wi=map.get(this).GetWorldInfo();wi.ReleaseMesh();wi.SetBboxChanged()}setMeshPoint(col,row,opts){C3X.RequireFiniteNumber(col);C3X.RequireFiniteNumber(row);C3X.RequireObject(opts);const wi=map.get(this).GetWorldInfo();if(wi.SetMeshPoint(col,row,opts))wi.SetBboxChanged()}getMeshSize(){const wi=map.get(this).GetWorldInfo();if(!wi.HasMesh())return[0,0];const sourceMesh=wi.GetSourceMesh();return[sourceMesh.GetHSize(),\nsourceMesh.GetVSize()]}};\n\n}\n\n// interfaces/IDOMInstance.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;self.IDOMInstance=class IDOMInstance extends self.IWorldInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst())}getElement(){return map.get(this).GetSdkInstance()._GetElementInDOMMode()}focus(){map.get(this).GetSdkInstance().FocusElement()}blur(){map.get(this).GetSdkInstance().BlurElement()}setCssStyle(prop,val){C3X.RequireString(prop);map.get(this).GetSdkInstance().SetElementCSSStyle(prop,val)}};\n\n}\n\n// interfaces/IBehaviorInstance.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;const dispatchers=new WeakMap;function GetDispatcher(ibehinst){let dispatcher=dispatchers.get(ibehinst);if(dispatcher)return dispatcher;dispatcher=C3.New(C3.Event.Dispatcher);dispatchers.set(ibehinst,dispatcher);return dispatcher}let initBehInst=null;\nself.IBehaviorInstance=class IBehaviorInstance{constructor(){map.set(this,initBehInst);const descriptors={runtime:{value:initBehInst.GetRuntime().GetIRuntime(),writable:false},behavior:{value:initBehInst.GetBehavior().GetIBehavior(),writable:false}};Object.defineProperties(this,descriptors)}static _Init(behInst){initBehInst=behInst}static _GetInitInst(){return initBehInst}get instance(){return map.get(this).GetObjectInstance().GetInterfaceClass()}_Release(){const dispatcher=dispatchers.get(this);\nif(dispatcher){dispatcher.Release();dispatchers.delete(this)}map.delete(this)}addEventListener(type,func,capture){C3X.RequireString(type);C3X.RequireFunction(func);GetDispatcher(this).addEventListener(type,func,capture)}removeEventListener(type,func,capture){C3X.RequireString(type);C3X.RequireFunction(func);GetDispatcher(this).removeEventListener(type,func,capture)}dispatchEvent(e){GetDispatcher(this).dispatchEvent(e)}};\n\n}\n\n// interfaces/IBehavior.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;self.IBehavior=class IBehavior{constructor(behavior){map.set(this,behavior);const descriptors={runtime:{value:behavior.GetRuntime().GetIRuntime(),writable:false}};Object.defineProperties(this,descriptors)}getAllInstances(){return map.get(this).GetInstances().map(inst=>inst.GetInterfaceClass())}};\n\n}\n\n// interfaces/IEffectInstance.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;const tempColor=C3.New(C3.Color);\nself.IEffectInstance=class IEffectInstance{constructor(effectList,index){map.set(this,effectList);const descriptors={index:{value:index,writable:false}};Object.defineProperties(this,descriptors)}get name(){const effectTypes=map.get(this).GetAllEffectTypes();return effectTypes[this.index].GetName()}get isActive(){return map.get(this).IsEffectIndexActive(this.index)}set isActive(a){a=!!a;const fxList=map.get(this);if(fxList.IsEffectIndexActive(this.index)===a)return;fxList.SetEffectIndexActive(this.index,\na);fxList.UpdateActiveEffects();fxList.GetRuntime().UpdateRender()}setParameter(i,v){C3X.RequireFiniteNumber(i);i=Math.floor(+i);const fxList=map.get(this);const oldValue=fxList.GetEffectParameter(this.index,i);if(oldValue===null)throw new RangeError(\"invalid index\");if(oldValue instanceof C3.Color){if(!Array.isArray(v)||v.length<3)throw new TypeError(\"expected array with 3 elements\");tempColor.setRgb(v[0],v[1],v[2]);v=tempColor}else if(typeof v!==\"number\")throw new TypeError(\"expected number\");const didChange=\nfxList.SetEffectParameter(this.index,i,v);if(didChange&&fxList.IsEffectIndexActive(this.index))fxList.GetRuntime().UpdateRender()}getParameter(i){C3X.RequireFiniteNumber(i);i=Math.floor(+i);const fxList=map.get(this);const ret=fxList.GetEffectParameter(this.index,i);if(ret===null)throw new RangeError(\"invalid index\");if(ret instanceof C3.Color)return[ret.getR(),ret.getG(),ret.getB()];else return ret}};\n\n}\n\n// interfaces/IAnimation.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;\nself.IAnimation=class IAnimation{constructor(animationInfo){map.set(this,animationInfo);Object.defineProperties(this,{name:{value:animationInfo.GetName(),writable:false},speed:{value:animationInfo.GetSpeed(),writable:false},isLooping:{value:animationInfo.IsLooping(),writable:false},repeatCount:{value:animationInfo.GetRepeatCount(),writable:false},repeatTo:{value:animationInfo.GetRepeatTo(),writable:false},isPingPong:{value:animationInfo.IsPingPong(),writable:false},frameCount:{value:animationInfo.GetFrameCount(),\nwritable:false}})}getFrames(){return map.get(this).GetFrames().map(f=>f.GetIAnimationFrame())}*frames(){for(const f of map.get(this).GetFrames())yield f.GetIAnimationFrame()}};\n\n}\n\n// interfaces/IImageInfo.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;self.IImageInfo=class IImageInfo{constructor(imageInfo){map.set(this,imageInfo)}get width(){return map.get(this).GetWidth()}get height(){return map.get(this).GetHeight()}getSize(){const imageInfo=map.get(this);return[imageInfo.GetWidth(),imageInfo.GetHeight()]}};\n\n}\n\n// interfaces/IAnimationFrame.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;\nself.IAnimationFrame=class IAnimationFrame extends self.IImageInfo{constructor(animationFrameInfo){super(animationFrameInfo.GetImageInfo());map.set(this,animationFrameInfo);Object.defineProperties(this,{duration:{value:animationFrameInfo.GetDuration(),writable:false},originX:{value:animationFrameInfo.GetOriginX(),writable:false},originY:{value:animationFrameInfo.GetOriginY(),writable:false}})}getOrigin(){const afi=map.get(this);return[afi.GetOriginX(),afi.GetOriginY()]}getImagePointCount(){return map.get(this).GetImagePointCount()}getImagePointX(nameOrIndex){return this.getImagePoint(nameOrIndex)[0]}getImagePointY(nameOrIndex){return this.getImagePoint(nameOrIndex)[1]}getImagePoint(nameOrIndex){const afi=\nmap.get(this);let ip=null;if(typeof nameOrIndex===\"number\")ip=afi.GetImagePointByIndex(Math.floor(nameOrIndex));else if(typeof nameOrIndex===\"string\")ip=afi.GetImagePointByName(nameOrIndex);else throw new TypeError(\"expected string or number\");if(!ip)return this.getOrigin();return[ip.GetX(),ip.GetY()]}getPolyPointCount(){const poly=map.get(this).GetCollisionPoly();return poly?poly.pointCount():0}getPolyPointX(index){return this.getPolyPoint(index)[0]}getPolyPointY(index){return this.getPolyPoint(index)[1]}getPolyPoint(index){C3X.RequireFiniteNumber(index);\nindex=Math.floor(index);const poly=map.get(this).GetCollisionPoly();if(!poly||index<0||index>=poly.pointCount())return[0,0];const pointsArr=poly.pointsArr();const ptX=pointsArr[index*2];const ptY=pointsArr[index*2+1];return[ptX,ptY]}};\n\n}\n\n// interfaces/ITimelineState.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;function GetTimelineState(iface){const timelineState=map.get(iface);if(timelineState.IsReleased())throw new Error(\"timeline/tween was released and is no longer valid\");return timelineState}\nself.ITimelineState=class ITimelineState{constructor(timelineState){map.set(this,timelineState)}pause(){GetTimelineState(this).Stop()}resume(){GetTimelineState(this).Resume()}hasTags(tags){return GetTimelineState(this).HasTags(tags)}set time(t){C3X.RequireFiniteNumber(t);GetTimelineState(this).SetTime(t)}get time(){return GetTimelineState(this).GetTime()}set totalTime(t){C3X.RequireFiniteNumber(t);GetTimelineState(this).SetTotalTime(t)}get totalTime(){return GetTimelineState(this).GetTotalTime()}set isLooping(l){GetTimelineState(this).SetLoop(!!l)}get isLooping(){return GetTimelineState(this).GetLoop()}set isPingPong(p){GetTimelineState(this).SetPingPong(!!p)}get isPingPong(){return GetTimelineState(this).GetPingPong()}set playbackRate(p){C3X.RequireFiniteNumber(p);\nGetTimelineState(this).SetPlaybackRate(p)}get playbackRate(){return GetTimelineState(this).GetPlaybackRate()}get progress(){const timelineState=GetTimelineState(this);return timelineState.GetTime()/timelineState.GetTotalTime()}get tags(){return GetTimelineState(this).GetTags()}get finished(){return GetTimelineState(this).GetPlayPromise()}get isPlaying(){return GetTimelineState(this).IsPlaying()}get isPaused(){return GetTimelineState(this).IsPaused()}get isReleased(){return map.get(this).IsReleased()}};\n\n}\n\n// interfaces/ITweenState.js\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const map=new WeakMap;const behInstMap=new WeakMap;let easeToIndexFunc=null;function GetTweenState(iface){const tweenState=map.get(iface);if(tweenState.IsReleased())throw new Error(\"timeline/tween was released and is no longer valid\");return tweenState}\nself.ITweenState=class ITweenState extends self.ITimelineState{constructor(tweenState,behInst,opts){super(tweenState);if(!easeToIndexFunc)easeToIndexFunc=opts.easeToIndexFunc;map.set(this,tweenState);if(behInst)behInstMap.set(this,behInst)}stop(){const tweenState=GetTweenState(this);const behInst=behInstMap.get(this);behInst.ReleaseTween(tweenState)}setEase(easeName){C3X.RequireString(easeName);const ease=self.Ease.GetEaseFromIndex(easeToIndexFunc(easeName));GetTweenState(this).SetEase(ease)}get instance(){const inst=\nGetTweenState(this).GetInstance();return inst?inst.GetInterfaceClass():null}get isDestroyOnComplete(){return GetTweenState(this).GetDestroyInstanceOnComplete()}set isDestroyOnComplete(d){GetTweenState(this).SetDestroyInstanceOnComplete(!!d)}get value(){const tweenState=GetTweenState(this);if(tweenState.GetId()!==\"value\")throw new Error(\"not a value tween\");return tweenState.GetPropertyTrack(\"value\").GetSourceAdapterValue()}};\n\n}\n\n// assets/assetManager.js\n{\n'use strict';const C3=self.C3;const VALID_LOAD_POLICIES=new Set([\"local\",\"remote\"]);const EXT_TO_TYPE=new Map([[\"mp4\",\"video/mp4\"],[\"webm\",\"video/webm\"],[\"m4a\",\"audio/mp4\"],[\"mp3\",\"audio/mpeg\"],[\"js\",\"application/javascript\"],[\"wasm\",\"application/wasm\"],[\"svg\",\"image/svg+xml\"],[\"html\",\"text/html\"]]);function GetTypeFromFileExtension(filename){if(!filename)return\"\";const parts=filename.split(\".\");if(parts.length<2)return\"\";const ext=parts.at(-1).toLowerCase();return EXT_TO_TYPE.get(ext)||\"\"}\nfunction AddScript(url){return new Promise((resolve,reject)=>{const elem=document.createElement(\"script\");elem.onload=resolve;elem.onerror=reject;elem.async=false;elem.type=\"module\";elem.src=url;document.head.appendChild(elem)})}\nC3.AssetManager=class AssetManager extends C3.DefendedBase{constructor(runtime,opts){super();const exportType=opts[\"exportType\"];this._runtime=runtime;this._fileStructure=\"folders\";this._localUrlBlobs=new Map;this._localBlobUrlCache=new Map;this._localBlobSWUrls=new Map;this._isCordova=exportType===\"cordova\";this._isiOSCordova=!!opts[\"isiOSCordova\"];this._isFileProtocol=!!opts[\"isFileProtocol\"];this._swClientId=opts[\"swClientId\"];this._supportedAudioFormats=opts[\"supportedAudioFormats\"]||{};this._audioFiles=\nnew Map;this._preloadSounds=false;this._mediaSubfolder=\"\";this._fontsSubfolder=\"\";this._iconsSubfolder=\"\";const isRemoteLoadPolicy=exportType===\"html5\"||exportType===\"scirra-arcade\"||exportType===\"instant-games\";this._defaultLoadPolicy=isRemoteLoadPolicy?\"remote\":\"local\";this._allAssets=[];this._assetsByUrl=new Map;this._webFonts=[];this._loadPromises=[];this._hasFinishedInitialLoad=false;this._totalAssetSizeToLoad=0;this._assetSizeLoaded=0;this._lastLoadProgress=0;this._hasHadErrorLoading=false;\nthis._loadingRateLimiter=C3.New(C3.RateLimiter,()=>this._FireLoadingProgressEvent(),50);this._promiseThrottle=new C3.PromiseThrottle(Math.max(C3.hardwareConcurrency,8));const localUrlBlobs=opts[\"previewImageBlobs\"];if(localUrlBlobs){const projectFileBlobs=opts[\"previewProjectFileBlobs\"];if(projectFileBlobs)Object.assign(localUrlBlobs,projectFileBlobs);const projectData=opts[\"projectData\"];if(projectData)localUrlBlobs[\"data.json\"]=projectData;for(const [url,blob]of Object.entries(localUrlBlobs))this._localUrlBlobs.set(url,\nblob)}const localSWUrlMap=opts[\"previewProjectFileSWUrls\"];if(localSWUrlMap)for(const [srcUrl,destUrl]of Object.entries(localSWUrlMap))this._localBlobSWUrls.set(srcUrl,destUrl);this._iAssetManager=new self.IAssetManager(this)}Release(){this._localUrlBlobs.clear();for(const url of this._localBlobUrlCache.values())if(url.startsWith(\"blob:\"))URL.revokeObjectURL(url);this._localBlobUrlCache.clear();for(const asset of this._allAssets)asset.Release();C3.clearArray(this._allAssets);this._assetsByUrl.clear();\nC3.clearArray(this._loadPromises);this._runtime=null}GetRuntime(){return this._runtime}_SetFileStructure(f){this._fileStructure=f;if(f===\"flat\"){const newMap=new Map;for(const [url,blob]of this._localUrlBlobs.entries())newMap.set(url.toLowerCase(),blob);this._localUrlBlobs=newMap}}GetFileStructure(){return this._fileStructure}_SetMediaSubfolder(folder){this._mediaSubfolder=folder}GetMediaSubfolder(){return this._mediaSubfolder}_SetFontsSubfolder(folder){this._fontsSubfolder=folder}GetFontsSubfolder(){return this._fontsSubfolder}_SetIconsSubfolder(folder){this._iconsSubfolder=\nfolder}GetIconsSubfolder(){return this._iconsSubfolder}IsFileProtocol(){return this._isFileProtocol}_HasLocalUrlBlob(url){if(this._fileStructure===\"flat\")url=url.toLowerCase();return this._localUrlBlobs.has(url)}_GetLocalUrlBlob(url){if(this._fileStructure===\"flat\")url=url.toLowerCase();return this._localUrlBlobs.get(url)||null}GetLocalUrlAsBlobUrl(url){if(this._fileStructure===\"flat\")url=url.toLowerCase();if(!this._HasLocalUrlBlob(url))return url;let ret=this._localBlobUrlCache.get(url);if(!ret){const blob=\nthis._GetLocalUrlBlob(url);ret=URL.createObjectURL(blob);this._localBlobUrlCache.set(url,ret)}return ret}FetchBlob(url,loadPolicy){loadPolicy=loadPolicy||this._defaultLoadPolicy;const localBlob=this._GetLocalUrlBlob(url);if(localBlob)return Promise.resolve(localBlob);else if(C3.IsRelativeURL(url)){if(this._fileStructure===\"flat\")url=url.toLowerCase();if(this._isCordova&&this._isFileProtocol)return this.CordovaFetchLocalFileAsBlob(url);else if(loadPolicy===\"local\")return this._promiseThrottle.Add(()=>\nC3.FetchBlob(url));else return C3.FetchBlob(url)}else return C3.FetchBlob(url)}FetchArrayBuffer(url){const localBlob=this._GetLocalUrlBlob(url);if(localBlob)return C3.BlobToArrayBuffer(localBlob);else if(C3.IsRelativeURL(url)){if(this._fileStructure===\"flat\")url=url.toLowerCase();if(this._isCordova&&this._isFileProtocol)return this.CordovaFetchLocalFileAsArrayBuffer(url);else if(this._defaultLoadPolicy===\"local\")return this._promiseThrottle.Add(()=>C3.FetchArrayBuffer(url));else return C3.FetchArrayBuffer(url)}else return C3.FetchArrayBuffer(url)}FetchText(url){const localBlob=\nthis._GetLocalUrlBlob(url);if(localBlob)return C3.BlobToString(localBlob);else if(C3.IsRelativeURL(url)){if(this._fileStructure===\"flat\")url=url.toLowerCase();if(this._isCordova&&this._isFileProtocol)return this.CordovaFetchLocalFileAsText(url);else if(this._defaultLoadPolicy===\"local\")return this._promiseThrottle.Add(()=>C3.FetchText(url));else return C3.FetchText(url)}else return C3.FetchText(url)}async FetchJson(url){const text=await this.FetchText(url);return JSON.parse(text)}_CordovaFetchLocalFileAs(filename,\nas_){if(this._fileStructure===\"flat\")filename=filename.toLowerCase();return this._runtime.PostComponentMessageToDOMAsync(\"runtime\",\"cordova-fetch-local-file\",{\"filename\":filename,\"as\":as_})}CordovaFetchLocalFileAsText(filename){return this._CordovaFetchLocalFileAs(filename,\"text\")}async CordovaFetchLocalFileAsBlob(filename){const buffer=await this._CordovaFetchLocalFileAs(filename,\"buffer\");const type=GetTypeFromFileExtension(filename);return new Blob([buffer],{\"type\":type})}async CordovaFetchLocalFileAsBlobURL(filename){if(this._fileStructure===\n\"flat\")filename=filename.toLowerCase();let blobUrl=this._localBlobUrlCache.get(filename);if(blobUrl)return blobUrl;const blob=await this.CordovaFetchLocalFileAsBlob(filename);blobUrl=URL.createObjectURL(blob);this._localBlobUrlCache.set(filename,blobUrl);return blobUrl}CordovaFetchLocalFileAsArrayBuffer(filename){return this._CordovaFetchLocalFileAs(filename,\"buffer\")}GetMediaFileUrl(filename){if(this._fileStructure===\"flat\")filename=filename.toLowerCase();filename=this._mediaSubfolder+filename;if(this._HasLocalUrlBlob(filename))return this.GetLocalUrlAsBlobUrl(filename);\nelse return filename}GetProjectFileUrl(url){if(C3.IsAbsoluteURL(url))return Promise.resolve(url);else if(this._HasLocalUrlBlob(url))return Promise.resolve(this.GetLocalUrlAsBlobUrl(url));else if(this._isCordova&&this._isFileProtocol)return this.CordovaFetchLocalFileAsBlobURL(url);else{if(this._fileStructure===\"flat\")url=url.toLowerCase();return Promise.resolve(url)}}GetProjectFileIframeUrl(url){if(C3.IsAbsoluteURL(url))return Promise.resolve(url);else{const queryIndex=url.indexOf(\"?\");const queryStr=\nqueryIndex===-1?\"\":url.substr(queryIndex);const urlNoSearch=queryIndex===-1?url:url.substr(0,queryIndex);if(this._HasLocalUrlBlob(urlNoSearch)){let localUrl=this._localBlobSWUrls.get(urlNoSearch)||this.GetLocalUrlAsBlobUrl(urlNoSearch);if(!localUrl.startsWith(\"blob:\")&&this._swClientId){const asUrl=new URL(localUrl);const params=new URLSearchParams(queryStr);params.set(\"__c3_client_id\",this._swClientId);asUrl.search=params.toString();localUrl=asUrl.toString()}return Promise.resolve(localUrl)}else if(this._isCordova&&\nthis._isFileProtocol)return this.CordovaFetchLocalFileAsBlobURL(urlNoSearch);else{if(this._fileStructure===\"flat\")url=url.toLowerCase();return Promise.resolve(url)}}}LoadProjectFileUrl(url){return this.GetProjectFileUrl(url)}LoadImage(opts){if(opts.loadPolicy&&!VALID_LOAD_POLICIES.has(opts.loadPolicy))throw new Error(\"invalid load policy\");let asset=this._assetsByUrl.get(opts.url);if(asset)return asset;asset=C3.New(C3.ImageAsset,this,{url:opts.url,size:opts.size||0,loadPolicy:opts.loadPolicy||this._defaultLoadPolicy});\nthis._allAssets.push(asset);this._assetsByUrl.set(asset.GetURL(),asset);if(!this._hasFinishedInitialLoad){this._totalAssetSizeToLoad+=asset.GetSize();this._loadPromises.push(asset.Load().then(()=>this._AddLoadedSize(asset.GetSize())))}return asset}async WaitForAllToLoad(){try{await Promise.all(this._loadPromises);this._lastLoadProgress=1}catch(err){console.error(\"Error loading: \",err);this._hasHadErrorLoading=true;this._FireLoadingProgressEvent()}}SetInitialLoadFinished(){this._hasFinishedInitialLoad=\ntrue}HasHadErrorLoading(){return this._hasHadErrorLoading}_AddLoadedSize(s){this._assetSizeLoaded+=s;this._loadingRateLimiter.Call()}_FireLoadingProgressEvent(){const event=C3.New(C3.Event,\"loadingprogress\");this._lastLoadProgress=C3.clamp(this._assetSizeLoaded/this._totalAssetSizeToLoad,0,1);event.progress=this._lastLoadProgress;this._runtime.Dispatcher().dispatchEvent(event)}GetLoadProgress(){return this._lastLoadProgress}_SetWebFonts(arr){C3.shallowAssignArray(this._webFonts,arr);if(this._webFonts.length)this._loadPromises.push(this._LoadWebFonts())}async _LoadWebFonts(){const promises=\n[];const loadFontsForDOM=[];for(const [name,filename,size]of this._webFonts){this._totalAssetSizeToLoad+=size;promises.push(this._LoadWebFont(name,filename,loadFontsForDOM).then(()=>this._AddLoadedSize(size)))}await Promise.all(promises);if(this._runtime.IsInWorker()&&loadFontsForDOM.length>0)await this._runtime.PostComponentMessageToDOMAsync(\"runtime\",\"load-webfonts\",{\"webfonts\":loadFontsForDOM})}async _LoadWebFont(name,filename,loadFontsForDOM){try{const url=await this.GetProjectFileUrl(filename);\nconst fontFace=new FontFace(name,`url('${url}')`);if(this._runtime.IsInWorker())self.fonts.add(fontFace);else document.fonts.add(fontFace);await fontFace.load();if(this._runtime.IsInWorker())loadFontsForDOM.push({name,url})}catch(err){console.warn(`[C3 runtime] Failed to load web font '${name}': `,err)}}IsAudioFormatSupported(type){return!!this._supportedAudioFormats[type]}_SetAudioFiles(arr,preloadSounds){this._preloadSounds=!!preloadSounds;for(const [fileName,projectFilesInfo,isMusic]of arr)this._audioFiles.set(fileName,\n{fileName,formats:projectFilesInfo.map(si=>({type:si[0],fileExtension:si[1],fullName:fileName+si[1],fileSize:si[2]})),isMusic})}GetPreferredAudioFile(namePart){if(this._fileStructure===\"flat\")namePart=namePart.toLowerCase();const info=this._audioFiles.get(namePart);if(!info)return null;let webMOpusFile=null;for(const formatInfo of info.formats){if(!webMOpusFile&&formatInfo.type===\"audio/webm; codecs=opus\")webMOpusFile=formatInfo;if(this.IsAudioFormatSupported(formatInfo.type))return formatInfo}return webMOpusFile}GetProjectAudioFileUrl(namePart){const formatInfo=\nthis.GetPreferredAudioFile(namePart);if(!formatInfo)return null;return{url:this.GetMediaFileUrl(formatInfo.fullName),type:formatInfo.type}}GetAudioToPreload(){if(this._preloadSounds){const ret=[];for(const info of this._audioFiles.values()){if(info.isMusic)continue;const formatInfo=this.GetPreferredAudioFile(info.fileName);if(!formatInfo)continue;ret.push({originalUrl:info.fileName,url:this.GetMediaFileUrl(formatInfo.fullName),type:formatInfo.type,fileSize:formatInfo.fileSize})}return ret}else return[]}GetIAssetManager(){return this._iAssetManager}async LoadScripts(...urls){const scriptUrls=\nawait Promise.all(urls.map(url=>this.GetProjectFileUrl(url)));if(this._runtime.IsInWorker())if(urls.length===1){const url=urls[0];await self.c3_import((C3.IsRelativeURL(url)?\"./\":\"\")+url)}else{const scriptStr=urls.map(url=>`import \"${C3.IsRelativeURL(url)?\"./\":\"\"}${url}\";`).join(\"\\n\");const blobUrl=URL.createObjectURL(new Blob([scriptStr],{type:\"application/javascript\"}));await self.c3_import(blobUrl)}else await Promise.all(scriptUrls.map(url=>AddScript(url)))}async CompileWebAssembly(url){if(WebAssembly.compileStreaming){const fetchUrl=\nawait this.GetProjectFileUrl(url);return await WebAssembly.compileStreaming(fetch(fetchUrl))}else{const arrayBuffer=await C3.FetchArrayBuffer(url);return await WebAssembly.compile(arrayBuffer)}}async LoadStyleSheet(url){const fetchUrl=await this.GetProjectFileUrl(url);return await this._runtime.PostComponentMessageToDOMAsync(\"runtime\",\"add-stylesheet\",{\"url\":fetchUrl})}};\n\n}\n\n// assets/asset.js\n{\n'use strict';const C3=self.C3;\nC3.Asset=class Asset extends C3.DefendedBase{constructor(assetManager,opts){super();this._assetManager=assetManager;this._runtime=assetManager.GetRuntime();this._url=opts.url||\"\";this._size=opts.size;this._loadPolicy=opts.loadPolicy;this._blob=opts.blob||null;this._isLoaded=!!this._blob;this._loadPromise=null}Release(){this._loadPromise=null;this._assetManager=null;this._runtime=null;this._blob=null}GetURL(){return this._url}GetSize(){return this._size}Load(){if(this._loadPolicy===\"local\"||this._blob){this._isLoaded=\ntrue;return Promise.resolve()}if(this._loadPromise)return this._loadPromise;this._loadPromise=this._assetManager.FetchBlob(this._url,this._loadPolicy).then(blob=>{this._isLoaded=true;this._loadPromise=null;this._blob=blob;return blob}).catch(err=>console.error(\"Error loading resource: \",err));return this._loadPromise}IsLoaded(){return this._isLoaded}GetBlob(){if(this._blob)return Promise.resolve(this._blob);if(this._loadPromise)return this._loadPromise;return this._assetManager.FetchBlob(this._url,\nthis._loadPolicy)}};\n\n}\n\n// assets/imageAsset.js\n{\n'use strict';const C3=self.C3;const promiseThrottle=new C3.PromiseThrottle;const allImageAssets=new Set;\nC3.ImageAsset=class ImageAsset extends C3.Asset{constructor(assetManager,opts){super(assetManager,opts);this._texturePromise=null;this._webglTexture=null;this._refCount=0;this._imageWidth=-1;this._imageHeight=-1;allImageAssets.add(this)}Release(){this.ReleaseTexture();if(this._refCount!==0)throw new Error(\"released image asset which still has texture references\");this._texturePromise=null;allImageAssets.delete(this);super.Release()}static OnRendererContextLost(){for(const imageAsset of allImageAssets){imageAsset._texturePromise=\nnull;imageAsset._webglTexture=null;imageAsset._refCount=0}}LoadStaticTexture(renderer,opts){opts=opts||{};this._refCount++;if(this._webglTexture)return Promise.resolve(this._webglTexture);if(this._texturePromise)return this._texturePromise;opts.anisotropy=this._runtime.GetCanvasManager().GetTextureAnisotropy();this._texturePromise=this.GetBlob().then(blob=>promiseThrottle.Add(()=>renderer.CreateStaticTextureAsync(blob,opts).then(texture=>{this._texturePromise=null;if(this._refCount===0){renderer.DeleteTexture(texture);\nreturn null}this._webglTexture=texture;this._imageWidth=texture.GetWidth();this._imageHeight=texture.GetHeight();return this._webglTexture}))).catch(err=>{console.error(\"Failed to load texture: \",err);throw err;});return this._texturePromise}ReleaseTexture(){if(this._refCount<=0)throw new Error(\"texture released too many times\");this._refCount--;if(this._refCount===0&&this._webglTexture){const renderer=this._webglTexture.GetRenderer();renderer.DeleteTexture(this._webglTexture);this._webglTexture=\nnull}}GetTexture(){return this._webglTexture}GetWidth(){return this._imageWidth}GetHeight(){return this._imageHeight}async LoadToDrawable(){const blob=await this.GetBlob();if(C3.Supports.ImageBitmap)return await createImageBitmap(blob);else return await C3.BlobToImage(blob)}};\n\n}\n\n// layouts/renderCell.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;function SortByInstLastCachedZIndex(a,b){return a.GetWorldInfo()._GetLastCachedZIndex()-b.GetWorldInfo()._GetLastCachedZIndex()}\nC3.RenderCell=class RenderCell extends C3.DefendedBase{constructor(grid,x,y){super();this._grid=grid;this._x=x;this._y=y;this._instances=[];this._isSorted=true;this._pendingRemoval=new Set;this._isAnyPendingRemoval=false}Release(){C3.clearArray(this._instances);this._pendingRemoval.clear();this._grid=null}Reset(){C3.clearArray(this._instances);this._isSorted=true;this._pendingRemoval.clear();this._isAnyPendingRemoval=false}SetChanged(){this._isSorted=false}IsEmpty(){if(!this._instances.length)return true;\nif(this._instances.length>this._pendingRemoval.size)return false;this._FlushPending();return true}Insert(inst){if(this._pendingRemoval.has(inst)){this._pendingRemoval.delete(inst);if(this._pendingRemoval.size===0)this._isAnyPendingRemoval=false;return}this._instances.push(inst);this._isSorted=this._instances.length===1}Remove(inst){this._pendingRemoval.add(inst);this._isAnyPendingRemoval=true;if(this._pendingRemoval.size>=50)this._FlushPending()}_FlushPending(){if(!this._isAnyPendingRemoval)return;\nif(this._instances.length===this._pendingRemoval.size){this.Reset();return}C3.arrayRemoveAllInSet(this._instances,this._pendingRemoval);this._pendingRemoval.clear();this._isAnyPendingRemoval=false}_EnsureSorted(){if(this._isSorted)return;this._instances.sort(SortByInstLastCachedZIndex);this._isSorted=true}Dump(result){this._FlushPending();this._EnsureSorted();if(this._instances.length)result.push(this._instances)}};\n\n}\n\n// layouts/renderGrid.js\n{\n'use strict';const C3=self.C3;\nC3.RenderGrid=class RenderGrid extends C3.DefendedBase{constructor(cellWidth,cellHeight){super();this._cellWidth=cellWidth;this._cellHeight=cellHeight;this._cells=C3.New(C3.PairMap)}Release(){this._cells.Release();this._cells=null}GetCell(x,y,createIfMissing){let ret=this._cells.Get(x,y);if(ret)return ret;else if(createIfMissing){ret=C3.New(C3.RenderCell,this,x,y);this._cells.Set(x,y,ret);return ret}else return null}XToCell(x){return Math.floor(x/this._cellWidth)}YToCell(y){return Math.floor(y/this._cellHeight)}Update(inst,\noldRange,newRange){if(oldRange)for(let x=oldRange.getLeft(),lenx=oldRange.getRight();x<=lenx;++x)for(let y=oldRange.getTop(),leny=oldRange.getBottom();y<=leny;++y){if(newRange&&newRange.containsPoint(x,y))continue;const cell=this.GetCell(x,y,false);if(!cell)continue;cell.Remove(inst);if(cell.IsEmpty())this._cells.Delete(x,y)}if(newRange)for(let x=newRange.getLeft(),lenx=newRange.getRight();x<=lenx;++x)for(let y=newRange.getTop(),leny=newRange.getBottom();y<=leny;++y){if(oldRange&&oldRange.containsPoint(x,\ny))continue;this.GetCell(x,y,true).Insert(inst)}}QueryRange(rc,result){let x=this.XToCell(rc.getLeft());const ystart=this.YToCell(rc.getTop());const lenx=this.XToCell(rc.getRight());const leny=this.YToCell(rc.getBottom());for(;x<=lenx;++x)for(let y=ystart;y<=leny;++y){const cell=this.GetCell(x,y,false);if(!cell)continue;cell.Dump(result)}}MarkRangeChanged(rc){let x=rc.getLeft();const ystart=rc.getTop();const lenx=rc.getRight();const leny=rc.getBottom();for(;x<=lenx;++x)for(let y=ystart;y<=leny;++y){const cell=\nthis.GetCell(x,y,false);if(!cell)continue;cell.SetChanged()}}};\n\n}\n\n// layouts/layer.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;const tmpRect=new C3.Rect;const tmpQuad=new C3.Quad;const renderCellArr=[];const tmpDestRect=new C3.Rect;const tmpSrcRect=new C3.Rect;const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const vec4=glMatrix.vec4;const mat4=glMatrix.mat4;const tempMat4=mat4.create();const tempVec3=vec3.create();const tempVec4=vec4.create();const camVector=vec3.create();const lookVector=vec3.create();const upVector=vec3.create();const tempVec2=C3.New(C3.Vector2);\nconst tempRect=C3.New(C3.Rect);function SortByInstLastCachedZIndex(a,b){return a.GetWorldInfo()._GetLastCachedZIndex()-b.GetWorldInfo()._GetLastCachedZIndex()}function SortByInstZElevation(a,b){return a.GetWorldInfo().GetZElevation()-b.GetWorldInfo().GetZElevation()}const tempInstanceList1=[];const tempInstanceList2=[];const tempInstancesByCameraDist=[];\nconst DEFAULT_LAYER_OPTIONS={name:\"\",sid:-1,isDynamic:false,isVisible:true,isInteractive:true,backgroundColor:[1,1,1,1],isTransparent:true,parallax:[1,1],opacity:1,isForceOwnTexture:false,renderAs3d:false,useCameraDistanceDrawOrder:false,useRenderCells:false,scaleRate:1,blendMode:0,zElevation:0,initialInstancesData:[],effectListData:[],subLayersData:[]};\nC3.Layer=class Layer extends C3.DefendedBase{constructor(layout,parentLayer,opts){super();opts=Object.assign({},DEFAULT_LAYER_OPTIONS,opts);this._layout=layout;this._runtime=layout.GetRuntime();this._parentLayer=parentLayer;this._name=opts.name;this._index=-1;this._sid=opts.sid;this._isDynamic=!!opts.isDynamic;this._isVisible=!!opts.isVisible;this._isInteractive=!!opts.isInteractive;this._backgroundColor=C3.New(C3.Color);this._backgroundColor.setFromJSON(opts.backgroundColor);this._isTransparent=\n!!opts.isTransparent;this._parallaxX=opts.parallax[0];this._parallaxY=opts.parallax[1];this._color=C3.New(C3.Color,1,1,1,opts.opacity);this._premultipliedColor=C3.New(C3.Color);this._isForceOwnTexture=!!opts.isForceOwnTexture;this._renderAs3d=!!opts.renderAs3d;this._useCameraDistanceDrawOrder=!!opts.useCameraDistanceDrawOrder;this._useRenderCells=!!opts.useRenderCells;this._scaleRate=opts.scaleRate;this._blendMode=opts.blendMode;this._curRenderTarget=null;this._scale=1;this._zElevation=opts.zElevation;\nthis._angle=0;this._scrollX=0;this._scrollY=0;this._hasOwnScrollPosition=false;this._viewport=C3.New(C3.Rect);this._viewportZ0=C3.New(C3.Rect);this._viewport3D=C3.New(C3.Rect);this._isViewportChanged=true;this._projectionMatrix=mat4.create();this._isProjectionMatrixChanged=true;this._modelViewMatrix=mat4.create();this._isMVMatrixChanged=true;this._viewFrustum=C3.New(C3.Gfx.ViewFrustum);this._isViewFrustumChanged=true;this._startupInitialInstances=[];this._initialInstancesData=opts.initialInstancesData;\nthis._initialInstances=[];this._createdGlobalUids=[];this._initialUIDsToInstanceData=new Map;this._instances=[];this._zIndicesUpToDate=false;this._anyInstanceZElevated=false;const canvasManager=this._runtime.GetCanvasManager();this._effectList=C3.New(C3.EffectList,this,opts.effectListData);this._effectChain=C3.New(C3.Gfx.EffectChain,canvasManager.GetEffectChainManager(),{drawContent:(renderer,effectChain)=>{const layer=effectChain.GetContentObject();const renderSurface=layer.GetRenderTarget();renderer.SetColor(layer.GetPremultipliedColor());\nrenderer.DrawRenderTarget(renderSurface);renderer.InvalidateRenderTarget(renderSurface);canvasManager.ReleaseAdditionalRenderTarget(renderSurface)},getShaderParameters:index=>this.GetEffectList()._GetEffectChainShaderParametersForIndex(index)});this._needsRebuildEffectChainSteps=true;this._wasDefaultColor=true;this._renderGrid=null;this._lastRenderList=[];this._isRenderListUpToDate=false;this._lastRenderCells=C3.New(C3.Rect,0,0,-1,-1);this._curRenderCells=C3.New(C3.Rect,0,0,-1,-1);this._iLayer=new self.ILayer(this);\nthis._UpdatePremultipliedColor();if(this.UsesRenderCells())this._renderGrid=C3.New(C3.RenderGrid,this._runtime.GetOriginalViewportWidth(),this._runtime.GetOriginalViewportHeight());this._subLayers=opts.subLayersData.map(ld=>C3.Layer.CreateFromExportData(this._layout,this,ld))}_InitInitialInstances(){for(const instData of this._initialInstancesData){const objectClass=this._runtime.GetObjectClassByIndex(instData[1]);this._layout._AddInitialObjectClass(objectClass);if(!objectClass.GetDefaultInstanceData()){objectClass.SetDefaultInstanceData(instData);\nobjectClass._SetDefaultLayerIndex(this._index)}this._initialInstances.push(instData);this._initialUIDsToInstanceData.set(instData[2],instData)}C3.shallowAssignArray(this._startupInitialInstances,this._initialInstances);this._initialInstancesData=null}static CreateFromExportData(layout,parentLayer,data){return C3.New(C3.Layer,layout,parentLayer,{name:data[0],sid:data[2],isVisible:data[3],isInteractive:data[13],backgroundColor:data[4].map(x=>x/255),isTransparent:data[5],parallax:[data[6],data[7]],opacity:data[8],\nisForceOwnTexture:data[9],renderAs3d:data[17],useCameraDistanceDrawOrder:data[18],useRenderCells:data[10],scaleRate:data[11],blendMode:data[12],zElevation:data[16],initialInstancesData:data[14],effectListData:data[15],subLayersData:data[19]})}Release(){for(const subLayer of this._subLayers)subLayer.Release();C3.clearArray(this._subLayers);for(const inst of this._instances)this._runtime.DestroyInstance(inst);C3.clearArray(this._instances);this._iLayer=null;this._parentLayer=null;this._layout=null;\nthis._runtime=null}GetInitialInstanceData(uid){return this._initialUIDsToInstanceData.get(uid)}CreateInitialInstances(createdInstances){const isFirstVisit=this._layout.IsFirstVisit();let k=0;const initialInstances=this._initialInstances;for(let i=0,len=initialInstances.length;i<len;++i){const instData=initialInstances[i];const objectClass=this._runtime.GetObjectClassByIndex(instData[1]);let keep=true;if(!objectClass.HasPersistBehavior()||isFirstVisit){const inst=this._runtime.CreateInstanceFromData(instData,\nthis,true);createdInstances.push(inst);if(objectClass.IsGlobal()){keep=false;this._createdGlobalUids.push(inst.GetUID())}}if(keep){initialInstances[k]=initialInstances[i];++k}}C3.truncateArray(initialInstances,k);this._runtime.FlushPendingInstances();this.SetZIndicesChanged()}_AddInstance(inst,addToGrid){if(!inst.GetPlugin().IsWorldType())throw new Error(\"instance is not of world type\");const wi=inst.GetWorldInfo();if(wi.GetLayer()!==this)throw new Error(\"instance added to wrong layer\");this._instances.push(inst);\nif(wi.GetZElevation()!==0)this._anyInstanceZElevated=true;if(addToGrid&&this.UsesRenderCells())inst.GetWorldInfo().SetBboxChanged();this.SetZIndicesChanged()}_MaybeAddInstance(inst){if(this._instances.includes(inst))return;this._instances.push(inst);if(inst.GetWorldInfo().GetZElevation()!==0)this._anyInstanceZElevated=true;this.SetZIndicesChanged()}_PrependInstance(inst,addToGrid){const wi=inst.GetWorldInfo();if(wi.GetLayer()!==this)throw new Error(\"instance added to wrong layer\");this._instances.unshift(inst);\nif(wi.GetZElevation()!==0)this._anyInstanceZElevated=true;this.SetZIndicesChanged();if(addToGrid&&this.UsesRenderCells())inst.GetWorldInfo().SetBboxChanged()}_RemoveInstance(inst,removeFromGrid){const index=this._instances.indexOf(inst);if(index<0)return;if(removeFromGrid&&this.UsesRenderCells())inst.GetWorldInfo()._RemoveFromRenderCells();this._instances.splice(index,1);this.SetZIndicesChanged();this._MaybeResetAnyInstanceZElevatedFlag()}_SetAnyInstanceZElevated(){this._anyInstanceZElevated=true}_MaybeResetAnyInstanceZElevatedFlag(){if(this._instances.length===\n0)this._anyInstanceZElevated=false}_SortInstancesByLastCachedZIndex(isPersistMode){if(isPersistMode){const assignedZIndices=new Set;for(const inst of this._instances){const cachedZIndex=inst.GetWorldInfo()._GetLastCachedZIndex();if(cachedZIndex>=0)assignedZIndices.add(cachedZIndex)}let index=-1;for(const inst of this._instances){const wi=inst.GetWorldInfo();if(wi._GetLastCachedZIndex()>=0)continue;++index;while(assignedZIndices.has(index))++index;wi._SetZIndex(index)}}this._instances.sort(SortByInstLastCachedZIndex)}_Start(){}_End(){for(const inst of this._instances)if(!inst.GetObjectClass().IsGlobal())this._runtime.DestroyInstance(inst);\nthis._runtime.FlushPendingInstances();C3.clearArray(this._instances);this._anyInstanceZElevated=false;this.SetZIndicesChanged()}RecreateInitialObjects(objectClass,rc,offsetX,offsetY,createHierarchy){const eventSheetManager=this._runtime.GetEventSheetManager();const allObjectClasses=this._runtime.GetAllObjectClasses();const isFamily=objectClass.IsFamily();const ret=[];for(const instData of this._initialInstances){const worldData=instData[0];const x=worldData[0];const y=worldData[1];if(!rc.containsPoint(x,\ny))continue;const objectType=allObjectClasses[instData[1]];if(objectType!==objectClass)if(isFamily){if(!objectClass.FamilyHasMember(objectType))continue}else continue;let createOnLayer=this;const runningLayout=this._runtime.GetCurrentLayout();if(this.GetLayout()!==runningLayout){createOnLayer=runningLayout.GetLayerByName(this.GetName());if(!createOnLayer)createOnLayer=runningLayout.GetLayerByIndex(this.GetIndex())}const inst=this._runtime.CreateInstanceFromData(instData,createOnLayer,false,undefined,\nundefined,false,createHierarchy);createOnLayer.SortAndAddInstancesByZIndex(inst);const wi=inst.GetWorldInfo();wi.OffsetXY(offsetX,offsetY);wi.SetBboxChanged();eventSheetManager.BlockFlushingInstances(true);inst._TriggerOnCreatedOnSelfAndRelated();eventSheetManager.BlockFlushingInstances(false);ret.push(inst)}return ret}GetInstanceCount(){return this._instances.length}GetLayout(){return this._layout}GetName(){return this._name}_SetIndex(i){this._index=i}GetIndex(){return this._index}_GetSiblingIndex(){let ret=\n-1;const parentLayer=this.GetParentLayer();if(parentLayer)ret=parentLayer.GetSubLayers().indexOf(this);else ret=this.GetLayout()._GetRootLayers().indexOf(this);return ret}GetSID(){return this._sid}GetRuntime(){return this._runtime}IsDynamic(){return this._isDynamic}HasAnyDynamicParentLayer(){for(const parent of this.parentLayers())if(parent.IsDynamic())return true;return false}GetDevicePixelRatio(){return this._runtime.GetDevicePixelRatio()}GetEffectList(){return this._effectList}GetEffectChain(){this._MaybeRebuildEffectChainSteps();\nreturn this._effectChain}_MaybeRebuildEffectChainSteps(){const isDefaultColor=this.HasDefaultColor();if(!this._needsRebuildEffectChainSteps&&isDefaultColor===this._wasDefaultColor&&!this._effectChain.NeedsRebuild())return;const activeEffectTypes=this.GetEffectList().GetActiveEffectTypes();this._effectChain.BuildSteps(activeEffectTypes.map(e=>e.GetShaderProgram()),{indexMap:activeEffectTypes.map(e=>e.GetIndex()),forcePreDraw:!isDefaultColor,useFullSurface:true});this._needsRebuildEffectChainSteps=\nfalse;this._wasDefaultColor=isDefaultColor}UpdateActiveEffects(){this.GetEffectList().UpdateActiveEffects();this._needsRebuildEffectChainSteps=true}UsesRenderCells(){return this._useRenderCells&&!this._useCameraDistanceDrawOrder}GetRenderGrid(){return this._renderGrid}SetRenderListStale(){this._isRenderListUpToDate=false}IsVisible(){for(const layer of this.selfAndParentLayers())if(!layer._IsVisibleFlagSet())return false;return true}_IsVisibleFlagSet(){return this._isVisible}SetVisible(v){v=!!v;if(this._isVisible===\nv)return;this._isVisible=v;this._runtime.UpdateRender()}SetInteractive(i){this._isInteractive=!!i}IsInteractive(){return this._isInteractive}IsSelfAndParentsInteractive(){for(const layer of this.selfAndParentLayers())if(!layer.IsInteractive())return false;return true}SetOwnScrollPositionEnabled(e){e=!!e;if(this._hasOwnScrollPosition===e)return;this._hasOwnScrollPosition=e;if(e){const layout=this.GetLayout();this._scrollX=layout.GetScrollX();this._scrollY=layout.GetScrollY()}this._SetMVMatrixChanged();\nthis._runtime.UpdateRender()}IsOwnScrollPositionEnabled(){return this._hasOwnScrollPosition}SetScrollX(x){const layout=this.GetLayout();const lbound=layout.GetScrollLeftBound();const rbound=layout.GetScrollRightBound();if(x>rbound)x=rbound;if(x<lbound)x=lbound;if(this._scrollX!==x){this._scrollX=x;if(this.IsOwnScrollPositionEnabled()){this._SetMVMatrixChanged();this._runtime.UpdateRender()}}}SetScrollY(y){const layout=this.GetLayout();const ubound=layout.GetScrollTopBound();const bbound=layout.GetScrollBottomBound();\nif(y>bbound)y=bbound;if(y<ubound)y=ubound;if(this._scrollY!==y){this._scrollY=y;if(this.IsOwnScrollPositionEnabled()){this._SetMVMatrixChanged();this._runtime.UpdateRender()}}}GetScrollX(){if(this.IsOwnScrollPositionEnabled())return this._scrollX;else return this.GetLayout().GetScrollX()}GetScrollY(){if(this.IsOwnScrollPositionEnabled())return this._scrollY;else return this.GetLayout().GetScrollY()}GetViewport(){this._MaybeUpdateViewport();return this._viewport}_GetViewportZ0(){this._MaybeUpdateViewport();\nreturn this._viewportZ0}GetViewport3D(){this._MaybeUpdateViewport();return this._viewport3D}_GetVanishingPoint(){const layout=this.GetLayout();return[layout.GetVanishingPointX(),layout.GetVanishingPointY()]}GetDefaultCameraZ(viewH){return this._runtime.GetDefaultCameraZ(viewH)}GetViewportForZ(z,outRect){const viewportZ0=this._GetViewportZ0();if(z===0)outRect.copy(viewportZ0);else{let midX=viewportZ0.midX();let midY=viewportZ0.midY();const scaleFactor=this.Get2DScaleFactorToZ(z);const viewW=viewportZ0.width()/\nscaleFactor;const viewH=viewportZ0.height()/scaleFactor;const [vpX,vpY]=this._GetVanishingPoint();if(vpX!==.5||vpY!==.5){const cameraZ=this.GetCameraZ();const runtime=this._runtime;const zf=this.GetDefaultCameraZ()/cameraZ;let camOffX=(vpX-.5)*runtime.GetViewportWidth()/zf;let camOffY=(vpY-.5)*runtime.GetViewportHeight()/zf;const a=this.GetAngle();if(a!==0){tempVec2.set(camOffX,camOffY);tempVec2.rotate(a);camOffX=tempVec2.getX();camOffY=tempVec2.getY()}const zProg=C3.unlerp(cameraZ,0,z);midX+=C3.lerp(camOffX,\n0,zProg);midY+=C3.lerp(camOffY,0,zProg)}outRect.set(midX-viewW/2,midY-viewH/2,midX+viewW/2,midY+viewH/2)}}GetOpacity(){return this._color.getA()}SetOpacity(o){o=C3.clamp(o,0,1);if(this._color.getA()===o)return;this._color.setA(o);this._UpdatePremultipliedColor();this._runtime.UpdateRender()}_UpdatePremultipliedColor(){this._premultipliedColor.copy(this._color);this._premultipliedColor.premultiply()}GetPremultipliedColor(){return this._premultipliedColor}HasDefaultColor(){return this._color.equalsRgba(1,\n1,1,1)}GetScaleRate(){return this._scaleRate}SetScaleRate(r){if(this._scaleRate===r)return;this._scaleRate=r;this._SetMVMatrixChanged();this._runtime.UpdateRender()}GetParallaxX(){return this._parallaxX}GetParallaxY(){return this._parallaxY}SetParallax(px,py){if(this._parallaxX===px&&this._parallaxY===py)return;this._parallaxX=px;this._parallaxY=py;this._SetMVMatrixChanged();this._runtime.UpdateRender();if(this._parallaxX!==1||this._parallaxY!==1)for(const inst of this._instances)inst.GetObjectClass()._SetAnyInstanceParallaxed(true)}SetParallaxX(px){this.SetParallax(px,\nthis.GetParallaxY())}SetParallaxY(py){this.SetParallax(this.GetParallaxX(),py)}SetZElevation(z){if(this._zElevation===z)return;this._zElevation=z;this._runtime.UpdateRender()}GetZElevation(){return this._zElevation}SetAngle(a){a=C3.clampAngle(a);if(this._angle===a)return;this._angle=a;this._SetMVMatrixChanged();this._runtime.UpdateRender()}GetAngle(){return C3.clampAngle(this._layout.GetAngle()+this._angle)}GetOwnAngle(){return this._angle}HasInstances(){return this._instances.length>0}_GetInstances(){return this._instances}_GetInstancesInDrawOrder(){if(this.RendersIn3DMode()&&\nthis._useCameraDistanceDrawOrder){C3.shallowAssignArray(tempInstancesByCameraDist,this._GetInstances());tempInstancesByCameraDist.sort((a,b)=>this._SortInstancesByCameraDistance(a,b));return tempInstancesByCameraDist}else return this._GetInstances()}_AppendAllInstancesIncludingSubLayersInDrawOrder(arr){C3.appendArray(arr,this._GetInstancesInDrawOrder());for(const subLayer of this._subLayers)if(subLayer.IsVisible()&&subLayer.GetOpacity()>0)subLayer._AppendAllInstancesIncludingSubLayersInDrawOrder(arr)}_SortInstancesByCameraDistance(a,\nb){const camVec=this.GetLayout().Get3DCameraPosition();const camX=camVec[0];const camY=camVec[1];const camZ=camVec[2];const wiA=a.GetWorldInfo();const wiB=b.GetWorldInfo();const dxA=wiA.GetX()-camX;const dyA=wiA.GetY()-camY;const dzA=wiA.GetZElevation()-camZ;const dxB=wiB.GetX()-camX;const dyB=wiB.GetY()-camY;const dzB=wiB.GetZElevation()-camZ;return dxB*dxB+dyB*dyB+dzB*dzB-(dxA*dxA+dyA*dyA+dzA*dzA)}GetBackgroundColor(){return this._backgroundColor}IsTransparent(){return this._isTransparent}SetTransparent(t){t=\n!!t;if(this._isTransparent===t)return;this._isTransparent=t;this._runtime.UpdateRender()}IsForceOwnTexture(){return this._isForceOwnTexture}SetForceOwnTexture(f){f=!!f;if(this._isForceOwnTexture===f)return;this._isForceOwnTexture=f;this._runtime.UpdateRender()}RendersIn2DMode(){return!this.GetRuntime().Uses3DFeatures()||!this._renderAs3d}RendersIn3DMode(){return!this.RendersIn2DMode()}Has3DCamera(){return this.RendersIn3DMode()&&this.GetLayout().Is3DCameraEnabled()}SelfAndAllSubLayersHave3DCamera(){if(!this.Has3DCamera())return false;\nfor(const subLayer of this._subLayers)if(!subLayer.SelfAndAllSubLayersHave3DCamera())return false;return true}SetBlendMode(bm){if(this._blendMode===bm)return;this._blendMode=bm;this._runtime.UpdateRender()}GetBlendMode(){return this._blendMode}IsRootLayer(){return!this._parentLayer}GetParentLayer(){return this._parentLayer}_SetParentLayer(layer){this._parentLayer=layer}GetSubLayers(){return this._subLayers}HasAnySubLayers(){return this._subLayers.length>0}_AddSubLayer(layer,atTop=true){if(atTop)this._subLayers.push(layer);\nelse this._subLayers.unshift(layer)}_InsertSubLayer(layer,insertBy,isAbove){let i=this._subLayers.indexOf(insertBy);if(i===-1)throw new Error(\"cannot find layer to insert by\");if(isAbove)++i;this._subLayers.splice(i,0,layer)}_RemoveSubLayer(layer){const i=this._subLayers.indexOf(layer);if(i===-1)throw new Error(\"cannot find layer to remove\");this._subLayers.splice(i,1)}HasAnyVisibleSubLayer(){for(const subLayer of this._subLayers)if(subLayer.ShouldDraw())return true;return false}*selfAndAllSubLayers(){for(const subLayer of this._subLayers)yield*subLayer.selfAndAllSubLayers();\nyield this}*parentLayers(){let parentLayer=this.GetParentLayer();while(parentLayer){yield parentLayer;parentLayer=parentLayer.GetParentLayer()}}*selfAndParentLayers(){yield this;yield*this.parentLayers()}HasParentLayer(layer){for(const p of this.parentLayers())if(p===layer)return true;return false}IsTransformCompatibleWith(otherLayer){return this===otherLayer||this._parallaxX===otherLayer._parallaxX&&this._parallaxY===otherLayer._parallaxY&&this._scale===otherLayer._scale&&this._scaleRate===otherLayer._scaleRate&&\nthis._angle===otherLayer._angle&&this.GetScrollX()===otherLayer.GetScrollX()&&this.GetScrollY()===otherLayer.GetScrollY()}SaveTransform(){return{\"parallaxX\":this.GetParallaxX(),\"parallaxY\":this.GetParallaxY(),\"scale\":this.GetOwnScale(),\"scaleRate\":this.GetScaleRate(),\"angle\":this.GetOwnAngle(),\"hasOwnScroll\":this.IsOwnScrollPositionEnabled(),\"scrollX\":this.GetScrollX(),\"scrollY\":this.GetScrollY()}}RestoreTransform(t){this.SetParallax(t[\"parallaxX\"],t[\"parallaxY\"]);this.SetOwnScale(t[\"scale\"]);this.SetScaleRate(t[\"scaleRate\"]);\nthis.SetAngle(t[\"angle\"]);this.SetOwnScrollPositionEnabled(t[\"hasOwnScroll\"]);this.SetScrollX(t[\"scrollX\"]);this.SetScrollY(t[\"scrollY\"]);this._MaybeUpdateViewport()}_RemoveAllInstancesInSet(s){if(s.size===0)return;const numRemoved=C3.arrayRemoveAllInSet(this._instances,s);if(numRemoved>0){this._MaybeResetAnyInstanceZElevatedFlag();this.SetZIndicesChanged()}}SetZIndicesChanged(){this._zIndicesUpToDate=false;this._isRenderListUpToDate=false}_UpdateZIndices(){if(this._zIndicesUpToDate)return;this._instances.sort(SortByInstZElevation);\nif(this.UsesRenderCells())for(let i=0,len=this._instances.length;i<len;++i){const wi=this._instances[i].GetWorldInfo();wi._SetZIndex(i);this._renderGrid.MarkRangeChanged(wi.GetRenderCellRange())}else for(let i=0,len=this._instances.length;i<len;++i)this._instances[i].GetWorldInfo()._SetZIndex(i);this._zIndicesUpToDate=true}MoveInstanceAdjacent(inst,other,isAfter){const instWi=inst.GetWorldInfo();const otherWi=other.GetWorldInfo();if(instWi.GetLayer()!==this||otherWi.GetLayer()!==this)throw new Error(\"can't arrange Z order unless both objects on this layer\");\nconst myZ=instWi.GetZIndex();let insertZ=otherWi.GetZIndex();if(myZ===insertZ+(isAfter?1:-1))return false;C3.arrayRemove(this._instances,myZ);if(myZ<insertZ)insertZ--;if(isAfter)insertZ++;if(insertZ===this._instances.length)this._instances.push(inst);else this._instances.splice(insertZ,0,inst);this.SetZIndicesChanged();return true}_MergeSortedZArrays(a,b){const ret=[];let i=0,j=0,lena=a.length,lenb=b.length;while(i<lena&&j<lenb){const ai=a[i];const bj=b[j];if(ai.GetWorldInfo()._GetLastCachedZIndex()<\nbj.GetWorldInfo()._GetLastCachedZIndex()){ret.push(ai);++i}else{ret.push(bj);++j}}for(;i<lena;++i)ret.push(a[i]);for(;j<lenb;++j)ret.push(b[j]);return ret}_MergeAllSortedZArrays_pass(arr){const ret=[];const len=arr.length;for(let i=0;i<len-1;i+=2){const arr1=arr[i];const arr2=arr[i+1];ret.push(this._MergeSortedZArrays(arr1,arr2))}if(len%2===1)ret.push(arr[len-1]);return ret}_MergeAllSortedZArrays(arr){while(arr.length>1)arr=this._MergeAllSortedZArrays_pass(arr);return arr[0]}_GetRenderCellInstancesToDraw(){this._UpdateZIndices();\nC3.clearArray(renderCellArr);this._renderGrid.QueryRange(this.GetViewport(),renderCellArr);if(!renderCellArr.length)return[];if(renderCellArr.length===1)return renderCellArr[0];return this._MergeAllSortedZArrays(renderCellArr)}ShouldDraw(){return this.IsVisible()&&this.GetOpacity()>0&&this._DrawsAnyContentInSelfOrSubLayers()}_DrawsAnyContentInSelfOrSubLayers(){if(this.HasInstances()||!this.IsTransparent())return true;for(const subLayer of this._subLayers)if(subLayer._DrawsAnyContentInSelfOrSubLayers())return true;\nreturn false}UsesOwnTexture(){return this.IsForceOwnTexture()||!this.HasDefaultColor()||this.GetBlendMode()!==0||this._effectList.HasAnyActiveEffect()}SelfOrAnySubLayerUsesOwnTexture(){if(this.UsesOwnTexture())return true;for(const subLayer of this._subLayers)if(subLayer.SelfOrAnySubLayerUsesOwnTexture())return true;return false}GetRenderTarget(){return this._curRenderTarget}Get2DScaleFactorToZ(z){if(this._layout.IsOrthographicProjection())return 1;else{const camZ=this.GetCameraZ();return camZ/(camZ-\nz)}}GetCameraZ(viewH){return this.GetDefaultCameraZ(viewH)/this.GetNormalScale()}_SetMVMatrixChanged(){this._isMVMatrixChanged=true;this._isViewFrustumChanged=true;this._isViewportChanged=true}_GetModelViewMatrix(renderer){if(this._isMVMatrixChanged){this._CalculateModelViewMatrix(renderer,this._modelViewMatrix,0,0,null);this._isMVMatrixChanged=false}return this._modelViewMatrix}GetCameraPosition(){if(this.Has3DCamera()){const camPos=this.GetLayout().Get3DCameraPosition();return[camPos[0],camPos[1],\ncamPos[2]]}else return this._Get2DCameraPosition()}_Get2DCameraPosition(offX=0,offY=0,viewH=0){const runtime=this._runtime;const layout=this.GetLayout();const parallaxOriginX=runtime.GetParallaxXOrigin();const parallaxOriginY=runtime.GetParallaxYOrigin();let scrollOriginX=(this.GetScrollX()-parallaxOriginX)*this._parallaxX+parallaxOriginX;let scrollOriginY=(this.GetScrollY()-parallaxOriginY)*this._parallaxY+parallaxOriginY;if(runtime.IsPixelRoundingEnabled()){scrollOriginX=Math.round(scrollOriginX);\nscrollOriginY=Math.round(scrollOriginY)}let camX=scrollOriginX+offX;let camY=scrollOriginY+offY;const camZ=layout.IsOrthographicProjection()?this.GetDefaultCameraZ(viewH):this.GetCameraZ(viewH);const [vpX,vpY]=this._GetVanishingPoint();if(vpX!==.5||vpY!==.5){const zf=this.GetDefaultCameraZ(viewH)/camZ;let camOffX=(vpX-.5)*runtime.GetViewportWidth()/zf;let camOffY=(vpY-.5)*runtime.GetViewportHeight()/zf;const a=this.GetAngle();if(a!==0){tempVec2.set(camOffX,camOffY);tempVec2.rotate(a);camOffX=tempVec2.getX();\ncamOffY=tempVec2.getY()}camX+=camOffX;camY+=camOffY}return[camX,camY,camZ]}_CalculateModelViewMatrix(renderer,outMat,offX,offY,viewH){const runtime=this._runtime;const layout=this.GetLayout();if(this.Has3DCamera()){vec3.copy(camVector,layout.Get3DCameraPosition());vec3.copy(lookVector,layout.Get3DCameraLookAt());vec3.copy(upVector,layout.Get3DCameraUpVector());const parallaxOriginX=runtime.GetParallaxXOrigin();const parallaxOriginY=runtime.GetParallaxYOrigin();const lookDx=lookVector[0]-camVector[0];\nconst lookDy=lookVector[1]-camVector[1];const lookDz=lookVector[2]-camVector[2];camVector[0]=(camVector[0]-parallaxOriginX)*this._parallaxX+parallaxOriginX;camVector[1]=(camVector[1]-parallaxOriginY)*this._parallaxY+parallaxOriginY;camVector[2]*=Math.max(this._parallaxX,this._parallaxY);lookVector[0]=camVector[0]+lookDx;lookVector[1]=camVector[1]+lookDy;lookVector[2]=camVector[2]+lookDz}else{const [camX,camY,camZ]=this._Get2DCameraPosition(offX,offY,viewH);vec3.set(camVector,camX,camY,camZ);vec3.set(lookVector,\ncamX,camY,camZ-100);const a=this.GetAngle();if(a===0)vec3.set(upVector,0,1,0);else vec3.set(upVector,Math.sin(a),Math.cos(a),0)}renderer.CalculateLookAtModelView(outMat,camVector,lookVector,upVector,viewH||runtime.GetViewportHeight())}_SetProjectionMatrixChanged(){this._isProjectionMatrixChanged=true;this._isViewFrustumChanged=true;this._isViewportChanged=true}_GetProjectionMatrix(renderer){if(this._isProjectionMatrixChanged){this._CalculateProjectionMatrix(renderer);this._isProjectionMatrixChanged=\nfalse}return this._projectionMatrix}_CalculateProjectionMatrix(renderer){const canvasManager=this._runtime.GetCanvasManager();const [vpX,vpY]=this._GetVanishingPoint();if(this._layout.IsOrthographicProjection())renderer.CalculateOrthographicMatrix(this._projectionMatrix,canvasManager.GetDrawWidth(),canvasManager.GetDrawHeight());else if(vpX===.5&&vpY===.5)mat4.copy(this._projectionMatrix,canvasManager.GetDefaultProjectionMatrix());else{const drawW=canvasManager.GetDrawWidth();const drawH=canvasManager.GetDrawHeight();\nrenderer.CalculatePerspectiveMatrix(this._projectionMatrix,drawW/drawH,vpX,vpY)}}_SetTransform(renderer,updateProjection=true,offX=0,offY=0,viewH=0){if(updateProjection)renderer.SetProjectionMatrix(this._GetProjectionMatrix(renderer));let modelViewMatrix=null;if(offX===0&&offY===0&&viewH===0)modelViewMatrix=this._GetModelViewMatrix(renderer);else{this._CalculateModelViewMatrix(renderer,tempMat4,offX,offY,viewH);modelViewMatrix=tempMat4}renderer.SetModelViewMatrix(modelViewMatrix)}PrepareForDraw(renderer){this._SetTransform(renderer);\nrenderer.SetBaseZ(this.GetZElevation())}Draw(renderer,destinationRenderTarget,isFirstToTarget){const canvasManager=this._runtime.GetCanvasManager();const useOwnTexture=this.UsesOwnTexture();let ownRenderTarget=null;let layerQuery=null;if(this._runtime.IsGPUProfiling())if(renderer.IsWebGL()){const timingsBuffer=canvasManager.GetLayerTimingsBuffer(this);if(timingsBuffer){layerQuery=timingsBuffer.AddTimeElapsedQuery();renderer.StartQuery(layerQuery)}}else if(renderer.IsWebGPU())renderer.WriteTimestamp((this.GetIndex()+\n1)*2);if(useOwnTexture){const rtOpts={sampling:this._runtime.GetSampling(),isSampled:true,canReadPixels:renderer.IsWebGPU()?this._runtime.UsesAnyBackgroundBlending():false};if(canvasManager.GetCurrentFullscreenScalingQuality()===\"low\"){rtOpts.width=canvasManager.GetDrawWidth();rtOpts.height=canvasManager.GetDrawHeight()}ownRenderTarget=this._runtime.GetAdditionalRenderTarget(rtOpts);this._curRenderTarget=ownRenderTarget;renderer.SetRenderTarget(ownRenderTarget);if(this.IsTransparent())renderer.ClearRgba(0,\n0,0,0)}else{this._curRenderTarget=destinationRenderTarget;renderer.SetRenderTarget(destinationRenderTarget)}if(!this.IsTransparent())renderer.Clear(this._backgroundColor);this._layout._DrawLayerList(renderer,this._curRenderTarget,this._subLayers,useOwnTexture&&this.IsTransparent());this._SetTransform(renderer);renderer.SetBaseZ(this.GetZElevation());renderer.SetDepthEnabled(this.RendersIn3DMode());if(this.GetNormalScale()>Number.EPSILON){this._UpdateZIndices();const useRenderCells=this.UsesRenderCells()&&\nthis.GetZElevation()===0&&!this._anyInstanceZElevated;if(this.Has3DCamera())this._DrawInstances_3DCamera(renderer);else if(useRenderCells)this._DrawInstances_RenderCells(renderer);else this._DrawInstances(renderer,this._GetInstancesInDrawOrder())}renderer.SetBaseZ(0);renderer.SetCurrentZ(0);if(useOwnTexture){renderer.SetDepthEnabled(false);this._DrawLayerOwnTextureToRenderTarget(renderer,ownRenderTarget,destinationRenderTarget,isFirstToTarget)}if(layerQuery)renderer.EndQuery(layerQuery);if(this._runtime.IsGPUProfiling()&&\nrenderer.IsWebGPU())renderer.WriteTimestamp((this.GetIndex()+1)*2+1);this._curRenderTarget=null}_DrawInstances(renderer,instances){const viewport=this.GetViewport();const renderTarget=this._curRenderTarget;const isOrthographic=this.GetLayout().IsOrthographicProjection();const hasVanishingPointOutsideViewport=this.GetLayout().HasVanishingPointOutsideViewport();let lastInst=null;for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];if(inst===lastInst)continue;lastInst=inst;const wi=inst.GetWorldInfo();\nif(wi.IsVisible()&&wi.IsInViewport(viewport,hasVanishingPointOutsideViewport,isOrthographic))this._DrawInstanceMaybeWithEffects(inst,wi,renderer,renderTarget)}}_DrawInstances_3DCamera(renderer){const renderTarget=this._curRenderTarget;const viewFrustum=this._GetViewFrustum();const coplanarInstances=tempInstanceList1;const postRenderInstances=tempInstanceList2;const instances=this._GetInstancesInDrawOrder();for(let i=0,len=instances.length;i<len;){const inst=instances[i];const wi=inst.GetWorldInfo();\nif(!wi.IsVisible()||!wi.IsInViewport3D(viewFrustum)){++i;continue}if(!inst.RendersToOwnZPlane()||wi.GetDepth()>0)postRenderInstances.push(inst);const startZ=inst.GetWorldInfo().GetTotalZElevation();coplanarInstances.push(inst);let endIndex=i+1;for(;endIndex<len;++endIndex){const nextInst=instances[endIndex];const nextWi=nextInst.GetWorldInfo();if(!nextWi.IsVisible()||!nextWi.IsInViewport3D(viewFrustum))continue;if(nextWi.GetTotalZElevation()!==startZ)break;if(!nextInst.RendersToOwnZPlane()){postRenderInstances.push(nextInst);\ncontinue}if(nextWi.GetDepth()>0)postRenderInstances.push(nextInst);coplanarInstances.push(nextInst)}if(coplanarInstances.length===1&&!coplanarInstances[0].MustMitigateZFighting()){this._DrawInstanceMaybeWithEffects(inst,wi,renderer,renderTarget);for(let j=0,lenj=postRenderInstances.length;j<lenj;++j){const postInst=postRenderInstances[j];if(postInst===inst)continue;const postWi=postInst.GetWorldInfo();const postWiLayer=postWi.GetLayer();postWiLayer._DrawInstanceMaybeWithEffects(postInst,postWi,renderer,\nrenderTarget)}}else{this._DrawCoplanarInstances_3DCamera(renderer,coplanarInstances);for(let j=0,lenj=postRenderInstances.length;j<lenj;++j){const postInst=postRenderInstances[j];const postWi=postInst.GetWorldInfo();postWi._SetDrawNonBackFacesOnly(true);this._DrawInstanceMaybeWithEffects(postInst,postWi,renderer,renderTarget);postWi._SetDrawNonBackFacesOnly(false)}}i=endIndex;C3.clearArray(coplanarInstances);C3.clearArray(postRenderInstances)}}_DrawCoplanarInstances_3DCamera(renderer,instances){const renderTarget=\nthis._curRenderTarget;renderer.CoplanarStartStencilPass();for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];const wi=inst.GetWorldInfo();wi._SetDrawBackFaceOnly(true);this._DrawInstance(inst,wi,renderer)}renderer.CoplanarStartColorPass();for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];const wi=inst.GetWorldInfo();this._DrawInstanceMaybeWithEffects(inst,wi,renderer,renderTarget);wi._SetDrawBackFaceOnly(false)}renderer.CoplanarRestoreStandardRendering()}_DrawInstances_RenderCells(renderer){const renderGrid=\nthis._renderGrid;const curRenderCells=this._curRenderCells;const lastRenderCells=this._lastRenderCells;const viewport=this.GetViewport();let instancesToDraw;curRenderCells.set(renderGrid.XToCell(viewport.getLeft()),renderGrid.YToCell(viewport.getTop()),renderGrid.XToCell(viewport.getRight()),renderGrid.YToCell(viewport.getBottom()));if(!this._isRenderListUpToDate||!curRenderCells.equals(lastRenderCells)){instancesToDraw=this._GetRenderCellInstancesToDraw();this._isRenderListUpToDate=true;lastRenderCells.copy(curRenderCells)}else instancesToDraw=\nthis._lastRenderList;this._DrawInstances(renderer,instancesToDraw);if(instancesToDraw!==this._lastRenderList)C3.shallowAssignArray(this._lastRenderList,instancesToDraw)}_DrawInstanceMaybeWithEffects(inst,wi,renderer,renderTarget){if(wi.HasAnyActiveEffect())this._DrawInstanceWithEffectsAndRestore(inst,wi,renderer,renderTarget);else this._DrawInstance(inst,wi,renderer)}_DrawInstance(inst,wi,renderer){const wiStateGroup=wi.GetRendererStateGroup();if(renderer.GetCurrentStateGroup()!==wiStateGroup)wiStateGroup.Apply();\ninst.Draw(renderer)}_DrawInstanceWithEffectsAndRestore(inst,wi,renderer,renderTarget){if(this._DrawInstanceWithEffects(inst,wi,renderer,renderTarget,null))this._SetTransform(renderer)}_DrawInstanceWithEffects(inst,wi,renderer,renderTarget,opts){const effectChain=wi.GetInstanceEffectList().GetEffectChain();effectChain.Render(renderer,renderTarget,{contentObject:inst,blendMode:wi.GetBlendMode(),devicePixelRatio:this._runtime.GetEffectDevicePixelRatioParam(),time:inst.GetInstanceGameTime(),layerScale:this._runtime.GetEffectLayerScaleParam()*\nthis.GetNormalScale(),layerAngle:this.GetAngle(),layoutRect:wi.GetBoundingBox(),drawSurfaceRect:effectChain.CanSkipCalculatingDrawSurfaceRect()?null:this._InstanceBoxToDrawSurface(wi),drawContentHook:opts&&opts.drawContentHook,compositOffX:opts&&opts.compositOffX,compositOffY:opts&&opts.compositOffY,updateOwnProjection:opts&&opts.updateOwnProjection});renderer.SetBaseZ(this.GetZElevation());return effectChain.DidChangeTransform()}_DrawLayerOwnTextureToRenderTarget(renderer,ownRenderTarget,destinationRenderTarget,\nisFirstToTarget){const activeEffectTypes=this._effectList.GetActiveEffectTypes();const runtime=this._runtime;if(activeEffectTypes.length===0){renderer.SetRenderTarget(destinationRenderTarget);renderer.SetTextureFillMode();if(isFirstToTarget&&this._blendMode===0&&this.HasDefaultColor())renderer.CopyRenderTarget(ownRenderTarget);else{renderer.SetBlendMode(this._blendMode);renderer.SetColor(this._premultipliedColor);renderer.DrawRenderTarget(ownRenderTarget)}renderer.InvalidateRenderTarget(ownRenderTarget);\nruntime.ReleaseAdditionalRenderTarget(ownRenderTarget)}else this.GetEffectChain().Render(renderer,destinationRenderTarget,{contentObject:this,blendMode:this.GetBlendMode(),devicePixelRatio:runtime.GetEffectDevicePixelRatioParam(),layerScale:runtime.GetEffectLayerScaleParam()*this.GetNormalScale(),layerAngle:this.GetAngle(),layoutRect:this.GetViewport(),drawSurfaceRect:null,invalidateRenderTargets:true})}GetOwnScale(){return this._scale}SetOwnScale(s){if(this._scale===s)return;this._scale=s;this._layout.BoundScrolling();\nthis._SetMVMatrixChanged();this._runtime.UpdateRender()}GetRenderScale(){return this.GetNormalScale()*this._runtime.GetRenderScale()}GetDisplayScale(){return this.GetNormalScale()*this._runtime.GetDisplayScale()}GetNormalScale(){return(this._scale*this._layout.GetScale()-1)*this._scaleRate+1}_MaybeUpdateViewport(){if(!this._isViewportChanged)return;this._isViewportChanged=false;const parallaxOriginX=this._runtime.GetParallaxXOrigin();const parallaxOriginY=this._runtime.GetParallaxYOrigin();const scrollOriginX=\n(this.GetScrollX()-parallaxOriginX)*this._parallaxX+parallaxOriginX;const scrollOriginY=(this.GetScrollY()-parallaxOriginY)*this._parallaxY+parallaxOriginY;const normalScale=this.GetNormalScale();const scaledViewportWidth=this._runtime.GetViewportWidth()/normalScale;const scaledViewportHeight=this._runtime.GetViewportHeight()/normalScale;let px=scrollOriginX-scaledViewportWidth/2;let py=scrollOriginY-scaledViewportHeight/2;if(this._runtime.IsPixelRoundingEnabled()){px=Math.round(px);py=Math.round(py)}const viewportZ0=\nthis._viewportZ0;viewportZ0.set(px,py,px+scaledViewportWidth,py+scaledViewportHeight);const myAngle=this.GetAngle();if(myAngle!==0){tmpRect.copy(viewportZ0);tmpRect.offset(-viewportZ0.midX(),-viewportZ0.midY());tmpQuad.setFromRotatedRect(tmpRect,myAngle);tmpQuad.getBoundingBox(tmpRect);tmpRect.offset(viewportZ0.midX(),viewportZ0.midY());viewportZ0.copy(tmpRect)}const layerZ=this._zElevation;this.GetViewportForZ(layerZ,this._viewport);if(this.Has3DCamera())this.CalculateViewport3D(layerZ,this._viewport3D);\nelse this._viewport3D.copy(this._viewport)}CalculateViewport3D(z,outRect){const canvasManager=this._runtime.GetCanvasManager();const canvasWidth=canvasManager.GetCssWidth();const canvasHeight=canvasManager.GetCssHeight();const [tlx,tly]=this.CanvasCssToLayer(0,0,z);const [trx,try_]=this.CanvasCssToLayer(canvasWidth,0,z);const [brx,bry]=this.CanvasCssToLayer(canvasWidth,canvasHeight,z);const [blx,bly]=this.CanvasCssToLayer(0,canvasHeight,z);let left=Math.min(tlx,trx,brx,blx);let top=Math.min(tly,try_,\nbry,bly);let right=Math.max(tlx,trx,brx,blx);let bottom=Math.max(tly,try_,bry,bly);if(!isFinite(left))left=-Infinity;if(!isFinite(top))top=-Infinity;if(!isFinite(right))right=Infinity;if(!isFinite(bottom))bottom=Infinity;outRect.set(left,top,right,bottom)}CanvasCssToLayer(ptx,pty,z=0){return this._CanvasToLayer(ptx,pty,z,this.GetDisplayScale())}DrawSurfaceToLayer(ptx,pty,z=0){return this._CanvasToLayer(ptx,pty,z,this.GetRenderScale()*this.GetDevicePixelRatio())}_CanvasToLayer(canvasX,canvasY,zElevation,\ndisplayScale){const runtime=this._runtime;const renderer=runtime.GetRenderer();const normalScale=this.GetNormalScale();const scaledViewportWidth=runtime.GetViewportWidth()/normalScale;const scaledViewportHeight=runtime.GetViewportHeight()/normalScale;const viewport=tempVec4;vec4.set(viewport,0,0,scaledViewportWidth,scaledViewportHeight);canvasX=canvasX/displayScale;canvasY=viewport[3]-canvasY/displayScale;const matP=this._GetProjectionMatrix(renderer);const matMV=this._GetModelViewMatrix(renderer);\nconst objectCoord=tempVec3;const result=C3.Gfx.UnprojectScreenToWorldZ(canvasX,canvasY,zElevation,matMV,matP,viewport,objectCoord);if(result)return[objectCoord[0],objectCoord[1]];else return[NaN,NaN]}CanvasCssToLayer_DefaultTransform(ptx,pty){const scale=this._scale;const scaleRate=this._scaleRate;const parallaxX=this._parallaxX;const parallaxY=this._parallaxY;const angle=this._angle;this._scale=1;this._scaleRate=1;this._parallaxX=1;this._parallaxY=1;this._angle=0;this._SetMVMatrixChanged();const ret=\nthis.CanvasCssToLayer(ptx,pty);this._scale=scale;this._scaleRate=scaleRate;this._parallaxX=parallaxX;this._parallaxY=parallaxY;this._angle=angle;this._SetMVMatrixChanged();return ret}LayerToCanvasCss(ptx,pty,z=0){return this._LayerToCanvas(ptx,pty,z,this.GetDisplayScale())}LayerToDrawSurface(ptx,pty,z=0){return this._LayerToCanvas(ptx,pty,z,this.GetRenderScale()*this.GetDevicePixelRatio())}_LayerToCanvas(layerX,layerY,zElevation,displayScale){const runtime=this._runtime;const renderer=runtime.GetRenderer();\nconst normalScale=this.GetNormalScale();const scaledViewportWidth=runtime.GetViewportWidth()/normalScale;const scaledViewportHeight=runtime.GetViewportHeight()/normalScale;const viewport=tempVec4;vec4.set(viewport,0,0,scaledViewportWidth,scaledViewportHeight);const matP=this._GetProjectionMatrix(renderer);const matMV=this._GetModelViewMatrix(renderer);const windowCoord=tempVec3;const result=C3.Gfx.Project(layerX,layerY,zElevation,matMV,matP,viewport,windowCoord);if(result)return[windowCoord[0]*displayScale,\n(viewport[3]-windowCoord[1])*displayScale];else return[NaN,NaN]}_GetLayerToDrawSurfaceScale(size,zElevation){size*=this.GetRenderScale()*this.GetDevicePixelRatio();if(zElevation!==0)size*=this.Get2DScaleFactorToZ(zElevation);return size}_InstanceBoxToDrawSurface(wi){const bbox=wi.GetBoundingBox();const z=wi.GetTotalZElevation();const depth=wi.GetDepth();const topZ=z+depth;const bbLeft=bbox.getLeft();const bbTop=bbox.getTop();const bbRight=bbox.getRight();const bbBottom=bbox.getBottom();if(this.Has3DCamera()){if(this._IsPointBehindNearPlane(bbLeft,\nbbTop,z)||this._IsPointBehindNearPlane(bbRight,bbTop,z)||this._IsPointBehindNearPlane(bbRight,bbBottom,z)||this._IsPointBehindNearPlane(bbLeft,bbBottom,z))return null;if(depth>0)if(this._IsPointBehindNearPlane(bbLeft,bbTop,topZ)||this._IsPointBehindNearPlane(bbRight,bbTop,topZ)||this._IsPointBehindNearPlane(bbRight,bbBottom,topZ)||this._IsPointBehindNearPlane(bbLeft,bbBottom,topZ))return null}else if(topZ>=this.GetCameraZ())return null;let [stlx,stly]=this.LayerToDrawSurface(bbLeft,bbTop,z);let [sbrx,\nsbry]=this.LayerToDrawSurface(bbRight,bbBottom,z);if(this.GetAngle()!==0||depth>0||this.Has3DCamera()){const [strx,stry]=this.LayerToDrawSurface(bbRight,bbTop,z);const [sblx,sbly]=this.LayerToDrawSurface(bbLeft,bbBottom,z);if(depth>0){const [stlxTop,stlyTop]=this.LayerToDrawSurface(bbLeft,bbTop,topZ);const [strxTop,stryTop]=this.LayerToDrawSurface(bbRight,bbTop,topZ);const [sbrxTop,sbryTop]=this.LayerToDrawSurface(bbRight,bbBottom,topZ);const [sblxTop,sblyTop]=this.LayerToDrawSurface(bbLeft,bbBottom,\ntopZ);let temp=Math.min(stlx,sbrx,strx,sblx,stlxTop,strxTop,sbrxTop,sblxTop);sbrx=Math.max(stlx,sbrx,strx,sblx,stlxTop,strxTop,sbrxTop,sblxTop);stlx=temp;temp=Math.min(stly,sbry,stry,sbly,stlyTop,stryTop,sbryTop,sblyTop);sbry=Math.max(stly,sbry,stry,sbly,stlyTop,stryTop,sbryTop,sblyTop);stly=temp}else{let temp=Math.min(stlx,sbrx,strx,sblx);sbrx=Math.max(stlx,sbrx,strx,sblx);stlx=temp;temp=Math.min(stly,sbry,stry,sbly);sbry=Math.max(stly,sbry,stry,sbly);stly=temp}}tmpRect.set(stlx,stly,sbrx,sbry);\nreturn tmpRect}_GetViewFrustum(){if(this._isViewFrustumChanged){this._UpdateViewFrustum();this._isViewFrustumChanged=false}return this._viewFrustum}_UpdateViewFrustum(){const renderer=this._runtime.GetRenderer();const matP=this._GetProjectionMatrix(renderer);const matMV=this._GetModelViewMatrix(renderer);this._viewFrustum.CalculatePlanes(matMV,matP)}_IsPointBehindNearPlane(x,y,z){return this._GetViewFrustum().IsBehindNearPlane(x,y,z)}_SaveToJson(){const o={\"d\":this.IsDynamic(),\"s\":this.GetOwnScale(),\n\"a\":this.GetOwnAngle(),\"v\":this._IsVisibleFlagSet(),\"i\":this.IsInteractive(),\"bc\":this._backgroundColor.toJSON(),\"t\":this.IsTransparent(),\"sx\":this._scrollX,\"sy\":this._scrollY,\"hosp\":this._hasOwnScrollPosition,\"px\":this.GetParallaxX(),\"py\":this.GetParallaxY(),\"c\":this._color.toJSON(),\"sr\":this.GetScaleRate(),\"fx\":this._effectList.SaveToJson(),\"cg\":this._createdGlobalUids};return o}_LoadFromJson(o){this._isDynamic=!!o[\"d\"];this._scale=o[\"s\"];this._angle=o[\"a\"];this._isVisible=!!o[\"v\"];this._isInteractive=\no.hasOwnProperty(\"i\")?o[\"i\"]:true;this._backgroundColor.setFromJSON(o[\"bc\"]);this._isTransparent=!!o[\"t\"];if(o.hasOwnProperty(\"sx\"))this._scrollX=o[\"sx\"];if(o.hasOwnProperty(\"sy\"))this._scrollY=o[\"sy\"];if(o.hasOwnProperty(\"hosp\"))this._hasOwnScrollPosition=!!o[\"hosp\"];this._parallaxX=o[\"px\"];this._parallaxY=o[\"py\"];this._color.setFromJSON(o[\"c\"]);this._UpdatePremultipliedColor();this._scaleRate=o[\"sr\"];C3.shallowAssignArray(this._createdGlobalUids,o[\"cg\"]);C3.shallowAssignArray(this._initialInstances,\nthis._startupInitialInstances);const tempSet=new Set(this._createdGlobalUids);let j=0;for(let i=0,len=this._initialInstances.length;i<len;++i)if(!tempSet.has(this._initialInstances[i][2])){this._initialInstances[j]=this._initialInstances[i];++j}C3.truncateArray(this._initialInstances,j);this._effectList.LoadFromJson(o[\"fx\"]);this._needsRebuildEffectChainSteps=true}_LoadFromJsonAfterInstances(){this._SortInstancesByLastCachedZIndex(false);this.SetZIndicesChanged();this._SetMVMatrixChanged();this._SetProjectionMatrixChanged()}GetILayer(){return this._iLayer}SortAndAddInstancesByZIndex(inst,\nsortExisting=false){if(this._instances.includes(inst)){if(sortExisting)this._instances.sort((f,s)=>{const firstZIndex=f.GetWorldInfo().GetSceneGraphZIndex();const secondZIndex=s.GetWorldInfo().GetSceneGraphZIndex();return firstZIndex-secondZIndex});return}if(inst.HasChildren()){const instances=[...inst.allChildren()];instances.push(inst);instances.sort((f,s)=>{const firstZIndex=f.GetWorldInfo().GetSceneGraphZIndex();const secondZIndex=s.GetWorldInfo().GetSceneGraphZIndex();return firstZIndex-secondZIndex});\nfor(const instanceToAdd of instances){if(!instanceToAdd.IsInContainer())continue;for(const instanceToAddSibling of instanceToAdd.siblings()){if(instances.includes(instanceToAddSibling))continue;const siblingAndChildren=[...instanceToAddSibling.allChildren()];siblingAndChildren.push(instanceToAddSibling);siblingAndChildren.sort((f,s)=>{const firstZIndex=f.GetWorldInfo().GetSceneGraphZIndex();const secondZIndex=s.GetWorldInfo().GetSceneGraphZIndex();return firstZIndex-secondZIndex});if(!siblingAndChildren||\n!siblingAndChildren.length)continue;instances.splice(instances.length,0,...siblingAndChildren)}}for(const instance of instances)if(instance.GetPlugin().IsWorldType())this._AddInstance(instance,true)}else{if(inst.GetPlugin().IsWorldType())this._AddInstance(inst,true);if(!inst.IsInContainer())return;for(const sibling of inst.siblings()){const siblingAndChildren=[...sibling.allChildren()];siblingAndChildren.push(sibling);siblingAndChildren.sort((f,s)=>{const firstZIndex=f.GetWorldInfo().GetSceneGraphZIndex();\nconst secondZIndex=s.GetWorldInfo().GetSceneGraphZIndex();return firstZIndex-secondZIndex});if(!siblingAndChildren||!siblingAndChildren.length)continue;for(const instance of siblingAndChildren)if(instance.GetPlugin().IsWorldType())this._AddInstance(instance,true)}}}};\n\n}\n\n// layouts/layout.js\n{\n'use strict';const C3=self.C3;const C3Debugger=self.C3Debugger;const assert=self.assert;const tempDestRect=C3.New(C3.Rect);const tempSrcRect=C3.New(C3.Rect);const tempLayoutRect=C3.New(C3.Rect);const tempColor=C3.New(C3.Color);const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const tempRender3dList=[];const tempInstanceList1=[];const tempInstanceList2=[];const tempInstanceList3=[];function vec3EqualsXYZ(v,x,y,z){return v[0]===Math.fround(x)&&v[1]===Math.fround(y)&&v[2]===Math.fround(z)}\nlet lastLayerPreparedForDrawing=null;function MaybePrepareLayerDraw(layer,renderer){if(lastLayerPreparedForDrawing===layer)return;layer.PrepareForDraw(renderer);lastLayerPreparedForDrawing=layer}\nC3.Layout=class Layout extends C3.DefendedBase{constructor(layoutManager,index,data){super();this._layoutManager=layoutManager;this._runtime=layoutManager.GetRuntime();this._name=data[0];this._originalWidth=data[1];this._originalHeight=data[2];this._width=data[1];this._height=data[2];this._isUnboundedScrolling=!!data[3];this._isOrthographicProjection=!!data[4];this._vanishingPointX=data[5];this._vanishingPointY=data[6];this._eventSheetName=data[7];this._eventSheet=null;this._sid=data[8];this._index=\nindex;this._scrollX=0;this._scrollY=0;this._scale=1;this._angle=0;this._initialObjectClasses=new Set;this._textureLoadedTypes=new Set;this._textureLoadPendingPromises=new Set;this._createdInstances=[];this._createdPersistedInstances=[];this._createdPersistedInstancesToDataMap=new Map;this._createdPersistedIndexToInstanceMap=new Map;this._initialNonWorld=[];this._is3dCameraEnabled=false;this._cam3dposition=vec3.create();this._cam3dlook=vec3.create();this._cam3dup=vec3.create();this._rootLayers=[];\nthis._allLayersFlat=[];this._layersByName=new Map;this._layersBySid=new Map;const canvasManager=this._runtime.GetCanvasManager();this._effectList=C3.New(C3.EffectList,this,data[11]);this._effectChain=C3.New(C3.Gfx.EffectChain,canvasManager.GetEffectChainManager(),{drawContent:(renderer,effectChain)=>{const layout=effectChain.GetContentObject();const renderSurface=layout.GetRenderTarget();renderer.ResetColor();renderer.DrawRenderTarget(renderSurface);renderer.InvalidateRenderTarget(renderSurface);\ncanvasManager.ReleaseAdditionalRenderTarget(renderSurface)},getShaderParameters:index=>this.GetEffectList()._GetEffectChainShaderParametersForIndex(index)});this._needsRebuildEffectChainSteps=true;this._wasFullScreenQualityLow=false;this._curRenderTarget=null;this._persistData={};this._persistedIntances=new Map;this._isFirstVisit=true;this._iLayout=new self.ILayout(this);this._userScriptDispatcher=C3.New(C3.Event.Dispatcher);for(const layerData of data[9])this._rootLayers.push(C3.Layer.CreateFromExportData(this,\nnull,layerData));this._ReindexLayers();for(const layer of this.allLayers())layer._InitInitialInstances();for(const instData of data[10]){const objectClass=this._runtime.GetObjectClassByIndex(instData[1]);if(!objectClass)throw new Error(\"missing nonworld object class\");if(!objectClass.GetDefaultInstanceData())objectClass.SetDefaultInstanceData(instData);this._initialNonWorld.push(instData);this._AddInitialObjectClass(objectClass)}}Release(){for(const l of this._allLayersFlat)l.Release();C3.clearArray(this._allLayersFlat);\nthis._textureLoadPendingPromises.clear();this._eventSheet=null;this._layoutManager=null;this._runtime=null}GetRuntime(){return this._runtime}GetName(){return this._name}GetSID(){return this._sid}GetIndex(){return this._index}GetEffectList(){return this._effectList}GetEffectChain(){this._MaybeRebuildEffectChainSteps();return this._effectChain}_MaybeRebuildEffectChainSteps(){const isFullscreenQualityLow=this._runtime.GetCanvasManager().GetCurrentFullscreenScalingQuality()===\"low\";if(!this._needsRebuildEffectChainSteps&&\nthis._wasFullScreenQualityLow===isFullscreenQualityLow&&!this._effectChain.NeedsRebuild())return;const activeEffectTypes=this.GetEffectList().GetActiveEffectTypes();this._effectChain.BuildSteps(activeEffectTypes.map(e=>e.GetShaderProgram()),{indexMap:activeEffectTypes.map(e=>e.GetIndex()),forcePostDraw:isFullscreenQualityLow,useFullSurface:true});this._needsRebuildEffectChainSteps=false;this._wasFullScreenQualityLow=isFullscreenQualityLow}UpdateActiveEffects(){this.GetEffectList().UpdateActiveEffects();\nthis._needsRebuildEffectChainSteps=true}GetMinLayerScale(){let m=this._allLayersFlat[0].GetNormalScale();for(let i=1,len=this._allLayersFlat.length;i<len;++i){const layer=this._allLayersFlat[i];if(layer.GetParallaxX()===0&&layer.GetParallaxY()===0)continue;m=Math.min(m,layer.GetNormalScale())}return m}_GetScrollBoundMarginHorizontal(){return.5*this._runtime.GetViewportWidth()/this.GetMinLayerScale()}_GetScrollBoundMarginVertical(){return.5*this._runtime.GetViewportHeight()/this.GetMinLayerScale()}GetScrollLeftBound(){if(this.IsUnboundedScrolling())return-Infinity;\nelse return this._GetScrollBoundMarginHorizontal()}GetScrollRightBound(){if(this.IsUnboundedScrolling())return Infinity;else return this.GetWidth()-this._GetScrollBoundMarginHorizontal()}GetScrollTopBound(){if(this.IsUnboundedScrolling())return-Infinity;else return this._GetScrollBoundMarginVertical()}GetScrollBottomBound(){if(this.IsUnboundedScrolling())return Infinity;else return this.GetHeight()-this._GetScrollBoundMarginVertical()}SetScrollX(x){const lbound=this.GetScrollLeftBound();const rbound=\nthis.GetScrollRightBound();if(x>rbound)x=rbound;if(x<lbound)x=lbound;if(this._scrollX!==x){this._scrollX=x;this._SetAllLayersMVChanged();this._runtime.UpdateRender()}}GetScrollX(){return this._scrollX}SetScrollY(y){const ubound=this.GetScrollTopBound();const bbound=this.GetScrollBottomBound();if(y>bbound)y=bbound;if(y<ubound)y=ubound;if(this._scrollY!==y){this._scrollY=y;this._SetAllLayersMVChanged();this._runtime.UpdateRender()}}GetScrollY(){return this._scrollY}IsUnboundedScrolling(){return this._isUnboundedScrolling}BoundScrolling(){this.SetScrollX(this.GetScrollX());\nthis.SetScrollY(this.GetScrollY());for(const layer of this._allLayersFlat)if(layer.IsOwnScrollPositionEnabled()){layer.SetScrollX(layer.GetScrollX());layer.SetScrollY(layer.GetScrollY())}}SetVanishingPointXY(vpX,vpY){if(this._vanishingPointX===vpX&&this._vanishingPointY===vpY)return;this._vanishingPointX=vpX;this._vanishingPointY=vpY;if(this.IsPerspectiveProjection()){this._SetAllLayersProjectionChanged();this._SetAllLayersMVChanged();this._runtime.UpdateRender()}}GetVanishingPointX(){if(this.IsOrthographicProjection())return.5;\nelse return this._vanishingPointX}GetVanishingPointY(){if(this.IsOrthographicProjection())return.5;else return this._vanishingPointY}HasVanishingPointOutsideViewport(){const vpX=this.GetVanishingPointX();const vpY=this.GetVanishingPointY();return vpX<0||vpX>1||vpY<0||vpY>1}SetPerspectiveProjection(){if(!this._isOrthographicProjection)return;this._isOrthographicProjection=false;this._SetAllLayersProjectionChanged();this._SetAllLayersMVChanged();this._runtime.UpdateRender()}SetOrthographicProjection(){if(this._isOrthographicProjection)return;\nthis._isOrthographicProjection=true;this._SetAllLayersProjectionChanged();this._SetAllLayersMVChanged();this._runtime.UpdateRender()}IsOrthographicProjection(){return this._isOrthographicProjection}IsPerspectiveProjection(){return!this.IsOrthographicProjection()}Set3DCameraEnabled(e){e=!!e;if(this._is3dCameraEnabled===e)return;this._is3dCameraEnabled=e;this._SetAllLayersMVChanged();this._runtime.UpdateRender()}Is3DCameraEnabled(){return this._is3dCameraEnabled}Set3DCameraOrientation(camX,camY,camZ,\nlookX,lookY,lookZ,upX,upY,upZ){if(vec3EqualsXYZ(this._cam3dposition,camX,camY,camZ)&&vec3EqualsXYZ(this._cam3dlook,lookX,lookY,lookZ)&&vec3EqualsXYZ(this._cam3dup,upX,upY,upZ))return;vec3.set(this._cam3dposition,camX,camY,camZ);vec3.set(this._cam3dlook,lookX,lookY,lookZ);vec3.set(this._cam3dup,upX,upY,upZ);this.Set3DCameraChanged()}Set3DCameraChanged(){this._SetAllLayersMVChanged();this._runtime.UpdateRender()}Get3DCameraPosition(){return this._cam3dposition}Get3DCameraLookAt(){return this._cam3dlook}Get3DCameraUpVector(){return this._cam3dup}GetScale(){return this._scale}SetScale(s){if(this._scale===\ns)return;this._scale=s;this._SetAllLayersMVChanged();this.BoundScrolling();this._runtime.UpdateRender()}SetAngle(a){a=C3.clampAngle(a);if(this._angle===a)return;this._angle=a;this._SetAllLayersMVChanged();this._runtime.UpdateRender()}GetAngle(){return this._angle}GetWidth(){return this._width}SetWidth(w){if(!isFinite(w)||w<1)return;this._width=w}GetHeight(){return this._height}SetHeight(h){if(!isFinite(h)||h<1)return;this._height=h}GetEventSheet(){return this._eventSheet}_GetRootLayers(){return this._rootLayers}*allLayers(){for(const rootLayer of this._rootLayers)yield*rootLayer.selfAndAllSubLayers()}GetLayers(){return this._allLayersFlat}GetLayerCount(){return this._allLayersFlat.length}GetLayer(p){if(typeof p===\n\"number\")return this.GetLayerByIndex(p);else return this.GetLayerByName(p.toString())}GetLayerByIndex(i){i=C3.clamp(Math.floor(i),0,this._allLayersFlat.length-1);return this._allLayersFlat[i]}GetLayerByName(name){return this._layersByName.get(name.toLowerCase())||null}HasLayerByName(name){return!!this.GetLayerByName(name)}GetLayerBySID(sid){return this._layersBySid.get(sid)||null}_SetAllLayersProjectionChanged(){for(const layer of this._allLayersFlat)layer._SetProjectionMatrixChanged()}_SetAllLayersMVChanged(){for(const layer of this._allLayersFlat)layer._SetMVMatrixChanged()}AddLayer(layerName,\ninsertBy,where){if(this.HasLayerByName(layerName))throw new Error(`layer name '${layerName}' already in use`);if(!insertBy&&where<2)throw new Error(\"invalid insert position\");const parentLayer=where>=2?insertBy:insertBy.GetParentLayer();const layer=C3.New(C3.Layer,this,parentLayer,{name:layerName,sid:Math.floor(Math.random()*1E15),isDynamic:true});this._InsertLayer(layer,insertBy,where);this.GetRuntime().UpdateRender();this._ReindexLayers()}MoveLayer(layer,insertBy,where){if(!insertBy&&where<2)throw new Error(\"invalid insert position\");\nthis._RemoveLayer(layer);this._InsertLayer(layer,insertBy,where);this.GetRuntime().UpdateRender();this._ReindexLayers()}RemoveLayer(layer){if(this._RemoveLayer(layer)){layer.Release();this.GetRuntime().UpdateRender();this._ReindexLayers()}}RemoveAllDynamicLayers(){const toRemove=new Set;for(const layer of this.allLayers())if(layer.IsDynamic()&&!layer.HasAnyDynamicParentLayer())toRemove.add(layer);for(const layer of toRemove){this._RemoveLayer(layer);layer.Release()}this.GetRuntime().UpdateRender();\nthis._ReindexLayers()}_InsertLayer(layer,insertBy,where){if(where>=2)if(insertBy){if(insertBy===layer||insertBy.HasParentLayer(layer))throw new Error(`cannot move layer '${layer.GetName()}' to sub-layer of itself`);insertBy._AddSubLayer(layer,where===2);layer._SetParentLayer(insertBy)}else{if(where===2)this._rootLayers.push(layer);else this._rootLayers.unshift(layer);layer._SetParentLayer(null)}else{const parentLayer=insertBy.GetParentLayer();if(parentLayer){if(insertBy.HasParentLayer(layer))throw new Error(`cannot move layer '${layer.GetName()}' to sub-layer of itself`);\nparentLayer._InsertSubLayer(layer,insertBy,where===0);layer._SetParentLayer(parentLayer)}else{let i=this._rootLayers.indexOf(insertBy);if(i===-1)throw new Error(\"cannot find layer to insert by\");if(where===0)++i;this._rootLayers.splice(i,0,layer);layer._SetParentLayer(null)}}}_RemoveLayer(layer){const parentLayer=layer.GetParentLayer();if(parentLayer){parentLayer._RemoveSubLayer(layer);return true}else if(this._rootLayers.length>1){const i=this._rootLayers.indexOf(layer);if(i===-1)throw new Error(\"cannot find layer to remove\");\nthis._rootLayers.splice(i,1);return true}return false}_ReindexLayers(){this._allLayersFlat=[...this.allLayers()];this._layersByName.clear();this._layersBySid.clear();for(let i=0,len=this._allLayersFlat.length;i<len;++i){const layer=this._allLayersFlat[i];layer._SetIndex(i);this._layersByName.set(layer.GetName().toLowerCase(),layer);this._layersBySid.set(layer.GetSID(),layer)}}SaveTransform(){return{\"scrollX\":this.GetScrollX(),\"scrollY\":this.GetScrollY(),\"scale\":this.GetScale(),\"angle\":this.GetAngle(),\n\"vpX\":this.GetVanishingPointX(),\"vpY\":this.GetVanishingPointY()}}RestoreTransform(t){this.SetScrollX(t[\"scrollX\"]);this.SetScrollY(t[\"scrollY\"]);this.SetScale(t[\"scale\"]);this.SetAngle(t[\"angle\"]);this.SetVanishingPointXY(t[\"vpX\"],t[\"vpY\"])}GetLayoutBackgroundColor(){let firstDrawLayer=this._rootLayers.filter(l=>l.ShouldDraw())[0];while(firstDrawLayer){if(!firstDrawLayer.IsTransparent()){tempColor.copyRgb(firstDrawLayer.GetBackgroundColor());tempColor.setA(1);return tempColor}else if(firstDrawLayer.UsesOwnTexture()){tempColor.setRgba(0,\n0,0,0);return tempColor}firstDrawLayer=firstDrawLayer.GetSubLayers().filter(l=>l.ShouldDraw())[0]}tempColor.setRgba(0,0,0,0);return tempColor}IsFirstVisit(){return this._isFirstVisit}_GetInitialObjectClasses(){return[...this._initialObjectClasses]}_AddInitialObjectClass(objectClass){if(objectClass.IsInContainer())for(const containerType of objectClass.GetContainer().GetObjectTypes())this._initialObjectClasses.add(containerType);else this._initialObjectClasses.add(objectClass)}_GetTextureLoadedObjectTypes(){return[...this._textureLoadedTypes]}_Load(previousLayout,\nrenderer){if(previousLayout===this||!renderer)return Promise.resolve();if(previousLayout){C3.CopySet(this._textureLoadedTypes,previousLayout._textureLoadedTypes);previousLayout._textureLoadedTypes.clear()}const promises=[];for(const oc of this._initialObjectClasses)if(!this._textureLoadedTypes.has(oc)){promises.push(oc.LoadTextures(renderer));this._textureLoadedTypes.add(oc)}return Promise.all(promises)}async MaybeLoadTexturesFor(objectClass){if(objectClass.IsFamily())throw new Error(\"cannot load textures for family\");\nconst renderer=this._runtime.GetRenderer();if(!renderer||renderer.IsContextLost()||this._textureLoadedTypes.has(objectClass))return;this._textureLoadedTypes.add(objectClass);const loadPromise=objectClass.LoadTextures(renderer);this._AddPendingTextureLoadPromise(loadPromise);await loadPromise;objectClass.OnDynamicTextureLoadComplete();this._runtime.UpdateRender()}_AddPendingTextureLoadPromise(promise){this._textureLoadPendingPromises.add(promise);promise.then(()=>this._textureLoadPendingPromises.delete(promise)).catch(()=>\nthis._textureLoadPendingPromises.delete(promise))}WaitForPendingTextureLoadsToComplete(){return Promise.all([...this._textureLoadPendingPromises])}MaybeUnloadTexturesFor(objectClass){if(objectClass.IsFamily()||objectClass.GetInstanceCount()>0)throw new Error(\"cannot unload textures\");const renderer=this._runtime.GetRenderer();if(!renderer||!this._textureLoadedTypes.has(objectClass))return;this._textureLoadedTypes.delete(objectClass);objectClass.ReleaseTextures(renderer)}_Unload(nextLayout,renderer){if(nextLayout===\nthis||!renderer)return;for(const oc of this._textureLoadedTypes)if(!oc.IsGlobal()&&!nextLayout._initialObjectClasses.has(oc)){oc.ReleaseTextures();this._textureLoadedTypes.delete(oc)}}_OnRendererContextLost(){this._textureLoadedTypes.clear()}async _StartRunning(isFirstLayout){const runtime=this._runtime;const layoutManager=this._layoutManager;const eventSheetManager=runtime.GetEventSheetManager();if(this._eventSheetName){this._eventSheet=eventSheetManager.GetEventSheetByName(this._eventSheetName);\nthis._eventSheet._UpdateDeepIncludes()}layoutManager._SetMainRunningLayout(this);this._width=this._originalWidth;this._height=this._originalHeight;this._scrollX=runtime.GetOriginalViewportWidth()/2;this._scrollY=runtime.GetOriginalViewportHeight()/2;this.BoundScrolling();this._SetAllLayersProjectionChanged();this._SetAllLayersMVChanged();this._MoveGlobalObjectsToThisLayout(isFirstLayout);this._runtime.SetUsingCreatePromises(true);this._CreateInitialInstances();if(!this._isFirstVisit)this._CreatePersistedInstances();\nthis._CreateAndLinkContainerInstances(this._createdInstances);this._CreateAndLinkContainerInstances(this._createdPersistedInstances);this._CreateInitialNonWorldInstances();layoutManager.ClearPendingChangeLayout();runtime.FlushPendingInstances();this._runtime.SetUsingCreatePromises(false);const createPromises=this._runtime.GetCreatePromises();await Promise.all(createPromises);C3.clearArray(createPromises);if(!runtime.IsLoadingState()){for(const inst of this._createdInstances)inst.SetupInitialSceneGraphConnections();\nfor(const inst of this._createdPersistedInstances)inst.SetupPersistedSceneGraphConnections(this._createdPersistedInstancesToDataMap,this._createdPersistedIndexToInstanceMap);for(const [sidStr,typeData]of Object.entries(this._persistData)){const objectClass=this._runtime.GetObjectClassBySID(parseInt(sidStr,10));if(!objectClass||objectClass.IsFamily()||!objectClass.HasPersistBehavior())continue;C3.clearArray(typeData)}for(const inst of this._createdInstances)inst._TriggerOnCreated();for(const inst of this._createdPersistedInstances)inst._TriggerOnCreated()}C3.clearArray(this._createdInstances);\nC3.clearArray(this._createdPersistedInstances);this._createdPersistedInstancesToDataMap.clear();this._createdPersistedIndexToInstanceMap.clear();await Promise.all([...this._initialObjectClasses].map(oc=>oc.PreloadTexturesWithInstances(this._runtime.GetRenderer())));if(isFirstLayout){runtime.Dispatcher().dispatchEvent(new C3.Event(\"beforefirstlayoutstart\"));await runtime.DispatchUserScriptEventAsyncWait(new C3.Event(\"beforeprojectstart\"))}runtime.Dispatcher().dispatchEvent(new C3.Event(\"beforelayoutstart\"));\nawait this.DispatchUserScriptEventAsyncWait(new C3.Event(\"beforelayoutstart\"));if(!runtime.IsLoadingState())await runtime.TriggerAsync(C3.Plugins.System.Cnds.OnLayoutStart,null,null);runtime.Dispatcher().dispatchEvent(new C3.Event(\"afterlayoutstart\"));await this.DispatchUserScriptEventAsyncWait(new C3.Event(\"afterlayoutstart\"));if(isFirstLayout){runtime.Dispatcher().dispatchEvent(new C3.Event(\"afterfirstlayoutstart\"));await runtime.DispatchUserScriptEventAsyncWait(new C3.Event(\"afterprojectstart\"))}eventSheetManager._RunQueuedTriggers(layoutManager);\nawait this.WaitForPendingTextureLoadsToComplete();this._isFirstVisit=false}_MoveGlobalObjectsToThisLayout(isFirstLayout){for(const objectClass of this._runtime.GetAllObjectClasses()){if(objectClass.IsFamily()||!objectClass.IsWorldType())continue;for(const inst of objectClass.GetInstances()){const wi=inst.GetWorldInfo();const oldLayer=wi.GetLayer();const layerIndex=C3.clamp(oldLayer.GetIndex(),0,this._allLayersFlat.length-1);const newLayer=this._allLayersFlat[layerIndex];wi._SetLayer(newLayer,true);\nnewLayer._MaybeAddInstance(inst)}}if(!isFirstLayout)for(const layer of this._allLayersFlat)layer._SortInstancesByLastCachedZIndex(false)}_CreateInitialInstances(){for(const layer of this._allLayersFlat){layer.CreateInitialInstances(this._createdInstances);layer._Start()}}_CreatePersistedInstances(){let uidsChanged=false;for(const [sidStr,typeData]of Object.entries(this._persistData)){const objectClass=this._runtime.GetObjectClassBySID(parseInt(sidStr,10));if(!objectClass||objectClass.IsFamily()||\n!objectClass.HasPersistBehavior())continue;for(const instData of typeData){let layer=null;if(objectClass.IsWorldType()){if(instData.hasOwnProperty(\"instJson\"))layer=this.GetLayerBySID(instData[\"instJson\"][\"w\"][\"l\"]);else layer=this.GetLayerBySID(instData[\"w\"][\"l\"]);if(!layer)continue}const inst=this._runtime.CreateInstanceFromData(objectClass,layer,false,0,0,true);if(instData.hasOwnProperty(\"instJson\"))inst.LoadFromJson(instData[\"instJson\"]);else inst.LoadFromJson(instData);uidsChanged=true;this._createdPersistedInstances.push(inst);\nif(instData.hasOwnProperty(\"instJson\")){this._createdPersistedInstancesToDataMap.set(inst,instData);this._createdPersistedIndexToInstanceMap.set(instData[\"index\"],inst)}}}for(const layer of this._allLayersFlat){layer._SortInstancesByLastCachedZIndex(true);layer.SetZIndicesChanged()}if(uidsChanged){this._runtime.FlushPendingInstances();this._runtime._RefreshUidMap()}}_CreateAndLinkContainerInstances(createdInstances){for(const inst of createdInstances){if(!inst.IsInContainer())continue;const wi=inst.GetWorldInfo();\nconst iid=inst.GetIID();for(const containerType of inst.GetObjectClass().GetContainer().objectTypes()){if(containerType===inst.GetObjectClass())continue;const instances=containerType.GetInstances();if(instances.length>iid)inst._AddSibling(instances[iid]);else{let s;if(wi)s=this._runtime.CreateInstanceFromData(containerType,wi.GetLayer(),true,wi.GetX(),wi.GetY(),true);else s=this._runtime.CreateInstanceFromData(containerType,null,true,0,0,true);this._runtime.FlushPendingInstances();containerType._UpdateIIDs();\ninst._AddSibling(s);createdInstances.push(s)}}}}_CreateInitialNonWorldInstances(){for(const instData of this._initialNonWorld){const objectClass=this._runtime.GetObjectClassByIndex(instData[1]);if(!objectClass.IsInContainer())this._runtime.CreateInstanceFromData(instData,null,true)}}_CreateGlobalNonWorlds(){const createdInstances=[];const initialNonWorld=this._initialNonWorld;let k=0;for(let i=0,len=initialNonWorld.length;i<len;++i){const instData=initialNonWorld[i];const objectClass=this._runtime.GetObjectClassByIndex(instData[1]);\nif(objectClass.IsGlobal()){if(!objectClass.IsInContainer()||!objectClass.GetContainer().HasAnyWorldType())createdInstances.push(this._runtime.CreateInstanceFromData(instData,null,true))}else{initialNonWorld[k]=instData;++k}}C3.truncateArray(initialNonWorld,k);this._runtime.FlushPendingInstances();this._CreateAndLinkContainerInstances(createdInstances)}RecreateInitialObjects(objectClass,rc,srcLayer,offsetX,offsetY,createHierarchy){if(srcLayer)return srcLayer.RecreateInitialObjects(objectClass,rc,offsetX,\noffsetY,createHierarchy);else{const ret=[];for(const layer of this._allLayersFlat)ret.push(layer.RecreateInitialObjects(objectClass,rc,offsetX,offsetY,createHierarchy));return ret.flat()}}async _StopRunning(){const layoutManager=this._layoutManager;if(!this._runtime.IsLoadingState()){await this.DispatchUserScriptEventAsyncWait(new C3.Event(\"beforelayoutend\"));await this._runtime.TriggerAsync(C3.Plugins.System.Cnds.OnLayoutEnd,null,null);await this.DispatchUserScriptEventAsyncWait(new C3.Event(\"afterlayoutend\"))}layoutManager.SetIsEndingLayout(true);\nthis._runtime.GetEventSheetManager().ClearAllScheduledWaits();if(!this._isFirstVisit)this._SavePersistData();for(const layer of this._allLayersFlat)layer._End();for(const objectClass of this._runtime.GetAllObjectClasses()){if(objectClass.IsGlobal()||objectClass.IsWorldType()||objectClass.GetPlugin().IsSingleGlobal()||objectClass.IsFamily())continue;for(const inst of objectClass.GetInstances())this._runtime.DestroyInstance(inst);this._runtime.FlushPendingInstances()}layoutManager.SetIsEndingLayout(false);\nif(layoutManager.GetMainRunningLayout()===this)layoutManager._SetMainRunningLayout(null)}_SaveInstanceToPersist(inst,index){const sidStr=inst.GetObjectClass().GetSID().toString();if(!this._persistData.hasOwnProperty(sidStr))this._persistData[sidStr]=[];const typePersist=this._persistData[sidStr];const persistData={\"index\":index,\"instJson\":inst.SaveToJson(),\"sceneGraphJson\":{\"children\":[]}};typePersist.push(persistData);this._persistedIntances.set(inst,persistData)}_SaveSceneGraphInfoToPersist(inst){const persistData=\nthis._persistedIntances.get(inst);for(const child of inst.GetChildren()){const childPersistData=this._persistedIntances.get(child);if(childPersistData)persistData[\"sceneGraphJson\"][\"children\"].push({\"index\":childPersistData[\"index\"],\"flags\":C3.SceneGraphInfo._GetFlagsNumber(child.GetWorldInfo())})}}_SavePersistData(){this._persistedIntances.clear();let persisDataIndex=0;for(const layer of this._allLayersFlat){layer._UpdateZIndices();for(const inst of layer._GetInstances()){const objectClass=inst.GetObjectClass();\nif(!objectClass.IsGlobal()&&objectClass.HasPersistBehavior()){this._SaveInstanceToPersist(inst,persisDataIndex);persisDataIndex++}}}for(const layer of this._allLayersFlat)for(const inst of layer._GetInstances()){const objectClass=inst.GetObjectClass();if(!objectClass.IsGlobal()&&objectClass.HasPersistBehavior())this._SaveSceneGraphInfoToPersist(inst)}this._persistedIntances.clear()}ResetPersistData(){this._persistData={};this._isFirstVisit=true}GetRenderTarget(){return this._curRenderTarget}UsesOwnTexture(){const runtime=\nthis._runtime;const isWebGL=runtime.GetRenderer().IsWebGL();return runtime.GetCanvasManager().GetCurrentFullscreenScalingQuality()===\"low\"||isWebGL&&runtime.UsesAnyBackgroundBlending()||runtime.GetCompositingMode()===\"low-latency\"||this._effectList.HasAnyActiveEffect()||isWebGL&&runtime.Uses3DFeatures()}Draw(renderer){const canvasManager=this._runtime.GetCanvasManager();const useOwnTexture=this.UsesOwnTexture();if(useOwnTexture){if(this._runtime.GetCompositingMode()!==\"low-latency\"){renderer.SetRenderTarget(null);\nrenderer.ClearRgba(0,0,0,0)}const rtOpts={sampling:this._runtime.GetSampling(),isSampled:renderer.IsWebGPU()||this._runtime.UsesAnyBackgroundBlending()||this._effectList.HasAnyActiveEffect(),canReadPixels:renderer.IsWebGPU()?this._runtime.UsesAnyBackgroundBlending():false};if(canvasManager.GetCurrentFullscreenScalingQuality()===\"low\"){rtOpts.width=canvasManager.GetDrawWidth();rtOpts.height=canvasManager.GetDrawHeight()}this._curRenderTarget=this._runtime.GetAdditionalRenderTarget(rtOpts)}else this._curRenderTarget=\nnull;renderer.SetRenderTarget(this._curRenderTarget);renderer.Clear(this.GetLayoutBackgroundColor());if(this._runtime.Uses3DFeatures())renderer.ClearDepth();this._DrawLayerList(renderer,this._curRenderTarget,this._rootLayers,true);if(useOwnTexture){renderer.SetDepthEnabled(false);this._DrawLayoutOwnTextureToRenderTarget(renderer,this._curRenderTarget)}this._curRenderTarget=null}_DrawLayerList(renderer,destRenderTarget,layersArr,canCopyFirstLayer){const layersToDraw=layersArr.filter(l=>l.ShouldDraw());\nfor(let i=0,len=layersToDraw.length;i<len;){const layer=layersToDraw[i];if(layer.SelfAndAllSubLayersHave3DCamera()&&!layer.SelfOrAnySubLayerUsesOwnTexture()){tempRender3dList.push(layer);for(let j=i+1;j<len;++j){const nextLayer=layersToDraw[j];if(nextLayer.SelfAndAllSubLayersHave3DCamera()&&!nextLayer.SelfOrAnySubLayerUsesOwnTexture())tempRender3dList.push(layersToDraw[j]);else break}if(tempRender3dList.length>=2||tempRender3dList.length===1&&tempRender3dList[0].HasAnyVisibleSubLayer()){this._Draw3DLayers(renderer,\ndestRenderTarget,tempRender3dList);i+=tempRender3dList.length;C3.clearArray(tempRender3dList);continue}C3.clearArray(tempRender3dList)}layer.Draw(renderer,destRenderTarget,canCopyFirstLayer&&i===0);++i}}_DrawLayoutOwnTextureToRenderTarget(renderer,ownRenderTarget){const activeEffectTypes=this._effectList.GetActiveEffectTypes();const runtime=this._runtime;if(activeEffectTypes.length===0){renderer.SetRenderTarget(null);renderer.SetTextureFillMode();renderer.CopyRenderTarget(ownRenderTarget);renderer.InvalidateRenderTarget(ownRenderTarget);\nruntime.ReleaseAdditionalRenderTarget(ownRenderTarget)}else{tempLayoutRect.set(0,0,runtime.GetViewportWidth(),runtime.GetViewportHeight());this.GetEffectChain().Render(renderer,null,{contentObject:this,blendMode:3,devicePixelRatio:this._runtime.GetEffectDevicePixelRatioParam(),layerScale:this._runtime.GetEffectLayerScaleParam()*this.GetScale(),layerAngle:this.GetAngle(),layoutRect:tempLayoutRect,drawSurfaceRect:null,invalidateRenderTargets:true})}}_Draw3DLayers(renderer,renderTarget,layerList){if(!layerList[0].IsTransparent()){tempColor.copyRgb(layerList[0].GetBackgroundColor());\ntempColor.setA(1);renderer.Clear(tempColor)}const canvasManager=this._runtime.GetCanvasManager();renderer.SetDepthEnabled(true);const fullInstanceList=tempInstanceList1;const coplanarInstances=tempInstanceList2;const postRenderInstances=tempInstanceList3;for(const layer of layerList){layer._UpdateZIndices();layer._AppendAllInstancesIncludingSubLayersInDrawOrder(fullInstanceList)}const firstLayer=layerList[0];let layerQuery=null;if(this._runtime.IsGPUProfiling())if(renderer.IsWebGL()){const timingsBuffer=\ncanvasManager.GetLayerTimingsBuffer(firstLayer);if(timingsBuffer){layerQuery=timingsBuffer.AddTimeElapsedQuery();renderer.StartQuery(layerQuery)}}else if(renderer.IsWebGPU())renderer.WriteTimestamp((firstLayer.GetIndex()+1)*2);for(let i=0,len=fullInstanceList.length;i<len;){const inst=fullInstanceList[i];const wi=inst.GetWorldInfo();const wiLayer=wi.GetLayer();if(!wi.IsVisible()||!wi.IsInViewport3D(wiLayer._GetViewFrustum())){++i;continue}if(!inst.RendersToOwnZPlane()||wi.GetDepth()>0)postRenderInstances.push(inst);\nconst startZ=inst.GetWorldInfo().GetTotalZElevation();coplanarInstances.push(inst);let endIndex=i+1;for(;endIndex<len;++endIndex){const nextInst=fullInstanceList[endIndex];const nextWi=nextInst.GetWorldInfo();if(!nextWi.IsVisible()||!nextWi.IsInViewport3D(nextWi.GetLayer()._GetViewFrustum()))continue;if(nextWi.GetTotalZElevation()!==startZ)break;if(!nextInst.RendersToOwnZPlane()){postRenderInstances.push(nextInst);continue}if(nextWi.GetDepth()>0)postRenderInstances.push(nextInst);coplanarInstances.push(nextInst)}if(coplanarInstances.length===\n1&&!coplanarInstances[0].MustMitigateZFighting()){MaybePrepareLayerDraw(wiLayer,renderer);wiLayer._DrawInstanceMaybeWithEffects(inst,wi,renderer,renderTarget);for(let j=0,lenj=postRenderInstances.length;j<lenj;++j){const postInst=postRenderInstances[j];if(postInst===inst)continue;const postWi=postInst.GetWorldInfo();const postWiLayer=postWi.GetLayer();MaybePrepareLayerDraw(postWiLayer,renderer);postWiLayer._DrawInstanceMaybeWithEffects(postInst,postWi,renderer,renderTarget)}}else{this._Draw3DLayersCoplanarInstances(renderer,\nrenderTarget,coplanarInstances);for(let j=0,lenj=postRenderInstances.length;j<lenj;++j){const postInst=postRenderInstances[j];const postWi=postInst.GetWorldInfo();const postWiLayer=postWi.GetLayer();postWi._SetDrawNonBackFacesOnly(true);MaybePrepareLayerDraw(postWiLayer,renderer);postWiLayer._DrawInstanceMaybeWithEffects(postInst,postWi,renderer,renderTarget);postWi._SetDrawNonBackFacesOnly(false)}}i=endIndex;C3.clearArray(coplanarInstances);C3.clearArray(postRenderInstances)}if(layerQuery)renderer.EndQuery(layerQuery);\nif(this._runtime.IsGPUProfiling()&&renderer.IsWebGPU())renderer.WriteTimestamp((firstLayer.GetIndex()+1)*2+1);C3.clearArray(fullInstanceList);lastLayerPreparedForDrawing=null}_Draw3DLayersCoplanarInstances(renderer,renderTarget,instances){renderer.CoplanarStartStencilPass();for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];const wi=inst.GetWorldInfo();const layer=wi.GetLayer();wi._SetDrawBackFaceOnly(true);MaybePrepareLayerDraw(layer,renderer);layer._DrawInstance(inst,wi,renderer)}renderer.CoplanarStartColorPass();\nfor(let i=0,len=instances.length;i<len;++i){const inst=instances[i];const wi=inst.GetWorldInfo();const layer=wi.GetLayer();MaybePrepareLayerDraw(layer,renderer);layer._DrawInstanceMaybeWithEffects(inst,wi,renderer,renderTarget);wi._SetDrawBackFaceOnly(false)}renderer.CoplanarRestoreStandardRendering()}_SaveToJson(){const o={\"sx\":this.GetScrollX(),\"sy\":this.GetScrollY(),\"s\":this.GetScale(),\"a\":this.GetAngle(),\"w\":this.GetWidth(),\"h\":this.GetHeight(),\"ortho\":this.IsOrthographicProjection(),\"vpX\":this.GetVanishingPointX(),\n\"vpY\":this.GetVanishingPointY(),\"fv\":this._isFirstVisit,\"persist\":this._persistData,\"fx\":this._effectList.SaveToJson(),\"layers\":{},\"dynamicLayers\":[]};for(const layer of this._allLayersFlat)if(layer.IsDynamic()){const parentLayer=layer.GetParentLayer();o[\"dynamicLayers\"].push({\"sid\":layer.GetSID(),\"name\":layer.GetName(),\"parentSid\":parentLayer?parentLayer.GetSID():null,\"siblingIndex\":layer._GetSiblingIndex(),\"data\":layer._SaveToJson()})}else o[\"layers\"][layer.GetSID().toString()]=layer._SaveToJson();\nreturn o}_LoadFromJson(o){this._scrollX=o[\"sx\"];this._scrollY=o[\"sy\"];this._scale=o[\"s\"];this._angle=o[\"a\"];this._width=o[\"w\"];this._height=o[\"h\"];this._isOrthographicProjection=!!o[\"ortho\"];if(o.hasOwnProperty(\"vpX\"))this._vanishingPointX=o[\"vpX\"];if(o.hasOwnProperty(\"vpY\"))this._vanishingPointY=o[\"vpY\"];this._isFirstVisit=!!o[\"fv\"];this._persistData=o[\"persist\"];this._effectList.LoadFromJson(o[\"fx\"]);this._needsRebuildEffectChainSteps=true;for(const [sidStr,data]of Object.entries(o[\"layers\"])){const sid=\nparseInt(sidStr,10);const layer=this.GetLayerBySID(sid);if(!layer)continue;layer._LoadFromJson(data)}if(o.hasOwnProperty(\"dynamicLayers\")){this.RemoveAllDynamicLayers();this._runtime.FlushPendingInstances();const reorderLayers=new Map;const dynamicLayersData=o[\"dynamicLayers\"];for(let i=dynamicLayersData.length-1;i>=0;--i){const dld=dynamicLayersData[i];const sid=dld[\"sid\"];const layerName=dld[\"name\"];const parentSid=dld[\"parentSid\"];const siblingIndex=dld[\"siblingIndex\"];const layerData=dld[\"data\"];\nthis._ReindexLayers();if(this.HasLayerByName(layerName)||this.GetLayerBySID(sid))continue;let parentLayer;let parentLayerArr;if(parentSid===null){parentLayer=null;parentLayerArr=this._rootLayers}else{parentLayer=this.GetLayerBySID(parentSid);if(!parentLayer)continue;parentLayerArr=parentLayer.GetSubLayers()}const layer=C3.New(C3.Layer,this,parentLayer,{name:layerName,sid,isDynamic:true});parentLayerArr.push(layer);let arr=reorderLayers.get(parentLayerArr);if(!arr){arr=[];reorderLayers.set(parentLayerArr,\narr)}arr.push({layer,siblingIndex});layer._LoadFromJson(layerData)}for(const [parentLayerArr,reorderArr]of reorderLayers){reorderArr.sort((a,b)=>a.siblingIndex-b.siblingIndex);for(const r of reorderArr){const layer=r.layer;const siblingIndex=r.siblingIndex;let i=parentLayerArr.indexOf(layer);parentLayerArr.splice(i,1);parentLayerArr.splice(siblingIndex,0,layer)}}}this._ReindexLayers();this._SetAllLayersProjectionChanged();this._SetAllLayersMVChanged()}GetILayout(){return this._iLayout}UserScriptDispatcher(){return this._userScriptDispatcher}DispatchUserScriptEvent(e){e.layout=\nthis.GetILayout();const runtime=this._runtime;const shouldTime=runtime.IsDebug()&&!runtime.GetEventSheetManager().IsInEventEngine();if(shouldTime)C3Debugger.StartMeasuringScriptTime();this._userScriptDispatcher.dispatchEvent(e);if(shouldTime)C3Debugger.AddScriptTime()}DispatchUserScriptEventAsyncWait(e){e.layout=this.GetILayout();return this._userScriptDispatcher.dispatchEventAndWaitAsync(e)}_LogLayerTree(){this._LogLayerList(this._rootLayers)}_LogLayerList(layersArr,indent=0){const layersRev=layersArr.slice(0);\nlayersRev.reverse();for(const layer of layersRev){console.log(`${\"\\t\".repeat(indent)}- ${layer.GetName()}`);this._LogLayerList(layer.GetSubLayers(),indent+1)}}};\n\n}\n\n// layouts/layoutManager.js\n{\n'use strict';const C3=self.C3;\nC3.LayoutManager=class LayoutManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._allLayouts=[];this._layoutsByName=new Map;this._layoutsBySid=new Map;this._mainRunningLayout=null;this._runningSubLayouts=[];this._firstLayout=null;this._isEndingLayout=0;this._pendingChangeLayout=null}Release(){this._runtime=null;this._mainRunningLayout=null;this._firstLayout=null;this._pendingChangeLayout=null;C3.clearArray(this._allLayouts);this._layoutsByName.clear();this._layoutsBySid.clear();\nC3.clearArray(this._runningSubLayouts)}Create(layoutData){const layout=C3.New(C3.Layout,this,this._allLayouts.length,layoutData);this._allLayouts.push(layout);this._layoutsByName.set(layout.GetName().toLowerCase(),layout);this._layoutsBySid.set(layout.GetSID(),layout)}GetRuntime(){return this._runtime}SetFirstLayout(layout){this._firstLayout=layout}GetFirstLayout(){if(this._firstLayout)return this._firstLayout;if(this._allLayouts.length)return this._allLayouts[0];throw new Error(\"no first layout\");\n}GetLayoutByName(name){return this._layoutsByName.get(name.toLowerCase())||null}GetLayoutBySID(sid){return this._layoutsBySid.get(sid)||null}GetLayoutByIndex(index){index=C3.clamp(Math.floor(index),0,this._allLayouts.length-1);return this._allLayouts[index]}GetLayout(p){if(typeof p===\"number\")return this.GetLayoutByIndex(p);else return this.GetLayoutByName(p.toString())}GetAllLayouts(){return this._allLayouts}_SetMainRunningLayout(layout){this._mainRunningLayout=layout}GetMainRunningLayout(){return this._mainRunningLayout}_AddRunningSubLayout(layout){if(this._runningSubLayouts.includes(layout))throw new Error(\"layout already running\");\nthis._runningSubLayouts.push(layout)}_RemoveRunningSubLayout(layout){const i=this._runningSubLayouts.indexOf(layout);if(i===-1)throw new Error(\"layout not running\");this._runningSubLayouts.splice(i,1)}*runningLayouts(){if(this._mainRunningLayout)yield this._mainRunningLayout;if(this._runningSubLayouts.length)yield*this._runningSubLayouts}IsLayoutRunning(layout){return this._mainRunningLayout===layout||this._runningSubLayouts.includes(layout)}SetIsEndingLayout(e){if(e)this._isEndingLayout++;else{if(this._isEndingLayout<=\n0)throw new Error(\"already unset\");this._isEndingLayout--}}IsEndingLayout(){return this._isEndingLayout>0}ChangeMainLayout(layout){this._pendingChangeLayout=layout}ClearPendingChangeLayout(){this._pendingChangeLayout=null}IsPendingChangeMainLayout(){return!!this._pendingChangeLayout}GetPendingChangeMainLayout(){return this._pendingChangeLayout}SetAllLayerProjectionChanged(){const runningLayout=this.GetMainRunningLayout();if(!runningLayout)return;runningLayout._SetAllLayersProjectionChanged()}SetAllLayerMVChanged(){const runningLayout=\nthis.GetMainRunningLayout();if(!runningLayout)return;runningLayout._SetAllLayersMVChanged()}};\n\n}\n\n// timelines/timelineManager.js\n{\n'use strict';const C3=self.C3;const NAMES_REGEXP=new RegExp(\"<(.+?)>\",\"g\");\nC3.TimelineManager=class TimelineManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._timelineDataManager=C3.New(C3.TimelineDataManager);this._pluginInstance=null;this._timelines=[];this._timelinesByName=new Map;this._objectClassToTimelineMap=new Map;this._timelinesCreatedByTemplate=new Map;this._scheduledTimelines=[];this._playingTimelines=[];this._markedForRemovalTimelines=[];this._hasRuntimeListeners=false;this._changingLayout=false;this._isTickingTimelines=\nfalse;this._tickFunc=()=>this._OnTick();this._tick2Func=()=>this._OnTick2();this._beforeLayoutChange=()=>this._OnBeforeChangeLayout();this._layoutChange=()=>this._OnAfterChangeLayout();this._instanceDestroy=e=>this._OnInstanceDestroy(e.instance);this._beforeLoad=e=>this._OnBeforeLoad();this._afterLoad=e=>this._OnAfterLoad();this._afterLayoutStart=e=>this._OnAfterLayoutStart();this._destroyedWhileLoadingState=[];this._renderChange=0}Release(){this.RemoveRuntimeListeners();this._tickFunc=null;this._tick2Func=\nnull;this._beforeLayoutChange=null;this._layoutChange=null;this._instanceDestroy=null;this._afterLoad=null;for(const timeline of this._timelines){timeline.Stop();timeline.Release()}C3.clearArray(this._timelines);this._timelines=null;this._timelineDataManager.Release();this._timelineDataManager=null;C3.clearArray(this._scheduledTimelines);this._scheduledTimelines=null;C3.clearArray(this._playingTimelines);this._playingTimelines=null;C3.clearArray(this._markedForRemovalTimelines);this._markedForRemovalTimelines=\nnull;this._timelinesByName.clear();this._timelinesByName=null;this._objectClassToTimelineMap.clear();this._objectClassToTimelineMap=null;this._timelinesCreatedByTemplate.clear();this._timelinesCreatedByTemplate=null;C3.clearArray(this._destroyedWhileLoadingState);this._destroyedWhileLoadingState=null;this._runtime=null}AddRuntimeListeners(){const dispatcher=this._runtime.Dispatcher();dispatcher.addEventListener(\"pretick\",this._tickFunc);dispatcher.addEventListener(\"tick2\",this._tick2Func);dispatcher.addEventListener(\"beforelayoutchange\",\nthis._beforeLayoutChange);dispatcher.addEventListener(\"layoutchange\",this._layoutChange);dispatcher.addEventListener(\"instancedestroy\",this._instanceDestroy);dispatcher.addEventListener(\"beforeload\",this._beforeLoad);dispatcher.addEventListener(\"afterload\",this._afterLoad);dispatcher.addEventListener(\"afterlayoutstart\",this._afterLayoutStart)}RemoveRuntimeListeners(){const dispatcher=this._runtime.Dispatcher();dispatcher.removeEventListener(\"pretick\",this._tickFunc);dispatcher.removeEventListener(\"tick2\",\nthis._tick2Func);dispatcher.removeEventListener(\"beforelayoutchange\",this._beforeLayoutChange);dispatcher.removeEventListener(\"layoutchange\",this._layoutChange);dispatcher.removeEventListener(\"instancedestroy\",this._instanceDestroy);dispatcher.removeEventListener(\"beforeload\",this._beforeLoad);dispatcher.removeEventListener(\"afterload\",this._afterLoad);dispatcher.removeEventListener(\"afterlayoutstart\",this._afterLayoutStart)}Create(timelineData){this._timelineDataManager.Add(timelineData);const timeline=\nC3.TimelineState.CreateInitial(timelineData,this);this.Add(timeline);this.SetTimelineObjectClassesToMap(timeline);this._timelinesCreatedByTemplate.set(timeline.GetName(),0)}CreateFromTemplate(template){const timelineDataManager=this.GetTimelineDataManager();const templateName=template.GetTemplateName();const timelineDataItem=timelineDataManager.Get(templateName);const timeline=C3.TimelineState.CreateFromTemplate(`${templateName}:${this._timelinesCreatedByTemplate.get(templateName)}`,timelineDataItem,\nthis);this._IncreaseTemplateTimelinesCount(templateName);this.Add(timeline);return timeline}_IncreaseTemplateTimelinesCount(templateName){this._timelinesCreatedByTemplate.set(templateName,this._timelinesCreatedByTemplate.get(templateName)+1)}_SetCreatedTemplateTimelinesCount(){for(const timeline of this._timelines){if(timeline.IsTemplate())continue;const templateName=timeline.GetTemplateName();this._IncreaseTemplateTimelinesCount(templateName)}}_ClearCreatedTemplateTimelinesCount(){for(const templateName of this._timelinesCreatedByTemplate.keys())this._timelinesCreatedByTemplate.set(templateName,\n0)}Add(timeline){this._timelines.push(timeline);this._timelinesByName.set(timeline.GetName().toLowerCase(),timeline)}Remove(timeline){timeline.Removed();if(timeline.IsTemplate())return;C3.arrayFindRemove(this._timelines,timeline);C3.arrayFindRemove(this._scheduledTimelines,timeline);C3.arrayFindRemove(this._playingTimelines,timeline);C3.arrayFindRemove(this._markedForRemovalTimelines,timeline);this._timelinesByName.delete(timeline.GetName().toLowerCase());this.RemoveTimelineFromObjectClassMap(timeline);\nif(!timeline.IsReleased())timeline.Release()}Trigger(method){this._runtime.Trigger(method,this._pluginInstance,null)}GetRuntime(){return this._runtime}GetTimelineDataManager(){return this._timelineDataManager}SetPluginInstance(inst){this._pluginInstance=inst}GetPluginInstance(){return this._pluginInstance}*GetTimelines(){for(const timeline of this._timelines)yield timeline}*GetPlayingTimelines(){for(const timeline of this._playingTimelines)yield timeline}SetTimelineObjectClassToMap(objectClass,timeline){if(!this._objectClassToTimelineMap.has(objectClass))this._objectClassToTimelineMap.set(objectClass,\nnew Set);this._objectClassToTimelineMap.get(objectClass).add(timeline)}SetTimelineObjectClassesToMap(timeline){for(const objectClass of timeline.GetObjectClasses())this.SetTimelineObjectClassToMap(objectClass,timeline)}RemoveTimelineFromObjectClassMap(timeline){for(const [objectClass,timelines]of this._objectClassToTimelineMap.entries())if(timelines.has(timeline)){timelines.delete(timeline);if(timelines.size===0)this._objectClassToTimelineMap.delete(objectClass)}}GetTimelinesForObjectClass(objectClass){if(!this._objectClassToTimelineMap.has(objectClass))return;\nreturn this._objectClassToTimelineMap.get(objectClass)}GetTimelineOfTemplateForInstances(templateTimeline,instancesObject){if(!instancesObject)return;for(const timeline of this._timelines){const found=instancesObject.every(io=>{return timeline.HasTrackInstance(io.instance,io.trackId)});if(found)if(timeline.GetName().includes(templateTimeline.GetName()))return timeline}}GetTimelineByName(name){return this._timelinesByName.get(name.toLowerCase())||null}GetScheduledOrPlayingTimelineByName(name){for(const timeline of this._scheduledTimelines)if(timeline.GetName()===\nname)return timeline;for(const timeline of this._playingTimelines)if(timeline.GetName()===name)return timeline;return null}*GetTimelinesByName(name){if(NAMES_REGEXP.test(name)){NAMES_REGEXP.lastIndex=0;let match;const uniqueNames=new Set;do{match=NAMES_REGEXP.exec(name);if(match){const names=match[1].split(\",\");for(const name of names)uniqueNames.add(name)}}while(match);for(const name of uniqueNames.values()){const timeline=this.GetTimelineByName(name);if(timeline)yield timeline}uniqueNames.clear()}else{const timeline=\nthis.GetTimelineByName(name);if(timeline)yield timeline}}*GetTimelinesByTags(tags){for(const timeline of this._timelines)if(timeline.HasTags(tags))yield timeline}AddScheduledTimeline(timeline){if(!this._scheduledTimelines.includes(timeline))this._scheduledTimelines.push(timeline);this._MaybeEnableRuntimeListeners()}RemovePlayingTimeline(timeline){C3.arrayFindRemove(this._playingTimelines,timeline);this._MaybeDisableRuntimeListeners()}ScheduleTimeline(timeline){if(this._playingTimelines.includes(timeline)){timeline.SetPlaying(true);\ntimeline.SetScheduled(false);timeline.SetMarkedForRemoval(false)}else{timeline.SetPlaying(false);timeline.SetScheduled(true);timeline.SetMarkedForRemoval(false);if(!this._scheduledTimelines.includes(timeline))this._scheduledTimelines.push(timeline)}this._MaybeEnableRuntimeListeners()}DeScheduleTimeline(timeline){timeline.SetPlaying(false);timeline.SetScheduled(false);timeline.ResolvePlayPromise();C3.arrayFindRemove(this._scheduledTimelines,timeline);this._MaybeDisableRuntimeListeners()}CompleteTimeline(timeline){timeline.SetPlaying(false);\ntimeline.SetScheduled(false);if(this._playingTimelines.includes(timeline)){timeline.SetMarkedForRemoval(true);this._markedForRemovalTimelines.push(timeline);C3.arrayFindRemove(this._playingTimelines,timeline)}}CompleteTimelineBeforeChangeOfLayout(timeline){timeline.SetPlaying(false);timeline.SetScheduled(false);timeline.SetMarkedForRemoval(false);timeline.SetPlaybackRate(1);C3.arrayFindRemove(this._playingTimelines,timeline)}CompleteTimelineAndResolve(timeline){this.CompleteTimeline(timeline);timeline.ResolvePlayPromise()}_OnTick(){if(this.GetRuntime().IsLoadingState())return;\nif(!this._hasRuntimeListeners)return;if(this._changingLayout)return;this._isTickingTimelines=true;while(this._scheduledTimelines.length){const t=this._scheduledTimelines.pop();t.SetInitialState();if(t.GetRenderChange()!==0)this._renderChange=1;this._playingTimelines.push(t)}const dt=this._runtime._GetDtFast();const dt1=this._runtime.GetDt1();const ts=this._runtime.GetTimeScale();for(let i=this._playingTimelines.length-1;i>=0;i--){const t=this._playingTimelines[i];if(t)t.Tick(dt,ts,dt1)}this._isTickingTimelines=\nfalse;if(this._renderChange!==0)this.GetRuntime().UpdateRender()}_OnTick2(){if(this.GetRuntime().IsLoadingState())return;if(!this._hasRuntimeListeners)return;if(this._changingLayout)return;let timelinesToRemove;for(let i=0,l=this._markedForRemovalTimelines.length;i<l;i++){const t=this._markedForRemovalTimelines[i];if(!timelinesToRemove)timelinesToRemove=new Set;t.Removed();this._MaybeExecuteTimelineFinishTriggers(t);timelinesToRemove.add(t)}if(timelinesToRemove){C3.arrayRemoveAllInSet(this._markedForRemovalTimelines,\ntimelinesToRemove);this._renderChange=0;for(let i=0,l=this._playingTimelines.length;i<l;i++)if(this._playingTimelines[i].GetRenderChange()!==0){this._renderChange=1;break}}this._MaybeDisableRuntimeListeners()}_MaybeExecuteTimelineFinishTriggers(timeline){if(timeline.IsReleased())return;if(!timeline.HasValidTracks())return;if(timeline.IsComplete()&&timeline.InitialStateSet())timeline.FinishTriggers()}_MaybeEnableRuntimeListeners(){if(this._hasRuntimeListeners)return;this._hasRuntimeListeners=true}_MaybeDisableRuntimeListeners(){if(this._markedForRemovalTimelines.length)return;\nif(this._playingTimelines.length)return;if(this._scheduledTimelines.length)return;if(this._isTickingTimelines)return;this._hasRuntimeListeners=false}_OnBeforeChangeLayout(){this._changingLayout=true;while(this._scheduledTimelines.length)this.DeScheduleTimeline(this._scheduledTimelines.pop());const timelinesToRemove=new Set;for(const t of this._playingTimelines){const remove=t._OnBeforeChangeLayout();if(remove){t.Removed();timelinesToRemove.add(t)}}C3.arrayRemoveAllInSet(this._playingTimelines,timelinesToRemove);\ntimelinesToRemove.clear();for(const t of this._markedForRemovalTimelines){const remove=t._OnBeforeChangeLayout();if(remove){t.Removed();timelinesToRemove.add(t)}}C3.arrayRemoveAllInSet(this._markedForRemovalTimelines,timelinesToRemove);this._MaybeDisableRuntimeListeners();for(const timeline of this._timelines)timeline.CleanCaches()}_OnAfterChangeLayout(){this._changingLayout=false}_OnInstanceDestroy(instance){const objectClass=instance.GetObjectClass();const timelines=this.GetTimelinesForObjectClass(objectClass);\nif(!timelines)return;if(this._runtime.IsLoadingState())this._destroyedWhileLoadingState.push(instance);else for(const timeline of timelines){if(timeline.IsTemplate())continue;if(timeline.IsReleased()){this.Remove(timeline);continue}if(!timeline.HasValidTracks()){this._MaybeExecuteTimelineFinishTriggers(timeline);this.Remove(timeline)}}}_OnBeforeLoad(){for(const timeline of this._scheduledTimelines.map(t=>t)){this._MaybeExecuteTimelineFinishTriggers(timeline);this.Remove(timeline)}for(const timeline of this._playingTimelines.map(t=>\nt)){this._MaybeExecuteTimelineFinishTriggers(timeline);this.Remove(timeline)}}_OnAfterLoad(){for(const destroyedInstance of this._destroyedWhileLoadingState)this._OnInstanceDestroy(destroyedInstance);C3.clearArray(this._destroyedWhileLoadingState)}_OnAfterLayoutStart(){const layoutManager=this._runtime.GetLayoutManager();const runningLayout=layoutManager.GetMainRunningLayout();if(!runningLayout)return;for(const timeline of this._timelines){const startOnLayout=timeline.GetStartOnLayout();if(!startOnLayout)continue;\nif(runningLayout.GetName()===startOnLayout)this.ScheduleTimeline(timeline)}}_SaveToJson(){return{\"timelinesJson\":this._SaveTimelinesToJson(),\"scheduledTimelinesJson\":this._SaveScheduledTimelinesToJson(),\"playingTimelinesJson\":this._SavePlayingTimelinesToJson(),\"markedForRemovalTimelinesJson\":this._SaveMarkedForRemovalTimelinesToJson(),\"hasRuntimeListeners\":this._hasRuntimeListeners,\"changingLayout\":this._changingLayout,\"isTickingTimelines\":this._isTickingTimelines}}_LoadFromJson(o){if(!o)return;this._ClearCreatedTemplateTimelinesCount();\nthis._LoadTimelinesFromJson(o[\"timelinesJson\"]);this._LoadScheduledTimelinesFromJson(o[\"scheduledTimelinesJson\"]);this._LoadPlayingTimelinesFromJson(o[\"playingTimelinesJson\"]);this._LoadMarkedForRemovalTimelinesFromJson(o[\"markedForRemovalTimelinesJson\"]);this._hasRuntimeListeners=!o[\"hasRuntimeListeners\"];this._changingLayout=!!o[\"changingLayout\"];this._isTickingTimelines=!!o[\"isTickingTimelines\"];this._SetCreatedTemplateTimelinesCount();this._MaybeEnableRuntimeListeners();this._MaybeDisableRuntimeListeners()}_SaveTimelinesToJson(){return this._timelines.map(timelineState=>\ntimelineState._SaveToJson())}_LoadTimelinesFromJson(timelinesJson){for(const timelineJson of timelinesJson){let timeline=this.GetTimelineByName(timelineJson[\"name\"]);if(timeline)timeline._LoadFromJson(timelineJson);else{const templateName=this._GetTemplateNameFromJson(timelineJson);if(!templateName)continue;const templateTimeline=this.GetTimelineByName(templateName);timeline=this.CreateFromTemplate(templateTimeline);timeline._LoadFromJson(timelineJson)}if(!timeline.HasTracks())this.Remove(timeline)}}_GetTemplateNameFromJson(timelineJson){const name=\ntimelineJson[\"name\"];const nameParts=name.split(\":\");if(!nameParts||nameParts.length!==2)return null;return nameParts[0]}_SaveScheduledTimelinesToJson(){return this._SaveTimelines(this._scheduledTimelines)}_LoadScheduledTimelinesFromJson(scheduledTimelinesJson){this._LoadTimelines(scheduledTimelinesJson,this._scheduledTimelines)}_SavePlayingTimelinesToJson(){return this._SaveTimelines(this._playingTimelines)}_LoadPlayingTimelinesFromJson(playingTimelinesJson){this._LoadTimelines(playingTimelinesJson,\nthis._playingTimelines)}_SaveMarkedForRemovalTimelinesToJson(){return this._SaveTimelines(this._markedForRemovalTimelines)}_LoadMarkedForRemovalTimelinesFromJson(markedForRemovalTimelinesJson){this._LoadTimelines(markedForRemovalTimelinesJson,this._markedForRemovalTimelines)}_IsTimelineInJson(timeline,json){if(!json)return false;for(const name of json)if(name===timeline.GetName())return true;return false}_SaveTimelines(collection){return collection.map(t=>t.GetName())}_LoadTimelines(timelinesJson,\ncollection){const timelinesToRemove=new Set;for(const timeline of collection)if(!this._IsTimelineInJson(timeline,timelinesJson))timelinesToRemove.add(timeline);C3.arrayRemoveAllInSet(collection,timelinesToRemove);if(timelinesJson){const ff=tn=>t=>t.GetName()===tn;for(const name of timelinesJson){const timeline=this.GetTimelineByName(name);if(timeline){const t=collection.find(ff(name));if(!t)collection.push(timeline)}}}}};\n\n}\n\n// timelines/timelineInfo.js\n{\n'use strict';const C3=self.C3;const STEPS=100;const LENGTH_STEP_SIZE=.01;const BEZIER_STEP_SIZE=30;const TANGENT_RESULT=[0,0];const MAP_RESULT=[0,0];const PROJECTION_RESULT=[0,0,0,0,0];\nC3.TimelineInfo=class TimelineInfo{constructor(timeline,trackId){this._initialized=false;this._timeline=timeline;this._segments=[];let trackState=null;if(trackId)trackState=this._timeline.GetTrackById(trackId);else trackState=C3.first(this._timeline.GetTracks());if(!trackState)return;const xTrack=trackState.GetPropertyTrack(\"offsetX\");const yTrack=trackState.GetPropertyTrack(\"offsetY\");if(!xTrack||!yTrack)return;this._xTrack=xTrack;this._yTrack=yTrack;const xPropertyKeyframes=xTrack.GetPropertyKeyframeDataItemArrayIncludingDisabled();\nconst yPropertyKeyframes=yTrack.GetPropertyKeyframeDataItemArrayIncludingDisabled();for(let i=1,len=Math.min(xPropertyKeyframes.length,yPropertyKeyframes.length);i<len;++i){const startX=xPropertyKeyframes[i];const endX=startX.GetNext();const prevX=startX.GetPrevious();const startY=yPropertyKeyframes[i];const endY=startY.GetNext();const prevY=startY.GetPrevious();if(prevX&&prevX.GetPathMode()===\"cubic-bezier\"&&prevY&&prevY.GetPathMode()===\"cubic-bezier\")this._segments.push(C3.New(C3.TimelineCubicBezierSegmentInfo,\nprevX,prevY,startX,startY,this._segments.length));else if(prevX&&prevX.GetPathMode()===\"line\"&&prevY&&prevY.GetPathMode()===\"line\")this._segments.push(C3.New(C3.TimelineLineSegmentInfo,startX,startY,this._segments.length));else this._segments.push(C3.New(C3.TimelineLineSegmentInfo,startX,startY,this._segments.length))}this._initialized=true}Release(){for(const segment of this._segments)segment.Release();C3.clearArray(this._segments);this._segments=null;this._timeline=null;this._xTrack=null;this._yTrack=\nnull}WasInitialized(){return this._initialized}segments(){return this._segments}SetOrigin(wi){const ox=this._xTrack.GetResultMode()===\"relative\"?wi.GetX():0;const oy=this._yTrack.GetResultMode()===\"relative\"?wi.GetY():0;for(const segment of this._segments)segment.SetOrigin(ox,oy)}Project(x,y,opts){if(opts&&opts.tRange){if(!C3.IsFiniteNumber(opts.tRange[0]))opts.tRange[0]=0;if(!C3.IsFiniteNumber(opts.tRange[1]))opts.tRange[1]=1}const ret=[];for(const segment of this._segments)if(segment.GetType()===\n\"cubic-bezier\"){const p=segment.Project(x,y,opts?opts.tRange:null);p[4]=segment.GetIndex();ret.push(JSON.parse(JSON.stringify(p)))}ret.sort((f,s)=>f[3]-s[3]);return ret[0]}Tangent(t,segmentIndex){return this._segments[segmentIndex].Tangent(t)}TangentAngle(x,y,t,segmentIndex){return this._segments[segmentIndex].TangentAngle(x,y,t)}};\nC3.TimelineCubicBezierSegmentInfo=class TimelineCubicBezierSegmentInfo{constructor(startX,startY,endX,endY,index){this._index=index;const startXAddon=startX.GetAddOn(\"cubic-bezier\");const endXAddon=endX.GetAddOn(\"cubic-bezier\");const startYAddon=startY.GetAddOn(\"cubic-bezier\");const endYAddon=endY.GetAddOn(\"cubic-bezier\");this._aX=startX.GetValueWithResultMode();this._aY=startY.GetValueWithResultMode();this._bX=startX.GetValueWithResultMode()+startXAddon.GetStartAnchor();this._bY=startY.GetValueWithResultMode()+\nstartYAddon.GetStartAnchor();this._cX=endX.GetValueWithResultMode()+endXAddon.GetEndAnchor();this._cY=endY.GetValueWithResultMode()+endYAddon.GetEndAnchor();this._dX=endX.GetValueWithResultMode();this._dY=endY.GetValueWithResultMode();this._initialized=false;this._len=STEPS;this._arcLengths=new Array(this._len+1);this._arcLengths[0]=0;this._length=0;this._lut=[];this._CalculateLength()}Release(){C3.clearArray(this._arcLengths);this._arcLengths=null;C3.clearArray(this._lut);this._lut=null}GetType(){return\"cubic-bezier\"}GetIndex(){return this._index}GetStepCount(){return Math.floor(this._length/\nBEZIER_STEP_SIZE)}GetStepIncrement(){return 1/this.GetStepCount()}SetOrigin(ox,oy){this._originX=ox;this._originY=oy;this._arcLengths=new Array(this._len+1);this._arcLengths[0]=0;this._CalculateLength()}Map(u){if(!this._initialized)return NaN;const mt=this._Map(u);MAP_RESULT[0]=this._X(mt);MAP_RESULT[1]=this._Y(mt);return MAP_RESULT}Project(x,y,tRange){const lut=this._GenerateLUT(STEPS);const i=this._FindClosestFromLUT(x,y,lut,tRange);const p=this._RefineProjection(x,y,lut,i);PROJECTION_RESULT[0]=\np.x;PROJECTION_RESULT[1]=p.y;PROJECTION_RESULT[2]=p.t;PROJECTION_RESULT[3]=p.distance;return PROJECTION_RESULT}Tangent(t){const mt=1-t;const a=mt*mt;const b=2*mt*t;const c=t*t;const d0x=3*(this._bX+this._originX-(this._aX+this._originX));const d0y=3*(this._bY+this._originY-(this._aY+this._originY));const d1x=3*(this._cX+this._originX-(this._bX+this._originX));const d1y=3*(this._cY+this._originY-(this._bY+this._originY));const d2x=3*(this._dX+this._originX-(this._cX+this._originX));const d2y=3*(this._dY+\nthis._originY-(this._cY+this._originY));const dx=a*d0x+b*d1x+c*d2x;const dy=a*d0y+b*d1y+c*d2y;const m=Math.hypot(dx,dy);TANGENT_RESULT[0]=dx/m;TANGENT_RESULT[1]=dy/m;return TANGENT_RESULT}TangentAngle(x,y,t){const tanget=this.Tangent(t);const angle=C3.angleTo(x,y,x+tanget[0],y+tanget[1]);return angle}_Map(u){if(!this._initialized)return;let targetLength=u*this._arcLengths[this._len];let low=0;let high=this._len;let index=0;while(low<high){index=low+((high-low)/2|0);if(this._arcLengths[index]<targetLength)low=\nindex+1;else high=index}if(this._arcLengths[index]>targetLength)index--;const lengthBefore=this._arcLengths[index];if(lengthBefore===targetLength)return index/this._len;else return(index+(targetLength-lengthBefore)/(this._arcLengths[index+1]-lengthBefore))/this._len}_X(t){if(!this._initialized)return NaN;return self.Ease.GetRuntimeEase(\"cubicbezier\")(t,this._aX+this._originX,this._bX+this._originX,this._cX+this._originX,this._dX+this._originX)}_Y(t){if(!this._initialized)return NaN;return self.Ease.GetRuntimeEase(\"cubicbezier\")(t,\nthis._aY+this._originY,this._bY+this._originY,this._cY+this._originY,this._dY+this._originY)}_GenerateLUT(steps){steps=steps||STEPS;if(this._lut.length===steps)return this._lut;this._lut=[];steps++;for(let i=0;i<steps;i++){const t=i/(steps-1);const x=this._X(t);const y=this._Y(t);this._lut.push({x:x,y:y,t:t,distance:0})}return this._lut}_FindClosestFromLUT(x,y,LUT,tRange=null,distance=Number.MAX_SAFE_INTEGER){let i=0;LUT.forEach((p,index)=>{p.t=index/(LUT.length-1);p.distance=C3.distanceTo(x,y,p.x,\np.y);if(tRange&&C3.IsArray(tRange)&&C3.IsFiniteNumber(tRange[0])&&C3.IsFiniteNumber(tRange[1])){if(p.t>=tRange[0]&&p.t<=tRange[1])if(p.distance<distance){distance=p.distance;i=index}}else if(p.distance<distance){distance=p.distance;i=index}});return i}_RefineProjection(x,y,LUT,i,targetDistance=0,epsilon=1){let q=LUT[i];let count=1;let distance=Number.MAX_SAFE_INTEGER;do{let i1=i===0?0:i-1;let i2=i===LUT.length-1?LUT.length-1:i+1;let t1=LUT[i1].t;let t2=LUT[i2].t;let lut=[];let step=(t2-t1)/4;if(step<\n.001)break;lut.push(LUT[i1]);for(let j=1;j<=3;j++){const t=t1+j*step;const pathX=this._X(t);const pathY=this._Y(t);const pathDistance=Math.abs(C3.distanceTo(pathX,pathY,x,y)-targetDistance);if(pathDistance<distance){distance=pathDistance;q={x:pathX,y:pathY,t:t,distance:pathDistance};i=j}lut.push({x:pathX,y:pathY,t:t,distance:pathDistance})}lut.push(LUT[i2]);LUT=lut}while(count++<25);if(targetDistance&&distance>epsilon)q=null;return q}_CalculateLength(){this._initialized=true;let ox=this._X(0);let oy=\nthis._Y(0);let clen=0;for(let i=1;i<=this._len;i++){const x=this._X(i*LENGTH_STEP_SIZE);const y=this._Y(i*LENGTH_STEP_SIZE);const dx=ox-x;const dy=oy-y;clen+=Math.hypot(dx,dy);this._arcLengths[i]=clen;ox=x;oy=y}this._length=clen}};\nC3.TimelineLineSegmentInfo=class TimelineLineSegmentInfo{constructor(startX,startY,index){this._index=index;this._targetX=startX.GetValueWithResultMode();this._targetY=startY.GetValueWithResultMode();this._originX=0;this._originY=0}Release(){}GetType(){return\"line\"}GetIndex(){return this._index}SetOrigin(ox,oy){this._originX=ox;this._originY=oy}GetX(){return this._targetX+this._originX}GetY(){return this._targetY+this._originY}};\n\n}\n\n// timelines/state/timelineState.js\n{\n'use strict';const C3=self.C3;const PING_PONG_BEGIN=0;const PING_PONG_END=1;\nC3.TimelineState=class Timeline extends C3.DefendedBase{constructor(name,timelineDataItem,timelineManager){super();this._runtime=timelineManager.GetRuntime();this._timelineManager=timelineManager;this._timelineDataItem=timelineDataItem;this._name=name;this._tracks=[];this._tracksLength=0;this._beforeAndAfterTracks=null;this._beforeAndAfterTracksLength=0;this.CreateTrackStates();this._playPromise=null;this._playResolve=null;this._playheadTime=0;this._playbackRate=1;this._pingPongState=PING_PONG_BEGIN;\nthis._currentRepeatCount=1;this._isPlaying=false;this._isScheduled=false;this._initialStateSet=false;this._complete=true;this._released=false;this._markedForRemoval=false;this._completedTick=-1;this._implicitPause=false;this._isTemplate=false;this._finishedTriggers=false;this._firstTick=false;this._lastDelta=NaN;this._tags=[\"\"];this._stringTags=\"\";this._tagsChanged=false;this._renderChange=0;this._hasNestedContent=0;this._iTimelineState=null}static CreateInitial(timelineDataJson,timelineManager){const timelineDataManager=\ntimelineManager.GetTimelineDataManager();const nameId=timelineDataManager.GetNameId();const timelineDataItem=timelineDataManager.Get(timelineDataJson[nameId]);const timeline=C3.New(C3.TimelineState,timelineDataJson[nameId],timelineDataItem,timelineManager);timeline.SetIsTemplate(true);return timeline}static CreateFromTemplate(name,timelineDataItem,timelineManager){return C3.New(C3.TimelineState,name,timelineDataItem,timelineManager)}Release(){if(this.IsReleased())return;const dispatcher=this._runtime.Dispatcher();\nthis._timelineManager.DeScheduleTimeline(this);this._timelineManager.CompleteTimelineAndResolve(this);for(const track of this._tracks)track.Release();C3.clearArray(this._tracks);this._tracks=null;this._runtime=null;this._timelineManager=null;this._timelineDataItem=null;this._released=true;this._playPromise=null;this._playResolve=null;this.FireReleaseEvent(dispatcher)}FireReleaseEvent(dispatcher){const event=C3.New(C3.Event,\"timelinestatereleased\");event.timelineState=this;dispatcher.dispatchEvent(event)}GetType(){return 0}CreateTrackStates(){for(const trackDataItem of this._timelineDataItem.GetTrackData().trackDataItems())this._tracksLength=\nthis._tracks.push(C3.TrackState.Create(this,trackDataItem))}GetTimelineManager(){return this._timelineManager}GetRuntime(){return this._runtime}GetTracks(){return this._tracks}GetSimilarPropertyTracks(instance,sourceAdapter,propertyName,propertyTrack){if(!this._hasNestedContent)return;let ret;for(let i=0;i<this._tracks.length;i++){let track=this._tracks[i];if(instance!==track.GetInstance())continue;const pt=track.GetPropertyTrack(propertyName);if(!pt)continue;if(sourceAdapter.constructor!==pt.GetSourceAdapter().constructor)continue;\nif(pt.GetResultMode()!==propertyTrack.GetResultMode())continue;if(!ret)ret=[];ret.push(pt)}return ret}HasTracks(){return!!this._tracks.length}GetTrackById(trackId){for(const track of this._tracks)if(C3.equalsNoCase(track.GetId(),trackId))return track;return null}GetTrackByName(name){for(const track of this._tracks){if(track.IsInstanceTrack())continue;if(C3.equalsNoCase(track.GetName(),name))return track}return null}SetName(name){this._name=name}GetName(){return this._name}GetTimelineDataItem(){return this._timelineDataItem}GetTemplateName(){return this._timelineDataItem.GetName()}GetTotalTime(){return this._timelineDataItem.GetTotalTime()}SetTotalTime(tt){this._timelineDataItem.SetTotalTime(tt)}GetStep(){return this._timelineDataItem.GetStep()}SetStep(s){this._timelineDataItem.SetStep(s)}GetInterpolationMode(){return this._timelineDataItem.GetInterpolationMode()}SetInterpolationMode(im){this._timelineDataItem.SetInterpolationMode(im)}GetResultMode(){return this._timelineDataItem.GetResultMode()}SetResultMode(rm){this._timelineDataItem.GetResultMode(rm)}SetEase(e){for(const track of this.GetTracks())track.SetEase(e)}GetLoop(){return this._timelineDataItem.GetLoop()}SetLoop(l){return this._timelineDataItem.SetLoop(l)}GetPingPong(){return this._timelineDataItem.GetPingPong()}SetPingPong(p){return this._timelineDataItem.SetPingPong(p)}GetRepeatCount(){return this._timelineDataItem.GetRepeatCount()}SetRepeatCount(rc){return this._timelineDataItem.SetRepeatCount(rc)}SetPlaybackRate(r){return this._playbackRate=\nr}GetPlaybackRate(){return this._playbackRate}GetStartOnLayout(){return this._timelineDataItem.GetStartOnLayout()}GetTransformWithSceneGraph(){return this._timelineDataItem.GetTransformWithSceneGraph()}GetUseSystemTimescale(){return this._timelineDataItem.GetUseSystemTimescale()}IsForwardPlayBack(){if(!this.IsPlaying())return true;return this._playbackRate>0}GetPlayPromise(){if(this._playPromise)return this._playPromise;this._playPromise=new Promise(resolve=>{this._playResolve=resolve});return this._playPromise}ResolvePlayPromise(){if(!this._playPromise)return;\nthis._playResolve();this._playPromise=null;this._playResolve=null}SetTags(tags){this._tags=C3.TimelineState._GetTagArray(tags);this._tagsChanged=true}GetTags(){return this._tags}GetStringTags(){if(this._tagsChanged)this._stringTags=this._tags.join(\" \");this._tagsChanged=false;return this._stringTags}HasTags(tags){if(!this._tags)return false;if(!this._tags.length)return false;const t=C3.TimelineState._GetTagArray(tags);if(!t)return false;if(!t.length)return false;return t.every(C3.TimelineState._HasTag,\nthis)}OnStarted(){if(!C3.Plugins.Timeline||this.constructor!==C3.TimelineState)return;C3.Plugins.Timeline.Cnds.PushTriggerTimeline(this);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineStarted);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineStartedByName);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineStartedByTags);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnAnyTimelineStarted);C3.Plugins.Timeline.Cnds.PopTriggerTimeline()}OnCompleted(){this._completedTick=\nthis._runtime.GetTickCount()}FinishTriggers(){if(this._finishedTriggers)return;this._finishedTriggers=true;if(!C3.Plugins.Timeline||this.constructor!==C3.TimelineState)return;C3.Plugins.Timeline.Cnds.PushTriggerTimeline(this);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineFinished);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineFinishedByName);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineFinishedByTags);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnAnyTimelineFinished);\nC3.Plugins.Timeline.Cnds.PopTriggerTimeline()}SetPlaying(p){this._isPlaying=p}IsCompletedTick(){return this._completedTick===this._runtime.GetTickCount()}IsPlaying(playingOnly=false){if(this.IsCompletedTick())return true;if(this.IsScheduled()&&!playingOnly)return true;return this._isPlaying}_IsPlaying(){return this.IsPlaying(true)}IsPaused(){return this._IsPaused()}_IsPaused(){if(this.IsReleased())return false;if(this.IsScheduled())return false;if(this._IsPlaying())return false;if(this.IsComplete())return false;\nreturn true}SetScheduled(s){this._isScheduled=s}IsScheduled(){return this._isScheduled}SetComplete(c){this._complete=c;const t=this.GetTime();if(t<=0||t>=this.GetTotalTime())this._complete=true}IsComplete(){return this._complete}IsReleased(){return this._released}SetMarkedForRemoval(mfr){this._markedForRemoval=mfr}IsMarkedForRemoval(){return this._markedForRemoval}SetImplicitPause(ip){this._implicitPause=ip}IsImplicitPause(){return this._implicitPause}SetIsTemplate(it){this._isTemplate=!!it}IsTemplate(){return this._isTemplate}InitialStateSet(){return this._initialStateSet}GetTime(){return this._playheadTime}SetTime(time){const lastGlobalTime=\nthis.GetTime();this._SetTime(time);this.SetComplete(false);if(!this.IsComplete())this.SetImplicitPause(true);if(!this._IsPlaying()&&!this.IsScheduled()&&this._initialStateSet);else if(!this._IsPlaying()&&!this.IsScheduled()&&!this._initialStateSet)this.SetInitialStateFromSetTime();else if(this._IsPlaying())this.Stop();else if(this.IsScheduled()){this._timelineManager.DeScheduleTimeline(this);this.SetInitialStateFromSetTime()}this._SetUpdateStateBefore();this._Interpolate(this.GetTime(),false,true,\ntrue,lastGlobalTime);this._SetUpdateStateAfter();if(this._renderChange)this.GetRuntime().UpdateRender();this._OnSetTime()}_SetTime(time){if(!C3.IsFiniteNumber(time))time=this.GetTotalTime();if(time<0)this._playheadTime=0;else if(time>=this.GetTotalTime())this._playheadTime=this.GetTotalTime();else this._playheadTime=time}_SetTimeAndReset(time){if(!C3.IsFiniteNumber(time))time=this.GetTotalTime();if(time<0)this._playheadTime=0;else if(time>=this.GetTotalTime())this._playheadTime=this.GetTotalTime();\nelse this._playheadTime=time;for(const track of this._tracks)track.SetResetState()}_OnSetTime(){if(!C3.Plugins.Timeline||this.constructor!==C3.TimelineState)return;C3.Plugins.Timeline.Cnds.PushTriggerTimeline(this);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimeSet);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimeSetByName);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimeSetByTags);C3.Plugins.Timeline.Cnds.PopTriggerTimeline()}_CanResume(){if(this.GetLoop())return true;\nelse if(this.GetPingPong()&&this._pingPongState===PING_PONG_END)if(this.IsForwardPlayBack()){if(this.GetTime()>=this.GetTotalTime())return false}else{if(this.GetTime()<=0)return false}else if(!this.GetLoop()&&!this.GetPingPong())if(this.IsForwardPlayBack()){if(this.GetTime()>=this.GetTotalTime())return false}else if(this.GetTime()<=0)return false;return true}Resume(){if(this.IsReleased())return;if(this._CanResume())this.Play(true)}Play(resume=false){if(this.IsReleased())return false;if(this.IsScheduled())return false;\nif(this._IsPlaying()&&this.IsCompletedTick())return this._SchedulePlayingTimeline();if(this._IsPlaying())return false;if(!this.IsComplete()&&!resume&&!this.IsImplicitPause())return false;return this._ScheduleStoppedTimeline()}_SchedulePlayingTimeline(){this.SetImplicitPause(false);this._timelineManager.RemovePlayingTimeline(this);this._timelineManager.ScheduleTimeline(this);this.GetPlayPromise();return true}_ScheduleStoppedTimeline(){this.SetImplicitPause(false);this._timelineManager.ScheduleTimeline(this);\nthis.GetPlayPromise();return true}Stop(completed=false){if(this.IsReleased())return;this.SetComplete(completed);this._timelineManager.CompleteTimeline(this);if(this.IsComplete())this.ResolvePlayPromise()}Reset(render=true,beforeChangeLayout=false){if(this.IsReleased())return;if(!this._IsPlaying()&&this.IsScheduled())return this._timelineManager.DeScheduleTimeline(this);if(this.IsComplete())return;this.Stop(true);if(this.IsForwardPlayBack())this._SetTime(0);else this._SetTime(this.GetTotalTime());\nconst time=this.GetTime();this._SetUpdateStateBefore();if(beforeChangeLayout)this._InterpolateBeforeChangeLayout(time);else this._Interpolate(time,false,false,true);if(render)this._OnSetTime();this._SetUpdateStateAfter();if(this._renderChange&&render)this.GetRuntime().UpdateRender()}ResetBeforeChangeLayout(){this.Reset(false,true)}_InterpolateBeforeChangeLayout(time){this._Interpolate(time,false,false,true,NaN,false,true)}_OnBeforeChangeLayout(){if(this.IsReleased())return true;if(!this.GetRuntime().IsLoadingState())if(this.HasValidGlobalTracks())return false;\nthis._timelineManager.CompleteTimelineBeforeChangeOfLayout(this);if(!this.GetRuntime().IsLoadingState())this.ResetBeforeChangeLayout();return true}SetInitialStateFromSetTime(){this.SetInitialState(true)}SetInitialState(fromSetTime){if(this.IsMarkedForRemoval())return;if(fromSetTime){this._finishedTriggers=false;this._initialStateSet=true;this._firstTick=true;this._SetUpdateStateBefore();for(const track of this._tracks)track.SetInitialState();this._SetUpdateStateAfter()}else{this.SetPlaying(true);\nthis.SetScheduled(false);this.OnStarted();if(this.IsComplete()){this._completedTick=-1;if(this._pingPongState!==PING_PONG_BEGIN)this._playbackRate=Math.abs(this._playbackRate);this._pingPongState=PING_PONG_BEGIN;this._currentRepeatCount=1;this._complete=false;this._finishedTriggers=false;this._initialStateSet=true;this._firstTick=true;if(this.IsForwardPlayBack())this._SetTime(0);else this._SetTime(this.GetTotalTime());this._SetUpdateStateBefore();for(const track of this._tracks)track.SetInitialState();\nthis._SetUpdateStateAfter()}else{this._firstTick=true;this._finishedTriggers=false;this._SetUpdateStateBefore();for(const track of this._tracks)track.SetResumeState();this._SetUpdateStateAfter()}}}GetRenderChange(){return this._renderChange}_SetUpdateStateBefore(){this._hasNestedContent=0;for(const track of this._tracks)if(track.IsNested())this._hasNestedContent=1}_SetUpdateStateAfter(){this._renderChange=0;for(const track of this._tracks){track._SetUpdateState();if(this._renderChange===0&&track.GetRenderChange()===\n1)this._renderChange=1;if(!this._beforeAndAfterTracks&&track.GetNeedsBeforeAndAfter()===1){if(!this._beforeAndAfterTracks)this._beforeAndAfterTracks=[];this._beforeAndAfterTracksLength=this._beforeAndAfterTracks.push(track)}}}Tick(deltaTime,timeScale,deltaTime1){if(this.GetUseSystemTimescale()){if(deltaTime===0&&this._lastDelta===0)return;this._lastDelta=deltaTime}else{if(deltaTime1===0&&this._lastDelta===0)return;this._lastDelta=deltaTime1;deltaTime=deltaTime1;timeScale=1}const lastTime=this._playheadTime;\nconst newDeltaTime=deltaTime*timeScale*this._playbackRate;const newTime=lastTime+newDeltaTime;const totalTime=this._timelineDataItem._totalTime;if(newTime<0)this._playheadTime=0;else if(newTime>=totalTime)this._playheadTime=totalTime;else this._playheadTime=newTime;let complete=false;let ensureValue=false;const loop=this.GetLoop();const pingPong=this.GetPingPong();if(!loop&&!pingPong)if(this._playbackRate>0){if(this._playheadTime>=totalTime)if(this._currentRepeatCount<this.GetRepeatCount()){this._currentRepeatCount++;\nthis._SetTimeAndReset(0);ensureValue=true}else{this._SetTime(totalTime);complete=true}}else{if(this._playheadTime<=0)if(this._currentRepeatCount<this.GetRepeatCount()){this._currentRepeatCount++;this._SetTimeAndReset(totalTime);ensureValue=true}else{this._SetTime(0);complete=true}}else if(loop&&!pingPong)if(this._playbackRate>0){if(this._playheadTime>=totalTime){this._SetTimeAndReset(0);ensureValue=true}}else{if(this._playheadTime<=0){this._SetTimeAndReset(totalTime);ensureValue=true}}else if(!loop&&\npingPong)if(this._playbackRate>0){if(this._playheadTime>=totalTime){this._SetTime(totalTime);this.SetPlaybackRate(this.GetPlaybackRate()*-1);ensureValue=true;if(this._pingPongState===PING_PONG_END)if(this._currentRepeatCount<this.GetRepeatCount()){this._currentRepeatCount++;this._pingPongState=PING_PONG_BEGIN}else complete=true;else if(this._pingPongState===PING_PONG_BEGIN)this._pingPongState=PING_PONG_END}}else{if(this._playheadTime<=0){this._SetTime(0);this.SetPlaybackRate(this.GetPlaybackRate()*\n-1);ensureValue=true;if(this._pingPongState===PING_PONG_END)if(this._currentRepeatCount<this.GetRepeatCount()){this._currentRepeatCount++;this._pingPongState=PING_PONG_BEGIN}else complete=true;else if(this._pingPongState===PING_PONG_BEGIN)this._pingPongState=PING_PONG_END}}else if(loop&&pingPong)if(this._playbackRate>0){if(this._playheadTime>=totalTime){this._SetTime(totalTime);this.SetPlaybackRate(this.GetPlaybackRate()*-1);ensureValue=true;this._pingPongState++;C3.wrap(this._pingPongState,0,2)}}else if(this._playheadTime<=\n0){this._SetTime(0);this.SetPlaybackRate(this.GetPlaybackRate()*-1);ensureValue=true;this._pingPongState++;C3.wrap(this._pingPongState,0,2)}let i;const l=this._tracksLength;if(complete){for(i=0;i<l;i++)this._tracks[i].SetEndState();this.Stop(true);this.OnCompleted();return}const bal=this._beforeAndAfterTracksLength;for(i=0;i<bal;i++)this._beforeAndAfterTracks[i].BeforeInterpolate();if(this._hasNestedContent===1)for(i=0;i<l;i++){const track=this._tracks[i];const startOffset=track.GetStartOffset();\nconst localTime=this._playheadTime-startOffset;const lastLocalTime=lastTime-startOffset;if(localTime<0&&lastLocalTime>0){if(startOffset<0)this._playheadTime=0;else if(startOffset>=totalTime)this._playheadTime=totalTime;else this._playheadTime=startOffset;track.Interpolate(startOffset,true,false,ensureValue,this._firstTick,false)}else track.Interpolate(this._playheadTime,true,false,ensureValue,this._firstTick,false)}else for(i=0;i<l;i++)this._tracks[i].Interpolate(this._playheadTime,true,false,ensureValue,\nthis._firstTick,false);for(i=0;i<bal;i++)this._beforeAndAfterTracks[i].AfterInterpolate();if(this._firstTick)this._firstTick=false}_Interpolate(time,isTicking=false,setTime=false,ensureValue=false,lastTime=NaN,onTickCall=false,ignoreGlobals=false){for(const track of this._tracks)track.BeforeInterpolate();for(const track of this._tracks){let t=time;if(typeof lastTime===\"number\"&&!isNaN(lastTime)){const globalTime=this.GetTime();const localTime=globalTime-track.GetStartOffset();const lastLocalTime=\nlastTime-track.GetStartOffset();if(localTime<0&&lastLocalTime>0){t=track.GetStartOffset();this._SetTime(t)}}track.Interpolate(t,isTicking,setTime,ensureValue,this._firstTick,ignoreGlobals)}for(const track of this._tracks)track.AfterInterpolate();if(this._firstTick&&onTickCall)this._firstTick=false}AddTrack(){const trackDataItem=this._timelineDataItem.GetTrackData().AddEmptyTrackDataItem();const track=C3.TrackState.Create(this,trackDataItem);this._tracksLength=this._tracks.push(track);return track}Removed(){if(this.IsReleased())return;\nfor(const track of this._tracks)track.TimelineRemoved()}CleanCaches(){for(const track of this._tracks)track.CleanCaches()}ClearTrackInstances(){for(const track of this._tracks)track.ClearInstance()}SetTrackInstance(trackId,instance){if(!instance)return;for(const track of this._tracks){if(!track.IsInstanceTrack())continue;if(trackId){if(track.GetId()!==trackId)continue;track.SetInstance(instance);this._timelineManager.SetTimelineObjectClassToMap(instance.GetObjectClass(),this);break}else{if(track.HasInstance())continue;\ntrack.SetInstance(instance);this._timelineManager.SetTimelineObjectClassToMap(instance.GetObjectClass(),this);break}}}HasTrackInstance(instance,trackId){for(const track of this._tracks){if(!track.IsInstanceTrack())continue;if(trackId){if(trackId===track.GetId()&&instance===track.GetInstance())return true}else if(instance===track.GetInstance())return true}return false}HasValidTracks(){return this._tracks.some(t=>{if(t.IsInstanceTrack())return t.CanInstanceBeValid();else return true})}HasValidGlobalTracks(){return this._tracks.some(t=>\n{if(t.IsInstanceTrack()){if(!t.CanInstanceBeValid())return false;const objectClass=t.GetObjectClass();if(!objectClass)return false;return objectClass.IsGlobal()}else return false})}GetPropertyTrack(propertyName){for(const track of this.GetTracks())for(const propertyTrack of track.GetPropertyTracks())if(propertyTrack.GetPropertyName()===propertyName)return propertyTrack}GetTrackFromInstance(instance){for(const track of this._tracks)if(instance===track.GetInstance())return track;return null}GetKeyframeWithTags(tags){let tagsArray=\ntags?tags.split(\" \"):[];const tagsSet=new Set(tagsArray.map(t=>t.toLowerCase().trim()));tagsArray=[...tagsSet.values()];for(const track of this.GetTracks())for(const keyframeDataItem of track.GetKeyframeDataItems()){const hasAllTags=tagsArray.every(t=>keyframeDataItem.HasTag(t));if(hasAllTags)return keyframeDataItem}}GetObjectClasses(){const ret=[];for(const track of this.GetTracks())ret.push(track.GetObjectClass());return ret.filter(oc=>oc)}_SaveToJson(){return{\"tracksJson\":this._SaveTracksToJson(),\n\"name\":this._name,\"playheadTime\":this.GetTime(),\"playbackRate\":this._playbackRate,\"pingPongState\":this._pingPongState,\"currentRepeatCount\":this._currentRepeatCount,\"isPlaying\":this._isPlaying,\"isScheduled\":this._isScheduled,\"initialStateSet\":this._initialStateSet,\"finishedTriggers\":this._finishedTriggers,\"complete\":this._complete,\"released\":this._released,\"markedForRemoval\":this._markedForRemoval,\"completedTick\":this._completedTick,\"implicitPause\":this._implicitPause,\"isTemplate\":this._isTemplate,\n\"tags\":this._tags.join(\" \"),\"stringTags\":this._stringTags,\"tagsChanged\":this._tagsChanged,\"firstTick\":this._firstTick}}_LoadFromJson(o){if(!o)return;this._LoadTracksFromJson(o[\"tracksJson\"]);this._name=o[\"name\"];this._playheadTime=o[\"playheadTime\"];this._playbackRate=o[\"playbackRate\"];this._pingPongState=o[\"pingPongState\"];this._currentRepeatCount=o[\"currentRepeatCount\"];this._isPlaying=!!o[\"isPlaying\"];this._isScheduled=!!o[\"isScheduled\"];this._initialStateSet=!!o[\"initialStateSet\"];this._finishedTriggers=\no.hasOwnProperty(\"finishedTriggers\")?!!o[\"finishedTriggers\"]:false;this._complete=!!o[\"complete\"];this._released=!!o[\"released\"];this._markedForRemoval=!!o[\"markedForRemoval\"];this._completedTick=o[\"completedTick\"];this._implicitPause=!!o[\"implicitPause\"];this._isTemplate=!!o[\"isTemplate\"];this._tags=o[\"tags\"].split(\" \");this._stringTags=o[\"stringTags\"];this._tagsChanged=!!o[\"tagsChanged\"];this._firstTick=!!o[\"firstTick\"]}_SaveTracksToJson(){return this._tracks.map(trackState=>trackState._SaveToJson())}_LoadTracksFromJson(tracksJson){this.ClearTrackInstances();\ntracksJson.forEach((trackJson,i)=>{const track=this._tracks[i];track._LoadFromJson(trackJson)});this._tracks.filter(track=>track.CanInstanceBeValid())}static _HasTag(tag){const tags=this.GetTags();if(tag===\"\")return tags.length===1&&tags[0]===\"\";return tags.map(t=>t.toLowerCase()).includes(tag.toLowerCase())}static _GetTagArray(tags){if(C3.IsArray(tags))return tags.slice(0);if(C3.IsString(tags))return tags.split(\" \");throw new Error(\"invalid tags\");}GetITimelineState(){if(!this._iTimelineState)this._iTimelineState=\nC3.New(self.ITimelineState,this);return this._iTimelineState}};\n\n}\n\n// timelines/state/trackState.js\n{\n'use strict';const C3=self.C3;const INSTANCE_TRACK=0;const VALUE_TRACK=1;const AUDIO_TRACK=2;\nC3.TrackState=class Track extends C3.DefendedBase{constructor(timeline,trackDataItem){super();this._timeline=timeline;this._trackDataItem=trackDataItem;this._trackData=trackDataItem.GetTrackData();this._instanceUid=NaN;this._objectClassIndex=NaN;this._instance=null;this._worldInfo=null;this._isNested=trackDataItem.GetStartOffset()>0;this._initialStateOfNestedSet=false;this._endStateOfNestedSet=false;this._lastKeyframeDataItem=null;this._keyframeDataItems=this._trackDataItem.GetKeyframeData().GetKeyframeDataItemArray();\nthis._propertyTracks=[];this.CreatePropertyTrackStates();this._worldInfoChange=0;this._renderChange=0;this._needsBeforeAndAfter=0}static Create(timeline,trackDataItem){return C3.New(C3.TrackState,timeline,trackDataItem)}Release(){this._keyframeDataItems=null;for(const propertyTrack of this._propertyTracks)propertyTrack.Release();C3.clearArray(this._propertyTracks);this._propertyTracks=null;this._timeline=null;this._instance=null;this._worldInfo=null;this._trackDataItem=null;this._lastKeyframeDataItem=\nnull}CreatePropertyTrackStates(){for(const propertyTrackDataItem of this._trackDataItem.GetPropertyTrackData().propertyTrackDataItems())this._propertyTracks.push(C3.PropertyTrackState.Create(this,propertyTrackDataItem))}TimelineRemoved(){for(const propertyTrack of this._propertyTracks)propertyTrack.TimelineRemoved()}CleanCaches(){for(const propertyTrack of this._propertyTracks)propertyTrack.CleanCaches();this._instance=null;this._worldInfo=null}GetTimeline(){return this._timeline}GetRuntime(){return this._timeline.GetRuntime()}GetKeyframeDataItems(){if(this._keyframeDataItems)return this._keyframeDataItems;\nthis._keyframeDataItems=this._trackDataItem.GetKeyframeData().GetKeyframeDataItemArray();return this._keyframeDataItems}GetPropertyTracks(){return this._propertyTracks}GetPropertyTrack(propertyName){for(let i=0;i<this._propertyTracks.length;i++){const propertyTrack=this._propertyTracks[i];if(propertyTrack.GetPropertyName()===propertyName)return propertyTrack}}MaybeGetInstance(){if(!this._instance)this.GetInstance()}IsInstanceValid(){if(!this._instance)return false;return!this._instance.IsDestroyed()}CanInstanceBeValid(){if(!this.IsInstanceTrack())return false;\nconst uid=this.GetInstanceUID();const instance=this.GetRuntime().GetInstanceByUID(uid);if(!instance)return false;return!instance.IsDestroyed()}GetObjectClass(){if(!this.IsInstanceTrack())return;const index=this.GetObjectClassIndex();if(index===-1)return;return this.GetRuntime().GetObjectClassByIndex(index)}ClearInstance(){this._instance=null;this._instanceUid=NaN;this._worldInfo=null;this._objectClassIndex=NaN}HasInstance(){return!!this._instance}GetInstance(){if(this._instance&&this.IsInstanceValid())return this._instance;\nconst uid=this.GetInstanceUID();this._instance=this.GetRuntime().GetInstanceByUID(uid);return this._instance}SetInstance(instance){if(this._instance===instance)return;this.CleanCaches();this._instance=instance;this._objectClassIndex=instance.GetObjectClass().GetIndex();this._instanceUid=instance.GetUID();this._worldInfo=instance.GetWorldInfo();for(const item of this.propertyTrackItems()){const propertyTrack=item.propertyTrack;const sourceAdapter=item.sourceAdapter;const id=propertyTrack.GetSourceAdapterId();\nswitch(id){case \"instance-variable\":{const index=sourceAdapter.GetEditorIndex();const objectClass=instance.GetObjectClass();const i=objectClass.GetInstanceVariableIndexByName(item.name);const name=objectClass.GetInstanceVariableName(i);const type=objectClass.GetInstanceVariableType(i);if(name===item.name&&type===item.type)sourceAdapter.UpdateInstanceVariableIndex(i);break}case \"behavior\":{const timelineBehaviorType=item.behaviorType;const trackObjectClass=this.GetObjectClass();const objectClass=instance.GetObjectClass();\nconst instanceBehaviorType=sourceAdapter.GetBehaviorType(objectClass);if(timelineBehaviorType&&instanceBehaviorType){const name=timelineBehaviorType.GetName();const templateBehaviorIndex=trackObjectClass.GetBehaviorIndexByName(name);const instanceBehaviorIndex=objectClass.GetBehaviorIndexByName(name);const propertyIndex=sourceAdapter.GetEditorIndex();sourceAdapter.UpdateBehaviorTypeSid(instanceBehaviorType.GetSID())}break}}}}*propertyTrackItems(){for(const propertyTrack of this._propertyTracks){const sourceAdapter=\npropertyTrack.GetSourceAdapter();const objectClass=this.GetObjectClass();const ret={propertyTrack:propertyTrack,sourceAdapter:sourceAdapter};switch(propertyTrack.GetSourceAdapterId()){case \"world-instance\":{ret.property=propertyTrack.GetPropertyName();break}case \"instance-variable\":{const index=sourceAdapter.GetEditorIndex();ret.name=objectClass.GetInstanceVariableName(index);ret.type=objectClass.GetInstanceVariableType(index);break}case \"effect\":{const effectList=objectClass.GetEffectList();const effectType=\nsourceAdapter.GetEffectType(effectList);ret.effectType=effectType;break}case \"behavior\":{const behaviorType=sourceAdapter.GetBehaviorType(objectClass);ret.behaviorType=behaviorType;break}case \"plugin\":{ret.plugin=objectClass.GetPlugin();break}case \"value\":{break}}yield ret}}GetWorldInfo(){if(this._worldInfo&&this.IsInstanceValid())return this._worldInfo;const instance=this.GetInstance();if(instance)this._worldInfo=instance.GetWorldInfo();return this._worldInfo}GetTrackDataItem(){return this._trackDataItem}GetInstanceUID(){if(!isNaN(this._instanceUid))return this._instanceUid;\nreturn this._trackDataItem.GetInstanceUID()}SetInstanceUID(uid){this._trackDataItem.SetInstanceUID(uid)}GetInterpolationMode(){return this._trackDataItem.GetInterpolationMode()}SetInterpolationMode(im){this._trackDataItem.SetInterpolationMode(im)}GetResultMode(){return this._trackDataItem.GetResultMode()}GetId(){return this._trackDataItem.GetId()}GetStartOffset(){return this._trackDataItem.GetStartOffset()}GetLocalTotalTime(){return this._trackDataItem.GetLocalTotalTime()}SetLocalTotalTime(t){this._trackDataItem.SetLocalTotalTime(t)}SetResultMode(rm){this._trackDataItem.SetResultMode(rm)}SetEase(e){for(const keyframeDataItem of this.GetKeyframeDataItems())keyframeDataItem.SetEase(e);\nfor(const propertyTrack of this.GetPropertyTracks())propertyTrack.SetEase(e)}GetEnable(){return this._trackDataItem.GetEnable()}SetEnable(e){this._trackDataItem.SetEnable(e)}GetObjectClassIndex(){if(!isNaN(this._objectClassIndex))return this._objectClassIndex;return this._trackDataItem.GetObjectClassIndex()}SetObjectClassIndex(objectClassIndex){this._trackDataItem.SetObjectClassIndex(objectClassIndex)}SetOriginalWidth(w){this._trackDataItem.SetOriginalWidth(w)}GetOriginalWidth(){const instance=this.GetInstance();\nif(instance){const sdkIntance=instance.GetSdkInstance();if(sdkIntance.IsOriginalSizeKnown())return instance.GetSdkInstance().GetOriginalWidth()}return this._trackDataItem.GetOriginalWidth()}SetOriginalHeight(h){this._trackDataItem.SetOriginalHeight(h)}GetOriginalHeight(){const instance=this.GetInstance();if(instance){const sdkIntance=instance.GetSdkInstance();if(sdkIntance.IsOriginalSizeKnown())return instance.GetSdkInstance().GetOriginalHeight()}return this._trackDataItem.GetOriginalHeight()}GetType(){return this._trackDataItem.GetType()}GetName(){return this._trackDataItem.GetName()}IsInstanceTrack(){return this.GetType()===\nINSTANCE_TRACK}IsValueTrack(){return this.GetType()===VALUE_TRACK}IsAudioTrack(){return this.GetType()===AUDIO_TRACK}GetWorldInfoChange(){return this._worldInfoChange}GetRenderChange(){return this._renderChange}GetNeedsBeforeAndAfter(){return this._needsBeforeAndAfter}IsNested(){return this._isNested}SetResetState(){for(const propertyTrack of this._propertyTracks)propertyTrack.SetResetState()}SetInitialState(){this.MaybeGetInstance();if(!this.IsInstanceValid()&&this.IsInstanceTrack())return;const timeline=\nthis.GetTimeline();const isForwardPlayBack=timeline.IsForwardPlayBack();const time=isForwardPlayBack?0:this.GetLocalTotalTime();for(const propertyTrack of this._propertyTracks){propertyTrack.SetInitialState(time);if(this._worldInfoChange===0&&propertyTrack.GetWorldInfoChange()===1)this._worldInfoChange=1;if(this._renderChange===0&&propertyTrack.GetRenderChange()===1)this._renderChange=1}this._needsBeforeAndAfter=0;const nba=this._propertyTracks.some(pt=>pt.GetNeedsBeforeAndAfter());if(nba)this._needsBeforeAndAfter=\n1;this._lastKeyframeDataItem=this._GetLastKeyFrameBeforeTime(time);this._initialStateOfNestedSet=false;this._endStateOfNestedSet=false;this.Interpolate(time);this.OnKeyframeReached(this._GetLastKeyFrameBeforeTime(time))}SetResumeState(){this.MaybeGetInstance();if(!this.IsInstanceValid()&&this.IsInstanceTrack())return;const playbackDirection=this._timeline.IsForwardPlayBack();const time=this._timeline.GetTime()-this.GetStartOffset();this._lastKeyframeDataItem=this._GetLastKeyFrameBeforeTime(time);\nfor(const propertyTrack of this._propertyTracks)propertyTrack.SetResumeState(time)}SetEndState(){if(this.GetTimeline().IsComplete())return;this.MaybeGetInstance();if(!this.IsInstanceValid()&&this.IsInstanceTrack())return;if(!this._isNested){const time=this._timeline.GetTime();const totalTime=this.GetStartOffset()+this.GetLocalTotalTime();if(time>=totalTime)this.Interpolate(this.GetLocalTotalTime(),true,false,true,false,false,true);else if(time<=0)this.Interpolate(0,true,false,true,false,false,true)}}_SetUpdateState(){for(let i=\n0,l=this._propertyTracks.length;i<l;i++){const propertyTrack=this._propertyTracks[i];propertyTrack._SetUpdateState();if(this._worldInfoChange===0&&propertyTrack.GetWorldInfoChange()===1)this._worldInfoChange=1;if(this._renderChange===0&&propertyTrack.GetRenderChange()===1)this._renderChange=1}}BeforeInterpolate(){const l=this._propertyTracks.length;for(let i=0;i<l;i++)this._propertyTracks[i].BeforeInterpolate()}Interpolate(time,isTicking=false,setTime=false,ensureValue=false,firstTick=false,ignoreGlobals=\nfalse,endState=false){if(!this._instance)this.GetInstance();const instanceValid=this._instance&&!this._instance.IsDestroyed();const isInstanceTrack=this._trackDataItem._type===INSTANCE_TRACK;if(!instanceValid&&isInstanceTrack)return;if(ignoreGlobals&&isInstanceTrack&&this.GetObjectClass().IsGlobal())return;time=time-this.GetStartOffset();if(time<0)return;this.MaybeSetInitialStateOfNestedTrack(time,isTicking);this.MaybeTriggerKeyframeReachedConditions(time,isTicking,firstTick);for(let i=0,l=this._propertyTracks.length;i<\nl;i++)this._propertyTracks[i].Interpolate(time,setTime,ensureValue,endState);this.MaybeSetEndStateOfNestedTrack(time,isTicking);if(this._worldInfoChange!==0){if(!this._worldInfo)this._worldInfo=this._instance.GetWorldInfo();if(this._worldInfo)this._worldInfo.SetBboxChanged()}}AfterInterpolate(){const l=this._propertyTracks.length;for(let i=0;i<l;i++)this._propertyTracks[i].AfterInterpolate()}MaybeSetInitialStateOfNestedTrack(time,isTicking){if(!isTicking)return;if(!this._isNested)return;if(this._initialStateOfNestedSet)return;\nconst timeline=this.GetTimeline();if(timeline.IsForwardPlayBack()){if(time<0)return}else if(time>this.GetLocalTotalTime())return;for(const propertyTrack of this._propertyTracks)propertyTrack.SetInitialState();this._initialStateOfNestedSet=true}MaybeSetEndStateOfNestedTrack(time,isTicking){if(!isTicking)return;if(!this._isNested)return;if(this._endStateOfNestedSet)return;const timeline=this.GetTimeline();if(timeline.IsForwardPlayBack()){if(time>=this.GetLocalTotalTime()){for(const propertyTrack of this._propertyTracks)propertyTrack.Interpolate(this.GetLocalTotalTime(),\nfalse,true);this._endStateOfNestedSet=true}}else if(time<=0){for(const propertyTrack of this._propertyTracks)propertyTrack.Interpolate(0,false,true);this._endStateOfNestedSet=true}}MaybeTriggerKeyframeReachedConditions(time,isTicking,firstTick){if(firstTick)return;if(!isTicking)return;if(!C3.Plugins.Timeline)return;const timeline=this.GetTimeline();const nextKeyframe=this._lastKeyframeDataItem.GetNext();const lastTime=this._lastKeyframeDataItem.GetTime();const nextTime=nextKeyframe?nextKeyframe.GetTime():\ntimeline.GetTotalTime();if(time<=lastTime||time>=nextTime){this._lastKeyframeDataItem=this._trackData.GetFirstKeyFrameDataItemLowerOrEqualThan(time,this._trackDataItem);if(timeline.IsForwardPlayBack()){if(nextKeyframe)this.OnKeyframeReached(this._lastKeyframeDataItem)}else{const nextKeyframe=this._lastKeyframeDataItem.GetNext();if(nextKeyframe)this.OnKeyframeReached(nextKeyframe)}}}_GetLastKeyFrameBeforeTime(time){const keyframeDataItem=this._trackData.GetKeyFrameDataItemAtTime(time,this._trackDataItem);\nif(keyframeDataItem)return keyframeDataItem;else return this._trackData.GetFirstKeyFrameDataItemLowerOrEqualThan(time,this._trackDataItem)}OnKeyframeReached(keyframeDataItem){if(!C3.Plugins.Timeline)return;const timeline=this.GetTimeline();const timelineManager=timeline.GetTimelineManager();C3.Plugins.Timeline.Cnds.PushTriggerTimeline(timeline);C3.Plugins.Timeline.Cnds.PushTriggerKeyframe(keyframeDataItem);timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnAnyKeyframeReached);timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnKeyframeReached);\nC3.Plugins.Timeline.Cnds.PopTriggerTimeline(timeline);C3.Plugins.Timeline.Cnds.PopTriggerKeyframe(keyframeDataItem)}AddKeyframe(){const keyframeData=this._trackDataItem.GetKeyframeData();const keyframeDataItem=keyframeData.AddEmptyKeyframeDataItem();return keyframeDataItem}AddPropertyTrack(){const propertyTrackData=this._trackDataItem.GetPropertyTrackData();const propertyTrackDataItem=propertyTrackData.AddEmptyPropertyTrackDataItem();const propertyTrack=C3.PropertyTrackState.Create(this,propertyTrackDataItem);\nthis._propertyTracks.push(propertyTrack);return propertyTrack}DeleteKeyframes(match){const keyframeData=this._trackDataItem.GetKeyframeData();keyframeData.DeleteKeyframeDataItems(match)}DeletePropertyKeyframes(match){for(const propertyTrack of this._propertyTracks)propertyTrack.DeletePropertyKeyframes(match)}SaveState(){for(const propertyTrack of this._propertyTracks)propertyTrack.SaveState()}CompareInitialStateWithCurrent(){this.MaybeGetInstance();if(!this.IsInstanceValid()&&this.IsInstanceTrack())return;\nfor(const propertyTrack of this._propertyTracks)propertyTrack.CompareInitialStateWithCurrent()}CompareSaveStateWithCurrent(){this.MaybeGetInstance();if(!this.IsInstanceValid()&&this.IsInstanceTrack())return;let difference=false;for(const propertyTrack of this._propertyTracks){const diff=propertyTrack.CompareSaveStateWithCurrent();if(!difference&&diff)difference=true}if(difference){const keyframeDataItem=this.AddKeyframe();keyframeDataItem.SetTime(this.GetTimeline().GetTime());keyframeDataItem.SetEase(\"noease\");\nkeyframeDataItem.SetEnable(true);keyframeDataItem.SetTags(\"\")}}_SaveToJson(){const instance=this.GetInstance();const uid=instance?instance.GetUID():this.GetInstanceUID();return{\"propertyTracksJson\":this._SavePropertyTracksToJson(),\"lastKeyframeDataItemJson\":this._SaveLastKeyframeDataItemToJson(),\"initialStateOfNestedSet\":this._initialStateOfNestedSet,\"endStateOfNestedSet\":this._endStateOfNestedSet,\"instanceUid\":uid}}_LoadFromJson(o){if(!o)return;this._LoadPropertyTracksFromJson(o[\"propertyTracksJson\"]);\nthis._LoadLastKeyframeDataItemFromJson(o[\"lastKeyframeDataItemJson\"]);this._LoadInstanceFromJson(o[\"instanceUid\"]);this._initialStateOfNestedSet=false;if(o.hasOwnProperty[\"initialStateOfNestedSet\"])this._initialStateOfNestedSet=o[\"initialStateOfNestedSet\"];this._endStateOfNestedSet=false;if(o.hasOwnProperty[\"endStateOfNestedSet\"])this._endStateOfNestedSet=o[\"endStateOfNestedSet\"];for(const propertyTrack of this._propertyTracks){if(this._worldInfoChange===0&&propertyTrack.GetWorldInfoChange()===1)this._worldInfoChange=\n1;if(this._renderChange===0&&propertyTrack.GetRenderChange()===1)this._renderChange=1}this._needsBeforeAndAfter=0;if(this._propertyTracks.some(pt=>pt.GetNeedsBeforeAndAfter()))this._needsBeforeAndAfter=1}_SaveLastKeyframeDataItemToJson(){const keyframeData=this._trackDataItem.GetKeyframeData();return keyframeData.GetKeyframeDataItemIndex(this._lastKeyframeDataItem)}_SavePropertyTracksToJson(){return this._propertyTracks.map(propertyTrackState=>propertyTrackState._SaveToJson())}_LoadPropertyTracksFromJson(propertyTracksJson){propertyTracksJson.forEach((propertyTrackJson,\ni)=>{const propertyTrack=this._propertyTracks[i];propertyTrack._LoadFromJson(propertyTrackJson)})}_LoadInstanceFromJson(uid){if(!C3.IsFiniteNumber(uid))return;const instance=this.GetRuntime().GetInstanceByUID(uid);if(!instance)return;const timeline=this.GetTimeline();timeline.SetTrackInstance(this._trackDataItem.GetId(),instance)}_LoadLastKeyframeDataItemFromJson(lastKeyframeDataItemIndex){const keyframeData=this._trackDataItem.GetKeyframeData();this._lastKeyframeDataItem=keyframeData.GetKeyframeDataItemFromIndex(lastKeyframeDataItemIndex)}};\n\n}\n\n// timelines/state/propertyTrackState.js\n{\n'use strict';const C3=self.C3;\nC3.PropertyTrackState=class PropertyTrack extends C3.DefendedBase{constructor(track,propertyTrackDataItem){super();this._track=track;this._propertyTrackDataItem=propertyTrackDataItem;this._propertyTrackData=propertyTrackDataItem.GetPropertyTrackData();this._worldInfoChange=0;this._renderChange=0;this._needsBeforeAndAfter=0;this._sourceAdapter=this.GetSourceAdapter();this._propertyKeyframeDataItems=this._propertyTrackDataItem.GetPropertyKeyframeData().GetPropertyKeyframeDataItemArray();this._lastPropertyKeyframeDataItem=\nnull;this._absoluteValueObject=null}static Create(track,propertyTrackDataItem){return C3.New(C3.PropertyTrackState,track,propertyTrackDataItem)}Release(){this._track=null;if(this._sourceAdapter){this._sourceAdapter.Release();this._sourceAdapter=null}this._propertyKeyframeDataItems=null;this._propertyTrackDataItem=null;this._propertyTrackData=null}GetWorldInfoChange(){return this._worldInfoChange}GetRenderChange(){return this._renderChange}GetNeedsBeforeAndAfter(){return this._needsBeforeAndAfter}HasAbsoluteValueObject(){return!!this._absoluteValueObject}SetAbsoluteValueObject(avo){this._absoluteValueObject=\navo}GetAbsoluteValueObject(){return this._absoluteValueObject}GetTrack(){return this._track}GetPropertyTrackDataItem(){return this._propertyTrackDataItem}GetPropertyTrackData(){return this._propertyTrackData}GetTimeline(){return this._track.GetTimeline()}GetRuntime(){return this._track.GetRuntime()}GetInstance(){return this._track.GetInstance()}GetSourceAdapter(){if(this._sourceAdapter)return this._sourceAdapter;const id=this._propertyTrackDataItem.GetSourceAdapterId();let ret;switch(id){case \"behavior\":ret=\nnew C3.PropertyTrackState.BehaviorSourceAdapter(this);break;case \"effect\":ret=new C3.PropertyTrackState.EffectSourceAdapter(this);this._renderChange=1;break;case \"instance-variable\":ret=new C3.PropertyTrackState.InstanceVariableSourceAdapter(this);break;case \"plugin\":ret=new C3.PropertyTrackState.PluginSourceAdapter(this);this._renderChange=1;break;case \"world-instance\":ret=new C3.PropertyTrackState.PropertySourceAdapter(this);this._renderChange=1;this._worldInfoChange=1;break;case \"value\":ret=new C3.PropertyTrackState.ValueSourceAdapter(this);\nbreak;case \"audio\":ret=new C3.PropertyTrackState.AudioSourceAdapter(this);break}this._sourceAdapter=ret;return this._sourceAdapter}GetSourceAdapterId(){return this._propertyTrackDataItem.GetSourceAdapterId()}SetSourceAdapterId(said){this._propertyTrackDataItem.SetSourceAdapterId(said)}GetSourceAdapterArgs(){return this._propertyTrackDataItem.GetSourceAdapterArguments()}SetSourceAdapterArgs(sargs){this._propertyTrackDataItem.SetSourceAdapterArguments(sargs)}GetSourceAdapterValue(){return this.GetSourceAdapter().GetValue()}GetPropertyName(){return this._propertyTrackDataItem.GetProperty()}SetPropertyName(pn){this._propertyTrackDataItem.SetProperty(pn)}GetPropertyType(){return this._propertyTrackDataItem.GetType()}SetPropertyType(pt){this._propertyTrackDataItem.SetType(pt)}GetPropertyKeyframeType(){return this.GetPropertyTrackData().GetFirstPropertyKeyframeDataItem(this._propertyTrackDataItem).GetType()}GetMin(){return this._propertyTrackDataItem.GetMin()}SetMin(min){this._propertyTrackDataItem.SetMin(min)}GetMax(){return this._propertyTrackDataItem.GetMax()}SetMax(max){this._propertyTrackDataItem.SetMax(max)}GetEnable(){return this._propertyTrackDataItem.GetEnable()}SetEnable(e){this._propertyTrackDataItem.SetEnable(e)}GetInterpolationMode(){return this._propertyTrackDataItem.GetInterpolationMode()}SetInterpolationMode(im){this._propertyTrackDataItem.SetInterpolationMode(im)}GetResultMode(){return this._propertyTrackDataItem.GetResultMode()}SetResultMode(rm){this._propertyTrackDataItem.SetResultMode(rm)}SetEase(e){for(const propertyKeyframeDataItem of this.GetPropertyKeyframeDataItems())propertyKeyframeDataItem.SetEase(e)}CanHavePropertyKeyframes(){return this._propertyTrackDataItem.CanHavePropertyKeyframes()}GetPropertyKeyframeDataItems(){if(this._propertyKeyframeDataItems)return this._propertyKeyframeDataItems;\nthis._propertyKeyframeDataItems=this._propertyTrackDataItem.GetPropertyKeyframeData().GetPropertyKeyframeDataItemArray();return this._propertyKeyframeDataItems}GetPropertyKeyframeDataItemArrayIncludingDisabled(){return this._propertyTrackDataItem.GetPropertyKeyframeData().GetPropertyKeyframeDataItemArrayIncludingDisabled()}GetPropertyKeyFrameDataItemAtTime(time){return this._propertyTrackData.GetPropertyKeyFrameDataItemAtTime(time,this._propertyTrackDataItem)}GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time){return this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,\nthis._propertyTrackDataItem)}GetPropertyKeyframeDataItemPairForTime(time){let start=this._propertyTrackData.GetPropertyKeyFrameDataItemAtTime(time,this._propertyTrackDataItem);let end;if(start)end=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherThan(time,this._propertyTrackDataItem);else{start=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,this._propertyTrackDataItem);end=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(time,this._propertyTrackDataItem)}return{start,\nend}}*GetPropertyKeyframeValues(){for(const propertyKeyframeDataItem of this.GetPropertyKeyframeDataItems())yield propertyKeyframeDataItem.GetValueWithResultMode()}*GetPropertyKeyframeTimes(){for(const propertyKeyframeDataItem of this.GetPropertyKeyframeDataItems())yield propertyKeyframeDataItem.GetTime()}TimelineRemoved(){this.GetSourceAdapter().TimelineRemoved()}CleanCaches(){this.GetSourceAdapter().CleanCaches()}GetCurrentState(){return this.GetSourceAdapter().GetCurrentState()}SetResetState(){this.GetSourceAdapter().SetResetState()}SetInitialState(time){this.GetSourceAdapter().SetInitialState();\nthis._lastPropertyKeyframeDataItem=this._GetLastPropertyKeyFrameBeforeTime(time);this._SetUpdateState()}SetResumeState(time){this.GetSourceAdapter().SetResumeState();this._lastPropertyKeyframeDataItem=this._GetLastPropertyKeyFrameBeforeTime(time)}_SetUpdateState(){const track=this.GetTrack();this._needsBeforeAndAfter=0;if(track.IsInstanceTrack()){const timeline=this.GetTimeline();const instance=track.GetInstance();const sourceAdapter=this.GetSourceAdapter();const propertyName=this.GetPropertyName();\nconst mayNeedBeforeAndAfterInterpolate=sourceAdapter.MayNeedBeforeAndAfterInterpolate();if(mayNeedBeforeAndAfterInterpolate){const similarPropertyTracks=timeline.GetSimilarPropertyTracks(instance,sourceAdapter,propertyName,this);if(similarPropertyTracks&&similarPropertyTracks.length)this._needsBeforeAndAfter=1}else this._needsBeforeAndAfter=0}}_GetLastPropertyKeyFrameBeforeTime(time){const timeline=this.GetTimeline();const propertyKeyframeDataItem=this._propertyTrackData.GetPropertyKeyFrameDataItemAtTime(time,\nthis._propertyTrackDataItem);if(propertyKeyframeDataItem)return propertyKeyframeDataItem;else if(timeline.IsForwardPlayBack())return this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,this._propertyTrackDataItem);else return this._propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(time,this._propertyTrackDataItem)}BeforeInterpolate(){this._sourceAdapter.BeforeInterpolate()}Interpolate(time,setTime=false,ensureValue=false,endState=false){let start;let end;\nlet propertyKeyframeReached=false;if(setTime)start=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,this._propertyTrackDataItem);else{if(this._lastPropertyKeyframeDataItem){const timeline=this.GetTimeline();const nextPropertyKeyframe=this._lastPropertyKeyframeDataItem.GetNext();const lastTime=this._lastPropertyKeyframeDataItem.GetTime();const nextTime=nextPropertyKeyframe?nextPropertyKeyframe.GetTime():timeline.GetTotalTime();if(time<=lastTime||time>=nextTime){this._lastPropertyKeyframeDataItem=\nthis._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,this._propertyTrackDataItem);propertyKeyframeReached=true}}else{this._lastPropertyKeyframeDataItem=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,this._propertyTrackDataItem);propertyKeyframeReached=true}start=this._lastPropertyKeyframeDataItem}if(start)end=start.GetNext();this._sourceAdapter.Interpolate(time,start,end,setTime,ensureValue,endState,propertyKeyframeReached)}GetInterpolatedValue(time){if(this._lastPropertyKeyframeDataItem){const timeline=\nthis.GetTimeline();const nextPropertyKeyframe=this._lastPropertyKeyframeDataItem.GetNext();const lastTime=this._lastPropertyKeyframeDataItem.GetTime();const nextTime=nextPropertyKeyframe?nextPropertyKeyframe.GetTime():timeline.GetTotalTime();if(time<=lastTime||time>=nextTime)this._lastPropertyKeyframeDataItem=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,this._propertyTrackDataItem)}else this._lastPropertyKeyframeDataItem=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,\nthis._propertyTrackDataItem);const start=this._lastPropertyKeyframeDataItem;const end=start.GetNext();return this._sourceAdapter.GetInterpolatedValue(time,start,end)}GetInterpolatedValueFast(time,start,end){return this._sourceAdapter.GetInterpolatedValue(time,start,end)}AfterInterpolate(){this._sourceAdapter.AfterInterpolate()}static GetStartPropertyKeyframeForTime(time,propertyTrack){const propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack._propertyTrackData;\nreturn propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,propertyTrackDataItem)}static GetEndPropertyKeyframeForTime(time,propertyTrack){const propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack._propertyTrackData;return propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(time,propertyTrackDataItem)}AddPropertyKeyframe(){const propertyKeyframeData=this._propertyTrackDataItem.GetPropertyKeyframeData();const propertyKeyframeDataItem=\npropertyKeyframeData.AddEmptyPropertyKeyframeDataItem();this._lastPropertyKeyframeDataItem=null;return propertyKeyframeDataItem}DeletePropertyKeyframes(match){this._lastPropertyKeyframeDataItem=null;const propertyKeyframeData=this._propertyTrackDataItem.GetPropertyKeyframeData();propertyKeyframeData.DeletePropertyKeyframeDataItems(match)}SaveState(){this.GetSourceAdapter().SaveState()}CompareInitialStateWithCurrent(){const difference=this.GetSourceAdapter().CompareInitialStateWithCurrent();if(difference){const propertyKeyframeDataItem=\nthis._propertyTrackData.GetFirstPropertyKeyframeDataItem(this._propertyTrackDataItem);const currentState=this.GetSourceAdapter().GetCurrentState();propertyKeyframeDataItem.SetAbsoluteValue(currentState)}}CompareSaveStateWithCurrent(){const difference=this.GetSourceAdapter().CompareSaveStateWithCurrent();if(difference)this.AddPropertyKeyframeAtCurrentTime();this.GetSourceAdapter().ClearSaveState();return difference}AddPropertyKeyframeAtCurrentTime(){const time=this.GetTimeline().GetTime();const sourceAdapter=\nthis.GetSourceAdapter();const startPropertyKeyframe=C3.PropertyTrackState.GetStartPropertyKeyframeForTime(time,this);const propertyKeyframeDataItem=this.AddPropertyKeyframe();propertyKeyframeDataItem.SetType(startPropertyKeyframe.GetType());propertyKeyframeDataItem.SetTime(time);propertyKeyframeDataItem.SetEase(startPropertyKeyframe.GetEase());propertyKeyframeDataItem.SetEnable(true);propertyKeyframeDataItem.SetValue(sourceAdapter.GetValueAtTime());propertyKeyframeDataItem.SetAbsoluteValue(sourceAdapter.GetCurrentState())}_SaveToJson(){return{\"sourceAdapterJson\":this.GetSourceAdapter()._SaveToJson()}}_LoadFromJson(o){if(!o)return;\nthis.GetSourceAdapter()._LoadFromJson(o[\"sourceAdapterJson\"])}};\n\n}\n\n// timelines/state/propertySourceAdapters/propertySourceAdapter.js\n{\n'use strict';const C3=self.C3;const NS=C3.PropertyTrackState;\nNS.PropertySourceAdapter=class PropertySourceAdapter{constructor(propertyTrack){this._propertyTrack=propertyTrack;this._propertyAdapter=null;this.GetPropertyAdapter()}Release(){if(this._propertyAdapter){this._propertyAdapter.Release();this._propertyAdapter=null}this._propertyTrack=null}MayNeedBeforeAndAfterInterpolate(){return this._propertyAdapter.MayNeedBeforeAndAfterInterpolate()}GetPropertyTrack(){return this._propertyTrack}TimelineRemoved(){if(this._propertyAdapter)this._propertyAdapter.TimelineRemoved()}CleanCaches(){if(this._propertyAdapter)this._propertyAdapter.CleanCaches()}GetPropertyAdapter(){if(this._propertyAdapter)return this._propertyAdapter;this._propertyAdapter=\nthis._CreatePropertyAdapter();return this._propertyAdapter}GetEditorIndex(){}GetIndex(){return this.GetEditorIndex()}GetTarget(){}SetResetState(){this.GetPropertyAdapter().SetResetState()}SetInitialState(){this.GetPropertyAdapter().SetInitialState()}SetResumeState(){this.GetPropertyAdapter().SetResumeState()}BeforeInterpolate(){this._propertyAdapter.BeforeChangeProperty()}Interpolate(time,start,end,setTime,ensureValue,endState,propertyKeyframeReached){const type=this._propertyTrack.GetPropertyKeyframeType();\nlet value;switch(type){case \"numeric\":{value=NS.NumericTypeAdapter.Interpolate(time,start,end,this._propertyTrack);break}case \"angle\":{value=NS.AngleTypeAdapter.Interpolate(time,start,end,this._propertyTrack);break}case \"boolean\":{value=NS.BooleanTypeAdapter.Interpolate(time,start,end,this._propertyTrack);break}case \"color\":{value=NS.ColorTypeAdapter.Interpolate(time,start,end,this._propertyTrack);break}case \"text\":{value=NS.TextTypeAdapter.Interpolate(time,start,end,this._propertyTrack);break}}this._propertyAdapter.ChangeProperty(time,\nvalue,start,end,setTime,ensureValue,endState,propertyKeyframeReached)}GetInterpolatedValue(time,start,end){switch(this._propertyTrack.GetPropertyKeyframeType()){case \"numeric\":return NS.NumericTypeAdapter.Interpolate(time,start,end,this._propertyTrack);case \"angle\":return NS.AngleTypeAdapter.Interpolate(time,start,end,this._propertyTrack);case \"boolean\":return NS.BooleanTypeAdapter.Interpolate(time,start,end,this._propertyTrack);case \"color\":return NS.ColorTypeAdapter.Interpolate(time,start,end,this._propertyTrack);\ncase \"text\":return NS.TextTypeAdapter.Interpolate(time,start,end,this._propertyTrack)}}AfterInterpolate(){this._propertyAdapter.AfterChangeProperty()}SaveState(){this.GetPropertyAdapter().SetSaveState()}ClearSaveState(){this.GetPropertyAdapter().ClearSaveState()}GetCurrentState(){return this.GetPropertyAdapter().GetCurrentState()}CompareInitialStateWithCurrent(){return this.GetPropertyAdapter().CompareInitialStateWithCurrent()}CompareSaveStateWithCurrent(){return this.GetPropertyAdapter().CompareSaveStateWithCurrent()}GetValueAtTime(){const propertyTrack=\nthis._propertyTrack;const track=propertyTrack.GetTrack();const time=track.GetTimeline().GetTime();const start=NS.GetStartPropertyKeyframeForTime(time,propertyTrack);const end=start.GetNext();const type=propertyTrack.GetPropertyKeyframeType();switch(type){case \"numeric\":{return NS.NumericTypeAdapter.Interpolate(time,start,end,propertyTrack)}case \"angle\":{return NS.AngleTypeAdapter.Interpolate(time,start,end,propertyTrack)}case \"boolean\":{return NS.BooleanTypeAdapter.Interpolate(time,start,end,propertyTrack)}case \"color\":{return NS.ColorTypeAdapter.Interpolate(time,\nstart,end,propertyTrack)}case \"text\":{return NS.TextTypeAdapter.Interpolate(time,start,end,propertyTrack)}}}_CreatePropertyAdapter(){const pt=this._propertyTrack;const type=pt.CanHavePropertyKeyframes()?pt.GetPropertyKeyframeType():\"\";switch(type){case \"combo\":case \"boolean\":case \"text\":case \"string\":{return new NS.PropertyInterpolationAdapter.NoInterpolationAdapter(this)}case \"numeric\":case \"number\":case \"angle\":{if(this._propertyTrack.GetPropertyType()===\"combo\")return new NS.PropertyInterpolationAdapter.NoInterpolationAdapter(this);\nreturn new NS.PropertyInterpolationAdapter.NumericInterpolationAdapter(this)}case \"color\":case \"offsetColor\":{return new NS.PropertyInterpolationAdapter.ColorInterpolationAdapter(this)}default:{return new NS.PropertyInterpolationAdapter.NumericInterpolationAdapter(this)}}}_SaveToJson(){return{\"propertyAdapterJson\":this.GetPropertyAdapter()._SaveToJson()}}_LoadFromJson(o){if(!o)return;this.GetPropertyAdapter()._LoadFromJson(o[\"propertyAdapterJson\"])}};\n\n}\n\n// timelines/state/propertySourceAdapters/instanceVariableSourceAdapter.js\n{\n'use strict';const C3=self.C3;const INDEX=0;\nclass InstanceVariableSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack);this._updatedIndex=NaN}GetEditorIndex(){return this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[INDEX]}GetIndex(){if(this._updatedIndex)return this._updatedIndex;return super.GetIndex()}GetTarget(){return this._propertyTrack.GetTrack().GetInstance()}UpdateInstanceVariableIndex(index){const i=this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[INDEX];if(i===\nindex)return;this._updatedIndex=index}Interpolate(time,start,end,setTime,ensureValue,endState,propertyKeyframeReached){if(!this.GetPropertyAdapter().CanChange(start.GetValue()))return;super.Interpolate(time,start,end,setTime,ensureValue,endState,propertyKeyframeReached)}GetInterpolatedValue(time,start,end){if(!this.GetPropertyAdapter().CanChange(start.GetValue()))return;return super.GetInterpolatedValue(time,start,end)}_SaveToJson(){return Object.assign(super._SaveToJson(),{\"index\":this._updatedIndex})}_LoadFromJson(o){if(!o)return;\nsuper._LoadFromJson(o);this._updatedIndex=o[\"index\"]}}C3.PropertyTrackState.InstanceVariableSourceAdapter=InstanceVariableSourceAdapter;\n\n}\n\n// timelines/state/propertySourceAdapters/behaviorSourceAdapter.js\n{\n'use strict';const C3=self.C3;const SID=0;const INDEX=1;const NAME=2;\nclass BehaviorSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack);this._sid=NaN}GetEditorIndex(){const dataItem=this._propertyTrack.GetPropertyTrackDataItem();return dataItem.GetSourceAdapterArguments()[INDEX]}GetTarget(){const dataItem=this._propertyTrack.GetPropertyTrackDataItem();const track=this._propertyTrack.GetTrack();const sid=this._sid?this._sid:dataItem.GetSourceAdapterArguments()[SID];const instance=track.GetInstance();const index=\ninstance.GetBehaviorIndexBySID(sid);const behaviorInstance=instance.GetBehaviorInstances()[index];return behaviorInstance.GetSdkInstance()}GetBehaviorType(objectClass){const dataItem=this._propertyTrack.GetPropertyTrackDataItem();const name=dataItem.GetSourceAdapterArguments()[NAME];return objectClass.GetBehaviorTypeByName(name)}UpdateBehaviorTypeSid(sid){const dataItem=this._propertyTrack.GetPropertyTrackDataItem();if(dataItem.GetSourceAdapterArguments()[SID]===sid)return;this._sid=sid}Interpolate(time,\nstart,end,setTime,ensureValue,endState,propertyKeyframeReached){const track=this._propertyTrack.GetTrack();const instance=track.GetInstance();if(!this.GetBehaviorType(instance.GetObjectClass()))return;super.Interpolate(time,start,end,setTime,ensureValue,endState,propertyKeyframeReached)}GetInterpolatedValue(time,start,end){const track=this._propertyTrack.GetTrack();const instance=track.GetInstance();if(!this.GetBehaviorType(instance.GetObjectClass()))return;return super.GetInterpolatedValue(time,\nstart,end)}_SaveToJson(){return Object.assign(super._SaveToJson(),{\"sid\":this._sid})}_LoadFromJson(o){if(!o)return;super._LoadFromJson(o);this._sid=o[\"sid\"]}}C3.PropertyTrackState.BehaviorSourceAdapter=BehaviorSourceAdapter;\n\n}\n\n// timelines/state/propertySourceAdapters/effectSourceAdapter.js\n{\n'use strict';const C3=self.C3;const NAME=0;const INDEX=1;\nclass EffectSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack)}GetEditorIndex(){return this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[INDEX]}GetTarget(){const pTrack=this._propertyTrack;const track=pTrack.GetTrack();const worldInfo=track.GetWorldInfo();const instanceEffectList=worldInfo.GetInstanceEffectList();const effectList=instanceEffectList.GetEffectList();const effectType=this.GetEffectType(effectList);\nconst effectIndex=effectType.GetIndex();if(instanceEffectList.IsEffectIndexActive(effectIndex))return instanceEffectList.GetEffectParametersForIndex(effectIndex);return null}GetEffectType(effectList){const pTrack=this._propertyTrack;const name=pTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[NAME];return effectList.GetEffectTypeByName(name)}Interpolate(time,start,end,setTime,ensureValue,endState,propertyKeyframeReached){if(!this._IsEffectActive())return;super.Interpolate(time,start,end,\nsetTime,ensureValue,endState,propertyKeyframeReached)}GetInterpolatedValue(time,start,end){if(!this._IsEffectActive())return;return super.GetInterpolatedValue(time,start,end)}_IsEffectActive(){const pTrack=this._propertyTrack;const track=pTrack.GetTrack();const worldInfo=track.GetWorldInfo();const instanceEffectList=worldInfo.GetInstanceEffectList();const effectList=instanceEffectList.GetEffectList();const effectType=this.GetEffectType(effectList);if(!effectType)return;const effectIndex=effectType.GetIndex();\nreturn instanceEffectList.IsEffectIndexActive(effectIndex)}}C3.PropertyTrackState.EffectSourceAdapter=EffectSourceAdapter;\n\n}\n\n// timelines/state/propertySourceAdapters/pluginSourceAdapter.js\n{\n'use strict';const C3=self.C3;const INDEX=0;\nclass PluginSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack)}GetEditorIndex(){return this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[INDEX]}GetTarget(){return this._propertyTrack.GetTrack().GetInstance().GetSdkInstance()}Interpolate(time,start,end,setTime,ensureValue,endState,propertyKeyframeReached){const track=this._propertyTrack.GetTrack();const templatePlugin=track.GetObjectClass().GetPlugin();const currentPlugin=\ntrack.GetInstance().GetObjectClass().GetPlugin();if(templatePlugin!==currentPlugin)return;super.Interpolate(time,start,end,setTime,ensureValue,endState,propertyKeyframeReached)}GetInterpolatedValue(time,start,end){const track=this._propertyTrack.GetTrack();const templatePlugin=track.GetObjectClass().GetPlugin();const currentPlugin=track.GetInstance().GetObjectClass().GetPlugin();if(templatePlugin!==currentPlugin)return;return super.GetInterpolatedValue(time,start,end)}GetOptionalCallbacks(){const track=\nthis._propertyTrack.GetTrack();const plugin=track.GetObjectClass().GetPlugin();if(C3.Plugins.Sprite&&plugin instanceof C3.Plugins.Sprite)if(this._propertyTrack.GetPropertyName()===\"initial-frame\"||this._propertyTrack.GetPropertyName()===\"initial-animation\")switch(this._propertyTrack.GetResultMode()){case \"relative\":{return null}case \"absolute\":{return null}}}}C3.PropertyTrackState.PluginSourceAdapter=PluginSourceAdapter;\n\n}\n\n// timelines/state/propertySourceAdapters/valueSourceAdapter.js\n{\n'use strict';const C3=self.C3;\nclass ValueSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack);this._value=0;this._init=false}MayNeedBeforeAndAfterInterpolate(){return false}SetInitialState(){const propertyTrackData=this._propertyTrack.GetPropertyTrackData();let propertyTrackDataItem=this._propertyTrack.GetPropertyTrackDataItem();propertyTrackDataItem=propertyTrackData.GetFirstPropertyKeyframeDataItem(propertyTrackDataItem);this._value=propertyTrackDataItem.GetValueWithResultMode()}SetResumeState(){}GetValue(){if(!this._init)this._propertyTrack.Interpolate(0);return this._value}Interpolate(time,\nstart,end,setTime,ensureValue,endState,propertyKeyframeReached){this._value=C3.PropertyTrackState.NumericTypeAdapter.Interpolate(time,start,end,this._propertyTrack);this._init=true}SaveState(){}ClearSaveState(){}GetCurrentState(){return this._value}CompareInitialStateWithCurrent(){return false}CompareSaveStateWithCurrent(){return false}_SaveToJson(){return{\"value\":this._value,\"init\":this._init}}_LoadFromJson(o){if(!o)return;this._value=o[\"value\"];this._init=o.hasOwnProperty(\"init\")?o[\"init\"]:true}}\nC3.PropertyTrackState.ValueSourceAdapter=ValueSourceAdapter;\n\n}\n\n// timelines/state/propertySourceAdapters/audioSourceAdapter.js\n{\n'use strict';const C3=self.C3;const PROJECT_FILE=0;const PROJECT_FILE_NAME=0;const PROJECT_FILE_TYPE=1;const START_OFFSET=1;const AUDIO_DURATION=2;const AUDIO_TAG=3;\nclass AudioSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack);this._audioPlaybackStarted=false;this._sdkInstance=null;this._actions=null;this._expressions=null;this._timeline=this._propertyTrack.GetTimeline();this._track=this._propertyTrack.GetTrack();this._sourceAdapterArgs=this._propertyTrack.GetSourceAdapterArgs();this._fileArgs=this._sourceAdapterArgs[PROJECT_FILE];this._startOffsetTime=this._sourceAdapterArgs[START_OFFSET];if(this._sourceAdapterArgs[AUDIO_TAG])this._audioTag=\nthis._sourceAdapterArgs[AUDIO_TAG];else this._audioTag=Math.random().toString(36).slice(2);this._pauseTime=NaN;this._pauseVolume=NaN;this._volume=NaN;this._audioSource=null;this._Initialize()}Release(){super.Release();this._sdkInstance=null;this._actions=null;this._expressions=null;this._timeline=null;this._track=null;this._sourceAdapterArgs=null;this._fileArgs=null;this._audioSource=null}_Initialize(){if(!self.C3.Plugins.Audio)return;const runtime=this._propertyTrack.GetRuntime();const audioObjectClass=\nruntime.GetObjectClassByName(\"audio\");if(audioObjectClass)this._sdkInstance=audioObjectClass.GetSingleGlobalInstance().GetSdkInstance();this._actions=self.C3.Plugins.Audio.Acts;this._expressions=self.C3.Plugins.Audio.Exps}_MaybeSetAudioSource(){if(this._audioSource)return;const track=this._propertyTrack.GetTrack();const audioSourcePropertyTrack=track.GetPropertyTrack(\"audioSource\");if(audioSourcePropertyTrack)this._audioSource=audioSourcePropertyTrack.GetSourceAdapter()}_GetPauseVolume(){const track=\nthis._propertyTrack.GetTrack();const volumePropertyTrack=track.GetPropertyTrack(\"volume\");if(volumePropertyTrack)return volumePropertyTrack.GetSourceAdapter()._pauseVolume;else return this._pauseVolume}TimelineRemoved(){super.TimelineRemoved();this._audioPlaybackStarted=false;if(this._sdkInstance){if(this._expressions){this._pauseTime=this._expressions.PlaybackTime.call(this._sdkInstance,this._audioTag);this._pauseVolume=this._expressions.Volume.call(this._sdkInstance,this._audioTag)}if(this._actions)this._actions.Stop.call(this._sdkInstance,\nthis._audioTag)}}GetAudioTag(){return this._audioTag}GetVolume(){return this._volume}SetVolume(v){this._volume=v}SetInitialState(){super.SetInitialState();this._pauseTime=NaN;this._audioPlaybackStarted=false}SetResumeState(){super.SetResumeState();const timeline=this._propertyTrack.GetTimeline();const time=timeline.GetTime();this._pauseTime=time-this._startOffsetTime;switch(this._propertyTrack.GetPropertyName()){case \"audioSource\":{break}case \"volume\":{this._pauseVolume=this._propertyTrack.GetInterpolatedValue(time);\nbreak}}this._audioPlaybackStarted=false}Interpolate(time,start,end,setTime,ensureValue,endState,propertyKeyframeReached){if(!this._sdkInstance)return;switch(this._propertyTrack.GetPropertyName()){case \"audioSource\":{if(!this._timeline.IsForwardPlayBack())return;if(setTime){if(this._actions)this._actions.Stop.call(this._sdkInstance,this._audioTag);return}if(time<this._startOffsetTime){this._audioPlaybackStarted=false;return}const aPlaybackRate=this._expressions.PlaybackRate.call(this._sdkInstance,\nthis._audioTag);const tPlaybackRate=this._timeline.GetPlaybackRate();if(tPlaybackRate!==aPlaybackRate)this._actions.SetPlaybackRate.call(this._sdkInstance,this._audioTag,tPlaybackRate);if(this._audioPlaybackStarted)return;if(!this._propertyTrack.GetTimeline().IsPlaying())return;this._audioPlaybackStarted=true;if(isNaN(this._pauseTime)){const thenTime=self[\"performance\"].now();const startDeltaTime=time-this._startOffsetTime;const state=this._sdkInstance.GetAudioContextState();if(state===\"suspended\"){this._audioPlaybackStarted=\nfalse;return}const nowTime=self[\"performance\"].now();const postToDOMDeltaTime=(nowTime-thenTime)/1E3;const startPlaybackOffset=startDeltaTime+postToDOMDeltaTime;if(this._actions){let startVolume=this.GetVolume();if(isNaN(startVolume)){this.SetVolume(0);startVolume=0}else this.SetVolume(startVolume);this._actions.PlayFromTimeline.call(this._sdkInstance,this._fileArgs,startVolume,this._audioTag,startPlaybackOffset)}}else{const startTime=this._pauseTime;this._pauseTime=NaN;const startVolume=this._GetPauseVolume();\nthis._pauseVolume=NaN;const state=this._sdkInstance.GetAudioContextState();if(state===\"suspended\"){this._audioPlaybackStarted=false;return}if(this._actions){this.SetVolume(startVolume);this._actions.PlayFromTimeline.call(this._sdkInstance,this._fileArgs,startVolume,this._audioTag,startTime)}}break}case \"volume\":{this._MaybeSetAudioSource();super.Interpolate(time,start,end,setTime,ensureValue,endState,propertyKeyframeReached)}}}GetInterpolatedValue(time,start,end){if(!this._sdkInstance)return;switch(this._propertyTrack.GetPropertyName()){case \"audioSource\":{return}case \"volume\":{this._MaybeSetAudioSource();\nreturn super.GetInterpolatedValue(time,start,end)}}}Getter(wi,track){if(this._audioSource)return this._audioSource.GetVolume();return 0}Setter(wi,value,track,interpolationAdapter){if(this._audioSource)this._audioSource.SetVolume(this.Getter()+value);if(this._actions&&this._audioSource)this._actions.SetVolume.call(this._sdkInstance,this._audioSource.GetAudioTag(),this._audioSource.GetVolume())}AbsoluteSetter(wi,value,track){if(this._audioSource)this._audioSource.SetVolume(value);if(this._actions&&\nthis._audioSource)this._actions.SetVolume.call(this._sdkInstance,this._audioSource.GetAudioTag(),this._audioSource.GetVolume())}DoesRounding(){return true}_SaveToJson(){return{\"audioPlaybackStarted\":this._audioPlaybackStarted,\"audioTag\":this._audioTag,\"pauseTime\":this._pauseTime,\"pauseVolume\":this._pauseVolume,\"volume\":this._volume}}_LoadFromJson(o){if(!o)return;this._audioPlaybackStarted=o[\"audioPlaybackStarted\"];this._audioTag=o[\"audioTag\"];this._pauseTime=o[\"pauseTime\"];this._pauseVolume=o[\"pauseVolume\"];\nthis._volume=o[\"volume\"];this._Initialize()}}C3.PropertyTrackState.AudioSourceAdapter=AudioSourceAdapter;\n\n}\n\n// timelines/state/propertyInterpolationAdapters/propertyInterpolationAdapter.js\n{\n'use strict';const C3=self.C3;\nC3.PropertyTrackState.PropertyInterpolationAdapter=class PropertyInterpolationAdapter{constructor(sourceAdapter){this._sourceAdapter=sourceAdapter;this._propertyTrack=sourceAdapter.GetPropertyTrack();this._worldInfo=this._propertyTrack.GetTrack().GetWorldInfo();this._property=this._propertyTrack.GetPropertyName();this._firstAbsoluteUpdate=false;this._saveState=null;this._target=null}Release(){this._sourceAdapter=null;this._propertyTrack=null;this._worldInfo=null;this._saveState=null;this._target=\nnull}MayNeedBeforeAndAfterInterpolate(){return false}TimelineRemoved(){}CleanCaches(){this._worldInfo=null;this._saveState=null;this._target=null}GetSourceAdapter(){return this._sourceAdapter}GetPropertyTrack(){return this._propertyTrack}GetWorldInfo(){if(this._worldInfo)return this._worldInfo;this._worldInfo=this._propertyTrack.GetTrack().GetWorldInfo();return this._worldInfo}SetFirstAbsoluteUpdate(f){this._firstAbsoluteUpdate=!!f}GetFirstAbsoluteUpdate(){return this._firstAbsoluteUpdate}SetResetState(){}SetInitialState(){}SetResumeState(){}SetSaveState(){this._saveState=\nthis.GetCurrentState()}ClearSaveState(){this._saveState=null}GetCurrentState(){}CompareInitialStateWithCurrent(){}CompareSaveStateWithCurrent(){}CanChange(value){const targetType=typeof this._Getter();const newType=typeof value;return targetType===newType}BeforeChangeProperty(){}ChangeProperty(time,value,start,end,setTime,ensureValue,endState,propertyKeyframeReached){}AfterChangeProperty(){}_FirstKeyframeGetter(){const propertyKeyframeDataItem=this._PickTimelinePlaybackMode(()=>{const propertyTrackDataItem=\nthis._propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=this._propertyTrack.GetPropertyTrackData();return propertyTrackData.GetFirstPropertyKeyframeDataItem(propertyTrackDataItem)},()=>{const propertyTrackDataItem=this._propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=this._propertyTrack.GetPropertyTrackData();return propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem)});return propertyKeyframeDataItem.GetAbsoluteValue()}_CurrentKeyframeGetter(){const timeline=\nthis._propertyTrack.GetTimeline();const time=timeline.GetTime()-this._propertyTrack.GetTrack().GetStartOffset();const propertyKeyframe=this._PickTimelinePlaybackMode(()=>{const propertyTrackDataItem=this._propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=this._propertyTrack.GetPropertyTrackData();return propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,propertyTrackDataItem)},()=>{const propertyTrackDataItem=this._propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=\nthis._propertyTrack.GetPropertyTrackData();const ret=propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(time,propertyTrackDataItem);if(!ret)return propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);return ret});return propertyKeyframe.GetAbsoluteValue()}_PickTimelinePlaybackMode(forwardFunc,backwardFunc){const timeline=this._propertyTrack.GetTimeline();return timeline.IsForwardPlayBack()?forwardFunc():backwardFunc()}_PickResultMode(relativeFunc,absoluteFunc){const resultMode=\nthis._propertyTrack.GetResultMode();return resultMode===\"relative\"?relativeFunc():absoluteFunc()}_PickFirstAbsoluteUpdate(firstFunc,otherFunc){if(this.GetFirstAbsoluteUpdate()){this.SetFirstAbsoluteUpdate(false);return firstFunc()}else return otherFunc()}_GetAbsoluteInitialValue(keyframeValue){}_GetIndex(){return this._sourceAdapter.GetIndex()}_GetTarget(){if(this._target)return this._target;this._target=this._sourceAdapter.GetTarget();return this._target}_PickSource(bFunc,eFunc,ivFunc,pFunc,wiFunc,\naFunc){const id=this._propertyTrack.GetSourceAdapterId();switch(id){case \"behavior\":return bFunc();case \"effect\":return eFunc();case \"instance-variable\":return ivFunc();case \"plugin\":return pFunc();case \"world-instance\":return wiFunc();case \"audio\":return aFunc()}}_SaveToJson(){return{\"firstAbsoluteUpdate\":this._firstAbsoluteUpdate,\"saveState\":this._saveState}}_LoadFromJson(o){if(!o)return;this._firstAbsoluteUpdate=o[\"firstAbsoluteUpdate\"];this._saveState=o[\"saveState\"]}_GetPropertyKeyframeStubs(propertyTracks,\nfirstOnly=false){const ret=[];for(const propertyTrack of propertyTracks){const startOffset=propertyTrack.GetTrack().GetStartOffset();for(const propertyKeyframeDataItem of propertyTrack.GetPropertyKeyframeDataItems())if(firstOnly&&propertyKeyframeDataItem.GetTime()===0)ret.push({time:startOffset+propertyKeyframeDataItem.GetTime(),value:propertyKeyframeDataItem.GetAbsoluteValue()});else if(!firstOnly)ret.push({time:startOffset+propertyKeyframeDataItem.GetTime(),value:propertyKeyframeDataItem.GetAbsoluteValue()})}return ret.sort((f,\ns)=>f.time-s.time)}_GetLastPropertyKeyframeStub(timeline,time,propertyKeyframeStubs){return this._GetPropertyKeyframeStubLowerThanPlayhead(time,propertyKeyframeStubs)}_GetPropertyKeyframeStubLowerThanPlayhead(time,propertyKeyframeStubs){for(let i=propertyKeyframeStubs.length-1;i>=0;i--){const stubTime=propertyKeyframeStubs[i].time;if(stubTime<=time)return propertyKeyframeStubs[i]}return null}};\n\n}\n\n// timelines/state/propertyInterpolationAdapters/colorInterpolationAdapter.js\n{\n'use strict';const C3=self.C3;const TMP_COLORS_MAP=new Map;const TMP_COLOR=[0,0,0];\nclass ColorInterpolationAdapter extends C3.PropertyTrackState.PropertyInterpolationAdapter{constructor(sourceAdapter){super(sourceAdapter)}SetResetState(){}SetInitialState(){}SetResumeState(){}GetCurrentState(){const id=this._propertyTrack.GetSourceAdapterId();const target=this._GetTarget();const index=this._GetIndex();switch(id){case \"behavior\":return this._ToColorArray(target.GetPropertyValueByIndex(index));case \"effect\":return this._ToColorArray(target[index]);case \"plugin\":return this._ToColorArray(target.GetPropertyValueByIndex(index));\ncase \"world-instance\":return this._ToColorArray(this._Getter())}}CompareInitialStateWithCurrent(){const firstKeyframeColor=this._FirstKeyframeGetter();return!this._CompareColors(firstKeyframeColor,this._Getter())}CompareSaveStateWithCurrent(){if(C3.IsNullOrUndefined(this._saveState))return false;return!this._CompareColors(this._saveState,this._Getter())}_CompareColors(fColor,sColor){fColor=this._GetColorFromArray(fColor);sColor=this._GetColorFromArray(sColor);return fColor.equalsIgnoringAlpha(sColor)}_FirstKeyframeGetter(){const color=\nsuper._FirstKeyframeGetter();return this._GetColorFromArray(color)}_CurrentKeyframeGetter(){const color=super._CurrentKeyframeGetter();return this._GetColorFromArray(color)}_GetAbsoluteInitialValue(value){}_ToColorArray(color){if(C3.IsInstanceOf(color,C3.Color))return color.toArray().slice(0,3);return color.slice(0,3)}_GetColorFromArray(color){if(C3.IsInstanceOf(color,C3.Color))return color;return new C3.Color(color[0],color[1],color[2],1)}CanChange(value){return true}MayNeedBeforeAndAfterInterpolate(){return true}BeforeChangeProperty(){const timeline=\nthis._propertyTrack.GetTimeline();const instance=this._propertyTrack.GetInstance();const sourceAdapter=this._propertyTrack.GetSourceAdapter();const propertyTracks=timeline.GetSimilarPropertyTracks(instance,sourceAdapter,this._property,this._propertyTrack);if(propertyTracks&&propertyTracks.length>1){if(!TMP_COLORS_MAP.has(instance))TMP_COLORS_MAP.set(instance,new Map);const instanceMap=TMP_COLORS_MAP.get(instance);const id=this._propertyTrack.GetSourceAdapterId();if(!instanceMap.has(id))instanceMap.set(id,\nnew Map);const sourceMap=instanceMap.get(id);if(!sourceMap.has(this._property))sourceMap.set(this._property,{used:false,color:new C3.Color(0,0,0,1)})}}_GetTmpColor(instance,sourceId,propertyName){const tmpColorObj=TMP_COLORS_MAP.get(instance).get(sourceId).get(propertyName);tmpColorObj.used=true;return tmpColorObj.color}ChangeProperty(time,value,start,end,setTime,ensureValue,endState,propertyKeyframeReached){const timeline=this._propertyTrack.GetTimeline();const track=this._propertyTrack.GetTrack();\nconst instance=this._propertyTrack.GetInstance();const sourceAdapter=this._propertyTrack.GetSourceAdapter();const sourceAdapterId=this._propertyTrack.GetSourceAdapterId();const property=this._property;const propertyTracks=timeline.GetSimilarPropertyTracks(instance,sourceAdapter,property,this._propertyTrack);if(propertyTracks&&propertyTracks.length>1){const propertyKeyframeStubs=this._GetPropertyKeyframeStubs(propertyTracks,true);const stub=this._GetLastPropertyKeyframeStub(timeline,timeline.GetTime(),\npropertyKeyframeStubs);if(stub){const startOffset=track.GetStartOffset();const t=stub.time-startOffset;if(t===0)this._GetTmpColor(instance,sourceAdapterId,this._property).addRgb(value[0],value[1],value[2]);else{if(t<0)return;const r=value[0];const g=value[1];const b=value[2];const v=this._propertyTrack.Interpolate(t,false,true);const dr=C3.Color.DiffChannel(r,v[0]);const dg=C3.Color.DiffChannel(g,v[1]);const db=C3.Color.DiffChannel(b,v[2]);this._GetTmpColor(instance,sourceAdapterId,this._property).addRgb(dr,\ndg,db)}}}else this._Setter(value[0],value[1],value[2])}AfterChangeProperty(){const instance=this._propertyTrack.GetInstance();if(!TMP_COLORS_MAP.has(instance))return;const instanceMap=TMP_COLORS_MAP.get(instance);const id=this._propertyTrack.GetSourceAdapterId();if(!instanceMap.has(id))return;const sourceMap=instanceMap.get(id);if(!sourceMap.has(this._property))return;const tmpColorObj=sourceMap.get(this._property);const used=tmpColorObj.used;const color=tmpColorObj.color;if(used)this._Setter(color.getR(),\ncolor.getG(),color.getB());if(sourceMap.size===0)instanceMap.delete(id);if(instanceMap.size===0)TMP_COLORS_MAP.delete(instance)}_Getter(){const id=this._propertyTrack.GetSourceAdapterId();const target=this._GetTarget();const index=this._GetIndex();switch(id){case \"behavior\":return this._GetColorFromArray(target.GetPropertyValueByIndex(index));case \"effect\":return target[index].clone();case \"plugin\":return this._GetColorFromArray(target.GetPropertyValueByIndex(index));case \"world-instance\":return this.GetWorldInfo().GetUnpremultipliedColor().clone()}}_Setter(r,\ng,b){const id=this._propertyTrack.GetSourceAdapterId();const target=this._GetTarget();const index=this._GetIndex();switch(id){case \"behavior\":TMP_COLOR[0]=r;TMP_COLOR[1]=g;TMP_COLOR[2]=b;target.SetPropertyValueByIndex(index,TMP_COLOR);break;case \"effect\":target[index].setRgb(r,g,b);break;case \"plugin\":TMP_COLOR[0]=r;TMP_COLOR[1]=g;TMP_COLOR[2]=b;target.SetPropertyValueByIndex(index,TMP_COLOR);break;case \"world-instance\":this.GetWorldInfo().SetUnpremultipliedColorRGB(r,g,b);break}}_SaveToJson(){}_LoadFromJson(o){}}\nC3.PropertyTrackState.PropertyInterpolationAdapter.ColorInterpolationAdapter=ColorInterpolationAdapter;\n\n}\n\n// timelines/state/propertyInterpolationAdapters/noInterpolationAdapter.js\n{\n'use strict';const C3=self.C3;const NS=C3.PropertyTrackState;\nclass NoInterpolationAdapter extends C3.PropertyTrackState.PropertyInterpolationAdapter{constructor(sourceAdapter){super(sourceAdapter)}SetResetState(){}SetInitialState(){}SetResumeState(){}GetCurrentState(){return this._Getter()}CompareInitialStateWithCurrent(){const firstKeyframeValue=this._FirstKeyframeGetter();return firstKeyframeValue!==this.GetCurrentState()}CompareSaveStateWithCurrent(){if(C3.IsNullOrUndefined(this._saveState))return false;return this._saveState!==this.GetCurrentState()}MayNeedBeforeAndAfterInterpolate(){return false}ChangeProperty(time,\nvalue,start,end,setTime,ensureValue,endState,propertyKeyframeReached){const propertyTrack=this._propertyTrack;const track=propertyTrack.GetTrack();const id=propertyTrack.GetSourceAdapterId();const timeline=propertyTrack.GetTimeline();const instance=track.GetInstance();const sourceAdapter=propertyTrack.GetSourceAdapter();const property=this._property;const propertyTracks=timeline.GetSimilarPropertyTracks(instance,sourceAdapter,property,propertyTrack);if(propertyTracks&&propertyTracks.length>1){const propertyKeyframeStubs=\nthis._GetPropertyKeyframeStubs(propertyTracks);const t=time+track.GetStartOffset();const stub=this._GetLastPropertyKeyframeStub(timeline,t,propertyKeyframeStubs);if(stub)value=stub.value}const type=propertyTrack.GetPropertyKeyframeType();switch(type){case \"numeric\":{if(!NS.NumericTypeAdapter.WillChange(this._GetIndex(),this._GetTarget(),value,id))return;break}case \"angle\":{if(!NS.AngleTypeAdapter.WillChange(this._GetIndex(),this._GetTarget(),value,id))return;break}case \"boolean\":{if(!NS.BooleanTypeAdapter.WillChange(this._GetIndex(),\nthis._GetTarget(),value,id))return;break}case \"color\":{if(!NS.ColorTypeAdapter.WillChange(this._GetIndex(),this._GetTarget(),value,id))return;break}case \"text\":{if(!NS.TextTypeAdapter.WillChange(this._GetIndex(),this._GetTarget(),value,id))return;break}}this._Setter(value)}_Getter(){const id=this._propertyTrack.GetSourceAdapterId();const target=this._GetTarget();const index=this._GetIndex();switch(id){case \"behavior\":return target.GetPropertyValueByIndex(index);case \"effect\":return target[index];\ncase \"instance-variable\":return target.GetInstanceVariableValue(index);case \"plugin\":return target.GetPropertyValueByIndex(index)}}_Setter(value){const id=this._propertyTrack.GetSourceAdapterId();const target=this._GetTarget();const index=this._GetIndex();switch(id){case \"behavior\":target.SetPropertyValueByIndex(index,value);break;case \"effect\":target[index]=value;break;case \"instance-variable\":target.SetInstanceVariableValue(index,value);break;case \"plugin\":target.SetPropertyValueByIndex(index,value);\nbreak}}}C3.PropertyTrackState.PropertyInterpolationAdapter.NoInterpolationAdapter=NoInterpolationAdapter;\n\n}\n\n// timelines/state/propertyInterpolationAdapters/numericInterpolationAdapter.js\n{\n'use strict';const C3=self.C3;const NS=C3.PropertyTrackState.PropertyInterpolationAdapter;const INSTANCE_FUNC_MAP=new Map;const add=(prop,setter,absolute_setter,getter,round,fRound=false,init=null,reset=null)=>{INSTANCE_FUNC_MAP.set(prop,{setter,absolute_setter,getter,round,fRound,init,reset})};add(\"offsetX\",(wi,v,t,a)=>{if(a._propertyTrack.GetResultMode()===\"relative\")wi.OffsetX(v,t.GetTimeline().GetTransformWithSceneGraph());else wi.OffsetX(v)},(wi,v)=>wi.SetX(v),wi=>wi.GetX(),true);\nadd(\"offsetY\",(wi,v,t,a)=>{if(a._propertyTrack.GetResultMode()===\"relative\")wi.OffsetY(v,t.GetTimeline().GetTransformWithSceneGraph());else wi.OffsetY(v)},(wi,v)=>wi.SetY(v),wi=>wi.GetY(),true);\nadd(\"offsetWidth\",(wi,v,t,a,noChanges)=>{if(v===0)return;const isRelative=a._propertyTrack.GetResultMode()===\"relative\";const isTween=a._typeAdapter.GetType()===1;if((isRelative||isTween)&&wi.HasParent()&&wi.GetTransformWithParentWidth()){if(isNaN(a._absoluteToFactor)){const parents=[];let parent=wi.GetParent();while(parent){parents.push(parent);parent=parent.GetParent()}parents.reverse();const get_track=(wi,t)=>{return t.GetTimeline().GetTrackFromInstance(wi.GetInstance())};const get_original_size=\n(wi,t)=>{const track=get_track(wi,t);if(track)return track.GetOriginalWidth();const sdki=wi.GetInstance().GetSdkInstance();if(sdki.IsOriginalSizeKnown())return sdki.GetOriginalWidth();return wi._GetSceneGraphInfo()._GetStartWidth()};const get_last_property_keyframe_value=(wi,t,propertyName,defaultValue=0)=>{const track=get_track(wi,t);if(!track)return defaultValue;const propertyTrack=track.GetPropertyTrack(propertyName);if(!propertyTrack)return defaultValue;const parentPropertyKeyframeData=propertyTrack.GetPropertyTrackDataItem().GetPropertyKeyframeData();\nif(!parentPropertyKeyframeData)return defaultValue;const parentLastPropertyKeyframeDataItem=parentPropertyKeyframeData.GetLastPropertyKeyframeDataItem();if(!parentLastPropertyKeyframeDataItem)return defaultValue;return parentLastPropertyKeyframeDataItem.GetValue()};let p=parents[0];const ownStartSize=isTween?p.GetWidth():p._GetSceneGraphInfo()._GetStartWidth();const ownStartScale=isTween?p._GetSceneGraphInfo().GetParentScaleX():p._GetSceneGraphInfo().GetStartScaleX();let absoluteToFactor=ownStartSize*\nownStartScale;absoluteToFactor+=get_last_property_keyframe_value(p,t,\"offsetWidth\");absoluteToFactor+=get_original_size(p,t)*get_last_property_keyframe_value(p,t,\"offsetScaleX\");for(let i=1;i<parents.length;i++){p=parents[i];const ownStartScale=isTween?p._GetSceneGraphInfo().GetParentScaleX():p._GetSceneGraphInfo().GetStartScaleX();absoluteToFactor*=ownStartScale;absoluteToFactor+=get_last_property_keyframe_value(p,t,\"offsetWidth\");absoluteToFactor+=get_original_size(p,t)*get_last_property_keyframe_value(p,\nt,\"offsetScaleX\",1)}a._absoluteToFactor=absoluteToFactor===0?Number.EPSILON:absoluteToFactor}if(noChanges)return;wi.OffsetWidth(v/a._absoluteToFactor,true)}else wi.OffsetWidth(v)},(wi,v)=>wi.SetWidth(v),wi=>wi.GetWidth(),true);\nadd(\"offsetHeight\",(wi,v,t,a,noChanges)=>{if(v===0)return;const isRelative=a._propertyTrack.GetResultMode()===\"relative\";const isTween=a._typeAdapter.GetType()===1;if((isRelative||isTween)&&wi.HasParent()&&wi.GetTransformWithParentHeight()){if(isNaN(a._absoluteToFactor)){const parents=[];let parent=wi.GetParent();while(parent){parents.push(parent);parent=parent.GetParent()}parents.reverse();const get_track=(wi,t)=>{return t.GetTimeline().GetTrackFromInstance(wi.GetInstance())};const get_original_size=\n(wi,t)=>{const track=get_track(wi,t);if(track)return track.GetOriginalHeight();const sdki=wi.GetInstance().GetSdkInstance();if(sdki.IsOriginalSizeKnown())return sdki.GetOriginalHeight();return wi._GetSceneGraphInfo()._GetStartHeight()};const get_last_property_keyframe_value=(wi,t,propertyName,defaultValue=0)=>{const track=t.GetTimeline().GetTrackFromInstance(wi.GetInstance());if(!track)return defaultValue;const propertyTrack=track.GetPropertyTrack(propertyName);if(!propertyTrack)return defaultValue;\nconst parentPropertyKeyframeData=propertyTrack.GetPropertyTrackDataItem().GetPropertyKeyframeData();if(!parentPropertyKeyframeData)return defaultValue;const parentLastPropertyKeyframeDataItem=parentPropertyKeyframeData.GetLastPropertyKeyframeDataItem();if(!parentLastPropertyKeyframeDataItem)return defaultValue;return parentLastPropertyKeyframeDataItem.GetValue()};let p=parents[0];const ownStartSize=isTween?p.GetHeight():p._GetSceneGraphInfo()._GetStartHeight();const ownStartScale=isTween?p._GetSceneGraphInfo().GetParentScaleY():\np._GetSceneGraphInfo().GetStartScaleY();let absoluteToFactor=ownStartSize*ownStartScale;absoluteToFactor+=get_last_property_keyframe_value(p,t,\"offsetHeight\");absoluteToFactor+=get_original_size(p,t)*get_last_property_keyframe_value(p,t,\"offsetScaleY\");for(let i=1;i<parents.length;i++){p=parents[i];const ownStartScale=isTween?p._GetSceneGraphInfo().GetParentScaleY():p._GetSceneGraphInfo().GetStartScaleY();absoluteToFactor*=ownStartScale;absoluteToFactor+=get_last_property_keyframe_value(p,t);absoluteToFactor+=\nget_original_size(p,t)*get_last_property_keyframe_value(p,t,\"offsetScaleY\",1)}a._absoluteToFactor=absoluteToFactor===0?Number.EPSILON:absoluteToFactor}if(noChanges)return;wi.OffsetHeight(v/a._absoluteToFactor,true)}else wi.OffsetHeight(v)},(wi,v)=>wi.SetHeight(v),wi=>wi.GetHeight(),true);add(\"offsetAngle\",(wi,v)=>wi.OffsetAngle(v),(wi,v)=>wi.SetAngle(v),wi=>wi.GetAngle(),false,true);\nadd(\"offsetOpacity\",(wi,v,t,a,noChanges)=>{const opacityFactor=a._opacityFactor?a._opacityFactor:1;v/=opacityFactor;const o=wi.GetOpacity();const nv=o+v;const min=0;const max=1;if(a._clampAccumulator===0){if(nv>max)a._clampAccumulator+=nv-max;else if(nv<min)a._clampAccumulator+=nv;wi.OffsetOpacity(v)}else{const nv=wi.GetOpacity()+v;if(v>0&&a._clampAccumulator>0){if(nv>max)a._clampAccumulator+=nv-max}else if(v>0&&a._clampAccumulator<0){a._clampAccumulator+=v;if(a._clampAccumulator>0)a._clampAccumulator=\n0}else if(v<0&&a._clampAccumulator>0){a._clampAccumulator+=v;if(a._clampAccumulator<0)a._clampAccumulator=0}else if(v<0&&a._clampAccumulator<0)if(nv<min)a._clampAccumulator+=nv}},(wi,v)=>{wi.SetOpacity(v)},wi=>{return wi.GetOpacity()},false,true,(a,wi,t)=>{a._clampAccumulator=0;switch(a._propertyTrack.GetResultMode()){case \"relative\":{const propertyTrackData=a._propertyTrack.GetPropertyTrackData();const propertyTrackDataItem=a._propertyTrack.GetPropertyTrackDataItem();const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();\nconst propertyKeyframeDataItems=propertyKeyframeData.GetPropertyKeyframeDataItemArray();let startingAbsoluteOpacity=a.GetWorldInfo().GetOpacity();let currentAbsoluteOpacity=startingAbsoluteOpacity;for(const propertyKeyframeDataItem of propertyKeyframeDataItems){const time=propertyKeyframeDataItem.GetTime();const currentRelativeOpacity=a._propertyTrack.GetInterpolatedValue(time);currentAbsoluteOpacity=startingAbsoluteOpacity+currentRelativeOpacity;currentAbsoluteOpacity=C3.clamp(currentAbsoluteOpacity,\n0,1)}a._totalForewardOpacityDelta=startingAbsoluteOpacity-currentAbsoluteOpacity;a._totalForewardOpacityDelta=Math.round((a._totalForewardOpacityDelta+Number.EPSILON)*100)/100;currentAbsoluteOpacity=startingAbsoluteOpacity;for(let i=propertyKeyframeDataItems.length-1;i>=0;i--){const time=propertyKeyframeDataItems[i].GetTime();const currentRelativeOpacity=a._propertyTrack.GetInterpolatedValue(time);currentAbsoluteOpacity-=currentRelativeOpacity;currentAbsoluteOpacity=C3.clamp(currentAbsoluteOpacity,\n0,1)}a._totalBackwardOpacityDelta=currentAbsoluteOpacity;a._totalBackwardOpacityDelta=Math.round((a._totalBackwardOpacityDelta+Number.EPSILON)*100)/100;break}case \"absolute\":{break}}const isRelative=a._propertyTrack.GetResultMode()===\"relative\";const isTween=a._typeAdapter.GetType()===1;if((isRelative||isTween)&&wi.HasParent()&&wi.GetTransformWithParentOpacity()){const parents=[];let parent=wi.GetParent();while(parent){parents.push(parent);parent=parent.GetParent()}parents.reverse();const get_last_property_keyframe_value=\n(wi,t,propertyName)=>{const track=t.GetTimeline().GetTrackFromInstance(wi.GetInstance());if(!track)return 0;const propertyTrack=track.GetPropertyTrack(propertyName);if(!propertyTrack)return 0;const parentPropertyKeyframeData=propertyTrack.GetPropertyTrackDataItem().GetPropertyKeyframeData();if(!parentPropertyKeyframeData)return 0;const parentLastPropertyKeyframeDataItem=parentPropertyKeyframeData.GetLastPropertyKeyframeDataItem();if(!parentLastPropertyKeyframeDataItem)return 0;return parentLastPropertyKeyframeDataItem.GetValue()};\nlet opacityFactor=parents[0]._GetSceneGraphInfo().GetStartOpacity();opacityFactor+=get_last_property_keyframe_value(parents[0],t,\"offsetOpacity\");for(let i=1;i<parents.length;i++)opacityFactor+=get_last_property_keyframe_value(parents[i],t,\"offsetOpacity\");a._opacityFactor=opacityFactor===0?1:opacityFactor}},a=>{switch(a._propertyTrack.GetResultMode()){case \"relative\":{a._clampAccumulator=0;const wi=a.GetWorldInfo();let currentOpacity=wi.GetOpacity();currentOpacity=Math.round((currentOpacity+Number.EPSILON)*\n100)/100;if(a._propertyTrack.GetTimeline().IsForwardPlayBack()){wi.SetOpacity(currentOpacity+a._totalForewardOpacityDelta);a._lastValue=0}else{wi.SetOpacity(currentOpacity-a._totalBackwardOpacityDelta);a._lastValue=a.GetSourceAdapter().GetValueAtTime()}break}case \"absolute\":{break}}});add(\"offsetOriginX\",(wi,v)=>wi.OffsetOriginX(v),(wi,v)=>wi.SetOriginX(v),wi=>wi.GetOriginX(),false);add(\"offsetOriginY\",(wi,v)=>wi.OffsetOriginY(v),(wi,v)=>wi.SetOriginY(v),wi=>wi.GetOriginY(),false);\nadd(\"offsetZElevation\",(wi,v)=>wi.OffsetZElevation(v),(wi,v)=>wi.SetZElevation(v),wi=>wi.GetZElevation(),true);\nadd(\"offsetScaleX\",(wi,v,t,a)=>{if(v===0)return;const mirrorFactor=wi.GetWidth()<0?-1:1;if(a._propertyTrack.GetResultMode()===\"relative\"&&wi.HasParent()&&wi.GetTransformWithParentWidth()){const value=t.GetOriginalWidth()*mirrorFactor*v;if(isNaN(a._absoluteToFactor))INSTANCE_FUNC_MAP.get(\"offsetWidth\").setter(wi,1,t,a,true);wi.OffsetWidth(value/a._absoluteToFactor,true)}else wi.OffsetWidth(t.GetOriginalWidth()*mirrorFactor*v)},(wi,v,t)=>{wi.SetWidth(t.GetOriginalWidth()*v)},(wi,t)=>{const mirrorFactor=\nwi.GetWidth()<0?-1:1;if(wi.GetTransformWithParentWidth()){const parentWi=wi.GetParent();const parentTrack=t.GetTimeline().GetTrackFromInstance(parentWi.GetInstance());let parentScale=NaN;if(parentTrack)parentScale=parentWi.GetWidth()/parentTrack.GetOriginalWidth();else{const sdki=parentWi.GetInstance().GetSdkInstance();if(sdki.IsOriginalSizeKnown())parentScale=parentWi.GetWidth()/sdki.GetOriginalWidth();else parentScale=1}return wi.GetWidth()*mirrorFactor/(t.GetOriginalWidth()*parentScale)}else return wi.GetWidth()*\nmirrorFactor/t.GetOriginalWidth()},false);\nadd(\"offsetScaleY\",(wi,v,t,a)=>{if(v===0)return;const flipFactor=wi.GetHeight()<0?-1:1;if(a._propertyTrack.GetResultMode()===\"relative\"&&wi.HasParent()&&wi.GetTransformWithParentHeight()){const value=t.GetOriginalHeight()*flipFactor*v;if(isNaN(a._absoluteToFactor))INSTANCE_FUNC_MAP.get(\"offsetHeight\").setter(wi,1,t,a,true);wi.OffsetHeight(value/a._absoluteToFactor,true)}else wi.OffsetHeight(t.GetOriginalHeight()*flipFactor*v)},(wi,v,t)=>{wi.SetHeight(t.GetOriginalHeight()*v)},(wi,t)=>{const flipFactor=\nwi.GetHeight()<0?-1:1;if(wi.GetTransformWithParentHeight()){const parentWi=wi.GetParent();const parentTrack=t.GetTimeline().GetTrackFromInstance(parentWi.GetInstance());let parentScale=NaN;if(parentTrack)parentScale=parentWi.GetHeight()/parentTrack.GetOriginalHeight();else{const sdki=parentWi.GetInstance().GetSdkInstance();if(sdki.IsOriginalSizeKnown())parentScale=parentWi.GetHeight()/sdki.GetOriginalHeight();else parentScale=1}return wi.GetHeight()*flipFactor/(t.GetOriginalHeight()*parentScale)}else return wi.GetHeight()*\nflipFactor/t.GetOriginalHeight()},false);\nclass NumericInterpolationAdapter extends C3.PropertyTrackState.PropertyInterpolationAdapter{constructor(sourceAdapter){super(sourceAdapter);this._lastValue=0;this._clampAccumulator=0;this._totalForewardOpacityDelta=0;this._totalBackwardOpacityDelta=0;this._opacityFactor=NaN;this._absoluteToFactor=NaN;this._instance_getter=null;this._instance_setter=null;this._instance_absolute_setter=null;this._reset_action=null;this._init_action=null;this._source_adapter_getter=null;this._source_adapter_setter=\nnull;this._source_adapter_absolute_setter=null;this._round=false;this._fRound=false;if(C3.IsInstanceOf(this._propertyTrack.GetTimeline(),C3.TweenState))this._typeAdapter=new C3.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTween(this);else this._typeAdapter=new C3.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTimeline(this);const property=this._propertyTrack.GetPropertyName();switch(this._propertyTrack.GetSourceAdapterId()){case \"world-instance\":{const p=\nINSTANCE_FUNC_MAP.get(property);this._instance_getter=p.getter;this._instance_setter=p.setter;this._instance_absolute_setter=p.absolute_setter;this._round=p.round;this._fRound=p.fRound;this._init_action=p.init;this._reset_action=p.reset;break}case \"audio\":{this._source_adapter_getter=sourceAdapter.Getter;this._source_adapter_setter=sourceAdapter.Setter;this._source_adapter_absolute_setter=sourceAdapter.AbsoluteSetter;this._round=!!sourceAdapter.DoesRounding();this._fRound=false;break}}}Release(){this._typeAdapter=\nnull;this._instance_getter=null;this._instance_setter=null;this._instance_absolute_setter=null;this._absoluteToFactor=NaN;super.Release()}MayNeedBeforeAndAfterInterpolate(){return this._typeAdapter.MayNeedBeforeAndAfterInterpolate()}GetLastValue(){return this._lastValue}SetLastValue(v){this._lastValue=v}SetResetState(){if(this._reset_action)this._reset_action(this)}SetInitialState(){const initValue=this._typeAdapter.SetInitialState();if(typeof initValue===\"number\")this._lastValue=initValue;if(this._init_action){const wi=\nthis.GetWorldInfo();const track=this._propertyTrack.GetTrack();this._init_action(this,wi,track)}}SetResumeState(){const resumeValue=this._typeAdapter.SetResumeState();if(typeof resumeValue===\"number\")this._lastValue=resumeValue}GetCurrentState(){return this._Getter()}CompareInitialStateWithCurrent(){const firstKeyframeValue=this._FirstKeyframeGetter();return firstKeyframeValue!==this.GetCurrentState()}CompareSaveStateWithCurrent(){if(C3.IsNullOrUndefined(this._saveState))return false;return this._saveState!==\nthis.GetCurrentState()}BeforeChangeProperty(){this._typeAdapter.BeforeChangeProperty()}ChangeProperty(time,value,start,end,setTime,ensureValue,endState,propertyKeyframeReached){return this._typeAdapter.ChangeProperty(time,value,start,end,setTime,ensureValue,endState,propertyKeyframeReached)}AfterChangeProperty(){this._typeAdapter.AfterChangeProperty()}_Getter(){const target=this._GetTarget();const index=this._GetIndex();const wi=this.GetWorldInfo();const track=this._propertyTrack.GetTrack();const id=\nthis._propertyTrack.GetSourceAdapterId();switch(id){case \"behavior\":return target.GetPropertyValueByIndex(index);case \"effect\":return target[index];case \"instance-variable\":return target.GetInstanceVariableValue(index);case \"plugin\":return target.GetPropertyValueByIndex(index);case \"world-instance\":return this._instance_getter(wi,track);case \"audio\":return this._source_adapter_getter.call(this.GetSourceAdapter(),wi,track)}}_Setter(value,start,end){const target=this._GetTarget();const index=this._GetIndex();\nconst wi=this.GetWorldInfo();const track=this._propertyTrack.GetTrack();const id=this._propertyTrack.GetSourceAdapterId();switch(id){case \"behavior\":target.OffsetPropertyValueByIndex(index,value);break;case \"effect\":target[index]+=value;break;case \"instance-variable\":target.SetInstanceVariableOffset(index,value);break;case \"plugin\":target.OffsetPropertyValueByIndex(index,value,this.GetSourceAdapter().GetOptionalCallbacks());break;case \"world-instance\":this._instance_setter(wi,value,track,this);break;\ncase \"audio\":this._source_adapter_setter.call(this.GetSourceAdapter(),wi,value,track,this);break}}_SetterAbsolute(value,propertyKeyframeReached,endState){let mode=this._propertyTrack.GetInterpolationMode();mode=mode===\"default\"?\"continuous\":mode;if(mode===\"discrete\"&&!propertyKeyframeReached)return;if(mode===\"discrete\"&&endState){const timeline=this._propertyTrack.GetTimeline();const time=timeline.GetTime();const propertyKeyframeDataItem=this._propertyTrack.GetPropertyKeyFrameDataItemAtTime(time);\nif(!propertyKeyframeDataItem)return}const target=this._GetTarget();const index=this._GetIndex();const wi=this.GetWorldInfo();const track=this._propertyTrack.GetTrack();const id=this._propertyTrack.GetSourceAdapterId();switch(id){case \"behavior\":target.SetPropertyValueByIndex(index,value);break;case \"effect\":target[index]=value;break;case \"instance-variable\":target.SetInstanceVariableValue(index,value);break;case \"plugin\":target.SetPropertyValueByIndex(index,value,this.GetSourceAdapter().GetOptionalCallbacks());\nbreak;case \"world-instance\":this._instance_absolute_setter(wi,value,track);break;case \"audio\":this._source_adapter_absolute_setter.call(this.GetSourceAdapter(),wi,value,track);break}}_MaybeEnsureValue(time,start,end,setTime,lastValue,currentValue,forceEndValue,endState){this._typeAdapter._MaybeEnsureValue(time,start,end,setTime,lastValue,currentValue,forceEndValue,endState)}_AddDelta(value,start,end,forceEndValue,endState){switch(this._propertyTrack.GetPropertyType()){case \"angle\":{value=C3.toDegrees(value);\nbreak}default:{value=value;break}}const stringValue=value.toString();const decimalsString=stringValue.split(\".\")[1]||\"\";const decimalPlaces=decimalsString.length;const v=this._Getter();let rv;if(decimalPlaces===0)if(this._round)rv=Math.round(v);else if(this._fRound)switch(this._propertyTrack.GetPropertyType()){case \"angle\":{rv=C3.toRadians(Math.round(C3.toDegrees(v)));break}default:{rv=Math.round((v+Number.EPSILON)*100)/100;break}}else rv=v;else if(this._round)rv=Number(C3.toFixed(v,decimalPlaces));\nelse if(this._fRound)rv=v;else rv=v;this._Setter(rv-v,start,end)}_SaveToJson(){return Object.assign(super._SaveToJson(),{\"v\":this._lastValue,\"a\":this._clampAccumulator,\"fod\":this._totalForewardOpacityDelta,\"bod\":this._totalBackwardOpacityDelta})}_LoadFromJson(o){if(!o)return;super._LoadFromJson(o);this._lastValue=o[\"v\"];this._clampAccumulator=o[\"a\"];this._totalForewardOpacityDelta=C3.IsFiniteNumber(o[\"fod\"])?o[\"fod\"]:0;this._totalBackwardOpacityDelta=C3.IsFiniteNumber(o[\"bod\"])?o[\"bod\"]:0}}\nC3.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapter=NumericInterpolationAdapter;\n\n}\n\n// timelines/state/propertyInterpolationAdapters/numericInterpolationAdapterForTimeline.js\n{\n'use strict';const C3=self.C3;\nclass AbsoluteValueObject{constructor(propertyTracks){this._used=false;this._value=0;this._propertyKeyframeReached=false;this._endState=false;this._propertyTracks=propertyTracks;for(let i=0,l=this._propertyTracks.length;i<l;i++)this._propertyTracks[i].SetAbsoluteValueObject(this)}GetPropertyTracks(){return this._propertyTracks}SetUsed(){this._used=true}GetUsed(){return this._used}SetValue(v){this._value=v}GetValue(){return this._value}SetPropertyKeyframeReached(v){this._propertyKeyframeReached=v}GetPropertyKeyframeReached(){return this._propertyKeyframeReached}SetEndState(v){this._endState=\nv}GetEndState(){return this._endState}Reset(){this._used=false;this._value=0;this._propertyKeyframeReached=false;this._endState=false}}\nclass NumericInterpolationAdapterForTimeline{constructor(numericInterpolationAdapter){this._numericInterpolationAdapter=numericInterpolationAdapter}Release(){this._numericInterpolationAdapter=null}GetType(){return 0}SetInitialState(){const adapter=this._numericInterpolationAdapter;const propertyTrack=this._numericInterpolationAdapter.GetPropertyTrack();return adapter._PickResultMode(()=>{return adapter._PickTimelinePlaybackMode(()=>0,()=>adapter.GetSourceAdapter().GetValueAtTime())},()=>{})}SetResumeState(){}MayNeedBeforeAndAfterInterpolate(){const adapter=\nthis._numericInterpolationAdapter;const propertyTrack=this._numericInterpolationAdapter.GetPropertyTrack();switch(propertyTrack.GetResultMode()){case \"relative\":{return false}case \"absolute\":{return true}}}BeforeChangeProperty(){const adapter=this._numericInterpolationAdapter;const propertyTrack=this._numericInterpolationAdapter.GetPropertyTrack();const property=propertyTrack.GetPropertyName();switch(propertyTrack.GetResultMode()){case \"relative\":{break}case \"absolute\":{if(propertyTrack.HasAbsoluteValueObject()){const valueObj=\npropertyTrack.GetAbsoluteValueObject();valueObj.Reset()}else{const timeline=propertyTrack.GetTimeline();const instance=propertyTrack.GetInstance();const sourceAdapter=propertyTrack.GetSourceAdapter();const similarPropertyTracks=timeline.GetSimilarPropertyTracks(instance,sourceAdapter,property,propertyTrack);if(similarPropertyTracks&&similarPropertyTracks.length>1)new AbsoluteValueObject(similarPropertyTracks)}break}}}ChangeProperty(time,value,start,end,setTime,ensureValue,endState,propertyKeyframeReached){const adapter=\nthis._numericInterpolationAdapter;const propertyTrack=this._numericInterpolationAdapter.GetPropertyTrack();switch(propertyTrack.GetResultMode()){case \"relative\":{const lastValue=adapter.GetLastValue();adapter._Setter(value-lastValue,start,end);if(ensureValue)this._MaybeEnsureValue(time,start,end,setTime,lastValue,value);adapter.SetLastValue(value);break}case \"absolute\":{const timeline=propertyTrack.GetTimeline();const track=propertyTrack.GetTrack();const instance=propertyTrack.GetInstance();const sourceAdapter=\npropertyTrack.GetSourceAdapter();if(propertyTrack.HasAbsoluteValueObject()){const absoluteValueObject=propertyTrack.GetAbsoluteValueObject();const similarpropertyTracks=absoluteValueObject.GetPropertyTracks();const propertyKeyframeStubs=adapter._GetPropertyKeyframeStubs(similarpropertyTracks,true);const stub=adapter._GetLastPropertyKeyframeStub(timeline,timeline.GetTime(),propertyKeyframeStubs);if(stub){const startOffset=track.GetStartOffset();const t=stub.time-startOffset;if(t===0){absoluteValueObject.SetEndState(endState);\nabsoluteValueObject.SetPropertyKeyframeReached(propertyKeyframeReached);absoluteValueObject.SetUsed();absoluteValueObject.SetValue(absoluteValueObject.GetValue()+value)}else{if(t<0)return;const v=propertyTrack.GetInterpolatedValue(t);absoluteValueObject.SetEndState(endState);absoluteValueObject.SetPropertyKeyframeReached(propertyKeyframeReached);absoluteValueObject.SetUsed();absoluteValueObject.SetValue(absoluteValueObject.GetValue()+(value-v))}}}else adapter._SetterAbsolute(value,propertyKeyframeReached,\nendState);break}}}AfterChangeProperty(){const adapter=this._numericInterpolationAdapter;const propertyTrack=this._numericInterpolationAdapter.GetPropertyTrack();switch(propertyTrack.GetResultMode()){case \"relative\":{break}case \"absolute\":{if(propertyTrack.HasAbsoluteValueObject()){const absoluteValueObject=propertyTrack.GetAbsoluteValueObject();if(absoluteValueObject.GetUsed())adapter._SetterAbsolute(absoluteValueObject.GetValue(),absoluteValueObject.GetPropertyKeyframeReached(),absoluteValueObject.GetEndState())}break}}}_MaybeEnsureValue(time,\nstart,end,setTime,lastValue,currentValue){const adapter=this._numericInterpolationAdapter;if(setTime)return;if(start&&time===start.GetTime())adapter._AddDelta(start.GetValueWithResultMode(),start,end);else if(end&&time===end.GetTime())adapter._AddDelta(end.GetValueWithResultMode(),start,end);else if(currentValue-lastValue===0)adapter._AddDelta(start.GetValueWithResultMode(),start,end)}}C3.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTimeline=NumericInterpolationAdapterForTimeline;\n\n}\n\n// timelines/state/propertyInterpolationAdapters/numericInterpolationAdapterForTween.js\n{\n'use strict';const C3=self.C3;\nclass NumericInterpolationAdapterForTween{constructor(numericInterpolationAdapter){this._numericInterpolationAdapter=numericInterpolationAdapter}Release(){this._numericInterpolationAdapter=null}GetType(){return 1}SetInitialState(){const adapter=this._numericInterpolationAdapter;adapter.SetFirstAbsoluteUpdate(true);return this._GetAbsoluteInitialValue(adapter._FirstKeyframeGetter())}SetResumeState(){const adapter=this._numericInterpolationAdapter;if(adapter._FirstKeyframeGetter()===adapter._CurrentKeyframeGetter())return;\nadapter.SetFirstAbsoluteUpdate(true);return this._GetAbsoluteInitialValue(adapter._CurrentKeyframeGetter())}MayNeedBeforeAndAfterInterpolate(){return false}BeforeChangeProperty(){}ChangeProperty(time,value,start,end,setTime,ensureValue,endState,propertyKeyframeReached){const adapter=this._numericInterpolationAdapter;const lastValue=adapter.GetLastValue();switch(adapter.GetPropertyTrack().GetResultMode()){case \"relative\":{adapter._Setter(value-lastValue,start,end);if(ensureValue)this._MaybeEnsureValue(time,\nstart,end,setTime,lastValue,value,false,endState);break}case \"absolute\":{if(adapter.GetFirstAbsoluteUpdate()){adapter.SetFirstAbsoluteUpdate(false);adapter._Setter(lastValue,start,end)}else if(time===0&&adapter.GetPropertyTrack().GetTimeline().GetTotalTime()===0)adapter._SetterAbsolute(value,true,false);else{adapter._Setter(value-lastValue,start,end);if(ensureValue)this._MaybeEnsureValue(time,start,end,setTime,lastValue,value,this._ForceEndValue(),endState)}break}}adapter.SetLastValue(value)}AfterChangeProperty(){}_GetAbsoluteInitialValue(keyframeValue){const adapter=\nthis._numericInterpolationAdapter;return keyframeValue-adapter.GetCurrentState()}_ForceEndValue(){const adapter=this._numericInterpolationAdapter;const inst=adapter.GetWorldInfo().GetInstance();const runtime=adapter.GetPropertyTrack().GetRuntime();const timelineManager=runtime.GetTimelineManager();let activeTimelineCount=0;for(const timeline of timelineManager.GetPlayingTimelines())if(timeline.GetType()===0){if(timeline.HasTrackInstance(inst))activeTimelineCount++}else if(timeline.GetType()===1)if(timeline.GetInstance()===\ninst)activeTimelineCount++;return activeTimelineCount<=1}_MaybeEnsureValue(time,start,end,setTime,lastValue,currentValue,forceEndValue,endState){const adapter=this._numericInterpolationAdapter;if(setTime)if(start&&time===start.GetTime())adapter._AddDelta(start.GetValueWithResultMode(),start,end,forceEndValue,endState);else if(end&&time===end.GetTime())adapter._AddDelta(end.GetValueWithResultMode(),start,end,forceEndValue,endState);else{if(!end)adapter._AddDelta(start.GetValueWithResultMode(),start,\nend,forceEndValue,endState)}else if(start&&time===start.GetTime())adapter._AddDelta(start.GetValueWithResultMode(),start,end,forceEndValue,endState);else if(end&&time===end.GetTime())adapter._AddDelta(end.GetValueWithResultMode(),start,end,forceEndValue,endState);else if(currentValue-lastValue===0)adapter._AddDelta(start.GetValueWithResultMode(),start,end,forceEndValue,endState)}}C3.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTween=NumericInterpolationAdapterForTween;\n\n}\n\n// timelines/state/propertyTypeAdapters/numericTypeAdapter.js\n{\n'use strict';const C3=self.C3;const Ease=self.Ease;\nC3.PropertyTrackState.NumericTypeAdapter=class NumericTypeAdapter{constructor(){}static WillChange(index,source,newValue,type){let oldValue;switch(type){case \"behavior\":oldValue=source.GetPropertyValueByIndex(index);break;case \"effect\":oldValue=source[index];break;case \"instance-variable\":oldValue=source.GetInstanceVariableValue(index);break;case \"plugin\":oldValue=source.GetPropertyValueByIndex(index);break}if(oldValue===newValue)return false;return true}static Interpolate(time,start,end,propertyTrack){if(!end){let propertyTrackDataItem=\npropertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack.GetPropertyTrackData();propertyTrackDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);return propertyTrackDataItem.GetValueWithResultMode()}let mode=propertyTrack.GetInterpolationMode();if(mode===\"default\")mode=\"continuous\";if(propertyTrack.GetPropertyType()===\"combo\")mode=\"discrete\";if(mode===\"discrete\")return start.GetValueWithResultMode();else if(mode===\"continuous\"||mode===\"step\"){const step=\npropertyTrack.GetTimeline().GetStep();if(mode===\"step\"&&step!==0){const s=1/step;time=Math.floor(time*s)/s}const sv=start.GetValueWithResultMode();const ev=end.GetValueWithResultMode();const startAddon=start.GetAddOn(\"cubic-bezier\");const endAddon=end.GetAddOn(\"cubic-bezier\");const doCubicBezier=startAddon&&startAddon.GetStartEnable()&&endAddon&&endAddon.GetEndEnable();if(!doCubicBezier&&sv===ev)return sv;const st=start.GetTime();const et=end.GetTime();if(mode===\"step\"&&step!==0)time=C3.clamp(time,\nst,et);const n=C3.normalize(time,st,et);const e=start.GetEase();let ret;if(doCubicBezier){const dt=et-st;ret=Ease.GetRuntimeEase(e)(dt*n,0,1,dt);ret=Ease.GetRuntimeEase(\"cubicbezier\")(ret,sv,sv+startAddon.GetStartAnchor(),ev+endAddon.GetEndAnchor(),ev)}else ret=Ease.GetRuntimeEase(e)((et-st)*n,sv,ev-sv,et-st);if(propertyTrack.GetPropertyType()===\"integer\")return Math.floor(ret);return ret}}};\n\n}\n\n// timelines/state/propertyTypeAdapters/angleTypeAdapter.js\n{\n'use strict';const C3=self.C3;\nC3.PropertyTrackState.AngleTypeAdapter=class AngleTypeAdapter{constructor(){}static WillChange(index,source,newValue,type){let oldValue;switch(type){case \"behavior\":oldValue=source.GetPropertyValueByIndex(index);break;case \"effect\":oldValue=source[index];break;case \"instance-variable\":oldValue=source.GetInstanceVariableValue(index);break;case \"plugin\":oldValue=source.GetPropertyValueByIndex(index);break}if(oldValue===newValue)return false;return true}static Interpolate(time,start,end,propertyTrack){if(!end){let propertyTrackDataItem=\npropertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack.GetPropertyTrackData();propertyTrackDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);return propertyTrackDataItem.GetValueWithResultMode()}let mode=propertyTrack.GetInterpolationMode();if(mode===\"default\")mode=\"continuous\";if(propertyTrack.GetPropertyType()===\"combo\")mode=\"discrete\";if(mode===\"discrete\")return start.GetValueWithResultMode();else if(mode===\"continuous\"||mode===\"step\"){const step=\npropertyTrack.GetTimeline().GetStep();if(mode===\"step\"&&step!==0){const s=1/step;time=Math.floor(time*s)/s}const st=start.GetTime();const et=end.GetTime();const sv=start.GetValueWithResultMode();const ev=end.GetValueWithResultMode();if(mode===\"step\"&&step!==0)time=C3.clamp(time,st,et);const angleAddon=start.GetAddOn(\"angle\");if(angleAddon){const revolutions=angleAddon.GetRevolutions();if(sv===ev&&revolutions===0)return sv;const n=C3.normalize(time,st,et);const easeFunc=self.Ease.GetRuntimeEase(start.GetEase());\nconst easeRes=easeFunc(n,0,1,1);switch(angleAddon.GetDirection()){case \"closest\":return C3.angleLerp(sv,ev,easeRes,revolutions);case \"clockwise\":return C3.angleLerpClockwise(sv,ev,easeRes,revolutions);case \"anti-clockwise\":return C3.angleLerpAntiClockwise(sv,ev,easeRes,revolutions)}}else{if(sv===ev)return sv;const n=C3.normalize(time,st,et);const easeFunc=self.Ease.GetRuntimeEase(start.GetEase());return C3.angleLerp(sv,ev,easeFunc(n,0,1,1))}}}};\n\n}\n\n// timelines/state/propertyTypeAdapters/booleanTypeAdapter.js\n{\n'use strict';const C3=self.C3;\nC3.PropertyTrackState.BooleanTypeAdapter=class BooleanTypeAdapter{constructor(){}static WillChange(index,source,newValue,type){let oldValue;switch(type){case \"behavior\":oldValue=source.GetPropertyValueByIndex(index);break;case \"effect\":oldValue=source[index];break;case \"instance-variable\":oldValue=source.GetInstanceVariableValue(index);break;case \"plugin\":oldValue=source.GetPropertyValueByIndex(index);break}if(!!oldValue===!!newValue)return false;return true}static Interpolate(time,start,end,propertyTrack){if(!end){let propertyTrackDataItem=\npropertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack.GetPropertyTrackData();propertyTrackDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);return propertyTrackDataItem.GetValueWithResultMode()?1:0}return start.GetValueWithResultMode()?1:0}};\n\n}\n\n// timelines/state/propertyTypeAdapters/colorTypeAdapter.js\n{\n'use strict';const C3=self.C3;const TEMP_COLOR_ARRAY=[0,0,0];const TEMP_COLOR_ARRAY_2=[0,0,0];const TEMP_COLOR_ARRAY_3=[0,0,0];\nC3.PropertyTrackState.ColorTypeAdapter=class ColorTypeAdapter{constructor(){}static WillChange(index,source,newValue,type){let oldValue;switch(type){case \"behavior\":oldValue=source.GetPropertyValueByIndex(index);break;case \"effect\":oldValue=source[index];break;case \"instance-variable\":oldValue=source.GetInstanceVariableValue(index);break;case \"plugin\":oldValue=source.GetPropertyValueByIndex(index);break}if(Array.isArray(newValue)){TEMP_COLOR_ARRAY[0]=newValue[0];TEMP_COLOR_ARRAY[1]=newValue[1];TEMP_COLOR_ARRAY[2]=\nnewValue[2]}else{TEMP_COLOR_ARRAY_3.parseCommaSeparatedRgb(newValue);TEMP_COLOR_ARRAY[0]=Math.floor(TEMP_COLOR_ARRAY_3.getR()*255);TEMP_COLOR_ARRAY[1]=Math.floor(TEMP_COLOR_ARRAY_3.getG()*255);TEMP_COLOR_ARRAY[2]=Math.floor(TEMP_COLOR_ARRAY_3.getB()*255)}if(Array.isArray(oldValue)){TEMP_COLOR_ARRAY_2[0]=oldValue[0];TEMP_COLOR_ARRAY_2[1]=oldValue[1];TEMP_COLOR_ARRAY_2[2]=oldValue[2]}else{TEMP_COLOR_ARRAY_3.parseCommaSeparatedRgb(oldValue);TEMP_COLOR_ARRAY_2[0]=Math.floor(TEMP_COLOR_ARRAY_3.getR()*\n255);TEMP_COLOR_ARRAY_2[1]=Math.floor(TEMP_COLOR_ARRAY_3.getG()*255);TEMP_COLOR_ARRAY_2[2]=Math.floor(TEMP_COLOR_ARRAY_3.getB()*255)}if(TEMP_COLOR_ARRAY[0]!==TEMP_COLOR_ARRAY_2[0])return true;if(TEMP_COLOR_ARRAY[1]!==TEMP_COLOR_ARRAY_2[1])return true;if(TEMP_COLOR_ARRAY[2]!==TEMP_COLOR_ARRAY_2[2])return true;return false}static Interpolate(time,start,end,propertyTrack){if(!end){let propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack.GetPropertyTrackData();\npropertyTrackDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);const color=propertyTrackDataItem.GetValueWithResultMode();TEMP_COLOR_ARRAY[0]=color[0];TEMP_COLOR_ARRAY[1]=color[1];TEMP_COLOR_ARRAY[2]=color[2];return TEMP_COLOR_ARRAY}let mode=propertyTrack.GetInterpolationMode();if(mode===\"default\")mode=\"continuous\";if(mode===\"discrete\"){const color=start.GetValueWithResultMode();TEMP_COLOR_ARRAY[0]=color[0];TEMP_COLOR_ARRAY[1]=color[1];TEMP_COLOR_ARRAY[2]=color[2];\nreturn TEMP_COLOR_ARRAY}else if(mode===\"continuous\"||mode===\"step\"){const step=propertyTrack.GetTimeline().GetStep();if(mode===\"step\"&&step!==0){const s=1/step;time=Math.floor(time*s)/s}const st=start.GetTime();const et=end.GetTime();const sv=start.GetValueWithResultMode();const ev=end.GetValueWithResultMode();if(mode===\"step\"&&step!==0)time=C3.clamp(time,st,et);const n=C3.normalize(time,st,et);const e=start.GetEase();const sr=sv[0];const sg=sv[1];const sb=sv[2];const er=ev[0];const eg=ev[1];const eb=\nev[2];const easeFunc=self.Ease.GetRuntimeEase(e);const d=et-st;const dn=d*n;if(sr===er)TEMP_COLOR_ARRAY[0]=sr;else TEMP_COLOR_ARRAY[0]=easeFunc(dn,sr,er-sr,d);if(sg===eg)TEMP_COLOR_ARRAY[1]=sg;else TEMP_COLOR_ARRAY[1]=easeFunc(dn,sg,eg-sg,d);if(sb===eb)TEMP_COLOR_ARRAY[2]=sb;else TEMP_COLOR_ARRAY[2]=easeFunc(dn,sb,eb-sb,d);return TEMP_COLOR_ARRAY}}};\n\n}\n\n// timelines/state/propertyTypeAdapters/textTypeAdapter.js\n{\n'use strict';const C3=self.C3;\nC3.PropertyTrackState.TextTypeAdapter=class TextTypeAdapter{constructor(){}static WillChange(index,source,newValue,type){let oldValue;switch(type){case \"behavior\":oldValue=source.GetPropertyValueByIndex(index);break;case \"effect\":oldValue=source[index];break;case \"instance-variable\":oldValue=source.GetInstanceVariableValue(index);break;case \"plugin\":oldValue=source.GetPropertyValueByIndex(index);break}if(oldValue===newValue)return false;return true}static Interpolate(time,start,end,propertyTrack){if(!end){let propertyTrackDataItem=\npropertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack.GetPropertyTrackData();propertyTrackDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);return propertyTrackDataItem.GetValueWithResultMode()}return start.GetValueWithResultMode()}};\n\n}\n\n// timelines/data/timelineDataManager.js\n{\n'use strict';const C3=self.C3;\nC3.TimelineDataManager=class TimelineDataManager{constructor(){this._timelineDataItems=new Map}Release(){for(const timelineDataItem of this._timelineDataItems.values())timelineDataItem.Release();this._timelineDataItems.clear();this._timelineDataItems=null}Add(data){const timelineDataItem=new C3.TimelineDataItem(data);const name=timelineDataItem.GetName();this._timelineDataItems.set(name,timelineDataItem)}Get(name){return this._timelineDataItems.get(name)}GetNameId(){return 0}static _CreateDataItems(items,jsonItems,\ndataItemConstructor,dataContainer){if(!jsonItems)return;for(const jsonItem of jsonItems)C3.TimelineDataManager._CreateDataItem(\"create\",jsonItem,items,dataItemConstructor,dataContainer)}static _CreateDataItemsIncludingDisabled(items,jsonItems,dataItemConstructor,dataContainer){if(!jsonItems)return;for(const jsonItem of jsonItems)C3.TimelineDataManager._CreateDataItem(\"create-including-disabled\",jsonItem,items,dataItemConstructor,dataContainer)}static _LoadDataItemsFromJson(items,jsonItems,dataItemConstructor,\ndataContainer){if(items.length)jsonItems.forEach((jsonItem,index)=>{items[index]._LoadFromJson(jsonItem)});else jsonItems.forEach(jsonItem=>{C3.TimelineDataManager._CreateDataItem(\"load\",jsonItem,items,dataItemConstructor,dataContainer)})}static _CreateDataItem(mode,json,items,dataItemConstructor,dataContainer){let dataItem;if(typeof dataItemConstructor===\"function\")switch(mode){case \"load\":dataItem=new dataItemConstructor(null,dataContainer);break;case \"create\":dataItem=new dataItemConstructor(json,\ndataContainer);break;case \"create-including-disabled\":dataItem=new dataItemConstructor(json,dataContainer);break}else if(typeof dataItemConstructor===\"object\"){const prop=dataItemConstructor.prop;const value=json[prop];const cnstrctr=dataItemConstructor.map.get(value);switch(mode){case \"load\":dataItem=new cnstrctr(null,dataContainer);break;case \"create\":dataItem=new cnstrctr(json,dataContainer);break;case \"create-including-disabled\":dataItem=new cnstrctr(json,dataContainer);break}}switch(mode){case \"load\":dataItem._LoadFromJson(json);\nitems.push(dataItem);break;case \"create\":if(typeof dataItem.GetEnable===\"function\"&&!dataItem.GetEnable())return dataItem.Release();items.push(dataItem);break;case \"create-including-disabled\":items.push(dataItem);break}}};\n\n}\n\n// timelines/data/timelineData.js\n{\n'use strict';const C3=self.C3;const NAME=0;const TOTAL_TIME=1;const STEP=2;const INTERPOLATION_MODE=3;const RESULT_MODE=4;const TRACKS=5;const LOOP=6;const PING_PONG=7;const REPEAT_COUNT=8;const START_ON_LAYOUT=9;const TRANSFORM_WITH_SCENE_GRAPH=10;const USE_SYSTEM_TIMESCALE=11;\nC3.TimelineDataItem=class TimelineDataItem{constructor(timelineDataJson){this._name=\"\";this._totalTime=NaN;this._step=0;this._interpolationMode=\"default\";this._resultMode=\"default\";this._loop=false;this._pingPong=false;this._repeatCount=1;this._trackData=null;this._startOnLayout=\"\";this._transformWithSceneGraph=false;this._useSystemTimescale=true;if(!timelineDataJson)return;this._name=timelineDataJson[NAME];this._totalTime=timelineDataJson[TOTAL_TIME];this._step=timelineDataJson[STEP];this._interpolationMode=\ntimelineDataJson[INTERPOLATION_MODE];this._resultMode=timelineDataJson[RESULT_MODE];this._loop=!!timelineDataJson[LOOP];this._pingPong=!!timelineDataJson[PING_PONG];this._repeatCount=timelineDataJson[REPEAT_COUNT];this._startOnLayout=timelineDataJson[START_ON_LAYOUT];this._transformWithSceneGraph=!!timelineDataJson[TRANSFORM_WITH_SCENE_GRAPH];this._useSystemTimescale=!!timelineDataJson[USE_SYSTEM_TIMESCALE];this._trackData=new C3.TrackData(timelineDataJson[TRACKS],this)}Release(){this._trackData.Release();\nthis._trackData=null}GetTrackData(){if(!this._trackData)this._trackData=new C3.TrackData(null,this);return this._trackData}GetName(){return this._name}SetName(n){this._name=n}GetTotalTime(){return this._totalTime}SetTotalTime(tt){this._totalTime=tt}GetStep(){return this._step}SetStep(s){this._step=s}GetInterpolationMode(){return this._interpolationMode}SetInterpolationMode(im){this._interpolationMode=im}GetResultMode(){return this._resultMode}SetResultMode(rm){this._resultMode=rm}GetLoop(){return this._loop}SetLoop(l){this._loop=\nl}GetPingPong(){return this._pingPong}SetPingPong(p){this._pingPong=p}GetRepeatCount(){return this._repeatCount}SetRepeatCount(rc){this._repeatCount=rc}GetStartOnLayout(){return this._startOnLayout}GetTransformWithSceneGraph(){return this._transformWithSceneGraph}GetUseSystemTimescale(){return this._useSystemTimescale}_SaveToJson(){return{\"trackDataJson\":this._trackData._SaveToJson(),\"name\":this._name,\"totalTime\":this._totalTime,\"step\":this._step,\"interpolationMode\":this._interpolationMode,\"resultMode\":this._resultMode,\n\"loop\":this._loop,\"pingPong\":this._pingPong,\"repeatCount\":this._repeatCount,\"startOnLayout\":this._startOnLayout,\"transformWithSceneGraph\":!!this._transformWithSceneGraph,\"useSystemTimescale\":this._useSystemTimescale}}_LoadFromJson(o){if(!o)return;this.GetTrackData()._LoadFromJson(o[\"trackDataJson\"]);this._name=o[\"name\"];this._totalTime=o[\"totalTime\"];this._step=o[\"step\"];this._interpolationMode=o[\"interpolationMode\"];this._resultMode=o[\"resultMode\"];this._loop=o[\"loop\"];this._pingPong=o[\"pingPong\"];\nthis._repeatCount=o[\"repeatCount\"];this._startOnLayout=o[\"startOnLayout\"];this._transformWithSceneGraph=!!o[\"transformWithSceneGraph\"];this._useSystemTimescale=!!o[\"useSystemTimescale\"]}};\n\n}\n\n// timelines/data/trackData.js\n{\n'use strict';const C3=self.C3;const WI_DATA=0;const OC_INDEX=1;const WI_UID=2;const INTERPOLATION_MODE=1;const RESULT_MODE=2;const ENABLED=3;const KEYFRAMES=4;const PROPERTY_TRACKS=5;const ID=6;const NESTED_DATA=7;const START_OFFSET=0;const LOCAL_TOTAL_TIME=1;const WI_ADDITIONAL_DATA=8;const ORIGINAL_WIDTH=0;const ORIGINAL_HEIGHT=1;const TRACK_TYPE=9;const TRACK_NAME=10;\nclass TrackDataItem{constructor(trackDataJson,trackData){this._trackData=trackData;this._instanceData=null;this._additionalInstanceData=null;this._instanceUid=NaN;this._objectClassIndex=NaN;this._interpolationMode=\"default\";this._resultMode=\"default\";this._enabled=false;this._keyframeData=null;this._propertyTrackData=null;this._id=\"\";this._nestedData=null;this._startOffset=0;this._localTotalTime=this._trackData.GetTimelineDataItem().GetTotalTime();this._type=0;this._name=\"\";if(!trackDataJson)return;\nif(trackDataJson[WI_DATA]){this._instanceData=trackDataJson[WI_DATA];this._instanceUid=trackDataJson[WI_DATA][WI_UID];this._objectClassIndex=trackDataJson[WI_DATA][OC_INDEX]}this._interpolationMode=trackDataJson[INTERPOLATION_MODE];this._resultMode=trackDataJson[RESULT_MODE];this._enabled=!!trackDataJson[ENABLED];if(trackDataJson[ID])this._id=trackDataJson[ID];if(trackDataJson[NESTED_DATA]){this._nestedData=trackDataJson[NESTED_DATA];this._startOffset=trackDataJson[NESTED_DATA][START_OFFSET];this._localTotalTime=\ntrackDataJson[NESTED_DATA][LOCAL_TOTAL_TIME]}if(trackDataJson[WI_ADDITIONAL_DATA])this._additionalInstanceData=trackDataJson[WI_ADDITIONAL_DATA];if(trackDataJson[WI_ADDITIONAL_DATA])this._additionalInstanceData=trackDataJson[WI_ADDITIONAL_DATA];if(trackDataJson[TRACK_TYPE])this._type=trackDataJson[TRACK_TYPE];if(trackDataJson[TRACK_NAME])this._name=trackDataJson[TRACK_NAME];this._keyframeData=new C3.KeyframeData(trackDataJson[KEYFRAMES],this);this._propertyTrackData=new C3.PropertyTrackData(trackDataJson[PROPERTY_TRACKS],\nthis)}Release(){this._instanceData=null;this._trackData=null;if(this._keyframeData){this._keyframeData.Release();this._keyframeData=null}if(this._propertyTrackData){this._propertyTrackData.Release();this._propertyTrackData=null}this._nestedData=null}GetTrackData(){return this._trackData}GetKeyframeData(){if(!this._keyframeData)this._keyframeData=new C3.KeyframeData(null,this);return this._keyframeData}GetPropertyTrackData(){if(!this._propertyTrackData)this._propertyTrackData=new C3.PropertyTrackData(null,\nthis);return this._propertyTrackData}GetInstanceData(){return this._instanceData}GetObjectClassIndex(){return this._objectClassIndex}SetObjectClassIndex(index){this._objectClassIndex=index}GetInstanceUID(){return this._instanceUid}SetInstanceUID(uid){this._instanceUid=uid}GetInterpolationMode(){return this._interpolationMode}SetInterpolationMode(im){this._interpolationMode=im}GetResultMode(){return this._resultMode}SetResultMode(rm){this._resultMode=rm}GetEnable(){return this._enabled}SetEnable(e){this._enabled=\n!!e}GetId(){return this._id}GetStartOffset(){return this._startOffset}GetLocalTotalTime(){return this._localTotalTime}SetLocalTotalTime(t){this._localTotalTime=t}GetOriginalWidth(){return this._additionalInstanceData[ORIGINAL_WIDTH]}SetOriginalWidth(w){if(!this._additionalInstanceData)this._additionalInstanceData=[];this._additionalInstanceData[ORIGINAL_WIDTH]=w}GetOriginalHeight(){if(!this._additionalInstanceData)this._additionalInstanceData=[];return this._additionalInstanceData[ORIGINAL_HEIGHT]}SetOriginalHeight(h){if(!this._additionalInstanceData)this._additionalInstanceData=\n[];this._additionalInstanceData[ORIGINAL_HEIGHT]=h}GetType(){return this._type}GetName(){return this._name}_SaveToJson(){return{\"keyframeDataJson\":this._keyframeData._SaveToJson(),\"propertyTrackDataJson\":this._propertyTrackData._SaveToJson(),\"instanceData\":this._instanceData,\"additionalInstanceData\":this._additionalInstanceData,\"instanceUid\":this._instanceUid,\"objectClassIndex\":this._objectClassIndex,\"interpolationMode\":this._interpolationMode,\"resultMode\":this._resultMode,\"enabled\":this._enabled,\n\"id\":this._id,\"nestedData\":this._nestedData,\"type\":this._type,\"name\":this._name}}_LoadFromJson(o){if(!o)return;this._instanceData=o[\"instanceData\"];this._instanceUid=o[\"instanceUid\"];this._objectClassIndex=o[\"objectClassIndex\"];this._interpolationMode=o[\"interpolationMode\"];this._resultMode=o[\"resultMode\"];this._enabled=o[\"enabled\"];this._id=o[\"id\"];this._type=o[\"type\"]?o[\"type\"]:0;this._name=o[\"name\"]?o[\"name\"]:\"\";this._localTotalTime=this._trackData.GetTimelineDataItem().GetTotalTime();if(o[\"nestedData\"]){this._nestedData=\no[\"nestedData\"];this._startOffset=this._nestedData[START_OFFSET];this._localTotalTime=this._nestedData[LOCAL_TOTAL_TIME]}if(o[\"additionalInstanceData\"])this._additionalInstanceData=o[\"additionalInstanceData\"];this.GetKeyframeData()._LoadFromJson(o[\"keyframeDataJson\"]);this.GetPropertyTrackData()._LoadFromJson(o[\"propertyTrackDataJson\"])}}\nC3.TrackData=class TrackData{constructor(tracksDataJson,timelineDataItem){this._timelineDataItem=timelineDataItem;this._trackDataItems=[];C3.TimelineDataManager._CreateDataItems(this._trackDataItems,tracksDataJson,TrackDataItem,this)}Release(){this._timelineDataItem=null;for(const trackDataItem of this._trackDataItems)trackDataItem.Release();C3.clearArray(this._trackDataItems);this._trackDataItems=null}GetTimelineDataItem(){return this._timelineDataItem}AddEmptyTrackDataItem(){const trackDataItem=\nnew TrackDataItem(null,this);this._trackDataItems.push(trackDataItem);return trackDataItem}GetFirstKeyframeDataItem(trackDataItem){return trackDataItem.GetKeyframeData().GetKeyframeDataItemArray()[0]}GetLastKeyframeDataItem(trackDataItem){const keyframeDataItems=trackDataItem.GetKeyframeData().GetKeyframeDataItemArray();return keyframeDataItems.at(-1)}GetKeyFrameDataItemAtTime(time,trackDataItem){const keyframeDataItems=trackDataItem.GetKeyframeData().GetKeyframeDataItemArray();const l=keyframeDataItems.length;\nfor(let i=0;i<l;i++){const keyframeDataItem=keyframeDataItems[i];if(keyframeDataItem.GetTime()===time)return keyframeDataItem}}GetFirstKeyFrameDataItemHigherThan(time,trackDataItem){const keyframeDataItems=trackDataItem.GetKeyframeData().GetKeyframeDataItemArray();const l=keyframeDataItems.length;for(let i=0;i<l;i++){const keyframeDataItem=keyframeDataItems[i];if(keyframeDataItem.GetTime()>time)return keyframeDataItem}}GetFirstKeyFrameDataItemHigherOrEqualThan(time,trackDataItem){const keyframeDataItems=\ntrackDataItem.GetKeyframeData().GetKeyframeDataItemArray();const l=keyframeDataItems.length;for(let i=0;i<l;i++){const keyframeDataItem=keyframeDataItems[i];if(keyframeDataItem.GetTime()>=time)return keyframeDataItem}}GetFirstKeyFrameDataItemLowerOrEqualThan(time,trackDataItem){const keyframeDataItems=trackDataItem.GetKeyframeData().GetKeyframeDataItemArray();for(let i=keyframeDataItems.length-1;i>=0;i--){const keyframeDataItem=keyframeDataItems[i];if(keyframeDataItem.GetTime()<=time)return keyframeDataItem}}*trackDataItems(){for(const trackDataItem of this._trackDataItems)yield trackDataItem}_SaveToJson(){return{\"trackDataItemsJson\":this._trackDataItems.map(trackDataItem=>\ntrackDataItem._SaveToJson())}}_LoadFromJson(o){if(!o)return;C3.TimelineDataManager._LoadDataItemsFromJson(this._trackDataItems,o[\"trackDataItemsJson\"],TrackDataItem,this)}};\n\n}\n\n// timelines/data/propertyTrackData.js\n{\n'use strict';const C3=self.C3;const SOURCE_DATA=0;const SOURCE=0;const PROPERTY=1;const TYPE=2;const MIN=3;const MAX=4;const INTERPOLATION_MODE=5;const RESULT_MODE=6;const ENABLED=7;const PROPERTY_KEYFRAMES=8;const CAN_HAVE_PROPERTY_KEYFRAMES=9;\nclass PropertyTrackDataItem{constructor(propertyTrackDataJson,propertyTrackData){this._propertyTrackData=propertyTrackData;this._sourceAdapterId=\"\";this._sourceAdapterArguments=null;this._property=null;this._type=null;this._min=NaN;this._max=NaN;this._interpolationMode=\"default\";this._resultMode=\"default\";this._enabled=false;this._propertyKeyframeData=null;this._canHavePropertyKeyframes=true;if(!propertyTrackDataJson)return;this._sourceAdapterId=propertyTrackDataJson[SOURCE_DATA][SOURCE];this._sourceAdapterArguments=\npropertyTrackDataJson[SOURCE_DATA].slice(1);this._property=propertyTrackDataJson[PROPERTY];this._type=propertyTrackDataJson[TYPE];this._min=propertyTrackDataJson[MIN];this._max=propertyTrackDataJson[MAX];this._interpolationMode=propertyTrackDataJson[INTERPOLATION_MODE];this._resultMode=propertyTrackDataJson[RESULT_MODE];this._enabled=!!propertyTrackDataJson[ENABLED];this._propertyKeyframeData=new C3.PropertyKeyframeData(propertyTrackDataJson[PROPERTY_KEYFRAMES],this);this._canHavePropertyKeyframes=\npropertyTrackDataJson[CAN_HAVE_PROPERTY_KEYFRAMES]}Release(){this._propertyKeyframeData.Release();this._propertyKeyframeData=null;this._propertyTrackData=null;this._sourceAdapterArguments=null}GetPropertyTrackData(){return this._propertyTrackData}GetPropertyKeyframeData(){if(!this._propertyKeyframeData)this._propertyKeyframeData=new C3.PropertyKeyframeData(null,this);return this._propertyKeyframeData}GetSourceAdapterId(){return this._sourceAdapterId}SetSourceAdapterId(said){this._sourceAdapterId=\nsaid}GetSourceAdapterArguments(){return this._sourceAdapterArguments}SetSourceAdapterArguments(sargs){this._sourceAdapterArguments=sargs}GetProperty(){return this._property}SetProperty(p){this._property=p}GetType(){return this._type}SetType(t){this._type=t}GetMin(){return this._min}SetMin(min){this._min=min}GetMax(){return this._max}SetMax(max){this._max=max}GetInterpolationMode(){return this._interpolationMode}SetInterpolationMode(im){this._interpolationMode=im}GetResultMode(){return this._resultMode}SetResultMode(rm){this._resultMode=\nrm}GetEnable(){return this._enabled}SetEnable(e){this._enabled=!!e}CanHavePropertyKeyframes(){return!!this._canHavePropertyKeyframes}_SaveToJson(){return{\"propertyKeyframeDataJson\":this._propertyKeyframeData._SaveToJson(),\"sourceAdapterId\":this._sourceAdapterId,\"sourceAdapterArguments\":this._sourceAdapterArguments,\"property\":this._property,\"type\":this._type,\"min\":this._min,\"max\":this._max,\"interpolationMode\":this._interpolationMode,\"resultMode\":this._resultMode,\"enabled\":this._enabled,\"canHavePropertyKeyframes\":this._canHavePropertyKeyframes}}_LoadFromJson(o){if(!o)return;\nthis._sourceAdapterId=o[\"sourceAdapterId\"];this._sourceAdapterArguments=o[\"sourceAdapterArguments\"];this._property=o[\"property\"];this._type=o[\"type\"];this._min=o[\"min\"];this._max=o[\"max\"];this._interpolationMode=o[\"interpolationMode\"];this._resultMode=o[\"resultMode\"];this._enabled=o[\"enabled\"];this._canHavePropertyKeyframes=o[\"canHavePropertyKeyframes\"];this.GetPropertyKeyframeData()._LoadFromJson(o[\"propertyKeyframeDataJson\"])}}\nC3.PropertyTrackData=class PropertyTrackData{constructor(propertyTracksDataJson,trackDataItem){this._trackDataItem=trackDataItem;this._propertyTrackDataItems=[];C3.TimelineDataManager._CreateDataItems(this._propertyTrackDataItems,propertyTracksDataJson,PropertyTrackDataItem,this)}Release(){this._trackDataItem=null;for(const propertyTrackDataItem of this._propertyTrackDataItems)propertyTrackDataItem.Release();C3.clearArray(this._propertyTrackDataItems);this._propertyTrackDataItems=null}GetTrackDataItem(){return this._trackDataItem}AddEmptyPropertyTrackDataItem(){const propertyTrackDataItem=\nnew PropertyTrackDataItem(null,this);this._propertyTrackDataItems.push(propertyTrackDataItem);return propertyTrackDataItem}GetFirstPropertyKeyframeDataItem(propertyTrackDataItem){const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();return propertyKeyframeData.GetPropertyKeyframeDataItemArray()[0]}GetLastPropertyKeyframeDataItem(propertyTrackDataItem){const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();const propertyKeyframeDataItems=propertyKeyframeData.GetPropertyKeyframeDataItemArray();\nreturn propertyKeyframeDataItems.at(-1)}GetPropertyKeyFrameDataItemAtTime(time,propertyTrackDataItem){const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();const propertyKeyframeDataItems=propertyKeyframeData.GetPropertyKeyframeDataItemArray();const l=propertyKeyframeDataItems.length;for(let i=0;i<l;i++){const propertyKeyframeDataItem=propertyKeyframeDataItems[i];if(propertyKeyframeDataItem.GetTime()===time)return propertyKeyframeDataItem}}GetFirstPropertyKeyFrameDataItemHigherThan(time,\npropertyTrackDataItem){const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();const propertyKeyframeDataItems=propertyKeyframeData.GetPropertyKeyframeDataItemArray();const l=propertyKeyframeDataItems.length;for(let i=0;i<l;i++){const propertyKeyframeDataItem=propertyKeyframeDataItems[i];if(propertyKeyframeDataItem.GetTime()>time)return propertyKeyframeDataItem}}GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(time,propertyTrackDataItem){const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();\nconst propertyKeyframeDataItems=propertyKeyframeData.GetPropertyKeyframeDataItemArray();const l=propertyKeyframeDataItems.length;for(let i=0;i<l;i++){const propertyKeyframeDataItem=propertyKeyframeDataItems[i];if(propertyKeyframeDataItem.GetTime()>=time)return propertyKeyframeDataItem}}GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,propertyTrackDataItem){const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();const propertyKeyframeDataItems=propertyKeyframeData.GetPropertyKeyframeDataItemArray();\nfor(let i=propertyKeyframeDataItems.length-1;i>=0;i--){const propertyKeyframeDataItem=propertyKeyframeDataItems[i];if(propertyKeyframeDataItem.GetTime()<=time)return propertyKeyframeDataItem}}*propertyTrackDataItems(){for(const propertyTrackDataItem of this._propertyTrackDataItems)yield propertyTrackDataItem}_SaveToJson(){return{\"propertyTrackDataItemsJson\":this._propertyTrackDataItems.map(propertyTrackDataItem=>propertyTrackDataItem._SaveToJson())}}_LoadFromJson(o){if(!o)return;C3.TimelineDataManager._LoadDataItemsFromJson(this._propertyTrackDataItems,\no[\"propertyTrackDataItemsJson\"],PropertyTrackDataItem,this)}};\n\n}\n\n// timelines/data/keyframeData.js\n{\n'use strict';const C3=self.C3;const TIME=0;const EASE=1;const ENABLE=2;const TAGS=3;\nclass KeyframeDataItem{constructor(keyframeDataJson,keyframeData){this._keyframeData=keyframeData;this._time=-1;this._ease=\"noease\";this._enable=false;this._tags=null;this._lowerTags=null;if(!keyframeDataJson)return;this._time=keyframeDataJson[TIME];this._ease=keyframeDataJson[EASE];this._enable=!!keyframeDataJson[ENABLE];const tagStr=keyframeDataJson[TAGS];this._tags=tagStr?tagStr.split(\" \"):[];this._lowerTags=new Set(this._tags.map(t=>t.toLowerCase()));this._next=null}Release(){this._keyframeData=\nnull;C3.clearArray(this._tags);this._tags=null;this._lowerTags.clear();this._lowerTags=null;this._next=null}GetKeyframeData(){return this._keyframeData}GetNext(){return this._next}SetNext(next){this._next=next}GetTime(){return this._time}SetTime(t){this._time=t;this._keyframeData._LinkKeyframeDataItems()}GetEase(){return this._ease}SetEase(e){this._ease=e}GetEnable(){return this._enable}SetEnable(e){this._enable=!!e}GetTags(){return this._tags}SetTags(t){this._tags=t?t.split(\" \"):[];this._lowerTags=\nnew Set(this._tags.map(t=>t.toLowerCase()))}GetLowerTags(){return this._lowerTags}HasTag(tag){return this._lowerTags.has(tag.toLowerCase())}_SaveToJson(){return{\"time\":this._time,\"ease\":this._ease,\"enable\":this._enable,\"tags\":this._tags}}_LoadFromJson(o){if(!o)return;this._time=o[\"time\"];this._ease=o[\"ease\"];this._enable=o[\"enable\"];this._tags=o[\"tags\"];this._lowerTags=new Set(this._tags.map(t=>t.toLowerCase()))}}\nC3.KeyframeData=class KeyframeData{constructor(keyframesDataJson,trackDataItem){this._trackDataItem=trackDataItem;this._keyframeDataItems=[];C3.TimelineDataManager._CreateDataItems(this._keyframeDataItems,keyframesDataJson,KeyframeDataItem,this);this._LinkKeyframeDataItems()}Release(){this._trackDataItem=null;for(const keyframeDataItem of this._keyframeDataItems)keyframeDataItem.Release();C3.clearArray(this._keyframeDataItems);this._keyframeDataItems=null}_LinkKeyframeDataItems(){this._keyframeDataItems.sort((first,\nsecond)=>first.GetTime()-second.GetTime());for(let i=0;i<this._keyframeDataItems.length;i++){const current=this._keyframeDataItems[i];current.SetNext(this._keyframeDataItems[i+1])}}GetTrackDataItem(){return this._trackDataItem}GetKeyframeDataItemCount(){return this._keyframeDataItems.length}GetKeyframeDataItemArray(){return this._keyframeDataItems}AddEmptyKeyframeDataItem(){const keyframeDataItem=new KeyframeDataItem(null,this);this._keyframeDataItems.push(keyframeDataItem);this._LinkKeyframeDataItems();\nreturn keyframeDataItem}DeleteKeyframeDataItems(match){for(const keyframeDataItem of this._keyframeDataItems){if(!match(keyframeDataItem))continue;const index=this._keyframeDataItems.indexOf(keyframeDataItem);if(index===-1)continue;keyframeDataItem.Release();this._keyframeDataItems.splice(index,1)}this.SortKeyframeDataItems();this._LinkKeyframeDataItems()}SortKeyframeDataItems(){this._keyframeDataItems.sort((a,b)=>a.GetTime()-b.GetTime())}GetKeyframeDataItemIndex(keyframeDataItem){return this._keyframeDataItems.indexOf(keyframeDataItem)}GetKeyframeDataItemFromIndex(index){return this._keyframeDataItems[index]}*keyframeDataItems(){for(const keyframeDataItem of this._keyframeDataItems)yield keyframeDataItem}*keyframeDataItemsReverse(){for(let i=\nthis._keyframeDataItems.length-1;i>=0;i--)yield this._keyframeDataItems[i]}_SaveToJson(){return{\"keyframeDataItemsJson\":this._keyframeDataItems.map(keyframeDataItem=>keyframeDataItem._SaveToJson())}}_LoadFromJson(o){if(!o)return;C3.TimelineDataManager._LoadDataItemsFromJson(this._keyframeDataItems,o[\"keyframeDataItemsJson\"],KeyframeDataItem,this);this._LinkKeyframeDataItems()}};\n\n}\n\n// timelines/data/propertyKeyframeData.js\n{\n'use strict';const C3=self.C3;const VALUE_DATA=0;const VALUE_DATA_VALUE=0;const VALUE_DATA_ABSOLUTE_VALUE=1;const VALUE_DATA_TYPE=2;const TIME=1;const EASE=2;const ENABLE=3;const ADDONS=4;const PATH_MODE=5;\nclass PropertyKeyframeDataItem{constructor(propertyKeyframeDataJson,propertyKeyframeData){this._propertyKeyframeData=propertyKeyframeData;this._value=null;this._aValue=null;this._type=\"\";this._time=NaN;this._ease=\"noease\";this._enable=false;this._addonData=null;this._addonInstance=undefined;this._pathMode=\"line\";if(!propertyKeyframeDataJson)return;this._value=propertyKeyframeDataJson[VALUE_DATA][VALUE_DATA_VALUE];this._aValue=propertyKeyframeDataJson[VALUE_DATA][VALUE_DATA_ABSOLUTE_VALUE];this._type=\npropertyKeyframeDataJson[VALUE_DATA][VALUE_DATA_TYPE];this._time=propertyKeyframeDataJson[TIME];this._ease=propertyKeyframeDataJson[EASE];this._enable=!!propertyKeyframeDataJson[ENABLE];this._pathMode=propertyKeyframeDataJson[PATH_MODE];this._addonData=null;if(!!propertyKeyframeDataJson[ADDONS])this._addonData=new C3.AddonData(propertyKeyframeDataJson[ADDONS],this);this._next=null;this._prev=null}Release(){this._propertyKeyframeData=null;if(this._addonData){this._addonData.Release();this._addonData=\nnull}this._next=null;this._prev=null}GetAddonData(){return this._addonData}SetNext(next){this._next=next}GetNext(){return this._next}SetPrevious(prev){this._prev=prev}GetPrevious(){return this._prev}GetValue(){return this._value}SetValue(value){if(this._type===\"color\"&&C3.IsFiniteNumber(value)){this._value[0]=C3.GetRValue(value);this._value[1]=C3.GetGValue(value);this._value[2]=C3.GetBValue(value)}else this._value=value}GetAbsoluteValue(){return this._aValue}SetAbsoluteValue(aValue){if(this._type===\n\"color\"&&C3.IsFiniteNumber(aValue)){this._aValue[0]=C3.GetRValue(aValue);this._aValue[1]=C3.GetGValue(aValue);this._aValue[2]=C3.GetBValue(aValue)}else this._aValue=aValue}GetValueWithResultMode(){const rm=this._propertyKeyframeData.GetPropertyTrackDataItem().GetResultMode();if(rm===\"relative\")return this.GetValue();else if(rm===\"absolute\")return this.GetAbsoluteValue()}GetType(){return this._type}SetType(t){this._type=t}GetTime(){return this._time}SetTime(t){this._time=t;this._propertyKeyframeData._LinkPropertyKeyframeDataItems()}GetEase(){return this._ease}SetEase(e){this._ease=\ne}GetEnable(){return this._enable}SetEnable(e){this._enable=!!e}GetPathMode(){return this._pathMode}GetAddOn(id){if(!this._addonData)return;if(this._addonInstance||this._addonInstance===null)return this._addonInstance;const addonArray=this._addonData.GetAddDataItemArray();if(!addonArray){this._addonInstance=null;return this._addonInstance}const len=addonArray.length;for(let i=0;i<len;i++){const addon=addonArray[i];if(addon.GetId()===id){this._addonInstance=addon;return this._addonInstance}}this._addonInstance=\nnull;return this._addonInstance}_SaveToJson(){const aData=this._addonData;return{\"addonDataJson\":aData?aData._SaveToJson():aData,\"value\":this._value,\"aValue\":this._aValue,\"type\":this._type,\"time\":this._time,\"ease\":this._ease,\"enable\":this._enable}}_LoadFromJson(o){if(!o)return;if(o[\"addonDataJson\"])this._addonData._SetFromJson(o[\"addonDataJson\"]);this._value=o[\"value\"];this._aValue=o[\"aValue\"];this._type=o[\"type\"];this._time=o[\"time\"];this._ease=o[\"ease\"];this._enable=o[\"enable\"]}}\nC3.PropertyKeyframeData=class PropertyKeyframeData{constructor(propertyKeyframesDataJson,propertyTrackDataItem){this._propertyTrackDataItem=propertyTrackDataItem;this._propertyKeyframeDataItems=[];this._propertyKeyframeDataItemsIncludingDisabled=[];C3.TimelineDataManager._CreateDataItems(this._propertyKeyframeDataItems,propertyKeyframesDataJson,PropertyKeyframeDataItem,this);C3.TimelineDataManager._CreateDataItemsIncludingDisabled(this._propertyKeyframeDataItemsIncludingDisabled,propertyKeyframesDataJson,\nPropertyKeyframeDataItem,this);this._LinkPropertyKeyframeDataItems()}Release(){this._propertyTrackDataItem=null;for(const propertyKeyframeDataItem of this._propertyKeyframeDataItems)propertyKeyframeDataItem.Release();C3.clearArray(this._propertyKeyframeDataItems);this._propertyKeyframeDataItems=null;for(const propertyKeyframeDataItem of this._propertyKeyframeDataItemsIncludingDisabled)propertyKeyframeDataItem.Release();C3.clearArray(this._propertyKeyframeDataItemsIncludingDisabled);this._propertyKeyframeDataItemsIncludingDisabled=\nnull}_LinkPropertyKeyframeDataItems(){let dataItems=this._propertyKeyframeDataItems;dataItems.sort((first,second)=>first.GetTime()-second.GetTime());for(let i=0;i<dataItems.length;i++){const current=dataItems[i];if(i+1<dataItems.length)current.SetNext(dataItems[i+1]);if(i-1>=0)current.SetPrevious(dataItems[i-1])}dataItems=this._propertyKeyframeDataItemsIncludingDisabled;dataItems.sort((first,second)=>first.GetTime()-second.GetTime());for(let i=0;i<dataItems.length;i++){const current=dataItems[i];\nif(i+1<dataItems.length)current.SetNext(dataItems[i+1]);if(i-1>=0)current.SetPrevious(dataItems[i-1])}}AddEmptyPropertyKeyframeDataItem(){const propertyKeyframeDataItem=new PropertyKeyframeDataItem(null,this);this._propertyKeyframeDataItems.push(propertyKeyframeDataItem);this._LinkPropertyKeyframeDataItems();return propertyKeyframeDataItem}DeletePropertyKeyframeDataItems(match){for(const propertyKeyframeDataItem of this._propertyKeyframeDataItems){if(!match(propertyKeyframeDataItem))continue;const index=\nthis._propertyKeyframeDataItems.indexOf(propertyKeyframeDataItem);if(index===-1)continue;propertyKeyframeDataItem.Release();this._propertyKeyframeDataItems.splice(index,1)}this.SortPropertyKeyFrameDataItems();this._LinkPropertyKeyframeDataItems()}SortPropertyKeyFrameDataItems(){this._propertyKeyframeDataItems.sort((a,b)=>a.GetTime()-b.GetTime())}GetPropertyTrackDataItem(){return this._propertyTrackDataItem}GetPropertyKeyframeDataItemCount(){return this._propertyKeyframeDataItems.length}GetLastPropertyKeyframeDataItem(){return this._propertyKeyframeDataItems[this._propertyKeyframeDataItems.length-\n1]}GetPropertyKeyframeDataItemArray(){return this._propertyKeyframeDataItems}GetPropertyKeyframeDataItemArrayIncludingDisabled(){return this._propertyKeyframeDataItemsIncludingDisabled}*propertyKeyframeDataItems(){for(const propertyKeyframeDataItem of this._propertyKeyframeDataItems)yield propertyKeyframeDataItem}*propertyKeyframeDataItemsReverse(){for(let i=this._propertyKeyframeDataItems.length-1;i>=0;i--)yield this._propertyKeyframeDataItems[i]}_SaveToJson(){const propertyKeyframeDataItems=this._propertyKeyframeDataItems;\nconst propertyKeyframeDataItemsIncludingDisabled=this._propertyKeyframeDataItemsIncludingDisabled;return{\"propertyKeyframeDataItemsJson\":propertyKeyframeDataItems.map(propertyTrackDataItem=>{return propertyTrackDataItem._SaveToJson()}),\"propertyKeyframeDataItemsIncludingDisabledJson\":propertyKeyframeDataItemsIncludingDisabled.map(propertyTrackDataItem=>{return propertyTrackDataItem._SaveToJson()})}}_LoadFromJson(o){if(!o)return;C3.TimelineDataManager._LoadDataItemsFromJson(this._propertyKeyframeDataItems,\no[\"propertyKeyframeDataItemsJson\"],PropertyKeyframeDataItem,this);C3.TimelineDataManager._LoadDataItemsFromJson(this._propertyKeyframeDataItemsIncludingDisabled,o[\"propertyKeyframeDataItemsIncludingDisabledJson\"],PropertyKeyframeDataItem,this);this._LinkPropertyKeyframeDataItems()}};\n\n}\n\n// timelines/data/propertyKeyframeAddonData.js\n{\n'use strict';const C3=self.C3;const ADDON_ID=0;const ADDON_DATA=1;class AddonDataItem{constructor(addonDataJson,addonData){this._addonData=addonData;this._id=addonDataJson[ADDON_ID];this._data=addonDataJson[ADDON_DATA]}Release(){this._addonData=null;this._data=null}GetAddonData(){return this._addonData}GetId(){return this._id}_SaveToJson(){return{\"id\":this._id,\"data\":this._data}}_LoadFromJson(o){if(!o)return;this._id=o[\"id\"];this._data=o[\"data\"]}}const START_ANCHOR=0;const START_ENABLE=1;\nconst END_ANCHOR=2;const END_ENABLE=3;\nclass AddonDataCubicBezierItem extends AddonDataItem{constructor(addonDataJson,addonData){super(addonDataJson,addonData);this._startAnchor=this._data[START_ANCHOR];this._startEnable=!!this._data[START_ENABLE];this._endAnchor=this._data[END_ANCHOR];this._endEnable=!!this._data[END_ENABLE]}Release(){super.Release()}GetStartAnchor(){return this._startAnchor}GetStartEnable(){return this._startEnable}GetEndAnchor(){return this._endAnchor}GetEndEnable(){return this._endEnable}_SaveToJson(){return Object.assign(super._SaveToJson(),{\"startAnchor\":this._startAnchor,\n\"startEnable\":!!this._startEnable,\"endAnchor\":this._endAnchor,\"endEnable\":!!this._endEnable})}_LoadFromJson(o){if(!o)return;super._LoadFromJson(o);this._startAnchor=o[\"startAnchor\"];this._startEnable=!!o[\"startEnable\"];this._endAnchor=o[\"endAnchor\"];this._endEnable=!!o[\"endEnable\"]}}const DIRECTION=0;const REVOLUTIONS=1;\nclass AddonDataAngleItem extends AddonDataItem{constructor(addonDataJson,addonData){super(addonDataJson,addonData);this._direction=this._data[DIRECTION];this._revolutions=this._data[REVOLUTIONS]}Release(){super.Release()}GetDirection(){return this._direction}GetRevolutions(){return this._revolutions}_SaveToJson(){return Object.assign(super._SaveToJson(),{\"direction\":this._direction,\"revolutions\":this._revolutions})}_LoadFromJson(o){if(!o)return;super._LoadFromJson(o);this._direction=o[\"direction\"];\nthis._revolutions=o[\"revolutions\"]}}\nC3.AddonData=class AddonData{constructor(addonsDataJson,propertyKeyframeDataItem){this._propertyKeyframeDataItem=propertyKeyframeDataItem;this._addonDataItems=[];C3.TimelineDataManager._CreateDataItems(this._addonDataItems,addonsDataJson,{prop:0,map:new Map([[\"cubic-bezier\",AddonDataCubicBezierItem],[\"angle\",AddonDataAngleItem]])},this)}Release(){this._propertyKeyframeDataItem=null;for(const addonDataItem of this._addonDataItems)addonDataItem.Release();C3.clearArray(this._addonDataItems);this._addonDataItems=\nnull}GetPropertyKeyframeDataItem(){return this._propertyKeyframeDataItem}GetAddDataItemArray(){return this._addonDataItems}*addonDataItems(){for(const addonDataItem of this._addonDataItems)yield addonDataItem}_SaveToJson(){return{\"addonDataItemsJson\":this._addonDataItems.map(addonDataItem=>addonDataItem._SaveToJson())}}_LoadFromJson(o){if(!o)return;C3.TimelineDataManager._LoadDataItemsFromJson(this._addonDataItems,o[\"addonDataItemsJson\"],{prop:\"id\",map:new Map([[\"cubic-bezier\",AddonDataCubicBezierItem],\n[\"angle\",AddonDataAngleItem]])},this)}};\n\n}\n\n// timelines/tweens/tweenState.js\n{\n'use strict';const C3=self.C3;const INITIAL_VALUE_MODE_START_VALUE=\"start-value\";const INITIAL_VALUE_MODE_CURRENT_STATE=\"current-state\";const PING_PONG_BEGIN=0;const PING_PONG_END=1;let createdTweens=0;\nC3.TweenState=class Tween extends C3.TimelineState{constructor(tweenDataItem,timelineManager){super(`tween-${createdTweens++}`,tweenDataItem,timelineManager);this._id=\"\";this._destroyInstanceOnComplete=false;this._initialValueMode=INITIAL_VALUE_MODE_START_VALUE;this._instance=null;this._on_completed_callbacks=null;this._on_started_callbacks=null;this._track=null;this._iTweenState=null}FireReleaseEvent(dispatcher){const event=C3.New(C3.Event,\"tweenstatereleased\");event.tweenState=this;dispatcher.dispatchEvent(event)}GetType(){return 1}CreateTrackStates(){for(const trackDataItem of this._timelineDataItem.GetTrackData().trackDataItems())this._tracks.push(C3.TweenTrackState.Create(this,\ntrackDataItem));this._track=this._tracks[0]}AddTrack(){const trackDataItem=this._timelineDataItem.GetTrackData().AddEmptyTrackDataItem();const track=C3.TweenTrackState.Create(this,trackDataItem);this._tracks.push(track);this._track=this._tracks[0];return track}GetPropertyTrack(propertyName){return this._track.GetPropertyTracks()[0]}SetPropertyType(type){this._propertyType=type}GetInstance(){const tracks=this.GetTracks();if(!tracks||!tracks.length)return;const track=tracks[0];this._track=track;if(!track)return;\nconst instance=track.GetInstance();return track.IsInstanceValid()?instance:undefined}AddStartedCallback(c){if(!this._on_started_callbacks)this._on_started_callbacks=[];this._on_started_callbacks.push(c)}AddCompletedCallback(c){if(!this._on_completed_callbacks)this._on_completed_callbacks=[];this._on_completed_callbacks.push(c)}RemoveStartedCallback(c){if(!this._on_started_callbacks)return;const index=this._on_started_callbacks.indexOf(c);if(index!==-1)this._on_started_callbacks.splice(index,1)}RemoveCompletedCallback(c){if(!this._on_completed_callbacks)return;\nconst index=this._on_completed_callbacks.indexOf(c);if(index!==-1)this._on_completed_callbacks.splice(index,1)}SetStartValue(startValue,propertyName){for(const track of this._tracks)for(const propertyTrack of track._propertyTracks){if(propertyTrack.GetPropertyName()!==propertyName)continue;const propertyTrackData=propertyTrack.GetPropertyTrackData();const propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();const propertyKeyframeDataItem=propertyTrackData.GetFirstPropertyKeyframeDataItem(propertyTrackDataItem);\npropertyKeyframeDataItem.SetValue(startValue);propertyKeyframeDataItem.SetAbsoluteValue(startValue)}}_GetPropertyTrackState(propertyName){for(const track of this._tracks)for(const propertyTrack of track._propertyTracks)if(propertyTrack.GetPropertyName()===propertyName)return propertyTrack}BeforeSetEndValues(properties){for(const propertyName of properties){const propertyTrackState=this._GetPropertyTrackState(propertyName);this.SetStartValue(propertyTrackState.GetCurrentState(),propertyName)}if(this.IsForwardPlayBack()){const newTotalTime=\nthis.GetTotalTime()-this.GetTime();this.SetTotalTime(newTotalTime);for(const track of this._tracks)track.SetLocalTotalTime(newTotalTime);this._SetTime(0)}else{const newTotalTime=this.GetTime();this.SetTotalTime(newTotalTime);for(const track of this._tracks)track.SetLocalTotalTime(newTotalTime);this._SetTime(newTotalTime)}this.SetInitialStateFromSetTime()}SetEndValue(endValue,propertyName){const propertyTrackState=this._GetPropertyTrackState(propertyName);const propertyTrackData=propertyTrackState.GetPropertyTrackData();\nconst propertyTrackDataItem=propertyTrackState.GetPropertyTrackDataItem();const propertyKeyframeDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);propertyKeyframeDataItem.SetTime(this.GetTotalTime());propertyKeyframeDataItem.SetValue(endValue);propertyKeyframeDataItem.SetAbsoluteValue(endValue)}SetId(id){this._id=id}GetId(){return this._id}SetInitialValueMode(initialValueMode){this._initialValueMode=initialValueMode}GetInitialValueMode(){return this._initialValueMode}SetDestroyInstanceOnComplete(releaseOnComplete){this._destroyInstanceOnComplete=\nreleaseOnComplete}GetDestroyInstanceOnComplete(){return this._destroyInstanceOnComplete}OnStarted(){if(this._on_started_callbacks)for(const c of this._on_started_callbacks)c(this);if(this.IsComplete())return;for(const track of this._tracks)track.CompareSaveStateWithCurrent()}OnCompleted(){this._completedTick=this._runtime.GetTickCount()}FinishTriggers(){if(this._finishedTriggers)return;this._finishedTriggers=true;if(this._on_completed_callbacks)for(const c of this._on_completed_callbacks)c(this)}SetTime(time){this._DeleteIntermediateKeyframes();\nsuper.SetTime(time)}_SetTimeAndReset(time){if(!C3.IsFiniteNumber(time))time=this.GetTotalTime();if(time<0)this._playheadTime=0;else if(time>=this.GetTotalTime())this._playheadTime=this.GetTotalTime();else this._playheadTime=time;this._track.SetResetState()}SetInitialState(fromSetTime){if(!this.InitialStateSet()&&this.GetInitialValueMode()===INITIAL_VALUE_MODE_CURRENT_STATE)for(const track of this._tracks)track.CompareInitialStateWithCurrent();super.SetInitialState(fromSetTime)}Stop(completed=false){super.Stop(completed);\nif(this.IsComplete())return;for(const track of this._tracks)track.SaveState()}Reset(render=true,beforeChangeLayout=false){this._DeleteIntermediateKeyframes();super.Reset(render,beforeChangeLayout)}_DeleteIntermediateKeyframes(){for(const track of this._tracks){const del=kf=>{const time=kf.GetTime();const totalTime=this.GetTotalTime();return time!==0&&time!==totalTime};track.DeleteKeyframes(del);track.DeletePropertyKeyframes(del)}}_OnBeforeChangeLayout(){if(this.IsReleased())return true;const instance=\nthis.GetInstance();if(instance&&instance.GetObjectClass().IsGlobal())return false;this._timelineManager.CompleteTimelineBeforeChangeOfLayout(this);this.ResetBeforeChangeLayout();return true}Tick(deltaTime,timeScale,deltaTime1){if(!this._instance)this._instance=this.GetInstance();if(!this._instance||this._instance.IsDestroyed()){this.Stop(true);this.OnCompleted();return}const instanceTimeScale=this._instance.GetTimeScale();if(instanceTimeScale!==-1)deltaTime=deltaTime1*instanceTimeScale;if(deltaTime===\n0&&this._lastDelta===0)return;this._lastDelta=deltaTime;const lastTime=this._playheadTime;const newDeltaTime=deltaTime*this._playbackRate;const newTime=lastTime+newDeltaTime;const totalTime=this._timelineDataItem._totalTime;if(newTime<0)this._playheadTime=0;else if(newTime>=totalTime)this._playheadTime=totalTime;else this._playheadTime=newTime;let complete=false;let ensureValue=false;const loop=this.GetLoop();const pingPong=this.GetPingPong();if(!loop&&!pingPong)if(this._playbackRate>0){if(this._playheadTime>=\ntotalTime)if(this._currentRepeatCount<this.GetRepeatCount()){this._currentRepeatCount++;this._SetTimeAndReset(0);ensureValue=true}else{this._SetTime(totalTime);complete=true}}else{if(this._playheadTime<=0)if(this._currentRepeatCount<this.GetRepeatCount()){this._currentRepeatCount++;this._SetTimeAndReset(totalTime);ensureValue=true}else{this._SetTime(0);complete=true}}else if(loop&&!pingPong)if(this._playbackRate>0){if(this._playheadTime>=totalTime){this._SetTimeAndReset(0);ensureValue=true}}else{if(this._playheadTime<=\n0){this._SetTimeAndReset(totalTime);ensureValue=true}}else if(!loop&&pingPong)if(this._playbackRate>0){if(this._playheadTime>=totalTime){this._SetTime(totalTime);this.SetPlaybackRate(this.GetPlaybackRate()*-1);ensureValue=true;if(this._pingPongState===PING_PONG_END)if(this._currentRepeatCount<this.GetRepeatCount()){this._currentRepeatCount++;this._pingPongState=PING_PONG_BEGIN}else complete=true;else if(this._pingPongState===PING_PONG_BEGIN)this._pingPongState=PING_PONG_END}}else{if(this._playheadTime<=\n0){this._SetTime(0);this.SetPlaybackRate(this.GetPlaybackRate()*-1);ensureValue=true;if(this._pingPongState===PING_PONG_END)if(this._currentRepeatCount<this.GetRepeatCount()){this._currentRepeatCount++;this._pingPongState=PING_PONG_BEGIN}else complete=true;else if(this._pingPongState===PING_PONG_BEGIN)this._pingPongState=PING_PONG_END}}else if(loop&&pingPong)if(this._playbackRate>0){if(this._playheadTime>=totalTime){this._SetTime(totalTime);this.SetPlaybackRate(this.GetPlaybackRate()*-1);ensureValue=\ntrue;this._pingPongState++;C3.wrap(this._pingPongState,0,2)}}else if(this._playheadTime<=0){this._SetTime(0);this.SetPlaybackRate(this.GetPlaybackRate()*-1);ensureValue=true;this._pingPongState++;C3.wrap(this._pingPongState,0,2)}if(complete){this._track.SetEndState();this.Stop(true);this.OnCompleted();return}this._track.Interpolate(this._playheadTime,true,false,ensureValue,this._firstTick,false);if(this._firstTick)this._firstTick=false}_SaveToJson(){const ret=super._SaveToJson();const tweenDataItem=\nthis.GetTimelineDataItem();return Object.assign(ret,{\"tweenDataItemJson\":tweenDataItem._SaveToJson(),\"id\":this._id,\"destroyInstanceOnComplete\":this._destroyInstanceOnComplete,\"initialValueMode\":this._initialValueMode})}_LoadFromJson(o){if(!o)return;const tweenDataItem=this.GetTimelineDataItem();tweenDataItem._LoadFromJson(o[\"tweenDataItemJson\"]);super._LoadFromJson(o);this._id=o[\"id\"];this._destroyInstanceOnComplete=o[\"destroyInstanceOnComplete\"];this._initialValueMode=o[\"initialValueMode\"]}static IsPlaying(tween){return tween.IsPlaying()}static IsPaused(tween){return tween.IsPaused()}static Build(config){const timelineManager=\nconfig.runtime.GetTimelineManager();const tweenDataItem=new C3.TimelineDataItem;if(config.json){tweenDataItem._LoadFromJson(config.json[\"tweenDataItemJson\"]);const tween=new C3.TweenState(tweenDataItem,timelineManager);tween._LoadFromJson(config.json);return tween}else{const tween=new C3.TweenState(tweenDataItem,timelineManager);if(!C3.IsArray(config.propertyTracksConfig))config.propertyTracksConfig=[config.propertyTracksConfig];tween.SetId(config.id);tween.SetTags(config.tags);tween.SetInitialValueMode(config.initialValueMode);\ntween.SetDestroyInstanceOnComplete(config.releaseOnComplete);tween.SetLoop(config.loop);tween.SetPingPong(config.pingPong);tween.SetTotalTime(config.time);tween.SetStep(0);tween.SetInterpolationMode(\"default\");tween.SetResultMode(config.propertyTracksConfig[0].resultMode);tween.SetRepeatCount(config.repeatCount);const track=tween.AddTrack();track.SetInstanceUID(config.instance.GetUID());track.SetInterpolationMode(\"default\");track.SetResultMode(config.propertyTracksConfig[0].resultMode);track.SetEnable(true);\ntrack.SetObjectClassIndex(config.instance.GetObjectClass().GetIndex());const sdkIntance=config.instance.GetSdkInstance();const w=sdkIntance.IsOriginalSizeKnown()?sdkIntance.GetOriginalWidth():config.instance.GetWorldInfo().GetWidth();const h=sdkIntance.IsOriginalSizeKnown()?sdkIntance.GetOriginalHeight():config.instance.GetWorldInfo().GetHeight();track.SetOriginalWidth(w);track.SetOriginalHeight(h);const startKeyframeDataItem=track.AddKeyframe();startKeyframeDataItem.SetTime(0);startKeyframeDataItem.SetEase(\"noease\");\nstartKeyframeDataItem.SetEnable(true);startKeyframeDataItem.SetTags(\"\");const endKeyframeDataItem=track.AddKeyframe();endKeyframeDataItem.SetTime(config.time);endKeyframeDataItem.SetEase(\"noease\");endKeyframeDataItem.SetEnable(true);endKeyframeDataItem.SetTags(\"\");for(const propertyTrackConfig of config.propertyTracksConfig){const propertyTrack=track.AddPropertyTrack();propertyTrack.SetSourceAdapterId(propertyTrackConfig.sourceId);propertyTrack.SetSourceAdapterArgs(propertyTrackConfig.sourceArgs);\npropertyTrack.SetPropertyName(propertyTrackConfig.property);propertyTrack.SetPropertyType(propertyTrackConfig.type);propertyTrack.SetMin(NaN);propertyTrack.SetMax(NaN);propertyTrack.SetInterpolationMode(\"default\");propertyTrack.SetResultMode(propertyTrackConfig.resultMode);propertyTrack.SetEnable(true);const startPropertyKeyframeDataItem=propertyTrack.AddPropertyKeyframe();startPropertyKeyframeDataItem.SetType(propertyTrackConfig.valueType);startPropertyKeyframeDataItem.SetTime(0);startPropertyKeyframeDataItem.SetEase(propertyTrackConfig.ease);\nstartPropertyKeyframeDataItem.SetEnable(true);startPropertyKeyframeDataItem.SetValue(propertyTrackConfig.startValue);startPropertyKeyframeDataItem.SetAbsoluteValue(propertyTrackConfig.startValue);const endPropertyKeyframeDataItem=propertyTrack.AddPropertyKeyframe();endPropertyKeyframeDataItem.SetType(propertyTrackConfig.valueType);endPropertyKeyframeDataItem.SetTime(config.time);endPropertyKeyframeDataItem.SetEase(propertyTrackConfig.ease);endPropertyKeyframeDataItem.SetEnable(true);endPropertyKeyframeDataItem.SetValue(propertyTrackConfig.endValue);\nendPropertyKeyframeDataItem.SetAbsoluteValue(propertyTrackConfig.endValue);propertyTrack.GetSourceAdapter()}return tween}}GetITweenState(behInst,opts){if(!this._iTweenState)this._iTweenState=C3.New(self.ITweenState,this,behInst,opts);return this._iTweenState}};\n\n}\n\n// timelines/tweens/tweenTrackState.js\n{\n'use strict';const C3=self.C3;\nC3.TweenTrackState=class TweenTrack extends C3.TrackState{constructor(timeline,trackDataItem){super(timeline,trackDataItem);this._firstPropertyTrack=null;this._secondPropertyTrack=null}static Create(timeline,trackDataItem){return C3.New(C3.TweenTrackState,timeline,trackDataItem)}_CachePropertyTracks(){if(this._propertyTracks.length===1)this._firstPropertyTrack=this._propertyTracks[0];else{this._firstPropertyTrack=this._propertyTracks[0];this._secondPropertyTrack=this._propertyTracks[1]}}CreatePropertyTrackStates(){for(const propertyTrackDataItem of this._trackDataItem.GetPropertyTrackData().propertyTrackDataItems())this._propertyTracks.push(C3.TweenPropertyTrackState.Create(this,propertyTrackDataItem));\nthis._CachePropertyTracks()}AddPropertyTrack(){const propertyTrackData=this._trackDataItem.GetPropertyTrackData();const propertyTrackDataItem=propertyTrackData.AddEmptyPropertyTrackDataItem();const propertyTrack=C3.TweenPropertyTrackState.Create(this,propertyTrackDataItem);this._propertyTracks.push(propertyTrack);this._CachePropertyTracks();return propertyTrack}SetInitialState(){this.MaybeGetInstance();if(!this.IsInstanceValid()&&this.IsInstanceTrack())return;const timeline=this.GetTimeline();const isForwardPlayBack=\ntimeline.IsForwardPlayBack();const time=isForwardPlayBack?0:this.GetLocalTotalTime();for(const propertyTrack of this._propertyTracks){propertyTrack.SetInitialState(time);if(this._worldInfoChange===0&&propertyTrack.GetWorldInfoChange()===1)this._worldInfoChange=1;if(this._renderChange===0&&propertyTrack.GetRenderChange()===1)this._renderChange=1}this._needsBeforeAndAfter=0;const nba=this._propertyTracks.some(pt=>pt.GetNeedsBeforeAndAfter());if(nba)this._needsBeforeAndAfter=1;this._lastKeyframeDataItem=\nthis._GetLastKeyFrameBeforeTime(time);this._initialStateOfNestedSet=false;this._endStateOfNestedSet=false;this.Interpolate(time)}BeforeInterpolate(){}Interpolate(time,isTicking=false,setTime=false,ensureValue=false,firstTick=false,ignoreGlobals=false,endState=false){if(!this._instance)this.GetInstance();if(!this._instance)return;const instanceValid=!this._instance.IsDestroyed();if(!instanceValid)return false;if(ignoreGlobals&&this.GetObjectClass().IsGlobal())return false;if(this._secondPropertyTrack){this._firstPropertyTrack.Interpolate(time,\nsetTime,ensureValue,endState);this._secondPropertyTrack.Interpolate(time,setTime,ensureValue,endState)}else this._firstPropertyTrack.Interpolate(time,setTime,ensureValue,endState);if(this._firstPropertyTrack.GetWorldInfoChange()!==0){if(!this._worldInfo)this._worldInfo=this._instance.GetWorldInfo();if(this._worldInfo)this._worldInfo.SetBboxChanged()}}AfterInterpolate(){}_LoadFromJson(o){super._LoadFromJson(o);this._CachePropertyTracks()}};\n\n}\n\n// timelines/tweens/tweenPropertyTrackState.js\n{\n'use strict';const C3=self.C3;\nC3.TweenPropertyTrackState=class TweenPropertyTrackState extends C3.PropertyTrackState{constructor(track,propertyTrackDataItem){super(track,propertyTrackDataItem);this._basic=false}static Create(track,propertyTrackDataItem){return C3.New(C3.TweenPropertyTrackState,track,propertyTrackDataItem)}Interpolate(time,setTime=false,ensureValue=false,endState=false){let start;let end;if(this._basic){start=this._propertyKeyframeDataItems[0];end=this._propertyKeyframeDataItems[1]}else if(setTime){start=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,\nthis._propertyTrackDataItem);end=start.GetNext()}else{if(this._lastPropertyKeyframeDataItem){const timeline=this.GetTimeline();const nextPropertyKeyframe=this._lastPropertyKeyframeDataItem.GetNext();const lastTime=this._lastPropertyKeyframeDataItem.GetTime();const nextTime=nextPropertyKeyframe?nextPropertyKeyframe.GetTime():timeline.GetTotalTime();if(time<=lastTime||time>=nextTime)this._lastPropertyKeyframeDataItem=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,this._propertyTrackDataItem)}else this._lastPropertyKeyframeDataItem=\nthis._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,this._propertyTrackDataItem);start=this._lastPropertyKeyframeDataItem;end=start.GetNext()}this._sourceAdapter.Interpolate(time,start,end,setTime,ensureValue,endState)}AddPropertyKeyframe(){const propertyKeyframeData=this._propertyTrackDataItem.GetPropertyKeyframeData();const propertyKeyframeDataItem=propertyKeyframeData.AddEmptyPropertyKeyframeDataItem();this._lastPropertyKeyframeDataItem=null;this._basic=this.GetPropertyKeyframeDataItems().length<=\n2;return propertyKeyframeDataItem}DeletePropertyKeyframes(match){this._lastPropertyKeyframeDataItem=null;const propertyKeyframeData=this._propertyTrackDataItem.GetPropertyKeyframeData();propertyKeyframeData.DeletePropertyKeyframeDataItems(match);this._basic=this.GetPropertyKeyframeDataItems().length<=2}_SaveToJson(){return{\"sourceAdapterJson\":this.GetSourceAdapter()._SaveToJson(),\"basic\":this._basic}}_LoadFromJson(o){if(!o)return;this.GetSourceAdapter()._LoadFromJson(o[\"sourceAdapterJson\"]);this._basic=\no[\"basic\"]}};\n\n}\n\n// timelines/transitions/transition.js\n{\n'use strict';const C3=self.C3;const Ease=self.Ease;const NAME=0;const TRANSITION_KEYFRAMES=1;\nC3.Transition=class Transition extends C3.DefendedBase{constructor(data,addCustomEase=true){super();this._name=data[NAME];this._linear=false;this._transitionKeyframes=[];for(const transitionKeyframeData of data[TRANSITION_KEYFRAMES]){const transitionKeyframe=C3.TransitionKeyframe.Create(this,transitionKeyframeData);this._transitionKeyframes.push(transitionKeyframe)}for(let i=0;i<this._transitionKeyframes.length;i++){const current=this._transitionKeyframes[i];current.SetNext(this._transitionKeyframes[i+\n1])}this._precalculatedSamples=new Map;this._transitionKeyframeCache=new Map;this._PreCalcSamples();if(addCustomEase)Ease.AddCustomEase(this._name,(t,sv,dv,tt)=>this.Interpolate(t,sv,dv,tt))}static Create(data){return C3.New(C3.Transition,data)}Release(){for(const transitionKeyframe of this._transitionKeyframes)transitionKeyframe.Release();C3.clearArray(this._transitionKeyframes);this._transitionKeyframes=null;this._precalculatedSamples.clear();this._precalculatedSamples=null;this._transitionKeyframeCache.clear();\nthis._transitionKeyframeCache=null}MakeLinear(linear){this._linear=!!linear}GetTransitionKeyFrameAt(x){const transitionKeyframe=this._transitionKeyframeCache.get(x);if(transitionKeyframe)return transitionKeyframe;for(const transitionKeyframe of this._transitionKeyframes)if(transitionKeyframe.GetValueX()===x){this._transitionKeyframeCache.set(x,transitionKeyframe);return transitionKeyframe}}GetFirstTransitionKeyFrameHigherThan(x){for(const transitionKeyframe of this._transitionKeyframes)if(transitionKeyframe.GetValueX()>\nx)return transitionKeyframe}GetFirstTransitionKeyFrameHigherOrEqualThan(x){for(const transitionKeyframe of this._transitionKeyframes)if(transitionKeyframe.GetValueX()>=x)return transitionKeyframe}GetFirstTransitionKeyFrameLowerThan(x){for(let i=this._transitionKeyframes.length-1;i>=0;i--){const transitionKeyframe=this._transitionKeyframes[i];if(transitionKeyframe.GetValueX()<x)return transitionKeyframe}}GetFirstTransitionKeyFrameLowerOrEqualThan(x){for(let i=this._transitionKeyframes.length-1;i>=\n0;i--){const transitionKeyframe=this._transitionKeyframes[i];if(transitionKeyframe.GetValueX()<=x)return transitionKeyframe}}Interpolate(time,startValue,deltaValue,totalTime){let n=time/totalTime;if(this._linear){if(totalTime===0)return startValue+deltaValue;return Ease.NoEase(time,startValue,deltaValue,totalTime)}if(totalTime===0)n=1;let start=this.GetFirstTransitionKeyFrameLowerOrEqualThan(n);let end=start.GetNext();if(!end){start=this.GetFirstTransitionKeyFrameLowerThan(n);end=start.GetNext()}const delta=\nend.GetValueX()-start.GetValueX();const nn=C3.mapToRange(n,start.GetValueX(),end.GetValueX(),0,delta);const startX=start.GetValueX();const startY=start.GetValueY();const anchor1X=start.GetValueX()+start.GetStartAnchorX();const anchor1Y=start.GetValueY()+start.GetStartAnchorY();const anchor2X=end.GetValueX()+end.GetEndAnchorX();const anchor2Y=end.GetValueY()+end.GetEndAnchorY();const endX=end.GetValueX();const endY=end.GetValueY();let ret=Ease.GetRuntimeEase(\"spline\")(nn,startX,startY,anchor1X,anchor1Y,\nanchor2X,anchor2Y,endX,endY,this._precalculatedSamples.get(start));ret+=start.GetValueY();return(1-ret)*startValue+ret*(startValue+deltaValue)}_PreCalcSamples(){this._precalculatedSamples.clear();for(let i=0;i<this._transitionKeyframes.length-1;i++){const transitionKeyframe=this._transitionKeyframes[i];if(!transitionKeyframe.GetStartEnable())continue;const start=transitionKeyframe;const end=this._transitionKeyframes[i+1];const startValue=start.GetValueX();const anchor1Value=start.GetValueX()+start.GetStartAnchorX();\nconst anchor2Value=end.GetValueX()+end.GetEndAnchorX();const endValue=end.GetValueX();this._precalculatedSamples.set(start,Ease.GetBezierSamples(startValue,anchor1Value,anchor2Value,endValue))}}};\n\n}\n\n// timelines/transitions/transitionKeyframe.js\n{\n'use strict';const C3=self.C3;const VALUE_X=0;const VALUE_Y=1;const START_ANCHOR_X=2;const START_ANCHOR_Y=3;const END_ANCHOR_X=4;const END_ANCHOR_Y=5;const START_ENABLE=6;const END_ENABLE=7;\nC3.TransitionKeyframe=class TransitionKeyframe extends C3.DefendedBase{constructor(transition,data){super();this._transition=transition;this._valueX=data[VALUE_X];this._valueY=data[VALUE_Y];this._startAnchorX=data[START_ANCHOR_X];this._startAnchorY=data[START_ANCHOR_Y];this._endAnchorX=data[END_ANCHOR_X];this._endAnchorY=data[END_ANCHOR_Y];this._startEnable=data[START_ENABLE];this._endEnable=data[END_ENABLE];this._next=null}Release(){this._transition=null}static Create(transition,data){return C3.New(C3.TransitionKeyframe,\ntransition,data)}SetNext(transitionKeyframe){this._next=transitionKeyframe}GetNext(){return this._next}GetValueX(){return this._valueX}GetValueY(){return this._valueY}GetStartAnchorX(){return this._startAnchorX}GetStartAnchorY(){return this._startAnchorY}GetEndAnchorX(){return this._endAnchorX}GetEndAnchorY(){return this._endAnchorY}GetStartEnable(){return this._startEnable}GetEndEnable(){return this._endEnable}};\n\n}\n\n// timelines/transitions/transitionManager.js\n{\n'use strict';const C3=self.C3;C3.TransitionManager=class TransitionManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._transitions=[]}Release(){for(const transition of this._transitions)transition.Release();C3.clearArray(this._transitions);this._transitions=null}Create(transitionData){this._transitions.push(C3.Transition.Create(transitionData))}};\n\n}\n\n// templates/templateManager.js\n{\n'use strict';const C3=self.C3;\nC3.TemplateManager=class TemplateManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._templateDataMap=null;this._instanceToTemplateNameMap=null;this._instanceDestroy=e=>this._OnInstanceDestroy(e.instance)}Release(){this.RemoveRuntimeListeners();if(this._templateDataMap){for(const objectClassTemplatesMap of this._templateDataMap.values())objectClassTemplatesMap.clear();this._templateDataMap.clear()}this._templateDataMap=null;this._runtime=null}Create(templateInstanceData){if(!this._templateDataMap)this._templateDataMap=\nnew Map;if(!templateInstanceData)return;const templateData=templateInstanceData[0][16];const templateName=templateData[0];const objectClassIndex=templateInstanceData[1];if(!this._templateDataMap.has(objectClassIndex))this._templateDataMap.set(objectClassIndex,new Map);const objectClassTemplatesMap=this._templateDataMap.get(objectClassIndex);objectClassTemplatesMap.set(templateName,templateInstanceData)}AddRuntimeListeners(){const dispatcher=this._runtime.Dispatcher();if(dispatcher)dispatcher.addEventListener(\"instancedestroy\",\nthis._instanceDestroy)}RemoveRuntimeListeners(){const dispatcher=this._runtime.Dispatcher();if(dispatcher)dispatcher.removeEventListener(\"instancedestroy\",this._instanceDestroy)}HasTemplates(){if(!this._templateDataMap)return false;return this._templateDataMap.size!==0}GetTemplateData(objectClass_or_index,templateName){let index=0;if(objectClass_or_index instanceof C3.ObjectClass)index=objectClass_or_index.GetIndex();else index=objectClass_or_index;if(!this._templateDataMap.has(index))return;const ret=\nthis._templateDataMap.get(index).get(templateName);if(ret)return JSON.parse(JSON.stringify(ret));return undefined}MapInstanceToTemplateName(inst,templateName){if(!this._instanceToTemplateNameMap)this._instanceToTemplateNameMap=new WeakMap;if(this._instanceToTemplateNameMap.has(inst))return;this._instanceToTemplateNameMap.set(inst,templateName)}GetInstanceTemplateName(inst){if(!this._instanceToTemplateNameMap)return\"\";const ret=this._instanceToTemplateNameMap.get(inst);if(ret)return ret;return\"\"}_OnInstanceDestroy(inst){if(!this._instanceToTemplateNameMap)return;\nif(!this._instanceToTemplateNameMap.has(inst))return;this._instanceToTemplateNameMap.delete(inst)}};\n\n}\n\n// events/stacks/solStack.js\n{\n'use strict';const C3=self.C3;\nC3.SolStack=class SolStack extends C3.DefendedBase{constructor(objectClass){super();this._objectClass=objectClass;this._stack=[];this._stack.push(C3.New(C3.Sol,this));this._index=0;this._current=this._stack[0]}Release(){for(const s of this._stack)s.Release();C3.clearArray(this._stack);this._current=null;this._objectClass=null}GetObjectClass(){return this._objectClass}GetCurrentSol(){return this._current}GetOneBelowCurrentSol(){return this._stack[this._index-1]}Clear(){this.GetCurrentSol().Clear()}PushClean(){const stack=this._stack;\nconst index=++this._index;if(index===stack.length){const sol=C3.New(C3.Sol,this);stack.push(sol);this._current=sol}else{const sol=stack[index];sol.Reset();this._current=sol}}PushCopy(){const stack=this._stack;const index=++this._index;if(index===stack.length)stack.push(C3.New(C3.Sol,this));const sol=stack[index];sol.Copy(stack[index-1]);this._current=sol}Pop(){this._current=this._stack[--this._index]}RemoveInstances(s){const stack=this._stack;for(let i=0,len=stack.length;i<len;++i)stack[i].RemoveInstances(s)}};\n\n}\n\n// events/stacks/sol.js\n{\n'use strict';const C3=self.C3;\nC3.Sol=class Sol extends C3.DefendedBase{constructor(stack){super();this._stack=stack;this._objectClass=this._stack.GetObjectClass();this._eventStack=this._objectClass.GetRuntime().GetEventStack();this._selectAll=true;this._instances=[];this._elseInstances=[]}Release(){this.ClearArrays();this._stack=null;this._objectClass=null;this._eventStack=null}ClearArrays(){C3.clearArray(this._instances);C3.clearArray(this._elseInstances)}GetObjectClass(){return this._objectClass}IsSelectAll(){return this._selectAll}HasAnyInstances(){if(this._selectAll)return!!this._objectClass.GetInstanceCount();else return!!this._instances.length}GetInstances(){if(this._selectAll)return this._objectClass.GetInstances();\nelse return this._instances}HasAnyElseInstances(){return!!this._elseInstances.length}GetElseInstances(){return this._elseInstances}GetExpressionInstances(){const ret=this.GetInstances();if(ret.length)return ret;else return this._elseInstances}Reset(){this._selectAll=true;C3.clearArray(this._elseInstances)}Clear(){this._selectAll=true}Copy(sol){if(sol.IsSelectAll())this.Reset();else{this._selectAll=false;C3.shallowAssignArray(this._instances,sol._instances);C3.clearArray(this._elseInstances)}}_PushInstance(inst){this._instances.push(inst)}_PushElseInstance(inst){this._elseInstances.push(inst)}_SetSelectAll(s){this._selectAll=\n!!s}_GetOwnInstances(){return this._instances}_GetOwnElseInstances(){return this._elseInstances}SetSinglePicked(inst){this._selectAll=false;C3.clearArray(this._instances);this._instances.push(inst)}SetArrayPicked(arr){this._selectAll=false;C3.shallowAssignArray(this._instances,arr)}SetSetPicked(set){this._selectAll=false;C3.clearArray(this._instances);for(const item of set)this._instances.push(item)}AddElseInstances(setOfPicked,arrayOfAllPicked){for(const inst of arrayOfAllPicked)if(!setOfPicked.has(inst))this._elseInstances.push(inst)}TransferElseInstancesToOwn(setOfPicked){for(const inst of setOfPicked)this._instances.push(inst);\nC3.arrayRemoveAllInSet(this._elseInstances,setOfPicked)}ClearElseInstances(){C3.clearArray(this._elseInstances)}PickOne(inst){if(!inst)return;if(this._eventStack.GetCurrentStackFrame().GetCurrentEvent().IsOrBlock()){if(this.IsSelectAll()){C3.clearArray(this._instances);C3.shallowAssignArray(this._elseInstances,inst.GetObjectClass().GetInstances());this._selectAll=false}const i=this._elseInstances.indexOf(inst);if(i!==-1){this._instances.push(this._elseInstances[i]);this._elseInstances.splice(i,1)}}else this.SetSinglePicked(inst)}RemoveInstances(s){C3.arrayRemoveAllInSet(this._instances,\ns);C3.arrayRemoveAllInSet(this._elseInstances,s)}};\n\n}\n\n// events/stacks/eventStack.js\n{\n'use strict';const C3=self.C3;\nC3.EventStack=class EventStack extends C3.DefendedBase{constructor(eventSheetManager){super();this._eventSheetManager=eventSheetManager;this._runtime=this._eventSheetManager.GetRuntime();this._stack=[];this._stack.push(C3.New(C3.EventStackFrame,this,null));this._index=0;this._expFuncStack=[]}Release(){for(const e of this._stack)e.Release();C3.clearArray(this._stack);C3.clearArray(this._expFuncStack);this._eventSheetManager=null;this._runtime=null}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}GetCurrentStackFrame(){return this._stack[this._index]}GetAllStackFrames(){return this._stack}GetCurrentStackFrameIndex(){return this._index}Push(currentEvent){const stack=this._stack;\nconst index=++this._index;if(index===stack.length){const ret=C3.New(C3.EventStackFrame,this,currentEvent);stack.push(ret);return ret}else{const ret=stack[index];ret.Reset(currentEvent);return ret}}Pop(){--this._index}PushExpFunc(frame){this._expFuncStack.push(frame)}PopExpFunc(){this._expFuncStack.pop()}GetCurrentExpFuncStackFrame(){const expFuncStack=this._expFuncStack;if(expFuncStack.length===0)return null;else return expFuncStack.at(-1)}};\n\n}\n\n// events/stacks/eventStackFrame.js\n{\n'use strict';const C3=self.C3;\nC3.EventStackFrame=class EventStackFrame extends C3.DefendedBase{constructor(stack,currentEvent){super();this._stack=stack;this._runtime=this._stack.GetRuntime();this._currentEvent=currentEvent;this._cndIndex=0;this._actIndex=0;this._lastEventTrue=false;this._elseBranchRan=false;this._expressionObjectClass=null;this._functionReturnType=0;this._functionReturnValue=0;this._dynamicSolModifiers=null}Release(){this.Reset(null);this._stack=null;this._runtime=null}Reset(currentEvent){this._currentEvent=currentEvent;\nthis._cndIndex=0;this._actIndex=0;this._lastEventTrue=false;this._elseBranchRan=false;this._dynamicSolModifiers=null}_Restore(currentEvent,actIndex){this._currentEvent=currentEvent;this._cndIndex=0;this._actIndex=actIndex}ResetQuick(){this._cndIndex=0;this._actIndex=0}GetCurrentEvent(){return this._currentEvent}SetCurrentEvent(currentEvent){this._currentEvent=currentEvent}GetConditionIndex(){return this._cndIndex}SetConditionIndex(i){this._cndIndex=i}GetActionIndex(){return this._actIndex}SetActionIndex(i){this._actIndex=\ni}SetLastEventTrue(t){this._lastEventTrue=!!t}GetLastEventTrue(){return this._lastEventTrue}SetElseBranchRan(r){this._elseBranchRan=!!r}GetElseBranchRan(){return this._elseBranchRan}SetExpressionObjectClass(objectClass){this._expressionObjectClass=objectClass}GetExpressionObjectClass(){return this._expressionObjectClass}InitCallFunctionExpression(returnType,defaultReturnValue){this._functionReturnType=returnType;this._functionReturnValue=defaultReturnValue}GetFunctionReturnType(){return this._functionReturnType}SetFunctionReturnValue(v){this._functionReturnValue=\nv}GetFunctionReturnValue(){return this._functionReturnValue}IsSolModifierAfterCnds(){const currentEvent=this._currentEvent;if(currentEvent.IsSolWriterAfterCnds())return true;if(this._cndIndex<currentEvent.GetConditionCount()-1)return!!currentEvent.GetSolModifiers().length;return false}SetDynamicSolModifiers(solModifiers){this._dynamicSolModifiers=solModifiers}GetDynamicSolModifiers(){return this._dynamicSolModifiers}};\n\n}\n\n// events/stacks/localVarStack.js\n{\n'use strict';const C3=self.C3;\nC3.LocalVarStack=class LocalVarStack extends C3.DefendedBase{constructor(eventSheetManager){super();this._eventSheetManager=eventSheetManager;this._runtime=this._eventSheetManager.GetRuntime();this._stack=[];this._index=-1;this._current=null;this._initialValues=[]}Release(){C3.clearArray(this._stack);this._eventSheetManager=null;this._runtime=null}_SetInitialValues(initialValues){this._initialValues=initialValues;const arr=this._initialValues.slice(0);this._stack.push(arr);this._index=0;this._current=\narr}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}GetCurrent(){return this._current}Push(){const index=++this._index;const stack=this._stack;if(index===stack.length)stack.push(this._initialValues.slice(0));else C3.shallowAssignArray(stack[index],this._initialValues);this._current=stack[index]}Pop(){this._current=this._stack[--this._index]}};\n\n}\n\n// events/stacks/loopStack.js\n{\n'use strict';const C3=self.C3;\nC3.LoopStack=class LoopStack extends C3.DefendedBase{constructor(eventSheetManager){super();this._eventSheetManager=eventSheetManager;this._runtime=this._eventSheetManager.GetRuntime();this._stack=[];this._index=-1}Release(){C3.clearArray(this._stack);this._eventSheetManager=null;this._runtime=null}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}IsInLoop(){return this._index>=0}GetCurrent(){return this._stack[this._index]}Push(){++this._index;if(this._index===\nthis._stack.length){const ret=C3.New(C3.Loop,this);this._stack.push(ret);return ret}else{const ret=this._stack[this._index];ret.Reset();return ret}}Pop(){--this._index}FindByName(name){const stack=this._stack;for(let i=this._index;i>=0;--i){const loop=stack[i];if(loop.GetName()===name)return loop}return null}_GetStack(){return this._stack.slice(0,this._index+1)}};\n\n}\n\n// events/stacks/loop.js\n{\n'use strict';const C3=self.C3;C3.Loop=class Loop extends C3.DefendedBase{constructor(loopStack){super();this._loopStack=loopStack;this._name=\"\";this._index=0;this._isStopped=false;this._end=NaN}Reset(){this._name=\"\";this._index=0;this._isStopped=false;this._end=NaN}SetName(name){this._name=name}GetName(){return this._name}SetIndex(i){this._index=i}GetIndex(){return this._index}Stop(){this._isStopped=true}IsStopped(){return this._isStopped}SetEnd(e){this._end=e}GetEnd(){return this._end}};\n\n}\n\n// events/stacks/arrayStack.js\n{\n'use strict';const C3=self.C3;C3.ArrayStack=class ArrayStack extends C3.DefendedBase{constructor(){super();this._stack=[];this._index=-1}Release(){C3.clearArray(this._stack)}GetCurrent(){return this._stack[this._index]}Push(){++this._index;if(this._index===this._stack.length){const ret=[];this._stack.push(ret);return ret}else return this._stack[this._index]}Pop(){--this._index}};\n\n}\n\n// events/eventSheetManager.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;function SortSolArray(a,b){return a.GetIndex()-b.GetIndex()}function IsSolArrayIdentical(a,b){for(let i=0,len=a.length;i<len;++i)if(a[i]!==b[i])return false;return true}\nC3.EventSheetManager=class EventSheetManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._allSheets=[];this._sheetsByName=new Map;this._allGroups=[];this._groupsByName=new Map;this._blocksBySid=new Map;this._cndsBySid=new Map;this._actsBySid=new Map;this._allUniqueSolModifiers=new Map;this._eventVarsBySid=new Map;this._nextLocalVarIndex=0;this._allGlobalVars=[];this._allLocalVars=[];this._localVarInitialValues=[];this._functionBlocksByName=new Map;this._customActionBlocksMap=\nnew Map;this._eventStack=C3.New(C3.EventStack,this);this._localVarStack=C3.New(C3.LocalVarStack,this);this._loopStack=C3.New(C3.LoopStack,this);this._triggersToPostInit=[];this._queuedTriggers=[];this._queuedDebugTriggers=[];this._runningEventsDepth=0;this._executingTriggerDepth=0;this._blockFlushingDepth=0;this._scheduledWaits=[];this._asyncActionPromises=[];self[\"c3_callFunction\"]=(name,params)=>this._InvokeFunctionFromJS(name,params)}Release(){this.ClearAllScheduledWaits();this._eventStack.Release();\nthis._eventStack=null;this._localVarStack.Release();this._localVarStack=null;C3.clearArray(this._queuedTriggers);C3.clearArray(this._queuedDebugTriggers);this._runtime=null;C3.clearArray(this._allSheets);this._sheetsByName.clear()}Create(eventSheetData){const eventSheet=C3.New(C3.EventSheet,this,eventSheetData);this._allSheets.push(eventSheet);this._sheetsByName.set(eventSheet.GetName().toLowerCase(),eventSheet)}_AddTriggerToPostInit(trig){this._triggersToPostInit.push(trig)}_PostInit(){for(const customActionBlock of this._customActionBlocksMap.values())customActionBlock._CheckOverrideState();\nfor(const functionBlock of this._functionBlocksByName.values())functionBlock._PostInit();for(const customActionBlock of this._customActionBlocksMap.values())customActionBlock._PostInit();for(const sheet of this._allSheets)sheet._PostInit();for(const sheet of this._allSheets)sheet._UpdateDeepIncludes();for(const trig of this._triggersToPostInit)trig._PostInit(false);C3.clearArray(this._triggersToPostInit);this._localVarStack._SetInitialValues(this._localVarInitialValues)}GetRuntime(){return this._runtime}GetEventSheetByName(name){return this._sheetsByName.get(name.toLowerCase())||\nnull}_RegisterGroup(group){this._allGroups.push(group);this._groupsByName.set(group.GetGroupName(),group)}_RegisterEventBlock(eventBlock){this._blocksBySid.set(eventBlock.GetSID(),eventBlock)}_RegisterCondition(condition){this._cndsBySid.set(condition.GetSID(),condition)}_RegisterAction(action){this._actsBySid.set(action.GetSID(),action)}_RegisterFunctionBlock(functionBlock){switch(functionBlock.GetFunctionType()){case 0:this._functionBlocksByName.set(functionBlock.GetFunctionName().toLowerCase(),\nfunctionBlock);break;case 1:this._customActionBlocksMap.set(functionBlock.GetFunctionName().toLowerCase(),functionBlock);break;default:}}_RegisterEventVariable(ev){this._eventVarsBySid.set(ev.GetSID(),ev);if(ev.IsGlobal())this._allGlobalVars.push(ev);else this._allLocalVars.push(ev)}_DeduplicateSolModifierList(arr){if(arr.length>=2)arr.sort(SortSolArray);let candidateList=this._allUniqueSolModifiers.get(arr.length);if(!candidateList){candidateList=[];this._allUniqueSolModifiers.set(arr.length,candidateList)}for(let i=\n0,len=candidateList.length;i<len;++i){const candidate=candidateList[i];if(IsSolArrayIdentical(arr,candidate))return candidate}candidateList.push(arr);return arr}_GetNextLocalVarIndex(eventVar){this._localVarInitialValues.push(eventVar.GetInitialValue());return this._nextLocalVarIndex++}GetEventStack(){return this._eventStack}GetCurrentEventStackFrame(){return this.GetEventStack().GetCurrentStackFrame()}GetCurrentEvent(){return this.GetCurrentEventStackFrame().GetCurrentEvent()}GetCurrentCondition(){const frame=\nthis.GetCurrentEventStackFrame();const event=frame.GetCurrentEvent();return event.GetConditionAt(frame.GetConditionIndex())}GetCurrentAction(){const frame=this.GetCurrentEventStackFrame();const event=frame.GetCurrentEvent();return event.GetActionAt(frame.GetActionIndex())}GetLocalVarStack(){return this._localVarStack}GetLoopStack(){return this._loopStack}GetAllLocalVariablesInScope(fromRow){const ret=[];fromRow=fromRow.GetScopeParent();while(fromRow){C3.appendArray(ret,fromRow._GetAllLocalVariablesInScope());\nfromRow=fromRow.GetScopeParent()}return ret}_GetLocalVariablesScriptInterface(fromRow){const localVarDescriptors={};for(const v of this.GetAllLocalVariablesInScope(fromRow))localVarDescriptors[v.GetJsPropName()]=v._GetScriptInterfaceDescriptor();return Object.create(Object.prototype,localVarDescriptors)}GetEventVariableBySID(sid){return this._eventVarsBySid.get(sid)||null}GetEventBlockBySID(sid){return this._blocksBySid.get(sid)||null}GetConditionBySID(sid){return this._cndsBySid.get(sid)||null}GetActionBySID(sid){return this._actsBySid.get(sid)||\nnull}GetFunctionBlockByName(name){return this._functionBlocksByName.get(name.toLowerCase())||null}GetCustomActionBlockByName(objectClass,name){let ret=this._customActionBlocksMap.get((objectClass.GetName()+\".\"+name).toLowerCase());if(ret)return ret;if(!objectClass.IsFamily())for(const family of objectClass.GetFamilies()){ret=this._customActionBlocksMap.get((family.GetName()+\".\"+name).toLowerCase());if(ret)return ret}return null}GetAllGlobalVariables(){return this._allGlobalVars}GetAllLocalVariables(){return this._allLocalVars}ResetAllGlobalsToInitialValue(){for(const ev of this._allGlobalVars)ev.ResetToInitialValue()}GetEventGroupByName(name){return this._groupsByName.get(name.toLowerCase())||\nnull}GetEventGroupBySID(sid){const group=this._blocksBySid.get(sid);if(group&&group.IsGroup())return group;else return null}GetAllGroups(){return this._allGroups}ResetAllGroupsInitialActivation(){for(const group of this._allGroups)group.ResetInitialActivation()}_ResetAllHasRunFlags(){for(const sheet of this._allSheets)sheet._ResetHasRunFlag()}RunEvents(layoutManager){this._ResetAllHasRunFlags();this._runningEventsDepth++;for(const layout of layoutManager.runningLayouts()){const eventSheet=layout.GetEventSheet();\nif(!eventSheet)continue;this._runtime.PushCurrentLayout(layout);eventSheet.Run();this._runtime.PopCurrentLayout()}this._runningEventsDepth--}async DebugRunEvents(layoutManager){this._ResetAllHasRunFlags();this._runningEventsDepth++;for(const breakEventObject of this._DebugRunEventsGen(layoutManager))await this._runtime.DebugBreak(breakEventObject);this._runningEventsDepth--}*_DebugRunEventsGen(layoutManager){for(const layout of layoutManager.runningLayouts()){const eventSheet=layout.GetEventSheet();\nif(!eventSheet)continue;this._runtime.PushCurrentLayout(layout);yield*eventSheet.DebugRun();this._runtime.PopCurrentLayout()}}_Trigger(layoutManager,method,inst,behaviorType){let ret=false;if(!layoutManager.GetMainRunningLayout())return this.QueueTrigger(method,inst,behaviorType);this._executingTriggerDepth++;for(const layout of layoutManager.runningLayouts()){const eventSheet=layout.GetEventSheet();if(!eventSheet)continue;this._runtime.PushCurrentLayout(layout);for(const includeSheet of eventSheet.deepIncludes()){const result=\nincludeSheet._Trigger(method,inst,behaviorType);ret=ret||result}const result2=eventSheet._Trigger(method,inst,behaviorType);ret=ret||result2;this._runtime.PopCurrentLayout()}this._executingTriggerDepth--;return ret}*_DebugTrigger(layoutManager,method,inst,behaviorType){let ret=false;if(!layoutManager.GetMainRunningLayout())return this.QueueTrigger(method,inst,behaviorType);this._executingTriggerDepth++;for(const layout of layoutManager.runningLayouts()){const eventSheet=layout.GetEventSheet();if(!eventSheet)continue;\nthis._runtime.PushCurrentLayout(layout);for(const includeSheet of eventSheet.deepIncludes()){const result=yield*includeSheet._DebugTrigger(method,inst,behaviorType);ret=ret||result}const result2=yield*eventSheet._DebugTrigger(method,inst,behaviorType);ret=ret||result2;this._runtime.PopCurrentLayout()}this._executingTriggerDepth--;return ret}QueueTrigger(method,inst,behaviorType){this._queuedTriggers.push([method,inst,behaviorType]);return false}QueueDebugTrigger(method,inst,behaviorType){let resolve=\nnull;const ret=new Promise(r=>resolve=r);this._queuedDebugTriggers.push([method,inst,behaviorType,resolve]);return ret}*_RunQueuedDebugTriggersGen(){if(this._runtime.HitBreakpoint())throw new Error(\"should not be in breakpoint\");const layoutManager=this._runtime.GetLayoutManager();while(this._queuedDebugTriggers.length){const [method,inst,behaviorType,resolve]=this._queuedDebugTriggers.shift();const ret=yield*this._DebugTrigger(layoutManager,method,inst,behaviorType);resolve(ret)}}async RunQueuedDebugTriggersAsync(){for(const breakEventObject of this._RunQueuedDebugTriggersGen())await this._runtime.DebugBreak(breakEventObject)}_FastTrigger(layoutManager,\nmethod,inst,value){let ret=false;const layout=layoutManager.GetMainRunningLayout();const eventSheet=layout.GetEventSheet();if(!eventSheet)return;this._executingTriggerDepth++;this._runtime.PushCurrentLayout(layout);const deepIncludes=eventSheet.deepIncludes();for(let i=0,len=deepIncludes.length;i<len;++i){const result=deepIncludes[i]._FastTrigger(method,inst,value);ret=ret||result}const result2=eventSheet._FastTrigger(method,inst,value);ret=ret||result2;this._runtime.PopCurrentLayout();this._executingTriggerDepth--;\nreturn ret}*_DebugFastTrigger(layoutManager,method,inst,value){let ret=false;const layout=layoutManager.GetMainRunningLayout();const eventSheet=layout.GetEventSheet();if(!eventSheet)return;this._executingTriggerDepth++;this._runtime.PushCurrentLayout(layout);const deepIncludes=eventSheet.deepIncludes();for(let i=0,len=deepIncludes.length;i<len;++i){const result=yield*deepIncludes[i]._DebugFastTrigger(method,inst,value);ret=ret||result}const result2=yield*eventSheet._DebugFastTrigger(method,inst,value);\nret=ret||result2;this._runtime.PopCurrentLayout();this._executingTriggerDepth--;return ret}GetTriggerDepth(){return this._executingTriggerDepth}IsInTrigger(){return this.GetTriggerDepth()>0}_IncTriggerDepth(){return++this._executingTriggerDepth}_DecTriggerDepth(){--this._executingTriggerDepth}IsRunningEvents(){return this._runningEventsDepth>0}IsInEventEngine(){return this.IsRunningEvents()||this.IsInTrigger()}_RunQueuedTriggers(layoutManager){for(const [method,inst,behaviorType]of this._queuedTriggers)this._Trigger(layoutManager,\nmethod,inst,behaviorType);C3.clearArray(this._queuedTriggers)}BlockFlushingInstances(e){if(e)this._blockFlushingDepth++;else this._blockFlushingDepth--}IsFlushingBlocked(){return this._blockFlushingDepth>0}ClearSol(solModifiers){for(let i=0,len=solModifiers.length;i<len;++i)solModifiers[i].GetSolStack().Clear()}PushCleanSol(solModifiers){for(let i=0,len=solModifiers.length;i<len;++i)solModifiers[i].GetSolStack().PushClean()}PushCopySol(solModifiers){for(let i=0,len=solModifiers.length;i<len;++i)solModifiers[i].GetSolStack().PushCopy()}PopSol(solModifiers){for(let i=\n0,len=solModifiers.length;i<len;++i)solModifiers[i].GetSolStack().Pop()}GetDynamicSolModifiersSet(skipSet){const ret=new Set;const allStackFrames=this._eventStack.GetAllStackFrames();const stackIndex=this._eventStack.GetCurrentStackFrameIndex();for(let i=0;i<=stackIndex;++i){const dynamicSolModifiers=allStackFrames[i].GetDynamicSolModifiers();if(dynamicSolModifiers)for(const t of dynamicSolModifiers)if(!skipSet||!skipSet.has(t))ret.add(t)}return ret}PushCleanSolDynamic(existingSolModifiers){const existingSet=\nnew Set([...existingSolModifiers]);const pushSet=this.GetDynamicSolModifiersSet(existingSet);if(pushSet.size>0){for(const t of pushSet)t.GetSolStack().PushClean();return[...pushSet]}else return null}AddScheduledWait(){const w=C3.New(C3.ScheduledWait,this);this._scheduledWaits.push(w);return w}scheduledWaits(){return this._scheduledWaits}RunScheduledWaits(){if(!this._scheduledWaits.length)return;const frame=this.GetCurrentEventStackFrame();let didAnyRun=false;this._runningEventsDepth++;for(let i=0,\nlen=this._scheduledWaits.length;i<len;++i){const w=this._scheduledWaits[i];if(w._ShouldRun())w._Run(frame);if(w.ShouldRelease())didAnyRun=true}if(didAnyRun){this._FilterScheduledWaitsToRelease();frame.Reset(null)}this._runningEventsDepth--}async DebugRunScheduledWaits(){if(!this._scheduledWaits.length)return;const frame=this.GetCurrentEventStackFrame();let didAnyRun=false;this._runningEventsDepth++;for(let i=0,len=this._scheduledWaits.length;i<len;++i){const w=this._scheduledWaits[i];if(w._ShouldRun())await w._DebugRun(frame);\nif(w.ShouldRelease())didAnyRun=true}if(didAnyRun){this._FilterScheduledWaitsToRelease();frame.Reset(null)}this._runningEventsDepth--}_FilterScheduledWaitsToRelease(){const toRelease=C3.arrayFilterOut(this._scheduledWaits,w=>w.ShouldRelease());for(const w of toRelease)w.Release()}ClearAllScheduledWaits(){for(const w of this._scheduledWaits)w.Release();C3.clearArray(this._scheduledWaits)}RemoveInstancesFromScheduledWaits(s){for(const w of this._scheduledWaits)w.RemoveInstances(s)}AddAsyncActionPromise(p){this._asyncActionPromises.push(p)}ClearAsyncActionPromises(){C3.clearArray(this._asyncActionPromises)}GetPromiseForAllAsyncActions(){const ret=\nPromise.all(this._asyncActionPromises);this._asyncActionPromises=[];return ret}_SaveToJson(){return{\"groups\":this._SaveGroupsToJson(),\"cnds\":this._SaveCndsToJson(),\"acts\":this._SaveActsToJson(),\"vars\":this._SaveVarsToJson(),\"waits\":this._SaveScheduledWaitsToJson()}}_LoadFromJson(o){this._LoadGroupsFromJson(o[\"groups\"]);this._LoadCndsFromJson(o[\"cnds\"]);this._LoadActsFromJson(o[\"acts\"]);this._LoadVarsFromJson(o[\"vars\"]);this._LoadScheduledWaitsFromJson(o[\"waits\"])}_SaveGroupsToJson(){const o={};for(const group of this.GetAllGroups())o[group.GetSID().toString()]=\ngroup.IsGroupActive();return o}_LoadGroupsFromJson(o){for(const [sidStr,data]of Object.entries(o)){const sid=parseInt(sidStr,10);const group=this.GetEventGroupBySID(sid);if(group)group.SetGroupActive(data)}}_SaveCndsToJson(){const o={};for(const [sid,cnd]of this._cndsBySid){const data=cnd._SaveToJson();if(data)o[sid.toString()]=data}return o}_LoadCndsFromJson(o){const map=new Map;for(const [sidStr,data]of Object.entries(o))map.set(parseInt(sidStr,10),data);for(const [sid,cnd]of this._cndsBySid)cnd._LoadFromJson(map.get(sid)||\nnull)}_SaveActsToJson(){const o={};for(const [sid,act]of this._actsBySid){const data=act._SaveToJson();if(data)o[sid.toString()]=data}return o}_LoadActsFromJson(o){const map=new Map;for(const [sidStr,data]of Object.entries(o))map.set(parseInt(sidStr,10),data);for(const [sid,act]of this._actsBySid)act._LoadFromJson(map.get(sid)||null)}_SaveVarsToJson(){const o={};for(const [sid,eventVar]of this._eventVarsBySid)if(!eventVar.IsConstant()&&(eventVar.IsGlobal()||eventVar.IsStatic()))o[sid.toString()]=\neventVar.GetValue();return o}_LoadVarsFromJson(o){for(const [sidStr,data]of Object.entries(o)){const sid=parseInt(sidStr,10);const eventVar=this.GetEventVariableBySID(sid);if(eventVar)eventVar.SetValue(data)}}_SaveScheduledWaitsToJson(){return this._scheduledWaits.filter(w=>!w.IsPromise()).map(w=>w._SaveToJson())}_LoadScheduledWaitsFromJson(arr){this.ClearAllScheduledWaits();for(const data of arr){const sw=C3.ScheduledWait._CreateFromJson(this,data);if(sw)this._scheduledWaits.push(sw)}}_GetPerfRecords(){return[...this._runtime.GetLayoutManager().runningLayouts()].map(l=>\nl.GetEventSheet()).filter(eventSheet=>eventSheet).map(e=>e._GetPerfRecord())}FindFirstFunctionBlockParent(parent){while(parent){const scopeParent=parent.GetScopeParent();if(scopeParent instanceof C3.FunctionBlock)return scopeParent;parent=scopeParent}return null}_InvokeFunctionFromJS(name,params){if(!Array.isArray(params))params=[];const functionBlock=this.GetFunctionBlockByName(name.toLowerCase());if(!functionBlock)return null;if(!functionBlock.IsEnabled())return functionBlock.GetDefaultReturnValue();\nconst functionParameters=functionBlock.GetFunctionParameters();if(params.length<functionParameters.length){params=params.slice(0);do params.push(functionParameters[params.length].GetInitialValue());while(params.length<functionParameters.length)}const callEventBlock=functionBlock.GetEventBlock();return callEventBlock.RunAsExpressionFunctionCall(callEventBlock.GetSolModifiersIncludingParents(),false,functionBlock.GetReturnType(),functionBlock.GetDefaultReturnValue(),...params)}};\n\n}\n\n// events/eventSheet.js\n{\n'use strict';const C3=self.C3;\nC3.EventSheet=class EventSheet extends C3.DefendedBase{constructor(eventSheetManager,data){super();this._eventSheetManager=eventSheetManager;this._runtime=eventSheetManager.GetRuntime();this._name=data[0];this._events=[];this._triggers=new Map;this._fastTriggers=new Map;this._eventsByDisplayNumber=new Map;this._hasRun=false;this._shallowIncludes=[];this._deepIncludes=[];this._alreadyIncludedSheets=new Set;for(const eventData of data[1])this._CreateEvent(eventData,null,this._events);this._perfRecord=\nthis._runtime.IsDebug()?{type:\"sheet\",name:this._name,totalTimeCounter:0,children:[]}:null}Release(){this._eventSheetManager=null;this._runtime=null}_CreateEvent(eventData,parent,nontriggers){switch(eventData[0]){case 0:case 3:this._CreateEventBlock(eventData,parent,nontriggers);break;case 1:this._CreateEventVariable(eventData,parent,nontriggers);break;case 2:this._CreateInclude(eventData,parent,nontriggers);break;case 4:this._CreateFunctionBlock(eventData,parent);break;case 5:this._CreateScriptBlock(eventData,\nparent,nontriggers);break;case 6:this._CreateCustomACEBlock(eventData,parent);break;default:throw new Error(\"invalid event type\");}}_CreateEventBlock(data,parent,nontriggers){const eventBlock=C3.EventBlock.Create(this,parent,data);if(eventBlock.IsOrBlock()){nontriggers.push(eventBlock);const conditions=eventBlock.GetConditions();for(let i=0,len=conditions.length;i<len;++i)if(conditions[i].IsTrigger())this._InitTrigger(eventBlock,i)}else if(eventBlock.IsTrigger())this._InitTrigger(eventBlock,0);else nontriggers.push(eventBlock)}_CreateFunctionBlock(data,\nparent){const functionBlock=C3.FunctionBlock.CreateFunctionBlock(this,parent,data);this._eventSheetManager._RegisterFunctionBlock(functionBlock)}_CreateCustomACEBlock(data,parent){const customAceBlock=C3.FunctionBlock.CreateCustomACEBlock(this,parent,data);this._eventSheetManager._RegisterFunctionBlock(customAceBlock)}_CreateEventVariable(data,parent,nontriggers){const v=C3.EventVariable.Create(this,parent,data);nontriggers.push(v)}_CreateInclude(data,parent,nontriggers){const include=C3.EventInclude.Create(this,\nparent,data);nontriggers.push(include)}_CreateScriptBlock(data,parent,nontriggers){const scriptBlock=C3.EventScript.Create(this,parent,data);nontriggers.push(scriptBlock)}_InitTrigger(eventBlock,i){if(!eventBlock.IsOrBlock())this._eventSheetManager._AddTriggerToPostInit(eventBlock);const cnd=eventBlock.GetConditionAt(i);const func=cnd._GetFunc();const objectClass=cnd.GetObjectClass();if(cnd.IsFastTrigger()){let methodMap=this._fastTriggers.get(objectClass);if(!methodMap){methodMap=new Map;this._fastTriggers.set(objectClass,\nmethodMap)}const value=cnd.GetFastTriggerValue().toLowerCase();let valueMap=methodMap.get(func);if(!valueMap){valueMap=new Map;methodMap.set(func,valueMap)}let triggerArr=valueMap.get(value);if(!triggerArr){triggerArr=[];valueMap.set(value,triggerArr)}triggerArr.push([eventBlock,i])}else{let ocInfo=this._triggers.get(objectClass);if(!ocInfo){ocInfo={methodMap:new Map,behaviors:new Map};this._triggers.set(objectClass,ocInfo)}const behaviorType=cnd.GetBehaviorType();let methodMap;if(behaviorType){methodMap=\nocInfo.behaviors.get(behaviorType);if(!methodMap){methodMap=new Map;ocInfo.behaviors.set(behaviorType,methodMap)}}else methodMap=ocInfo.methodMap;let triggerArr=methodMap.get(func);if(!triggerArr){triggerArr=[];methodMap.set(func,triggerArr)}triggerArr.push([eventBlock,i])}}_PostInit(){const events=this._events;for(let i=0,len=events.length;i<len;++i){const hasElseBlock=i<len-1&&events[i+1]instanceof C3.EventBlock&&events[i+1].IsElseBlock();events[i]._PostInit(hasElseBlock)}}_AddShallowInclude(include){this._shallowIncludes.push(include)}_UpdateDeepIncludes(){C3.clearArray(this._deepIncludes);\nthis._AddDeepIncludes(this);this._alreadyIncludedSheets.clear()}_AddDeepIncludes(rootSheet){const deepIncludes=rootSheet._deepIncludes;const alreadyIncludedSheets=rootSheet._alreadyIncludedSheets;for(const include of this._shallowIncludes){const sheet=include.GetIncludeSheet();if(!include.IsActive()||rootSheet===sheet||alreadyIncludedSheets.has(sheet))continue;alreadyIncludedSheets.add(sheet);sheet._AddDeepIncludes(rootSheet);deepIncludes.push(sheet)}}deepIncludes(){return this._deepIncludes}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}GetName(){return this._name}_RegisterEventByDisplayNumber(eventBlock,\ndisplayNumber){this._eventsByDisplayNumber.set(displayNumber,eventBlock)}_GetEventByDisplayNumber(displayNumber){return this._eventsByDisplayNumber.get(displayNumber)||null}_ResetHasRunFlag(){this._hasRun=false}Run(){if(this._hasRun)return;const runtime=this._runtime;const profile=runtime.IsCPUProfiling();const startTime=profile?performance.now():0;this._hasRun=true;const eventSheetManager=this.GetEventSheetManager();const frame=eventSheetManager.GetCurrentEventStackFrame();for(const e of this._events){e.Run(frame);\neventSheetManager.ClearSol(e.GetSolModifiers());eventSheetManager.ClearAsyncActionPromises();runtime.FlushPendingInstances()}frame.Reset(null);if(profile)this._perfRecord.totalTimeCounter+=performance.now()-startTime}*DebugRun(){if(this._hasRun)return;this._hasRun=true;const runtime=this._runtime;const eventSheetManager=this.GetEventSheetManager();const frame=eventSheetManager.GetCurrentEventStackFrame();for(const e of this._events){yield*e.DebugRun(frame);eventSheetManager.ClearSol(e.GetSolModifiers());\neventSheetManager.ClearAsyncActionPromises();runtime.FlushPendingInstances()}frame.Reset(null)}_Trigger(method,inst,behaviorType){if(inst){const objectClass=inst.GetObjectClass();let ret=false;let r=this._TriggerForClass(method,inst,objectClass,behaviorType);ret=ret||r;for(const family of objectClass.GetFamilies()){r=this._TriggerForClass(method,inst,family,behaviorType);ret=ret||r}}else return this._TriggerForClass(method,inst,null,null)}_TriggerForClass(method,inst,objectClass,behaviorType){const ocInfo=\nthis._triggers.get(objectClass);if(!ocInfo)return false;const methodMap=behaviorType?ocInfo.behaviors.get(behaviorType):ocInfo.methodMap;if(!methodMap)return false;const triggerList=methodMap.get(method);if(!triggerList)return false;let ret=false;for(const [trigger,index]of triggerList){const r=this._ExecuteTrigger(inst,trigger,index);ret=ret||r}return ret}*_DebugTrigger(method,inst,behaviorType){if(inst){const objectClass=inst.GetObjectClass();let ret=false;let r=yield*this._DebugTriggerForClass(method,\ninst,objectClass,behaviorType);ret=ret||r;for(const family of objectClass.GetFamilies()){r=yield*this._DebugTriggerForClass(method,inst,family,behaviorType);ret=ret||r}}else return yield*this._DebugTriggerForClass(method,inst,null,null)}*_DebugTriggerForClass(method,inst,objectClass,behaviorType){const ocInfo=this._triggers.get(objectClass);if(!ocInfo)return false;const methodMap=behaviorType?ocInfo.behaviors.get(behaviorType):ocInfo.methodMap;if(!methodMap)return false;const triggerList=methodMap.get(method);\nif(!triggerList)return false;let ret=false;for(const [trigger,index]of triggerList){let r;if(trigger.DebugCanRunFast())r=this._ExecuteTrigger(inst,trigger,index);else r=yield*this._DebugExecuteTrigger(inst,trigger,index);ret=ret||r}return ret}_FastTrigger(method,inst,value){const objectClass=inst.GetObjectClass();const methodMap=this._fastTriggers.get(objectClass);if(!methodMap)return false;const valueMap=methodMap.get(method);if(!valueMap)return false;const triggerList=valueMap.get(value);if(!triggerList)return false;\nlet ret=false;for(let i=0,len=triggerList.length;i<len;++i){const t=triggerList[i];const r=this._ExecuteTrigger(null,t[0],t[1]);ret=ret||r}return ret}*_DebugFastTrigger(method,inst,value){const objectClass=inst.GetObjectClass();const methodMap=this._fastTriggers.get(objectClass);if(!methodMap)return false;const valueMap=methodMap.get(method);if(!valueMap)return false;const triggerList=valueMap.get(value);if(!triggerList)return false;let ret=false;for(let i=0,len=triggerList.length;i<len;++i){const t=\ntriggerList[i];const trigger=t[0];const index=t[1];let r;if(trigger.DebugCanRunFast())r=this._ExecuteTrigger(null,trigger,index);else r=yield*this._DebugExecuteTrigger(null,trigger,index);ret=ret||r}return ret}_ExecuteTrigger(inst,trigger,index){const runtime=this._runtime;const eventSheetManager=this._eventSheetManager;const currentEvent=eventSheetManager.GetCurrentEvent();const eventStack=eventSheetManager.GetEventStack();const triggerDepth=eventSheetManager.GetTriggerDepth();let ret=false;if(currentEvent)eventSheetManager.PushCleanSol(currentEvent.GetSolModifiersIncludingParents());\neventSheetManager.PushCleanSol(trigger.GetSolModifiersIncludingParents());const isRecursive=triggerDepth>1;if(isRecursive)eventSheetManager.GetLocalVarStack().Push();const frame=eventStack.Push(trigger);if(inst){const objectClass=trigger.GetConditions()[index].GetObjectClass();const sol=objectClass.GetCurrentSol();sol.SetSinglePicked(inst);if(inst.IsInContainer())inst.SetSiblingsSinglePicked()}let okToRun=true;if(trigger.GetParent()){const parents=trigger.GetTriggerParents();for(let i=0,len=parents.length;i<\nlen;++i)if(!parents[i].RunPreTrigger(frame)){okToRun=false;break}}if(okToRun){if(trigger.IsOrBlock())trigger.RunOrBlockTrigger(frame,index);else trigger.Run(frame);ret=frame.GetLastEventTrue()}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();eventSheetManager.PopSol(trigger.GetSolModifiersIncludingParents());if(currentEvent)eventSheetManager.PopSol(currentEvent.GetSolModifiersIncludingParents());if(!currentEvent&&triggerDepth===1){eventSheetManager.ClearAsyncActionPromises();\nif(!eventSheetManager.IsFlushingBlocked())runtime.FlushPendingInstances()}return ret}*_DebugExecuteTrigger(inst,trigger,index){const runtime=this._runtime;const eventSheetManager=this._eventSheetManager;const currentEvent=eventSheetManager.GetCurrentEvent();const eventStack=eventSheetManager.GetEventStack();const triggerDepth=eventSheetManager.GetTriggerDepth();let ret=false;if(currentEvent)eventSheetManager.PushCleanSol(currentEvent.GetSolModifiersIncludingParents());eventSheetManager.PushCleanSol(trigger.GetSolModifiersIncludingParents());\nconst isRecursive=triggerDepth>1;if(isRecursive)eventSheetManager.GetLocalVarStack().Push();const frame=eventStack.Push(trigger);if(inst){const objectClass=trigger.GetConditions()[index].GetObjectClass();const sol=objectClass.GetCurrentSol();sol.SetSinglePicked(inst);if(inst.IsInContainer())inst.SetSiblingsSinglePicked()}let okToRun=true;if(trigger.GetParent()){const parents=trigger.GetTriggerParents();for(let i=0,len=parents.length;i<len;++i)if(!(yield*parents[i].DebugRunPreTrigger(frame))){okToRun=\nfalse;break}}if(okToRun){if(trigger.IsOrBlock())yield*trigger.DebugRunOrBlockTrigger(frame,index);else yield*trigger.DebugRun(frame);ret=frame.GetLastEventTrue()}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();eventSheetManager.PopSol(trigger.GetSolModifiersIncludingParents());if(currentEvent)eventSheetManager.PopSol(currentEvent.GetSolModifiersIncludingParents());if(!currentEvent&&triggerDepth===1){eventSheetManager.ClearAsyncActionPromises();if(!eventSheetManager.IsFlushingBlocked())runtime.FlushPendingInstances()}return ret}_GetPerfRecord(){return this._perfRecord}};\n\n}\n\n// events/eventBlock.js\n{\n'use strict';const C3=self.C3;const EMPTY_ARRAY=[];function NoActions(frame,index){return true}function*DebugNoActions(frame,index){return true}\nC3.EventBlock=class EventBlock extends C3.DefendedBase{constructor(eventSheet,parent,data){super();this._eventSheet=eventSheet;this._runtime=eventSheet.GetRuntime();this._parent=parent;this._scopeParent=null;this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._solModifiers=[];this._solModifiersIncludingParents=[];this._hasGotSolModifiersIncludingParents=false;this._isSolWriterAfterCnds=false;this._isTopLevelGroup=false;this._hasElseBlock=false;this._isOrBlock=!!data[2];this._isElseBlock=\nfalse;this._triggerParents=null;this._conditions=[];this._actions=[];this._subEvents=[];this._RunActions=NoActions;this._DebugRunActions=DebugNoActions;this._isGroup=false;this._isInitiallyActive=false;this._groupName=\"\";this._isGroupActive=false;this._containedIncludes=null;this._perfRecord=null;this._sid=data[4];this._displayNumber=data[5];this._eventSheet._RegisterEventByDisplayNumber(this,this._displayNumber);this._debugData=this._runtime.IsDebug()?{isBreakpoint:data[3][0],isBreakable:data[3][1],\ncanRunAllConditionsFast:false,canRunAllActionsFast:false,canRunAllSubEventsFast:false,canRunSelfFast:false}:null;this.GetEventSheetManager()._RegisterEventBlock(this);if(data[0]===3)this._InitGroup(data[1]);let index=0;for(const cndData of data[6]){const condition=C3.Condition.Create(this,cndData,index++);this._conditions.push(condition);this._AddSolModifier(condition.GetObjectClass())}index=0;for(const actData of data[7]){const action=C3.Action.Create(this,actData,index++);this._actions.push(action)}if(data.length===\n9){const subEventsData=data[8];for(const eventData of subEventsData)this._eventSheet._CreateEvent(eventData,this,this._subEvents)}if(this._conditions.length)this._isElseBlock=this._conditions[0].GetObjectClass()===null&&this._conditions[0]._GetFunc()===C3.Plugins.System.Cnds.Else;if(this._conditions.length===0)this._conditions=EMPTY_ARRAY;if(this._actions.length===0)this._actions=EMPTY_ARRAY;if(this._subEvents.length===0)this._subEvents=EMPTY_ARRAY}static Create(eventSheet,parent,data){return C3.New(C3.EventBlock,\neventSheet,parent,data)}_InitGroup(groupData){this._isGroup=true;this._isInitiallyActive=!!groupData[0];this._isGroupActive=this._isInitiallyActive;this._groupName=groupData[1].toLowerCase();this._containedIncludes=[];this.GetEventSheetManager()._RegisterGroup(this);if(this._runtime.IsDebug())this._perfRecord={type:\"group\",name:groupData[1],totalTimeCounter:0,children:[]}}_AddContainedInclude(include){this._containedIncludes.push(include)}_AddContainerSolModifierToList(objectClass,arr){for(const containerType of objectClass.GetContainer().objectTypes())if(!arr.includes(containerType))arr.push(containerType)}_AddSolModifierToList(objectClass,\narr){if(!objectClass)return;if(!arr.includes(objectClass))arr.push(objectClass);if(objectClass.IsFamily())for(const familyMember of objectClass.GetFamilyMembers()){if(familyMember.IsInContainer())this._AddContainerSolModifierToList(familyMember,arr)}else if(objectClass.IsInContainer())this._AddContainerSolModifierToList(objectClass,arr)}_AddSolModifier(objectClass){this._AddSolModifierToList(objectClass,this._solModifiers)}_AddParentSolModifier(objectClass){this._AddSolModifierToList(objectClass,\nthis._solModifiersIncludingParents)}SetAllSolModifiers(){this._solModifiers=this._runtime.GetAllObjectClasses()}_PostInit(hasElse){this._hasElseBlock=!!hasElse;this._IdentifyTopLevelGroup();this._IdentifyTriggerParents();for(const c of this._conditions)c._PostInit();if(this._actions.length>0){let hasAnyActionWithReturnType=false;for(const a of this._actions){a._PostInit();if(a.HasReturnType())hasAnyActionWithReturnType=true}if(hasAnyActionWithReturnType){this._RunActions=this._RunActions_ReturnValue;\nthis._DebugRunActions=this._DebugRunActions_ReturnValue}else{this._RunActions=this._RunActions_Fast;this._DebugRunActions=this._DebugRunActions_Fast}}const subEvents=this._subEvents;for(let i=0,len=subEvents.length;i<len;++i){const hasElseBlock=i<len-1&&subEvents[i+1]instanceof C3.EventBlock&&subEvents[i+1].IsElseBlock();subEvents[i]._PostInit(hasElseBlock)}if(this._debugData)this._UpdateCanRunFast();if(this._perfRecord)this._GetPerfRecordParent()._GetPerfRecord().children.push(this._perfRecord)}_GetPerfRecord(){return this._perfRecord}_GetPerfRecordParent(){let p=\nthis.GetParent();while(p){if(p.IsGroup())return p;p=p.GetParent()}return this._eventSheet}_UpdateCanRunFast(){const dd=this._debugData;dd.canRunAllConditionsFast=this._conditions.every(c=>c.DebugCanRunFast());dd.canRunAllActionsFast=this._actions.every(a=>a.DebugCanRunFast());dd.canRunAllSubEventsFast=this._subEvents.every(s=>s.DebugCanRunFast());dd.canRunSelfFast=dd.canRunAllConditionsFast&&dd.canRunAllActionsFast&&dd.canRunAllSubEventsFast}_UpdateCanRunFastRecursive(){let e=this;do{e._UpdateCanRunFast();\ne=e.GetParent()}while(e)}_IdentifyTopLevelGroup(){if(!this.IsGroup())return;let p=this.GetParent();this._isTopLevelGroup=true;while(p){if(!p.IsGroup()){this._isTopLevelGroup=false;break}p=p.GetParent()}}_IdentifySolModifiersIncludingParents(){const allObjectClasses=this._runtime.GetAllObjectClasses();if(this._solModifiers===allObjectClasses)this._solModifiersIncludingParents=allObjectClasses;else{this._solModifiersIncludingParents=C3.cloneArray(this._solModifiers);let p=this.GetParent();while(p){for(const o of p._solModifiers)this._AddParentSolModifier(o);\np=p.GetParent()}const eventSheetManager=this.GetEventSheetManager();this._solModifiers=eventSheetManager._DeduplicateSolModifierList(this._solModifiers);this._solModifiersIncludingParents=eventSheetManager._DeduplicateSolModifierList(this._solModifiersIncludingParents)}}_IdentifyTriggerParents(){if(!this.HasAnyTriggeredCondition())return;this._triggerParents=[];let p=this.GetParent();while(p){this._triggerParents.push(p);p=p.GetParent()}this._triggerParents.reverse()}SetSolWriterAfterCnds(){this._isSolWriterAfterCnds=\ntrue;if(this._parent)this._parent.SetSolWriterAfterCnds()}IsSolWriterAfterCnds(){return this._isSolWriterAfterCnds}GetSolModifiers(){return this._solModifiers}GetSolModifiersIncludingParents(){if(!this._hasGotSolModifiersIncludingParents){this._hasGotSolModifiersIncludingParents=true;this._IdentifySolModifiersIncludingParents()}return this._solModifiersIncludingParents}HasSolModifier(objectClass){return this._solModifiers.includes(objectClass)}GetTriggerParents(){return this._triggerParents}GetEventSheet(){return this._eventSheet}GetEventSheetManager(){return this._eventSheet.GetEventSheetManager()}GetRuntime(){return this._runtime}GetParent(){return this._parent}_SetScopeParent(p){this._scopeParent=\np}GetScopeParent(){return this._scopeParent||this._parent}GetDisplayNumber(){return this._displayNumber}IsDebugBreakable(){return this._debugData&&this._debugData.isBreakable}IsDebugBreakpoint(){return this.IsDebugBreakable()&&this._debugData.isBreakpoint}_SetDebugBreakpoint(b){this._debugData.isBreakpoint=!!b;this._UpdateCanRunFastRecursive()}IsGroup(){return this._isGroup}IsTopLevelGroup(){return this._isTopLevelGroup}IsElseBlock(){return this._isElseBlock}HasElseBlock(){return this._hasElseBlock}GetGroupName(){return this._groupName}IsGroupActive(){return this._isGroupActive}ResetInitialActivation(){this.SetGroupActive(this._isInitiallyActive)}SetGroupActive(a){a=\n!!a;if(!this._isGroup)throw new Error(\"not a group\");if(this._isGroupActive===a)return;this._isGroupActive=a;for(const include of this._containedIncludes)include.UpdateActive();if(this._containedIncludes.length){const currentLayout=this._runtime.GetCurrentLayout();const mainEventSheet=currentLayout.GetEventSheet();if(mainEventSheet)mainEventSheet._UpdateDeepIncludes()}}GetSID(){return this._sid}IsOrBlock(){return this._isOrBlock}IsTrigger(){return this._conditions.length&&this._conditions[0].IsTrigger()}IsForFunctionBlock(){return this._scopeParent&&\nthis._scopeParent instanceof C3.FunctionBlock}HasAnyTriggeredCondition(){return this.IsForFunctionBlock()||this._conditions.some(c=>c.IsTrigger())}GetConditions(){return this._conditions}GetConditionCount(){return this._conditions.length}GetConditionAt(i){i=Math.floor(i);if(i<0||i>=this._conditions.length)throw new RangeError(\"invalid condition index\");return this._conditions[i]}GetConditionByDebugIndex(i){return this.GetConditionAt(i)}IsFirstConditionOfType(cnd){let i=cnd.GetIndex();if(i===0)return true;\n--i;const cndObjectClass=cnd.GetObjectClass();for(;i>=0;--i){const c=this._conditions[i];if(c.GetObjectClass()===cndObjectClass||c.IsSystemCondition()&&c.GetFirstObjectParameterObjectClass()===cndObjectClass)return false}return true}GetActions(){return this._actions}GetActionCount(){return this._actions.length}GetActionAt(i){i=Math.floor(i);if(i<0||i>=this._actions.length)throw new RangeError(\"invalid action index\");return this._actions[i]}GetActionByDebugIndex(i){i=Math.floor(i);const ret=this._actions.find(a=>\na.GetDebugIndex()===i);if(!ret)throw new RangeError(\"invalid action debug index\");return ret}_HasActionIndex(i){i=Math.floor(i);return i>=0&&i<this._actions.length}GetSubEvents(){return this._subEvents}_GetAllLocalVariablesInScope(){return this._subEvents.filter(e=>e instanceof C3.EventVariable)}RunPreTrigger(frame){frame.SetCurrentEvent(this);const conditions=this._conditions;let isAnyTrue=conditions.length===0;for(let i=0,len=conditions.length;i<len;++i){const c=conditions[i];frame.SetConditionIndex(i);\nif(c.IsLooping())throw new Error(\"trigger cannot be used as sub-event to a loop\");if(c.Run())isAnyTrue=true;else if(!this._isOrBlock)return false}return this._isOrBlock?isAnyTrue:true}RunOrBlockTrigger(frame,index){frame.SetCurrentEvent(this);if(this._conditions[index].Run()){if(this._RunActions(frame,0))this._RunSubEvents(frame);frame.SetLastEventTrue(true)}}*DebugRunPreTrigger(frame){frame.SetCurrentEvent(this);const conditions=this._conditions;let isAnyTrue=conditions.length===0;for(let i=0,len=\nconditions.length;i<len;++i){const c=conditions[i];frame.SetConditionIndex(i);if(c.IsLooping())throw new Error(\"trigger cannot be used as sub-event to a loop\");let ret;if(c.DebugCanRunFast())ret=c.Run();else ret=yield*c.DebugRun();if(ret)isAnyTrue=true;else if(!this._isOrBlock)return false}return this._isOrBlock?isAnyTrue:true}*DebugRunOrBlockTrigger(frame,index){frame.SetCurrentEvent(this);const c=this._conditions[index];let ret;if(c.DebugCanRunFast())ret=c.Run();else ret=yield*c.DebugRun();if(ret){let actRet;\nif(this.DebugCanRunActionsFast())actRet=this._RunActions(frame,0);else actRet=yield*this._DebugRunActions(frame,0);if(actRet)if(this.DebugCanRunSubEventsFast())this._RunSubEvents();else yield*this._DebugRunSubEvents();frame.SetLastEventTrue(true)}}Run(frame){frame.SetCurrentEvent(this);if(!this._isElseBlock)frame.SetElseBranchRan(false);if(this._isOrBlock)this._RunOrBlock(frame);else this._RunAndBlock(frame)}*DebugRun(frame){if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;frame.SetCurrentEvent(this);\nif(!this._isElseBlock)frame.SetElseBranchRan(false);if(this._isOrBlock)yield*this._DebugRunOrBlock(frame);else yield*this._DebugRunAndBlock(frame)}_RunOrBlock(frame){const conditions=this._conditions;let isAnyTrue=conditions.length===0;for(let i=0,len=conditions.length;i<len;++i){const c=conditions[i];if(c.IsTrigger())continue;frame.SetConditionIndex(i);const result=c.Run();isAnyTrue=isAnyTrue||result}frame.SetLastEventTrue(isAnyTrue);if(isAnyTrue){if(this._RunActions(frame,0))this._RunSubEvents(frame);\nif(this._hasElseBlock)frame.SetElseBranchRan(true)}}*_DebugRunOrBlock(frame){const conditions=this._conditions;let isAnyTrue=conditions.length===0;for(let i=0,len=conditions.length;i<len;++i){const c=conditions[i];if(c.IsTrigger())continue;frame.SetConditionIndex(i);let ret;if(c.DebugCanRunFast())ret=c.Run();else ret=yield*c.DebugRun();isAnyTrue=isAnyTrue||ret}frame.SetLastEventTrue(isAnyTrue);if(isAnyTrue){let actRet;if(this.DebugCanRunActionsFast())actRet=this._RunActions(frame,0);else actRet=yield*this._DebugRunActions(frame,\n0);if(actRet)if(this.DebugCanRunSubEventsFast())this._RunSubEvents();else yield*this._DebugRunSubEvents();if(this._hasElseBlock)frame.SetElseBranchRan(true)}}_RunAndBlock(frame){const conditions=this._conditions;for(let i=0,len=conditions.length;i<len;++i){const c=conditions[i];frame.SetConditionIndex(i);const result=c.Run();if(!result){frame.SetLastEventTrue(false);return}}frame.SetLastEventTrue(true);if(this._RunActions(frame,0))this._RunSubEvents(frame);if(frame.GetLastEventTrue()&&this._hasElseBlock)frame.SetElseBranchRan(true)}*_DebugRunAndBlock(frame){const conditions=\nthis._conditions;for(let i=0,len=conditions.length;i<len;++i){const c=conditions[i];frame.SetConditionIndex(i);let ret;if(c.DebugCanRunFast())ret=c.Run();else ret=yield*c.DebugRun();if(!ret){frame.SetLastEventTrue(false);return}}frame.SetLastEventTrue(true);let actRet;if(this.DebugCanRunActionsFast())actRet=this._RunActions(frame,0);else actRet=yield*this._DebugRunActions(frame,0);if(actRet)if(this.DebugCanRunSubEventsFast())this._RunSubEvents();else yield*this._DebugRunSubEvents();if(frame.GetLastEventTrue()&&\nthis._hasElseBlock)frame.SetElseBranchRan(true)}_RunActions_Fast(frame,startIndex){const actions=this._actions;for(let i=startIndex,len=actions.length;i<len;++i){const a=actions[i];frame.SetActionIndex(i);a.Run()}return true}*_DebugRunActions_Fast(frame,startIndex){const actions=this._actions;for(let i=startIndex,len=actions.length;i<len;++i){const a=actions[i];frame.SetActionIndex(i);if(a.DebugCanRunFast())a.Run();else yield*a.DebugRun()}return true}_RunActions_ReturnValue(frame,startIndex){const eventSheetManager=\nthis.GetEventSheetManager();const actions=this._actions;for(let i=startIndex,len=actions.length;i<len;++i){const a=actions[i];frame.SetActionIndex(i);const ret=a.Run();if(a.CanBailOut()&&ret===true)return false;else if(a.IsAsync()&&ret instanceof Promise)eventSheetManager.AddAsyncActionPromise(ret)}return true}*_DebugRunActions_ReturnValue(frame,startIndex){const eventSheetManager=this.GetEventSheetManager();const actions=this._actions;for(let i=startIndex,len=actions.length;i<len;++i){const a=actions[i];\nframe.SetActionIndex(i);let ret;if(a.DebugCanRunFast())ret=a.Run();else ret=yield*a.DebugRun();if(a.CanBailOut()&&ret===true)return false;else if(a.IsAsync()&&ret instanceof Promise)eventSheetManager.AddAsyncActionPromise(ret)}return true}_ResumeActionsAndSubEvents(frame){if(this._RunActions(frame,frame.GetActionIndex()))this._RunSubEvents()}*_DebugResumeActionsAndSubEvents(frame){if(yield*this._DebugRunActions(frame,frame.GetActionIndex()))yield*this._DebugRunSubEvents()}_RunSubEvents(){if(!this._subEvents.length)return;\nconst profile=this.IsGroup()&&this._runtime.IsCPUProfiling();const startTime=profile?performance.now():0;const eventStack=this._eventStack;const frame=eventStack.Push(this);if(this._isSolWriterAfterCnds)this._RunSubEvents_SolWriterAfterCnds(frame);else this._RunSubEvents_Fast(frame);eventStack.Pop();if(profile)this._perfRecord.totalTimeCounter+=performance.now()-startTime}_RunSubEvents_SolWriterAfterCnds(frame){const isGroup=this._isGroup;const isTopLevelGroup=this._isTopLevelGroup;const eventSheetManager=\nthis.GetEventSheetManager();const subEvents=this._subEvents;for(let i=0,len=subEvents.length,last=len-1;i<len;++i){const e=subEvents[i];const solModifiers=e.GetSolModifiers();const copySol=!isTopLevelGroup||!isGroup&&i<last;if(copySol)eventSheetManager.PushCopySol(solModifiers);e.Run(frame);if(copySol)eventSheetManager.PopSol(solModifiers);else eventSheetManager.ClearSol(solModifiers)}}_RunSubEvents_Fast(frame){const subEvents=this._subEvents;for(let i=0,len=subEvents.length;i<len;++i)subEvents[i].Run(frame)}*_DebugRunSubEvents(){if(!this._subEvents.length)return;\nconst eventStack=this._eventStack;const frame=eventStack.Push(this);if(this._isSolWriterAfterCnds)yield*this._DebugRunSubEvents_SolWriterAfterCnds(frame);else yield*this._DebugRunSubEvents_Fast(frame);eventStack.Pop()}*_DebugRunSubEvents_SolWriterAfterCnds(frame){const isGroup=this._isGroup;const isTopLevelGroup=this._isTopLevelGroup;const eventSheetManager=this.GetEventSheetManager();const subEvents=this._subEvents;for(let i=0,len=subEvents.length,last=len-1;i<len;++i){const e=subEvents[i];const solModifiers=\ne.GetSolModifiers();const copySol=!isTopLevelGroup||!isGroup&&i<last;if(copySol)eventSheetManager.PushCopySol(solModifiers);yield*e.DebugRun(frame);if(copySol)eventSheetManager.PopSol(solModifiers);else eventSheetManager.ClearSol(solModifiers)}}*_DebugRunSubEvents_Fast(frame){const subEvents=this._subEvents;for(let i=0,len=subEvents.length;i<len;++i)yield*subEvents[i].DebugRun(frame)}Retrigger(oldFrame,newFrame){newFrame.ResetQuick();const conditions=this._conditions;if(!this.IsOrBlock())for(let i=\noldFrame.GetConditionIndex()+1,len=conditions.length;i<len;++i){const c=conditions[i];newFrame.SetConditionIndex(i);const result=c.Run();if(!result)return false}if(this._RunActions(newFrame,0))this._RunSubEvents(newFrame);return true}*DebugRetrigger(oldFrame,newFrame){newFrame.ResetQuick();const conditions=this._conditions;if(!this.IsOrBlock())for(let i=oldFrame.GetConditionIndex()+1,len=conditions.length;i<len;++i){const c=conditions[i];newFrame.SetConditionIndex(i);let ret;if(c.DebugCanRunFast())ret=\nc.Run();else ret=yield*c.DebugRun();if(!ret)return false}let actRet;if(this.DebugCanRunActionsFast())actRet=this._RunActions(newFrame,0);else actRet=yield*this._DebugRunActions(newFrame,0);if(actRet)if(this.DebugCanRunSubEventsFast())this._RunSubEvents();else yield*this._DebugRunSubEvents();return true}DebugCanRunFast(){return!this.IsDebugBreakpoint()&&!this._runtime.DebugBreakNext()&&this._debugData.canRunSelfFast}DebugCanRunActionsFast(){return!this._runtime.DebugBreakNext()&&this._debugData.canRunAllActionsFast}DebugCanRunSubEventsFast(){return!this._runtime.DebugBreakNext()&&\nthis._debugData.canRunAllSubEventsFast}_CheckParentsOKToRun(frame){if(this.GetParent()){const parents=this.GetTriggerParents();for(let i=0,len=parents.length;i<len;++i)if(!parents[i].RunPreTrigger(frame))return false}return true}*_DebugCheckParentsOKToRun(frame){if(this.GetParent()){const parents=this.GetTriggerParents();for(let i=0,len=parents.length;i<len;++i)if(!(yield*parents[i].DebugRunPreTrigger(frame)))return false}return true}_EvaluateFunctionCallParameters(eventSheetManager,parameters,isRecursive){if(parameters.length>\n0)if(isRecursive){const paramResults=parameters.map(p=>p.Get(0));eventSheetManager.GetLocalVarStack().Push();this._scopeParent.SetFunctionParameters(paramResults)}else this._scopeParent.EvaluateFunctionParameters(parameters);else if(isRecursive)eventSheetManager.GetLocalVarStack().Push()}RunAsFunctionCall(combinedSolModifiers,parameters,isCopyPicked,pickInfo){let ret;let asyncId;const hasAnySolModifiers=combinedSolModifiers.length>0;let extraPopSolModifiers=null;const runtime=this._runtime;const eventStack=\nthis._eventStack;const eventSheetManager=runtime.GetEventSheetManager();const triggerDepth=eventSheetManager._IncTriggerDepth();const isRecursive=triggerDepth>1;this._EvaluateFunctionCallParameters(eventSheetManager,parameters,isRecursive);if(hasAnySolModifiers)if(isCopyPicked)eventSheetManager.PushCopySol(combinedSolModifiers);else eventSheetManager.PushCleanSol(combinedSolModifiers);if(pickInfo!==null){if(pickInfo.copyFromObjectClass){const copyFromSol=isCopyPicked?pickInfo.copyFromObjectClass.GetCurrentSol():\npickInfo.copyFromObjectClass.GetSolStack().GetOneBelowCurrentSol();const copyToSol=pickInfo.copyToObjectClass.GetCurrentSol();copyToSol.SetArrayPicked(copyFromSol.GetInstances());copyToSol.ClearElseInstances();if(!isCopyPicked)pickInfo.copyToObjectClass.ApplySolToContainer()}else if(pickInfo.pickObjectClass){const objectClassSol=pickInfo.pickObjectClass.GetCurrentSol();objectClassSol.SetArrayPicked(pickInfo.pickInstances);objectClassSol.ClearElseInstances()}if(pickInfo.pushCleanSolDynamic)extraPopSolModifiers=\neventSheetManager.PushCleanSolDynamic(combinedSolModifiers)}const frame=eventStack.Push(this);if(isCopyPicked)frame.SetDynamicSolModifiers(combinedSolModifiers);if(this._CheckParentsOKToRun(frame)){frame.SetCurrentEvent(this);const isAsync=this._scopeParent.IsAsync();if(isAsync)[asyncId,ret]=this._scopeParent.StartAsyncFunctionCall();this._RunAndBlock(frame);if(isAsync)this._scopeParent.MaybeFinishAsyncFunctionCall(asyncId)}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();\nif(extraPopSolModifiers!==null)eventSheetManager.PopSol(extraPopSolModifiers);if(hasAnySolModifiers)eventSheetManager.PopSol(combinedSolModifiers);eventSheetManager._DecTriggerDepth();return ret}*DebugRunAsFunctionCall(combinedSolModifiers,parameters,isCopyPicked,pickInfo){let ret;let asyncId;if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;const hasAnySolModifiers=combinedSolModifiers.length>0;let extraPopSolModifiers=null;const runtime=this._runtime;const eventStack=this._eventStack;\nconst eventSheetManager=runtime.GetEventSheetManager();const triggerDepth=eventSheetManager._IncTriggerDepth();const isRecursive=triggerDepth>1;this._EvaluateFunctionCallParameters(eventSheetManager,parameters,isRecursive);if(hasAnySolModifiers)if(isCopyPicked)eventSheetManager.PushCopySol(combinedSolModifiers);else eventSheetManager.PushCleanSol(combinedSolModifiers);if(pickInfo!==null){if(pickInfo.copyFromObjectClass){const copyFromSol=isCopyPicked?pickInfo.copyFromObjectClass.GetCurrentSol():pickInfo.copyFromObjectClass.GetSolStack().GetOneBelowCurrentSol();\nconst copyToSol=pickInfo.copyToObjectClass.GetCurrentSol();copyToSol.SetArrayPicked(copyFromSol.GetInstances());copyToSol.ClearElseInstances();if(!isCopyPicked)pickInfo.copyToObjectClass.ApplySolToContainer()}else if(pickInfo.pickObjectClass){const objectClassSol=pickInfo.pickObjectClass.GetCurrentSol();objectClassSol.SetArrayPicked(pickInfo.pickInstances);objectClassSol.ClearElseInstances()}if(pickInfo.pushCleanSolDynamic)extraPopSolModifiers=eventSheetManager.PushCleanSolDynamic(combinedSolModifiers)}const frame=\neventStack.Push(this);if(isCopyPicked)frame.SetDynamicSolModifiers(combinedSolModifiers);if(yield*this._DebugCheckParentsOKToRun(frame)){frame.SetCurrentEvent(this);const isAsync=this._scopeParent.IsAsync();if(isAsync)[asyncId,ret]=this._scopeParent.StartAsyncFunctionCall();yield*this._DebugRunAndBlock(frame);if(isAsync)this._scopeParent.MaybeFinishAsyncFunctionCall(asyncId)}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();if(extraPopSolModifiers!==null)eventSheetManager.PopSol(extraPopSolModifiers);\nif(hasAnySolModifiers)eventSheetManager.PopSol(combinedSolModifiers);eventSheetManager._DecTriggerDepth();return ret}RunAsMappedFunctionCall(paramResults,isCopyPicked){const solModifiers=this.GetSolModifiersIncludingParents();const hasAnySolModifiers=solModifiers.length>0;const runtime=this._runtime;const eventStack=this._eventStack;const eventSheetManager=runtime.GetEventSheetManager();const triggerDepth=eventSheetManager._IncTriggerDepth();const isRecursive=triggerDepth>1;if(isRecursive)eventSheetManager.GetLocalVarStack().Push();\nthis._scopeParent.SetFunctionParameters(paramResults);if(hasAnySolModifiers)if(isCopyPicked)eventSheetManager.PushCopySol(solModifiers);else eventSheetManager.PushCleanSol(solModifiers);const frame=eventStack.Push(this);if(this._CheckParentsOKToRun(frame)){frame.SetCurrentEvent(this);this._RunAndBlock(frame)}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();if(hasAnySolModifiers)eventSheetManager.PopSol(solModifiers);eventSheetManager._DecTriggerDepth()}*DebugRunAsMappedFunctionCall(paramResults,\nisCopyPicked){if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;const solModifiers=this.GetSolModifiersIncludingParents();const hasAnySolModifiers=solModifiers.length>0;const runtime=this._runtime;const eventStack=this._eventStack;const eventSheetManager=runtime.GetEventSheetManager();const triggerDepth=eventSheetManager._IncTriggerDepth();const isRecursive=triggerDepth>1;if(isRecursive)eventSheetManager.GetLocalVarStack().Push();this._scopeParent.SetFunctionParameters(paramResults);\nif(hasAnySolModifiers)if(isCopyPicked)eventSheetManager.PushCopySol(solModifiers);else eventSheetManager.PushCleanSol(solModifiers);const frame=eventStack.Push(this);if(yield*this._DebugCheckParentsOKToRun(frame)){frame.SetCurrentEvent(this);yield*this._DebugRunAndBlock(frame)}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();if(hasAnySolModifiers)eventSheetManager.PopSol(solModifiers);eventSheetManager._DecTriggerDepth()}RunAsExpressionFunctionCall(combinedSolModifiers,isCopyPicked,\nreturnType,defaultReturnValue,...paramResults){let ret;let asyncId;const hasAnySolModifiers=combinedSolModifiers.length>0;const runtime=this._runtime;const eventStack=this._eventStack;const eventSheetManager=runtime.GetEventSheetManager();const triggerDepth=eventSheetManager._IncTriggerDepth();const isRecursive=triggerDepth>1;if(isRecursive)eventSheetManager.GetLocalVarStack().Push();if(paramResults.length>0)this._scopeParent.SetFunctionParameters(paramResults);if(hasAnySolModifiers)if(isCopyPicked)eventSheetManager.PushCopySol(combinedSolModifiers);\nelse eventSheetManager.PushCleanSol(combinedSolModifiers);const frame=eventStack.Push(this);frame.InitCallFunctionExpression(returnType,defaultReturnValue);eventStack.PushExpFunc(frame);runtime.SetDebuggingEnabled(false);if(this._CheckParentsOKToRun(frame)){frame.SetCurrentEvent(this);const isAsync=this._scopeParent.IsAsync();if(isAsync)[asyncId,ret]=this._scopeParent.StartAsyncFunctionCall();this._RunAndBlock(frame);if(isAsync)this._scopeParent.MaybeFinishAsyncFunctionCall(asyncId)}runtime.SetDebuggingEnabled(true);\neventStack.Pop();eventStack.PopExpFunc();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();if(hasAnySolModifiers)eventSheetManager.PopSol(combinedSolModifiers);eventSheetManager._DecTriggerDepth();return ret||frame.GetFunctionReturnValue()}};\n\n}\n\n// events/eventScript.js\n{\n'use strict';const C3=self.C3;const EMPTY_SOL_MODIFIERS=[];let hadUserScriptException=false;\nC3.EventScript=class EventScript extends C3.DefendedBase{constructor(eventSheet,parent,data){super();const runtime=eventSheet.GetRuntime();const eventSheetManager=eventSheet.GetEventSheetManager();this._eventSheet=eventSheet;this._eventSheetManager=eventSheetManager;this._runtime=eventSheet.GetRuntime();this._parent=parent;const userMethod=runtime.GetObjectReference(data[1]);this._func=userMethod;this._displayNumber=data[2];this._eventSheet._RegisterEventByDisplayNumber(this,this._displayNumber);\nthis._debugData=runtime.IsDebug()?{isBreakpoint:data[3][0],isBreakable:data[3][1]}:null}static Create(eventSheet,parent,data){return C3.New(C3.EventScript,eventSheet,parent,data)}_PostInit(){const userMethod=this._func;const localVars=this._runtime.GetEventSheetManager()._GetLocalVariablesScriptInterface(this);this._func=userMethod.bind(null,this._runtime.GetIRuntime(),localVars)}GetParent(){return this._parent}GetScopeParent(){return this._parent}GetEventSheet(){return this._eventSheet}GetDisplayNumber(){return this._displayNumber}IsDebugBreakable(){return this._debugData&&\nthis._debugData.isBreakable}IsDebugBreakpoint(){return this.IsDebugBreakable()&&this._debugData.isBreakpoint}_SetDebugBreakpoint(b){this._debugData.isBreakpoint=!!b}IsElseBlock(){return false}GetSolModifiers(){return EMPTY_SOL_MODIFIERS}GetSolModifiersIncludingParents(){if(this._parent)return this._parent.GetSolModifiersIncludingParents();else return EMPTY_SOL_MODIFIERS}Run(frame){frame.SetCurrentEvent(this);this._eventSheetManager.AddAsyncActionPromise(this._RunUserScript())}async _RunUserScript(){try{await this._func()}catch(err){console.error(`Unhandled exception running script %c${this.GetEventSheet().GetName()}, event ${this.GetDisplayNumber()}:`,\n\"font-size: 1.2em; font-weight: bold;\",err);if(self.C3Debugger)self.C3Debugger._SetLastErrorScript(this);if(!hadUserScriptException){console.info(`%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()`,\"font-weight: bold; text-decoration: underline\",\"\",\"font-weight: bold\");hadUserScriptException=true}}}*DebugRun(frame){frame.SetCurrentEvent(this);if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;this.Run(frame)}DebugCanRunFast(){return!this.IsDebugBreakpoint()&&\n!this._runtime.DebugBreakNext()}static HadUserScriptException(){return hadUserScriptException}static SetHadUserScriptException(){hadUserScriptException=true}};\n\n}\n\n// events/functionBlock.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;\nC3.FunctionBlock=class FunctionBlock extends C3.DefendedBase{constructor(eventSheet,parent,data){super();this._eventSheet=eventSheet;this._runtime=eventSheet.GetRuntime();this._parent=parent;this._functionType=0;this._functionName=\"\";this._returnType=0;this._functionParameters=[];this._isEnabled=true;this._aceName=\"\";this._objectClass=null;this._hasOverrides=false;this._innerLocalVariables=[];this._isCopyPicked=false;this._isAsync=false;this._nextAsyncId=0;this._currentAsyncId=-1;this._asyncMap=new Map;\nthis._eventBlock=C3.EventBlock.Create(eventSheet,parent,data);this._eventBlock._SetScopeParent(this)}InitFunctionBlock(funcData){this._functionType=0;this._functionName=funcData[0];this._returnType=funcData[1];this._functionParameters=funcData[2].map(paramData=>C3.EventVariable.Create(this._eventSheet,this,paramData));this._isEnabled=funcData[3];this._isAsync=funcData[4];this._isCopyPicked=funcData[5]}InitCustomACEBlock(funcData){this._functionType=1;this._aceName=funcData[1];this._objectClass=this._runtime.GetObjectClassByIndex(funcData[2]);\nthis._eventBlock._AddSolModifier(this._objectClass);this._functionName=this._objectClass.GetName()+\".\"+this._aceName;this._returnType=funcData[3];this._functionParameters=funcData[4].map(paramData=>C3.EventVariable.Create(this._eventSheet,this,paramData));this._isEnabled=funcData[5];this._isAsync=funcData[6];this._isCopyPicked=funcData[7];this._objectClass.AddCustomAction(this)}static CreateFunctionBlock(eventSheet,parent,data){const ret=C3.New(C3.FunctionBlock,eventSheet,parent,data);const funcData=\ndata[1];ret.InitFunctionBlock(funcData);return ret}static CreateCustomACEBlock(eventSheet,parent,data){const ret=C3.New(C3.FunctionBlock,eventSheet,parent,data);const funcData=data[1];ret.InitCustomACEBlock(funcData);return ret}_CheckOverrideState(){if(this._objectClass&&this._objectClass.IsFamily())for(const objectType of this._objectClass.GetFamilyMembers())if(objectType.HasOwnCustomActionByName(this._aceName)){this._hasOverrides=true;break}}_PostInit(){for(const fp of this._functionParameters)fp._PostInit();\nthis._eventBlock._PostInit(false)}GetFunctionType(){return this._functionType}_GetAllLocalVariablesInScope(){return this._functionParameters}GetFunctionParameters(){return this._functionParameters}GetFunctionParameterCount(){return this._functionParameters.length}_RegisterLocalVariable(localVariable){this._innerLocalVariables.push(localVariable)}_GetAllInnerLocalVariables(){return this._innerLocalVariables}EvaluateFunctionParameters(parameters){const functionParameters=this._functionParameters;for(let i=\n0,len=functionParameters.length;i<len;++i)functionParameters[i].SetValue(parameters[i].Get(0))}SetFunctionParameters(paramResults){const functionParameters=this._functionParameters;for(let i=0,len=functionParameters.length;i<len;++i)functionParameters[i].SetValue(paramResults[i])}CaptureFunctionParameters(){return this._functionParameters.map(p=>p.GetValue())}GetParent(){return this._parent}GetScopeParent(){return this._parent}GetFunctionName(){return this._functionName}GetACEName(){return this._aceName}HasCustomACEOverrides(){return this._hasOverrides}GetReturnType(){return this._returnType}GetObjectClass(){return this._objectClass}IsEnabled(){return this._isEnabled}GetDefaultReturnValue(){switch(this._returnType){case 0:return null;\ncase 2:return\"\";default:return 0}}GetEventBlock(){return this._eventBlock}IsCopyPicked(){return this._isCopyPicked}IsAsync(){return this._isAsync}StartAsyncFunctionCall(){const asyncId=this._nextAsyncId++;this._currentAsyncId=asyncId;let resolve;const promise=new Promise(r=>resolve=r);this._asyncMap.set(asyncId,{resolve,pauseCount:0});return[asyncId,promise]}MaybeFinishAsyncFunctionCall(asyncId){const info=this._asyncMap.get(asyncId);if(info.pauseCount===0){info.resolve();this._asyncMap.delete(asyncId)}this._currentAsyncId=\n-1}PauseCurrentAsyncFunction(){const info=this._asyncMap.get(this._currentAsyncId);info.pauseCount++;return this._currentAsyncId}ResumeAsyncFunction(asyncId){this._currentAsyncId=asyncId;const info=this._asyncMap.get(asyncId);info.pauseCount--}RunAsFamilyCustomActionWithOverrides(combinedSolModifiers,parameters){const objectTypeMap=new Map;const familyInstances=[];for(const inst of this._objectClass.GetCurrentSol().GetInstances()){const objectType=inst.GetObjectClass();if(objectType.HasOwnCustomActionByName(this._aceName)){const arr=\nobjectTypeMap.get(objectType);if(Array.isArray(arr))arr.push(inst);else objectTypeMap.set(objectType,[inst])}else familyInstances.push(inst)}if(familyInstances.length>0)this._eventBlock.RunAsFunctionCall(combinedSolModifiers,parameters,this._isCopyPicked,{pickObjectClass:this._objectClass,pickInstances:familyInstances});if(objectTypeMap.size>0)for(const [objectType,arr]of objectTypeMap){const eventBlock=objectType.GetOwnCustomActionByName(this._aceName).GetEventBlock();const allCombinedSolModifiers=\n[...(new Set([...combinedSolModifiers,...eventBlock.GetSolModifiers()]))];eventBlock.RunAsFunctionCall(allCombinedSolModifiers,parameters,this._isCopyPicked,{pickObjectClass:objectType,pickInstances:arr})}}*DebugRunAsFamilyCustomActionWithOverrides(combinedSolModifiers,parameters){const objectTypeMap=new Map;const familyInstances=[];for(const inst of this._objectClass.GetCurrentSol().GetInstances()){const objectType=inst.GetObjectClass();if(objectType.HasOwnCustomActionByName(this._aceName)){const arr=\nobjectTypeMap.get(objectType);if(Array.isArray(arr))arr.push(inst);else objectTypeMap.set(objectType,[inst])}else familyInstances.push(inst)}if(familyInstances.length>0)yield*this._eventBlock.DebugRunAsFunctionCall(combinedSolModifiers,parameters,this._isCopyPicked,{pickObjectClass:this._objectClass,pickInstances:familyInstances});if(objectTypeMap.size>0)for(const [objectType,arr]of objectTypeMap){const eventBlock=objectType.GetOwnCustomActionByName(this._aceName).GetEventBlock();const allCombinedSolModifiers=\n[...(new Set([...combinedSolModifiers,...eventBlock.GetSolModifiers()]))];yield*eventBlock.DebugRunAsFunctionCall(allCombinedSolModifiers,parameters,this._isCopyPicked,{pickObjectClass:objectType,pickInstances:arr})}}};\n\n}\n\n// events/eventVariable.js\n{\n'use strict';const C3=self.C3;const EMPTY_SOL_MODIFIERS=[];\nC3.EventVariable=class EventVariable extends C3.DefendedBase{constructor(eventSheet,parent,data){super();const eventSheetManager=eventSheet.GetEventSheetManager();this._eventSheet=eventSheet;this._eventSheetManager=eventSheetManager;this._runtime=eventSheet.GetRuntime();this._parent=parent;this._localVarStack=eventSheetManager.GetLocalVarStack();this._name=data[1];this._type=data[2];this._initialValue=data[3];this._isStatic=!!data[4];this._isConstant=!!data[5];this._isFunctionParameter=parent instanceof\nC3.FunctionBlock;this._sid=data[6];this._jsPropName=this._runtime.GetJsPropName(data[8]);this._scriptSetter=v=>this.SetValue(v);this._scriptGetter=()=>this.GetValue();this._hasSingleValue=!this._parent||this._isStatic||this._isConstant;this._value=this._initialValue;this._localIndex=-1;if(this.IsBoolean())this._value=this._value?1:0;if(this.IsLocal()&&!this.IsStatic()&&!this.IsConstant())this._localIndex=eventSheetManager._GetNextLocalVarIndex(this);eventSheetManager._RegisterEventVariable(this)}static Create(eventSheet,\nparent,data){return C3.New(C3.EventVariable,eventSheet,parent,data)}_PostInit(){if(this.IsLocal()&&!this.IsStatic()&&!this.IsConstant()&&!this.IsFunctionParameter()){const functionBlock=this._eventSheetManager.FindFirstFunctionBlockParent(this);if(functionBlock)functionBlock._RegisterLocalVariable(this)}}GetName(){return this._name}GetJsPropName(){return this._jsPropName}GetParent(){return this._parent}GetScopeParent(){return this.GetParent()}IsGlobal(){return!this.GetParent()}IsLocal(){return!this.IsGlobal()}IsFunctionParameter(){return this._isFunctionParameter}IsStatic(){return this._isStatic}IsConstant(){return this._isConstant}IsNumber(){return this._type===\n0}IsString(){return this._type===1}IsBoolean(){return this._type===2}IsElseBlock(){return false}GetSID(){return this._sid}GetInitialValue(){return this._initialValue}GetSolModifiers(){return EMPTY_SOL_MODIFIERS}Run(frame){if(this.IsLocal()&&!this.IsStatic()&&!this.IsConstant())this.SetValue(this.GetInitialValue())}DebugCanRunFast(){return true}*DebugRun(frame){this.Run(frame)}SetValue(v){if(this.IsNumber()){if(typeof v!==\"number\")v=parseFloat(v)}else if(this.IsString()){if(typeof v!==\"string\")v=v.toString()}else if(this.IsBoolean())v=\nv?1:0;if(this._hasSingleValue)this._value=v;else this._localVarStack.GetCurrent()[this._localIndex]=v}GetValue(){return this._hasSingleValue?this._value:this._localVarStack.GetCurrent()[this._localIndex]}GetTypedValue(){let ret=this.GetValue();if(this.IsBoolean())ret=!!ret;return ret}ResetToInitialValue(){this._value=this._initialValue}_GetScriptInterfaceDescriptor(){return{configurable:false,enumerable:true,get:this._scriptGetter,set:this._scriptSetter}}};\n\n}\n\n// events/eventInclude.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;const EMPTY_SOL_MODIFIERS=[];\nC3.EventInclude=class EventInclude extends C3.DefendedBase{constructor(eventSheet,parent,data){super();const eventSheetManager=eventSheet.GetEventSheetManager();this._eventSheet=eventSheet;this._eventSheetManager=eventSheetManager;this._runtime=eventSheet.GetRuntime();this._parent=parent;this._includeSheet=null;this._includeSheetName=data[1];this._isActive=true}static Create(eventSheet,parent,data){return C3.New(C3.EventInclude,eventSheet,parent,data)}_PostInit(){this._includeSheet=this._eventSheetManager.GetEventSheetByName(this._includeSheetName);\nthis._eventSheet._AddShallowInclude(this);let p=this.GetParent();while(p){if(p instanceof C3.EventBlock&&p.IsGroup())p._AddContainedInclude(this);p=p.GetParent()}this.UpdateActive();if(this._runtime.IsDebug())this._eventSheet._GetPerfRecord().children.push(this._includeSheet._GetPerfRecord())}GetParent(){return this._parent}GetSolModifiers(){return EMPTY_SOL_MODIFIERS}GetIncludeSheet(){return this._includeSheet}Run(frame){const pushSol=!!this.GetParent();const allObjectClasses=this._runtime.GetAllObjectClasses();\nif(pushSol)this._eventSheetManager.PushCleanSol(allObjectClasses);this._includeSheet.Run();if(pushSol)this._eventSheetManager.PopSol(allObjectClasses)}*DebugRun(frame){const pushSol=!!this.GetParent();const allObjectClasses=this._runtime.GetAllObjectClasses();if(pushSol)this._eventSheetManager.PushCleanSol(allObjectClasses);yield*this._includeSheet.DebugRun();if(pushSol)this._eventSheetManager.PopSol(allObjectClasses)}DebugCanRunFast(){return false}IsActive(){return this._isActive}UpdateActive(){let p=\nthis.GetParent();while(p){if(p instanceof C3.EventBlock&&p.IsGroup()&&!p.IsGroupActive()){this._isActive=false;return}p=p.GetParent()}this._isActive=true}};\n\n}\n\n// events/expNode.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;C3.ExpNode=class ExpNode extends C3.DefendedBase{constructor(owner){super();this._owner=owner;this._runtime=owner.GetRuntime()}_PostInit(){}static CreateNode(owner,data){const type=data[0];const Classes=[BehaviorExpressionNode,ObjectExpressionNode,InstVarExpressionNode,EventVarExpNode,SystemExpressionExpNode,CallFunctionExpressionExpNode];return C3.New(Classes[type],owner,data)}};\nclass SystemExpressionExpNode extends C3.ExpNode{constructor(owner,data){super(owner);this._systemPlugin=this._runtime.GetSystemPlugin();this._func=this._runtime.GetObjectReference(data[1]);if(this._func===C3.Plugins.System.Exps.random||this._func===C3.Plugins.System.Exps.choose)this._owner.SetVariesPerInstance()}GetBoundMethod(){return this._systemPlugin._GetBoundACEMethod(this._func,this._systemPlugin)}}\nclass CallFunctionExpressionExpNode extends C3.ExpNode{constructor(owner,data){super(owner);this._functionBlock=null;this._functionName=data[1];this._owner.SetVariesPerInstance()}_PostInit(){const eventSheetManager=this._runtime.GetEventSheetManager();this._functionBlock=eventSheetManager.GetFunctionBlockByName(this._functionName);this._functionName=null;const myEventBlock=this._owner.GetEventBlock();const callEventBlock=this._functionBlock.GetEventBlock();this._combinedSolModifiers=[...(new Set([...myEventBlock.GetSolModifiersIncludingParents(),\n...callEventBlock.GetSolModifiersIncludingParents()]))];this._combinedSolModifiers=eventSheetManager._DeduplicateSolModifierList(this._combinedSolModifiers)}GetBoundMethod(){const functionBlock=this._functionBlock;if(functionBlock.IsEnabled()){const callEventBlock=functionBlock.GetEventBlock();return C3.EventBlock.prototype.RunAsExpressionFunctionCall.bind(callEventBlock,this._combinedSolModifiers,functionBlock.IsCopyPicked(),functionBlock.GetReturnType(),functionBlock.GetDefaultReturnValue())}else{const defaultReturnValue=\nfunctionBlock.GetDefaultReturnValue();return()=>defaultReturnValue}}}function WrapIndex(index,len){if(index>=len)return index%len;else if(index<0){if(index<=-len)index%=len;if(index<0)index+=len;return index}else return index}\nclass ObjectExpressionNode extends C3.ExpNode{constructor(owner,data){super(owner);this._objectClass=this._runtime.GetObjectClassByIndex(data[1]);this._func=this._runtime.GetObjectReference(data[2]);this._returnsString=!!data[3];this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._owner._MaybeVaryFor(this._objectClass)}GetBoundMethod(){return this._objectClass.GetPlugin()._GetBoundACEMethod(this._func,this._objectClass.GetSingleGlobalInstance().GetSdkInstance())}ExpObject(...args){const objectClass=\nthis._objectClass;const instances=objectClass.GetCurrentSol().GetExpressionInstances();const len=instances.length;if(len===0)return this._returnsString?\"\":0;const index=WrapIndex(this._owner.GetSolIndex(),len);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(objectClass);return this._func.apply(instances[index].GetSdkInstance(),args)}ExpObject_InstExpr(instIndex,...args){const objectClass=this._objectClass;const instances=objectClass.GetInstances();const len=instances.length;if(len===\n0)return this._returnsString?\"\":0;const index=WrapIndex(instIndex,len);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(objectClass);return this._func.apply(instances[index].GetSdkInstance(),args)}}\nclass InstVarExpressionNode extends C3.ExpNode{constructor(owner,data){super(owner);this._objectClass=this._runtime.GetObjectClassByIndex(data[1]);this._varIndex=data[3];this._returnsString=!!data[2];this._owner._MaybeVaryFor(this._objectClass)}ExpInstVar(){const instances=this._objectClass.GetCurrentSol().GetExpressionInstances();const len=instances.length;if(len===0)return this._returnsString?\"\":0;const index=WrapIndex(this._owner.GetSolIndex(),len);return instances[index]._GetInstanceVariableValueUnchecked(this._varIndex)}ExpInstVar_Family(){const objectClass=\nthis._objectClass;const instances=objectClass.GetCurrentSol().GetExpressionInstances();const len=instances.length;if(len===0)return this._returnsString?\"\":0;const index=WrapIndex(this._owner.GetSolIndex(),len);const inst=instances[index];const offset=inst.GetObjectClass().GetFamilyInstanceVariableOffset(objectClass.GetFamilyIndex());return inst._GetInstanceVariableValueUnchecked(this._varIndex+offset)}ExpInstVar_InstExpr(instIndex){const objectClass=this._objectClass;const instances=objectClass.GetInstances();\nconst len=instances.length;if(len===0)return this._returnsString?\"\":0;const index=WrapIndex(instIndex,len);const inst=instances[index];let offset=0;if(objectClass.IsFamily())offset=inst.GetObjectClass().GetFamilyInstanceVariableOffset(objectClass.GetFamilyIndex());return inst._GetInstanceVariableValueUnchecked(this._varIndex+offset)}}\nclass BehaviorExpressionNode extends C3.ExpNode{constructor(owner,data){super(owner);this._objectClass=this._runtime.GetObjectClassByIndex(data[1]);this._behaviorType=this._objectClass.GetBehaviorTypeByName(data[2]);this._behaviorIndex=this._objectClass.GetBehaviorIndexByName(data[2]);this._func=this._runtime.GetObjectReference(data[3]);this._returnsString=!!data[4];this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._owner._MaybeVaryFor(this._objectClass)}ExpBehavior(...args){const objectClass=\nthis._objectClass;const instances=objectClass.GetCurrentSol().GetExpressionInstances();const len=instances.length;if(len===0)return this._returnsString?\"\":0;const index=WrapIndex(this._owner.GetSolIndex(),len);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(objectClass);const inst=instances[index];let offset=0;if(objectClass.IsFamily())offset=inst.GetObjectClass().GetFamilyBehaviorOffset(objectClass.GetFamilyIndex());return this._func.apply(inst.GetBehaviorInstances()[this._behaviorIndex+\noffset].GetSdkInstance(),args)}ExpBehavior_InstExpr(instIndex,...args){const objectClass=this._objectClass;const instances=objectClass.GetInstances();const len=instances.length;if(len===0)return this._returnsString?\"\":0;const index=WrapIndex(instIndex,len);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(objectClass);const inst=instances[index];let offset=0;if(objectClass.IsFamily())offset=inst.GetObjectClass().GetFamilyBehaviorOffset(objectClass.GetFamilyIndex());return this._func.apply(inst.GetBehaviorInstances()[this._behaviorIndex+\noffset].GetSdkInstance(),args)}}class EventVarExpNode extends C3.ExpNode{constructor(owner,data){super(owner);this._eventVar=null;this._eventVarSid=data[1]}_PostInit(){this._eventVar=this._runtime.GetEventSheetManager().GetEventVariableBySID(this._eventVarSid)}GetVar(){return this._eventVar}};\n\n}\n\n// events/parameter.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;\nC3.Parameter=class Parameter extends C3.DefendedBase{constructor(owner,type,index){super();this._owner=owner;this._index=index;this._type=type;this.Get=null;this._variesPerInstance=false;this._isConstant=false}static Create(owner,data,index){const type=data[0];const Classes=[ExpressionParameter,StringExpressionParameter,FileParameter,ComboParameter,ObjectParameter,LayerExpressionParameter,LayoutParameter,ExpressionParameter,ComboParameter,ComboParameter,InstVarParameter,EventVarParameter,FileParameter,\nVariadicParameter,StringExpressionParameter,TimelineParameter,BooleanParameter,FunctionParameter,EaseParameter,TilemapBrushParameter,TemplateExpressionParameter];return C3.New(Classes[type],owner,type,index,data)}_PostInit(){}SetVariesPerInstance(){this._variesPerInstance=true}_MaybeVaryFor(objectClass){if(this._variesPerInstance)return;if(!objectClass)return;if(!objectClass.GetPlugin().IsSingleGlobal())this._variesPerInstance=true}VariesPerInstance(){return this._variesPerInstance}GetIndex(){return this._index}GetRuntime(){return this._owner.GetRuntime()}GetEventBlock(){return this._owner.GetEventBlock()}IsConstant(){return this._isConstant}IsObjectParameter(){return this._type===\n4}};function GetExpressionFunc(number){const ret=self.C3_ExpressionFuncs[number];if(!ret)throw new Error(\"invalid expression number\");return ret}\nclass ExpressionParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._solIndex=0;const expData=data[1];this._expressionNumber=expData[0];this._numberedNodes=[];this._expressionFunc=null;for(let i=1,len=expData.length;i<len;++i)this._numberedNodes.push(C3.ExpNode.CreateNode(this,expData[i]));if(this._numberedNodes.length)this.Get=this.GetExpression;else{this.Get=GetExpressionFunc(this._expressionNumber);this._isConstant=true}}_GetNode(i){if(i<0||i>=this._numberedNodes.length)throw new RangeError(\"invalid numbered node\");\nreturn this._numberedNodes[i]}_PostInit(){for(const node of this._numberedNodes)node._PostInit();const func=GetExpressionFunc(this._expressionNumber);if(this._numberedNodes.length)this._expressionFunc=func(this);else this._expressionFunc=func}GetSolIndex(){return this._solIndex}GetExpression(solIndex){this._solIndex=solIndex;return this._expressionFunc()}}\nclass StringExpressionParameter extends ExpressionParameter{constructor(owner,type,index,data){super(owner,type,index,data);this.Get=this.GetStringExpression;if(type===14){this.GetEventBlock().SetAllSolModifiers();if(this._owner instanceof C3.Action)this.GetEventBlock().SetSolWriterAfterCnds()}}GetStringExpression(solIndex){this._solIndex=solIndex;const ret=this._expressionFunc();if(typeof ret===\"string\")return ret;else return\"\"}_GetFastTriggerValue(){return GetExpressionFunc(this._expressionNumber)()}}\nclass LayerExpressionParameter extends ExpressionParameter{constructor(owner,type,index,data){super(owner,type,index,data);this.Get=this.GetLayer;this._isConstant=false}GetLayer(solIndex){this._solIndex=solIndex;const ret=this._expressionFunc();const layout=this.GetRuntime().GetCurrentLayout();return layout.GetLayer(ret)}}\nclass ComboParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._combo=data[1];this.Get=this.GetCombo;this._isConstant=true}GetCombo(){return this._combo}}class BooleanParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._bool=data[1];this.Get=this.GetBoolean;this._isConstant=true}GetBoolean(){return this._bool}}\nclass ObjectParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._objectClass=this.GetRuntime().GetObjectClassByIndex(data[1]);this.Get=this.GetObjectClass;const eventBlock=this.GetEventBlock();eventBlock._AddSolModifier(this._objectClass);if(this._owner instanceof C3.Action)eventBlock.SetSolWriterAfterCnds();else if(eventBlock.GetParent())eventBlock.GetParent().SetSolWriterAfterCnds();this._isConstant=true}GetObjectClass(){return this._objectClass}}\nclass LayoutParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._layout=this.GetRuntime().GetLayoutManager().GetLayoutByName(data[1]);this.Get=this.GetLayout;this._isConstant=true}GetLayout(){return this._layout}}\nclass TimelineParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._timeline=this.GetRuntime().GetTimelineManager().GetTimelineByName(data[1]);this.Get=this.GetTimeline;this._isConstant=true}GetTimeline(){return this._timeline}}class FileParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._fileInfo=data[1];this.Get=this.GetFile;this._isConstant=true}GetFile(){return this._fileInfo}}\nclass InstVarParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._instVarIndex=data[1];const ownerObjectClass=this._owner.GetObjectClass();if(this._owner instanceof C3.Condition&&this._owner.IsStatic()){this.Get=this.GetInstanceVariable;this._isConstant=true}else if(ownerObjectClass&&ownerObjectClass.IsFamily()){this.Get=this.GetFamilyInstanceVariable;this.SetVariesPerInstance()}else{this.Get=this.GetInstanceVariable;this._isConstant=true}}GetInstanceVariable(){return this._instVarIndex}GetFamilyInstanceVariable(solIndex){solIndex=\nsolIndex||0;const familyType=this._owner.GetObjectClass();const sol=familyType.GetCurrentSol();const instances=sol.GetInstances();let realType=null;if(instances.length)realType=instances[solIndex%instances.length].GetObjectClass();else if(sol.HasAnyElseInstances()){const elseInstances=sol.GetElseInstances();realType=elseInstances[solIndex%elseInstances.length].GetObjectClass()}else if(familyType.GetInstanceCount()>0){const familyInstances=familyType.GetInstances();realType=familyInstances[solIndex%\nfamilyInstances.length].GetObjectClass()}else return 0;return this._instVarIndex+realType.GetFamilyInstanceVariableOffset(familyType.GetFamilyIndex())}}\nclass EventVarParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._eventVarSid=data[1];this._eventVar=null;this.Get=this.GetEventVariable;this._isConstant=true}_PostInit(){this._eventVar=this.GetRuntime().GetEventSheetManager().GetEventVariableBySID(this._eventVarSid)}GetEventVariable(){return this._eventVar}}\nclass FunctionParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._functionBlockName=data[1];this._functionBlock=null;this.Get=this.GetFunction;this._isConstant=true}_PostInit(){this._functionBlock=this.GetRuntime().GetEventSheetManager().GetFunctionBlockByName(this._functionBlockName);this._functionBlockName=null}GetFunction(){return this._functionBlock}}\nclass VariadicParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._subParams=[];this._variadicRet=[];this._isConstant=true;for(let i=1,len=data.length;i<len;++i){const subParam=C3.Parameter.Create(this._owner,data[i],0);this._subParams.push(subParam);this._variadicRet.push(0);if(!subParam.IsConstant())this._isConstant=false}this.Get=this.GetVariadic}_PostInit(){for(const subParam of this._subParams)subParam._PostInit()}GetVariadic(){const subParams=this._subParams;\nconst variadicRet=this._variadicRet;for(let i=0,len=subParams.length;i<len;++i)variadicRet[i]=subParams[i].Get(0);return variadicRet}}class EaseParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._easeIndex=data[1];this.Get=this.GetEase;this._isConstant=true}GetEase(){return this._easeIndex}}\nclass TilemapBrushParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._brushIndex=data[1];this.Get=this.GetTilemapBrush;this._isConstant=true}GetTilemapBrush(){return this._brushIndex}}class TemplateExpressionParameter extends ExpressionParameter{constructor(owner,type,index,data){super(owner,type,index,data);this.Get=this.GetTemplateName;this._isConstant=false}GetTemplateName(){return this._expressionFunc()}};\n\n}\n\n// events/condition.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;function EvalParams(parameters,results){for(let i=0,len=parameters.length;i<len;++i)results[i]=parameters[i].Get(0)}const EMPTY_PARAMS_ARRAY=[];const noop=function(){};\nC3.Condition=class Condition extends C3.DefendedBase{constructor(eventBlock,data,index){super();this._eventBlock=eventBlock;this._runtime=eventBlock.GetRuntime();this._index=index;this._func=this._runtime.GetObjectReference(data[1]);this._isTrigger=data[3]>0;this._isFastTrigger=data[3]===2;this._isLooping=!!data[4];this._isInverted=!!data[5];this._isStatic=!!data[6];this._sid=data[7];this._isInOrBlock=this._eventBlock.IsOrBlock();this._objectClass=null;this._behaviorType=null;this._behaviorIndex=\n-1;this._systemPlugin=null;this.Run=noop;this.DebugRun=noop;this._parameters=[];this._results=[];this._anyParamVariesPerInstance=false;this._savedData=null;this._unsavedData=null;this._debugData=this._runtime.IsDebug()?{isBreakpoint:data[8][0],canDebug:data[8][1]}:null;if(data[0]===-1)this._systemPlugin=this._runtime.GetSystemPlugin();else{this._objectClass=this._runtime.GetObjectClassByIndex(data[0]);if(data[2]){this._behaviorType=this._objectClass.GetBehaviorTypeByName(data[2]);this._behaviorIndex=\nthis._objectClass.GetBehaviorIndexByName(data[2])}if(this._eventBlock.GetParent())this._eventBlock.GetParent().SetSolWriterAfterCnds()}if(data.length===10){let paramData=data[9];for(let data of paramData){this._parameters.push(C3.Parameter.Create(this,data,this._parameters.length));this._results.push(0)}}if(this._parameters.length===0){this._parameters=EMPTY_PARAMS_ARRAY;this._results=EMPTY_PARAMS_ARRAY}this._eventBlock.GetEventSheetManager()._RegisterCondition(this)}static Create(eventBlock,data,\nindex){return C3.New(C3.Condition,eventBlock,data,index)}_PostInit(){for(const param of this._parameters){param._PostInit();if(param.VariesPerInstance())this._anyParamVariesPerInstance=true}if(this._isFastTrigger){this.Run=this._RunFastTrigger;this.DebugRun=this._DebugRunFastTrigger}else if(this._systemPlugin){this._SetSystemRunMethod();this.DebugRun=this._DebugRunSystem}else if(this._objectClass.GetPlugin().IsSingleGlobal()){this._SetSingleGlobalRunMethod();this.DebugRun=this._DebugRunSingleGlobal}else if(this._isStatic){this.Run=\nthis._RunStatic;this.DebugRun=this._DebugRunStatic}else{this.Run=this._RunObject;this.DebugRun=this._DebugRunObject}}_SetSystemRunMethod(){const plugin=this._systemPlugin;const bindThis=this._systemPlugin;this._SetRunMethodForBoundFunc(plugin,bindThis,this._RunSystem)}_SetSingleGlobalRunMethod(){const plugin=this._objectClass.GetPlugin();const bindThis=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();this._SetRunMethodForBoundFunc(plugin,bindThis,this._RunSingleGlobal)}_SetRunMethodForBoundFunc(plugin,\nbindThis,fallbackMethod){const func=this._func;const isInverted=this._isInverted;const parameters=this._parameters;if(parameters.length===0){const boundFunc=plugin._GetBoundACEMethod(func,bindThis);if(isInverted)this.Run=function RunSingleCnd_0param(){return C3.xor(boundFunc(),isInverted)};else this.Run=boundFunc}else if(parameters.length===1){const param0=parameters[0];if(!isInverted&&param0.IsConstant())this.Run=plugin._GetBoundACEMethod_1param(func,bindThis,param0.Get(0));else{const boundFunc=\nplugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleCnd_1param(){return C3.xor(boundFunc(param0.Get(0)),isInverted)}}}else if(parameters.length===2){const param0=parameters[0];const param1=parameters[1];if(!isInverted&&param0.IsConstant()&&param1.IsConstant())this.Run=plugin._GetBoundACEMethod_2params(func,bindThis,param0.Get(0),param1.Get(0));else{const boundFunc=plugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleCnd_2params(){return C3.xor(boundFunc(param0.Get(0),\nparam1.Get(0)),isInverted)}}}else if(parameters.length===3){const param0=parameters[0];const param1=parameters[1];const param2=parameters[2];if(!isInverted&&param0.IsConstant()&&param1.IsConstant()&&param2.IsConstant())this.Run=plugin._GetBoundACEMethod_3params(func,bindThis,param0.Get(0),param1.Get(0),param2.Get(0));else{const boundFunc=plugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleCnd_3params(){return C3.xor(boundFunc(param0.Get(0),param1.Get(0),param2.Get(0)),isInverted)}}}else this.Run=\nfallbackMethod}GetSID(){return this._sid}_GetFunc(){return this._func}GetObjectClass(){return this._objectClass}GetBehaviorType(){return this._behaviorType}GetEventBlock(){return this._eventBlock}GetRuntime(){return this._runtime}GetIndex(){return this._index}GetDebugIndex(){return this.GetIndex()}IsTrigger(){return this._isTrigger}IsFastTrigger(){return this._isFastTrigger}IsInverted(){return this._isInverted}IsLooping(){return this._isLooping}IsStatic(){return this._isStatic}IsBreakpoint(){return this._debugData.isBreakpoint}IsSystemCondition(){return!!this._systemPlugin}GetFirstObjectParameterObjectClass(){for(const p of this._parameters)if(p.IsObjectParameter())return p.GetObjectClass();\nreturn null}_SetBreakpoint(b){this._debugData.isBreakpoint=!!b;this._eventBlock._UpdateCanRunFastRecursive()}_DebugReturnsGenerator(){return this._debugData.canDebug}DebugCanRunFast(){return!this.IsBreakpoint()&&!this._runtime.DebugBreakNext()&&!this._DebugReturnsGenerator()}GetSavedDataMap(){if(!this._savedData)this._savedData=new Map;return this._savedData}GetUnsavedDataMap(){if(!this._unsavedData)this._unsavedData=new Map;return this._unsavedData}_RunSystem(){const results=this._results;EvalParams(this._parameters,\nresults);return C3.xor(this._func.apply(this._systemPlugin,results),this._isInverted)}*_DebugRunSystem(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;EvalParams(this._parameters,results);let ret=this._func.apply(this._systemPlugin,results);if(C3.IsIterator(ret))ret=yield*ret;return C3.xor(ret,this._isInverted)}else return this.Run()}_RunSingleGlobal(){const results=this._results;EvalParams(this._parameters,results);\nconst inst=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();return C3.xor(this._func.apply(inst,results),this._isInverted)}*_DebugRunSingleGlobal(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;EvalParams(this._parameters,results);const inst=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();let ret=this._func.apply(inst,results);if(C3.IsIterator(ret))ret=yield*ret;return C3.xor(ret,this._isInverted)}else return this.Run()}_RunFastTrigger(){return true}*_DebugRunFastTrigger(){if(this.IsBreakpoint()||\nthis._runtime.DebugBreakNext())yield this;return true}_RunStatic(){const results=this._results;EvalParams(this._parameters,results);const ret=this._func.apply(this._behaviorType||this._objectClass,results);this._objectClass.ApplySolToContainer();return ret}*_DebugRunStatic(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;EvalParams(this._parameters,results);let ret=this._func.apply(this._behaviorType||this._objectClass,\nresults);if(C3.IsIterator(ret))ret=yield*ret;this._objectClass.ApplySolToContainer();return ret}else return this.Run()}_RunObject(){const parameters=this._parameters;const results=this._results;const sol=this._objectClass.GetCurrentSol();for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(!p.VariesPerInstance())results[i]=p.Get(0)}if(sol.IsSelectAll())return this._RunObject_FirstFilter(sol);else return this._RunObject_NextFilter(sol)}*_DebugRunObject(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;\nreturn this._RunObject()}_EvaluateVaryingParameters(solIndex){const parameters=this._parameters;const results=this._results;for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(p.VariesPerInstance())results[i]=p.Get(solIndex)}}_RunObject_FirstFilter(sol){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const behaviorIndex=this._behaviorIndex;const isBehavior=behaviorIndex>=0;const allInstances=objectClass.GetInstances();\nconst paramsVary=this._anyParamVariesPerInstance;const results=this._results;const func=this._func;const isInverted=this._isInverted;const isInOrBlock=this._isInOrBlock&&!this._isTrigger;sol.ClearArrays();for(let i=0,len=allInstances.length;i<len;++i){const inst=allInstances[i];if(paramsVary)this._EvaluateVaryingParameters(i);let ret;if(isBehavior){const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;ret=func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),\nresults)}else ret=func.apply(inst.GetSdkInstance(),results);if(C3.xor(ret,isInverted))sol._PushInstance(inst);else if(isInOrBlock)sol._PushElseInstance(inst)}objectClass.FinishCondition(true);sol._SetSelectAll(false);objectClass.ApplySolToContainer();return sol.HasAnyInstances()}_RunObject_NextFilter(sol){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const isInContainer=objectClass.IsInContainer();const behaviorIndex=this._behaviorIndex;\nconst isBehavior=behaviorIndex>=0;const paramsVary=this._anyParamVariesPerInstance;const results=this._results;const func=this._func;const isInverted=this._isInverted;const isInOrBlock=this._isInOrBlock&&!this._isTrigger;const solInstances=sol._GetOwnInstances();const solElseInstances=sol._GetOwnElseInstances();const isUsingElseInstances=isInOrBlock&&!this._eventBlock.IsFirstConditionOfType(this);const arr=isUsingElseInstances?solElseInstances:solInstances;let k=0;let isAnyTrue=false;for(let i=0,\nlen=arr.length;i<len;++i){const inst=arr[i];if(paramsVary)this._EvaluateVaryingParameters(i);let ret;if(isBehavior){const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;ret=func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results)}else ret=func.apply(inst.GetSdkInstance(),results);if(C3.xor(ret,isInverted)){isAnyTrue=true;if(isUsingElseInstances){solInstances.push(inst);if(isInContainer)inst._PushSiblingsToSolInstances()}else{arr[k]=inst;\nif(isInContainer)inst._SetSiblingsToSolInstancesIndex(k);++k}}else if(isUsingElseInstances){arr[k]=inst;if(isInContainer)inst._SetSiblingsToSolElseInstancesIndex(k);++k}else if(isInOrBlock){solElseInstances.push(inst);if(isInContainer)inst._PushSiblingsToSolElseInstances()}}C3.truncateArray(arr,k);if(isInContainer)objectClass._TruncateContainerSols(isUsingElseInstances,k);const pickInFinish=isAnyTrue;if(isUsingElseInstances&&!isAnyTrue)isAnyTrue=this._OrBlockCheckInstances(solInstances);objectClass.FinishCondition(pickInFinish||\nisInOrBlock);return isInOrBlock?isAnyTrue:sol.HasAnyInstances()}_OrBlockCheckInstances(solInstances){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const paramsVary=this._anyParamVariesPerInstance;const behaviorIndex=this._behaviorIndex;const isBehavior=behaviorIndex>=0;const results=this._results;const func=this._func;const isInverted=this._isInverted;for(let i=0,len=solInstances.length;i<len;++i){const inst=solInstances[i];\nif(paramsVary)this._EvaluateVaryingParameters(i);let ret;if(isBehavior){const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;ret=func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results)}else ret=func.apply(inst.GetSdkInstance(),results);if(C3.xor(ret,isInverted))return true}return false}ReevaluateParameter(paramIndex,solIndex){return this._parameters[paramIndex].Get(solIndex)}GetFastTriggerValue(){const parameters=this._parameters;if(!parameters.length)throw new Error(\"no parameters\");\nreturn parameters[0]._GetFastTriggerValue()}_SaveToJson(){if(!this._savedData||!this._savedData.size)return null;const ex={};for(const [k,v]of this._savedData.entries()){let saveVal=v;if(k===\"collmemory\")saveVal=[...v.entries()].map(arr=>[arr[0].GetUID(),arr[1].GetUID(),arr[2]]);ex[k]=saveVal}return{\"ex\":ex}}_LoadFromJson(o){if(this._savedData){this._savedData.clear();this._savedData=null}if(!o)return;const runtime=this._runtime;const ex=o[\"ex\"];if(ex){const map=this.GetSavedDataMap();map.clear();\nfor(const [k,v]of Object.entries(ex)){let loadVal=v;if(k===\"collmemory\")loadVal=C3.New(C3.PairMap,v.map(arr=>[runtime.GetInstanceByUID(arr[0]),runtime.GetInstanceByUID(arr[1]),arr[2]]).filter(arr=>arr[0]&&arr[1]));map.set(k,loadVal)}}}};\n\n}\n\n// events/action.js\n{\n'use strict';const C3=self.C3;const assert=self.assert;function EvalParams(parameters,results){for(let i=0,len=parameters.length;i<len;++i)results[i]=parameters[i].Get(0)}const EMPTY_PARAMS_ARRAY=[];const noop=function(){};const noopGenerator=function*(){};const FLAG_CANPICKANYOBJECTCLASS=1;const FLAG_COPYPICKED=2;const FLAG_CUSTOM_ACE=4;\nC3.Action=class Action extends C3.DefendedBase{constructor(eventBlock,data,index){super();this._eventBlock=eventBlock;const runtime=eventBlock.GetRuntime();this._runtime=runtime;this._index=index;this._sid=data.length>=4?data[3]:-1;this._actionType=data.length>=5?data[4]&255:0;this._flags=data.length>=5?data[4]>>8:0;this._func=null;this._objectClass=null;this._behaviorType=null;this._behaviorIndex=-1;this._systemPlugin=null;this._callFunctionName=\"\";this._callCustomAceObjectClass=null;this._callEventBlock=\nnull;this.Run=noop;this.DebugRun=noop;this._parameters=[];this._results=[];this._anyParamVariesPerInstance=false;this._savedData=null;this._unsavedData=null;const isScript=data[0]===-3;const debugInfo=isScript?data[2]:data[5];this._debugData=runtime.IsDebug()||isScript?{isBreakpoint:debugInfo[0],canDebug:debugInfo[1],index:debugInfo[2]}:null;if(data[0]===-1){this._systemPlugin=runtime.GetSystemPlugin();this._func=runtime.GetObjectReference(data[1])}else if(data[0]===-2)this._callFunctionName=data[1];\nelse if(isScript){const userMethod=runtime.GetObjectReference(data[1]);this._func=userMethod;this.Run=this.RunUserScript;this.DebugRun=this.DebugRunUserScript;this._actionType=1}else{this._objectClass=runtime.GetObjectClassByIndex(data[0]);if(this._flags&FLAG_CUSTOM_ACE){this._callFunctionName=data[1];this._callCustomAceObjectClass=runtime.GetObjectClassByIndex(data[2])}else{if(data[2]){this._behaviorType=this._objectClass.GetBehaviorTypeByName(data[2]);this._behaviorIndex=this._objectClass.GetBehaviorIndexByName(data[2])}this._func=\nruntime.GetObjectReference(data[1])}}if(data.length===7){const paramData=data[6];for(const data of paramData){this._parameters.push(C3.Parameter.Create(this,data,this._parameters.length));this._results.push(0)}}if(this._parameters.length===0){this._parameters=EMPTY_PARAMS_ARRAY;this._results=EMPTY_PARAMS_ARRAY}if(this.CanPickAnyObjectClass()){this._eventBlock.SetAllSolModifiers();this._eventBlock.SetSolWriterAfterCnds()}this._eventBlock.GetEventSheetManager()._RegisterAction(this)}static Create(eventBlock,\ndata,index){return C3.New(C3.Action,eventBlock,data,index)}_PostInit(){for(const param of this._parameters){param._PostInit();if(param.VariesPerInstance())this._anyParamVariesPerInstance=true}if(this._systemPlugin){this._SetSystemRunMethod();this.DebugRun=this._DebugRunSystem}else if(this._callFunctionName){if(this._flags&FLAG_CUSTOM_ACE)this._SetCallCustomActionRunMethod();else this._SetCallFunctionRunMethod();this._callFunctionName=\"\";this._callCustomAceObjectClass=null}else if(this.Run===this.RunUserScript){const userMethod=\nthis._func;const localVars=this._runtime.GetEventSheetManager()._GetLocalVariablesScriptInterface(this._eventBlock);this._func=userMethod.bind(null,this._runtime.GetIRuntime(),localVars)}else if(this._behaviorType)if(this.IsAsync()){this.Run=this._RunBehavior_Async;this.DebugRun=this._DebugRunBehavior_Async}else{this.Run=this._RunBehavior;this.DebugRun=this._DebugRunBehavior}else if(this._objectClass.GetPlugin().IsSingleGlobal()){this._SetSingleGlobalRunMethod();this.DebugRun=this._DebugRunSingleGlobal}else if(this.IsAsync()){this.Run=\nthis._RunObject_Async;this.DebugRun=this._DebugRunObject_Async}else if(this.CallBeforeAfterHooks()){this.Run=this._RunObject_BeforeAfterHooks;this.DebugRun=this._DebugRunObject_BeforeAfterHooks}else if(!this._parameters.length){this.Run=this._RunObject_ParamsConst;this.DebugRun=this._DebugRunObject_ParamsConst}else if(this._parameters.every(p=>p.VariesPerInstance())){this.Run=this._RunObject_AllParamsVary;this.DebugRun=this._DebugRunObject_AllParamsVary}else if(this._anyParamVariesPerInstance){this.Run=\nthis._RunObject_SomeParamsVary;this.DebugRun=this._DebugRunObject_SomeParamsVary}else if(this._parameters.every(p=>p.IsConstant())){EvalParams(this._parameters,this._results);this.Run=this._RunObject_ParamsConst;this.DebugRun=this._DebugRunObject_ParamsConst}else{this.Run=this._RunObject_ParamsDontVary;this.DebugRun=this._DebugRunObject_ParamsDontVary}}_SetSystemRunMethod(){const plugin=this._systemPlugin;const bindThis=this._systemPlugin;this._SetRunMethodForBoundFunc(plugin,bindThis,this._RunSystem)}_SetSingleGlobalRunMethod(){const plugin=\nthis._objectClass.GetPlugin();const bindThis=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();this._SetRunMethodForBoundFunc(plugin,bindThis,this._RunSingleGlobal)}_SetCallFunctionRunMethod(){const eventSheetManager=this._eventBlock.GetEventSheetManager();const functionBlock=eventSheetManager.GetFunctionBlockByName(this._callFunctionName);if(functionBlock.IsEnabled()){const isCopyPicked=(this._flags&FLAG_COPYPICKED)!==0;this._callEventBlock=functionBlock.GetEventBlock();let combinedSolModifiers=\n[...(new Set([...this._eventBlock.GetSolModifiersIncludingParents(),...this._callEventBlock.GetSolModifiersIncludingParents()]))];combinedSolModifiers=eventSheetManager._DeduplicateSolModifierList(combinedSolModifiers);const pickInfo=!functionBlock.IsCopyPicked()&&this._HasCopyPickedParent()?{pushCleanSolDynamic:true}:null;this.Run=C3.EventBlock.prototype.RunAsFunctionCall.bind(this._callEventBlock,combinedSolModifiers,this._parameters,isCopyPicked,pickInfo);if(this._runtime.IsDebug()){const thiz=\nthis;this.DebugRun=function*DebugRunCallFunction(){if(thiz.IsBreakpoint()||thiz._runtime.DebugBreakNext())yield thiz;const ret=yield*thiz._callEventBlock.DebugRunAsFunctionCall(combinedSolModifiers,thiz._parameters,isCopyPicked,pickInfo);return ret}}else this.DebugRun=noopGenerator}else{this.Run=noop;this.DebugRun=noopGenerator}}_SetCallCustomActionRunMethod(){const eventSheetManager=this._eventBlock.GetEventSheetManager();const customAceBlock=eventSheetManager.GetCustomActionBlockByName(this._callCustomAceObjectClass,\nthis._callFunctionName);if(customAceBlock.IsEnabled()){const isCopyPicked=(this._flags&FLAG_COPYPICKED)!==0;this._callEventBlock=customAceBlock.GetEventBlock();let combinedSolModifiers=[...(new Set([...this._eventBlock.GetSolModifiersIncludingParents(),...this._callEventBlock.GetSolModifiersIncludingParents(),this._objectClass,customAceBlock.GetObjectClass()]))];combinedSolModifiers=eventSheetManager._DeduplicateSolModifierList(combinedSolModifiers);const isOTtoOT=!this._objectClass.IsFamily()&&!customAceBlock.GetObjectClass().IsFamily();\nconst isOTtoFamily=!this._objectClass.IsFamily()&&customAceBlock.GetObjectClass().IsFamily();const isFamilyToFamily=this._objectClass.IsFamily();let pickInfo=null;if(!customAceBlock.IsCopyPicked()&&this._HasCopyPickedParent()){pickInfo=pickInfo||{};pickInfo.pushCleanSolDynamic=true}if(isOTtoFamily||!isCopyPicked){pickInfo=pickInfo||{};pickInfo.copyFromObjectClass=this._objectClass;pickInfo.copyToObjectClass=customAceBlock.GetObjectClass()}if(isOTtoOT||isOTtoFamily||isFamilyToFamily&&!customAceBlock.HasCustomACEOverrides())this.Run=\nC3.EventBlock.prototype.RunAsFunctionCall.bind(this._callEventBlock,combinedSolModifiers,this._parameters,isCopyPicked,pickInfo);else if(isFamilyToFamily)this.Run=C3.FunctionBlock.prototype.RunAsFamilyCustomActionWithOverrides.bind(customAceBlock,combinedSolModifiers,this._parameters);else;if(this._runtime.IsDebug()){const thiz=this;if(isOTtoOT||isOTtoFamily||isFamilyToFamily&&!customAceBlock.HasCustomACEOverrides())this.DebugRun=function*DebugRunCustomAction(){if(thiz.IsBreakpoint()||thiz._runtime.DebugBreakNext())yield thiz;\nconst ret=yield*thiz._callEventBlock.DebugRunAsFunctionCall(combinedSolModifiers,thiz._parameters,isCopyPicked,pickInfo);return ret};else if(isFamilyToFamily)this.DebugRun=function*DebugRunCustomAction(){if(thiz.IsBreakpoint()||thiz._runtime.DebugBreakNext())yield thiz;const ret=yield*customAceBlock.DebugRunAsFamilyCustomActionWithOverrides(combinedSolModifiers,thiz._parameters);return ret}}else this.DebugRun=noopGenerator}else{this.Run=noop;this.DebugRun=noopGenerator}}_SetRunMethodForBoundFunc(plugin,\nbindThis,fallbackMethod){const func=this._func;const parameters=this._parameters;if(parameters.length===0)this.Run=plugin._GetBoundACEMethod(func,bindThis);else if(parameters.length===1){const param0=parameters[0];if(param0.IsConstant())this.Run=plugin._GetBoundACEMethod_1param(func,bindThis,param0.Get(0));else{const boundFunc=plugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleAct_1param(){return boundFunc(param0.Get(0))}}}else if(parameters.length===2){const param0=parameters[0];\nconst param1=parameters[1];if(param0.IsConstant()&&param1.IsConstant())this.Run=plugin._GetBoundACEMethod_2params(func,bindThis,param0.Get(0),param1.Get(0));else{const boundFunc=plugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleAct_2params(){return boundFunc(param0.Get(0),param1.Get(0))}}}else if(parameters.length===3){const param0=parameters[0];const param1=parameters[1];const param2=parameters[2];if(param0.IsConstant()&&param1.IsConstant()&&param2.IsConstant())this.Run=plugin._GetBoundACEMethod_3params(func,\nbindThis,param0.Get(0),param1.Get(0),param2.Get(0));else{const boundFunc=plugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleAct_3params(){return boundFunc(param0.Get(0),param1.Get(0),param2.Get(0))}}}else this.Run=fallbackMethod}GetSID(){return this._sid}IsAsync(){return this._actionType===1}CanBailOut(){return this._actionType===2}CallBeforeAfterHooks(){return this._actionType===3}CanPickAnyObjectClass(){return(this._flags&FLAG_CANPICKANYOBJECTCLASS)!==0}HasReturnType(){return this.IsAsync()||\nthis.CanBailOut()}GetObjectClass(){return this._objectClass}GetEventBlock(){return this._eventBlock}_HasCopyPickedParent(){let parent=this._eventBlock;do{if(parent instanceof C3.FunctionBlock&&parent.IsCopyPicked())return true;parent=parent.GetScopeParent()}while(parent);return false}GetRuntime(){return this._runtime}GetIndex(){return this._index}GetDebugIndex(){return this._debugData.index}IsBreakpoint(){return this._debugData.isBreakpoint}_SetBreakpoint(b){this._debugData.isBreakpoint=!!b;this._eventBlock._UpdateCanRunFastRecursive()}_DebugReturnsGenerator(){return this._debugData.canDebug}DebugCanRunFast(){return!this.IsBreakpoint()&&\n!this._runtime.DebugBreakNext()&&!this._DebugReturnsGenerator()}GetSavedDataMap(){if(!this._savedData)this._savedData=new Map;return this._savedData}GetUnsavedDataMap(){if(!this._unsavedData)this._unsavedData=new Map;return this._unsavedData}_RunSystem(){const results=this._results;EvalParams(this._parameters,results);return this._func.apply(this._systemPlugin,results)}*_DebugRunSystem(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=\nthis._results;EvalParams(this._parameters,results);const ret=yield*this._func.apply(this._systemPlugin,results);return ret}else return this.Run()}_RunSingleGlobal(){const results=this._results;EvalParams(this._parameters,results);return this._func.apply(this._objectClass.GetSingleGlobalInstance().GetSdkInstance(),results)}*_DebugRunSingleGlobal(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;EvalParams(this._parameters,\nresults);const ret=yield*this._func.apply(this._objectClass.GetSingleGlobalInstance().GetSdkInstance(),results);return ret}else return this.Run()}_RunObject_ParamsConst(){const results=this._results;const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=instances.length;i<len;++i)this._func.apply(instances[i].GetSdkInstance(),results)}*_DebugRunObject_ParamsConst(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=\nthis._results;const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=instances.length;i<len;++i)yield*this._func.apply(instances[i].GetSdkInstance(),results)}else this._RunObject_ParamsConst()}_RunObject_ParamsDontVary(){const results=this._results;EvalParams(this._parameters,results);const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=instances.length;i<len;++i)this._func.apply(instances[i].GetSdkInstance(),results)}*_DebugRunObject_ParamsDontVary(){if(this.IsBreakpoint()||\nthis._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;EvalParams(this._parameters,results);const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=instances.length;i<len;++i)yield*this._func.apply(instances[i].GetSdkInstance(),results)}else this._RunObject_ParamsDontVary()}_RunObject_AllParamsVary(){const parameters=this._parameters;const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();\nfor(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);func.apply(inst.GetSdkInstance(),results)}}*_DebugRunObject_AllParamsVary(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const parameters=this._parameters;const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=instances.length;i<\nlen;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);yield*func.apply(inst.GetSdkInstance(),results)}}else this._RunObject_AllParamsVary()}_RunObject_SomeParamsVary(){const parameters=this._parameters;const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(!p.VariesPerInstance())results[i]=p.Get(0)}for(let i=0,len=\ninstances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j){const p=parameters[j];if(p.VariesPerInstance())results[j]=p.Get(i)}func.apply(inst.GetSdkInstance(),results)}}*_DebugRunObject_SomeParamsVary(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const parameters=this._parameters;const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=\n0,len=parameters.length;i<len;++i){const p=parameters[i];if(!p.VariesPerInstance())results[i]=p.Get(0)}for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j){const p=parameters[j];if(p.VariesPerInstance())results[j]=p.Get(i)}yield*func.apply(inst.GetSdkInstance(),results)}}else this._RunObject_SomeParamsVary()}_RunObject_BeforeAfterHooks(){const parameters=this._parameters;const results=this._results;const func=this._func;const objectClass=\nthis._objectClass;const sdkType=objectClass.GetSdkType();const instances=objectClass.GetCurrentSol().GetInstances();sdkType.BeforeRunAction(func);for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);func.apply(inst.GetSdkInstance(),results)}sdkType.AfterRunAction(func)}*_DebugRunObject_BeforeAfterHooks(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const parameters=\nthis._parameters;const results=this._results;const func=this._func;const objectClass=this._objectClass;const sdkType=objectClass.GetSdkType();const instances=objectClass.GetCurrentSol().GetInstances();sdkType.BeforeRunAction(func);for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);yield*func.apply(inst.GetSdkInstance(),results)}sdkType.AfterRunAction(func)}else this._RunObject_BeforeAfterHooks()}_RunBehavior(){const objectClass=\nthis._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const parameters=this._parameters;const paramsVary=this._anyParamVariesPerInstance;const results=this._results;const func=this._func;const behaviorIndex=this._behaviorIndex;const instances=objectClass.GetCurrentSol().GetInstances();for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(!p.VariesPerInstance())results[i]=p.Get(0)}for(let i=0,len=instances.length;i<len;++i){const inst=\ninstances[i];if(paramsVary)for(let j=0,lenj=parameters.length;j<lenj;++j){const p=parameters[j];if(p.VariesPerInstance())results[j]=p.Get(i)}const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results)}}*_DebugRunBehavior(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();\nconst familyIndex=objectClass.GetFamilyIndex();const parameters=this._parameters;const paramsVary=this._anyParamVariesPerInstance;const results=this._results;const func=this._func;const behaviorIndex=this._behaviorIndex;const instances=objectClass.GetCurrentSol().GetInstances();for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(!p.VariesPerInstance())results[i]=p.Get(0)}for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];if(paramsVary)for(let j=0,lenj=parameters.length;j<\nlenj;++j){const p=parameters[j];if(p.VariesPerInstance())results[j]=p.Get(i)}const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;yield*func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results)}}else this._RunBehavior()}_RunObject_Async(){const parameters=this._parameters;const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();const promises=[];for(let i=0,len=instances.length;i<len;++i){const inst=\ninstances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);promises.push(func.apply(inst.GetSdkInstance(),results))}return Promise.all(promises)}*_DebugRunObject_Async(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const parameters=this._parameters;const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();const promises=[];for(let i=0,len=instances.length;i<\nlen;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);promises.push(yield*func.apply(inst.GetSdkInstance(),results))}return Promise.all(promises)}else return this._RunObject_Async()}_RunBehavior_Async(){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const parameters=this._parameters;const results=this._results;const func=this._func;const behaviorIndex=this._behaviorIndex;\nconst instances=objectClass.GetCurrentSol().GetInstances();const promises=[];for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;promises.push(func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results))}return Promise.all(promises)}*_DebugRunBehavior_Async(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;\nif(this._DebugReturnsGenerator()){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const parameters=this._parameters;const results=this._results;const func=this._func;const behaviorIndex=this._behaviorIndex;const instances=objectClass.GetCurrentSol().GetInstances();const promises=[];for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);\nconst offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;promises.push(yield*func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results))}return Promise.all(promises)}else return this._RunBehavior_Async()}async RunUserScript(){try{await this._func()}catch(err){console.error(`Unhandled exception running script %c${this._eventBlock.GetEventSheet().GetName()}, event ${this._eventBlock.GetDisplayNumber()}, action ${this.GetDebugIndex()+1}:`,\"font-size: 1.2em; font-weight: bold;\",\nerr);if(self.C3Debugger)self.C3Debugger._SetLastErrorScript(this);if(!C3.EventScript.HadUserScriptException()){console.info(`%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()`,\"font-weight: bold; text-decoration: underline\",\"\",\"font-weight: bold\");C3.EventScript.SetHadUserScriptException()}}}*DebugRunUserScript(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;return this.RunUserScript()}_SaveToJson(){if(!this._savedData||!this._savedData.size)return null;\nreturn{\"ex\":C3.ToSuperJSON(this._savedData)}}_LoadFromJson(o){if(this._savedData){this._savedData.clear();this._savedData=null}if(!o)return;const ex=o[\"ex\"];if(ex)this._savedData=C3.FromSuperJSON(ex)}};\n\n}\n\n// events/commonACEs.js\n{\n'use strict';const C3=self.C3;const tempColor=new C3.Color;function CompareX(cmp,x){return C3.compare(this.GetWorldInfo().GetX(),cmp,x)}function CompareY(cmp,y){return C3.compare(this.GetWorldInfo().GetY(),cmp,y)}function IsOnScreen(){return this.GetWorldInfo().IsInViewport2()}\nfunction IsOutsideLayout(){const wi=this.GetWorldInfo();const layout=wi.GetLayout();const bbox=wi.GetBoundingBox();return bbox.getRight()<0||bbox.getBottom()<0||bbox.getLeft()>layout.GetWidth()||bbox.getTop()>layout.GetHeight()}\nfunction PickDistance(which,x,y){const sol=this.GetCurrentSol();const instances=sol.GetInstances();if(!instances.length)return false;let inst=instances[0];let wi=inst.GetWorldInfo();let pickme=inst;let dist2=C3.distanceSquared(wi.GetX(),wi.GetY(),x,y);for(let i=1,len=instances.length;i<len;++i){inst=instances[i];wi=inst.GetWorldInfo();const d2=C3.distanceSquared(wi.GetX(),wi.GetY(),x,y);if(which===0&&d2<dist2||which===1&&d2>dist2){dist2=d2;pickme=inst}}sol.PickOne(pickme);return true}\nfunction SetX(x){const wi=this.GetWorldInfo();if(wi.GetX()===x)return;wi.SetX(x);wi.SetBboxChanged()}function SetY(y){const wi=this.GetWorldInfo();if(wi.GetY()===y)return;wi.SetY(y);wi.SetBboxChanged()}function SetPos(x,y){const wi=this.GetWorldInfo();if(wi.EqualsXY(x,y))return;wi.SetXY(x,y);wi.SetBboxChanged()}\nfunction SetPosToObject(objectClass,imgPt){if(!objectClass)return;const inst=objectClass.GetPairedInstance(this._inst);if(!inst)return;const [x,y]=inst.GetImagePoint(imgPt);const wi=this.GetWorldInfo();if(wi.GetX()===x&&wi.GetY()===y)return;wi.SetXY(x,y);wi.SetBboxChanged()}function MoveForward(dist){if(dist===0)return;const wi=this.GetWorldInfo();wi.OffsetXY(wi.GetCosAngle()*dist,wi.GetSinAngle()*dist);wi.SetBboxChanged()}\nfunction MoveAtAngle(a,dist){if(dist===0)return;const wi=this.GetWorldInfo();a=C3.toRadians(a);wi.OffsetXY(Math.cos(a)*dist,Math.sin(a)*dist);wi.SetBboxChanged()}function GetX(){return this.GetWorldInfo().GetX()}function GetY(){return this.GetWorldInfo().GetY()}function GetDt(){return this._runtime.GetDt(this._inst)}function CompareWidth(cmp,w){return C3.compare(this.GetWorldInfo().GetWidth(),cmp,w)}function CompareHeight(cmp,h){return C3.compare(this.GetWorldInfo().GetHeight(),cmp,h)}\nfunction SetWidth(w){const wi=this.GetWorldInfo();if(wi.GetWidth()===w)return;wi.SetWidth(w);wi.SetBboxChanged()}function SetHeight(h){const wi=this.GetWorldInfo();if(wi.GetHeight()===h)return;wi.SetHeight(h);wi.SetBboxChanged()}function SetSize(w,h){const wi=this.GetWorldInfo();if(wi.GetWidth()===w&&wi.GetHeight()===h)return;wi.SetSize(w,h);wi.SetBboxChanged()}function GetWidth(){return this.GetWorldInfo().GetWidth()}function GetHeight(){return this.GetWorldInfo().GetHeight()}\nfunction GetBboxLeft(){return this.GetWorldInfo().GetBoundingBox().getLeft()}function GetBboxTop(){return this.GetWorldInfo().GetBoundingBox().getTop()}function GetBboxRight(){return this.GetWorldInfo().GetBoundingBox().getRight()}function GetBboxBottom(){return this.GetWorldInfo().GetBoundingBox().getBottom()}function GetBboxMidX(){const bbox=this.GetWorldInfo().GetBoundingBox();return(bbox.getLeft()+bbox.getRight())/2}\nfunction GetBboxMidY(){const bbox=this.GetWorldInfo().GetBoundingBox();return(bbox.getTop()+bbox.getBottom())/2}function IsAngleWithin(within,a){return C3.angleDiff(this.GetWorldInfo().GetAngle(),C3.toRadians(a))<=C3.toRadians(within)}function IsAngleClockwiseFrom(a){return C3.angleClockwise(this.GetWorldInfo().GetAngle(),C3.toRadians(a))}\nfunction IsBetweenAngles(a,b){const lower=C3.toRadians(a);const upper=C3.toRadians(b);const angle=this.GetWorldInfo().GetAngle();const obtuse=!C3.angleClockwise(upper,lower);if(obtuse)return!(!C3.angleClockwise(angle,lower)&&C3.angleClockwise(angle,upper));else return C3.angleClockwise(angle,lower)&&!C3.angleClockwise(angle,upper)}\nfunction SetAngle(a){const wi=this.GetWorldInfo();const newAngle=C3.clampAngle(C3.toRadians(a));if(isNaN(newAngle)||wi.GetAngle()===newAngle)return;wi.SetAngle(newAngle);wi.SetBboxChanged()}function RotateClockwise(a){if(isNaN(a)||a===0)return;const wi=this.GetWorldInfo();wi.SetAngle(wi.GetAngle()+C3.toRadians(a));wi.SetBboxChanged()}function RotateCounterclockwise(a){if(isNaN(a)||a===0)return;const wi=this.GetWorldInfo();wi.SetAngle(wi.GetAngle()-C3.toRadians(a));wi.SetBboxChanged()}\nfunction RotateTowardAngle(amt,target){const wi=this.GetWorldInfo();const a=wi.GetAngle();const newAngle=C3.angleRotate(a,C3.toRadians(target),C3.toRadians(amt));if(isNaN(newAngle)||a===newAngle)return;wi.SetAngle(newAngle);wi.SetBboxChanged()}\nfunction RotateTowardPosition(amt,x,y){const wi=this.GetWorldInfo();const a=wi.GetAngle();const dx=x-wi.GetX();const dy=y-wi.GetY();const target=Math.atan2(dy,dx);const newAngle=C3.angleRotate(a,target,C3.toRadians(amt));if(isNaN(newAngle)||a===newAngle)return;wi.SetAngle(newAngle);wi.SetBboxChanged()}\nfunction SetTowardPosition(x,y){const wi=this.GetWorldInfo();const a=wi.GetAngle();const dx=x-wi.GetX();const dy=y-wi.GetY();const newAngle=Math.atan2(dy,dx);if(isNaN(newAngle)||a===newAngle)return;wi.SetAngle(newAngle);wi.SetBboxChanged()}function GetAngle(){return C3.toDegrees(this.GetWorldInfo().GetAngle())}function CompareOpacity(cmp,x){return C3.compare(C3.roundToDp(this.GetWorldInfo().GetOpacity()*100,6),cmp,x)}function IsVisible(){return this.GetWorldInfo().IsVisible()}\nfunction SetVisible(v){const wi=this.GetWorldInfo();if(v===2)v=!wi.IsVisible();else v=v!==0;if(wi.IsVisible()===v)return;wi.SetVisible(v);this._runtime.UpdateRender()}function SetOpacity(o){const newOpacity=C3.clamp(o/100,0,1);const wi=this.GetWorldInfo();if(wi.GetTransformWithParentOpacity()){if(wi._GetSceneGraphInfo().GetOwnOpacity()===newOpacity)return}else if(wi.GetOpacity()===newOpacity)return;wi.SetOpacity(newOpacity);this._runtime.UpdateRender()}\nfunction SetDefaultColor(rgb){tempColor.setFromRgbValue(rgb);const wi=this.GetWorldInfo();if(wi.GetUnpremultipliedColor().equalsIgnoringAlpha(tempColor))return;wi.SetUnpremultipliedColor(tempColor);this._runtime.UpdateRender()}function GetColor(){const c=this.GetWorldInfo().GetUnpremultipliedColor();return C3.PackRGBAEx(c.getR(),c.getG(),c.getB(),c.getA())}function GetOpacity(){return C3.roundToDp(this.GetWorldInfo().GetOpacity()*100,6)}\nfunction IsOnLayer(layer){if(!layer)return false;return this.GetWorldInfo().GetLayer()===layer}\nfunction PickTopBottom(which){const sol=this.GetCurrentSol();const instances=sol.GetInstances();if(!instances.length)return false;let inst=instances[0];let pickme=inst;for(let i=1,len=instances.length;i<len;++i){const inst=instances[i];const instWi=inst.GetWorldInfo();const pickmeWi=pickme.GetWorldInfo();const instLayerIndex=instWi.GetLayer().GetIndex();const pickmeLayerIndex=pickmeWi.GetLayer().GetIndex();if(which===0){if(instLayerIndex>pickmeLayerIndex||instLayerIndex===pickmeLayerIndex&&instWi.GetZIndex()>\npickmeWi.GetZIndex())pickme=inst}else if(instLayerIndex<pickmeLayerIndex||instLayerIndex===pickmeLayerIndex&&instWi.GetZIndex()<pickmeWi.GetZIndex())pickme=inst}sol.PickOne(pickme);return true}function CompareZElevation(which,cmp,value){const wi=this.GetWorldInfo();const z=which===0?wi.GetZElevation():wi.GetTotalZElevation();return C3.compare(z,cmp,value)}function MoveToTop(){this.GetWorldInfo().ZOrderMoveToTop()}function MoveToBottom(){this.GetWorldInfo().ZOrderMoveToBottom()}\nfunction MoveToLayer(layerMove){if(!layerMove)return;this.GetWorldInfo().ZOrderMoveToLayer(layerMove)}function ZMoveToObject(where,objectClass){const isAfter=where===0;if(!objectClass)return;const otherInst=objectClass.GetFirstPicked(this.GetInstance());if(!otherInst)return;this.GetWorldInfo().ZOrderMoveAdjacentToInstance(otherInst,isAfter)}function SetZElevation(z){const wi=this.GetWorldInfo();if(wi.GetZElevation()===z)return;wi.SetZElevation(z);this._runtime.UpdateRender()}\nfunction LayerNumber(){return this.GetWorldInfo().GetLayer().GetIndex()}function LayerName(){return this.GetWorldInfo().GetLayer().GetName()}function ZIndex(){return this.GetWorldInfo().GetZIndex()}function ZElevation(){return this.GetWorldInfo().GetZElevation()}function TotalZElevation(){return this.GetWorldInfo().GetTotalZElevation()}\nfunction IsEffectEnabled(effectName){const effectType=this.GetObjectClass().GetEffectList().GetEffectTypeByName(effectName);if(!effectType)return;const effectTypeIndex=effectType.GetIndex();const instFxList=this.GetWorldInfo().GetInstanceEffectList();return instFxList.IsEffectIndexActive(effectTypeIndex)}\nfunction SetEffectEnabled(enabled,effectName){const effectType=this.GetObjectClass().GetEffectList().GetEffectTypeByName(effectName);if(!effectType)return;const effectTypeIndex=effectType.GetIndex();const e=enabled===1;const instFxList=this.GetWorldInfo().GetInstanceEffectList();if(instFxList.IsEffectIndexActive(effectTypeIndex)===e)return;instFxList.SetEffectIndexActive(effectTypeIndex,e);instFxList.UpdateActiveEffects();this._runtime.UpdateRender()}\nfunction SetEffectParam(effectName,paramIndex,value){const effectType=this.GetObjectClass().GetEffectList().GetEffectTypeByName(effectName);if(!effectType)return;paramIndex=Math.floor(paramIndex);const paramType=effectType.GetShaderProgram().GetParameterType(paramIndex);if(!paramType)return;if(paramType===\"color\"){tempColor.setFromRgbValue(value);value=tempColor}else if(paramType===\"percent\")value/=100;const effectTypeIndex=effectType.GetIndex();const instFxList=this.GetWorldInfo().GetInstanceEffectList();\nconst didChange=instFxList.SetEffectParameter(effectTypeIndex,paramIndex,value);if(didChange&&instFxList.IsEffectIndexActive(effectTypeIndex))this._runtime.UpdateRender()}const tempRect=C3.New(C3.Rect);const tempCandidates1=[];const tempCandidates2=[];let needsCollisionFinish=false;let rPickType=null;let rPickFromElseInstances=false;const rToPick=new Set;\nfunction CollMemory_Add(collMemory,a,b,tickCount){const a_uid=a.GetUID();const b_uid=b.GetUID();if(a_uid<b_uid)collMemory.Set(a,b,tickCount);else collMemory.Set(b,a,tickCount)}function CollMemory_Remove(collMemory,a,b){const a_uid=a.GetUID();const b_uid=b.GetUID();if(a_uid<b_uid)collMemory.Delete(a,b);else collMemory.Delete(b,a)}function CollMemory_RemoveInstance(collMemory,inst){collMemory.DeleteEither(inst)}\nfunction CollMemory_Get(collMemory,a,b){const a_uid=a.GetUID();const b_uid=b.GetUID();if(a_uid<b_uid)return collMemory.Get(a,b);else return collMemory.Get(b,a)}\nfunction DoOverlapCondition(sdkInst,rtype,offX,offY){if(!rtype)return false;const inst=sdkInst.GetInstance();const hasOffset=offX!==0||offY!==0;const wi=inst.GetWorldInfo();const runtime=inst.GetRuntime();const collisionEngine=runtime.GetCollisionEngine();const cnd=runtime.GetCurrentCondition();const isOrBlock=cnd.GetEventBlock().IsOrBlock();const ltype=cnd.GetObjectClass();const isInverted=cnd.IsInverted();const rsol=rtype.GetCurrentSol();const isDifferentTypes=ltype!==rtype;rPickType=rtype;needsCollisionFinish=\nisDifferentTypes&&!isInverted;rPickFromElseInstances=false;let rinstances;let oldX=0;let oldY=0;let ret=false;if(rsol.IsSelectAll()){tempRect.copy(wi.GetBoundingBox());tempRect.offset(offX,offY);collisionEngine.GetCollisionCandidates(wi.GetLayer(),rtype,tempRect,tempCandidates2);rinstances=tempCandidates2}else if(isOrBlock)if(runtime.IsCurrentConditionFirst()&&!rsol._GetOwnElseInstances().length&&rsol._GetOwnInstances().length)rinstances=rsol._GetOwnInstances();else{rinstances=rsol._GetOwnElseInstances();\nrPickFromElseInstances=true}else rinstances=rsol._GetOwnInstances();if(hasOffset){oldX=wi.GetX();oldY=wi.GetY();wi.OffsetXY(offX,offY);wi.SetBboxChanged()}for(const rinst of rinstances)if(collisionEngine.TestOverlap(inst,rinst)){ret=true;if(isInverted)break;if(isDifferentTypes)rToPick.add(rinst)}if(hasOffset){wi.SetXY(oldX,oldY);wi.SetBboxChanged()}C3.clearArray(tempCandidates2);return ret}\nfunction FinishCollisionConditionPicking(type){const isOrBlock=type.GetRuntime().GetCurrentEvent().IsOrBlock();const sol=rPickType.GetCurrentSol();const solInstances=sol._GetOwnInstances();const solElseInstances=sol._GetOwnElseInstances();if(sol.IsSelectAll()){sol.SetSetPicked(rToPick);if(isOrBlock){C3.clearArray(solElseInstances);sol.AddElseInstances(rToPick,rPickType.GetInstances())}}else if(isOrBlock)if(rPickFromElseInstances)sol.TransferElseInstancesToOwn(rToPick);else{sol.AddElseInstances(rToPick,\nsolInstances);sol.SetSetPicked(rToPick)}else sol.SetSetPicked(rToPick);rPickType.ApplySolToContainer()}function FinishCollisionCondition(type,doPick){if(!needsCollisionFinish)return;if(doPick)FinishCollisionConditionPicking(type);rToPick.clear();rPickType=null;needsCollisionFinish=false}\nfunction OnCollision(rtype){if(this._runtime.IsDebugging())return DebugOnCollision.call(this,rtype);if(!rtype)return false;const runtime=this._runtime;const collisionEngine=runtime.GetCollisionEngine();const eventSheetManager=runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const cnd=eventSheetManager.GetCurrentCondition();const ltype=cnd.GetObjectClass();const savedData=cnd.GetSavedDataMap();const unsavedData=cnd.GetUnsavedDataMap();const oldFrame=eventStack.GetCurrentStackFrame();\nconst tickCount=runtime.GetTickCount();const lastTickCount=tickCount-1;const currentEvent=oldFrame.GetCurrentEvent();const newFrame=eventStack.Push(currentEvent);let collMemory=savedData.get(\"collmemory\");if(!collMemory){collMemory=C3.New(C3.PairMap);savedData.set(\"collmemory\",collMemory)}if(!unsavedData.get(\"collisionCreatedDestroyCallback\")){unsavedData.set(\"collisionCreatedDestroyCallback\",true);runtime.Dispatcher().addEventListener(\"instancedestroy\",e=>CollMemory_RemoveInstance(collMemory,e.instance))}const lsol=\nltype.GetCurrentSol();const rsol=rtype.GetCurrentSol();const linstances=lsol.GetInstances();let rinstances=null;for(let l=0;l<linstances.length;++l){const linst=linstances[l];if(rsol.IsSelectAll()){collisionEngine.GetCollisionCandidates(linst.GetWorldInfo().GetLayer(),rtype,linst.GetWorldInfo().GetBoundingBox(),tempCandidates1);rinstances=tempCandidates1;collisionEngine.AddRegisteredCollisionCandidates(linst,rtype,rinstances)}else rinstances=rsol.GetInstances();for(let r=0;r<rinstances.length;++r){const rinst=\nrinstances[r];if(collisionEngine.TestOverlap(linst,rinst)||collisionEngine.CheckRegisteredCollision(linst,rinst)){const entry=CollMemory_Get(collMemory,linst,rinst);let entryExists=false;let lastCollTickCount=-2;if(typeof entry===\"number\"){entryExists=true;lastCollTickCount=entry}const shouldRun=!entryExists||lastCollTickCount<lastTickCount;CollMemory_Add(collMemory,linst,rinst,tickCount);if(shouldRun){const solModifiers=currentEvent.GetSolModifiers();eventSheetManager.PushCopySol(solModifiers);const curlsol=\nltype.GetCurrentSol();const currsol=rtype.GetCurrentSol();curlsol._SetSelectAll(false);currsol._SetSelectAll(false);if(ltype===rtype){const solInstances=curlsol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(linst);solInstances.push(rinst);ltype.ApplySolToContainer()}else{const lsolInstances=curlsol._GetOwnInstances();const rsolInstances=currsol._GetOwnInstances();C3.clearArray(lsolInstances);C3.clearArray(rsolInstances);lsolInstances.push(linst);rsolInstances.push(rinst);ltype.ApplySolToContainer();\nrtype.ApplySolToContainer()}currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}}else CollMemory_Remove(collMemory,linst,rinst)}C3.clearArray(tempCandidates1)}eventStack.Pop();return false}\nfunction*DebugOnCollision(rtype){if(!rtype)return false;const runtime=this._runtime;const collisionEngine=runtime.GetCollisionEngine();const eventSheetManager=runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const cnd=eventSheetManager.GetCurrentCondition();const ltype=cnd.GetObjectClass();const savedData=cnd.GetSavedDataMap();const unsavedData=cnd.GetUnsavedDataMap();const oldFrame=eventStack.GetCurrentStackFrame();const tickCount=runtime.GetTickCount();const lastTickCount=\ntickCount-1;const currentEvent=oldFrame.GetCurrentEvent();const newFrame=eventStack.Push(currentEvent);let collMemory=savedData.get(\"collmemory\");if(!collMemory){collMemory=C3.New(C3.PairMap);savedData.set(\"collmemory\",collMemory)}if(!unsavedData.get(\"collisionCreatedDestroyCallback\")){unsavedData.set(\"collisionCreatedDestroyCallback\",true);runtime.Dispatcher().addEventListener(\"instancedestroy\",e=>CollMemory_RemoveInstance(collMemory,e.instance))}const lsol=ltype.GetCurrentSol();const rsol=rtype.GetCurrentSol();\nconst linstances=lsol.GetInstances();let rinstances=null;for(let l=0;l<linstances.length;++l){const linst=linstances[l];if(rsol.IsSelectAll()){collisionEngine.GetCollisionCandidates(linst.GetWorldInfo().GetLayer(),rtype,linst.GetWorldInfo().GetBoundingBox(),tempCandidates1);rinstances=tempCandidates1;collisionEngine.AddRegisteredCollisionCandidates(linst,rtype,rinstances)}else rinstances=rsol.GetInstances();for(let r=0;r<rinstances.length;++r){const rinst=rinstances[r];if(collisionEngine.TestOverlap(linst,\nrinst)||collisionEngine.CheckRegisteredCollision(linst,rinst)){const entry=CollMemory_Get(collMemory,linst,rinst);let entryExists=false;let lastCollTickCount=-2;if(typeof entry===\"number\"){entryExists=true;lastCollTickCount=entry}const shouldRun=!entryExists||lastCollTickCount<lastTickCount;CollMemory_Add(collMemory,linst,rinst,tickCount);if(shouldRun){const solModifiers=currentEvent.GetSolModifiers();eventSheetManager.PushCopySol(solModifiers);const curlsol=ltype.GetCurrentSol();const currsol=rtype.GetCurrentSol();\ncurlsol._SetSelectAll(false);currsol._SetSelectAll(false);if(ltype===rtype){const solInstances=curlsol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(linst);solInstances.push(rinst);ltype.ApplySolToContainer()}else{const lsolInstances=curlsol._GetOwnInstances();const rsolInstances=currsol._GetOwnInstances();C3.clearArray(lsolInstances);C3.clearArray(rsolInstances);lsolInstances.push(linst);rsolInstances.push(rinst);ltype.ApplySolToContainer();rtype.ApplySolToContainer()}yield*currentEvent.DebugRetrigger(oldFrame,\nnewFrame);eventSheetManager.PopSol(solModifiers)}}else CollMemory_Remove(collMemory,linst,rinst)}C3.clearArray(tempCandidates1)}eventStack.Pop();return false}function IsOverlapping(rtype){return DoOverlapCondition(this,rtype,0,0)}function IsOverlappingOffset(rtype,offX,offY){return DoOverlapCondition(this,rtype,offX,offY)}function HasParent(){return this.GetWorldInfo().HasParent()}function HasChildren(){return this.GetWorldInfo().HasChildren()}\nfunction PickParent(parentObjectClass,which){const mySol=this.GetCurrentSol();const myInstances=mySol.GetInstances();if(myInstances.length===0)return false;const parentSol=parentObjectClass.GetCurrentSol();let parentInstances=parentSol.GetInstances();if(parentSol.IsSelectAll()){const parentInstsPendingCreate=[...this._runtime.instancesPendingCreateForObjectClass(parentObjectClass)];if(parentInstsPendingCreate.length>0)parentInstances=parentInstances.concat(parentInstsPendingCreate)}if(parentInstances.length===\n0)return false;const parentInstancesSet=new Set(parentInstances);const pickParents=new Set;for(let i=0,len=myInstances.length;i<len;++i){const myInst=myInstances[i];if(which===1)for(const parentInst of myInst.parents()){if(parentInst.BelongsToObjectClass(parentObjectClass)&&parentInstancesSet.has(parentInst))pickParents.add(parentInst)}else{let parentInst;if(which===0){parentInst=myInst.GetParent();if(parentInst===null)continue}else parentInst=myInst.GetTopParent();if(parentInst.BelongsToObjectClass(parentObjectClass)&&\nparentInstancesSet.has(parentInst))pickParents.add(parentInst)}}if(pickParents.size===0)return false;parentSol.SetSetPicked(pickParents);parentObjectClass.ApplySolToContainer();return true}\nfunction PickChildren(childObjectClass,which){const mySol=this.GetCurrentSol();const myInstances=mySol.GetInstances();if(myInstances.length===0)return false;const childSol=childObjectClass.GetCurrentSol();let childInstances=childSol.GetInstances();if(childSol.IsSelectAll()){const childInstsPendingCreate=[...this._runtime.instancesPendingCreateForObjectClass(childObjectClass)];if(childInstsPendingCreate.length>0)childInstances=childInstances.concat(childInstsPendingCreate)}if(childInstances.length===\n0)return false;const childInstancesSet=new Set(childInstances);const pickChildren=new Set;for(let i=0,len=myInstances.length;i<len;++i){const myInst=myInstances[i];if(which===2&&!myInst.HasChildren()&&myInst.BelongsToObjectClass(childObjectClass)&&childInstancesSet.has(myInst))pickChildren.add(myInst);for(const childInst of which===0?myInst.children():myInst.allChildren()){if(which===2&&childInst.HasChildren())continue;if(childInst.BelongsToObjectClass(childObjectClass)&&childInstancesSet.has(childInst))pickChildren.add(childInst)}}if(pickChildren.size===\n0)return false;childSol.SetSetPicked(pickChildren);childObjectClass.ApplySolToContainer();return true}\nfunction PickNthChild(childObjectClass,index){const mySol=this.GetCurrentSol();const myInstances=mySol.GetInstances();if(myInstances.length===0)return false;const childSol=childObjectClass.GetCurrentSol();let childInstances=childSol.GetInstances();if(childSol.IsSelectAll()){const childInstsPendingCreate=[...this._runtime.instancesPendingCreateForObjectClass(childObjectClass)];if(childInstsPendingCreate.length>0)childInstances=childInstances.concat(childInstsPendingCreate)}if(childInstances.length===\n0)return false;const childInstancesSet=new Set(childInstances);const pickChildren=[];for(let i=0,len=myInstances.length;i<len;++i){const myInst=myInstances[i];const childInst=myInst.GetChildAt(index);if(childInst!==null&&childInst.BelongsToObjectClass(childObjectClass)&&childInstancesSet.has(childInst))pickChildren.push(childInst)}if(pickChildren.length===0)return false;childSol.SetArrayPicked(pickChildren);childObjectClass.ApplySolToContainer();return true}\nfunction CompareChildCount(which,cmp,count){switch(which){case 0:default:{return C3.compare(this._inst.GetChildCount(),cmp,count)}case 1:{return C3.compare(this._inst.GetAllChildCount(),cmp,count)}}}\nfunction AddChild(childObjectClass,transformX,transformY,transformWidth,transformHeight,transformAngle,transformOpacity,transformZElevation,transformVisibility,destroyWithParent){const inst=this._inst;const actObjectClass=this._runtime.GetCurrentAction().GetObjectClass();for(const child of childObjectClass.allCorrespondingInstances(inst,actObjectClass)){if(!child.GetPlugin().SupportsSceneGraph())return;inst.AddChild(child,{transformX,transformY,transformWidth,transformHeight,transformAngle,transformOpacity,\ntransformZElevation,transformVisibility,destroyWithParent})}}function RemoveChild(childObjectClass){const inst=this._inst;const actObjectClass=this._runtime.GetCurrentAction().GetObjectClass();for(const child of childObjectClass.allCorrespondingInstances(inst,actObjectClass))inst.RemoveChild(child)}function RemoveFromParent(){if(!this._inst.HasParent())return;const parent=this._inst.GetParent();parent.RemoveChild(this._inst)}function ChildCount(){return this._inst.GetChildCount()}\nfunction AllChildCount(){return this._inst.GetAllChildCount()}function SetMeshSize(cols,rows){cols=Math.floor(cols);rows=Math.floor(rows);const wi=this.GetWorldInfo();if(cols<2||rows<2||!isFinite(cols)||!isFinite(rows)){wi.ReleaseMesh();wi.SetBboxChanged()}else wi.CreateMesh(cols,rows)}\nfunction SetMeshPoint(col,row,mode,posx,posy,zElevation,texu,texv){const wi=this.GetWorldInfo();const didBboxChange=wi.SetMeshPoint(col,row,{mode:mode===0?\"absolute\":\"relative\",x:posx,y:posy,zElevation,u:texu,v:texv});if(didBboxChange)wi.SetBboxChanged()}function MeshColumns(){const wi=this.GetWorldInfo();return wi.HasMesh()?wi.GetSourceMesh().GetHSize():0}function MeshRows(){const wi=this.GetWorldInfo();return wi.HasMesh()?wi.GetSourceMesh().GetVSize():0}\nfunction SetElementVisible(v){const wi=this.GetWorldInfo();if(v===2)v=!wi.IsVisible();else v=v!==0;if(wi.IsVisible()===v)return;wi.SetVisible(v)}function SetElementCSSStyle(prop,val){this.SetElementCSSStyle(prop,val)}function SetElementAttribute(attribName,value){this.SetElementAttribute(attribName,\"\"+value)}function RemoveElementAttribute(attribName){this.RemoveElementAttribute(attribName)}function SetElementFocus(){this.FocusElement()}function SetElementBlur(){this.BlurElement()}\nfunction IsElementFocused(){return this.IsElementFocused()}function SetElementEnabled(e){this._SetEnabled(e!==0)}function IsElementEnabled(){return this._IsEnabled()}function CompareInstanceVar(iv,cmp,val){return C3.compare(this.GetInstance().GetInstanceVariableValue(iv),cmp,val)}function IsBoolInstanceVarSet(iv){return!!this.GetInstance().GetInstanceVariableValue(iv)}function TemplateName(){return this.GetInstance().GetTemplateName()}\nfunction PickInstVarHiLow(which,iv){const sol=this.GetCurrentSol();const instances=sol.GetInstances();if(!instances.length)return false;const isFamily=this.IsFamily();let pickInst=null;let bestVal=0;for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];const offset=isFamily?inst.GetObjectClass().GetFamilyInstanceVariableOffset(this.GetFamilyIndex()):0;const v=inst.GetInstanceVariableValue(offset+iv);if(pickInst===null||which===0&&v<bestVal||which===1&&v>bestVal){bestVal=v;pickInst=inst}}sol.PickOne(pickInst);\nreturn true}function PickByUID(uid){if(this._runtime.GetCurrentCondition().IsInverted())return PickByUID_Inverted(this,uid);else return PickByUID_Normal(this,uid)}\nfunction PickByUID_Normal(objectClass,uid){const inst=objectClass.GetRuntime().GetInstanceByUID(uid);if(!inst)return false;const sol=objectClass.GetCurrentSol();if(!sol.IsSelectAll()&&!sol._GetOwnInstances().includes(inst))return false;if(objectClass.IsFamily()){if(inst.GetObjectClass().BelongsToFamily(objectClass)){sol.PickOne(inst);objectClass.ApplySolToContainer();return true}}else if(inst.GetObjectClass()===objectClass){sol.PickOne(inst);objectClass.ApplySolToContainer();return true}return false}\nfunction PickByUID_Inverted(objectClass,uid){const sol=objectClass.GetCurrentSol();if(sol.IsSelectAll()){sol._SetSelectAll(false);sol.ClearArrays();const instances=objectClass.GetInstances();for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];if(inst.GetUID()===uid)sol._PushElseInstance(inst);else sol._PushInstance(inst)}objectClass.ApplySolToContainer();return!!sol._GetOwnInstances().length}else{const instances=sol._GetOwnInstances();let j=0;for(let i=0,len=instances.length;i<len;++i){const inst=\ninstances[i];instances[j]=inst;if(inst.GetUID()===uid)sol._PushElseInstance(inst);else++j}C3.truncateArray(instances,j);objectClass.ApplySolToContainer();return!!instances.length}}function Destroy(){this._runtime.DestroyInstance(this._inst)}function OnCreated(){return true}function OnDestroyed(){return true}function SetInstanceVar(iv,value){this.GetInstance().SetInstanceVariableValue(iv,value)}\nfunction AddInstanceVar(iv,value){const instance=this.GetInstance();const lastValue=instance.GetInstanceVariableValue(iv);if(typeof lastValue===\"number\"&&typeof value!==\"number\")value=parseFloat(value);else if(typeof lastValue===\"string\"&&typeof value!==\"string\")value=value.toString();instance.SetInstanceVariableValue(iv,lastValue+value)}\nfunction SubInstanceVar(iv,value){const instance=this.GetInstance();const lastValue=instance.GetInstanceVariableValue(iv);if(typeof lastValue!==\"number\")return;if(typeof value!==\"number\")value=parseFloat(value);instance.SetInstanceVariableValue(iv,lastValue-value)}function SetBoolInstanceVar(iv,value){this.GetInstance().SetInstanceVariableValue(iv,value?1:0)}\nfunction ToggleBoolInstanceVar(iv){const instance=this.GetInstance();instance.SetInstanceVariableValue(iv,instance.GetInstanceVariableValue(iv)===0?1:0)}\nfunction LoadFromJsonString(str){let o;try{o=JSON.parse(str)}catch(err){console.error(\"Failed to load from JSON string: \",err);return}const inst=this.GetInstance();const mode=\"state\";inst.GetRuntime().ClearIntancesNeedingAfterLoad();inst._OnBeforeLoad(mode);inst.LoadFromJson(o,mode);inst.GetRuntime().DoAfterLoad(mode,{ignoreMissingInstances:true,alwaysApplyJson:true})}function AsJSON(){return JSON.stringify(this.GetInstance().SaveToJson(\"state\"))}\nfunction ObjectTypeName(){return this.GetInstance().GetObjectClass().GetName()}function Count(){const expObjectClass=this._runtime.GetCurrentEventStackFrame().GetExpressionObjectClass();let count=expObjectClass.GetInstanceCount();for(const inst of this._runtime.instancesPendingCreateForObjectClass(expObjectClass))++count;return count}function PickedCount(){return this._runtime.GetCurrentEventStackFrame().GetExpressionObjectClass().GetCurrentSol().GetInstances().length}\nfunction GetIID(){return this._inst.GetIID()}function GetUID(){return this._inst.GetUID()}\nC3.AddCommonACEs=function AddCommonACEs(pluginData,pluginCtor){const isSingleGlobal=pluginData[1];const hasPositionACEs=pluginData[3];const hasSizeACEs=pluginData[4];const hasAngleACEs=pluginData[5];const hasAppearanceACEs=pluginData[6];const hasZOrderACEs=pluginData[7];const hasEffectsACEs=pluginData[8];const hasElementACEs=pluginData[10];const hasElementFocusACEs=pluginData[11];const hasElementEnabledACEs=pluginData[12];const hasSceneGraphACEs=pluginData[13];const hasMeshACEs=pluginData[14];const hasCollisionACEs=\npluginData[15];const hasTemplateACEs=pluginData[16];const Cnds=pluginCtor.Cnds;const Acts=pluginCtor.Acts;const Exps=pluginCtor.Exps;if(hasPositionACEs){Cnds.CompareX=CompareX;Cnds.CompareY=CompareY;Cnds.IsOnScreen=IsOnScreen;Cnds.IsOutsideLayout=IsOutsideLayout;Cnds.PickDistance=PickDistance;Acts.SetX=SetX;Acts.SetY=SetY;Acts.SetPos=SetPos;Acts.SetPosToObject=SetPosToObject;Acts.MoveForward=MoveForward;Acts.MoveAtAngle=MoveAtAngle;Exps.X=GetX;Exps.Y=GetY;Exps.dt=GetDt}if(hasSizeACEs){Cnds.CompareWidth=\nCompareWidth;Cnds.CompareHeight=CompareHeight;Acts.SetWidth=SetWidth;Acts.SetHeight=SetHeight;Acts.SetSize=SetSize;Exps.Width=GetWidth;Exps.Height=GetHeight;Exps.BBoxLeft=GetBboxLeft;Exps.BBoxTop=GetBboxTop;Exps.BBoxRight=GetBboxRight;Exps.BBoxBottom=GetBboxBottom;Exps.BBoxMidX=GetBboxMidX;Exps.BBoxMidY=GetBboxMidY}if(hasAngleACEs){Cnds.AngleWithin=IsAngleWithin;Cnds.IsClockwiseFrom=IsAngleClockwiseFrom;Cnds.IsBetweenAngles=IsBetweenAngles;Acts.SetAngle=SetAngle;Acts.RotateClockwise=RotateClockwise;\nActs.RotateCounterclockwise=RotateCounterclockwise;Acts.RotateTowardAngle=RotateTowardAngle;Acts.RotateTowardPosition=RotateTowardPosition;Acts.SetTowardPosition=SetTowardPosition;Exps.Angle=GetAngle}if(hasAppearanceACEs){Cnds.IsVisible=IsVisible;Cnds.CompareOpacity=CompareOpacity;Acts.SetVisible=SetVisible;Acts.SetOpacity=SetOpacity;Acts.SetDefaultColor=SetDefaultColor;Exps.Opacity=GetOpacity;Exps.ColorValue=GetColor}if(hasZOrderACEs){Cnds.IsOnLayer=IsOnLayer;Cnds.PickTopBottom=PickTopBottom;Cnds.CompareZElevation=\nCompareZElevation;Acts.MoveToTop=MoveToTop;Acts.MoveToBottom=MoveToBottom;Acts.MoveToLayer=MoveToLayer;Acts.ZMoveToObject=ZMoveToObject;Acts.SetZElevation=SetZElevation;Exps.LayerNumber=LayerNumber;Exps.LayerName=LayerName;Exps.ZIndex=ZIndex;Exps.ZElevation=ZElevation;Exps.TotalZElevation=TotalZElevation}if(hasEffectsACEs){Cnds.IsEffectEnabled=IsEffectEnabled;Acts.SetEffectEnabled=SetEffectEnabled;Acts.SetEffectParam=SetEffectParam}if(hasSceneGraphACEs){Cnds.HasParent=HasParent;Cnds.HasChildren=HasChildren;\nCnds.PickParent=PickParent;Cnds.PickChildren=PickChildren;Cnds.PickNthChild=PickNthChild;Cnds.CompareChildCount=CompareChildCount;Acts.AddChild=AddChild;Acts.RemoveChild=RemoveChild;Acts.RemoveFromParent=RemoveFromParent;Exps.ChildCount=ChildCount;Exps.AllChildCount=AllChildCount}if(hasMeshACEs){Acts.SetMeshSize=SetMeshSize;Acts.SetMeshPoint=SetMeshPoint;Exps.MeshColumns=MeshColumns;Exps.MeshRows=MeshRows}if(hasElementACEs){Cnds.IsVisible=IsVisible;Acts.SetVisible=SetElementVisible;Acts.SetCSSStyle=\nSetElementCSSStyle;Acts.SetElemAttribute=SetElementAttribute;Acts.RemoveElemAttribute=RemoveElementAttribute}if(hasElementFocusACEs){Cnds.IsFocused=IsElementFocused;Acts.SetFocus=SetElementFocus;Acts.SetBlur=SetElementBlur}if(hasElementEnabledACEs){Cnds.IsEnabled=IsElementEnabled;Acts.SetEnabled=SetElementEnabled}if(hasCollisionACEs){Cnds.OnCollision=OnCollision;Cnds.IsOverlapping=IsOverlapping;Cnds.IsOverlappingOffset=IsOverlappingOffset;pluginCtor.FinishCollisionCondition=FinishCollisionCondition}if(!isSingleGlobal){Cnds.CompareInstanceVar=\nCompareInstanceVar;Cnds.IsBoolInstanceVarSet=IsBoolInstanceVarSet;Cnds.PickInstVarHiLow=PickInstVarHiLow;Cnds.PickByUID=PickByUID;Acts.SetInstanceVar=SetInstanceVar;Acts.AddInstanceVar=AddInstanceVar;Acts.SubInstanceVar=SubInstanceVar;Acts.SetBoolInstanceVar=SetBoolInstanceVar;Acts.ToggleBoolInstanceVar=ToggleBoolInstanceVar;Cnds.OnCreated=OnCreated;Cnds.OnDestroyed=OnDestroyed;Acts.Destroy=Destroy;if(!Acts.LoadFromJsonString)Acts.LoadFromJsonString=LoadFromJsonString;if(!Exps.AsJSON)Exps.AsJSON=\nAsJSON;Exps.Count=Count;Exps.PickedCount=PickedCount;Exps.IID=GetIID;Exps.UID=GetUID;Exps.ObjectTypeName=ObjectTypeName}if(hasTemplateACEs)Exps.TemplateName=TemplateName};\n\n}\n\n// events/scheduledWait.js\n{\n'use strict';const C3=self.C3;\nC3.ScheduledWait=class ScheduledWait extends C3.DefendedBase{constructor(eventSheetManager){super();this._eventSheetManager=eventSheetManager;this._type=\"\";this._time=-1;this._signalTag=\"\";this._isSignalled=false;this._event=null;this._actIndex=0;this._solModifiers=[];this._dynamicSolModifiers=null;this._sols=new Map;this._callingFunctionBlock=null;this._asyncId=-1;this._functionParameters=null;this._functionInnerLocalVars=null;this._shouldRelease=false}Release(){this._type=\"\";this._time=-1;this._signalTag=\n\"\";this._event=null;this._callingFunctionBlock=null;this._functionParameters=null;this._functionInnerLocalVars=null;this._asyncId=-1;C3.clearArray(this._solModifiers);if(this._dynamicSolModifiers){this._dynamicSolModifiers.clear();this._dynamicSolModifiers=null}for(const s of this._sols.values())s.Release();this._sols.clear()}_Init(){const eventSheetManager=this._eventSheetManager;const allObjectClasses=eventSheetManager.GetRuntime().GetAllObjectClasses();const frame=eventSheetManager.GetCurrentEventStackFrame();\nthis._event=frame.GetCurrentEvent();this._actIndex=frame.GetActionIndex()+1;const functionBlock=eventSheetManager.FindFirstFunctionBlockParent(this._event);if(functionBlock){this._callingFunctionBlock=functionBlock;this._functionParameters=functionBlock.CaptureFunctionParameters();this._functionInnerLocalVars=functionBlock._GetAllInnerLocalVariables().map(v=>v.GetValue());if(functionBlock.IsAsync())this._asyncId=functionBlock.PauseCurrentAsyncFunction()}for(const objectClass of allObjectClasses){const sol=\nobjectClass.GetCurrentSol();if(sol.IsSelectAll()&&!this._event.HasSolModifier(objectClass))continue;this._solModifiers.push(objectClass);this._sols.set(objectClass,C3.New(C3.SolState,sol))}const dynamicSolModifiersSet=eventSheetManager.GetDynamicSolModifiersSet();this._dynamicSolModifiers=dynamicSolModifiersSet.size>0?dynamicSolModifiersSet:null}InitTimer(seconds){this._type=\"timer\";this._Init();this._time=this._eventSheetManager.GetRuntime().GetGameTime()+seconds}InitSignal(tag){this._type=\"signal\";\nthis._Init();this._signalTag=tag.toLowerCase()}InitPromise(p){this._type=\"promise\";this._Init();p.then(()=>this.SetSignalled()).catch(err=>{console.warn(\"[C3 runtime] Promise rejected in 'Wait for previous actions to complete': \",err);this.SetSignalled()})}IsTimer(){return this._type===\"timer\"}IsSignal(){return this._type===\"signal\"}IsPromise(){return this._type===\"promise\"}GetSignalTag(){return this._signalTag}IsSignalled(){return this._isSignalled}SetSignalled(){this._isSignalled=true}_ShouldRun(){if(this.IsTimer())return this._time<=\nthis._eventSheetManager.GetRuntime().GetGameTime();else return this.IsSignalled()}_RestoreState(frame){frame._Restore(this._event,this._actIndex);for(const [objectClass,solState]of this._sols.entries()){const sol=objectClass.GetCurrentSol();solState._Restore(sol)}if(this._dynamicSolModifiers)frame.SetDynamicSolModifiers([...this._dynamicSolModifiers]);const callingFunctionBlock=this._callingFunctionBlock;if(callingFunctionBlock){callingFunctionBlock.SetFunctionParameters(this._functionParameters);\ncallingFunctionBlock._GetAllInnerLocalVariables().map((v,index)=>v.SetValue(this._functionInnerLocalVars[index]));if(callingFunctionBlock.IsAsync())callingFunctionBlock.ResumeAsyncFunction(this._asyncId)}}_Run(frame){this._RestoreState(frame);this._event._ResumeActionsAndSubEvents(frame);if(this._callingFunctionBlock&&this._callingFunctionBlock.IsAsync())this._callingFunctionBlock.MaybeFinishAsyncFunctionCall(this._asyncId);this._eventSheetManager.ClearSol(this._solModifiers);this._shouldRelease=\ntrue}async _DebugRun(frame){this._RestoreState(frame);for(const breakEventObject of this._event._DebugResumeActionsAndSubEvents(frame))await this._eventSheetManager.GetRuntime().DebugBreak(breakEventObject);if(this._callingFunctionBlock&&this._callingFunctionBlock.IsAsync())this._callingFunctionBlock.MaybeFinishAsyncFunctionCall(this._asyncId);this._eventSheetManager.ClearSol(this._solModifiers);this._shouldRelease=true}ShouldRelease(){return this._shouldRelease}RemoveInstances(s){for(const solState of this._sols.values())solState.RemoveInstances(s)}_SaveToJson(){const sols=\n{};const o={\"t\":this._time,\"st\":this._signalTag,\"s\":this._isSignalled,\"ev\":this._event.GetSID(),\"sm\":this._solModifiers.map(oc=>oc.GetSID()),\"dsm\":this._dynamicSolModifiers?[...this._dynamicSolModifiers].map(oc=>oc.GetSID()):null,\"sols\":sols};if(this._event._HasActionIndex(this._actIndex))o[\"act\"]=this._event.GetActionAt(this._actIndex).GetSID();for(const [objectClass,solState]of this._sols)sols[objectClass.GetSID().toString()]=solState._SaveToJson();return o}static _CreateFromJson(eventSheetManager,\no){const runtime=eventSheetManager.GetRuntime();const event=eventSheetManager.GetEventBlockBySID(o[\"ev\"]);if(!event)return null;let actIndex=0;if(o.hasOwnProperty(\"act\")){const act=eventSheetManager.GetActionBySID(o[\"act\"]);if(!act)return null;actIndex=act.GetIndex()}const sw=C3.New(C3.ScheduledWait,eventSheetManager);sw._time=o[\"t\"];sw._type=sw._time===-1?\"signal\":\"timer\";sw._signalTag=o[\"st\"];sw._isSignalled=o[\"s\"];sw._event=event;sw._actIndex=actIndex;for(const sid of o[\"sm\"]){const objectClass=\nruntime.GetObjectClassBySID(sid);if(objectClass)sw._solModifiers.push(objectClass)}if(Array.isArray(o[\"dsm\"]))for(const sid of o[\"dsm\"]){const objectClass=runtime.GetObjectClassBySID(sid);if(objectClass){if(!sw._dynamicSolModifiers)sw._dynamicSolModifiers=new Set;sw._dynamicSolModifiers.add(objectClass)}}for(const [sidStr,solData]of Object.entries(o[\"sols\"])){const sid=parseInt(sidStr,10);const objectClass=runtime.GetObjectClassBySID(sid);if(!objectClass)continue;const solState=C3.New(C3.SolState,\nnull);solState._LoadFromJson(eventSheetManager,solData);sw._sols.set(objectClass,solState)}return sw}};\n\n}\n\n// events/solState.js\n{\n'use strict';const C3=self.C3;\nC3.SolState=class SolState extends C3.DefendedBase{constructor(sol){super();this._objectClass=null;this._isSelectAll=true;this._instances=[];if(sol){this._objectClass=sol.GetObjectClass();this._isSelectAll=sol.IsSelectAll();C3.shallowAssignArray(this._instances,sol._GetOwnInstances())}}Release(){this._objectClass=null;C3.clearArray(this._instances)}_Restore(sol){sol._SetSelectAll(this._isSelectAll);C3.shallowAssignArray(sol._GetOwnInstances(),this._instances)}RemoveInstances(s){C3.arrayRemoveAllInSet(this._instances,s)}_SaveToJson(){return{\"sa\":this._isSelectAll,\n\"insts\":this._instances.map(inst=>inst.GetUID())}}_LoadFromJson(eventSheetManager,o){const runtime=eventSheetManager.GetRuntime();this._isSelectAll=!!o[\"sa\"];C3.clearArray(this._instances);for(const uid of o[\"insts\"]){const inst=runtime.GetInstanceByUID(uid);if(inst)this._instances.push(inst)}}};\n\n}\n\n// sdk/sdkPluginBase.js\n{\n'use strict';const C3=self.C3;function GetNextParamMap(paramMap,param){let nextParamMap=paramMap.get(param);if(!nextParamMap){nextParamMap=new Map;paramMap.set(param,nextParamMap)}return nextParamMap}\nC3.SDKPluginBase=class SDKPluginBase extends C3.DefendedBase{constructor(opts){super();this._runtime=opts.runtime;this._isSingleGlobal=!!opts.isSingleGlobal;this._isWorldType=!!opts.isWorld;this._isRotatable=!!opts.isRotatable;this._mustPredraw=!!opts.mustPredraw;this._hasEffects=!!opts.hasEffects;this._supportsSceneGraph=!!opts.supportsSceneGraph;this._supportsMesh=!!opts.supportsMesh;this._singleGlobalObjectClass=null;this._boundACEMethodCache=new Map;this._boundACEMethodCache_1param=new Map;this._boundACEMethodCache_2params=\nnew Map;this._boundACEMethodCache_3params=new Map}Release(){this._runtime=null}GetRuntime(){return this._runtime}OnCreate(){}IsSingleGlobal(){return this._isSingleGlobal}IsWorldType(){return this._isWorldType}IsRotatable(){return this._isRotatable}MustPreDraw(){return this._mustPredraw}HasEffects(){return this._hasEffects}SupportsSceneGraph(){return this._supportsSceneGraph}SupportsMesh(){return this._supportsMesh}_GetBoundACEMethod(func,bindThis){if(!bindThis)throw new Error(\"missing 'this' binding\");\nlet ret=this._boundACEMethodCache.get(func);if(ret)return ret;ret=func.bind(bindThis);this._boundACEMethodCache.set(func,ret);return ret}_GetBoundACEMethod_1param(func,bindThis,param0){if(!bindThis)throw new Error(\"missing 'this' binding\");const param0map=GetNextParamMap(this._boundACEMethodCache_1param,func);let ret=param0map.get(param0);if(ret)return ret;ret=func.bind(bindThis,param0);param0map.set(param0,ret);return ret}_GetBoundACEMethod_2params(func,bindThis,param0,param1){if(!bindThis)throw new Error(\"missing 'this' binding\");\nconst param0map=GetNextParamMap(this._boundACEMethodCache_2params,func);const param1map=GetNextParamMap(param0map,param0);let ret=param1map.get(param1);if(ret)return ret;ret=func.bind(bindThis,param0,param1);param1map.set(param1,ret);return ret}_GetBoundACEMethod_3params(func,bindThis,param0,param1,param2){if(!bindThis)throw new Error(\"missing 'this' binding\");const param0map=GetNextParamMap(this._boundACEMethodCache_3params,func);const param1map=GetNextParamMap(param0map,param0);const param2map=\nGetNextParamMap(param1map,param1);let ret=param2map.get(param2);if(ret)return ret;ret=func.bind(bindThis,param0,param1,param2);param2map.set(param2,ret);return ret}_SetSingleGlobalObjectClass(objectClass){if(!this.IsSingleGlobal())throw new Error(\"must be single-global plugin\");this._singleGlobalObjectClass=objectClass}GetSingleGlobalObjectClass(){if(!this.IsSingleGlobal())throw new Error(\"must be single-global plugin\");return this._singleGlobalObjectClass}GetSingleGlobalInstance(){if(!this.IsSingleGlobal())throw new Error(\"must be single-global plugin\");\nreturn this._singleGlobalObjectClass.GetSingleGlobalInstance()}};\n\n}\n\n// sdk/sdkDOMPluginBase.js\n{\n'use strict';const C3=self.C3;\nC3.SDKDOMPluginBase=class SDKDOMPluginBase extends C3.SDKPluginBase{constructor(opts,DOM_COMPONENT_ID){super(opts);this._domComponentId=DOM_COMPONENT_ID;this._nextElementId=0;this._instMap=new Map;this.AddElementMessageHandler(\"elem-focused\",sdkInst=>sdkInst._OnElemFocused());this.AddElementMessageHandler(\"elem-blurred\",sdkInst=>{if(sdkInst)sdkInst._OnElemBlurred()})}Release(){super.Release()}_AddElement(sdkInst){const elementId=this._nextElementId++;this._instMap.set(elementId,sdkInst);return elementId}_RemoveElement(elementId){this._instMap.delete(elementId)}AddElementMessageHandler(handler,\nfunc){this._runtime.AddDOMComponentMessageHandler(this._domComponentId,handler,e=>{const sdkInst=this._instMap.get(e[\"elementId\"]);func(sdkInst,e)})}};\n\n}\n\n// sdk/sdkTypeBase.js\n{\n'use strict';const C3=self.C3;\nC3.SDKTypeBase=class SDKTypeBase extends C3.DefendedBase{constructor(objectClass){super();this._objectClass=objectClass;this._runtime=objectClass.GetRuntime();this._plugin=objectClass.GetPlugin()}Release(){this._objectClass=null;this._runtime=null;this._plugin=null}GetObjectClass(){return this._objectClass}GetRuntime(){return this._runtime}GetPlugin(){return this._plugin}GetImageInfo(){return this._objectClass.GetImageInfo()}OnCreate(){}FinishCondition(f){}BeforeRunAction(method){}AfterRunAction(method){}LoadTextures(renderer){}ReleaseTextures(){}OnDynamicTextureLoadComplete(){}PreloadTexturesWithInstances(renderer){}LoadTilemapData(){}GetScriptInterfaceClass(){return null}DispatchScriptEvent(name,cancelable,\nadditionalProperties){const e=C3.New(C3.Event,name,cancelable);e.objectClass=this;if(additionalProperties)Object.assign(e,additionalProperties);this.GetObjectClass().DispatchUserScriptEvent(e)}};\n\n}\n\n// sdk/sdkInstanceBase.js\n{\n'use strict';const C3=self.C3;\nC3.SDKInstanceBase=class SDKInstanceBase extends C3.DefendedBase{constructor(inst,domComponentId){super();this._inst=inst;this._domComponentId=domComponentId;this._wrapperComponentId=null;this._runtime=inst.GetRuntime();this._objectClass=this._inst.GetObjectClass();this._sdkType=this._objectClass.GetSdkType();this._tickFunc=null;this._tick2Func=null;this._isTicking=false;this._isTicking2=false;this._disposables=null;this._wasReleased=false}Release(){this._wasReleased=true;this._StopTicking();this._StopTicking2();\nthis._tickFunc=null;this._tick2Func=null;if(this._disposables){this._disposables.Release();this._disposables=null}this._inst=null;this._runtime=null;this._objectClass=null;this._sdkType=null}WasReleased(){return this._wasReleased}GetInstance(){return this._inst}GetRuntime(){return this._runtime}GetObjectClass(){return this._objectClass}GetPlugin(){return this._sdkType.GetPlugin()}GetSdkType(){return this._sdkType}GetScriptInterface(){return this._inst.GetInterfaceClass()}Trigger(method){return this._runtime.Trigger(method,\nthis._inst,null)}DebugTrigger(method){return this._runtime.DebugTrigger(method,this._inst,null)}TriggerAsync(method){return this._runtime.TriggerAsync(method,this._inst,null)}FastTrigger(method,value){return this._runtime.FastTrigger(method,this._inst,value)}DebugFastTrigger(method,value){return this._runtime.DebugFastTrigger(method,this._inst,value)}ScheduleTriggers(f){return this._runtime.ScheduleTriggers(f)}AddDOMMessageHandler(handler,func){this._runtime.AddDOMComponentMessageHandler(this._domComponentId,\nhandler,func)}AddDOMMessageHandlers(list){for(const [handler,func]of list)this.AddDOMMessageHandler(handler,func)}PostToDOM(handler,data){this._runtime.PostComponentMessageToDOM(this._domComponentId,handler,data)}PostToDOMAsync(handler,data){return this._runtime.PostComponentMessageToDOMAsync(this._domComponentId,handler,data)}_PostToDOMMaybeSync(handler,data){if(this._runtime.IsInWorker())this.PostToDOM(handler,data);else return window[\"c3_runtimeInterface\"][\"_OnMessageFromRuntime\"]({\"type\":\"event\",\n\"component\":this._domComponentId,\"handler\":handler,\"data\":data,\"responseId\":null})}SetWrapperExtensionComponentId(componentId){if(!componentId)throw new Error(\"cannot set empty component id\");this._wrapperComponentId=componentId}IsWrapperExtensionAvailable(){if(!this._wrapperComponentId)throw new Error(\"wrapper extension component id not set\");return this._runtime.HasWrapperComponentId(this._wrapperComponentId)}AddWrapperExtensionMessageHandler(handler,func){if(!this._wrapperComponentId)throw new Error(\"wrapper extension component id not set\");\nthis._runtime.AddWrapperExtensionMessageHandler(this._wrapperComponentId,handler,func)}AddWrapperExtensionMessageHandlers(list){for(const [handler,func]of list)this.AddWrapperExtensionMessageHandler(handler,func)}SendWrapperExtensionMessage(messageId,params){if(!this._wrapperComponentId)throw new Error(\"wrapper extension component id not set\");this._runtime.SendWrapperExtensionMessage(this._wrapperComponentId,messageId,params)}SendWrapperExtensionMessageAsync(messageId,params){if(!this._wrapperComponentId)throw new Error(\"wrapper extension component id not set\");\nreturn this._runtime.SendWrapperExtensionMessageAsync(this._wrapperComponentId,messageId,params)}Tick(){}Tick2(){}_StartTicking(){if(this._isTicking)return;if(!this._tickFunc)this._tickFunc=()=>this.Tick();this._runtime.Dispatcher().addEventListener(\"tick\",this._tickFunc);this._isTicking=true}_StopTicking(){if(!this._isTicking)return;this._runtime.Dispatcher().removeEventListener(\"tick\",this._tickFunc);this._isTicking=false}IsTicking(){return this._isTicking}_StartTicking2(){if(this._isTicking2)return;\nif(!this._tick2Func)this._tick2Func=()=>this.Tick2();this._runtime.Dispatcher().addEventListener(\"tick2\",this._tick2Func);this._isTicking2=true}_StopTicking2(){if(!this._isTicking2)return;this._runtime.Dispatcher().removeEventListener(\"tick2\",this._tick2Func);this._isTicking2=false}IsTicking2(){return this._isTicking2}GetDebuggerProperties(){return[]}SaveToJson(){return null}LoadFromJson(o){}GetPropertyValueByIndex(index){}SetPropertyValueByIndex(index,value){}OffsetPropertyValueByIndex(index,offset,\nopts){if(offset===0)return;const value=this.GetPropertyValueByIndex(index);if(typeof value!==\"number\")throw new Error(\"expected number\");this.SetPropertyValueByIndex(index,value+offset,opts)}SetPropertyColorOffsetValueByIndex(offset,r,g,b){}CallAction(actMethod,...args){actMethod.call(this,...args)}CallExpression(expMethod,...args){return expMethod.call(this,...args)}GetScriptInterfaceClass(){return null}DispatchScriptEvent(name,cancelable,additionalProperties){if(!this._inst.HasScriptInterface())return;\nconst scriptInterface=this.GetScriptInterface();const e=C3.New(C3.Event,name,cancelable);e.instance=scriptInterface;if(additionalProperties)Object.assign(e,additionalProperties);scriptInterface.dispatchEvent(e)}};\n\n}\n\n// sdk/sdkWorldInstanceBase.js\n{\n'use strict';const C3=self.C3;\nC3.SDKWorldInstanceBase=class SDKWorldInstanceBase extends C3.SDKInstanceBase{constructor(inst,domComponentId){super(inst,domComponentId);this._worldInfo=inst.GetWorldInfo();this._renderercontextlost_handler=null;this._renderercontextrestored_handler=null}Release(){if(this._renderercontextlost_handler){const dispatcher=this._runtime.Dispatcher();dispatcher.removeEventListener(\"renderercontextlost\",this._renderercontextlost_handler);dispatcher.removeEventListener(\"renderercontextrestored\",this._renderercontextrestored_handler);\nthis._renderercontextlost_handler=null;this._renderercontextrestored_handler=null}this._worldInfo=null;super.Release()}HandleWebGLContextLoss(){this.HandleRendererContextLoss()}OnWebGLContextLost(){}OnWebGLContextRestored(){}HandleRendererContextLoss(){if(this._renderercontextlost_handler)return;this._renderercontextlost_handler=()=>this.OnRendererContextLost();this._renderercontextrestored_handler=()=>this.OnRendererContextRestored();const dispatcher=this._runtime.Dispatcher();dispatcher.addEventListener(\"rendererontextlost\",\nthis._renderercontextlost_handler);dispatcher.addEventListener(\"renderercontextrestored\",this._renderercontextrestored_handler)}OnRendererContextLost(){this.OnWebGLContextLost()}OnRendererContextRestored(){this.OnWebGLContextRestored()}GetWorldInfo(){return this._worldInfo}IsOriginalSizeKnown(){return false}GetOriginalWidth(){if(!this.IsOriginalSizeKnown())throw new Error(\"original size not known\");const imageInfo=this.GetCurrentImageInfo();if(imageInfo)return imageInfo.GetWidth();else;}GetOriginalHeight(){if(!this.IsOriginalSizeKnown())throw new Error(\"original size not known\");\nconst imageInfo=this.GetCurrentImageInfo();if(imageInfo)return imageInfo.GetHeight();else;}GetCurrentImageInfo(){return null}GetCurrentSurfaceSize(){const imageInfo=this.GetCurrentImageInfo();if(imageInfo){const texture=imageInfo.GetTexture();if(texture)return[texture.GetWidth(),texture.GetHeight()]}return[100,100]}GetCurrentTexRect(){const imageInfo=this.GetCurrentImageInfo();return imageInfo?imageInfo.GetTexRect():null}GetCurrentTexQuad(){const imageInfo=this.GetCurrentImageInfo();return imageInfo?\nimageInfo.GetTexQuad():null}IsCurrentTexRotated(){const imageInfo=this.GetCurrentImageInfo();return imageInfo?imageInfo.IsRotated():false}GetImagePoint(nameOrIndex){const wi=this._inst.GetWorldInfo();return[wi.GetX(),wi.GetY(),wi.GetTotalZElevation()]}LoadTilemapData(data,mapWidth,mapHeight){}TestPointOverlapTile(x,y){}RendersToOwnZPlane(){return true}};\n\n}\n\n// sdk/sdkDOMInstanceBase.js\n{\n'use strict';const C3=self.C3;const tempRect=C3.New(C3.Rect);\nC3.SDKDOMInstanceBase=class SDKDOMInstanceBase extends C3.SDKWorldInstanceBase{constructor(inst,domComponentId){super(inst,domComponentId);this._elementId=this.GetPlugin()._AddElement(this);this._isElementShowing=true;this._elemHasFocus=false;this._autoFontSize=false;this._autoFontSizeOffset=-.2;this._lastRect=C3.New(C3.Rect,0,0,-1,-1);const canvasManager=this._runtime.GetCanvasManager();this._lastWindowWidth=canvasManager.GetLastWidth();this._lastWindowHeight=canvasManager.GetLastHeight();this._isPendingUpdateState=\nfalse;this._StartTicking()}Release(){this.GetPlugin()._RemoveElement(this._elementId);this.PostToDOMElement(\"destroy\");this._elementId=-1;super.Release()}_GetElementInDOMMode(){if(this._runtime.IsInWorker())throw new Error(\"not valid in worker mode\");return this._PostToDOMElementMaybeSync(\"get-element\")}PostToDOMElement(handler,data){if(!data)data={};data[\"elementId\"]=this._elementId;this.PostToDOM(handler,data)}_PostToDOMElementMaybeSync(handler,data){if(!data)data={};data[\"elementId\"]=this._elementId;\nreturn this._PostToDOMMaybeSync(handler,data)}PostToDOMElementAsync(handler,data){if(!data)data={};data[\"elementId\"]=this._elementId;return this.PostToDOMAsync(handler,data)}CreateElement(data){if(!data)data={};const isVisible=this.GetWorldInfo().IsVisible();data[\"elementId\"]=this._elementId;data[\"isVisible\"]=isVisible;Object.assign(data,this.GetElementState());this._isElementShowing=!!data[\"isVisible\"];this._PostToDOMMaybeSync(\"create\",data);this._UpdatePosition(true)}SetElementVisible(v){v=!!v;\nif(this._isElementShowing===v)return;this._isElementShowing=v;this.PostToDOMElement(\"set-visible\",{\"isVisible\":v})}Tick(){this._UpdatePosition(false)}_ShouldPreserveElement(){const fullscreenMode=this._runtime.GetCanvasManager().GetFullscreenMode();return C3.Platform.OS===\"Android\"&&(fullscreenMode===\"scale-inner\"||fullscreenMode===\"scale-outer\"||fullscreenMode===\"crop\")}_UpdatePosition(first){const wi=this.GetWorldInfo();const layer=wi.GetLayer();const bbox=wi.GetBoundingBox();let [cleft,ctop]=layer.LayerToCanvasCss(bbox.getLeft(),\nbbox.getTop());let [cright,cbottom]=layer.LayerToCanvasCss(bbox.getRight(),bbox.getBottom());const canvasManager=this._runtime.GetCanvasManager();const rightEdge=canvasManager.GetCssWidth();const bottomEdge=canvasManager.GetCssHeight();if(!wi.IsVisible()||!layer.IsVisible()){this.SetElementVisible(false);return}if(!this._ShouldPreserveElement()){if(cright<=0||cbottom<=0||cleft>=rightEdge||ctop>=bottomEdge){this.SetElementVisible(false);return}if(cleft<1)cleft=1;if(ctop<1)ctop=1;if(cright>=rightEdge)cright=\nrightEdge-1;if(cbottom>=bottomEdge)cbottom=bottomEdge-1}tempRect.set(cleft,ctop,cright,cbottom);const curWinWidth=canvasManager.GetLastWidth();const curWinHeight=canvasManager.GetLastHeight();if(!first&&tempRect.equals(this._lastRect)&&this._lastWindowWidth===curWinWidth&&this._lastWindowHeight===curWinHeight){this.SetElementVisible(true);return}this._lastRect.copy(tempRect);this._lastWindowWidth=curWinWidth;this._lastWindowHeight=curWinHeight;this.SetElementVisible(true);let fontSize=null;if(this._autoFontSize)fontSize=\nlayer.GetDisplayScale()+this._autoFontSizeOffset;this.PostToDOMElement(\"update-position\",{\"left\":Math.round(this._lastRect.getLeft())+canvasManager.GetCanvasClientX(),\"top\":Math.round(this._lastRect.getTop())+canvasManager.GetCanvasClientY(),\"width\":Math.round(this._lastRect.width()),\"height\":Math.round(this._lastRect.height()),\"fontSize\":fontSize})}FocusElement(){this._PostToDOMElementMaybeSync(\"focus\",{\"focus\":true})}BlurElement(){this._PostToDOMElementMaybeSync(\"focus\",{\"focus\":false})}_OnElemFocused(){this._elemHasFocus=\ntrue}_OnElemBlurred(){this._elemHasFocus=false}IsElementFocused(){return this._elemHasFocus}SetElementCSSStyle(prop,val){this.PostToDOMElement(\"set-css-style\",{\"prop\":C3.CSSToCamelCase(prop),\"val\":val})}SetElementAttribute(attribName,value){this.PostToDOMElement(\"set-attribute\",{\"name\":attribName,\"val\":value})}RemoveElementAttribute(attribName){this.PostToDOMElement(\"remove-attribute\",{\"name\":attribName})}UpdateElementState(){if(this._isPendingUpdateState)return;this._isPendingUpdateState=true;Promise.resolve().then(()=>\n{this._isPendingUpdateState=false;this.PostToDOMElement(\"update-state\",this.GetElementState())})}GetElementState(){}GetElementId(){return this._elementId}};\n\n}\n\n// sdk/sdkBehaviorBase.js\n{\n'use strict';const C3=self.C3;const IBehavior=self.IBehavior;\nC3.SDKBehaviorBase=class SDKBehaviorBase extends C3.DefendedBase{constructor(opts){super();this._runtime=opts.runtime;this._myObjectClasses=C3.New(C3.ArraySet);this._myInstances=C3.New(C3.ArraySet);this._iBehavior=null;this._scriptInterfaceClass=opts.scriptInterfaceClass||null}Release(){this._myInstances.Release();this._myObjectClasses.Release();this._runtime=null}GetRuntime(){return this._runtime}OnCreate(){}_AddObjectClass(objectClass){this._myObjectClasses.Add(objectClass)}GetObjectClasses(){return this._myObjectClasses.GetArray()}_AddInstance(inst){this._myInstances.Add(inst)}_RemoveInstance(inst){this._myInstances.Delete(inst)}GetInstances(){return this._myInstances.GetArray()}GetIBehavior(){if(this._iBehavior===null){const CustomScriptClass=\nthis._scriptInterfaceClass;if(CustomScriptClass){this._iBehavior=new CustomScriptClass(this);if(!(this._iBehavior instanceof IBehavior))throw new TypeError(\"script interface class must derive from IBehavior\");}else this._iBehavior=new IBehavior(this)}return this._iBehavior}};\n\n}\n\n// sdk/sdkBehaviorTypeBase.js\n{\n'use strict';const C3=self.C3;C3.SDKBehaviorTypeBase=class SDKBehaviorTypeBase extends C3.DefendedBase{constructor(behaviorType){super();this._runtime=behaviorType.GetRuntime();this._behaviorType=behaviorType;this._objectClass=behaviorType.GetObjectClass();this._behavior=behaviorType.GetBehavior();this._behavior._AddObjectClass(this._objectClass)}Release(){this._runtime=null;this._behaviorType=null;this._objectClass=null;this._behavior=null}OnCreate(){}GetBehaviorType(){return this._behaviorType}GetObjectClass(){return this._objectClass}GetRuntime(){return this._runtime}GetBehavior(){return this._behavior}};\n\n}\n\n// sdk/sdkBehaviorInstanceBase.js\n{\n'use strict';const C3=self.C3;\nC3.SDKBehaviorInstanceBase=class SDKBehaviorInstanceBase extends C3.DefendedBase{constructor(behInst,domComponentId){super();this._behInst=behInst;this._domComponentId=domComponentId;this._inst=behInst.GetObjectInstance();this._runtime=behInst.GetRuntime();this._behaviorType=behInst.GetBehaviorType();this._sdkType=this._behaviorType.GetSdkType();this._isTicking=false;this._isTicking2=false;this._isPostTicking=false;this._disposables=null}Release(){this._StopTicking();this._StopTicking2();this._StopPostTicking();\nif(this._disposables){this._disposables.Release();this._disposables=null}this._behInst=null;this._inst=null;this._runtime=null;this._behaviorType=null;this._sdkType=null}GetBehavior(){return this._behaviorType.GetBehavior()}GetBehaviorInstance(){return this._behInst}GetObjectInstance(){return this._inst}GetObjectClass(){return this._inst.GetObjectClass()}GetWorldInfo(){return this._inst.GetWorldInfo()}GetRuntime(){return this._runtime}GetBehaviorType(){return this._behaviorType}GetSdkType(){return this._sdkType}GetScriptInterface(){return this._behInst.GetScriptInterface()}Trigger(method){return this._runtime.Trigger(method,\nthis._inst,this._behaviorType)}DebugTrigger(method){return this._runtime.DebugTrigger(method,this._inst,this._behaviorType)}TriggerAsync(method){return this._runtime.TriggerAsync(method,this._inst,this._behaviorType)}PostCreate(){}Tick(){}Tick2(){}PostTick(){}_StartTicking(){if(this._isTicking)return;this._runtime._AddBehInstToTick(this);this._isTicking=true}_StopTicking(){if(!this._isTicking)return;this._runtime._RemoveBehInstToTick(this);this._isTicking=false}IsTicking(){return this._isTicking}_StartTicking2(){if(this._isTicking2)return;\nthis._runtime._AddBehInstToTick2(this);this._isTicking2=true}_StopTicking2(){if(!this._isTicking2)return;this._runtime._RemoveBehInstToTick2(this);this._isTicking2=false}IsTicking2(){return this._isTicking2}_StartPostTicking(){if(this._isPostTicking)return;this._runtime._AddBehInstToPostTick(this);this._isPostTicking=true}_StopPostTicking(){if(!this._isPostTicking)return;this._runtime._RemoveBehInstToPostTick(this);this._isPostTicking=false}IsPostTicking(){return this._isPostTicking}GetDebuggerProperties(){return[]}AddDOMMessageHandler(handler,\nfunc){this._runtime.AddDOMComponentMessageHandler(this._domComponentId,handler,func)}OnSpriteFrameChanged(prevFrame,nextFrame){}SaveToJson(){return null}LoadFromJson(o){}GetPropertyValueByIndex(index){}SetPropertyValueByIndex(index,value){}OffsetPropertyValueByIndex(index,offset){if(offset===0)return;const value=this.GetPropertyValueByIndex(index);if(typeof value!==\"number\")throw new Error(\"expected number\");this.SetPropertyValueByIndex(index,value+offset)}SetPropertyColorOffsetValueByIndex(index,\noffsetR,offsetG,offsetB){}CallAction(actMethod,...args){actMethod.call(this,...args)}CallExpression(expMethod,...args){return expMethod.call(this,...args)}GetScriptInterfaceClass(){return null}DispatchScriptEvent(name,cancelable,additionalProperties){if(!this._behInst.HasScriptInterface())return;const scriptInterface=this.GetScriptInterface();const e=C3.New(C3.Event,name,cancelable);e.behaviorInstance=scriptInterface;e.instance=scriptInterface.instance;if(additionalProperties)Object.assign(e,additionalProperties);\nscriptInterface.dispatchEvent(e)}};\n\n}\n\n// objects/pluginManager.js\n{\n'use strict';const C3=self.C3;C3.Plugins={};C3.Behaviors={};\nC3.PluginManager=class PluginManager extends C3.DefendedBase{constructor(runtime,wrapperComponentIds){super();this._runtime=runtime;this._allPlugins=[];this._pluginsByCtor=new Map;this._systemPlugin=null;this._allBehaviors=[];this._behaviorsByCtor=new Map;this._solidBehavior=null;this._jumpthruBehavior=null;this._wrapperComponentIds=new Set(wrapperComponentIds)}CreatePlugin(pluginData){const Ctor=this._runtime.GetObjectReference(pluginData[0]);if(!Ctor)throw new Error(\"missing plugin\");C3.AddCommonACEs(pluginData,\nCtor);const plugin=C3.New(Ctor,{runtime:this._runtime,isSingleGlobal:pluginData[1],isWorld:pluginData[2],isRotatable:pluginData[5],hasEffects:pluginData[8],mustPredraw:pluginData[9],supportsSceneGraph:pluginData[13],supportsMesh:pluginData[14]});plugin.OnCreate();this._allPlugins.push(plugin);this._pluginsByCtor.set(Ctor,plugin)}CreateSystemPlugin(){this._systemPlugin=C3.New(C3.Plugins.System,{runtime:this._runtime,isSingleGlobal:true});this._systemPlugin.OnCreate()}CreateBehavior(behaviorData){const Ctor=\nthis._runtime.GetObjectReference(behaviorData[1]);if(!Ctor)throw new Error(\"missing behavior\");const behavior=C3.New(Ctor,{runtime:this._runtime});behavior.OnCreate();this._allBehaviors.push(behavior);this._behaviorsByCtor.set(Ctor,behavior);if(!this._solidBehavior&&C3.Behaviors.solid&&behavior instanceof C3.Behaviors.solid)this._solidBehavior=behavior;else if(!this._jumpthruBehavior&&C3.Behaviors.jumpthru&&behavior instanceof C3.Behaviors.jumpthru)this._jumpthruBehavior=behavior}GetPluginByConstructorFunction(ctor){return this._pluginsByCtor.get(ctor)||\nnull}HasBehaviorByConstructorFunction(ctor){return this._behaviorsByCtor.has(ctor)}GetBehaviorByConstructorFunction(ctor){return this._behaviorsByCtor.get(ctor)||null}GetSystemPlugin(){return this._systemPlugin}GetSolidBehavior(){return this._solidBehavior}GetJumpthruBehavior(){return this._jumpthruBehavior}HasWrapperComponentId(id){return this._wrapperComponentIds.has(id)}};\n\n}\n\n// objects/imageInfo.js\n{\n'use strict';const C3=self.C3;const allImageInfos=new Set;\nC3.ImageInfo=class ImageInfo extends C3.DefendedBase{constructor(){super();this._generation=0;this._url=\"\";this._size=0;this._offsetX=0;this._offsetY=0;this._width=0;this._height=0;this._isRotated=false;this._hasMetaData=false;this._imageAsset=null;this._textureState=\"\";this._rcTex=C3.New(C3.Rect);this._quadTex=C3.New(C3.Quad);this._blobUrl=\"\";this._iImageInfo=new self.IImageInfo(this);allImageInfos.add(this)}Release(){this.ReleaseTexture();this._imageAsset=null;allImageInfos.delete(this);this.ReleaseBlobURL()}static OnRendererContextLost(){for(const imageInfo of allImageInfos){imageInfo._textureState=\n\"\";imageInfo._rcTex.set(0,0,0,0);imageInfo._quadTex.setFromRect(imageInfo._rcTex)}}LoadData(imageData){this._url=imageData[0];this._size=imageData[1];this._offsetX=imageData[2];this._offsetY=imageData[3];this._width=imageData[4];this._height=imageData[5];this._isRotated=imageData[6];this._hasMetaData=true}LoadDynamicAsset(runtime,url){if(this._imageAsset)throw new Error(\"already loaded asset\");this._url=url;const opts={};if(C3.IsAbsoluteURL(url))opts.loadPolicy=\"remote\";this.LoadAsset(runtime,opts);\nreturn this._imageAsset.Load()}async LoadDynamicBlobAsset(runtime,blob){if(this._imageAsset)throw new Error(\"already loaded asset\");this._url=\"\";this._size=blob.size;this._imageAsset=C3.New(C3.ImageAsset,runtime.GetAssetManager(),{blob,size:this._size,loadPolicy:\"local\"})}ReplaceWith(otherImageInfo){if(otherImageInfo===this)throw new Error(\"cannot replace with self\");this._generation++;this.ReleaseTexture();this._url=otherImageInfo._url;this._size=otherImageInfo._size;this._offsetX=otherImageInfo._offsetX;\nthis._offsetY=otherImageInfo._offsetY;this._width=otherImageInfo._width;this._height=otherImageInfo._height;this._isRotated=otherImageInfo._isRotated;this._hasMetaData=otherImageInfo._hasMetaData;this._imageAsset=otherImageInfo._imageAsset;this._textureState=otherImageInfo._textureState;this._rcTex=otherImageInfo._rcTex;this._quadTex=otherImageInfo._quadTex;this.ReleaseBlobURL()}GetURL(){return this._url}GetSize(){return this._size}GetOffsetX(){return this._offsetX}GetOffsetY(){return this._offsetY}IsRotated(){return this._isRotated}GetWidth(){return this._width}GetHeight(){return this._height}GetSheetWidth(){return this._imageAsset.GetWidth()}GetSheetHeight(){return this._imageAsset.GetHeight()}LoadAsset(runtime,\nopts){if(this._imageAsset)throw new Error(\"already got asset\");opts=Object.assign({},opts,{url:this.GetURL(),size:this.GetSize()});this._imageAsset=runtime.LoadImage(opts)}IsLoaded(){return this._imageAsset&&this._imageAsset.IsLoaded()}async LoadStaticTexture(renderer,opts){if(!this._imageAsset)throw new Error(\"no asset\");if(this._textureState)throw new Error(\"already loaded texture\");const startGeneration=this._generation;this._textureState=\"loading\";const texture=await this._imageAsset.LoadStaticTexture(renderer,\nopts);if(this._generation!==startGeneration)return null;if(!texture){this._textureState=\"\";return null}this._textureState=\"loaded\";if(!this._hasMetaData){this._width=texture.GetWidth();this._height=texture.GetHeight();this._hasMetaData=true}const wr=this._isRotated?this._height:this._width;const hr=this._isRotated?this._width:this._height;this._rcTex.set(this._offsetX,this._offsetY,this._offsetX+wr,this._offsetY+hr);this._rcTex.divide(texture.GetWidth(),texture.GetHeight());this._quadTex.setFromRect(this._rcTex);\nif(this._isRotated)this._quadTex.rotatePointsAnticlockwise();return texture}ReleaseTexture(){if(!this._textureState)return;if(this._imageAsset)this._imageAsset.ReleaseTexture();this._textureState=\"\";this._rcTex.set(0,0,0,0);this._quadTex.setFromRect(this._rcTex)}GetTexture(){return this._imageAsset?this._imageAsset.GetTexture():null}GetTexRect(){return this._rcTex}GetTexQuad(){return this._quadTex}GetIImageInfo(){return this._iImageInfo}GetImageAsset(){return this._imageAsset}async ExtractImageToCanvas(drawable){if(!drawable)drawable=\nawait this._imageAsset.LoadToDrawable();const canvas=C3.CreateCanvas(this._width,this._height);const ctx=canvas.getContext(\"2d\");if(this._isRotated){ctx.rotate(Math.PI/-2);ctx.translate(-this._height,0);ctx.drawImage(drawable,this._offsetX,this._offsetY,this._height,this._width,0,0,this._height,this._width)}else ctx.drawImage(drawable,this._offsetX,this._offsetY,this._width,this._height,0,0,this._width,this._height);return canvas}async ExtractImageToBlobURL(drawable){if(this._blobUrl)return this._blobUrl;\nconst canvas=await this.ExtractImageToCanvas(drawable);const blob=await C3.CanvasToBlob(canvas);this._blobUrl=URL.createObjectURL(blob);return this._blobUrl}ReleaseBlobURL(){if(this._blobUrl){URL.revokeObjectURL(this._blobUrl);this._blobUrl=\"\"}}};\n\n}\n\n// objects/animationInfo.js\n{\n'use strict';const C3=self.C3;\nC3.AnimationInfo=class AnimationInfo extends C3.DefendedBase{constructor(animData){super();this._name=animData[0];this._speed=animData[1];this._isLooping=!!animData[2];this._repeatCount=animData[3];this._repeatTo=animData[4];this._isPingPong=!!animData[5];this._sid=animData[6];this._frames=animData[7].map(frameData=>C3.New(C3.AnimationFrameInfo,frameData));this._iAnimation=new self.IAnimation(this)}Release(){for(const f of this._frames)f.Release();C3.clearArray(this._frames)}LoadAllAssets(runtime){for(const f of this._frames)f.GetImageInfo().LoadAsset(runtime)}LoadAllTextures(renderer,opts){return Promise.all(this._frames.map(f=>\nf.GetImageInfo().LoadStaticTexture(renderer,opts)))}ReleaseAllTextures(){for(const f of this._frames)f.GetImageInfo().ReleaseTexture()}GetName(){return this._name}GetSID(){return this._sid}GetFrameCount(){return this._frames.length}GetFrames(){return this._frames}GetFrameAt(i){i=Math.floor(i);if(i<0||i>=this._frames.length)throw new RangeError(\"invalid frame\");return this._frames[i]}GetSpeed(){return this._speed}IsLooping(){return this._isLooping}GetRepeatCount(){return this._repeatCount}GetRepeatTo(){return this._repeatTo}IsPingPong(){return this._isPingPong}GetIAnimation(){return this._iAnimation}};\n\n}\n\n// objects/animationFrameInfo.js\n{\n'use strict';const C3=self.C3;\nC3.AnimationFrameInfo=class AnimationFrameInfo extends C3.DefendedBase{constructor(frameData){super();this._imageInfo=C3.New(C3.ImageInfo);this._imageInfo.LoadData(frameData);this._duration=frameData[7];this._origin=C3.New(C3.Vector2,frameData[8],frameData[9]);this._imagePoints=frameData[10].map(data=>C3.New(C3.ImagePoint,this,data));this._imagePointsByName=new Map;for(const ip of this._imagePoints)this._imagePointsByName.set(ip.GetName().toLowerCase(),ip);this._collisionPoly=null;const polyPoints=\nframeData[11];if(polyPoints.length>=6)this._collisionPoly=C3.New(C3.CollisionPoly,polyPoints);this._tag=frameData[12]?frameData[12]:\"\";this._iAnimationFrame=new self.IAnimationFrame(this)}Release(){if(this._collisionPoly){this._collisionPoly.Release();this._collisionPoly=null}this._imageInfo.Release();this._imageInfo=null}GetImageInfo(){return this._imageInfo}GetDuration(){return this._duration}GetOriginX(){return this._origin.getX()}GetOriginY(){return this._origin.getY()}GetCollisionPoly(){return this._collisionPoly}GetImagePointByName(name){return this._imagePointsByName.get(name.toLowerCase())||\nnull}GetImagePointByIndex(index){index=Math.floor(index);if(index<0||index>=this._imagePoints.length)return null;return this._imagePoints[index]}GetImagePointCount(){return this._imagePoints.length}GetTag(){return this._tag}GetIAnimationFrame(){return this._iAnimationFrame}};\n\n}\n\n// objects/imagePoint.js\n{\n'use strict';const C3=self.C3;C3.ImagePoint=class ImagePoint extends C3.DefendedBase{constructor(afi,data){super();this._afi=afi;this._name=data[0];this._pos=C3.New(C3.Vector2,data[1],data[2])}Release(){}GetName(){return this._name}GetX(){return this._pos.getX()}GetY(){return this._pos.getY()}GetVec2(){return this._pos}};\n\n}\n\n// objects/objectClass.js\n{\n'use strict';const C3=self.C3;const C3Debugger=self.C3Debugger;const IObjectClass=self.IObjectClass;const assert=self.assert;\nC3.ObjectClass=class ObjectClass extends C3.DefendedBase{constructor(runtime,index,data){super();const PluginCtor=runtime.GetObjectReference(data[1]);this._runtime=runtime;this._plugin=runtime.GetPluginManager().GetPluginByConstructorFunction(PluginCtor);this._sdkType=null;this._instSdkCtor=PluginCtor.Instance;this._index=index;this._sid=data[11];this._name=data[0];this._jsPropName=this._runtime.GetJsPropName(data[14]);this._isGlobal=!!data[9];this._isFamily=!!data[2];this._isOnLoaderLayout=!!data[10];\nthis._instVars=data[3].map(arr=>({sid:arr[0],type:arr[1],name:arr[2],jsPropName:runtime.GetJsPropName(arr[3])}));this._behaviorsCount=data[4];this._effectsCount=data[5];this._isWorldType=this._plugin.IsWorldType();this._dispatcher=C3.New(C3.Event.Dispatcher);this._effectList=null;this._collisionGrid=C3.New(C3.SparseGrid,runtime.GetOriginalViewportWidth(),runtime.GetOriginalViewportHeight());this._anyCollisionCellChanged=true;this._anyInstanceParallaxed=false;this._familyMembers=null;this._familyMembersSet=\nnull;this._familyIndex=-1;this._families=null;this._familiesSet=null;this._familyInstVarMap=null;this._familyBehaviorMap=null;this._familyEffectMap=null;this._isInContainer=false;this._container=null;this._behaviorTypes=data[8].map(behaviorTypeData=>C3.BehaviorType.Create(this,behaviorTypeData));this._behaviorTypesIncludingInherited=[];this._behaviorsByName=new Map;this._behaviorNameToIndex=new Map;this._usedBehaviorCtors=new Set;this._customActionMap=new Map;this._solStack=C3.New(C3.SolStack,this);\nthis._defaultInstanceData=null;this._defaultLayerIndex=0;this._isContained=false;this._container=null;this._imageInfo=null;this._animations=null;this._animationsByName=null;this._animationsBySid=null;this._textureRefCount=0;this._savedData=new Map;this._unsavedData=new Map;this._instances=[];this._iidsStale=true;if(this._plugin.HasEffects())this._effectList=C3.New(C3.EffectList,this,data[12]);if(data[6]){this._imageInfo=C3.New(C3.ImageInfo);this._imageInfo.LoadData(data[6])}if(data[7]){this._animations=\ndata[7].map(animData=>C3.New(C3.AnimationInfo,animData));this._animationsByName=new Map;this._animationsBySid=new Map;for(const anim of this._animations){this._animationsByName.set(anim.GetName().toLowerCase(),anim);this._animationsBySid.set(anim.GetSID(),anim)}}if(this._isFamily){this._familyMembers=[];this._familyMembersSet=new Set;this._familyIndex=this._runtime._GetNextFamilyIndex()}else{this._families=[];this._familiesSet=new Set;this._familyInstVarMap=[];this._familyBehaviorMap=[];this._familyEffectMap=\n[]}this._sdkType=C3.New(PluginCtor.Type,this,data[15]);this._iObjectClass=null;this._instanceUserScriptClass=null;this._userScriptDispatcher=C3.New(C3.Event.Dispatcher);const CustomScriptClass=this._sdkType.GetScriptInterfaceClass();if(CustomScriptClass){this._iObjectClass=new CustomScriptClass(this);if(!(this._iObjectClass instanceof IObjectClass))throw new TypeError(\"script interface class must derive from IObjectClass\");}else this._iObjectClass=new IObjectClass(this);if(data[13]){const tilemapData=\ndata[13];if(tilemapData){const tilePolyData=tilemapData[0];const maxTileIndex=tilemapData[1];const brushData=tilemapData[2];this._sdkType.LoadTilemapData(tilePolyData,maxTileIndex,brushData)}}if(!this._runtime.UsesLoaderLayout()||this._isFamily||this._isOnLoaderLayout||!this._isWorldType)this.OnCreate();if(this._plugin.IsSingleGlobal()){this._plugin._SetSingleGlobalObjectClass(this);this._CreateSingleGlobalInstance(data)}this._loadInstancesJson=null}static Create(runtime,index,objectClassData){return C3.New(C3.ObjectClass,\nruntime,index,objectClassData)}Release(){this._dispatcher.Release();this._dispatcher=null;if(this._imageInfo){this._imageInfo.Release();this._imageInfo=null}if(this._animations){for(const a of this._animations)a.Release();C3.clearArray(this._animations);this._animationsByName.clear();this._animationsBySid.clear()}this._loadInstancesJson=null;this._solStack.Release();this._solStack=null;this._savedData.clear();this._unsavedData.clear();this._container=null;this._runtime=null}_LoadFamily(familyData){for(let i=\n1,len=familyData.length;i<len;++i){const memberType=this._runtime.GetObjectClassByIndex(familyData[i]);this._familyMembers.push(memberType);this._familyMembersSet.add(memberType);memberType._families.push(this);memberType._familiesSet.add(this)}}_SetContainer(container){this._isInContainer=true;this._container=container}IsInContainer(){return this._isInContainer}GetContainer(){return this._container}_OnAfterCreate(){let index=0;if(!this._isFamily)for(const family of this._families)for(const familyBehType of family.GetBehaviorTypes()){const lowerName=\nfamilyBehType.GetName().toLowerCase();this._behaviorsByName.set(lowerName,familyBehType);this._behaviorNameToIndex.set(lowerName,index);this._behaviorTypesIncludingInherited.push(familyBehType);++index}for(const behaviorType of this.GetBehaviorTypes()){const lowerName=behaviorType.GetName().toLowerCase();this._behaviorsByName.set(lowerName,behaviorType);this._behaviorNameToIndex.set(lowerName,index);this._behaviorTypesIncludingInherited.push(behaviorType);++index}for(const behaviorType of this._behaviorTypesIncludingInherited)this._usedBehaviorCtors.add(behaviorType.GetBehavior().constructor);\nif(!this._isFamily&&this._families.length){const familyCount=this._runtime.GetFamilyCount();C3.extendArray(this._familyInstVarMap,familyCount,0);C3.extendArray(this._familyBehaviorMap,familyCount,0);C3.extendArray(this._familyEffectMap,familyCount,0);const allFx=[];let ivSum=0;let behSum=0;let fxSum=0;for(const family of this._families){const familyIndex=family.GetFamilyIndex();this._familyInstVarMap[familyIndex]=ivSum;ivSum+=family.GetInstanceVariablesCount();this._familyBehaviorMap[familyIndex]=\nbehSum;behSum+=family.GetBehaviorTypesCount();this._familyEffectMap[familyIndex]=fxSum;fxSum+=family.GetEffectTypesCount();const familyEffectList=family.GetEffectList();if(familyEffectList&&this._effectList)for(const effectType of familyEffectList.GetAllEffectTypes())allFx.push(effectType.Clone(this._effectList))}if(this._effectList)this._effectList.PrependEffectTypes(allFx)}}_CreateSingleGlobalInstance(data){const uid=this._runtime._GetNewUID();const inst=C3.New(C3.Instance,{runtime:this._runtime,\nobjectType:this,uid:uid});inst._CreateSdkInstance(data[16],[]);this._runtime._MapInstanceByUID(uid,inst);this._instances.push(inst)}GetSdkType(){return this._sdkType}IsOnLoaderLayout(){return this._isOnLoaderLayout}Dispatcher(){return this._dispatcher}OnCreate(){if(!this._isFamily)this._sdkType.OnCreate()}HasLoadedTextures(){return this._textureRefCount>0}LoadTextures(renderer){if(this._isFamily)return Promise.resolve();this._textureRefCount++;if(this._textureRefCount===1)return this._sdkType.LoadTextures(renderer)||\nPromise.resolve();else return Promise.resolve()}ReleaseTextures(){if(this._isFamily)return;this._textureRefCount--;if(this._textureRefCount<0)throw new Error(\"released textures too many times\");if(this._textureRefCount===0)this._sdkType.ReleaseTextures()}OnDynamicTextureLoadComplete(){if(this._isFamily)throw new Error(\"not applicable to family\");this._sdkType.OnDynamicTextureLoadComplete()}PreloadTexturesWithInstances(renderer){if(this._isFamily)return Promise.resolve();return this._sdkType.PreloadTexturesWithInstances(renderer)}GetRuntime(){return this._runtime}GetPlugin(){return this._plugin}GetInstanceSdkCtor(){return this._instSdkCtor}GetName(){return this._name}GetJsPropName(){return this._jsPropName}GetIndex(){return this._index}GetSID(){return this._sid}IsFamily(){return this._isFamily}IsGlobal(){return this._isGlobal}IsWorldType(){return this._isWorldType}GetFamilyIndex(){return this._familyIndex}GetBehaviorTypes(){return this._behaviorTypes}GetBehaviorTypesCount(){return this._behaviorsCount}UsesBehaviorByCtor(Ctor){return Ctor&&\nthis._usedBehaviorCtors.has(Ctor)}GetInstanceVariablesCount(){return this._instVars.length}GetInstanceVariableSIDs(){return this._instVars.map(iv=>iv.sid)}GetInstanceVariableIndexBySID(sid){return this._instVars.findIndex(iv=>iv.sid===sid)}GetInstanceVariableIndexByName(name){return this._instVars.findIndex(iv=>iv.name===name)}_GetAllInstanceVariableNames(){return this._instVars.map(iv=>iv.name)}_GetAllInstanceVariableJsPropNames(){return this._instVars.map(iv=>iv.jsPropName)}GetInstanceVariableType(i){i=\nMath.floor(i);if(i<0||i>=this._instVars.length)throw new RangeError(\"invalid instance variable index\");return this._instVars[i].type}GetInstanceVariableName(i){i=Math.floor(i);if(i<0||i>=this._instVars.length)throw new RangeError(\"invalid instance variable index\");return this._instVars[i].name}GetEffectTypesCount(){return this._effectsCount}GetBehaviorTypesIncludingInherited(){return this._behaviorTypesIncludingInherited}GetBehaviorTypeByName(name){return this._behaviorsByName.get(name.toLowerCase())||\nnull}GetBehaviorIndexByName(name){const ret=this._behaviorNameToIndex.get(name.toLowerCase());if(typeof ret===\"undefined\")return-1;else return ret}GetEffectList(){return this._effectList}HasEffects(){return this._plugin.HasEffects()}UsesEffects(){return this._effectList&&this._effectList.HasAnyEffectType()}GetSolStack(){return this._solStack}GetCurrentSol(){return this._solStack.GetCurrentSol()}GetImageInfo(){return this._imageInfo}SetDefaultInstanceData(d){this._defaultInstanceData=d}GetDefaultInstanceData(){return this._defaultInstanceData}_SetDefaultLayerIndex(i){this._defaultLayerIndex=\ni}GetDefaultLayerIndex(){return this._defaultLayerIndex}GetAnimations(){return this._animations}GetAnimationCount(){return this._animations.length}GetFamilies(){return this._families}BelongsToFamily(family){return this._familiesSet.has(family)}GetFamilyMembers(){return this._familyMembers}FamilyHasMember(objectType){return this._familyMembersSet.has(objectType)}GetFamilyBehaviorOffset(familyIndex){return this._familyBehaviorMap[familyIndex]}GetFamilyInstanceVariableOffset(familyIndex){return this._familyInstVarMap[familyIndex]}AddCustomAction(customAceBlock){this._customActionMap.set(customAceBlock.GetACEName().toLowerCase(),\ncustomAceBlock)}HasOwnCustomActionByName(name){return!!this.GetOwnCustomActionByName(name)}GetOwnCustomActionByName(name){const ret=this._customActionMap.get(name.toLowerCase());return ret&&ret.IsEnabled()?ret:null}GetAnimationByName(name){if(!this._animations)throw new Error(\"no animations\");return this._animationsByName.get(name.toLowerCase())||null}GetAnimationBySID(sid){if(!this._animations)throw new Error(\"no animations\");return this._animationsBySid.get(sid)||null}GetFirstAnimationFrame(){if(!this._animations)throw new Error(\"no animations\");\nreturn this._animations[0].GetFrameAt(0)}GetDefaultInstanceSize(){if(this._animations){const firstFrameInfo=this.GetFirstAnimationFrame().GetImageInfo();return[firstFrameInfo.GetWidth(),firstFrameInfo.GetHeight()]}else if(this._imageInfo)return[this._imageInfo.GetWidth(),this._imageInfo.GetHeight()];else return[100,100]}GetSingleGlobalInstance(){if(!this._plugin.IsSingleGlobal())throw new Error(\"not a single-global plugin\");return this._instances[0]}GetInstances(){return this._instances}*instances(){yield*this._instances}*instancesIncludingPendingCreate(){yield*this._instances;\nyield*this._runtime.instancesPendingCreateForObjectClass(this)}GetInstanceCount(){return this._instances.length}_AddInstance(inst){this._instances.push(inst)}_SetIIDsStale(){this._iidsStale=true}_UpdateIIDs(){if(!this._iidsStale||this._isFamily)return;const instances=this._instances;let i=0;for(let len=instances.length;i<len;++i)instances[i]._SetIID(i);const instancesPendingCreate=this._runtime._GetInstancesPendingCreate();for(const inst of instancesPendingCreate)if(inst.GetObjectClass()===this)inst._SetIID(i++);\nthis._iidsStale=false}GetInstanceByIID(i){const instances=this._instances;if(i<instances.length)return instances[i];i-=instances.length;const instancesPendingCreate=this._runtime._GetInstancesPendingCreate();for(const inst of instancesPendingCreate)if(inst.GetObjectClass()===this){if(i===0)return inst;--i}return null}GetFirstPicked(fromInst){if(fromInst&&fromInst.IsInContainer()&&fromInst.GetObjectClass()!==this)for(const s of fromInst.siblings())if(s.GetObjectClass()===this)return s;const instances=\nthis.GetCurrentSol().GetInstances();if(instances.length)return instances[0];else return null}GetPairedInstance(inst){const instances=this.GetCurrentSol().GetInstances();if(instances.length>0)return instances[inst.GetIID()%instances.length];else return null}*allCorrespondingInstances(inst,objectClass){const myInstances=this.GetCurrentSol().GetInstances();const myInstanceCount=myInstances.length;const otherSol=objectClass.GetCurrentSol();const otherInstances=objectClass.GetCurrentSol().GetInstances();\nconst otherInstanceCount=otherInstances.length;let index=inst.GetIID();if(objectClass.IsFamily()||!otherSol.IsSelectAll())index=otherInstances.indexOf(inst);const divisor=Math.ceil(myInstanceCount/otherInstanceCount);const remainder=myInstanceCount%otherInstanceCount;let startIndex=0;let correspondCount=0;if(remainder===0||index<remainder){startIndex=index*divisor;correspondCount=divisor}else{startIndex=remainder*divisor+(index-remainder)*(divisor-1);correspondCount=divisor-1}for(let i=startIndex,\nend=startIndex+correspondCount;i<end;++i)yield myInstances[i]}FinishCondition(f){this._sdkType.FinishCondition(f)}ApplySolToContainer(){if(!this._isInContainer||this._isFamily)return;this._UpdateIIDs();const sol1=this.GetCurrentSol();const sol1instances=sol1._GetOwnInstances();const selectAll=sol1.IsSelectAll();const es=this._runtime.GetCurrentEventStackFrame();const isOrBlock=es&&es.GetCurrentEvent()&&es.GetCurrentEvent().IsOrBlock();for(const containerType of this._container.objectTypes()){if(containerType===\nthis)continue;containerType._UpdateIIDs();const sol2=containerType.GetCurrentSol();sol2._SetSelectAll(selectAll);if(!selectAll){const sol2instances=sol2._GetOwnInstances();C3.clearArray(sol2instances);for(const inst of sol1instances)sol2instances.push(containerType.GetInstanceByIID(inst.GetIID()));if(isOrBlock){const sol1elseInstances=sol1._GetOwnElseInstances();const sol2elseInstances=sol2._GetOwnElseInstances();C3.clearArray(sol2elseInstances);for(const inst of sol1elseInstances)sol2elseInstances.push(containerType.GetInstanceByIID(inst.GetIID()))}}}}_TruncateContainerSols(useElseInstances,\ni){for(const containerType of this.GetContainer().objectTypes()){const sol=containerType.GetCurrentSol();if(useElseInstances)C3.truncateArray(sol._GetOwnElseInstances(),i);else C3.truncateArray(sol._GetOwnInstances(),i)}}_GetCollisionCellGrid(){return this._collisionGrid}_SetAnyCollisionCellChanged(c){this._anyCollisionCellChanged=!!c}_SetAnyInstanceParallaxed(p){this._anyInstanceParallaxed=!!p}IsAnyInstanceParallaxed(){return this._anyInstanceParallaxed}_UpdateAllCollisionCells(){if(!this._anyCollisionCellChanged||\n!this._isWorldType)return;for(const inst of this._instances)inst.GetWorldInfo()._UpdateCollisionCell();for(const inst of this._runtime._GetInstancesPendingCreate())if(inst.GetObjectClass()===this)inst.GetWorldInfo()._UpdateCollisionCell();this._anyCollisionCellChanged=false}GetSavedDataMap(){if(!this._savedData)this._savedData=new Map;return this._savedData}GetUnsavedDataMap(){if(!this._unsavedData)this._unsavedData=new Map;return this._unsavedData}HasSolidBehavior(){return this.UsesBehaviorByCtor(C3.Behaviors.solid)}HasJumpthruBehavior(){return this.UsesBehaviorByCtor(C3.Behaviors.jumpthru)}HasNoSaveBehavior(){return this.UsesBehaviorByCtor(C3.Behaviors.NoSave)}HasPersistBehavior(){return this.UsesBehaviorByCtor(C3.Behaviors.Persist)}_SaveToJson(){const o=\n{\"instances\":this._instances.map(inst=>inst.SaveToJson())};if(this._savedData&&this._savedData.size)o[\"ex\"]=C3.ToSuperJSON(this._savedData);return o}_LoadFromJson(o){if(this._savedData){this._savedData.clear();this._savedData=null}const ex=o[\"ex\"];if(ex)this._savedData=C3.FromSuperJSON(ex);const existingInstances=this._instances;const loadInstances=o[\"instances\"];for(let i=0,len=Math.min(existingInstances.length,loadInstances.length);i<len;++i)existingInstances[i].LoadFromJson(loadInstances[i]);for(let i=\nloadInstances.length,len=existingInstances.length;i<len;++i)this._runtime.DestroyInstance(existingInstances[i]);for(let i=existingInstances.length,len=loadInstances.length;i<len;++i){const data=loadInstances[i];let layer=null;if(this.IsWorldType()){layer=this._runtime.GetMainRunningLayout().GetLayerBySID(data[\"w\"][\"l\"]);if(!layer)continue}const inst=this._runtime.CreateInstanceFromData(this._defaultInstanceData||this,layer,false,0,0,true);inst.LoadFromJson(data)}this._loadInstancesJson=loadInstances;\nthis._SetIIDsStale()}_GetLoadInstancesJson(){return this._loadInstancesJson}_ClearLoadInstancesJson(){this._loadInstancesJson=null}_SetupSceneGraphConnectionsOnChangeOfLayout(){for(let i=0,len=this._instances;i<len;++i)this._instances[i]._SetupSceneGraphConnectionsOnChangeOfLayout()}GetIObjectClass(){return this._iObjectClass}UserScriptDispatcher(){return this._userScriptDispatcher}_GetUserScriptInstanceClass(){return this._instanceUserScriptClass}_SetUserScriptInstanceClass(Class){this._instanceUserScriptClass=\nClass}DispatchUserScriptEvent(e){const runtime=this._runtime;const shouldTime=runtime.IsDebug()&&!runtime.GetEventSheetManager().IsInEventEngine();if(shouldTime)C3Debugger.StartMeasuringScriptTime();this._userScriptDispatcher.dispatchEvent(e);if(shouldTime)C3Debugger.AddScriptTime()}};\n\n}\n\n// objects/container.js\n{\n'use strict';const C3=self.C3;C3.Container=class Container extends C3.DefendedBase{constructor(runtime,objectTypes){super();this._runtime=runtime;this._objectTypes=objectTypes;for(const objectType of this._objectTypes)objectType._SetContainer(this)}Release(){this._runtime=null}GetRuntime(){return this._runtime}GetObjectTypes(){return this._objectTypes}objectTypes(){return this._objectTypes}HasAnyWorldType(){return this._objectTypes.some(o=>o.IsWorldType())}};\n\n}\n\n// objects/instance.js\n{\n'use strict';const C3=self.C3;const C3Debugger=self.C3Debugger;const IInstance=self.IInstance;const EMPTY_ARRAY=[];let nextPuid=0;const savedDataMaps=new WeakMap;const unsavedDataMaps=new WeakMap;const FLAG_DESTROYED=1<<0;const FLAG_TILEMAP=1<<1;const FLAG_MUST_PREDRAW=1<<2;const FLAG_SOLID_ENABLED=1<<3;const FLAG_JUMPTHRU_ENABLED=1<<4;const FLAG_MUST_MITIGATE_Z_FIGHTING=1<<5;const FLAG_IS_DRAWING_WITH_EFFECTS=1<<6;\nC3.Instance=class Instance extends C3.DefendedBase{constructor(opts){super();this._runtime=opts.runtime;this._objectType=opts.objectType;this._worldInfo=null;this._sdkInst=null;this._iScriptInterface=null;this._iid=0;this._uid=opts.uid;this._puid=nextPuid++;this._flags=0;this._instVarValues=EMPTY_ARRAY;this._behaviorInstances=EMPTY_ARRAY;const behaviorTypes=this._objectType.GetBehaviorTypesIncludingInherited();if(behaviorTypes.length>0)this._behaviorInstances=behaviorTypes.map((behaviorType,index)=>\nC3.New(C3.BehaviorInstance,{runtime:this._runtime,behaviorType:behaviorType,instance:this,index}));this._siblings=this._objectType.IsInContainer()?[]:null;this._timeScale=-1;this._dispatcher=null;const plugin=this.GetPlugin();if(plugin.MustPreDraw())this._flags|=FLAG_MUST_PREDRAW;if(plugin.IsWorldType()){this._worldInfo=C3.New(C3.WorldInfo,this,opts.layer);if(opts.worldData)this._worldInfo.Init(opts.worldData);else{this._worldInfo.InitNoData();const [width,height]=this._objectType.GetDefaultInstanceSize();\nthis._worldInfo.SetSize(width,height);if(this.GetObjectClass().UsesEffects())this._worldInfo.GetInstanceEffectList().LoadDefaultEffectParameters()}}if(opts.instVarData)this._LoadInstanceVariableData(opts.instVarData);else this._LoadDefaultInstanceVariables()}Release(){if(this._iScriptInterface){this._iScriptInterface._Release();this._iScriptInterface=null}if(this._behaviorInstances.length>0){for(const behInst of this._behaviorInstances)behInst.Release();C3.clearArray(this._behaviorInstances)}this._sdkInst.Release();\nthis._sdkInst=null;const savedData=savedDataMaps.get(this);if(savedData){savedData.clear();savedDataMaps.delete(this)}const unsavedData=unsavedDataMaps.get(this);if(unsavedData){unsavedData.clear();unsavedDataMaps.delete(this)}if(this._siblings)C3.clearArray(this._siblings);if(this._dispatcher){this._dispatcher.Release();this._dispatcher=null}this._runtime=null;this._objectType=null;if(this._instVarValues.length>0)C3.clearArray(this._instVarValues);if(this._worldInfo){this._worldInfo.Release();this._worldInfo=\nnull}}_LoadInstanceVariableData(instVarData){if(instVarData.length>0){this._instVarValues=[];C3.shallowAssignArray(this._instVarValues,instVarData)}}_LoadDefaultInstanceVariables(){const len=this._objectType.GetInstanceVariablesCount();if(len===0)return;this._instVarValues=[];const typeToInitValue=[0,0,\"\"];for(let i=0;i<len;++i)this._instVarValues.push(typeToInitValue[this._objectType.GetInstanceVariableType(i)])}_CreateSdkInstance(properties,behInstProperties){if(this._sdkInst)throw new Error(\"already got sdk instance\");\nfor(let i=0,len=this._behaviorInstances.length;i<len;++i){const behInst=this._behaviorInstances[i];behInst._CreateSdkInstance(behInstProperties?behInstProperties[i]:null)}this._sdkInst=C3.New(this._objectType.GetInstanceSdkCtor(),this,properties);if(!(this._sdkInst instanceof C3.SDKInstanceBase))throw new Error(\"sdk type must derive from SDKInstanceBase\");if(!this.GetPlugin().IsWorldType()&&this._objectType._GetUserScriptInstanceClass())this.GetInterfaceClass();for(let i=0,len=this._behaviorInstances.length;i<\nlen;++i)this._behaviorInstances[i].PostCreate()}GetSdkInstance(){return this._sdkInst}GetWorldInfo(){return this._worldInfo}GetRuntime(){return this._runtime}GetTimeScale(){return this._timeScale}GetActiveTimeScale(){const ts=this._timeScale;if(ts===-1)return this.GetRuntime().GetTimeScale();else return ts}SetTimeScale(ts){ts=+ts;if(ts<0||!isFinite(ts))ts=0;this._timeScale=ts;if(this.GetObjectClass().UsesEffects())this._runtime._SetTrackingInstanceTime(this,true)}RestoreTimeScale(){this._timeScale=\n-1;if(this.GetObjectClass().UsesEffects())this._runtime._SetTrackingInstanceTime(this,false)}GetInstanceGameTime(){return this._runtime._GetInstanceGameTime(this)}Dispatcher(){if(!this._dispatcher)this._dispatcher=C3.New(C3.Event.Dispatcher);return this._dispatcher}Draw(renderer){this._sdkInst.Draw(renderer)}OnCreate(properties){this._sdkInst.OnCreate(properties)}_SetHasTilemap(){this._flags|=FLAG_TILEMAP}HasTilemap(){return(this._flags&FLAG_TILEMAP)!==0}_MarkDestroyed(){this._flags|=FLAG_DESTROYED}IsDestroyed(){return(this._flags&\nFLAG_DESTROYED)!==0}MustPreDraw(){return(this._flags&FLAG_MUST_PREDRAW)!==0}SetMustMitigateZFighting(){this._flags|=FLAG_MUST_MITIGATE_Z_FIGHTING}MustMitigateZFighting(){return(this._flags&FLAG_MUST_MITIGATE_Z_FIGHTING)!==0}_IsSolidEnabled(){return(this._flags&FLAG_SOLID_ENABLED)!==0}_SetSolidEnabled(e){if(e)this._flags|=FLAG_SOLID_ENABLED;else this._flags&=~FLAG_SOLID_ENABLED}_IsJumpthruEnabled(){return(this._flags&FLAG_JUMPTHRU_ENABLED)!==0}_SetJumpthruEnabled(e){if(e)this._flags|=FLAG_JUMPTHRU_ENABLED;\nelse this._flags&=~FLAG_JUMPTHRU_ENABLED}_IsDrawingWithEffects(){return(this._flags&FLAG_IS_DRAWING_WITH_EFFECTS)!==0}_SetIsDrawingWithEffects(e){if(e)this._flags|=FLAG_IS_DRAWING_WITH_EFFECTS;else this._flags&=~FLAG_IS_DRAWING_WITH_EFFECTS}SetFlag(bit,enable){bit<<=16;if(enable)this._flags|=bit;else this._flags&=~bit}GetFlag(bit){return(this._flags&bit<<16)!==0}GetCurrentImageInfo(){return this._sdkInst.GetCurrentImageInfo()}GetCurrentSurfaceSize(){return this._sdkInst.GetCurrentSurfaceSize()}GetCurrentTexRect(){return this._sdkInst.GetCurrentTexRect()}GetCurrentTexQuad(){return this._sdkInst.GetCurrentTexQuad()}IsCurrentTexRotated(){return this._sdkInst.IsCurrentTexRotated()}GetImagePoint(nameOrIndex){return this._sdkInst.GetImagePoint(nameOrIndex)}GetObjectClass(){return this._objectType}RendersToOwnZPlane(){return this._sdkInst.RendersToOwnZPlane()}BelongsToObjectClass(objectClass){if(objectClass.IsFamily())return objectClass.FamilyHasMember(this.GetObjectClass());\nelse return this.GetObjectClass()===objectClass}CollectInstancesToPick(pickMap,createdObjectClass,includeHierarchy){const addInst=(inst,objectClass_)=>{const objectClass=objectClass_||inst.GetObjectClass();const instSet=pickMap.get(objectClass);if(instSet)instSet.add(inst);else pickMap.set(objectClass,new Set([inst]))};addInst(this,createdObjectClass);if(this.IsInContainer())for(const s of this.siblings())addInst(s);if(includeHierarchy)for(const c of this.allChildren())addInst(c)}VerifySupportsSceneGraph(){if(!this.GetPlugin().SupportsSceneGraph())throw new Error(\"object does not support scene graph\");\n}HasParent(){return this.GetParent()!==null}GetParent(){const wi=this.GetWorldInfo();if(!wi)return null;const parentWi=wi.GetParent();return parentWi?parentWi.GetInstance():null}GetTopParent(){const wi=this.GetWorldInfo();if(!wi)return null;const parentWi=wi.GetTopParent();return parentWi?parentWi.GetInstance():null}*parents(){const wi=this.GetWorldInfo();if(!wi)return;for(const parentWi of wi.parents())yield parentWi.GetInstance()}HasChild(child){if(!child)return false;for(const c of this.children())if(c===\nchild)return true;return false}HasChildren(){const wi=this.GetWorldInfo();return wi?wi.HasChildren():false}GetChildrenOfObjectClass(objectClass){const wi=this.GetWorldInfo();if(!wi)return[];const objectClassName=objectClass.GetName();return wi.GetChildren().map(wi=>wi.GetInstance()).filter(i=>i.GetObjectClass().GetName()===objectClassName)}GetChildren(){const wi=this.GetWorldInfo();if(!wi)return[];return wi.GetChildren().map(wi=>wi.GetInstance())}*children(){const wi=this.GetWorldInfo();if(!wi)return;\nfor(const childWi of wi.children())yield childWi.GetInstance()}*allChildren(){const wi=this.GetWorldInfo();if(!wi)return;for(const childWi of wi.allChildren())yield childWi.GetInstance()}GetChildCount(){const wi=this.GetWorldInfo();return wi?wi.GetChildCount():0}GetParentCount(){return[...this.parents()].length}GetAllChildCount(){const wi=this.GetWorldInfo();return wi?wi.GetAllChildCount():0}GetChildAt(index){const wi=this.GetWorldInfo();if(!wi)return null;const childWi=wi.GetChildAt(index);return childWi?\nchildWi.GetInstance():null}AddChild(childInst,opts){this.VerifySupportsSceneGraph();childInst.VerifySupportsSceneGraph();this.GetWorldInfo().AddChild(childInst.GetWorldInfo(),opts||{})}RemoveChild(childInst){const wi=this.GetWorldInfo();if(!wi)return;wi.RemoveChild(childInst.GetWorldInfo())}GetDestroyWithParent(){const wi=this.GetWorldInfo();return wi?wi.GetDestroyWithParent():false}SetupInitialSceneGraphConnections(){const wi=this.GetWorldInfo();if(!wi)return;const childrenData=wi.GetSceneGraphChildrenExportData();\nif(!childrenData)return;for(const childData of childrenData){const child=this._runtime.GetInstanceByUID(childData[2]);if(child){const flags=childData[3];this.AddChild(child,{transformX:!!(flags>>0&1),transformY:!!(flags>>1&1),transformWidth:!!(flags>>2&1),transformHeight:!!(flags>>3&1),transformAngle:!!(flags>>4&1),destroyWithParent:!!(flags>>5&1),transformZElevation:!!(flags>>6&1),transformOpacity:!!(flags>>7&1),transformVisibility:!!(flags>>8&1)})}}}SetupPersistedSceneGraphConnections(instanceToPersistedDataMap,\npersistedIndexToInstanceMap){const persistedData=instanceToPersistedDataMap.get(this);if(!persistedData)return;for(const persistedChildData of persistedData[\"sceneGraphJson\"][\"children\"]){const child=persistedIndexToInstanceMap.get(persistedChildData[\"index\"]);if(!child)continue;const flags=persistedChildData[\"flags\"];this.AddChild(child,{transformX:!!(flags>>0&1),transformY:!!(flags>>1&1),transformWidth:!!(flags>>2&1),transformHeight:!!(flags>>3&1),transformAngle:!!(flags>>4&1),destroyWithParent:!!(flags>>\n5&1),transformZElevation:!!(flags>>6&1),transformOpacity:!!(flags>>7&1),transformVisibility:!!(flags>>8&1)})}}GetTemplateName(){const templateManager=this._runtime.GetTemplateManager();return templateManager?templateManager.GetInstanceTemplateName(this):\"\"}IsInContainer(){return this._siblings!==null}_AddSibling(inst){this._siblings.push(inst)}GetSiblings(){return this._siblings}HasSibling(objectClass){return!!this.GetSibling(objectClass)}GetSibling(objectClass){const siblings=this.siblings();if(siblings===\nnull||siblings.length===0)return false;for(const s of siblings)if(s.GetObjectClass()===objectClass)return s;return null}siblings(){return this._siblings}SetSiblingsSinglePicked(){for(const s of this.siblings())s.GetObjectClass().GetCurrentSol().SetSinglePicked(s)}_PushSiblingsToSolInstances(){for(const s of this.siblings())s.GetObjectClass().GetCurrentSol()._PushInstance(s)}_SetSiblingsToSolInstancesIndex(i){for(const s of this.siblings())s.GetObjectClass().GetCurrentSol()._GetOwnInstances()[i]=s}_PushSiblingsToSolElseInstances(){for(const s of this.siblings())s.GetObjectClass().GetCurrentSol()._PushElseInstance(s)}_SetSiblingsToSolElseInstancesIndex(i){for(const s of this.siblings())s.GetObjectClass().GetCurrentSol()._GetOwnElseInstances()[i]=\ns}GetPlugin(){return this._objectType.GetPlugin()}_SetIID(i){this._iid=i}GetIID(){this._objectType._UpdateIIDs();return this._iid}GetUID(){return this._uid}GetPUID(){return this._puid}GetBehaviorInstances(){return this._behaviorInstances}GetBehaviorInstanceFromCtor(ctor){if(!ctor)return null;for(const behInst of this._behaviorInstances)if(behInst.GetBehavior()instanceof ctor)return behInst;return null}GetBehaviorSdkInstanceFromCtor(ctor){if(!ctor)return null;const behInst=this.GetBehaviorInstanceFromCtor(ctor);\nif(behInst)return behInst.GetSdkInstance();else return null}GetBehaviorIndexBySID(sid){const behaviorInstances=this._behaviorInstances;for(let i=0,len=behaviorInstances.length;i<len;++i)if(behaviorInstances[i].GetBehaviorType().GetSID()===sid)return i;return-1}GetAllInstanceVariableValues(){return this._instVarValues}_GetAllInstanceVariableNames(){return this._objectType._GetAllInstanceVariableNames()}GetInstanceVariableCount(){return this._instVarValues.length}GetInstanceVariableValue(index){index=\nindex|0;const instVarValues=this._instVarValues;if(index<0||index>=instVarValues.length)throw new RangeError(\"invalid instance variable\");return instVarValues[index]}_GetInstanceVariableValueUnchecked(index){return this._instVarValues[index]}_GetInstanceVariableTypedValue(index){const ret=this._instVarValues[index];if(this._objectType.GetInstanceVariableType(index)===0)return!!ret;else return ret}SetInstanceVariableValue(index,value){index=index|0;const instVarValues=this._instVarValues;if(index<\n0||index>=instVarValues.length)throw new RangeError(\"invalid instance variable\");const type=this._objectType.GetInstanceVariableType(index);switch(type){case 0:instVarValues[index]=value?1:0;break;case 1:instVarValues[index]=typeof value===\"number\"?value:parseFloat(value);break;case 2:instVarValues[index]=typeof value===\"string\"?value:value.toString();break;default:throw new Error(\"unknown instance variable type\");}}SetInstanceVariableOffset(index,offset){if(offset===0)return;index=index|0;const instVarValues=\nthis._instVarValues;if(index<0||index>=instVarValues.length)throw new RangeError(\"invalid instance variable\");const lastValue=instVarValues[index];if(typeof lastValue===\"number\")if(typeof offset===\"number\")instVarValues[index]+=offset;else instVarValues[index]+=parseFloat(offset);else if(typeof lastValue===\"boolean\")throw new Error(\"can not set offset of boolean variable\");else if(typeof lastValue===\"string\")throw new Error(\"can not set offset of string variable\");else throw new Error(\"unknown instance variable type\");\n}GetSavedDataMap(){let ret=savedDataMaps.get(this);if(ret)return ret;ret=new Map;savedDataMaps.set(this,ret);return ret}GetUnsavedDataMap(){let ret=unsavedDataMaps.get(this);if(ret)return ret;ret=new Map;unsavedDataMaps.set(this,ret);return ret}_HasAnyCreateDestroyHandler(name){const objectType=this.GetObjectClass();if(objectType.UserScriptDispatcher().HasAnyHandlerFor(name))return true;for(const family of objectType.GetFamilies())if(family.UserScriptDispatcher().HasAnyHandlerFor(name))return true;\nif(this._runtime.UserScriptDispatcher().HasAnyHandlerFor(name))return true;return false}_TriggerOnCreatedOnSelfAndRelated(){const instancesToTriggerOnCreated=new Set;instancesToTriggerOnCreated.add(this);const wi=this.GetWorldInfo();if(wi&&wi.HasChildren())for(const c of this.allChildren()){instancesToTriggerOnCreated.add(c);if(!c.IsInContainer())continue;for(const s of c.siblings())instancesToTriggerOnCreated.add(s)}if(this.IsInContainer())for(const s of this.siblings())instancesToTriggerOnCreated.add(s);\nfor(const instance of instancesToTriggerOnCreated.values())instance._TriggerOnCreated()}_TriggerOnCreated(){if(this._objectType._GetUserScriptInstanceClass())this.GetInterfaceClass();if(this._HasAnyCreateDestroyHandler(\"instancecreate\")){const objectType=this.GetObjectClass();const instCreateEvent=new C3.Event(\"instancecreate\");instCreateEvent.instance=this.GetInterfaceClass();objectType.DispatchUserScriptEvent(instCreateEvent);for(const family of objectType.GetFamilies())family.DispatchUserScriptEvent(instCreateEvent);\nthis._runtime.DispatchUserScriptEvent(instCreateEvent)}this._runtime.Trigger(this.GetPlugin().constructor.Cnds.OnCreated,this,null)}_TriggerOnDestroyed(){this._runtime.Trigger(this.GetPlugin().constructor.Cnds.OnDestroyed,this,null)}_FireDestroyedScriptEvents(isEndingLayout){if(this._iScriptInterface){const e=new C3.Event(\"destroy\");e.isEndingLayout=isEndingLayout;this.DispatchUserScriptEvent(e)}if(!this._HasAnyCreateDestroyHandler(\"instancedestroy\"))return;const objectType=this.GetObjectClass();\nconst instDestroyEvent=new C3.Event(\"instancedestroy\");instDestroyEvent.instance=this.GetInterfaceClass();instDestroyEvent.isEndingLayout=isEndingLayout;objectType.DispatchUserScriptEvent(instDestroyEvent);for(const family of objectType.GetFamilies())family.DispatchUserScriptEvent(instDestroyEvent);this._runtime.DispatchUserScriptEvent(instDestroyEvent)}_GetDebuggerProperties(){return this._sdkInst.GetDebuggerProperties()}SaveToJson(mode=\"full\"){const o={};if(mode===\"full\")o[\"uid\"]=this.GetUID();\nelse o[\"c3\"]=true;if(mode!==\"visual-state\"){const savedData=savedDataMaps.get(this);if(savedData&&savedData.size)o[\"ex\"]=C3.ToSuperJSON(savedData);if(this.GetTimeScale()!==-1)o[\"mts\"]=this.GetTimeScale();if(this._objectType.GetInstanceVariablesCount()>0){const ivs={};const ivSids=this._objectType.GetInstanceVariableSIDs();for(let i=0,len=this._instVarValues.length;i<len;++i)ivs[ivSids[i].toString()]=this._instVarValues[i];o[\"ivs\"]=ivs}if(this._behaviorInstances.length){const behs={};for(const behInst of this._behaviorInstances){const data=\nbehInst.SaveToJson();if(data)behs[behInst.GetBehaviorType().GetSID().toString()]=data}o[\"behs\"]=behs}}if(this._worldInfo)o[\"w\"]=this._worldInfo._SaveToJson(mode);const ownData=this._sdkInst.SaveToJson();if(ownData)o[\"data\"]=ownData;return o}_OnBeforeLoad(mode=\"full\"){if(this._worldInfo)this._worldInfo._OnBeforeLoad(mode)}_OnAfterLoad(o,mode=\"full\",opts=null){if(this._worldInfo)this._worldInfo._OnAfterLoad(o,mode,opts)}_OnAfterLoad2(o,mode=\"full\",opts=null){if(this._worldInfo)this._worldInfo._OnAfterLoad2(o,\nmode,opts)}_SetupSceneGraphConnectionsOnChangeOfLayout(){if(!this.GetPlugin().IsWorldType())return;this._worldInfo._SetupSceneGraphConnectionsOnChangeOfLayout()}LoadFromJson(o,mode=\"full\"){if(mode===\"full\")this._uid=o[\"uid\"];else if(!o[\"c3\"])return;if(mode!==\"visual-state\"){let savedData=savedDataMaps.get(this);if(savedData){savedData.clear();savedDataMaps.delete(this)}const ex=o[\"ex\"];if(ex){savedData=C3.FromSuperJSON(ex);savedDataMaps.set(this,savedData)}this._timeScale=o.hasOwnProperty(\"mts\")?\no[\"mts\"]:-1;const ivs=o[\"ivs\"];if(ivs)for(const [sidStr,value]of Object.entries(ivs)){const sid=parseInt(sidStr,10);const index=this._objectType.GetInstanceVariableIndexBySID(sid);if(index<0||index>=this._instVarValues.length)continue;let v=value;if(v===null)v=NaN;this._instVarValues[index]=v}}if(this.GetPlugin().IsWorldType()){const worldData=o[\"w\"];const layerSid=worldData[\"l\"];if(this._worldInfo.GetLayer().GetSID()!==layerSid){const oldLayer=this._worldInfo.GetLayer();const newLayer=oldLayer.GetLayout().GetLayerBySID(layerSid);\nif(newLayer){this._worldInfo._SetLayer(newLayer);oldLayer._RemoveInstance(this,true);newLayer._AddInstance(this,true);newLayer.SetZIndicesChanged();this._worldInfo.SetBboxChanged()}else if(mode===\"full\")this._runtime.DestroyInstance(this)}this._worldInfo._LoadFromJson(worldData,mode)}if(mode!==\"visual-state\"){const behs=o[\"behs\"];if(behs)for(const [sidStr,data]of Object.entries(behs)){const sid=parseInt(sidStr,10);const index=this.GetBehaviorIndexBySID(sid);if(index<0||index>=this._behaviorInstances.length)continue;\nthis._behaviorInstances[index].LoadFromJson(data)}}const ownData=o[\"data\"];if(ownData)this._sdkInst.LoadFromJson(ownData,mode)}GetInterfaceClass(){return this._iScriptInterface||this._InitUserScriptInterface()}HasScriptInterface(){return!!this._iScriptInterface}_InitUserScriptInterface(){const DefaultScriptClass=this._worldInfo?self.IWorldInstance:IInstance;const SdkScriptClass=this._sdkInst.GetScriptInterfaceClass();const UserScriptClass=this._objectType._GetUserScriptInstanceClass();const ScriptInterfaceClass=\nUserScriptClass||SdkScriptClass||DefaultScriptClass;IInstance._Init(this);this._iScriptInterface=new ScriptInterfaceClass;IInstance._Init(null);if(SdkScriptClass&&!(this._iScriptInterface instanceof DefaultScriptClass))throw new TypeError(`script interface class '${SdkScriptClass.name}' does not extend the right base class '${DefaultScriptClass.name}'`);if(UserScriptClass){const ExpectedBaseClass=SdkScriptClass||DefaultScriptClass;if(!(this._iScriptInterface instanceof ExpectedBaseClass))throw new TypeError(`setInstanceClass(): class '${UserScriptClass.name}' does not extend the right base class '${ExpectedBaseClass.name}'`);\n}return this._iScriptInterface}_GetInstVarsScriptDescriptor(instDescriptors){if(this._instVarValues.length===0)return;const varDescriptors={};const instVarJsPropNames=this._objectType._GetAllInstanceVariableJsPropNames();for(let i=0,len=instVarJsPropNames.length;i<len;++i)varDescriptors[instVarJsPropNames[i]]={configurable:false,enumerable:true,get:C3.Instance.prototype._GetInstanceVariableTypedValue.bind(this,i),set:C3.Instance.prototype.SetInstanceVariableValue.bind(this,i)};const instVarsObj=Object.create(Object.prototype,\nvarDescriptors);instDescriptors.instVars={value:instVarsObj,writable:false}}_GetBehaviorsScriptDescriptor(instDescriptors){const behaviorInstances=this._behaviorInstances;if(behaviorInstances.length===0)return;const behDescriptors={};for(const behInst of behaviorInstances)behDescriptors[behInst.GetBehaviorType().GetJsPropName()]={value:behInst.GetScriptInterface(),writable:false};const behaviorsObj=Object.create(Object.prototype,behDescriptors);instDescriptors.behaviors={value:behaviorsObj,writable:false}}DispatchUserScriptEvent(e){if(!this.HasScriptInterface())return;\nconst scriptInterface=this.GetInterfaceClass();e.instance=scriptInterface;const runtime=this._runtime;const shouldTime=runtime.IsDebug()&&!runtime.GetEventSheetManager().IsInEventEngine();if(shouldTime)C3Debugger.StartMeasuringScriptTime();scriptInterface.dispatchEvent(e);if(shouldTime)C3Debugger.AddScriptTime()}};\n\n}\n\n// objects/sceneGraphInfo.js\n{\n'use strict';const C3=self.C3;\nC3.SceneGraphInfo=class SceneGraphInfo extends C3.DefendedBase{constructor(owner){super();this._owner=owner;this._parent=null;this._children=[];this._startWidth=owner.GetWidth();this._startHeight=owner.GetHeight();this._startScaleX=1;this._startScaleY=1;this._parentStartAngle=0;this._ownOpacity=1;this._startOpacity=owner.GetOpacity();this._tmpSceneGraphChildren=null;this._tmpSceneGraphChildrenIndexes=null}Release(){this._parent=null;this._tmpSceneGraphChildren=null;this._tmpSceneGraphChildrenIndexes=null;\nC3.clearArray(this._children)}SetParent(parent){this._ownOpacity=this._owner.GetOpacity();this._startOpacity=this._ownOpacity;this._parent=parent;this._parentStartAngle=parent?parent.GetAngle():0}GetParent(){return this._parent}HasChildren(){return this._children.length>0}GetChildren(){return this._children}_MaybeSortChildren(){if(!this.HasChildren())return;if(!this._tmpSceneGraphChildrenIndexes)return;if(this._children.length===1)return;this._children.sort((f,s)=>{const fIndex=this._tmpSceneGraphChildrenIndexes.get(f.GetInstance());\nconst sIndex=this._tmpSceneGraphChildrenIndexes.get(s.GetInstance());if(C3.IsFiniteNumber(fIndex)&&C3.IsFiniteNumber(sIndex))return fIndex-sIndex;return 0})}GetStartScaleX(){return this._startScaleX}SetStartScaleX(sx){this._startScaleX=sx}GetStartScaleY(){return this._startScaleY}SetStartScaleY(sy){this._startScaleY=sy}GetStartOpacity(){return this._startOpacity}GetOwnOpacity(){return this._ownOpacity}SetOwnOpacity(ownOpacity){this._ownOpacity=ownOpacity}_GetStartWidth(){if(this._startWidth===0)return Number.EPSILON;\nreturn this._startWidth}_GetStartHeight(){if(this._startHeight===0)return Number.EPSILON;return this._startHeight}GetParentScaleX(){if(this._owner.GetTransformWithParentWidth()){const p=this._parent;let cw=p.GetWidth();let sw=p._GetSceneGraphInfo()._GetStartWidth();if(cw===0)cw=Number.EPSILON;if(sw===Number.EPSILON&&cw===Number.EPSILON)return 1;if(sw===Number.EPSILON&&cw!==Number.EPSILON){const sdkIntance=p.GetInstance().GetSdkInstance();if(sdkIntance.IsOriginalSizeKnown())return 1+cw/sdkIntance.GetOriginalWidth()}return cw/\nsw}return 1}GetParentScaleY(){if(this._owner.GetTransformWithParentHeight()){const p=this._parent;let ch=p.GetHeight();let sh=p._GetSceneGraphInfo()._GetStartHeight();if(ch===0)ch=Number.EPSILON;if(sh===Number.EPSILON&&ch===Number.EPSILON)return 1;if(sh===Number.EPSILON&&ch!==Number.EPSILON){const sdkIntance=p.GetInstance().GetSdkInstance();if(sdkIntance.IsOriginalSizeKnown())return 1+ch/sdkIntance.GetOriginalHeight()}return ch/sh}return 1}GetParentStartAngle(){return this._parentStartAngle}_SaveToJson(mode){return{\"sw\":this._startWidth,\n\"sh\":this._startHeight,\"sx\":this._startScaleX,\"sy\":this._startScaleY,\"psa\":this._parentStartAngle,\"oo\":this._ownOpacity,\"so\":this._startOpacity,\"p\":this._GetParentJson(mode),\"c\":this._GetChildrenJson(mode)}}_GetFlagsString(wi){let flagsStr=\"\";if(wi.GetTransformWithParentX())flagsStr+=\"x\";if(wi.GetTransformWithParentY())flagsStr+=\"y\";if(wi.GetTransformWithParentWidth())flagsStr+=\"w\";if(wi.GetTransformWithParentHeight())flagsStr+=\"h\";if(wi.GetTransformWithParentAngle())flagsStr+=\"a\";if(wi.GetTransformWithParentZElevation())flagsStr+=\n\"z\";if(wi.GetDestroyWithParent())flagsStr+=\"d\";if(wi.GetTransformWithParentOpacity())flagsStr+=\"o\";if(wi.GetTransformWithParentVisibility())flagsStr+=\"v\";return flagsStr}_GetParentJson(mode){if(!this._parent)return null;if(!this._parent.GetInstance()||this._parent.GetInstance().IsDestroyed())return null;return this._GetInstanceJson(this._parent,this._owner,mode)}_GetChildrenJson(mode){return this._children.map(c=>{return this._GetInstanceJson(c,c,mode)})}_GetInstanceJson(wi,flagsSource,mode){const inst=\nwi.GetInstance();const ret={};ret[\"uid\"]=inst.GetUID();ret[\"f\"]=this._GetFlagsString(flagsSource);ret[\"offsets\"]=flagsSource._SaveSceneGraphPropertiesToJson();ret[\"data\"]=C3.SceneGraphInfo.GetSceneGraphInstanceDataFromInstance(inst);ret[\"oci\"]=inst.GetObjectClass().GetIndex();if(mode===\"state\"){ret[\"inst\"]=inst.SaveToJson();ret[\"instIndex\"]=NaN}else{ret[\"instIndex\"]=inst.GetObjectClass().GetInstances().indexOf(inst);ret[\"inst\"]=null}return ret}_LoadFromJson(o){this._startWidth=o[\"sw\"];this._startHeight=\no[\"sh\"];this._startScaleX=o[\"sx\"];this._startScaleY=o[\"sy\"];this._parentStartAngle=o[\"psa\"];this._ownOpacity=o[\"oo\"];this._startOpacity=o[\"so\"]}_SetTmpSceneGraphChildren(tmpSceneGraphChildren,tmpSceneGraphChildrenIndexes){this._tmpSceneGraphChildren=tmpSceneGraphChildren;this._tmpSceneGraphChildrenIndexes=tmpSceneGraphChildrenIndexes}_OnAfterLoad(o,opts){const owner=this._owner;const runtime=owner.GetRuntime();const processedExistingWis=new Set;if(o[\"p\"]&&!this._parent){const parentUid=o[\"p\"][\"uid\"];\nconst parentInst=runtime.GetInstanceByUID(parentUid);if(opts&&!opts.ignoreMissingInstances);if(parentInst){const parentWi=parentInst.GetWorldInfo();if(parentInst.HasChild(this._owner.GetInstance()))this._parent=parentWi;else{parentInst.AddChild(this._owner.GetInstance(),this._GetFlagsObj(o[\"p\"][\"f\"]));if(!processedExistingWis.has(this._owner))this._owner._LoadSceneGraphPropertiesFromJson(o[\"p\"][\"offsets\"]);processedExistingWis.add(this._owner);const pwi=parentInst.GetWorldInfo();pwi._GetSceneGraphInfo()._MaybeSortChildren()}}else if(C3.IsFiniteNumber(o[\"p\"][\"oci\"])){const objectClass=\nruntime.GetObjectClassByIndex(o[\"p\"][\"oci\"]);const system=runtime.GetSystemPlugin();const parentInstance=runtime.CreateInstance(objectClass,owner.GetLayer(),0,0,true);if(opts&&!opts.ignoreMissingInstances);if(parentInstance){const instData=this._GetInstanceData(o[\"p\"],runtime);parentInstance.LoadFromJson(instData);const parentWi=parentInstance.GetWorldInfo();parentWi.GetLayer().SortAndAddInstancesByZIndex(parentInstance);parentInstance.AddChild(owner.GetInstance(),this._GetFlagsObj(o[\"p\"][\"f\"]));\nconst pwi=parentInstance.GetWorldInfo();pwi._GetSceneGraphInfo()._MaybeSortChildren()}}}const childInstances=[];for(const childData of o[\"c\"]){const childUid=childData[\"uid\"];const childInst=runtime.GetInstanceByUID(childUid);if(childInst)childInstances.push(childInst)}let childIndex=0;for(const childData of o[\"c\"]){const childUid=childData[\"uid\"];const childInst=runtime.GetInstanceByUID(childUid);if(opts&&!opts.ignoreMissingInstances);if(childInst){if(this._tmpSceneGraphChildren&&this._tmpSceneGraphChildren[childIndex]){const existingChildIntance=\nthis._tmpSceneGraphChildren[childIndex];if(existingChildIntance.GetObjectClass()!==childInst.GetObjectClass()){childIndex++;continue}if(existingChildIntance.IsDestroyed()){childIndex++;continue}const newChildData=o[\"c\"][childIndex];if(opts&&opts.alwaysApplyJson)this._AddAndSetChildInstance(existingChildIntance.GetWorldInfo(),newChildData,processedExistingWis,true);else this._AddAndSetChildInstance(existingChildIntance.GetWorldInfo(),newChildData,processedExistingWis,false);childIndex++;continue}const objectClass=\nchildInst.GetObjectClass();const childrenCount=this._GetInstancesOfObjectClassCount(childInstances,objectClass);const childrenOfClassCount=owner.GetInstance().GetChildrenOfObjectClass(objectClass).length;if(childrenCount===childrenOfClassCount){const existingChild=owner.GetInstance().GetChildAt(childIndex);const existingChildWi=existingChild.GetWorldInfo();if(existingChildWi){if(!processedExistingWis.has(existingChildWi))existingChildWi._LoadSceneGraphPropertiesFromJson(childData[\"offsets\"]);processedExistingWis.add(existingChildWi)}childIndex++;\ncontinue}if(childInst.HasParent()){const childWi=this._CreateNewChildInstance(childData,opts);this._AddAndSetChildInstance(childWi,childData,processedExistingWis);childIndex++;continue}this._AddAndSetChildInstance(childInst.GetWorldInfo(),childData,processedExistingWis)}else if(this._tmpSceneGraphChildren&&this._tmpSceneGraphChildren[childIndex]){const existingChildIntance=this._tmpSceneGraphChildren[childIndex];const objectClass=runtime.GetObjectClassByIndex(this._GetObjectClassIndex(childData));\nif(existingChildIntance.GetObjectClass()!==objectClass){childIndex++;continue}if(existingChildIntance.IsDestroyed()){childIndex++;continue}const newChildData=o[\"c\"][childIndex];this._AddAndSetChildInstance(existingChildIntance.GetWorldInfo(),newChildData,processedExistingWis)}else{const childWi=this._CreateNewChildInstance(childData,opts);this._AddAndSetChildInstance(childWi,childData,processedExistingWis)}childIndex++}}_GetFlagsObj(flagsString){const opts={};opts.transformX=flagsString.includes(\"x\");\nopts.transformY=flagsString.includes(\"y\");opts.transformWidth=flagsString.includes(\"w\");opts.transformHeight=flagsString.includes(\"h\");opts.transformAngle=flagsString.includes(\"a\");opts.transformZElevation=flagsString.includes(\"z\");opts.destroyWithParent=flagsString.includes(\"d\");opts.transformOpacity=flagsString.includes(\"o\");opts.transformVisibility=flagsString.includes(\"v\");return opts}_GetObjectClassIndex(childData){if(C3.IsFiniteNumber(childData[\"oci\"]))return childData[\"oci\"];return childData[1]}_CreateNewChildInstance(childData,\nopts){if(!C3.IsFiniteNumber(childData[\"oci\"]))return;const owner=this._owner;const runtime=owner.GetRuntime();let childInstance;if(childData[\"data\"])childInstance=runtime.CreateInstanceFromData(childData[\"data\"],owner.GetLayer(),false,0,0,false,true);else{const objectClass=runtime.GetObjectClassByIndex(childData[\"oci\"]);childInstance=runtime.CreateInstance(objectClass,owner.GetLayer(),0,0,true)}if(opts&&!opts.ignoreMissingInstances);if(!childInstance)return;const instData=this._GetInstanceData(childData,\nruntime);childInstance.LoadFromJson(instData);const childWi=childInstance.GetWorldInfo();childWi.GetLayer().SortAndAddInstancesByZIndex(childInstance,true);return childWi}_AddAndSetChildInstance(childWi,childData,processedExistingWis,setJson=true){const owner=this._owner;const added=owner.AddChild(childWi,this._GetFlagsObj(childData[\"f\"]));if(added&&setJson){if(!processedExistingWis.has(childWi))childWi._LoadSceneGraphPropertiesFromJson(childData[\"offsets\"]);processedExistingWis.add(childWi)}this._MaybeSortChildren()}_GetInstancesOfObjectClassCount(instances,\nobjectClass){return instances.filter(i=>i.GetObjectClass().GetName()===objectClass.GetName()).length}_GetInstanceData(json,runtime){if(C3.IsFiniteNumber(json[\"instIndex\"])){const objectClass=runtime.GetObjectClassByIndex(json[\"oci\"]);const instancesJson=objectClass._GetLoadInstancesJson();return instancesJson[json[\"instIndex\"]]}else if(C3.IsString(json[\"inst\"]))return JSON.parse(json[\"inst\"]);else if(json[\"inst\"])return json[\"inst\"]}static GetSceneGraphInstanceDataFromInstance(sourceInstance){let instData=\nsourceInstance.GetWorldInfo().GetLayer().GetInitialInstanceData(sourceInstance.GetUID());if(!instData)return null;instData=JSON.parse(JSON.stringify(instData));const newSgiData=[];for(const child of[...sourceInstance.GetChildren()]){const childWi=child.GetWorldInfo();newSgiData.push([childWi.GetLayout().GetSID(),childWi.GetLayer().GetIndex(),child.GetUID(),C3.SceneGraphInfo._GetFlagsNumber(childWi),child.GetObjectClass().IsInContainer()?1:0,childWi.GetZIndex(),C3.SceneGraphInfo.GetSceneGraphInstanceDataFromInstance(child)])}if(C3.IsArray(instData[0][14]))instData[0][14][1]=\nnewSgiData;else{instData[0][14]=[];instData[0][14][0]=C3.SceneGraphInfo._GetDefaultFlagsNumber();instData[0][14][1]=newSgiData;instData[0][14][2]=sourceInstance.GetWorldInfo().GetZIndex()}return instData}static _GetFlagsNumber(wi){let flagsNumber=0;flagsNumber|=Number(wi.GetTransformWithParentVisibility())<<8;flagsNumber|=Number(wi.GetTransformWithParentOpacity())<<7;flagsNumber|=Number(wi.GetTransformWithParentZElevation())<<6;flagsNumber|=Number(wi.GetDestroyWithParent())<<5;flagsNumber|=Number(wi.GetTransformWithParentAngle())<<\n4;flagsNumber|=Number(wi.GetTransformWithParentHeight())<<3;flagsNumber|=Number(wi.GetTransformWithParentWidth())<<2;flagsNumber|=Number(wi.GetTransformWithParentY())<<1;flagsNumber|=Number(wi.GetTransformWithParentX())<<0;return flagsNumber}static _GetDefaultFlagsNumber(wi){let flagsNumber=0;flagsNumber|=1<<8;flagsNumber|=1<<7;flagsNumber|=1<<6;flagsNumber|=1<<5;flagsNumber|=1<<4;flagsNumber|=1<<3;flagsNumber|=1<<2;flagsNumber|=1<<1;flagsNumber|=1<<0;return flagsNumber}};\n\n}\n\n// objects/worldInfo.js\n{\n'use strict';const C3=self.C3;const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const vec4=glMatrix.vec4;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);const bboxChangeEvent=C3.New(C3.Event,\"bboxchange\",false);const tempColor=C3.New(C3.Color,0,0,0,0);const tempCollisionPoly=C3.New(C3.CollisionPoly);const DEFAULT_COLOR=C3.New(C3.Color,1,1,1,1);const DEFAULT_RENDER_CELLS=C3.New(C3.Rect,0,0,-1,-1);const DEFAULT_COLLISION_CELLS=C3.New(C3.Rect,0,0,-1,-1);\nconst VALID_SET_MESH_POINT_MODES=new Set([\"absolute\",\"relative\"]);const EMPTY_ARRAY=[];let enableUpdateRendererStateGroup=true;const FLAG_IS_VISIBLE=1<<0;const FLAG_BBOX_CHANGED=1<<1;const FLAG_ENABLE_BBOX_CHANGED_EVENT=1<<2;const FLAG_COLLISION_ENABLED=1<<3;const FLAG_COLLISION_CELL_CHANGED=1<<4;const FLAG_SOLID_FILTER_INCLUSIVE=1<<5;const FLAG_HAS_ANY_ACTIVE_EFFECT=1<<6;const FLAG_IS_ROTATABLE=1<<7;const FLAG_DESTROYED=1<<8;const FLAG_DESTROY_WITH_PARENT=1<<9;\nconst FLAG_TRANSFORM_WITH_PARENT_X=1<<10;const FLAG_TRANSFORM_WITH_PARENT_Y=1<<11;const FLAG_TRANSFORM_WITH_PARENT_W=1<<12;const FLAG_TRANSFORM_WITH_PARENT_H=1<<13;const FLAG_TRANSFORM_WITH_PARENT_A=1<<14;const FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION=1<<15;const FLAG_TRANSFORM_WITH_PARENT_OPACITY=1<<22;const FLAG_TRANSFORM_WITH_PARENT_VISIBILITY=1<<23;\nconst MASK_ALL_SCENE_GRAPH_FLAGS=FLAG_DESTROY_WITH_PARENT|FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y|FLAG_TRANSFORM_WITH_PARENT_W|FLAG_TRANSFORM_WITH_PARENT_H|FLAG_TRANSFORM_WITH_PARENT_A|FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION|FLAG_TRANSFORM_WITH_PARENT_OPACITY|FLAG_TRANSFORM_WITH_PARENT_VISIBILITY;const FLAG_MESH_CHANGED=1<<16;const FLAG_PHYSICS_BODY_CHANGED=1<<17;const FLAG_SIN_COS_ANGLE_CHANGED=1<<18;const FLAG_USE_POINTS_SHADER_PROGRAM=1<<19;const FLAG_DRAW_BACK_FACE_ONLY=1<<20;\nconst FLAG_DRAW_NON_BACK_FACES_ONLY=1<<21;const FLAG_BLEND_MODE_BIT_OFFSET=26;const FLAG_BLEND_MODE_MASK=31<<FLAG_BLEND_MODE_BIT_OFFSET;const sceneGraphExportDataMap=new WeakMap;const sceneGraphZIndexMap=new WeakMap;\nC3.WorldInfo=class WorldInfo extends C3.DefendedBase{constructor(inst,layer){super();this._inst=inst;this._objectClass=inst.GetObjectClass();this._runtime=inst.GetRuntime();this._layer=layer;this._zIndex=-1;this._flags=FLAG_IS_VISIBLE|FLAG_BBOX_CHANGED|FLAG_COLLISION_ENABLED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED|FLAG_PHYSICS_BODY_CHANGED;if(this._objectClass.GetPlugin().IsRotatable())this._flags|=FLAG_IS_ROTATABLE;this._x=NaN;this._y=NaN;this._zElevation=NaN;this._w=NaN;this._h=NaN;this._depth=\nNaN;this._a=NaN;this._sinA=NaN;this._cosA=NaN;this._ox=NaN;this._oy=NaN;this._boundingBox=C3.New(C3.Rect);this._boundingQuad=C3.New(C3.Quad);this._collisionCells=DEFAULT_COLLISION_CELLS;this._renderCells=DEFAULT_RENDER_CELLS;this._sourceCollisionPoly=null;this._transformedPolyInfo=null;this._solidFilterTags=null;this._color=DEFAULT_COLOR;this._colorPremultiplied=DEFAULT_COLOR;this._stateGroup=null;this._instanceEffectList=null;if(this._inst.GetObjectClass().UsesEffects())this._instanceEffectList=\nC3.New(C3.InstanceEffectList,this._inst,this);this._sceneGraphInfo=null;this._tmpSceneGraphChildren=null;this._tmpSceneGraphChildrenIndexes=null;this._tmpHierarchyPosition=-1;this._meshInfo=null}_MarkDestroyed(){this._flags|=FLAG_DESTROYED}Release(){if(this._stateGroup){this._runtime.GetRenderer().ReleaseStateGroup(this._stateGroup);this._stateGroup=null}this._sourceCollisionPoly=null;if(this._transformedPolyInfo){this._transformedPolyInfo.poly.Release();this._transformedPolyInfo=null}if(this._solidFilterTags){this._solidFilterTags.clear();\nthis._solidFilterTags=null}this.ReleaseMesh();if(this._instanceEffectList)this._instanceEffectList.Release();if(this.HasParent())this.GetParent().RemoveChild(this);if(this.HasChildren()){const childrenToRelease=[...this.GetChildren()];for(const child of childrenToRelease)this.RemoveChild(child)}this._ReleaseSceneGraphInfo();this._ReleaseTmpSceneGraphInfo();sceneGraphExportDataMap.delete(this);sceneGraphZIndexMap.delete(this);this._inst=null;this._objectClass=null;this._runtime=null;this._layer=null}Init(data){enableUpdateRendererStateGroup=\nfalse;this.SetXY(data[0],data[1]);this.SetZElevation(data[2]);this.SetSize(data[3],data[4]);this._depth=0;if(this.IsRotatable())this.SetAngle(data[6]);else this._a=0;tempColor.setFromJSON(data[7]);this._SetColor(tempColor);this.SetOriginX(data[8]);this.SetOriginY(data[9]);this.SetBlendMode(data[10]);if(this._instanceEffectList)this._instanceEffectList._LoadEffectParameters(data[12]);if(data[14])sceneGraphExportDataMap.set(this,{childrenData:data[14][1],zIndexData:data[14][2]});if(data[15]){const meshData=\ndata[15];this.CreateMesh(meshData[0],meshData[1]);const sourceMesh=this.GetSourceMesh();const meshRows=meshData[2];for(let y=0,lenY=meshRows.length;y<lenY;++y){const rowData=meshRows[y];for(let x=0,lenX=rowData.length;x<lenX;++x){const d=rowData[x];const pt=sourceMesh.GetMeshPointAt(x,y);pt.SetX(d[0]);pt.SetY(d[1]);pt.SetZElevation(d[2]);pt.SetU(d[3]);pt.SetV(d[4])}}}if(data[16]){const templateName=data[16][0];const sourceTemplateName=data[16][1];const isReplica=!!sourceTemplateName;const isTemplate=\n!isReplica;const templateManager=this._runtime.GetTemplateManager();if(isReplica&&templateManager)templateManager.MapInstanceToTemplateName(this.GetInstance(),sourceTemplateName);if(isTemplate&&templateManager)templateManager.MapInstanceToTemplateName(this.GetInstance(),templateName)}enableUpdateRendererStateGroup=true;this._UpdateRendererStateGroup()}InitNoData(){this._x=0;this._y=0;this._zElevation=0;this._w=0;this._h=0;this._depth=0;this._a=0;this._sinA=0;this._cosA=1;this._ox=0;this._oy=0;this._UpdateRendererStateGroup()}GetRuntime(){return this._runtime}GetObjectClass(){return this._objectClass}GetInstance(){return this._inst}_GetParentOffsetAngle(){if(this.GetTransformWithParentAngle())return this._MaybeReflectAngleForMirrorFlip(this.GetParent()._GetAngleNoReflect()-\nthis._sceneGraphInfo.GetParentStartAngle());return 0}SetX(x){x=+x;if(this.GetTransformWithParentX()){const sgi=this._sceneGraphInfo;const dx=x-this.GetX();const da=-this._GetParentOffsetAngle();if(da===0)this._x+=dx/sgi.GetParentScaleX();else{this._x+=Math.cos(da)*dx/sgi.GetParentScaleX();if(this.GetTransformWithParentY())this._y+=Math.sin(da)*dx/sgi.GetParentScaleY()}}else this._x=x}OffsetX(x,transformWithSceneGraph=false){x=+x;if(transformWithSceneGraph)this._x+=x;else if(this.GetTransformWithParentX())this.SetX(this.GetX()+\nx);else this._x+=x}GetX(){if(this.GetTransformWithParentX()){let x=this._x;const sgi=this._sceneGraphInfo;const parent=this.GetParent();const da=this._GetParentOffsetAngle();if(da===0)x*=sgi.GetParentScaleX();else{x=x*sgi.GetParentScaleX()*Math.cos(da);if(this.GetTransformWithParentY())x-=this._y*sgi.GetParentScaleY()*Math.sin(da)}return parent.GetX()+x}else return this._x}SetY(y){y=+y;if(this.GetTransformWithParentY()){const sgi=this._sceneGraphInfo;const dy=y-this.GetY();const da=-this._GetParentOffsetAngle();\nif(da===0)this._y+=dy/sgi.GetParentScaleY();else{if(this.GetTransformWithParentX())this._x-=Math.sin(da)*dy/sgi.GetParentScaleX();this._y+=Math.cos(da)*dy/sgi.GetParentScaleY()}}else this._y=y}OffsetY(y,transformWithSceneGraph=false){y=+y;if(transformWithSceneGraph)this._y+=y;else if(this.GetTransformWithParentY())this.SetY(this.GetY()+y);else this._y+=y}GetY(){if(this.GetTransformWithParentY()){let y=this._y;const sgi=this._sceneGraphInfo;const parent=this.GetParent();const da=this._GetParentOffsetAngle();\nif(da===0)y*=sgi.GetParentScaleY();else{y=y*sgi.GetParentScaleY()*Math.cos(da);if(this.GetTransformWithParentX())y+=this._x*sgi.GetParentScaleX()*Math.sin(da)}return parent.GetY()+y}else return this._y}SetXY(x,y){x=+x;y=+y;if(this.GetTransformWithParentXOrY()){const isTransformX=this.GetTransformWithParentX();const isTransformY=this.GetTransformWithParentY();const sgi=this._sceneGraphInfo;const dx=x-this.GetX();const dy=y-this.GetY();const da=-this._GetParentOffsetAngle();if(da===0){if(isTransformX)this._x+=\ndx/sgi.GetParentScaleX();else this._x=x;if(isTransformY)this._y+=dy/sgi.GetParentScaleY();else this._y=y}else{const sinDa=Math.sin(da);const cosDa=Math.cos(da);if(isTransformX)if(isTransformY)this._x+=(cosDa*dx-sinDa*dy)/sgi.GetParentScaleX();else this._x+=cosDa*dx/sgi.GetParentScaleX();else this._x=x;if(isTransformY)if(isTransformX)this._y+=(sinDa*dx+cosDa*dy)/sgi.GetParentScaleY();else this._y+=cosDa*dy/sgi.GetParentScaleY();else this._y=y}}else{this._x=x;this._y=y}}OffsetXY(x,y){x=+x;y=+y;if(this.GetTransformWithParentXOrY())this.SetXY(this.GetX()+\nx,this.GetY()+y);else{this._x+=x;this._y+=y}}EqualsXY(x,y){return this.GetX()===x&&this.GetY()===y}SetZElevation(z){z=+z;if(this.GetTransformWithParentZElevation())z-=this.GetParent().GetZElevation();if(this._zElevation===z)return;this._zElevation=z;this._UpdateZElevation();const layer=this.GetLayer();if(this._zElevation!==0)layer._SetAnyInstanceZElevated();layer.SetZIndicesChanged()}_UpdateZElevation(){this._UpdateRendererStateGroup();if(this.HasChildren()){const children=this.GetChildren();for(let i=\n0,len=children.length;i<len;i++){const child=children[i];if(child.GetTransformWithParentZElevation())child._UpdateZElevation()}}}OffsetZElevation(z){this.SetZElevation(this.GetZElevation()+z)}GetZElevation(){if(this.GetTransformWithParentZElevation())return this.GetParent().GetZElevation()+this._zElevation;else return this._zElevation}GetTotalZElevation(){return this.GetLayer().GetZElevation()+this.GetZElevation()}SetWidth(w){w=+w;if(this.GetTransformWithParentWidth()){const ownWidth=this.GetWidth();\nif(ownWidth===0)this._w=Number.EPSILON;else this._w*=w/ownWidth}else this._w=w;this._MarkSinCosAngleChanged()}OffsetWidth(w,transformWithSceneGraph){w=+w;if(transformWithSceneGraph)this._w+=w;else if(this.GetTransformWithParentWidth())this.SetWidth(this.GetWidth()+w);else this._w+=w;this._MarkSinCosAngleChanged()}GetWidth(){if(this.GetTransformWithParentWidth()){const parent=this.GetParent();const pw=parent.GetWidth();const psw=parent._GetSceneGraphInfo()._GetStartWidth();if(psw===Number.EPSILON)return(this._GetSceneGraphInfo()._GetStartWidth()+\npw)*this._w;return pw*this._w}else return this._w}SetHeight(h){h=+h;if(this.GetTransformWithParentHeight()){const ownHeight=this.GetHeight();if(ownHeight===0)this._h=Number.EPSILON;else this._h*=h/ownHeight}else this._h=h;this._MarkSinCosAngleChanged()}OffsetHeight(h,transformWithSceneGraph){h=+h;if(transformWithSceneGraph)this._h+=h;else if(this.GetTransformWithParentHeight())this.SetHeight(this.GetHeight()+h);else this._h+=h;this._MarkSinCosAngleChanged()}GetHeight(){if(this.GetTransformWithParentHeight()){const parent=\nthis.GetParent();const ph=parent.GetHeight();const psh=parent._GetSceneGraphInfo()._GetStartHeight();if(psh===Number.EPSILON)return(this._GetSceneGraphInfo()._GetStartHeight()+ph)*this._h;return ph*this._h}else return this._h}SetSize(w,h){w=+w;h=+h;if(this.GetTransformWithParentWidth()){const ownWidth=this.GetWidth();if(ownWidth===0)this._w=Number.EPSILON;else this._w*=w/ownWidth}else this._w=w;if(this.GetTransformWithParentHeight()){const ownHeight=this.GetHeight();if(ownHeight===0)this._h=Number.EPSILON;\nelse this._h*=h/ownHeight}else this._h=h;this._MarkSinCosAngleChanged()}GetDepth(){return this._depth}SetDepth(d){if(d<0)throw new RangeError(\"invalid depth\");this._depth=d}GetSceneGraphScale(){if(this.HasParent()){const sgi=this._sceneGraphInfo;return Math.min(sgi.GetParentScaleX(),sgi.GetParentScaleY())}else return 1}IsRotatable(){return(this._flags&FLAG_IS_ROTATABLE)!==0}SetAngle(a){a=+a;if(!this.IsRotatable())return;if(this.GetTransformWithParentAngle())a-=this.GetParent().GetAngle();a=C3.clampAngle(a);\nif(this._a===a)return;this._a=a;this._MarkSinCosAngleChanged()}OffsetAngle(a){a=+a;if(a===0||!this.IsRotatable())return;this._a=C3.clampAngle(this._a+a);this._MarkSinCosAngleChanged()}_MarkSinCosAngleChanged(){this._flags|=FLAG_SIN_COS_ANGLE_CHANGED;if(this.HasChildren()){const children=this.GetChildren();for(let i=0,len=children.length;i<len;i++)children[i]._MarkSinCosAngleChanged()}}GetAngle(){if(this.GetTransformWithParentAngle()&&this.IsRotatable())return this._MaybeReflectAngleForMirrorFlip(C3.clampAngle(this.GetParent()._GetAngleNoReflect()+\nthis._a));else return this._a}_GetAngleNoReflect(){if(this.GetTransformWithParentAngle()&&this.IsRotatable())return C3.clampAngle(this.GetParent()._GetAngleNoReflect()+this._a);else return this._a}_MaybeReflectAngleForMirrorFlip(a){if(this.GetTransformWithParentWidth()&&this.GetTopParent().GetWidth()<0)a=C3.clampAngle(C3.angleReflect(a,this.GetTopParent().GetAngle()+Math.PI));if(this.GetTransformWithParentHeight()&&this.GetTopParent().GetHeight()<0)a=C3.angleReflect(a,this.GetTopParent().GetAngle());\nreturn a}_MaybeUpdateSinCosAngle(){const flags=this._flags;if((flags&FLAG_SIN_COS_ANGLE_CHANGED)===0)return;const a=this.GetAngle();this._sinA=Math.sin(a);this._cosA=Math.cos(a);this._flags=flags&~FLAG_SIN_COS_ANGLE_CHANGED}GetSinAngle(){this._MaybeUpdateSinCosAngle();return this._sinA}GetCosAngle(){this._MaybeUpdateSinCosAngle();return this._cosA}SetOriginX(x){this._ox=+x}OffsetOriginX(x){this._ox+=+x}GetOriginX(){return this._ox}SetOriginY(y){this._oy=+y}OffsetOriginY(y){this._oy+=+y}GetOriginY(){return this._oy}_SetColor(c){if(this._color.equals(c))return;\nif(this._color===DEFAULT_COLOR){this._color=C3.New(C3.Color,c);this._colorPremultiplied=C3.New(C3.Color,c);this._colorPremultiplied.premultiply()}else if(c.equalsRgba(1,1,1,1)){this._color=DEFAULT_COLOR;this._colorPremultiplied=DEFAULT_COLOR}else{this._color.set(c);this._colorPremultiplied.set(c);this._colorPremultiplied.premultiply()}this._UpdateRendererStateGroup()}SetOpacity(o){o=C3.clamp(+o,0,1);if(this.GetTransformWithParentOpacity()){if(this._GetSceneGraphInfo().GetOwnOpacity()===o)return;this._GetSceneGraphInfo().SetOwnOpacity(o);\no=this.GetOpacity()}else if(this._color.a===o)return;this._SetColorWithOpacity(o)}_SetOpacityOfChildren(){if(!this.HasChildren())return;const children=this.GetChildren();for(let i=0,len=children.length;i<len;i++){const child=children[i];child._SetColorWithOpacity(child.GetOpacity())}}_SetColorWithOpacity(o){tempColor.copyRgb(this._color);tempColor.a=o;this._SetColor(tempColor);this._SetOpacityOfChildren()}OffsetOpacity(o){if(this.GetTransformWithParentOpacity())this.SetOpacity(this._GetSceneGraphInfo().GetOwnOpacity()+\no);else this.SetOpacity(this.GetOpacity()+o)}GetOpacity(){if(this.GetTransformWithParentOpacity())return this.GetParent().GetOpacity()*this._GetSceneGraphInfo().GetOwnOpacity();else return this._color.a}SetUnpremultipliedColor(c){if(this._color.equalsIgnoringAlpha(c))return;tempColor.copyRgb(c);tempColor.a=this.GetOpacity();this._SetColor(tempColor)}SetUnpremultipliedColorRGB(r,g,b){tempColor.setRgb(r,g,b);this.SetUnpremultipliedColor(tempColor)}OffsetUnpremultipliedColorRGB(r,g,b){if(r===0&&g===\n0&&b===0)return;tempColor.copyRgb(this._color);tempColor.r+=r;tempColor.g+=g;tempColor.b+=b;this.SetUnpremultipliedColor(tempColor)}GetUnpremultipliedColor(){return this._color}GetPremultipliedColor(){return this._colorPremultiplied}GetDestroyWithParent(){return(this._flags&FLAG_DESTROY_WITH_PARENT)!==0}SetDestroyWithParent(d){this._SetFlag(FLAG_DESTROY_WITH_PARENT,d)}GetTransformWithParentX(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_X)!==0}SetTransformWithParentX(tpx){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_X,\ntpx)}GetTransformWithParentY(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_Y)!==0}GetTransformWithParentXOrY(){return(this._flags&(FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y))!==0}SetTransformWithParentY(tpx){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_Y,tpx)}GetTransformWithParentWidth(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_W)!==0}SetTransformWithParentWidth(tpw){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_W,tpw)}GetTransformWithParentHeight(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_H)!==\n0}SetTransformWithParentHeight(tph){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_H,tph)}GetTransformWithParentAngle(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_A)!==0}SetTransformWithParentAngle(tpa){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_A,tpa)}GetTransformWithParentZElevation(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION)!==0}SetTransformWithParentZElevation(tpz){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION,tpz)}GetTransformWithParentOpacity(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_OPACITY)!==\n0}SetTransformWithParentOpacity(tpo){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_OPACITY,tpo)}GetTransformWithParentVisibility(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_VISIBILITY)!==0}SetTransformWithParentVisibility(tpv){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_VISIBILITY,tpv)}_ClearAllSceneGraphFlags(){this._flags&=~MASK_ALL_SCENE_GRAPH_FLAGS}AddChild(child,opts){if(child===this)return false;if(child.HasParent())return false;if(this._HasChildRecursive(child))return false;if(this._HasAnyParent(child))return false;\nconst absX=child.GetX();const absY=child.GetY();const absW=child.GetWidth();const absH=child.GetHeight();const absA=child.GetAngle();const absZElevation=child.GetZElevation();const absOpacity=child.GetOpacity();child._SetParent(this);child.SetTransformWithParentX(opts.transformX);child.SetTransformWithParentY(opts.transformY);child.SetTransformWithParentWidth(opts.transformWidth);child.SetTransformWithParentHeight(opts.transformHeight);child.SetTransformWithParentAngle(opts.transformAngle);child.SetTransformWithParentZElevation(opts.transformZElevation);\nchild.SetTransformWithParentOpacity(opts.transformOpacity);child.SetTransformWithParentVisibility(opts.transformVisibility);child.SetDestroyWithParent(opts.destroyWithParent);if(opts.transformX){child._x=absX-this.GetX();if(opts.transformWidth)child._x/=this.GetWidth()/this._sceneGraphInfo._GetStartWidth()}if(opts.transformY){child._y=absY-this.GetY();if(opts.transformHeight)child._y/=this.GetHeight()/this._sceneGraphInfo._GetStartHeight()}if(opts.transformWidth){const pw=this.GetWidth();if(pw===\n0||pw===Number.EPSILON){child._w=1;child._sceneGraphInfo.SetStartScaleX(1)}else{child._w=absW/this.GetWidth();child._sceneGraphInfo.SetStartScaleX(child._w)}}if(opts.transformHeight){const ph=this.GetHeight();if(ph===0||ph===Number.EPSILON){child._h=1;child._sceneGraphInfo.SetStartScaleY(1)}else{child._h=absH/this.GetHeight();child._sceneGraphInfo.SetStartScaleY(child._h)}}if(opts.transformAngle)child._a=absA-this.GetAngle();if(opts.transformZElevation)child._zElevation=absZElevation-this.GetZElevation();\nif(opts.transformOpacity)child._sceneGraphInfo.SetOwnOpacity(absOpacity);if(opts.transformVisibility)child.SetVisible(this.IsVisible());this._AddChildToSceneGraphInfo(child);this.SetBboxChanged();this._SetOpacityOfChildren();return true}RemoveChild(child){if(child.GetParent()!==this)return;const absX=child.GetX();const absY=child.GetY();const absW=child.GetWidth();const absH=child.GetHeight();const absA=child.GetAngle();const absZElevation=child.GetZElevation();const absOpacity=child.GetOpacity();\nchild._SetParent(null);child._ClearAllSceneGraphFlags();child.SetXY(absX,absY);child.SetSize(absW,absH);child.SetAngle(absA);child.SetZElevation(absZElevation);child.SetOpacity(absOpacity);this._RemoveChildFromSceneGraphInfo(child);this.SetBboxChanged();return}GetTmpHierarchyPosition(){return this._tmpHierarchyPosition}_ResetAllSceneGraphState(){this._BuildTmpSceneGraphData();const children=[...this.children()];for(const c of children)this.RemoveChild(c);const parent=this.GetParent();if(parent)parent.RemoveChild(this);\nthis._ClearAllSceneGraphFlags()}_BuildTmpSceneGraphData(){this._SetTmpHierarchyPosition();if(!this._tmpSceneGraphChildren){const children=[...this.children()];if(children.length){this._tmpSceneGraphChildren=[];this._tmpSceneGraphChildrenIndexes=new WeakMap}let index=0;for(const c of children){const inst=c.GetInstance();this._tmpSceneGraphChildren.push(inst);this._tmpSceneGraphChildrenIndexes.set(inst,index);index++}}const parent=this.GetParent();if(parent)parent._BuildTmpSceneGraphData()}_SetTmpHierarchyPosition(){if(this._tmpHierarchyPosition!==\n-1)return;const parents=[...this.parents()];this._tmpHierarchyPosition=parents.length;for(const p of parents)p._SetTmpHierarchyPosition();const children=[...this.children()];for(const c of children)c._SetTmpHierarchyPosition()}_ReleaseTmpSceneGraphInfo(){if(this._tmpSceneGraphChildren)this._tmpSceneGraphChildren.length=0;this._tmpSceneGraphChildren=null;this._tmpSceneGraphChildrenIndexes=null;const parent=this.GetParent();if(parent)parent._ReleaseTmpSceneGraphInfo();this._tmpHierarchyPosition=-1}HasParent(){return this.GetParent()!==\nnull}GetParent(){const sgi=this._sceneGraphInfo;return sgi!==null?sgi.GetParent():null}GetTopParent(){let p=this;while(p.HasParent())p=p.GetParent();return p}*parents(){let parent=this.GetParent();while(parent){yield parent;parent=parent.GetParent()}}HasChild(child){return this.GetChildren().includes(child)}HasChildren(){const sgi=this._sceneGraphInfo;return sgi!==null?sgi.HasChildren():false}GetChildren(){const sgi=this._sceneGraphInfo;return sgi!==null?sgi.GetChildren():EMPTY_ARRAY}children(){return this.GetChildren()}*allChildren(){for(const child of this.children()){yield child;\nyield*child.allChildren()}}GetChildCount(){return this.GetChildren().length}GetAllChildCount(){return[...this.allChildren()].length}GetChildAt(index){const children=this.GetChildren();index=Math.floor(+index);if(index<0||index>=children.length)return null;return children[index]}_CreateSceneGraphInfo(parent){if(!this._sceneGraphInfo)this._sceneGraphInfo=C3.New(C3.SceneGraphInfo,this);if(parent)this._sceneGraphInfo.SetParent(parent)}_GetSceneGraphInfo(){return this._sceneGraphInfo}_ReleaseSceneGraphInfo(){if(!this._sceneGraphInfo)return;\nthis._sceneGraphInfo.Release();this._sceneGraphInfo=null}_SetParent(parent){if(parent){parent._CreateSceneGraphInfo(null);this._CreateSceneGraphInfo(parent)}else{if(this._sceneGraphInfo)this._sceneGraphInfo.SetParent(null);if(!this.HasChildren())this._ReleaseSceneGraphInfo()}}_HasAnyParent(child){if(!this.HasParent())return false;const parent=this.GetParent();if(parent===child)return true;return parent._HasAnyParent(child)}_HasChildRecursive(child){if(this.HasChild(child))return true;for(const c of this.GetChildren())if(c._HasChildRecursive(child))return true;\nreturn false}_AddChildToSceneGraphInfo(child){this._sceneGraphInfo.GetChildren().push(child)}_RemoveChildFromSceneGraphInfo(child){const children=this._sceneGraphInfo.GetChildren();const index=children.indexOf(child);if(index!==-1)children.splice(index,1);if(children.length===0&&!this.HasParent())this._ReleaseSceneGraphInfo();if(!child.HasChildren())child._ReleaseSceneGraphInfo()}GetSceneGraphChildrenExportData(){const data=sceneGraphExportDataMap.get(this);return data?data.childrenData:null}GetSceneGraphZIndexExportData(){const data=\nsceneGraphExportDataMap.get(this);return data?data.zIndexData:NaN}GetSceneGraphZIndex(){const sceneGraphZIndex=sceneGraphZIndexMap.get(this);return C3.IsFiniteNumber(sceneGraphZIndex)?sceneGraphZIndex:NaN}SetSceneGraphZIndex(z){sceneGraphZIndexMap.set(this,z)}SetUsePointsShaderProgram(){this._SetFlag(FLAG_USE_POINTS_SHADER_PROGRAM,true);this._UpdateRendererStateGroup()}_UpdateRendererStateGroup(){if(!enableUpdateRendererStateGroup)return;const renderer=this._runtime.GetRenderer();if(this._stateGroup)renderer.ReleaseStateGroup(this._stateGroup);\nlet shaderProgram;if((this._flags&FLAG_USE_POINTS_SHADER_PROGRAM)!==0)shaderProgram=renderer.GetPointsRenderingProgram()||\"<point>\";else shaderProgram=renderer.GetTextureFillShaderProgram()||\"<default>\";this._stateGroup=renderer.AcquireStateGroup(shaderProgram,this.GetBlendMode(),this._colorPremultiplied,this.GetZElevation())}GetRendererStateGroup(){return this._stateGroup}HasDefaultColor(){return this._color===DEFAULT_COLOR}SetBlendMode(bm){bm=bm|0;if(bm<0||bm>31)throw new RangeError(\"invalid blend mode\");\nif(this.GetBlendMode()===bm)return;this._flags=this._flags&~FLAG_BLEND_MODE_MASK|bm<<FLAG_BLEND_MODE_BIT_OFFSET;this._UpdateRendererStateGroup()}GetBlendMode(){return(this._flags&FLAG_BLEND_MODE_MASK)>>FLAG_BLEND_MODE_BIT_OFFSET}_SetLayer(layer,updateRenderCell){const doUpdateRenderCell=updateRenderCell&&this._layer!==layer;if(doUpdateRenderCell)this._RemoveFromRenderCells();this._layer=layer;if(doUpdateRenderCell)this._UpdateRenderCell();if(this.GetZElevation()!==0)this._layer._SetAnyInstanceZElevated()}GetLayer(){return this._layer}GetLayout(){return this.GetLayer().GetLayout()}_SetZIndex(z){this._zIndex=\nz|0}GetZIndex(){this._layer._UpdateZIndices();return this._zIndex}_GetLastCachedZIndex(){return this._zIndex}_SetFlag(bit,enable){if(enable)this._flags|=bit;else this._flags&=~bit}IsVisible(){return(this._flags&FLAG_IS_VISIBLE)!==0}SetVisible(v){this._SetFlag(FLAG_IS_VISIBLE,v);if(!this.HasChildren())return;for(const child of this.GetChildren())if(child.GetTransformWithParentVisibility())child.SetVisible(v)}IsCollisionEnabled(){return(this._flags&FLAG_COLLISION_ENABLED)!==0}SetCollisionEnabled(e){e=\n!!e;if(this.IsCollisionEnabled()===e)return;this._SetFlag(FLAG_COLLISION_ENABLED,e);if(e)this.SetBboxChanged();else this._RemoveFromCollisionCells()}SetSolidCollisionFilter(isInclusive,tags){this._SetFlag(FLAG_SOLID_FILTER_INCLUSIVE,isInclusive);if(this._solidFilterTags)this._solidFilterTags.clear();if(!tags.trim()){this._solidFilterTags=null;return}if(!this._solidFilterTags)this._solidFilterTags=new Set;for(const tag of tags.split(\" \"))if(tag)this._solidFilterTags.add(tag.toLowerCase())}IsSolidCollisionAllowed(solidTagSet){const isInclusive=\n(this._flags&FLAG_SOLID_FILTER_INCLUSIVE)!==0;const filterTags=this._solidFilterTags;if(!solidTagSet||!filterTags)return!isInclusive;for(const tag of filterTags)if(solidTagSet.has(tag))return isInclusive;return!isInclusive}SetBboxChanged(){this._flags|=FLAG_BBOX_CHANGED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED;this._objectClass._SetAnyCollisionCellChanged(true);this._runtime.UpdateRender();if(this._layer.UsesRenderCells()){this.CalculateBbox(this._boundingBox,this._boundingQuad,true);this._flags&=\n~FLAG_BBOX_CHANGED;this._UpdateRenderCell()}if((this._flags&FLAG_ENABLE_BBOX_CHANGED_EVENT)!==0)this._inst.Dispatcher().dispatchEvent(bboxChangeEvent);if(this._sceneGraphInfo!==null){const children=this._sceneGraphInfo.GetChildren();for(let i=0,len=children.length;i<len;++i)children[i].SetBboxChanged()}}CalculateBbox(bbox,bquad,includeMesh){const x=this.GetX();const y=this.GetY();const w=this.GetWidth();const h=this.GetHeight();const a=this.GetAngle();bbox.setWH(x-this._ox*w,y-this._oy*h,w,h);if(includeMesh&&\nthis.HasMesh())this._ExpandBboxForMesh(bbox);if(a===0)bquad.setFromRect(bbox);else{bbox.offset(-x,-y);bquad.setFromRotatedRectPrecalc(bbox,this.GetSinAngle(),this.GetCosAngle());bquad.offset(x,y);bquad.getBoundingBox(bbox)}bbox.normalize()}_UpdateBbox(){const flags=this._flags;if((flags&FLAG_BBOX_CHANGED)!==0){this.CalculateBbox(this._boundingBox,this._boundingQuad,true);this._flags=flags&~FLAG_BBOX_CHANGED}}GetBoundingBox(){this._UpdateBbox();return this._boundingBox}GetBoundingQuad(){this._UpdateBbox();\nreturn this._boundingQuad}PixelRoundQuad(quad){const x=this.GetX();const y=this.GetY();const ox=Math.round(x)-x;const oy=Math.round(y)-y;if(ox===0&&oy===0)return quad;else{tempQuad.copy(quad);tempQuad.offset(ox,oy);return tempQuad}}OverwriteBoundingBox(box){this._boundingBox.copy(box);this._boundingQuad.setFromRect(this._boundingBox);this._flags&=~FLAG_BBOX_CHANGED;this._UpdateCollisionCell();this._UpdateRenderCell()}SetBboxChangeEventEnabled(e){this._SetFlag(FLAG_ENABLE_BBOX_CHANGED_EVENT,e)}IsBboxChangeEventEnabled(){return(this._flags&\nFLAG_ENABLE_BBOX_CHANGED_EVENT)!==0}IsInViewport(viewport,hasVanishingPointOutsideViewport,isOrthographic){if(hasVanishingPointOutsideViewport&&this.GetDepth()!==0)return this.IsInViewport3D(this.GetLayer()._GetViewFrustum());else return this.GetZElevation()===0||isOrthographic?viewport.intersectsRect(this.GetBoundingBox()):this._IsInViewport_ZElevated()}_IsInViewport_ZElevated(){const layer=this.GetLayer();const totalZElevation=this.GetTotalZElevation();if(totalZElevation>=layer.GetCameraZ())return false;\nlayer.GetViewportForZ(totalZElevation,tempRect);return tempRect.intersectsRect(this.GetBoundingBox())}IsInViewport3D(viewFrustum){const bbox=this.GetBoundingBox();const minX=bbox.getLeft();const maxX=bbox.getRight();const minY=bbox.getTop();const maxY=bbox.getBottom();const minZ=this.GetTotalZElevation();const maxZ=minZ+this.GetDepth();return viewFrustum.ContainsAABB(minX,minY,minZ,maxX,maxY,maxZ)}IsInViewport2(){const layer=this.GetLayer();if(layer.Has3DCamera())return this.IsInViewport3D(layer._GetViewFrustum());\nelse{const layout=layer.GetLayout();return this.IsInViewport(layer.GetViewport(),layout.HasVanishingPointOutsideViewport(),layout.IsOrthographicProjection())}}_SetDrawBackFaceOnly(e){this._SetFlag(FLAG_DRAW_BACK_FACE_ONLY,e)}_SetDrawNonBackFacesOnly(e){this._SetFlag(FLAG_DRAW_NON_BACK_FACES_ONLY,e)}IsDrawBackFaceOnly(){return(this._flags&FLAG_DRAW_BACK_FACE_ONLY)!==0}IsDrawNonBackFacesOnly(){return(this._flags&FLAG_DRAW_NON_BACK_FACES_ONLY)!==0}SetSourceCollisionPoly(poly){this._sourceCollisionPoly=\npoly;this._DiscardTransformedCollisionPoly();if(this.HasMesh())this._meshInfo.meshPoly=null}GetSourceCollisionPoly(){return this._sourceCollisionPoly}HasOwnCollisionPoly(){return this._sourceCollisionPoly!==null||this.HasMesh()}GetTransformedCollisionPoly(){return this._GetCustomTransformedCollisionPolyPrecalc(this.GetWidth(),this.GetHeight(),this.GetAngle(),this.GetSinAngle(),this.GetCosAngle())}GetCustomTransformedCollisionPoly(w,h,a){let sina=0;let cosa=1;if(a!==0){sina=Math.sin(a);cosa=Math.cos(a)}return this._GetCustomTransformedCollisionPolyPrecalc(w,\nh,a,sina,cosa)}_GetCustomTransformedCollisionPolyPrecalc(w,h,a,sinA,cosA){let tpi=this._transformedPolyInfo;if(tpi===null){tpi={poly:C3.New(C3.CollisionPoly),width:NaN,height:NaN,angle:NaN};this._transformedPolyInfo=tpi}const transformedPoly=tpi.poly;if(tpi.width===w&&tpi.height===h&&tpi.angle===a)return transformedPoly;const sourcePoly=this._sourceCollisionPoly;if(this.HasMesh()){const ox=this.GetOriginX();const oy=this.GetOriginY();const sourceMesh=this.GetSourceMesh();let meshPoly=this._meshInfo.meshPoly;\nif(!meshPoly){if(sourcePoly){tempCollisionPoly.copy(sourcePoly);tempCollisionPoly.offset(ox,oy)}else tempCollisionPoly.setDefaultPoints();meshPoly=sourceMesh.InsertPolyMeshVertices(tempCollisionPoly);this._meshInfo.meshPoly=meshPoly}sourceMesh.TransformCollisionPoly(meshPoly,transformedPoly);transformedPoly.offset(-ox,-oy);transformedPoly.transformPrecalc(w,h,sinA,cosA)}else if(sourcePoly){transformedPoly.copy(sourcePoly);transformedPoly.transformPrecalc(w,h,sinA,cosA)}else transformedPoly.setFromQuad(this.GetBoundingQuad(),\n-this.GetX(),-this.GetY());tpi.width=w;tpi.height=h;tpi.angle=a;return transformedPoly}_DiscardTransformedCollisionPoly(){this.SetPhysicsBodyChanged(true);const tpi=this._transformedPolyInfo;if(tpi===null)return;tpi.width=NaN}CreateMesh(hsize,vsize){hsize=Math.floor(hsize);vsize=Math.floor(vsize);if(!this.GetInstance().GetPlugin().SupportsMesh())throw new Error(\"object does not support mesh\");this.ReleaseMesh();this._meshInfo={sourceMesh:C3.New(C3.Gfx.Mesh,hsize,vsize),transformedMesh:C3.New(C3.Gfx.Mesh,\nhsize,vsize),meshPoly:null}}HasMesh(){return this._meshInfo!==null}GetSourceMesh(){if(!this.HasMesh())throw new Error(\"no mesh\");return this._meshInfo.sourceMesh}GetTransformedMesh(){if(!this.HasMesh())throw new Error(\"no mesh\");return this._meshInfo.transformedMesh}SetMeshChanged(e){this._SetFlag(FLAG_MESH_CHANGED,e)}IsMeshChanged(){return(this._flags&FLAG_MESH_CHANGED)!==0}SetPhysicsBodyChanged(e){this._SetFlag(FLAG_PHYSICS_BODY_CHANGED,e)}IsPhysicsBodyChanged(){return(this._flags&FLAG_PHYSICS_BODY_CHANGED)!==\n0}_ExpandBboxForMesh(bbox){const sourceMesh=this._meshInfo.sourceMesh;const minX=Math.min(sourceMesh.GetMinX(),0);const minY=Math.min(sourceMesh.GetMinY(),0);const maxX=Math.max(sourceMesh.GetMaxX(),1);const maxY=Math.max(sourceMesh.GetMaxY(),1);const w=bbox.width();const h=bbox.height();bbox.offsetLeft(minX*w);bbox.offsetTop(minY*h);bbox.offsetRight((maxX-1)*w);bbox.offsetBottom((maxY-1)*h);this._depth=sourceMesh.GetMaxZ()}ReleaseMesh(){if(!this._meshInfo)return;this._meshInfo.sourceMesh.Release();\nthis._meshInfo.transformedMesh.Release();this._meshInfo=null;this._DiscardTransformedCollisionPoly()}SetMeshPoint(col,row,opts){col=Math.floor(col);row=Math.floor(row);const mode=opts.mode||\"absolute\";if(!VALID_SET_MESH_POINT_MODES.has(mode))throw new Error(\"invalid mode\");const isRelative=mode===\"relative\";let posx=opts.x;let posy=opts.y;const zElevation=opts.zElevation;let texu=typeof opts.u===\"number\"?opts.u:isRelative?0:-1;let texv=typeof opts.v===\"number\"?opts.v:isRelative?0:-1;if(!this.HasMesh())return false;\nconst sourceMesh=this.GetSourceMesh();const p=sourceMesh.GetMeshPointAt(col,row);if(p===null)return false;let ret=false;if(typeof zElevation===\"number\"&&p.GetZElevation()!==zElevation){p.SetZElevation(zElevation);ret=true}if(isRelative){posx+=col/(sourceMesh.GetHSize()-1);posy+=row/(sourceMesh.GetVSize()-1)}if(texu===-1&&!isRelative)texu=p.GetU();else{if(isRelative)texu+=col/(sourceMesh.GetHSize()-1);texu=C3.clamp(texu,0,1)}if(texv===-1&&!isRelative)texv=p.GetV();else{if(isRelative)texv+=row/(sourceMesh.GetVSize()-\n1);texv=C3.clamp(texv,0,1)}if(p.GetX()===posx&&p.GetY()===posy&&p.GetU()===texu&&p.GetV()===texv)return ret;p.SetX(posx);p.SetY(posy);p.SetU(texu);p.SetV(texv);this._DiscardTransformedCollisionPoly();return true}HasTilemap(){return this._inst.HasTilemap()}ContainsPoint(x,y){if(!this.GetBoundingBox().containsPoint(x,y))return false;if(!this.GetBoundingQuad().containsPoint(x,y))return false;if(this.HasTilemap())return this._inst.GetSdkInstance().TestPointOverlapTile(x,y);if(!this.HasOwnCollisionPoly())return true;\nreturn this.GetTransformedCollisionPoly().containsPoint(x-this.GetX(),y-this.GetY())}_IsCollisionCellChanged(){return(this._flags&FLAG_COLLISION_CELL_CHANGED)!==0}_UpdateCollisionCell(){if(!this._IsCollisionCellChanged()||!this.IsCollisionEnabled()||(this._flags&FLAG_DESTROYED)!==0)return;const bbox=this.GetBoundingBox();const grid=this._objectClass._GetCollisionCellGrid();const collisionCells=this._collisionCells;tempRect.set(grid.XToCell(bbox.getLeft()),grid.YToCell(bbox.getTop()),grid.XToCell(bbox.getRight()),\ngrid.YToCell(bbox.getBottom()));if(collisionCells.equals(tempRect))return;const inst=this._inst;if(collisionCells===DEFAULT_COLLISION_CELLS){grid.Update(inst,null,tempRect);this._collisionCells=C3.New(C3.Rect,tempRect)}else{grid.Update(inst,collisionCells,tempRect);collisionCells.copy(tempRect)}this._flags&=~FLAG_COLLISION_CELL_CHANGED}_RemoveFromCollisionCells(){const collisionCells=this._collisionCells;if(collisionCells===DEFAULT_COLLISION_CELLS)return;this._objectClass._GetCollisionCellGrid().Update(this._inst,\ncollisionCells,null);this._collisionCells=DEFAULT_COLLISION_CELLS}_UpdateRenderCell(){const layer=this.GetLayer();if(!layer.UsesRenderCells()||(this._flags&FLAG_DESTROYED)!==0)return;const renderGrid=layer.GetRenderGrid();const bbox=this.GetBoundingBox();const renderCells=this._renderCells;tempRect.set(renderGrid.XToCell(bbox.getLeft()),renderGrid.YToCell(bbox.getTop()),renderGrid.XToCell(bbox.getRight()),renderGrid.YToCell(bbox.getBottom()));if(renderCells.equals(tempRect))return;const inst=this._inst;\nif(renderCells===DEFAULT_RENDER_CELLS){renderGrid.Update(inst,null,tempRect);this._renderCells=C3.New(C3.Rect,tempRect)}else{renderGrid.Update(inst,renderCells,tempRect);renderCells.copy(tempRect)}layer.SetRenderListStale()}_RemoveFromRenderCells(){const renderCells=this._renderCells;if(renderCells===DEFAULT_RENDER_CELLS)return;this.GetLayer().GetRenderGrid().Update(this._inst,renderCells,null);this._renderCells=DEFAULT_RENDER_CELLS}GetRenderCellRange(){return this._renderCells}ZOrderMoveToTop(){const inst=\nthis._inst;const layer=this._layer;const layerInstances=layer._GetInstances();if(layerInstances.length&&layerInstances.at(-1)===inst)return;layer._RemoveInstance(inst,false);layer._AddInstance(inst,false);this._runtime.UpdateRender()}ZOrderMoveToBottom(){const inst=this._inst;const layer=this._layer;const layerInstances=layer._GetInstances();if(layerInstances.length&&layerInstances[0]===inst)return;layer._RemoveInstance(inst,false);layer._PrependInstance(inst,false);this._runtime.UpdateRender()}ZOrderMoveToLayer(layerMove){const inst=\nthis._inst;const curLayer=this._layer;if(curLayer.GetLayout()!==layerMove.GetLayout())throw new Error(\"layer from different layout\");if(layerMove===curLayer)return;curLayer._RemoveInstance(inst,true);this._SetLayer(layerMove);layerMove._AddInstance(inst,true);this._runtime.UpdateRender()}ZOrderMoveAdjacentToInstance(otherInst,isAfter){const inst=this._inst;let didChangeLayer=false;const curLayer=this._layer;if(otherInst.GetUID()===inst.GetUID())return;const otherWi=otherInst.GetWorldInfo();if(!otherWi)throw new Error(\"expected world instance\");\nconst otherLayer=otherWi.GetLayer();if(curLayer.GetIndex()!==otherLayer.GetIndex()){curLayer._RemoveInstance(inst,true);this._SetLayer(otherLayer);otherLayer._AddInstance(inst,true);didChangeLayer=true}const didChangeZOrder=otherLayer.MoveInstanceAdjacent(inst,otherInst,!!isAfter);if(didChangeLayer||didChangeZOrder)this._runtime.UpdateRender()}GetInstanceEffectList(){return this._instanceEffectList}_SetHasAnyActiveEffect(e){this._SetFlag(FLAG_HAS_ANY_ACTIVE_EFFECT,e)}HasAnyActiveEffect(){return(this._flags&\nFLAG_HAS_ANY_ACTIVE_EFFECT)!==0}_SaveToJson(mode){const o={\"x\":this.GetX(),\"y\":this.GetY(),\"w\":this.GetWidth(),\"h\":this.GetHeight(),\"l\":this.GetLayer().GetSID(),\"zi\":this.GetZIndex()};if(this.GetZElevation()!==0)o[\"ze\"]=this.GetZElevation();if(this.GetAngle()!==0)o[\"a\"]=this._GetAngleNoReflect();if(!this.HasDefaultColor())o[\"c\"]=this._color.toJSON();if(this.GetOriginX()!==.5)o[\"oX\"]=this.GetOriginX();if(this.GetOriginY()!==.5)o[\"oY\"]=this.GetOriginY();if(this.GetBlendMode()!==0)o[\"bm\"]=this.GetBlendMode();\nif(!this.IsVisible())o[\"v\"]=this.IsVisible();if(!this.IsCollisionEnabled())o[\"ce\"]=this.IsCollisionEnabled();if(this.IsBboxChangeEventEnabled())o[\"be\"]=this.IsBboxChangeEventEnabled();if(this._instanceEffectList)o[\"fx\"]=this._instanceEffectList._SaveToJson();const isSolidFilterInclusive=(this._flags&FLAG_SOLID_FILTER_INCLUSIVE)!==0;if(isSolidFilterInclusive)o[\"sfi\"]=isSolidFilterInclusive;if(this._solidFilterTags)o[\"sft\"]=[...this._solidFilterTags].join(\" \");if(this._sceneGraphInfo&&mode!==\"visual-state\"){o[\"sgi\"]=\nthis._sceneGraphInfo._SaveToJson(mode);if(sceneGraphExportDataMap.has(this)){o[\"sgcd\"]=sceneGraphExportDataMap.get(this).childrenData;o[\"sgzid\"]=sceneGraphExportDataMap.get(this).zIndexData}}if(this.HasMesh())o[\"mesh\"]=this.GetSourceMesh().SaveToJson();return o}_SaveSceneGraphPropertiesToJson(){return{\"x\":this._x,\"y\":this._y,\"z\":this._zElevation,\"w\":this._w,\"h\":this._h,\"a\":this._a}}_LoadSceneGraphPropertiesFromJson(o){if(!o)return;this._x=o[\"x\"];this._y=o[\"y\"];this._zElevation=o[\"z\"];this._w=o[\"w\"];\nthis._h=o[\"h\"];this._a=o[\"a\"];this._MarkSinCosAngleChanged();this.SetBboxChanged()}_SetupSceneGraphConnectionsOnChangeOfLayout(){this._ReleaseTmpSceneGraphInfo();this._ResetAllSceneGraphState();this._CreateSceneGraphInfo(null);if(this._sceneGraphInfo)this._sceneGraphInfo._SetTmpSceneGraphChildren(this._tmpSceneGraphChildren,this._tmpSceneGraphChildrenIndexes)}_OnBeforeLoad(mode){if(mode!==\"visual-state\")this._ResetAllSceneGraphState()}_OnAfterLoad(o,mode=\"full\",opts=null){if(o.hasOwnProperty(\"sgi\")&&\nmode!==\"visual-state\"){if((this._flags&FLAG_DESTROYED)!==0)return;this._sceneGraphInfo._OnAfterLoad(o[\"sgi\"],opts)}}_OnAfterLoad2(o,mode=\"full\",opts=null){if(o.hasOwnProperty(\"sgi\")&&mode!==\"visual-state\"){if((this._flags&FLAG_DESTROYED)!==0)return;this._sceneGraphInfo._SetTmpSceneGraphChildren(null,null);this._ReleaseTmpSceneGraphInfo();this.SetBboxChanged()}}_LoadFromJson(o,mode){enableUpdateRendererStateGroup=false;this.SetX(o[\"x\"]);this.SetY(o[\"y\"]);this.SetWidth(o[\"w\"]);this.SetHeight(o[\"h\"]);\nthis._SetZIndex(o[\"zi\"]);this.SetZElevation(o.hasOwnProperty(\"ze\")?o[\"ze\"]:0);this.SetAngle(o.hasOwnProperty(\"a\")?o[\"a\"]:0);if(o.hasOwnProperty(\"c\"))tempColor.setFromJSON(o[\"c\"]);else if(o.hasOwnProperty(\"o\")){tempColor.copyRgb(this._color);tempColor.a=o[\"o\"]}else tempColor.setRgba(1,1,1,1);this._SetColor(tempColor);this.SetOriginX(o.hasOwnProperty(\"oX\")?o[\"oX\"]:.5);this.SetOriginY(o.hasOwnProperty(\"oY\")?o[\"oY\"]:.5);this.SetBlendMode(o.hasOwnProperty(\"bm\")?o[\"bm\"]:0);this.SetVisible(o.hasOwnProperty(\"v\")?\no[\"v\"]:true);this.SetCollisionEnabled(o.hasOwnProperty(\"ce\")?o[\"ce\"]:true);this.SetBboxChangeEventEnabled(o.hasOwnProperty(\"be\")?o[\"be\"]:false);this.SetSolidCollisionFilter(o.hasOwnProperty(\"sfi\")?o[\"sfi\"]:false,o.hasOwnProperty(\"sft\")?o[\"sft\"]:\"\");if(this._instanceEffectList&&o.hasOwnProperty(\"fx\"))this._instanceEffectList._LoadFromJson(o[\"fx\"]);if(!o.hasOwnProperty(\"sgi\")&&mode!==\"visual-state\")if(this._tmpSceneGraphChildren)for(const inst of this._tmpSceneGraphChildren){if(inst.IsDestroyed())continue;\nthis._runtime.DestroyInstance(inst)}if(o.hasOwnProperty(\"sgi\")&&mode!==\"visual-state\"){this._CreateSceneGraphInfo(null);const sgi=this._sceneGraphInfo;const sgiData=o[\"sgi\"];sgi._LoadFromJson(sgiData);sgi._SetTmpSceneGraphChildren(this._tmpSceneGraphChildren,this._tmpSceneGraphChildrenIndexes);if(o[\"sgcd\"]&&C3.IsFiniteNumber(o[\"sgzid\"]))sceneGraphExportDataMap.set(this,{childrenData:o[\"sgcd\"],zIndexData:o[\"sgzid\"]})}if(o.hasOwnProperty(\"mesh\")){const meshData=o[\"mesh\"];this.CreateMesh(meshData[\"cols\"],\nmeshData[\"rows\"]);this.GetSourceMesh().LoadFromJson(meshData)}else this.ReleaseMesh();this.SetBboxChanged();enableUpdateRendererStateGroup=true;this._UpdateRendererStateGroup();if(mode!==\"visual-state\")this._runtime.AddInstanceNeedingAfterLoad(this.GetInstance(),o)}};\n\n}\n\n// objects/behaviorType.js\n{\n'use strict';const C3=self.C3;\nC3.BehaviorType=class BehaviorType extends C3.DefendedBase{constructor(objectClass,data){super();const runtime=objectClass.GetRuntime();const pluginManager=runtime.GetPluginManager();const BehaviorCtor=runtime.GetObjectReference(data[1]);if(!pluginManager.HasBehaviorByConstructorFunction(BehaviorCtor))pluginManager.CreateBehavior(data);this._runtime=runtime;this._objectClass=objectClass;this._behavior=pluginManager.GetBehaviorByConstructorFunction(BehaviorCtor);this._sdkType=null;this._instSdkCtor=\nBehaviorCtor.Instance;this._sid=data[2];this._name=data[0];this._jsPropName=this._runtime.GetJsPropName(data[3]);this._sdkType=C3.New(BehaviorCtor.Type,this);this.OnCreate()}static Create(objectClass,behaviorTypeData){return C3.New(C3.BehaviorType,objectClass,behaviorTypeData)}Release(){this._runtime=null;this._behavior=null;this._sdkType.Release();this._sdkType=null;this._instSdkCtor=null}GetSdkType(){return this._sdkType}OnCreate(){this._sdkType.OnCreate()}GetRuntime(){return this._runtime}GetObjectClass(){return this._objectClass}GetBehavior(){return this._behavior}GetInstanceSdkCtor(){return this._instSdkCtor}GetName(){return this._name}GetSID(){return this._sid}GetJsPropName(){return this._jsPropName}};\n\n}\n\n// objects/behaviorInstance.js\n{\n'use strict';const C3=self.C3;const IBehaviorInstance=self.IBehaviorInstance;\nC3.BehaviorInstance=class BehaviorInstance extends C3.DefendedBase{constructor(opts){super();this._runtime=opts.runtime;this._behaviorType=opts.behaviorType;this._behavior=this._behaviorType.GetBehavior();this._inst=opts.instance;this._index=opts.index;this._sdkInst=null;this._iScriptInterface=null;this._behavior._AddInstance(this._inst)}Release(){if(this._iScriptInterface){this._iScriptInterface._Release();this._iScriptInterface=null}this._behavior._RemoveInstance(this._inst);this._sdkInst.Release();\nthis._sdkInst=null;this._runtime=null;this._behaviorType=null;this._behavior=null;this._inst=null}_CreateSdkInstance(properties){if(this._sdkInst)throw new Error(\"already got sdk instance\");this._sdkInst=C3.New(this._behaviorType.GetInstanceSdkCtor(),this,properties)}GetSdkInstance(){return this._sdkInst}GetObjectInstance(){return this._inst}GetRuntime(){return this._runtime}GetBehaviorType(){return this._behaviorType}GetBehavior(){return this._behavior}_GetIndex(){return this._index}PostCreate(){this._sdkInst.PostCreate()}OnSpriteFrameChanged(prevFrame,\nnextFrame){this._sdkInst.OnSpriteFrameChanged(prevFrame,nextFrame)}_GetDebuggerProperties(){return this._sdkInst.GetDebuggerProperties()}SaveToJson(){return this._sdkInst.SaveToJson()}LoadFromJson(o){return this._sdkInst.LoadFromJson(o)}static SortByTickSequence(a,b){const instA=a.GetObjectInstance();const instB=b.GetObjectInstance();const typeIndexA=instA.GetObjectClass().GetIndex();const typeIndexB=instB.GetObjectClass().GetIndex();if(typeIndexA!==typeIndexB)return typeIndexA-typeIndexB;const seqA=\ninstA.GetPUID();const seqB=instB.GetPUID();if(seqA!==seqB)return seqA-seqB;return a.GetBehaviorInstance()._GetIndex()-b.GetBehaviorInstance()._GetIndex()}_InitScriptInterface(){const DefaultScriptClass=IBehaviorInstance;const SdkScriptClass=this._sdkInst.GetScriptInterfaceClass();const ScriptInterfaceClass=SdkScriptClass||DefaultScriptClass;IBehaviorInstance._Init(this);this._iScriptInterface=new ScriptInterfaceClass;IBehaviorInstance._Init(null);if(SdkScriptClass&&!(this._iScriptInterface instanceof\nDefaultScriptClass))throw new TypeError(`script interface class '${SdkScriptClass.name}' does not extend the right base class '${DefaultScriptClass.name}'`);return this._iScriptInterface}GetScriptInterface(){return this._iScriptInterface||this._InitScriptInterface()}HasScriptInterface(){return!!this._iScriptInterface}};\n\n}\n\n// objects/effectList.js\n{\n'use strict';const C3=self.C3;\nC3.EffectList=class EffectList extends C3.DefendedBase{constructor(owner,data){super();this._owner=owner;this._allEffectTypes=[];this._activeEffectTypes=[];this._effectTypesByName=new Map;this._effectParams=[];this._effectParamBuffers=[];this._allInstanceEffectLists=new Set;this._preservesOpaqueness=true;for(const d of data){const et=C3.New(C3.EffectType,this,d,this._allEffectTypes.length);this._allEffectTypes.push(et);this._effectTypesByName.set(et.GetName().toLowerCase(),et);if(d.length>=3)this._effectParams.push(this._LoadSingleEffectParameters(et,\nd[2]))}this.GetRuntime()._AddEffectList(this)}Release(){for(const cpb of this._effectParamBuffers)cpb.Release();C3.clearArray(this._effectParamBuffers);C3.clearArray(this._allEffectTypes);C3.clearArray(this._activeEffectTypes);this._effectTypesByName.clear();C3.clearArray(this._effectParams);this._owner=null}_AddInstanceEffectList(iel){this._allInstanceEffectLists.add(iel)}_RemoveInstanceEffectList(iel){this._allInstanceEffectLists.delete(iel)}_InitRenderer(renderer){if(renderer.IsWebGPU()){this._effectParamBuffers=\nthis._allEffectTypes.map(et=>{const shaderProgram=et.GetShaderProgram();if(shaderProgram.GetCustomParametersByteSize()>0)return C3.New(C3.Gfx.WebGPUEffectCustomParamsBuffer,shaderProgram);else return null});this._UpdateAllEffectParamBuffers()}for(const iel of this._allInstanceEffectLists)iel._InitRenderer(renderer)}PrependEffectTypes(arr){if(!arr.length)return;this._allEffectTypes=arr.concat(this._allEffectTypes);for(const et of arr)this._effectTypesByName.set(et.GetName().toLowerCase(),et);for(let i=\n0,len=this._allEffectTypes.length;i<len;++i)this._allEffectTypes[i]._SetIndex(i)}_LoadSingleEffectParameters(effectType,arr){effectType.SetActive(arr[0]);const ret=arr.slice(1);for(let i=0,len=ret.length;i<len;++i){const p=ret[i];if(Array.isArray(p)){const c=C3.New(C3.Color);c.setFromJSON(p);ret[i]=c}}return ret}GetOwner(){return this._owner}GetRuntime(){return this._owner.GetRuntime()}UpdateActiveEffects(){C3.clearArray(this._activeEffectTypes);let preservesOpaqueness=true;for(const et of this._allEffectTypes)if(et.IsActive()){this._activeEffectTypes.push(et);\nif(!et.GetShaderProgram().PreservesOpaqueness())preservesOpaqueness=false}this._preservesOpaqueness=preservesOpaqueness}GetAllEffectTypes(){return this._allEffectTypes}HasAnyEffectType(){return this._allEffectTypes.length>0}GetEffectTypeByName(name){return this._effectTypesByName.get(name.toLowerCase())||null}GetEffectTypeByIndex(index){index=Math.floor(+index);if(index<0||index>=this._allEffectTypes.length)throw new RangeError(\"invalid effect type index\");return this._allEffectTypes[index]}IsEffectIndexActive(index){return this.GetEffectTypeByIndex(index).IsActive()}SetEffectIndexActive(index,\na){this.GetEffectTypeByIndex(index).SetActive(a)}GetActiveEffectTypes(){return this._activeEffectTypes}HasAnyActiveEffect(){return this._activeEffectTypes.length>0}PreservesOpaqueness(){return this._preservesOpaqueness}GetEffectParametersForIndex(index){return this._effectParams[index]}_GetEffectChainShaderParametersForIndex(index){if(index<this._effectParamBuffers.length)return this._effectParamBuffers[index];else return this._effectParams[index]}GetEffectParameter(effectIndex,paramIndex){if(effectIndex<\n0||effectIndex>=this._effectParams.length)return null;const effectParams=this._effectParams[effectIndex];if(paramIndex<0||paramIndex>=effectParams.length)return null;return effectParams[paramIndex]}SetEffectParameter(effectIndex,paramIndex,value){if(effectIndex<0||effectIndex>=this._effectParams.length)return false;const effectParams=this._effectParams[effectIndex];if(paramIndex<0||paramIndex>=effectParams.length)return false;const oldValue=effectParams[paramIndex];if(oldValue instanceof C3.Color){if(oldValue.equalsIgnoringAlpha(value))return false;\noldValue.copyRgb(value)}else{if(oldValue===value)return false;effectParams[paramIndex]=value}if(effectIndex<this._effectParamBuffers.length)this._effectParamBuffers[effectIndex].SetParameterValue(paramIndex,value);return true}_UpdateAllEffectParamBuffers(){const effectParams=this._effectParams;const effectParamBuffers=this._effectParamBuffers;for(let i=0,len=Math.min(effectParams.length,effectParamBuffers.length);i<len;++i){const paramsBuf=effectParamBuffers[i];const params=effectParams[i];for(let j=\n0,lenj=params.length;j<lenj;++j)paramsBuf.SetParameterValue(j,params[j])}}static SaveFxParamToJson(param){if(param&&param instanceof C3.Color)return{\"t\":\"color\",\"v\":param.toJSON()};else return param}static LoadFxParamFromJson(o){if(o===null)return NaN;else if(typeof o===\"object\"){const type=o[\"t\"];if(type===\"color\"){const color=C3.New(C3.Color);color.setFromJSON(o[\"v\"]);return color}else throw new Error(\"invalid effect parameter type\");}else return o}static SaveFxParamsToJson(params){return params.map(C3.EffectList.SaveFxParamToJson)}static LoadFxParamsFromJson(arr){return arr.map(C3.EffectList.LoadFxParamFromJson)}SaveToJson(){return this._allEffectTypes.map(et=>\n({\"name\":et.GetName(),\"active\":et.IsActive(),\"params\":C3.EffectList.SaveFxParamsToJson(this._effectParams[et.GetIndex()])}))}LoadFromJson(arr){for(const o of arr){const et=this.GetEffectTypeByName(o[\"name\"]);if(!et)continue;et.SetActive(o[\"active\"]);this._effectParams[et.GetIndex()]=C3.EffectList.LoadFxParamsFromJson(o[\"params\"])}this.UpdateActiveEffects();this._UpdateAllEffectParamBuffers()}};\n\n}\n\n// objects/effectType.js\n{\n'use strict';const C3=self.C3;\nC3.EffectType=class EffectType extends C3.DefendedBase{constructor(effectList,data,index){super();this._effectList=effectList;this._id=data[0];this._name=data[1];this._index=index;this._shaderProgram=null;this._isActive=true}Release(){this._effectList=null;this._shaderProgram=null}Clone(effectListOwner){const ret=C3.New(C3.EffectType,effectListOwner,[this._id,this._name],-1);ret._shaderProgram=this._shaderProgram;ret._isActive=this._isActive;return ret}_InitRenderer(renderer){const shaderProgram=renderer.GetShaderProgramByName(this._id);\nif(!shaderProgram)throw new Error(\"failed to find shader program '\"+this._id+\"'\");this._shaderProgram=shaderProgram}GetEffectList(){return this._effectList}GetName(){return this._name}_SetIndex(i){this._index=i}GetIndex(){return this._index}GetOwner(){return this._effectList.GetOwner()}GetRuntime(){return this._effectList.GetRuntime()}SetActive(a){this._isActive=!!a}IsActive(){return this._isActive}GetShaderProgram(){return this._shaderProgram}GetDefaultParameterValues(){const ret=[];for(let i=0,\nlen=this._shaderProgram.GetParameterCount();i<len;++i){const type=this._shaderProgram.GetParameterType(i);if(type===\"float\"||type===\"percent\")ret.push(0);else if(type===\"color\")ret.push(C3.New(C3.Color,1,1,1,1));else throw new TypeError(\"unknown effect parameter type\");}return ret}};\n\n}\n\n// objects/instanceEffectList.js\n{\n'use strict';const C3=self.C3;\nC3.InstanceEffectList=class InstanceEffectList extends C3.DefendedBase{constructor(inst,wi){super();this._inst=inst;this._wi=wi;this._effectList=inst.GetObjectClass().GetEffectList();this._needsRebuildSteps=true;this._wasDefaultColor=true;this._was3D=false;this._wasRotatedOrNegativeSize=false;this._wasTexRotated=false;this._effectChain=C3.New(C3.Gfx.EffectChain,inst.GetRuntime().GetCanvasManager().GetEffectChainManager(),{drawContent:(renderer,effectChain)=>{const inst=effectChain.GetContentObject();\nconst wi=inst.GetWorldInfo();renderer.SetColor(wi.GetPremultipliedColor());renderer.SetCurrentZ(wi.GetTotalZElevation());inst.Draw(renderer);renderer.SetCurrentZ(0)},getSourceTextureInfo:inst=>{const srcTexRect=inst.GetCurrentTexRect();const [srcWidth,srcHeight]=inst.GetCurrentSurfaceSize();return{srcTexRect,srcWidth,srcHeight}},getShaderParameters:index=>this._GetEffectChainShaderParametersForIndex(index)});this._activeEffectFlags=[];this._activeEffectTypes=[];this._preservesOpaqueness=true;this._effectParams=\n[];this._effectParamBuffers=[];this._InitRenderer(inst.GetRuntime().GetRenderer());for(let i=0,len=this._effectList.GetAllEffectTypes().length;i<len;++i)this._activeEffectFlags.push(true);this.UpdateActiveEffects();this._effectList._AddInstanceEffectList(this)}Release(){this._effectList._RemoveInstanceEffectList(this);for(const cpb of this._effectParamBuffers)if(cpb)cpb.Release();C3.clearArray(this._effectParamBuffers);this._effectChain.Release();this._effectChain=null;C3.clearArray(this._activeEffectFlags);\nC3.clearArray(this._activeEffectTypes);C3.clearArray(this._effectParams);this._inst=null;this._effectList=null}_InitRenderer(renderer){if(renderer.IsWebGPU())this._effectParamBuffers=this._effectList.GetAllEffectTypes().map(et=>{const shaderProgram=et.GetShaderProgram();if(shaderProgram.GetCustomParametersByteSize()>0)return C3.New(C3.Gfx.WebGPUEffectCustomParamsBuffer,shaderProgram);else return null})}_LoadEffectParameters(data){let index=0;for(const e of data){this._effectParams.push(this._LoadSingleEffectParameters(index,\ne));++index}this._UpdateAllEffectParamBuffers();this.UpdateActiveEffects()}_LoadSingleEffectParameters(index,arr){this._activeEffectFlags[index]=arr[0];const ret=arr.slice(1);for(let i=0,len=ret.length;i<len;++i){const p=ret[i];if(Array.isArray(p)){const c=C3.New(C3.Color);c.setFromJSON(p);ret[i]=c}}return ret}LoadDefaultEffectParameters(){for(const effectType of this._effectList.GetAllEffectTypes())this._effectParams.push(effectType.GetDefaultParameterValues());this._UpdateAllEffectParamBuffers()}GetOwner(){return this._owner}GetEffectList(){return this._effectList}GetEffectChain(){this._MaybeRebuildEffectChainSteps();\nreturn this._effectChain}GetRuntime(){return this._inst.GetRuntime()}UpdateActiveEffects(){C3.clearArray(this._activeEffectTypes);const wi=this._wi;const allEffectTypes=this._effectList.GetAllEffectTypes();const activeEffectTypes=this._activeEffectTypes;const activeEffectFlags=this._activeEffectFlags;let preservesOpaqueness=true;for(let i=0,len=allEffectTypes.length;i<len;++i)if(activeEffectFlags[i]){const et=allEffectTypes[i];activeEffectTypes.push(et);if(!et.GetShaderProgram().PreservesOpaqueness())preservesOpaqueness=\nfalse}this._preservesOpaqueness=preservesOpaqueness;wi._SetHasAnyActiveEffect(!!activeEffectTypes.length);this._needsRebuildSteps=true}_MaybeRebuildEffectChainSteps(){const inst=this._inst;const wi=this._wi;const isDefaultColor=wi.HasDefaultColor();const is3D=wi.GetDepth()>0;const isRotatedOrNegativeSizeInstance=wi.GetAngle()!==0||wi.GetWidth()<0||wi.GetHeight()<0;const isTexRotated=inst.IsCurrentTexRotated();if(!this._needsRebuildSteps&&isDefaultColor===this._wasDefaultColor&&is3D===this._was3D&&\nisRotatedOrNegativeSizeInstance===this._wasRotatedOrNegativeSize&&isTexRotated===this._wasTexRotated&&!this._effectChain.NeedsRebuild())return;this._effectChain.BuildSteps(this._activeEffectTypes.map(e=>e.GetShaderProgram()),{indexMap:this._activeEffectTypes.map(e=>e.GetIndex()),forcePreDraw:!isDefaultColor||inst.MustPreDraw(),is3D,isSourceTextureRotated:isTexRotated,isRotatedOrNegativeSizeInstance});this._needsRebuildSteps=false;this._wasDefaultColor=isDefaultColor;this._was3D=is3D;this._wasRotatedOrNegativeSize=\nisRotatedOrNegativeSizeInstance;this._wasTexRotated=isTexRotated}GetActiveEffectTypes(){return this._activeEffectTypes}GetEffectParametersForIndex(index){return this._effectParams[index]}_GetEffectChainShaderParametersForIndex(index){if(index<this._effectParamBuffers.length)return this._effectParamBuffers[index];else return this._effectParams[index]}GetEffectParameter(effectIndex,paramIndex){if(effectIndex<0||effectIndex>=this._effectParams.length)return null;const effectParams=this._effectParams[effectIndex];\nif(paramIndex<0||paramIndex>=effectParams.length)return null;return effectParams[paramIndex]}SetEffectParameter(effectIndex,paramIndex,value){if(effectIndex<0||effectIndex>=this._effectParams.length)return false;const effectParams=this._effectParams[effectIndex];if(paramIndex<0||paramIndex>=effectParams.length)return false;const oldValue=effectParams[paramIndex];if(oldValue instanceof C3.Color){if(oldValue.equalsIgnoringAlpha(value))return false;oldValue.copyRgb(value)}else{if(oldValue===value)return false;\neffectParams[paramIndex]=value}if(effectIndex<this._effectParamBuffers.length)this._effectParamBuffers[effectIndex].SetParameterValue(paramIndex,value);return true}_UpdateAllEffectParamBuffers(){const effectParams=this._effectParams;const effectParamBuffers=this._effectParamBuffers;for(let i=0,len=effectParamBuffers.length;i<len;++i){const paramsBuf=effectParamBuffers[i];const params=effectParams[i];for(let j=0,lenj=params.length;j<lenj;++j)paramsBuf.SetParameterValue(j,params[j])}}PreservesOpaqueness(){return this._preservesOpaqueness}HasAnyActiveBackgroundBlendingEffect(){return this._activeEffectTypes.some(et=>\net.GetShaderProgram().BlendsBackground())}IsEffectIndexActive(i){return this._activeEffectFlags[i]}SetEffectIndexActive(i,e){this._activeEffectFlags[i]=!!e}GetAllEffectTypes(){return this._effectList.GetAllEffectTypes()}_SaveToJson(){return this._effectList.GetAllEffectTypes().map(et=>({\"name\":et.GetName(),\"active\":this._activeEffectFlags[et.GetIndex()],\"params\":C3.EffectList.SaveFxParamsToJson(this._effectParams[et.GetIndex()])}))}_LoadFromJson(arr){for(const o of arr){const et=this._effectList.GetEffectTypeByName(o[\"name\"]);\nif(!et)continue;this._activeEffectFlags[et.GetIndex()]=o[\"active\"];this._effectParams[et.GetIndex()]=C3.EffectList.LoadFxParamsFromJson(o[\"params\"])}this.UpdateActiveEffects();this._UpdateAllEffectParamBuffers()}};\n\n}\n\n// collisions/collisionEngine.js\n{\n'use strict';const C3=self.C3;const tempCandidates=[];const tileCollRectCandidates=[];const tempJumpthruRet=[];const tempPolyA=C3.New(C3.CollisionPoly);const tempPolyB=C3.New(C3.CollisionPoly);const tempQuad=C3.New(C3.Quad);const tempRect=C3.New(C3.Rect);const tempRect2=C3.New(C3.Rect);let tempPolyC=null;let tempRect3=null;let tempQuadB=null;\nC3.CollisionEngine=class CollisionEngine extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._registeredCollisions=[];this._collisionCheckCount=0;this._collisionCheckSec=0;this._polyCheckCount=0;this._polyCheckSec=0}Release(){this._runtime=null}_Update1sStats(){this._collisionCheckSec=this._collisionCheckCount;this._collisionCheckCount=0;this._polyCheckSec=this._polyCheckCount;this._polyCheckCount=0}Get1secCollisionChecks(){return this._collisionCheckSec}Get1secPolyChecks(){return this._polyCheckSec}RegisterCollision(a,\nb){const aw=a.GetWorldInfo();const bw=b.GetWorldInfo();if(!aw||!bw)return;if(!aw.IsCollisionEnabled()||!bw.IsCollisionEnabled())return;this._registeredCollisions.push([a,b])}AddRegisteredCollisionCandidates(inst,otherType,arr){for(const [a,b]of this._registeredCollisions){let otherInst=null;if(inst===a)otherInst=b;else if(inst===b)otherInst=a;else continue;if(!otherInst.BelongsToObjectClass(otherType))continue;if(!arr.includes(otherInst))arr.push(otherInst)}}CheckRegisteredCollision(a,b){if(!this._registeredCollisions.length)return false;\nfor(const [c,d]of this._registeredCollisions)if(a===c&&b===d||a===d&&b===c)return true;return false}ClearRegisteredCollisions(){C3.clearArray(this._registeredCollisions)}TestOverlap(a,b){if(!a||!b||a===b)return false;const aw=a.GetWorldInfo();const bw=b.GetWorldInfo();if(!aw.IsCollisionEnabled()||!bw.IsCollisionEnabled())return false;this._collisionCheckCount++;const layerA=aw.GetLayer();const layerB=bw.GetLayer();const areLayerTransformsCompatible=layerA.IsTransformCompatibleWith(layerB);if(areLayerTransformsCompatible)return this._TestOverlap_SameLayers(aw,\nbw);else return this._TestOverlap_DifferentLayers(aw,bw)}_TestOverlap_SameLayers(aw,bw){if(!aw.GetBoundingBox().intersectsRect(bw.GetBoundingBox()))return false;this._polyCheckCount++;if(!aw.GetBoundingQuad().intersectsQuad(bw.GetBoundingQuad()))return false;if(aw.HasTilemap()&&bw.HasTilemap())return false;if(aw.HasTilemap())return this.TestTilemapOverlap(aw,bw);else if(bw.HasTilemap())return this.TestTilemapOverlap(bw,aw);if(!aw.HasOwnCollisionPoly()&&!bw.HasOwnCollisionPoly())return true;const polyA=\naw.GetTransformedCollisionPoly();const polyB=bw.GetTransformedCollisionPoly();return polyA.intersectsPoly(polyB,bw.GetX()-aw.GetX(),bw.GetY()-aw.GetY())}_TestOverlap_DifferentLayers(aw,bw){const aIsTileMap=aw.HasTilemap();const bIsTileMap=bw.HasTilemap();if(aIsTileMap&&!bIsTileMap)return this.TestTilemapOverlapDifferentLayers(aw,bw);else if(bIsTileMap&&!aIsTileMap)return this.TestTilemapOverlapDifferentLayers(bw,aw);else if(!bIsTileMap&&!aIsTileMap){const layerA=aw.GetLayer();const layerB=bw.GetLayer();\ntempPolyA.copy(aw.GetTransformedCollisionPoly());tempPolyB.copy(bw.GetTransformedCollisionPoly());const ptsArrA=tempPolyA.pointsArr();for(let i=0,len=ptsArrA.length;i<len;i+=2){const j=i+1;const x=ptsArrA[i];const y=ptsArrA[j];const [lx,ly]=layerA.LayerToCanvasCss(x+aw.GetX(),y+aw.GetY());ptsArrA[i]=lx;ptsArrA[j]=ly}const ptsArrB=tempPolyB.pointsArr();for(let i=0,len=ptsArrB.length;i<len;i+=2){const j=i+1;const x=ptsArrB[i];const y=ptsArrB[j];const [lx,ly]=layerB.LayerToCanvasCss(x+bw.GetX(),y+bw.GetY());\nptsArrB[i]=lx;ptsArrB[j]=ly}tempPolyA.setBboxChanged();tempPolyB.setBboxChanged();this._polyCheckCount++;return tempPolyA.intersectsPoly(tempPolyB,0,0)}else return false}TestTilemapOverlapDifferentLayers(tilemapWi,nonTilemapWi){const tilemapLayer=tilemapWi.GetLayer();const nonTilemapLayer=nonTilemapWi.GetLayer();if(!tempPolyC)tempPolyC=C3.New(C3.CollisionPoly);if(!tempRect3)tempRect3=C3.New(C3.Rect);if(!tempQuadB)tempQuadB=C3.New(C3.Quad);const nonTilemapX=nonTilemapWi.GetX();const nonTilemapY=nonTilemapWi.GetY();\nconst [lx,ly]=nonTilemapLayer.LayerToCanvasCss(nonTilemapX,nonTilemapY);const [nonTilemapTransformedX,nonTilemapTransformedY]=tilemapLayer.CanvasCssToLayer(lx,ly);const deltaX=nonTilemapTransformedX-nonTilemapX;const deltaY=nonTilemapTransformedY-nonTilemapY;tempRect3.copy(nonTilemapWi.GetBoundingBox());tempRect3.offset(deltaX,deltaY);if(!tilemapWi.GetBoundingBox().intersectsRect(tempRect3))return false;tempQuadB.copy(nonTilemapWi.GetBoundingQuad());tempQuadB.offset(deltaX,deltaY);this._polyCheckCount++;\nif(!tilemapWi.GetBoundingQuad().intersectsQuad(tempQuadB))return false;tempPolyC.copy(nonTilemapWi.GetTransformedCollisionPoly());const ptsArrB=tempPolyC.pointsArr();for(let i=0,len=ptsArrB.length;i<len;i+=2){const j=i+1;ptsArrB[i]+=deltaX;ptsArrB[j]+=deltaY}tempPolyC.setBboxChanged();return this.TestTilemapOverlap(tilemapWi,nonTilemapWi,nonTilemapTransformedX,nonTilemapTransformedY,tempPolyC,tempRect3,tempQuadB)}TestTilemapOverlap(tmWi,wi,transformedWiX,transformedWiY,transformedCollisionPoly,transformedBoundingBox,\ntransformedBoundingQuad){const bbox=transformedBoundingBox!==undefined?transformedBoundingBox:wi.GetBoundingBox();const tmX=tmWi.GetX();const tmY=tmWi.GetY();const tmSdkInst=tmWi.GetInstance().GetSdkInstance();const instX=transformedWiX!==undefined?transformedWiX:wi.GetX();const instY=transformedWiY!==undefined?transformedWiY:wi.GetY();const instHasPoly=wi.HasOwnCollisionPoly();const instQuad=transformedBoundingQuad!==undefined?transformedBoundingQuad:wi.GetBoundingQuad();const collRects=tileCollRectCandidates;\ntmSdkInst.GetCollisionRectCandidates(bbox,collRects);for(let i=0,len=collRects.length;i<len;++i){const c=collRects[i];const rc=c.GetRect();this._collisionCheckCount++;if(bbox.intersectsRectOffset(rc,tmX,tmY)){tempQuad.setFromRect(rc);tempQuad.offset(tmX,tmY);if(tempQuad.intersectsQuad(instQuad))if(instHasPoly){const instPoly=transformedCollisionPoly!==undefined?transformedCollisionPoly:wi.GetTransformedCollisionPoly();let instOffX=instX;let instOffY=instY;if(transformedCollisionPoly!==undefined){instOffX=\nwi.GetX();instOffY=wi.GetY()}const tilePoly=c.GetPoly();if(tilePoly){this._polyCheckCount++;if(tilePoly.intersectsPoly(instPoly,instOffX-(tmX+rc.getLeft()),instOffY-(tmY+rc.getTop()))){C3.clearArray(collRects);return true}}else{tempPolyA.setFromQuad(tempQuad,0,0);if(tempPolyA.intersectsPoly(instPoly,instOffX,instOffY)){C3.clearArray(collRects);return true}}}else{const tilePoly=c.GetPoly();if(tilePoly){tempPolyA.setFromQuad(instQuad,0,0);if(tilePoly.intersectsPoly(tempPolyA,-(tmX+rc.getLeft()),-(tmY+\nrc.getTop()))){C3.clearArray(collRects);return true}}else{C3.clearArray(collRects);return true}}}}C3.clearArray(collRects);return false}TestAndSelectCanvasPointOverlap(objectClass,ptx,pty,isInverted){const sol=objectClass.GetCurrentSol();const currentEvent=this._runtime.GetCurrentEvent();if(!currentEvent)throw new Error(\"cannot call outside event\");const isOrBlock=currentEvent.IsOrBlock();const interactiveLayersCache=new Map;const isLayerInteractive=layer=>{let ret=interactiveLayersCache.get(layer);\nif(typeof ret===\"undefined\"){ret=layer.IsSelfAndParentsInteractive();interactiveLayersCache.set(layer,ret)}return ret};if(sol.IsSelectAll()){if(!isInverted){sol._SetSelectAll(false);C3.clearArray(sol._GetOwnInstances())}if(isOrBlock)C3.clearArray(sol._GetOwnElseInstances());for(const inst of objectClass.GetInstances()){const wi=inst.GetWorldInfo();const layer=wi.GetLayer();let containsPoint=false;if(isLayerInteractive(layer)&&wi.IsInViewport2()){const [lx,ly]=layer.CanvasCssToLayer(ptx,pty,wi.GetTotalZElevation());\ncontainsPoint=wi.ContainsPoint(lx,ly)}if(containsPoint)if(isInverted)return false;else sol._PushInstance(inst);else if(isOrBlock)sol._PushElseInstance(inst)}}else{let arr;let isPickingElseInstances=false;if(isOrBlock)if(this._runtime.IsCurrentConditionFirst()&&!sol._GetOwnElseInstances().length&&sol._GetOwnInstances().length)arr=sol._GetOwnInstances();else{arr=sol._GetOwnElseInstances();isPickingElseInstances=true}else arr=sol._GetOwnInstances();let j=0;for(let i=0,len=arr.length;i<len;++i){const inst=\narr[i];const wi=inst.GetWorldInfo();const layer=wi.GetLayer();let containsPoint=false;if(isLayerInteractive(layer)&&wi.IsInViewport2()){const [lx,ly]=layer.CanvasCssToLayer(ptx,pty,wi.GetTotalZElevation());containsPoint=wi.ContainsPoint(lx,ly)}if(containsPoint)if(isInverted)return false;else if(isPickingElseInstances)sol._PushInstance(inst);else arr[j++]=inst;else if(isPickingElseInstances)arr[j++]=inst;else if(isOrBlock)sol._PushElseInstance(inst)}if(!isInverted)arr.length=j}objectClass.ApplySolToContainer();\ninteractiveLayersCache.clear();if(isInverted)return true;else return sol.HasAnyInstances()}GetCollisionCandidates(layer,rtype,bbox,candidates){const isParallaxed=layer?layer.GetParallaxX()!==1||layer.GetParallaxY()!==1:false;if(rtype.IsFamily())for(const memberType of rtype.GetFamilyMembers())if(isParallaxed||memberType.IsAnyInstanceParallaxed())C3.appendArray(candidates,memberType.GetInstances());else{memberType._UpdateAllCollisionCells();memberType._GetCollisionCellGrid().QueryRange(bbox,candidates)}else if(isParallaxed||\nrtype.IsAnyInstanceParallaxed())C3.appendArray(candidates,rtype.GetInstances());else{rtype._UpdateAllCollisionCells();rtype._GetCollisionCellGrid().QueryRange(bbox,candidates)}}GetObjectClassesCollisionCandidates(layer,objectClasses,bbox,candidates){for(const objectClass of objectClasses)this.GetCollisionCandidates(layer,objectClass,bbox,candidates)}GetSolidCollisionCandidates(layer,bbox,candidates){const solidBehavior=this._runtime.GetSolidBehavior();if(!solidBehavior)return;this.GetObjectClassesCollisionCandidates(layer,\nsolidBehavior.GetObjectClasses(),bbox,candidates)}GetJumpthruCollisionCandidates(layer,bbox,candidates){const jumpthruBehavior=this._runtime.GetJumpthruBehavior();if(!jumpthruBehavior)return;this.GetObjectClassesCollisionCandidates(layer,jumpthruBehavior.GetObjectClasses(),bbox,candidates)}IsSolidCollisionAllowed(solidInst,inst){return solidInst._IsSolidEnabled()&&(!inst||inst.GetWorldInfo().IsSolidCollisionAllowed(solidInst.GetSavedDataMap().get(\"solidTags\")))}TestOverlapSolid(inst){const wi=inst.GetWorldInfo();\nthis.GetSolidCollisionCandidates(wi.GetLayer(),wi.GetBoundingBox(),tempCandidates);for(const s of tempCandidates){if(!this.IsSolidCollisionAllowed(s,inst))continue;if(this.TestOverlap(inst,s)){C3.clearArray(tempCandidates);return s}}C3.clearArray(tempCandidates);return null}TestRectOverlapSolid(rect,inst){this.GetSolidCollisionCandidates(null,rect,tempCandidates);for(const s of tempCandidates){if(!this.IsSolidCollisionAllowed(s,inst))continue;if(this.TestRectOverlap(rect,s)){C3.clearArray(tempCandidates);\nreturn s}}C3.clearArray(tempCandidates);return null}TestOverlapJumpthru(inst,all){let ret=null;if(all){ret=tempJumpthruRet;C3.clearArray(ret)}const wi=inst.GetWorldInfo();this.GetJumpthruCollisionCandidates(wi.GetLayer(),wi.GetBoundingBox(),tempCandidates);for(const j of tempCandidates){if(!j._IsJumpthruEnabled())continue;if(this.TestOverlap(inst,j))if(all)ret.push(j);else{C3.clearArray(tempCandidates);return j}}C3.clearArray(tempCandidates);return ret}PushOut(inst,xdir,ydir,dist,otherInst){dist=\ndist||50;const wi=inst.GetWorldInfo();const oldX=wi.GetX();const oldY=wi.GetY();for(let i=0;i<dist;++i){wi.SetXY(oldX+xdir*i,oldY+ydir*i);wi.SetBboxChanged();if(!this.TestOverlap(inst,otherInst))return true}wi.SetXY(oldX,oldY);wi.SetBboxChanged();return false}PushOutSolid(inst,xdir,ydir,dist,includeJumpthrus,specificJumpthru){dist=dist||50;const wi=inst.GetWorldInfo();const oldX=wi.GetX();const oldY=wi.GetY();let lastOverlapped=null;let secondLastOverlapped=null;for(let i=0;i<dist;++i){wi.SetXY(oldX+\nxdir*i,oldY+ydir*i);wi.SetBboxChanged();if(!this.TestOverlap(inst,lastOverlapped)){lastOverlapped=this.TestOverlapSolid(inst);if(lastOverlapped)secondLastOverlapped=lastOverlapped;else{if(includeJumpthrus){if(specificJumpthru)lastOverlapped=this.TestOverlap(inst,specificJumpthru)?specificJumpthru:null;else lastOverlapped=this.TestOverlapJumpthru(inst);if(lastOverlapped)secondLastOverlapped=lastOverlapped}if(!lastOverlapped){if(secondLastOverlapped)this.PushInFractional(inst,xdir,ydir,secondLastOverlapped,\n16,true);return true}}}}wi.SetXY(oldX,oldY);wi.SetBboxChanged();return false}PushOutSolidAxis(inst,xdir,ydir,dist){dist=dist||50;const wi=inst.GetWorldInfo();const oldX=wi.GetX();const oldY=wi.GetY();let lastOverlapped=null;let secondLastOverlapped=null;for(let i=0;i<dist;++i)for(let which=0;which<2;++which){const sign=which*2-1;wi.SetXY(oldX+xdir*i*sign,oldY+ydir*i*sign);wi.SetBboxChanged();if(!this.TestOverlap(inst,lastOverlapped)){lastOverlapped=this.TestOverlapSolid(inst);if(lastOverlapped)secondLastOverlapped=\nlastOverlapped;else{if(secondLastOverlapped)this.PushInFractional(inst,xdir*sign,ydir*sign,secondLastOverlapped,16,true);return true}}}wi.SetXY(oldX,oldY);wi.SetBboxChanged();return false}PushInFractional(inst,xdir,ydir,otherInst,limit,includeAnySolid){let divisor=2;let forward=false;let overlapping=false;const wi=inst.GetWorldInfo();let bestX=wi.GetX();let bestY=wi.GetY();while(divisor<=limit){const frac=1/divisor;divisor*=2;wi.OffsetXY(xdir*frac*(forward?1:-1),ydir*frac*(forward?1:-1));wi.SetBboxChanged();\nif(this.TestOverlap(inst,otherInst)||includeAnySolid&&this.TestOverlapSolid(inst)){forward=true;overlapping=true}else{forward=false;overlapping=false;bestX=wi.GetX();bestY=wi.GetY()}}if(overlapping){wi.SetXY(bestX,bestY);wi.SetBboxChanged()}}PushOutSolidNearest(inst,maxDist=100){let dist=0;const wi=inst.GetWorldInfo();const oldX=wi.GetX();const oldY=wi.GetY();let dir=0;let lastOverlapped=this.TestOverlapSolid(inst);if(!lastOverlapped)return true;while(dist<=maxDist){let dx=0;let dy=0;switch(dir){case 0:dx=\n0;dy=-1;dist++;break;case 1:dx=1;dy=-1;break;case 2:dx=1;dy=0;break;case 3:dx=1;dy=1;break;case 4:dx=0;dy=1;break;case 5:dx=-1;dy=1;break;case 6:dx=-1;dy=0;break;case 7:dx=-1;dy=-1;break}dir=(dir+1)%8;wi.SetXY(Math.floor(oldX+dx*dist),Math.floor(oldY+dy*dist));wi.SetBboxChanged();if(!this.TestOverlap(inst,lastOverlapped)){lastOverlapped=this.TestOverlapSolid(inst);if(!lastOverlapped)return true}}wi.SetXY(oldX,oldY);wi.SetBboxChanged();return false}CalculateBounceAngle(inst,startX,startY,otherInst){const wi=\ninst.GetWorldInfo();const oldX=wi.GetX();const oldY=wi.GetY();const radius=Math.max(10,C3.distanceTo(startX,startY,oldX,oldY));const startAngle=C3.angleTo(startX,startY,oldX,oldY);const firstInst=otherInst||this.TestOverlapSolid(inst);if(!firstInst)return C3.clampAngle(startAngle+Math.PI);let curInst=firstInst;let anticlockwiseFreeAngle=0;let clockwiseFreeAngle=0;const increment=C3.toRadians(5);let i;for(i=1;i<36;++i){const curAngle=startAngle-i*increment;wi.SetXY(startX+Math.cos(curAngle)*radius,\nstartY+Math.sin(curAngle)*radius);wi.SetBboxChanged();if(!this.TestOverlap(inst,curInst)){curInst=otherInst?null:this.TestOverlapSolid(inst);if(!curInst){anticlockwiseFreeAngle=curAngle;break}}}if(i===36)anticlockwiseFreeAngle=C3.clampAngle(startAngle+Math.PI);curInst=firstInst;for(i=1;i<36;++i){const curAngle=startAngle+i*increment;wi.SetXY(startX+Math.cos(curAngle)*radius,startY+Math.sin(curAngle)*radius);wi.SetBboxChanged();if(!this.TestOverlap(inst,curInst)){curInst=otherInst?null:this.TestOverlapSolid(inst);\nif(!curInst){clockwiseFreeAngle=curAngle;break}}}if(i===36)clockwiseFreeAngle=C3.clampAngle(startAngle+Math.PI);wi.SetXY(oldX,oldY);wi.SetBboxChanged();if(clockwiseFreeAngle===anticlockwiseFreeAngle)return clockwiseFreeAngle;const halfDiff=C3.angleDiff(clockwiseFreeAngle,anticlockwiseFreeAngle)/2;let normal;if(C3.angleClockwise(clockwiseFreeAngle,anticlockwiseFreeAngle))normal=C3.clampAngle(anticlockwiseFreeAngle+halfDiff+Math.PI);else normal=C3.clampAngle(clockwiseFreeAngle+halfDiff);const vx=Math.cos(startAngle);\nconst vy=Math.sin(startAngle);const nx=Math.cos(normal);const ny=Math.sin(normal);const v_dot_n=vx*nx+vy*ny;const rx=vx-2*v_dot_n*nx;const ry=vy-2*v_dot_n*ny;return C3.angleTo(0,0,rx,ry)}TestSegmentOverlap(x1,y1,x2,y2,inst){if(!inst)return false;const wi=inst.GetWorldInfo();if(!wi.IsCollisionEnabled())return false;this._collisionCheckCount++;tempRect.set(Math.min(x1,x2),Math.min(y1,y2),Math.max(x1,x2),Math.max(y1,y2));if(!wi.GetBoundingBox().intersectsRect(tempRect))return false;if(inst.HasTilemap())return this._TestSegmentOverlapTilemap(x1,\ny1,x2,y2,inst,wi);this._polyCheckCount++;if(!wi.GetBoundingQuad().intersectsSegment(x1,y1,x2,y2))return false;if(!wi.HasOwnCollisionPoly())return true;const poly=wi.GetTransformedCollisionPoly();return poly.intersectsSegment(wi.GetX(),wi.GetY(),x1,y1,x2,y2)}_TestSegmentOverlapTilemap(x1,y1,x2,y2,inst,wi){const tmX=wi.GetX();const tmY=wi.GetY();const sdkInst=inst.GetSdkInstance();const collRects=tileCollRectCandidates;tempRect2.set(x1,y1,x2,y2);tempRect2.normalize();sdkInst.GetCollisionRectCandidates(tempRect2,\ncollRects);for(let i=0,len=collRects.length;i<len;++i){const c=collRects[i];const tileRc=c.GetRect();this._collisionCheckCount++;if(tempRect.intersectsRectOffset(tileRc,tmX,tmY)){tempQuad.setFromRect(tileRc);tempQuad.offset(tmX,tmY);if(tempQuad.intersectsSegment(x1,y1,x2,y2)){const tilePoly=c.GetPoly();if(tilePoly){this._polyCheckCount++;if(tilePoly.intersectsSegment(tmX+tileRc.getLeft(),tmY+tileRc.getTop(),x1,y1,x2,y2)){C3.clearArray(collRects);return true}}else{C3.clearArray(collRects);return true}}}}C3.clearArray(collRects);\nreturn false}TestRectOverlap(rect,inst){if(!inst)return false;const wi=inst.GetWorldInfo();if(!wi.IsCollisionEnabled())return false;this._collisionCheckCount++;if(!wi.GetBoundingBox().intersectsRect(rect))return false;if(inst.HasTilemap())return this._TestRectOverlapTilemap(rect,inst,wi);this._polyCheckCount++;tempQuad.setFromRect(rect);if(!wi.GetBoundingQuad().intersectsQuad(tempQuad))return false;if(!wi.HasOwnCollisionPoly())return true;const polyA=tempPolyA;polyA.setFromRect(rect,wi.GetX(),wi.GetY());\nconst polyB=wi.GetTransformedCollisionPoly();return polyA.intersectsPoly(polyB,0,0)}_TestRectOverlapTilemap(rect,inst,wi){const tmX=wi.GetX();const tmY=wi.GetY();const sdkInst=inst.GetSdkInstance();const collRects=tileCollRectCandidates;sdkInst.GetCollisionRectCandidates(rect,collRects);for(let i=0,len=collRects.length;i<len;++i){const c=collRects[i];const tileRc=c.GetRect();this._collisionCheckCount++;if(rect.intersectsRectOffset(tileRc,tmX,tmY)){const tilePoly=c.GetPoly();if(tilePoly){this._polyCheckCount++;\ntempPolyA.setFromRect(rect,0,0);if(tilePoly.intersectsPoly(tempPolyA,-(tmX+tileRc.getLeft()),-(tmY+tileRc.getTop()))){C3.clearArray(collRects);return true}}else{C3.clearArray(collRects);return true}}}C3.clearArray(collRects);return false}TestRayIntersectsInstance(inst,ray){if(!inst)return;const wi=inst.GetWorldInfo();if(!wi.IsCollisionEnabled())return;this._collisionCheckCount++;if(!wi.GetBoundingBox().intersectsRect(ray.rect))return;if(inst.HasTilemap()){this._TestRayIntersectsTilemap(inst,wi,ray);\nreturn}this._polyCheckCount++;if(wi.HasOwnCollisionPoly())ray.TestInstancePoly(inst,wi.GetX(),wi.GetY(),wi.GetTransformedCollisionPoly());else ray.TestInstanceQuad(inst,wi.GetBoundingQuad())}_TestRayIntersectsTilemap(inst,wi,ray){const xOffset=wi.GetX();const yOffset=wi.GetY();const collRects=tileCollRectCandidates;inst.GetSdkInstance().GetCollisionRectCandidates(ray.rect,collRects);for(let i=0,l=collRects.length;i<l;i++){const c=collRects[i];const tileRc=c.GetRect();this._collisionCheckCount++;if(ray.rect.intersectsRectOffset(tileRc,\nxOffset,yOffset)){const tilePoly=c.GetPoly();this._polyCheckCount++;if(tilePoly)ray.TestInstancePoly(inst,xOffset+tileRc.getLeft(),yOffset+tileRc.getTop(),tilePoly);else ray.TestInstanceRect(inst,wi.GetX(),wi.GetY(),tileRc)}}C3.clearArray(collRects)}};\n\n}\n\n// collisions/sparseGrid.js\n{\n'use strict';const C3=self.C3;\nC3.SparseGrid=class SparseGrid extends C3.DefendedBase{constructor(cellWidth,cellHeight){super();this._cellWidth=cellWidth;this._cellHeight=cellHeight;this._cells=C3.New(C3.PairMap)}Release(){this._cells.Release();this._cells=null}GetCell(x,y,createIfMissing){let ret=this._cells.Get(x,y);if(ret)return ret;else if(createIfMissing){ret=C3.New(C3.GridCell,this,x,y);this._cells.Set(x,y,ret);return ret}else return null}XToCell(x){const ret=Math.floor(x/this._cellWidth);return isFinite(ret)?ret:0}YToCell(y){const ret=\nMath.floor(y/this._cellHeight);return isFinite(ret)?ret:0}Update(inst,oldRange,newRange){if(oldRange)for(let x=oldRange.getLeft(),lenx=oldRange.getRight();x<=lenx;++x)for(let y=oldRange.getTop(),leny=oldRange.getBottom();y<=leny;++y){if(newRange&&newRange.containsPoint(x,y))continue;const cell=this.GetCell(x,y,false);if(!cell)continue;cell.Remove(inst);if(cell.IsEmpty())this._cells.Delete(x,y)}if(newRange)for(let x=newRange.getLeft(),lenx=newRange.getRight();x<=lenx;++x)for(let y=newRange.getTop(),\nleny=newRange.getBottom();y<=leny;++y){if(oldRange&&oldRange.containsPoint(x,y))continue;this.GetCell(x,y,true).Insert(inst)}}QueryRange(rc,result){let x=this.XToCell(rc.getLeft());const ystart=this.YToCell(rc.getTop());const lenx=this.XToCell(rc.getRight());const leny=this.YToCell(rc.getBottom());if(!isFinite(lenx)||!isFinite(leny))return;for(;x<=lenx;++x)for(let y=ystart;y<=leny;++y){const cell=this.GetCell(x,y,false);if(!cell)continue;cell.Dump(result)}}};\n\n}\n\n// collisions/gridCell.js\n{\n'use strict';const C3=self.C3;C3.GridCell=class GridCell extends C3.DefendedBase{constructor(grid,x,y){super();this._grid=grid;this._x=x;this._y=y;this._instances=C3.New(C3.ArraySet)}Release(){this._instances.Release();this._instances=null;this._grid=null}IsEmpty(){return this._instances.IsEmpty()}Insert(inst){this._instances.Add(inst)}Remove(inst){this._instances.Delete(inst)}Dump(result){C3.appendArray(result,this._instances.GetArray())}};\n\n}\n\n// collisions/ray.js\n{\n'use strict';const C3=self.C3;const PADDING=1E-6;const NO_HIT=2;\nC3.Ray=class Ray{constructor(){this.x1=0;this.y1=0;this.x2=0;this.y2=0;this.dx=0;this.dy=0;this.rect=new C3.Rect;this.hitFraction=NO_HIT;this.hitUid=null;this.hitNormal=0;this.hitNormalDx=0;this.hitNormalDy=0;this.hitX=0;this.hitY=0;this.distance=0;this.normalX=1;this.normalY=0;this.reflectionX=1;this.reflectionY=0}DidCollide(){return this.hitFraction<1+PADDING}Reset(){this.hitFraction=NO_HIT}Set(x1,y1,x2,y2){this.x1=x1;this.y1=y1;this.x2=x2;this.y2=y2;this.dx=x2-x1;this.dy=y2-y1;this.rect.set(x1,\ny1,x2,y2);this.rect.normalize();this.hitFraction=NO_HIT;this.hitUid=null;this.hitNormal=0;this.hitNormalDx=0;this.hitNormalDy=0;this.hitX=0;this.hitY=0;this.distance=0;this.normalX=1;this.normalY=0;this.reflectionX=1;this.reflectionY=0;return this}Complete(){if(this.DidCollide()===false)return;const dx=this.dx*this.hitFraction;const dy=this.dy*this.hitFraction;const length=Math.hypot(dx,dy);const dirx=dx/length;const diry=dy/length;this.distance=length-PADDING;this.hitX=this.x1+dirx*this.distance;\nthis.hitY=this.y1+diry*this.distance;this.hitNormal=Math.atan2(this.hitNormalDy,this.hitNormalDx)+Math.PI/2;this.normalX=Math.cos(this.hitNormal);this.normalY=Math.sin(this.hitNormal);const dot=dirx*this.normalX+diry*this.normalY;this.reflectionX=dirx-2*this.normalX*dot;this.reflectionY=diry-2*this.normalY*dot;if(dot>0){const PI=Math.PI;this.hitNormal=C3.clampAngle(this.hitNormal+PI);this.normalX=-this.normalX;this.normalY=-this.normalY}}TestInstanceSegment(inst,sx1,sy1,sx2,sy2){const t=C3.rayIntersect(this.x1,\nthis.y1,this.x2,this.y2,sx1,sy1,sx2,sy2);if(t>=0&&t<this.hitFraction){this.hitFraction=t;this.hitUid=inst.GetUID();this.hitNormalDx=sx1-sx2;this.hitNormalDy=sy1-sy2}}TestInstanceRect(inst,offX,offY,rect){const lt=offX+rect.getLeft(),rt=offX+rect.getRight(),tp=offY+rect.getTop(),bm=offY+rect.getBottom();this.TestInstanceSegment(inst,lt,tp,rt,tp);this.TestInstanceSegment(inst,rt,tp,rt,bm);this.TestInstanceSegment(inst,rt,bm,lt,bm);this.TestInstanceSegment(inst,lt,bm,lt,tp)}TestInstanceQuad(inst,quad){const tlX=\nquad.getTlx(),tlY=quad.getTly(),trX=quad.getTrx(),trY=quad.getTry(),brX=quad.getBrx(),brY=quad.getBry(),blX=quad.getBlx(),blY=quad.getBly();this.TestInstanceSegment(inst,tlX,tlY,trX,trY);this.TestInstanceSegment(inst,trX,trY,brX,brY);this.TestInstanceSegment(inst,brX,brY,blX,blY);this.TestInstanceSegment(inst,blX,blY,tlX,tlY)}TestInstancePoly(inst,offX,offY,poly){const points=poly.pointsArr();for(let i=0,l=points.length;i<l;i+=2){const ii=(i+2)%l;const x1=points[i]+offX;const y1=points[i+1]+offY;\nconst x2=points[ii]+offX;const y2=points[ii+1]+offY;this.TestInstanceSegment(inst,x1,y1,x2,y2)}}};\n\n}\n\n// canvasManager.js\n{\n'use strict';const C3=self.C3;const VALID_FULLSCREEN_MODES=new Set([\"off\",\"crop\",\"scale-inner\",\"scale-outer\",\"letterbox-scale\",\"letterbox-integer-scale\"]);const VALID_FULLSCREEN_SCALING_QUALITIES=new Set([\"high\",\"low\"]);const glMatrix=self.glMatrix;const mat4=glMatrix.mat4;const vec3=glMatrix.vec3;const tempProjection=mat4.create();const PERCENTTEXT_WIDTH=300;const PERCENTTEXT_HEIGHT=200;const PROGRESSBAR_WIDTH=120;const PROGRESSBAR_HEIGHT=8;const tempQuad=C3.New(C3.Quad);const tempRect=C3.New(C3.Rect);\nconst SPLASH_MIN_DISPLAY_TIME=3E3;const SPLASH_AFTER_FADEOUT_WAIT_TIME=200;const SPLASH_FADE_DURATION=300;\nC3.CanvasManager=class CanvasManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._canvas=null;this._isWebGPUEnabled=false;this._webglRenderer=null;this._webgpuRenderer=null;this._gpuPreference=\"high-performance\";this._isLimitedToWebGL1=false;this._windowInnerWidth=0;this._windowInnerHeight=0;this._canvasCssWidth=0;this._canvasCssHeight=0;this._canvasDeviceWidth=0;this._canvasDeviceHeight=0;this._canvasCssOffsetX=0;this._canvasCssOffsetY=0;this._zAxisScale=\"normalized\";\nthis._fieldOfView=0;this._zNear=1;this._zFar=1E4;this._enableMipmaps=true;this._textureAnisotropy=0;this._drawWidth=0;this._drawHeight=0;this._fullscreenMode=\"letterbox-scale\";this._documentFullscreenMode=\"letterbox-scale\";this._deviceTransformOffX=0;this._deviceTransformOffY=0;this._defaultProjectionMatrix=mat4.create();this._wantFullscreenScalingQuality=\"high\";this._fullscreenScalingQuality=this._wantFullscreenScalingQuality;this._isDocumentFullscreen=false;this._availableAdditionalRenderTargets=\n[];this._usedAdditionalRenderTargets=new Set;this._shaderData=self[\"C3_Shaders\"];this._effectChainManager=C3.New(C3.Gfx.EffectChainManager,{getDrawSize:()=>[this.GetDrawWidth(),this.GetDrawHeight()],getRenderTarget:()=>this.GetEffectCompositorRenderTarget(),releaseRenderTarget:rt=>this.ReleaseEffectCompositorRenderTarget(rt),getTime:()=>this.GetRuntime().GetGameTime(),redraw:()=>this.GetRuntime().UpdateRender()});this._gpuTimeStartFrame=0;this._gpuTimeEndFrame=0;this._gpuLastUtilisation=NaN;this._gpuFrameTimingsBuffer=\nnull;this._layersGpuProfile=new Map;this._gpuCurUtilisation=NaN;this._webgpuFrameTimings=new Map;this._snapshotFormat=\"\";this._snapshotQuality=1;this._snapshotArea=C3.New(C3.Rect);this._snapshotUrl=\"\";this._snapshotPromise=null;this._snapshotResolve=null;this._isPastingToDrawingCanvas=0;this._loaderStartTime=0;this._rafId=-1;this._loadingProgress=0;this._loadingprogress_handler=e=>this._loadingProgress=e.progress;this._percentText=null;this._splashTextures={logo:null,powered:null,website:null};this._splashFrameNumber=\n0;this._splashFadeInFinishTime=0;this._splashFadeOutStartTime=0;this._splashState=\"fade-in\";this._splashDoneResolve=null;this._splashDonePromise=new Promise(resolve=>this._splashDoneResolve=resolve)}_SetGPUPowerPreference(pref){this._gpuPreference=pref}_SetWebGPUEnabled(e){this._isWebGPUEnabled=!!e}_SetZAxisScale(s){this._zAxisScale=s}_SetFieldOfView(f){this._fieldOfView=f}_SetZDistances(zNear,zFar){this._zNear=zNear;this._zFar=zFar}_SetLimitedToWebGL1(l){this._isLimitedToWebGL1=!!l}async CreateCanvas(opts){this._canvas=\nopts[\"canvas\"];this._runtime.AddDOMComponentMessageHandler(\"runtime\",\"window-resize\",e=>this._OnWindowResize(e));this._runtime.AddDOMComponentMessageHandler(\"runtime\",\"fullscreenchange\",e=>this._OnFullscreenChange(e));this._runtime.AddDOMComponentMessageHandler(\"runtime\",\"fullscreenerror\",e=>this._OnFullscreenError(e));this._canvas.addEventListener(\"webglcontextlost\",e=>this._OnWebGLContextLost(e));this._canvas.addEventListener(\"webglcontextrestored\",e=>this._OnWebGLContextRestored(e));this._isDocumentFullscreen=\n!!opts[\"isFullscreen\"];const useWebGPU=navigator[\"gpu\"]&&this._isWebGPUEnabled;let hasMajorPerformanceCaveat=false;if(useWebGPU)try{await this._InitWebGPUContext(true)}catch(err){this._MaybeLogRendererError(\"WebGPU\",err);this._webgpuRenderer=null}if(!this.GetRenderer())try{await this._InitWebGLContext(true)}catch(err){this._MaybeLogRendererError(\"WebGL\",err);this._webglRenderer=null}if(!this.GetRenderer())hasMajorPerformanceCaveat=true;if(!this.GetRenderer()&&useWebGPU)try{await this._InitWebGPUContext(false)}catch(err){this._MaybeLogRendererError(\"WebGPU\",\nerr);this._webgpuRenderer=null}if(!this.GetRenderer())try{await this._InitWebGLContext(false)}catch(err){this._MaybeLogRendererError(\"WebGL\",err);this._webglRenderer=null}const renderer=this.GetRenderer();if(!renderer)throw new Error(\"failed to acquire a renderer - check WebGL or WebGPU is supported\");renderer.SetHasMajorPerformanceCaveat(hasMajorPerformanceCaveat);if(this._webgpuRenderer){this._webgpuRenderer.ondevicelost=()=>this._OnWebGPUDeviceLost();this._webgpuRenderer.ondevicerestored=()=>this._OnWebGPUDeviceRestored()}if(this._zAxisScale===\n\"normalized\")renderer.SetZAxisScaleNormalized();else{renderer.SetZAxisScaleRegular();renderer.SetFovY(this._fieldOfView)}this.SetSize(opts[\"windowInnerWidth\"],opts[\"windowInnerHeight\"],true);await this._InitRenderer()}_MaybeLogRendererError(rendererType,err){if(err&&typeof err.message===\"string\"&&err.message.startsWith(\"renderer-unavailable\"))return;console.error(`Error creating ${rendererType} renderer: `,err)}async _InitWebGPUContext(failIfMajorPerformanceCaveat){const ctorOpts={nearZ:this._zNear,\nfarZ:this._zFar};const rendererOpts={powerPreference:this._gpuPreference,depth:this._runtime.Uses3DFeatures(),failIfMajorPerformanceCaveat,usesBackgroundBlending:this._runtime.UsesAnyBackgroundBlending(),canSampleBackbuffer:this._runtime.UsesAnyCrossSampling(),canSampleDepth:this._runtime.UsesAnyDepthSampling()};this._webgpuRenderer=C3.New(C3.Gfx.WebGPURenderer,ctorOpts);await this._webgpuRenderer.Create(this._canvas,rendererOpts)}async _InitWebGLContext(failIfMajorPerformanceCaveat){const rendererOpts=\n{powerPreference:this._gpuPreference,enableGpuProfiling:true,depth:this._runtime.Uses3DFeatures(),canSampleDepth:this._runtime.UsesAnyDepthSampling(),failIfMajorPerformanceCaveat,nearZ:this._zNear,farZ:this._zFar};if(this._isLimitedToWebGL1)rendererOpts.maxWebGLVersion=1;if(C3.Platform.OS===\"Android\"&&C3.Platform.BrowserEngine===\"Chromium\"&&C3.Platform.BrowserVersionNumber<75){console.warn(\"[Construct] Disabling WebGL 2 because this device appears to be affected by crbug.com/934823. Install software updates to avoid this.\");\nrendererOpts.maxWebGLVersion=1}if(this._runtime.GetCompositingMode()===\"standard\")rendererOpts.alpha=true;else{rendererOpts.alpha=false;rendererOpts.lowLatency=true}this._webglRenderer=C3.New(C3.Gfx.WebGLRenderer,this._canvas,rendererOpts);await this._webglRenderer.InitState()}async _InitWebGPU(){if(this._shaderData){const promises=[];for(const [id,data]of Object.entries(this._shaderData)){data.src=data.wgsl;const vertexSrc=C3.Gfx.WebGPUShaderProgram.GetDefaultVertexShaderSource();promises.push(this._webgpuRenderer.CreateShaderProgram(Object.assign({vertexSrc,\nname:id},data)))}await Promise.all(promises)}}async _InitWebGL(){if(this._shaderData){const promises=[];for(const [id,data]of Object.entries(this._shaderData)){let vertexSrc;if(data.glslWebGL2&&this._webglRenderer.GetWebGLVersionNumber()>=2){data.src=data.glslWebGL2;vertexSrc=C3.Gfx.WebGLShaderProgram.GetDefaultVertexShaderSource_WebGL2()}else{if(!data.glsl)throw new Error(`shader '${id}' does not support WebGL 1`);data.src=data.glsl;vertexSrc=C3.Gfx.WebGLShaderProgram.GetDefaultVertexShaderSource()}promises.push(this._webglRenderer.CreateShaderProgram(Object.assign({vertexSrc,\nname:id},data)))}await Promise.all(promises);this._webglRenderer.ResetLastProgram();this._webglRenderer.SetTextureFillMode()}if(this._webglRenderer.SupportsGPUProfiling())this._gpuFrameTimingsBuffer=C3.New(C3.Gfx.WebGLQueryResultBuffer,this._webglRenderer)}async _InitRenderer(){if(this._webgpuRenderer)await this._InitWebGPU();else if(this._webglRenderer)await this._InitWebGL();const renderer=this.GetRenderer();renderer.SetMipmapsEnabled(this._enableMipmaps);if(renderer.SupportsGPUProfiling())this._gpuLastUtilisation=\n0;for(const effectList of this._runtime._GetAllEffectLists()){for(const effectType of effectList.GetAllEffectTypes())effectType._InitRenderer(renderer);effectList._InitRenderer(renderer);effectList.UpdateActiveEffects()}}Release(){this._runtime=null;this._webglRenderer=null;this._canvas=null}_OnWindowResize(e){const runtime=this._runtime;if(runtime.IsExportToVideo())return;const dpr=e[\"devicePixelRatio\"];if(runtime.IsInWorker())self.devicePixelRatio=dpr;runtime._SetDevicePixelRatio(dpr);this._isDocumentFullscreen=\n!!e[\"isFullscreen\"];this.SetSize(e[\"innerWidth\"],e[\"innerHeight\"]);runtime.UpdateRender();const ev=new C3.Event(\"window-resize\");ev.data=e;runtime.Dispatcher().dispatchEventAndWaitAsyncSequential(ev);const ev2=new C3.Event(\"resize\");ev2.cssWidth=this.GetCssWidth();ev2.cssHeight=this.GetCssHeight();ev2.deviceWidth=this.GetDeviceWidth();ev2.deviceHeight=this.GetDeviceHeight();runtime.DispatchUserScriptEvent(ev2);if(runtime.IsDebug()&&(runtime.HitBreakpoint()||self.C3Debugger.IsDebuggerPaused()))runtime.Render()}_OnFullscreenChange(e){this._isDocumentFullscreen=\n!!e[\"isFullscreen\"];this.SetSize(e[\"innerWidth\"],e[\"innerHeight\"],true);this._runtime.UpdateRender()}_OnFullscreenError(e){this._isDocumentFullscreen=!!e[\"isFullscreen\"];this.SetSize(e[\"innerWidth\"],e[\"innerHeight\"],true);this._runtime.UpdateRender()}SetSize(availableWidth,availableHeight,force=false){availableWidth=Math.floor(availableWidth);availableHeight=Math.floor(availableHeight);if(availableWidth<=0||availableHeight<=0)throw new Error(\"invalid size\");if(this._windowInnerWidth===availableWidth&&\nthis._windowInnerHeight===availableHeight&&!force)return;this._windowInnerWidth=availableWidth;this._windowInnerHeight=availableHeight;const fullscreenMode=this.GetCurrentFullscreenMode();if(fullscreenMode===\"letterbox-scale\")this._CalculateLetterboxScale(availableWidth,availableHeight);else if(fullscreenMode===\"letterbox-integer-scale\")this._CalculateLetterboxIntegerScale(availableWidth,availableHeight);else if(fullscreenMode===\"off\")this._CalculateFixedSizeCanvas(availableWidth,availableHeight);\nelse this._CalculateFullsizeCanvas(availableWidth,availableHeight);this._UpdateFullscreenScalingQuality(fullscreenMode);this._canvas.width=this._canvasDeviceWidth;this._canvas.height=this._canvasDeviceHeight;this._runtime.PostComponentMessageToDOM(\"canvas\",\"update-size\",{\"marginLeft\":this._canvasCssOffsetX,\"marginTop\":this._canvasCssOffsetY,\"styleWidth\":this._canvasCssWidth,\"styleHeight\":this._canvasCssHeight,\"displayScale\":this.GetDisplayScale()});const renderer=this.GetRenderer();renderer.SetSize(this._canvasDeviceWidth,\nthis._canvasDeviceHeight,true);for(const rt of this._availableAdditionalRenderTargets)renderer.DeleteRenderTarget(rt);C3.clearArray(this._availableAdditionalRenderTargets);renderer.CalculatePerspectiveMatrix(this._defaultProjectionMatrix,this.GetDrawWidth()/this.GetDrawHeight());const layoutManager=this._runtime.GetLayoutManager();layoutManager.SetAllLayerProjectionChanged();layoutManager.SetAllLayerMVChanged()}GetDefaultProjectionMatrix(){return this._defaultProjectionMatrix}_CalculateLetterboxScale(availableWidth,\navailableHeight){const dpr=this._runtime.GetDevicePixelRatio();const originalViewportWidth=this._runtime.GetOriginalViewportWidth();const originalViewportHeight=this._runtime.GetOriginalViewportHeight();const originalAspectRatio=originalViewportWidth/originalViewportHeight;const availableAspectRatio=availableWidth/availableHeight;if(availableAspectRatio>originalAspectRatio){const letterboxedWidth=availableHeight*originalAspectRatio;this._canvasCssWidth=Math.round(letterboxedWidth);this._canvasCssHeight=\navailableHeight;this._canvasCssOffsetX=Math.floor((availableWidth-this._canvasCssWidth)/2);this._canvasCssOffsetY=0}else{const letterboxedHeight=availableWidth/originalAspectRatio;this._canvasCssWidth=availableWidth;this._canvasCssHeight=Math.round(letterboxedHeight);this._canvasCssOffsetX=0;this._canvasCssOffsetY=Math.floor((availableHeight-this._canvasCssHeight)/2)}this._canvasDeviceWidth=Math.round(this._canvasCssWidth*dpr);this._canvasDeviceHeight=Math.round(this._canvasCssHeight*dpr);this._runtime.SetViewportSize(originalViewportWidth,\noriginalViewportHeight)}_CalculateLetterboxIntegerScale(availableWidth,availableHeight){const dpr=this._runtime.GetDevicePixelRatio();if(dpr!==1){availableWidth+=1;availableHeight+=1}const originalViewportWidth=this._runtime.GetOriginalViewportWidth();const originalViewportHeight=this._runtime.GetOriginalViewportHeight();const originalAspectRatio=originalViewportWidth/originalViewportHeight;const availableAspectRatio=availableWidth/availableHeight;let intScale;if(availableAspectRatio>originalAspectRatio){const letterboxedWidth=\navailableHeight*originalAspectRatio;intScale=letterboxedWidth*dpr/originalViewportWidth}else{const letterboxedHeight=availableWidth/originalAspectRatio;intScale=letterboxedHeight*dpr/originalViewportHeight}if(intScale>1)intScale=Math.floor(intScale);else if(intScale<1)intScale=1/Math.ceil(1/intScale);this._canvasDeviceWidth=Math.round(originalViewportWidth*intScale);this._canvasDeviceHeight=Math.round(originalViewportHeight*intScale);this._canvasCssWidth=this._canvasDeviceWidth/dpr;this._canvasCssHeight=\nthis._canvasDeviceHeight/dpr;this._canvasCssOffsetX=Math.max(Math.floor((availableWidth-this._canvasCssWidth)/2),0);this._canvasCssOffsetY=Math.max(Math.floor((availableHeight-this._canvasCssHeight)/2),0);this._runtime.SetViewportSize(originalViewportWidth,originalViewportHeight)}_CalculateFullsizeCanvas(availableWidth,availableHeight){const dpr=this._runtime.GetDevicePixelRatio();this._canvasCssWidth=availableWidth;this._canvasCssHeight=availableHeight;this._canvasDeviceWidth=Math.round(this._canvasCssWidth*\ndpr);this._canvasDeviceHeight=Math.round(this._canvasCssHeight*dpr);this._canvasCssOffsetX=0;this._canvasCssOffsetY=0;const displayScale=this.GetDisplayScale();this._runtime.SetViewportSize(this._canvasCssWidth/displayScale,this._canvasCssHeight/displayScale)}_CalculateFixedSizeCanvas(availableWidth,availableHeight){const dpr=this._runtime.GetDevicePixelRatio();this._canvasCssWidth=this._runtime.GetViewportWidth();this._canvasCssHeight=this._runtime.GetViewportHeight();this._canvasDeviceWidth=Math.round(this._canvasCssWidth*\ndpr);this._canvasDeviceHeight=Math.round(this._canvasCssHeight*dpr);if(this.IsDocumentFullscreen()){this._canvasCssOffsetX=Math.floor((availableWidth-this._canvasCssWidth)/2);this._canvasCssOffsetY=Math.floor((availableHeight-this._canvasCssHeight)/2)}else{this._canvasCssOffsetX=0;this._canvasCssOffsetY=0}this._runtime.SetViewportSize(this._runtime.GetViewportWidth(),this._runtime.GetViewportHeight())}_UpdateFullscreenScalingQuality(fullscreenMode){if(this._wantFullscreenScalingQuality===\"high\"){this._drawWidth=\nthis._canvasDeviceWidth;this._drawHeight=this._canvasDeviceHeight;this._fullscreenScalingQuality=\"high\"}else{let viewportWidth,viewportHeight;if(this.GetCurrentFullscreenMode()===\"off\"){viewportWidth=this._runtime.GetViewportWidth();viewportHeight=this._runtime.GetViewportHeight()}else{viewportWidth=this._runtime.GetOriginalViewportWidth();viewportHeight=this._runtime.GetOriginalViewportHeight()}if(this._canvasDeviceWidth<viewportWidth||this._canvasDeviceHeight<viewportHeight){this._drawWidth=this._canvasDeviceWidth;\nthis._drawHeight=this._canvasDeviceHeight;this._fullscreenScalingQuality=\"high\"}else{this._drawWidth=viewportWidth;this._drawHeight=viewportHeight;this._fullscreenScalingQuality=\"low\";if(fullscreenMode===\"scale-inner\"){const originalAspectRatio=viewportWidth/viewportHeight;const currentAspectRatio=this._windowInnerWidth/this._windowInnerHeight;if(currentAspectRatio<originalAspectRatio)this._drawWidth=this._drawHeight*currentAspectRatio;else if(currentAspectRatio>originalAspectRatio)this._drawHeight=\nthis._drawWidth/currentAspectRatio}else if(fullscreenMode===\"scale-outer\"){const originalAspectRatio=viewportWidth/viewportHeight;const currentAspectRatio=this._windowInnerWidth/this._windowInnerHeight;if(currentAspectRatio>originalAspectRatio)this._drawWidth=this._drawHeight*currentAspectRatio;else if(currentAspectRatio<originalAspectRatio)this._drawHeight=this._drawWidth/currentAspectRatio}}}}GetRuntime(){return this._runtime}GetCanvas(){return this._canvas}GetEffectChainManager(){return this._effectChainManager}IsDocumentFullscreen(){return this._isDocumentFullscreen}SetFullscreenMode(m){if(!VALID_FULLSCREEN_MODES.has(m))throw new Error(\"invalid fullscreen mode\");\nthis._fullscreenMode=m;const layoutManager=this._runtime.GetLayoutManager();layoutManager.SetAllLayerProjectionChanged();layoutManager.SetAllLayerMVChanged()}GetFullscreenMode(){return this._fullscreenMode}SetDocumentFullscreenMode(m){if(!VALID_FULLSCREEN_MODES.has(m))throw new Error(\"invalid fullscreen mode\");this._documentFullscreenMode=m;const layoutManager=this._runtime.GetLayoutManager();layoutManager.SetAllLayerProjectionChanged();layoutManager.SetAllLayerMVChanged()}GetDocumentFullscreenMode(){return this._documentFullscreenMode}GetCurrentFullscreenMode(){if(this.IsDocumentFullscreen())return this.GetDocumentFullscreenMode();\nelse return this.GetFullscreenMode()}SetFullscreenScalingQuality(q){if(!VALID_FULLSCREEN_SCALING_QUALITIES.has(q))throw new Error(\"invalid fullscreen scaling quality\");this._wantFullscreenScalingQuality=q;this._runtime.GetLayoutManager().SetAllLayerProjectionChanged()}GetSetFullscreenScalingQuality(){return this._wantFullscreenScalingQuality}GetCurrentFullscreenScalingQuality(){return this._fullscreenScalingQuality}static _FullscreenModeNumberToString(n){switch(n){case 0:return\"off\";case 1:return\"crop\";\ncase 2:return\"scale-inner\";case 3:return\"scale-outer\";case 4:return\"letterbox-scale\";case 5:return\"letterbox-integer-scale\";default:throw new Error(\"invalid fullscreen mode\");}}GetLastWidth(){return this._windowInnerWidth}GetLastHeight(){return this._windowInnerHeight}GetDrawWidth(){return this._drawWidth}GetDrawHeight(){return this._drawHeight}SetMipmapsEnabled(e){this._enableMipmaps=!!e}_SetTextureAnisotropy(a){this._textureAnisotropy=a}GetTextureAnisotropy(){return this._textureAnisotropy}IsRendererContextLost(){return this.GetRenderer().IsContextLost()}_OnWebGLContextLost(e){console.log(\"[Construct] WebGL context lost\");\ne.preventDefault();this._availableAdditionalRenderTargets=[];this._usedAdditionalRenderTargets.clear();this._effectChainManager.OnContextLost();this._webglRenderer.OnContextLost();this._runtime._OnRendererContextLost()}_OnWebGPUDeviceLost(){console.log(\"[Construct] WebGPU device lost\");this._availableAdditionalRenderTargets=[];this._usedAdditionalRenderTargets.clear();this._effectChainManager.OnContextLost();this._runtime._OnRendererContextLost()}async _OnWebGLContextRestored(e){await this._webglRenderer.OnContextRestored();\nawait this._InitRenderer();await this._runtime._OnRendererContextRestored();console.log(\"[Construct] WebGL context restored\")}async _OnWebGPUDeviceRestored(){await this._InitRenderer();await this._runtime._OnRendererContextRestored();console.log(\"[Construct] WebGPU device restored\")}GetWebGLRenderer(){return this._webglRenderer}GetWebGPURenderer(){return this._webgpuRenderer}GetRenderer(){return this._webgpuRenderer||this._webglRenderer}GetRenderScale(){if(this._fullscreenScalingQuality===\"low\")return 1/\nthis._runtime.GetDevicePixelRatio();return this.GetDisplayScale()}GetDisplayScale(){const fullscreenMode=this.GetCurrentFullscreenMode();if(fullscreenMode===\"off\"||fullscreenMode===\"crop\")return 1;const originalViewportWidth=this._runtime.GetOriginalViewportWidth();const originalViewportHeight=this._runtime.GetOriginalViewportHeight();const originalAspectRatio=originalViewportWidth/originalViewportHeight;const currentAspectRatio=this._canvasDeviceWidth/this._canvasDeviceHeight;if(fullscreenMode!==\n\"scale-inner\"&&currentAspectRatio>originalAspectRatio||fullscreenMode===\"scale-inner\"&&currentAspectRatio<originalAspectRatio)return this._canvasCssHeight/originalViewportHeight;else return this._canvasCssWidth/originalViewportWidth}GetEffectLayerScaleParam(){if(this.GetCurrentFullscreenScalingQuality()===\"low\")return 1;else return this.GetDisplayScale()}GetEffectDevicePixelRatioParam(){if(this.GetCurrentFullscreenScalingQuality()===\"low\")return 1;else return this._runtime.GetDevicePixelRatio()}SetDeviceTransformOffset(x,\ny){this._deviceTransformOffX=x;this._deviceTransformOffY=y}SetDeviceTransform(renderer,w,h,updateProjection=true){w=w||this._drawWidth;h=h||this._drawHeight;const scrollX=w/2+this._deviceTransformOffX;const scrollY=h/2+this._deviceTransformOffY;if(updateProjection){let projectionMatrix=this.GetDefaultProjectionMatrix();if(w!==this._drawWidth||h!==this._drawHeight){renderer.CalculatePerspectiveMatrix(tempProjection,w/h);projectionMatrix=tempProjection}renderer.SetProjectionMatrix(projectionMatrix)}const tempMat4=\nrenderer.CalculateLookAtModelView2(scrollX,scrollY,renderer.GetDefaultCameraZ(h),scrollX,scrollY,0,h);renderer.SetModelViewMatrix(tempMat4)}SetCssTransform(renderer,updateProjection=true){const width=this.GetCssWidth();const height=this.GetCssHeight();const scrollX=width/2;const scrollY=height/2;if(updateProjection)renderer.SetProjectionMatrix(this.GetDefaultProjectionMatrix());const tempMat4=renderer.CalculateLookAtModelView2(scrollX,scrollY,renderer.GetDefaultCameraZ(height),scrollX,scrollY,0,height);\nrenderer.SetModelViewMatrix(tempMat4)}GetDeviceWidth(){return this._canvasDeviceWidth}GetDeviceHeight(){return this._canvasDeviceHeight}GetCssWidth(){return this._canvasCssWidth}GetCssHeight(){return this._canvasCssHeight}GetCanvasClientX(){return this._canvasCssOffsetX}GetCanvasClientY(){return this._canvasCssOffsetY}GetAdditionalRenderTarget(opts){opts.depth=this._runtime.Uses3DFeatures();const arr=this._availableAdditionalRenderTargets;const useIndex=arr.findIndex(rt=>rt.IsCompatibleWithOptions(opts));\nlet ret;if(useIndex!==-1){ret=arr[useIndex];arr.splice(useIndex,1)}else ret=this.GetRenderer().CreateRenderTarget(opts);this._usedAdditionalRenderTargets.add(ret);return ret}ReleaseAdditionalRenderTarget(renderTarget){if(!this._usedAdditionalRenderTargets.has(renderTarget))throw new Error(\"render target not in use\");this._usedAdditionalRenderTargets.delete(renderTarget);this._availableAdditionalRenderTargets.push(renderTarget)}GetEffectCompositorRenderTarget(){const opts={sampling:this._runtime.GetSampling()};\nif(this.GetCurrentFullscreenScalingQuality()===\"low\"){opts.width=this.GetDrawWidth();opts.height=this.GetDrawHeight()}return this.GetAdditionalRenderTarget(opts)}ReleaseEffectCompositorRenderTarget(renderTarget){this.ReleaseAdditionalRenderTarget(renderTarget)}*activeLayersGpuProfiles(){for(const layout of this._runtime.GetLayoutManager().runningLayouts())for(const layer of layout.GetLayers()){const p=this._layersGpuProfile.get(layer);if(p)yield p}}GetLayerTimingsBuffer(layer){if(!this.GetRenderer().SupportsGPUProfiling())return null;\nlet p=this._layersGpuProfile.get(layer);if(!p){p={name:layer.GetName(),timingsBuffer:C3.New(C3.Gfx.WebGLQueryResultBuffer,this._webglRenderer),curUtilisation:0,lastUtilisation:0};this._layersGpuProfile.set(layer,p)}return p.timingsBuffer}_Update1sFrameRange(){const renderer=this.GetRenderer();if(!renderer.SupportsGPUProfiling())return;if(this._gpuTimeEndFrame===0){this._gpuTimeEndFrame=renderer.GetFrameNumber();this._gpuCurUtilisation=NaN;for(const p of this.activeLayersGpuProfiles())p.curUtilisation=\nNaN}}_UpdateTick(){if(this._webglRenderer&&this._webglRenderer.SupportsGPUProfiling())this._UpdateTick_WebGL();if(this._webgpuRenderer&&this._webgpuRenderer.SupportsGPUProfiling())this._UpdateTick_WebGPU()}_UpdateTick_WebGL(){if(!isNaN(this._gpuCurUtilisation))return;this._gpuCurUtilisation=this._gpuFrameTimingsBuffer.GetFrameRangeResultSum(this._gpuTimeStartFrame,this._gpuTimeEndFrame);if(isNaN(this._gpuCurUtilisation))return;if(this._runtime.IsDebug())for(const p of this.activeLayersGpuProfiles()){p.curUtilisation=\np.timingsBuffer.GetFrameRangeResultSum(this._gpuTimeStartFrame,this._gpuTimeEndFrame);if(isNaN(p.curUtilisation))return}this._gpuFrameTimingsBuffer.DeleteAllBeforeFrameNumber(this._gpuTimeEndFrame);this._gpuLastUtilisation=Math.min(this._gpuCurUtilisation,1);if(this._runtime.IsDebug()){for(const p of this.activeLayersGpuProfiles()){p.timingsBuffer.DeleteAllBeforeFrameNumber(this._gpuTimeEndFrame);p.lastUtilisation=Math.min(p.curUtilisation,1)}self.C3Debugger.UpdateGPUProfile(this._gpuLastUtilisation,\n[...this.activeLayersGpuProfiles()])}this._gpuTimeStartFrame=this._gpuTimeEndFrame;this._gpuTimeEndFrame=0}GetGPUFrameTimingsBuffer(){return this._gpuFrameTimingsBuffer}_UpdateTick_WebGPU(){if(this._gpuTimeEndFrame===0)return;for(let frameNumber=this._gpuTimeStartFrame;frameNumber<this._gpuTimeEndFrame;++frameNumber){const frameTiming=this._webgpuFrameTimings.get(frameNumber);if(frameTiming&&!frameTiming.HasResult())return}const layout=this._runtime.GetMainRunningLayout();const profileResults=C3.MakeFilledArray(layout.GetLayerCount()+\n1,0);for(let frameNumber=this._gpuTimeStartFrame;frameNumber<this._gpuTimeEndFrame;++frameNumber){const frameTiming=this._webgpuFrameTimings.get(frameNumber);if(!frameTiming)continue;const results=frameTiming.GetResult();for(let i=0,len=Math.min(profileResults.length,results.length/2);i<len;++i){const start64=results[i*2];const end64=results[i*2+1];if(Number(start64)===0||Number(end64)===0){profileResults[i]=NaN;continue}const diff64=end64-start64;const duration=Number(diff64)/1E9;profileResults[i]+=\nduration}}this._gpuLastUtilisation=C3.clamp(profileResults[0],0,1);if(this._runtime.IsDebug()){const layerProfiles=[];const layers=layout.GetLayers();for(let i=0,len=Math.min(layers.length,profileResults.length-1);i<len;++i)layerProfiles.push({name:layers[i].GetName(),lastUtilisation:C3.clamp(profileResults[i+1],0,1)});self.C3Debugger.UpdateGPUProfile(this._gpuLastUtilisation,layerProfiles)}for(let frameNumber=this._gpuTimeStartFrame;frameNumber<this._gpuTimeEndFrame;++frameNumber)this._webgpuFrameTimings.delete(frameNumber);\nthis._gpuTimeStartFrame=this._gpuTimeEndFrame;this._gpuTimeEndFrame=0}_AddWebGPUFrameTiming(frameTiming){this._webgpuFrameTimings.set(this._webgpuRenderer.GetFrameNumber(),frameTiming)}GetGPUUtilisation(){return this._gpuLastUtilisation}SnapshotCanvas(format,quality,x,y,width,height){this._snapshotFormat=format;this._snapshotQuality=quality;this._snapshotArea.setWH(x,y,width,height);if(this._snapshotPromise)return this._snapshotPromise;this._snapshotPromise=new Promise(resolve=>{this._snapshotResolve=\nresolve});return this._snapshotPromise}_MaybeTakeSnapshot(){if(!this._snapshotFormat)return;let canvas=this._canvas;const snapArea=this._snapshotArea;const x=C3.clamp(Math.floor(snapArea.getLeft()),0,canvas.width);const y=C3.clamp(Math.floor(snapArea.getTop()),0,canvas.height);let w=snapArea.width();if(w===0)w=canvas.width-x;else w=C3.clamp(Math.floor(w),0,canvas.width-x);let h=snapArea.height();if(h===0)h=canvas.height-y;else h=C3.clamp(Math.floor(h),0,canvas.height-y);if((x!==0||y!==0||w!==canvas.width||\nh!==canvas.height)&&(w>0&&h>0)){canvas=C3.CreateCanvas(w,h);const ctx=canvas.getContext(\"2d\");ctx.drawImage(this._canvas,x,y,w,h,0,0,w,h)}C3.CanvasToBlob(canvas,this._snapshotFormat,this._snapshotQuality).then(blob=>{if(this._snapshotUrl)URL.revokeObjectURL(this._snapshotUrl);this._snapshotUrl=URL.createObjectURL(blob);this._snapshotPromise=null;this._snapshotResolve(this._snapshotUrl)});this._snapshotFormat=\"\";this._snapshotQuality=1}GetCanvasSnapshotUrl(){return this._snapshotUrl}SetIsPastingToDrawingCanvas(p){if(p)this._isPastingToDrawingCanvas++;\nelse this._isPastingToDrawingCanvas--}IsPastingToDrawingCanvas(){return this._isPastingToDrawingCanvas>0}InitLoadingScreen(loaderStyle){const renderer=this.GetRenderer();if(loaderStyle===2){this._percentText=C3.New(C3.Gfx.RendererText,this.GetRenderer());this._percentText.SetFontName(\"Arial\");this._percentText.SetFontSize(16);this._percentText.SetHorizontalAlignment(\"center\");this._percentText.SetVerticalAlignment(\"center\");this._percentText.SetSize(PERCENTTEXT_WIDTH,PERCENTTEXT_HEIGHT)}else if(loaderStyle===\n0){const loadingLogoAsset=this._runtime.GetLoadingLogoAsset();if(loadingLogoAsset)loadingLogoAsset.LoadStaticTexture(renderer).catch(err=>console.warn(`[C3 runtime] Failed to create texture for loading logo: `,err))}else if(loaderStyle===4){this._LoadSvgSplashImage(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=\").then(tex=>{if(this._splashState===\"done\")renderer.DeleteTexture(tex);else this._splashTextures.logo=tex}).catch(err=>console.warn(\"Failed to load splash image: \",err));this._LoadBitmapSplashImage(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAESIzRFVmd4iZqrvM3e5GKvWZAAAFX0lEQVR42u2asW7bVhSGP0qWpUi2oM3tUFhbgAJJtBUdWvsNrLlD1AcoILZBlgaNXKBAR/sN5Ewd6fYF5HbJKAdB0FFKu5d1ZEeSJfPvcC8pyrWTDi5MgPwXCRQp6H4895z/HAoyZcqUKVOmTJkyJU8D7dt3d6QMQIK1LqPzRykHIL1KOwA9SzuAeS2dAC4A+MSXDtIMgJL0NtUA2IvepRTAutRINYCi5KYaQE7mN294Ch5ff4HzRPoprBfOU70B2Ojp/Gt7bKOnqXsJQKGj4FHSAWAAfBi5onWdA9Ay5SEvbYPTlaQpQFfHLek0umY/DCQpaC4ByPcl6RdomyvB13ESARzAim9MwQEUFdjs+NqsLAA+Mx//BnT1StIp5AfGR9QBepKk8RKAHUnSRYOq/cqVG91uN7oFdqwrmkHeZkVfZwBlnUPe8rmoQVd/GQCf22teAOXIV8UARJ+XpKatuY3EAShILjlf+obVnrQLvlwT+lOATb2F+9Jzch1pH7rS3AVyvuYud81pHek5zneXAIzrfCFNydvD65onLwdUpCYV6WdgVTqFrg7N3QpMKjgBT1MgN9Ab6Eq7JjS0D9yT6jh+mB/iAGY1oC1t09cQYEvj5AFoKYAde2vaurBLZk0mbvd0xIr1y/c1ha5NkjvmNedrn6I9obwE4FebHffpmO3UMcUjUQBWpTH07C8rS9ts6gzY0kC7QF8uZQW1KCF27bmeSZJ0NGRNQR3A8eMAtq01eM0DEyB9HSUNwN2+9AInvHE5aZeKJkBHDzUER2qwqQm2JDbo6m8Ax+4EtjRiK6xzVxihjs6oKDDf7iYHQKSgQcFmaXOPipoD/aCsERQUQEujsI67IYBCmNGrGtMyIX4lgC2NWZWaUJRqCQTwEkrRL9vTCXmphqNpQRMoaQIds2YYaDcEUAwXuK4JHZ1cC6CqqQ2ximYJHIiMgXKUEtsaQV9Nijpz/Dms6Qy6ipV5C2BR5zWla7L8lQDWNANPQ1tREwZg9tiUwrA+7+gU9rRLRUM8NdjU69DmLQOoLAM4vhZARTPMHmmHcZIsK0w8Nnd0Ci0N2dQBLbmmI4gBOLwCwAzvfQCqmoJ3o8On/xFAVSPaarKpI/bk/gcA742AkgIcP0y1iQNwKQeUNcZTjbLe0FcdvHj9tgDKcVv7rhywbhuMZsG6iQQCWK4CrOrc8c9hVWNHc2AvXF8MQMl2eLbWv7sKwED7d0KzkDwAqzEfcAyOgoLegqNZwZqi0b8AFOOd3ft8AHQ0rIYnJQ9AbskJQl+f6gTw9IFGl5sYCyAft3WhVbzOCcIDne3E4yhZAKJewBr4jp7qEOjoKw2BdWv14wAY6I/o2Jrd3lf3AkOgoume9c5JBNC2Ga1lDm/JzAQ21dOBCXeTBe+5CwAde03ud67pBl9E3SAUFQwskSQCWDPzgILMNq1KqttS1wScgRl8FfzzBYCPzISMhzrA8c0e8JYAzOtmHlA3vdONPoC4YQB2IuTZG1mSubtF2fKwJU22KfZ0EXWD5CX9AE+kl9C+eiLUMBMhy2aSXADxmaCJhLFteWdhmTD6cxEBtBftZKwzWAC4iM0MoaV4KUkcgNhU2Cx8ZJPjOKxz4YR3AaCwaCfBM51VLwZgZqfCdWsHkjMNuQIAHy/9WyK0fpEByJkFfh+rAuE1k1oUI0GzGwMwNc8FnkVbwk0ygOUnQx1bsR5EDzKcb6WJyxIANjzpx/B9X1OXJQBLT4ZWTDJMr/LJGYnfjkrJGYnfjqoJmobcito6TDeAvr5M9fqLSZqG3IIKXrpzoKTE/DXitgAEjZQDeJnqFNjVczJlypQpU6Yb0D8QEXpo1mjM/QAAAABJRU5ErkJggg==\").then(tex=>\n{if(this._splashState===\"done\")renderer.DeleteTexture(tex);else this._splashTextures.powered=tex}).catch(err=>console.warn(\"Failed to load splash image: \",err));this._LoadBitmapSplashImage(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=\").then(tex=>{if(this._splashState===\"done\")renderer.DeleteTexture(tex);else this._splashTextures.website=tex}).catch(err=>console.warn(\"Failed to load splash image: \",err))}}async _LoadSvgSplashImage(url){url=(new URL(url,this._runtime.GetRuntimeBaseURL())).toString();const blob=\nawait C3.FetchBlob(url);const drawable=await this._runtime.RasterSvgImage(blob,2048,2048);return await this.GetRenderer().CreateStaticTextureAsync(drawable,{mipMapQuality:\"high\"})}async _LoadBitmapSplashImage(url){url=(new URL(url,this._runtime.GetRuntimeBaseURL())).toString();const blob=await C3.FetchBlob(url);return await this.GetRenderer().CreateStaticTextureAsync(blob,{mipMapQuality:\"high\"})}HideCordovaSplashScreen(){this._runtime.PostComponentMessageToDOM(\"runtime\",\"hide-cordova-splash\")}StartLoadingScreen(){this._loaderStartTime=\nDate.now();this._runtime.Dispatcher().addEventListener(\"loadingprogress\",this._loadingprogress_handler);this._rafId=requestAnimationFrame(()=>this._DrawLoadingScreen());const loaderStyle=this._runtime.GetLoaderStyle();if(loaderStyle!==3)this.HideCordovaSplashScreen()}async EndLoadingScreen(){const renderer=this.GetRenderer();this._loadingProgress=1;const loaderStyle=this._runtime.GetLoaderStyle();if(loaderStyle===4)await this._splashDonePromise;this._splashDoneResolve=null;this._splashDonePromise=\nnull;if(this._rafId!==-1){cancelAnimationFrame(this._rafId);this._rafId=-1}this._runtime.Dispatcher().removeEventListener(\"loadingprogress\",this._loadingprogress_handler);this._loadingprogress_handler=null;if(this._percentText){this._percentText.Release();this._percentText=null}this._runtime.ReleaseLoadingLogoAsset();renderer.Start();if(this._splashTextures.logo){renderer.DeleteTexture(this._splashTextures.logo);this._splashTextures.logo=null}if(this._splashTextures.powered){renderer.DeleteTexture(this._splashTextures.powered);\nthis._splashTextures.powered=null}if(this._splashTextures.website){renderer.DeleteTexture(this._splashTextures.website);this._splashTextures.website=null}renderer.ClearRgba(0,0,0,0);renderer.Finish();this._splashState=\"done\";this._gpuTimeStartFrame=renderer.GetFrameNumber();if(loaderStyle===3)this.HideCordovaSplashScreen()}_DrawLoadingScreen(){if(this._rafId===-1)return;const renderer=this.GetRenderer();renderer.Start();this._rafId=-1;const hasHadError=this._runtime.GetAssetManager().HasHadErrorLoading();\nconst loaderStyle=this._runtime.GetLoaderStyle();if(loaderStyle!==3){this.SetCssTransform(renderer);renderer.ClearRgba(0,0,0,0);renderer.ResetColor();renderer.SetTextureFillMode();renderer.SetTexture(null)}if(loaderStyle===0)this._DrawProgressBarAndLogoLoadingScreen(hasHadError);else if(loaderStyle===1)this._DrawProgressBarLoadingScreen(hasHadError,PROGRESSBAR_WIDTH,0);else if(loaderStyle===2)this._DrawPercentTextLoadingScreen(hasHadError);else if(loaderStyle===3)C3.noop();else if(loaderStyle===4)this._DrawSplashLoadingScreen(hasHadError);\nelse throw new Error(\"invalid loader style\");renderer.Finish();this._rafId=requestAnimationFrame(()=>this._DrawLoadingScreen())}_DrawPercentTextLoadingScreen(hasHadError){if(hasHadError)this._percentText.SetColorRgb(1,0,0);else this._percentText.SetColorRgb(.6,.6,.6);this._percentText.SetText(Math.round(this._loadingProgress*100)+\"%\");const midX=this._canvasCssWidth/2;const midY=this._canvasCssHeight/2;const hw=PERCENTTEXT_WIDTH/2;const hh=PERCENTTEXT_HEIGHT/2;tempQuad.setRect(midX-hw,midY-hh,midX+\nhw,midY+hh);const renderer=this.GetRenderer();renderer.SetTexture(this._percentText.GetTexture());renderer.Quad3(tempQuad,this._percentText.GetTexRect())}_DrawProgressBarLoadingScreen(hasHadError,width,yOff){const renderer=this.GetRenderer();const height=PROGRESSBAR_HEIGHT;renderer.SetColorFillMode();if(hasHadError)renderer.SetColorRgba(1,0,0,1);else renderer.SetColorRgba(.118,.565,1,1);const midX=this._canvasCssWidth/2;const midY=this._canvasCssHeight/2;const hw=width/2;const hh=height/2;tempRect.setWH(midX-\nhw,midY-hh+yOff,Math.floor(width*this._loadingProgress),height);renderer.Rect(tempRect);tempRect.setWH(midX-hw,midY-hh+yOff,width,height);tempRect.offset(-.5,-.5);tempRect.inflate(.5,.5);renderer.SetColorRgba(0,0,0,1);renderer.LineRect2(tempRect);tempRect.inflate(1,1);renderer.SetColorRgba(1,1,1,1);renderer.LineRect2(tempRect)}_DrawProgressBarAndLogoLoadingScreen(hasHadError){const renderer=this.GetRenderer();const loadingLogoAsset=this._runtime.GetLoadingLogoAsset();if(!loadingLogoAsset){this._DrawProgressBarLoadingScreen(hasHadError,\nPROGRESSBAR_WIDTH,0);return}const logoTexture=loadingLogoAsset.GetTexture();if(!logoTexture){this._DrawProgressBarLoadingScreen(hasHadError,PROGRESSBAR_WIDTH,0);return}const logoW=logoTexture.GetWidth();const logoH=logoTexture.GetHeight();const midX=this._canvasCssWidth/2;const midY=this._canvasCssHeight/2;const hw=logoW/2;const hh=logoH/2;tempQuad.setRect(midX-hw,midY-hh,midX+hw,midY+hh);renderer.SetTexture(logoTexture);renderer.Quad(tempQuad);this._DrawProgressBarLoadingScreen(hasHadError,logoW,\nhh+16)}_DrawSplashLoadingScreen(hasHadError){const renderer=this.GetRenderer();const logoTex=this._splashTextures.logo;const poweredTex=this._splashTextures.powered;const websiteTex=this._splashTextures.website;const nowTime=Date.now();if(this._splashFrameNumber===0)this._loaderStartTime=nowTime;const allowQuickSplash=this._runtime.IsPreview()||this._runtime.IsFBInstantAvailable()&&!this._runtime.IsCordova();const splashAfterFadeOutWait=allowQuickSplash?0:SPLASH_AFTER_FADEOUT_WAIT_TIME;const splashMinDisplayTime=\nallowQuickSplash?0:SPLASH_MIN_DISPLAY_TIME;let a=1;if(this._splashState===\"fade-in\")a=Math.min((nowTime-this._loaderStartTime)/SPLASH_FADE_DURATION,1);else if(this._splashState===\"fade-out\")a=Math.max(1-(nowTime-this._splashFadeOutStartTime)/SPLASH_FADE_DURATION,0);renderer.SetColorFillMode();renderer.SetColorRgba(.231*a,.251*a,.271*a,a);tempRect.set(0,0,this._canvasCssWidth,this._canvasCssHeight);renderer.Rect(tempRect);const w=Math.ceil(this._canvasCssWidth);const h=Math.ceil(this._canvasCssHeight);\nlet drawW,drawH;if(this._canvasCssHeight>256){renderer.SetColorRgba(.302*a,.334*a,.365*a,a);drawW=w;drawH=Math.max(h*.005,2);tempRect.setWH(0,h*.8-drawH/2,drawW,drawH);renderer.Rect(tempRect);if(hasHadError)renderer.SetColorRgba(a,0,0,a);else renderer.SetColorRgba(.161*a,.953*a,.816*a,a);drawW=w*this._loadingProgress;tempRect.setWH(w*.5-drawW/2,h*.8-drawH/2,drawW,drawH);renderer.Rect(tempRect);renderer.SetColorRgba(a,a,a,a);renderer.SetTextureFillMode();if(poweredTex){drawW=C3.clamp(h*.22,105,w*.6)*\n1.5;drawH=drawW/8;tempRect.setWH(w*.5-drawW/2,h*.2-drawH/2,drawW,drawH);renderer.SetTexture(poweredTex);renderer.Rect(tempRect)}if(logoTex){drawW=Math.min(h*.395,w*.95);drawH=drawW;tempRect.setWH(w*.5-drawW/2,h*.485-drawH/2,drawW,drawH);renderer.SetTexture(logoTex);renderer.Rect(tempRect)}if(websiteTex){drawW=C3.clamp(h*.22,105,w*.6)*1.5;drawH=drawW/8;tempRect.setWH(w*.5-drawW/2,h*.868-drawH/2,drawW,drawH);renderer.SetTexture(websiteTex);renderer.Rect(tempRect)}}else{renderer.SetColorRgba(.302*a,\n.334*a,.365*a,a);drawW=w;drawH=Math.max(h*.005,2);tempRect.setWH(0,h*.85-drawH/2,drawW,drawH);renderer.Rect(tempRect);if(hasHadError)renderer.SetColorRgba(a,0,0,a);else renderer.SetColorRgba(.161*a,.953*a,.816*a,a);drawW=w*this._loadingProgress;tempRect.setWH(w*.5-drawW/2,h*.85-drawH/2,drawW,drawH);renderer.Rect(tempRect);renderer.SetColorRgba(a,a,a,a);renderer.SetTextureFillMode();if(logoTex){drawW=h*.55;drawH=drawW;tempRect.setWH(w*.5-drawW/2,h*.45-drawH/2,drawW,drawH);renderer.SetTexture(logoTex);\nrenderer.Rect(tempRect)}}this._splashFrameNumber++;if(this._splashState===\"fade-in\"&&nowTime-this._loaderStartTime>=SPLASH_FADE_DURATION&&this._splashFrameNumber>=2){this._splashState=\"wait\";this._splashFadeInFinishTime=nowTime}if(this._splashState===\"wait\"&&nowTime-this._splashFadeInFinishTime>=splashMinDisplayTime&&this._loadingProgress>=1){this._splashState=\"fade-out\";this._splashFadeOutStartTime=nowTime}if(this._splashState===\"fade-out\"&&nowTime-this._splashFadeOutStartTime>=SPLASH_FADE_DURATION+\nsplashAfterFadeOutWait||allowQuickSplash&&this._loadingProgress>=1&&nowTime-this._loaderStartTime<500)this._splashDoneResolve()}};\n\n}\n\n// runtime.js\n{\n'use strict';const C3=self.C3;const C3Debugger=self.C3Debugger;const assert=self.assert;const DEFAULT_RUNTIME_OPTS={\"messagePort\":null,\"runtimeBaseUrl\":\"\",\"headless\":false,\"hasDom\":true,\"isInWorker\":false,\"useAudio\":true,\"projectData\":\"\",\"exportType\":\"\"};let ife=true;\nC3.Runtime=class C3Runtime extends C3.DefendedBase{constructor(opts){opts=Object.assign({},DEFAULT_RUNTIME_OPTS,opts);super();this._messagePort=opts[\"messagePort\"];this._runtimeBaseUrl=opts[\"runtimeBaseUrl\"];this._previewUrl=opts[\"previewUrl\"];this._isHeadless=!!opts[\"headless\"];this._hasDom=!!opts[\"hasDom\"];this._isInWorker=!!opts[\"isInWorker\"];ife=opts[\"ife\"];this._useAudio=!!opts[\"useAudio\"];this._exportType=opts[\"exportType\"];this._isiOSCordova=!!opts[\"isiOSCordova\"];this._isiOSWebView=!!opts[\"isiOSWebView\"];\nthis._isWebView2Wrapper=!!opts[\"isWebView2Wrapper\"];this._isFBInstantAvailable=!!opts[\"isFBInstantAvailable\"];this._opusWasmScriptUrl=opts[\"opusWasmScriptUrl\"];this._opusWasmBinaryUrl=opts[\"opusWasmBinaryUrl\"];this._isDebug=!!(this._exportType===\"preview\"&&opts[\"isDebug\"]);this._breakpointsEnabled=this._isDebug;this._isDebugging=this._isDebug;this._debuggingDisabled=0;this._additionalLoadPromises=[];this._additionalCreatePromises=[];this._isUsingCreatePromises=false;this._projectName=\"\";this._projectVersion=\n\"\";this._projectUniqueId=\"\";this._appId=\"\";this._originalViewportWidth=0;this._originalViewportHeight=0;this._devicePixelRatio=self.devicePixelRatio;this._parallaxXorigin=0;this._parallaxYorigin=0;this._viewportWidth=0;this._viewportHeight=0;this._loaderStyle=0;this._usesLoaderLayout=false;this._isLoading=true;this._usesAnyBackgroundBlending=false;this._usesAnyCrossSampling=false;this._usesAnyDepthSampling=false;this._loadingLogoAsset=null;this._assetManager=C3.New(C3.AssetManager,this,opts);this._layoutManager=\nC3.New(C3.LayoutManager,this);this._eventSheetManager=C3.New(C3.EventSheetManager,this);this._pluginManager=C3.New(C3.PluginManager,this,opts[\"wrapperComponentIds\"]);this._collisionEngine=C3.New(C3.CollisionEngine,this);this._timelineManager=C3.New(C3.TimelineManager,this);this._transitionManager=C3.New(C3.TransitionManager,this);this._templateManager=C3.New(C3.TemplateManager,this);this._textIconManager=C3.New(C3.TextIconManager,{getIconSetMeta:iconSource=>this._GetTextIconSetMeta(iconSource),getIconSetContent:iconSource=>\nthis._GetTextIconSetContent(iconSource)});this._iconChangeHandlers=new Map;this._allObjectClasses=[];this._objectClassesByName=new Map;this._objectClassesBySid=new Map;this._familyCount=0;this._allContainers=[];this._allEffectLists=[];this._currentLayoutStack=[];this._instancesPendingCreate=[];this._instancesPendingDestroy=new Map;this._hasPendingInstances=false;this._isFlushingPendingInstances=false;this._objectCount=0;this._nextUid=0;this._instancesByUid=new Map;this._instancesToReleaseAtEndOfTick=\nnew Set;this._instancesToReleaseAffectedObjectClasses=new Set;this._objectReferenceTable=[];this._jsPropNameTable=[];this._canvasManager=null;this._uses3dFeatures=false;this._framerateMode=\"vsync\";this._compositingMode=\"standard\";this._sampling=\"trilinear\";this._isPixelRoundingEnabled=false;this._needRender=true;this._pauseOnBlur=false;this._isPausedOnBlur=false;this._exportToVideo=null;this._tickCallbacks={normal:timestamp=>{this._rafId=-1;this._ruafId=-1;this.Tick(timestamp)},tickOnly:timestamp=>\n{this._ruafId=-1;this.Tick(timestamp,false,\"skip-render\")},renderOnly:()=>{this._rafId=-1;this.Render()}};this._rafId=-1;this._ruafId=-1;this._tickCount=0;this._tickCountNoSave=0;this._hasStarted=false;this._isInTick=false;this._hasStartedTicking=false;this._isLayoutFirstTick=true;this._suspendCount=0;this._scheduleTriggersThrottle=new C3.PromiseThrottle(1);this._randomNumberCallback=()=>Math.random();this._startTime=0;this._lastTickTime=0;this._dtRaw=0;this._dt1=0;this._dt=0;this._timeScale=1;this._minimumFramerate=\n30;this._gameTime=C3.New(C3.KahanSum);this._gameTimeRaw=C3.New(C3.KahanSum);this._wallTime=C3.New(C3.KahanSum);this._instanceTimes=new Map;this._fpsFrameCount=-1;this._fpsLastTime=0;this._fps=0;this._mainThreadTimeCounter=0;this._mainThreadTime=0;this._isLoadingState=false;this._saveToSlotName=\"\";this._loadFromSlotName=\"\";this._loadFromJson=null;this._lastSaveJson=\"\";this._projectStorage=null;this._savegamesStorage=null;this._dispatcher=C3.New(C3.Event.Dispatcher);this._domEventHandlers=new Map;this._pendingResponsePromises=\nnew Map;this._nextDomResponseId=0;this._didRequestDeviceOrientationEvent=false;this._didRequestDeviceMotionEvent=false;this._isReadyToHandleEvents=false;this._waitingToHandleEvents=[];this._eventObjects={\"pretick\":C3.New(C3.Event,\"pretick\",false),\"tick\":C3.New(C3.Event,\"tick\",false),\"tick2\":C3.New(C3.Event,\"tick2\",false),\"instancedestroy\":C3.New(C3.Event,\"instancedestroy\",false),\"beforelayoutchange\":C3.New(C3.Event,\"beforelayoutchange\",false),\"layoutchange\":C3.New(C3.Event,\"layoutchange\",false)};\nthis._eventObjects[\"instancedestroy\"].instance=null;this._userScriptDispatcher=C3.New(C3.Event.Dispatcher);this._userScriptEventObjects=null;this._behInstsToTick=C3.New(C3.RedBlackSet,C3.BehaviorInstance.SortByTickSequence);this._behInstsToPostTick=C3.New(C3.RedBlackSet,C3.BehaviorInstance.SortByTickSequence);this._behInstsToTick2=C3.New(C3.RedBlackSet,C3.BehaviorInstance.SortByTickSequence);this._jobScheduler=C3.New(C3.JobSchedulerRuntime,this,opts[\"jobScheduler\"]);if(opts[\"canvas\"])this._canvasManager=\nC3.New(C3.CanvasManager,this);this._messagePort.onmessage=e=>this[\"_OnMessageFromDOM\"](e.data);this.AddDOMComponentMessageHandler(\"runtime\",\"visibilitychange\",e=>this._OnVisibilityChange(e));this.AddDOMComponentMessageHandler(\"runtime\",\"wrapper-extension-message\",e=>this._OnWrapperExtensionMessage(e));this.AddDOMComponentMessageHandler(\"runtime\",\"opus-decode\",e=>this._WasmDecodeWebMOpus(e[\"arrayBuffer\"]));this.AddDOMComponentMessageHandler(\"runtime\",\"get-remote-preview-status-info\",()=>this._GetRemotePreviewStatusInfo());\nthis.AddDOMComponentMessageHandler(\"runtime\",\"js-invoke-function\",e=>this._InvokeFunctionFromJS(e));this.AddDOMComponentMessageHandler(\"runtime\",\"go-to-last-error-script\",self[\"goToLastErrorScript\"]);this.AddDOMComponentMessageHandler(\"runtime\",\"offline-audio-render-completed\",e=>this._OnOfflineAudioRenderCompleted(e));this._dispatcher.addEventListener(\"window-blur\",e=>this._OnWindowBlur(e));this._dispatcher.addEventListener(\"window-focus\",()=>this._OnWindowFocus());this._timelineManager.AddRuntimeListeners();\nthis._templateManager.AddRuntimeListeners();this._iRuntime=null;this._interfaceMap=new WeakMap;this._commonScriptInterfaces={keyboard:null,mouse:null,touch:null};this._instancesNeedingAfterLoadMap=new WeakMap;this._instancesNeedingAfterLoadArray=[]}static Create(opts){return C3.New(C3.Runtime,opts)}Release(){C3.clearArray(this._allObjectClasses);this._objectClassesByName.clear();this._objectClassesBySid.clear();this._layoutManager.Release();this._layoutManager=null;this._eventSheetManager.Release();\nthis._eventSheetManager=null;this._pluginManager.Release();this._pluginManager=null;this._assetManager.Release();this._assetManager=null;this._collisionEngine.Release();this._collisionEngine=null;this._timelineManager.Release();this._timelineManager=null;this._transitionManager.Release();this._transitionManager=null;this._templateManager.Release();this._templateManager=null;this._textIconManager.Release();this._textIconManager=null;if(this._canvasManager){this._canvasManager.Release();this._canvasManager=\nnull}this._dispatcher.Release();this._dispatcher=null;this._tickEvent=null}[\"_OnMessageFromDOM\"](data){const type=data[\"type\"];if(type===\"event\")this._OnEventFromDOM(data);else if(type===\"result\")this._OnResultFromDOM(data);else throw new Error(`unknown message '${type}'`);}_OnEventFromDOM(e){if(!this._isReadyToHandleEvents){this._waitingToHandleEvents.push(e);return}const component=e[\"component\"];const handler=e[\"handler\"];const data=e[\"data\"];const dispatchOpts=e[\"dispatchOpts\"];const dispatchRuntimeEvent=\n!!(dispatchOpts&&dispatchOpts[\"dispatchRuntimeEvent\"]);const dispatchUserScriptEvent=!!(dispatchOpts&&dispatchOpts[\"dispatchUserScriptEvent\"]);const responseId=e[\"responseId\"];if(component===\"runtime\"){if(dispatchRuntimeEvent){const event=new C3.Event(handler);event.data=data;this._dispatcher.dispatchEventAndWaitAsyncSequential(event)}if(dispatchUserScriptEvent){const event=new C3.Event(handler,true);for(const [key,value]of Object.entries(data))event[key]=value;this.DispatchUserScriptEvent(event)}}const handlerMap=\nthis._domEventHandlers.get(component);if(!handlerMap){if(!dispatchRuntimeEvent&&!dispatchUserScriptEvent)console.warn(`[Runtime] No DOM event handlers for component '${component}'`);return}const func=handlerMap.get(handler);if(!func){if(!dispatchRuntimeEvent&&!dispatchUserScriptEvent)console.warn(`[Runtime] No DOM handler '${handler}' for component '${component}'`);return}let ret=null;try{ret=func(data)}catch(err){console.error(`Exception in '${component}' handler '${handler}':`,err);if(responseId!==\nnull)this._PostResultToDOM(responseId,false,\"\"+err);return}if(responseId!==null)if(ret&&ret.then)ret.then(result=>this._PostResultToDOM(responseId,true,result)).catch(err=>{console.error(`Rejection from '${component}' handler '${handler}':`,err);this._PostResultToDOM(responseId,false,\"\"+err)});else this._PostResultToDOM(responseId,true,ret)}_PostResultToDOM(responseId,isOk,result){this._messagePort.postMessage({\"type\":\"result\",\"responseId\":responseId,\"isOk\":isOk,\"result\":result})}_OnResultFromDOM(data){const responseId=\ndata[\"responseId\"];const isOk=data[\"isOk\"];const result=data[\"result\"];const pendingPromise=this._pendingResponsePromises.get(responseId);if(isOk)pendingPromise.resolve(result);else pendingPromise.reject(result);this._pendingResponsePromises.delete(responseId)}AddDOMComponentMessageHandler(component,handler,func){let handlerMap=this._domEventHandlers.get(component);if(!handlerMap){handlerMap=new Map;this._domEventHandlers.set(component,handlerMap)}if(handlerMap.has(handler))throw new Error(`[Runtime] Component '${component}' already has handler '${handler}'`);\nhandlerMap.set(handler,func)}PostComponentMessageToDOM(component,handler,data,transfer){this._messagePort.postMessage({\"type\":\"event\",\"component\":component,\"handler\":handler,\"data\":data,\"responseId\":null},transfer)}PostComponentMessageToDOMAsync(component,handler,data,transfer){const responseId=this._nextDomResponseId++;const ret=new Promise((resolve,reject)=>{this._pendingResponsePromises.set(responseId,{resolve,reject})});this._messagePort.postMessage({\"type\":\"event\",\"component\":component,\"handler\":handler,\n\"data\":data,\"responseId\":responseId},transfer);return ret}SendWrapperExtensionMessage(componentId,messageId,params,asyncId=-1){this.PostComponentMessageToDOM(\"runtime\",\"send-wrapper-extension-message\",{\"componentId\":componentId,\"messageId\":messageId,\"params\":params,\"asyncId\":asyncId})}SendWrapperExtensionMessageAsync(componentId,messageId,params){const responseId=this._nextDomResponseId++;const ret=new Promise((resolve,reject)=>{this._pendingResponsePromises.set(responseId,{resolve,reject})});this.SendWrapperExtensionMessage(componentId,\nmessageId,params,responseId);return ret}_OnWrapperExtensionMessage(data){if(data[\"asyncId\"]!==-1){const responseId=data[\"asyncId\"];const pendingPromise=this._pendingResponsePromises.get(responseId);pendingPromise.resolve(data[\"params\"]);this._pendingResponsePromises.delete(responseId)}else this._OnEventFromDOM({\"component\":\"wrapper-extension:\"+data[\"componentId\"],\"handler\":data[\"messageId\"],\"data\":data[\"params\"],\"responseId\":null})}AddWrapperExtensionMessageHandler(componentId,messageId,func){this.AddDOMComponentMessageHandler(\"wrapper-extension:\"+\ncomponentId,messageId,func)}HasWrapperComponentId(id){return this._pluginManager.HasWrapperComponentId(id)}PostToDebugger(data){if(!this.IsDebug())throw new Error(\"not in debug mode\");this.PostComponentMessageToDOM(\"runtime\",\"post-to-debugger\",data)}async Init(opts){if(this.IsDebug())await C3Debugger.Init(this);else if(self.C3Debugger)self.C3Debugger.InitPreview(this);const [o]=await Promise.all([this._assetManager.FetchJson(\"data.json\"),this._MaybeLoadOpusDecoder(),this._jobScheduler.Init()]);await this._LoadDataJson(o);\nawait this._InitialiseCanvas(opts);if(!this.IsPreview());if(this.GetWebGLRenderer()){const webglRenderer=this.GetWebGLRenderer();console.info(`[C3 runtime] Hosted in ${this.IsInWorker()?\"worker\":\"DOM\"}, rendering with WebGL ${webglRenderer.GetWebGLVersionNumber()} [${webglRenderer.GetUnmaskedRenderer()}] (${webglRenderer.IsDesynchronized()?\"desynchronized\":\"standard\"} compositing)`)}else if(this.GetWebGPURenderer())console.info(`[C3 runtime] Hosted in ${this.IsInWorker()?\n\"worker\":\"DOM\"}, rendering with WebGPU [${this.GetWebGPURenderer().GetBasicAdapterInfoString()}]`);if(this.GetRenderer().HasMajorPerformanceCaveat())console.warn(\"[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance.\");this._isReadyToHandleEvents=true;for(const e of this._waitingToHandleEvents)this._OnEventFromDOM(e);C3.clearArray(this._waitingToHandleEvents);if(this._canvasManager)this._canvasManager.StartLoadingScreen();\nfor(const f of opts[\"runOnStartupFunctions\"])this._additionalLoadPromises.push(this._RunOnStartupFunction(f));await Promise.all([this._assetManager.WaitForAllToLoad(),...this._additionalLoadPromises]);C3.clearArray(this._additionalLoadPromises);if(this._assetManager.HasHadErrorLoading()){if(this._canvasManager)this._canvasManager.HideCordovaSplashScreen();return}if(this._canvasManager)await this._canvasManager.EndLoadingScreen();await this._dispatcher.dispatchEventAndWaitAsync(new C3.Event(\"beforeruntimestart\"));\nawait this.Start();this._messagePort.postMessage({\"type\":\"runtime-ready\"});return this}async _RunOnStartupFunction(f){try{await f(this._iRuntime)}catch(err){console.error(\"[C3 runtime] Error in runOnStartup function: \",err)}}async _LoadDataJson(o){const projectData=o[\"project\"];this._projectName=projectData[0];this._projectVersion=projectData[16];this._projectUniqueId=projectData[31];this._appId=projectData[38];const loadingLogoFilename=projectData[39]||\"loading-logo.png\";this._isPixelRoundingEnabled=\n!!projectData[9];this._originalViewportWidth=this._viewportWidth=projectData[10];this._originalViewportHeight=this._viewportHeight=projectData[11];this._parallaxXorigin=this._originalViewportWidth/2;this._parallaxYorigin=this._originalViewportHeight/2;this._compositingMode=projectData[36];this._framerateMode=projectData[37];if(this._compositingMode===\"low-latency\"&&this.IsAndroidWebView()&&C3.Platform.BrowserVersionNumber<=77){console.warn(\"[C3 runtime] Desynchronized (low-latency) compositing is enabled, but is disabled in the Android WebView <=77 due to crbug.com/1008842. Reverting to synchronized (standard) compositing.\");\nthis._compositingMode=\"standard\"}this._uses3dFeatures=!!projectData[40];this._sampling=projectData[14];this._usesAnyBackgroundBlending=projectData[15];this._usesAnyCrossSampling=projectData[42];this._usesAnyDepthSampling=projectData[17];this._usesLoaderLayout=!!projectData[18];this._loaderStyle=projectData[19];this._nextUid=projectData[21];this._pauseOnBlur=projectData[22];const assetManager=this._assetManager;assetManager._SetFileStructure(projectData[45]);assetManager._SetAudioFiles(projectData[7],\nprojectData[25]);assetManager._SetMediaSubfolder(projectData[8]);assetManager._SetFontsSubfolder(projectData[32]);assetManager._SetIconsSubfolder(projectData[28]);assetManager._SetWebFonts(projectData[29]);if(this._loaderStyle===0){let url=\"\";if(this.IsPreview()){if(assetManager._HasLocalUrlBlob(loadingLogoFilename))url=assetManager.GetLocalUrlAsBlobUrl(loadingLogoFilename)}else if(assetManager.GetFileStructure()===\"flat\")url=assetManager.GetIconsSubfolder()+loadingLogoFilename;else url=loadingLogoFilename;\nif(url)this._loadingLogoAsset=assetManager.LoadImage({url})}if(this._canvasManager){this._canvasManager.SetFullscreenMode(C3.CanvasManager._FullscreenModeNumberToString(projectData[12]));this._canvasManager.SetFullscreenScalingQuality(projectData[23]?\"high\":\"low\");this._canvasManager.SetMipmapsEnabled(projectData[24]!==0);this._canvasManager._SetGPUPowerPreference(projectData[34]);this._canvasManager._SetTextureAnisotropy(projectData[41]);this._canvasManager._SetWebGPUEnabled(projectData[13]);this._canvasManager._SetZAxisScale(projectData[30]);\nthis._canvasManager._SetZDistances(projectData[46],projectData[47]);this._canvasManager._SetFieldOfView(projectData[26]);this._canvasManager._SetLimitedToWebGL1(projectData[48])}const exportToVideoOpts=projectData[43];if(exportToVideoOpts)await this._LoadExportToVideoData(exportToVideoOpts);this._pluginManager.CreateSystemPlugin();this._objectReferenceTable=self.C3_GetObjectRefTable();for(const pluginData of projectData[2])this._pluginManager.CreatePlugin(pluginData);this._objectReferenceTable=self.C3_GetObjectRefTable();\nthis._LoadJsPropNameTable();for(const objectClassData of projectData[3]){const objectClass=C3.ObjectClass.Create(this,this._allObjectClasses.length,objectClassData);this._allObjectClasses.push(objectClass);this._objectClassesByName.set(objectClass.GetName().toLowerCase(),objectClass);this._objectClassesBySid.set(objectClass.GetSID(),objectClass)}for(const familyData of projectData[4]){const familyType=this._allObjectClasses[familyData[0]];familyType._LoadFamily(familyData)}for(const containerData of projectData[27]){const containerTypes=\ncontainerData.map(index=>this._allObjectClasses[index]);this._allContainers.push(C3.New(C3.Container,this,containerTypes))}for(const objectClass of this._allObjectClasses)objectClass._OnAfterCreate();for(const layoutData of projectData[5])this._layoutManager.Create(layoutData);const firstLayoutName=projectData[1];if(firstLayoutName){const firstLayout=this._layoutManager.GetLayoutByName(firstLayoutName);if(firstLayout)this._layoutManager.SetFirstLayout(firstLayout)}for(const timelineData of projectData[33])this._timelineManager.Create(timelineData);\nfor(const transitionData of projectData[35])this._transitionManager.Create(transitionData);for(const templateInstanceData of projectData[44])this._templateManager.Create(templateInstanceData);if(!this._templateManager.HasTemplates()){this._templateManager.Release();this._templateManager=null}this._InitScriptInterfaces();for(const eventSheetData of projectData[6])this._eventSheetManager.Create(eventSheetData);this._eventSheetManager._PostInit();this._InitGlobalVariableScriptInterface();C3.clearArray(this._objectReferenceTable);\nthis.FlushPendingInstances();let targetOrientation=\"any\";const orientations=projectData[20];if(orientations===1)targetOrientation=\"portrait\";else if(orientations===2)targetOrientation=\"landscape\";this.PostComponentMessageToDOM(\"runtime\",\"set-target-orientation\",{\"targetOrientation\":targetOrientation})}async _LoadExportToVideoData(exportToVideoOpts){const format=exportToVideoOpts[\"format\"];if(format===\"image-sequence\")this._exportToVideo=new self.C3ExportToImageSequence(this,exportToVideoOpts);else if(format===\n\"image-sequence-gif\")this._exportToVideo=new self.C3ExportToGIF(this,exportToVideoOpts);else if(format===\"webm\")this._exportToVideo=new self.C3ExportToWebMVideo(this,exportToVideoOpts);else if(format===\"mp4\")this._exportToVideo=new self.C3ExportToMP4Video(this,exportToVideoOpts);else;this._framerateMode=\"unlimited-frame\";this._canvasManager.SetFullscreenMode(\"off\");this._devicePixelRatio=1;self.devicePixelRatio=1;await this.PostComponentMessageToDOMAsync(\"runtime\",\"set-exporting-to-video\",{\"message\":this._exportToVideo.GetExportingMessageForPercent(0),\n\"duration\":this._exportToVideo.GetDuration()})}GetLoaderStyle(){return this._loaderStyle}IsExportToVideo(){return this._exportToVideo!==null}GetExportVideoDuration(){return this._exportToVideo.GetDuration()}GetExportVideoFramerate(){return this._exportToVideo.GetFramerate()}_InitExportToVideo(){return this._exportToVideo.Init({width:this._canvasManager.GetDeviceWidth(),height:this._canvasManager.GetDeviceHeight()})}_ExportToVideoAddFrame(){const time=this._tickCount/this.GetExportVideoFramerate();\nreturn this._exportToVideo.AddFrame(this._canvasManager.GetCanvas(),time)}_ExportToVideoAddKeyframe(){if(this._exportToVideo)this._exportToVideo.AddKeyframe()}_OnOfflineAudioRenderCompleted(e){this._exportToVideo.OnOfflineAudioRenderCompleted(e)}_ExportToVideoFinish(){return this._exportToVideo.Finish()}IsFBInstantAvailable(){return this._isFBInstantAvailable}IsLoading(){return this._isLoading}AddLoadPromise(promise){this._additionalLoadPromises.push(promise)}SetUsingCreatePromises(e){this._isUsingCreatePromises=\n!!e}AddCreatePromise(promise){if(!this._isUsingCreatePromises)return;this._additionalCreatePromises.push(promise)}GetCreatePromises(){return this._additionalCreatePromises}_GetNextFamilyIndex(){return this._familyCount++}GetFamilyCount(){return this._familyCount}_AddEffectList(el){this._allEffectLists.push(el)}_GetAllEffectLists(){return this._allEffectLists}async _InitialiseCanvas(opts){if(!this._canvasManager)return;await this._canvasManager.CreateCanvas(opts);this._canvasManager.InitLoadingScreen(this._loaderStyle)}async _MaybeLoadOpusDecoder(){if(this._assetManager.IsAudioFormatSupported(\"audio/webm; codecs=opus\"))return;\nlet wasmBlob=null;let wasmBuffer=null;try{if(this.IsiOSCordova()&&this._assetManager.IsFileProtocol())wasmBuffer=await this._assetManager.CordovaFetchLocalFileAsArrayBuffer(this._opusWasmBinaryUrl);else wasmBuffer=await this._assetManager.FetchArrayBuffer(this._opusWasmBinaryUrl)}catch(err){console.info(\"Failed to fetch Opus decoder WASM; assuming project has no Opus audio.\",err);return}if(wasmBuffer)this.AddJobWorkerBuffer(wasmBuffer,\"opus-decoder-wasm\");else this.AddJobWorkerBlob(wasmBlob,\"opus-decoder-wasm\");\nawait this.AddJobWorkerScripts([this._opusWasmScriptUrl])}async _WasmDecodeWebMOpus(arrayBuffer){const result=await this.AddJob(\"OpusDecode\",{\"arrayBuffer\":arrayBuffer},[arrayBuffer]);return result}async Start(){this._hasStarted=true;this._startTime=Date.now();if(this._usesLoaderLayout){for(const objectClass of this._allObjectClasses)if(!objectClass.IsFamily()&&!objectClass.IsOnLoaderLayout()&&objectClass.IsWorldType())objectClass.OnCreate();this._assetManager.WaitForAllToLoad().then(()=>{this._isLoading=\nfalse;this._OnLoadFinished()})}else this._isLoading=false;this._assetManager.SetInitialLoadFinished();if(this.IsDebug())C3Debugger.RuntimeInit(ife);for(const layout of this._layoutManager.GetAllLayouts())layout._CreateGlobalNonWorlds();if(this.IsExportToVideo())await this._InitExportToVideo();const firstLayout=this._layoutManager.GetFirstLayout();await firstLayout._Load(null,this.GetRenderer());await firstLayout._StartRunning(true);this._fpsLastTime=performance.now();if(!this._usesLoaderLayout)this._OnLoadFinished();\nconst state=await this.PostComponentMessageToDOMAsync(\"runtime\",\"before-start-ticking\");if(state[\"isSuspended\"]&&!this.IsExportToVideo())this._suspendCount++;else this.Tick()}_OnLoadFinished(){this.Trigger(C3.Plugins.System.Cnds.OnLoadFinished,null,null);this.PostComponentMessageToDOM(\"runtime\",\"register-sw\")}GetObjectReference(index){index=Math.floor(index);const objRefTable=this._objectReferenceTable;if(index<0||index>=objRefTable.length)throw new Error(\"invalid object reference\");return objRefTable[index]}_LoadJsPropNameTable(){for(const entry of self.C3_JsPropNameTable){const propName=\nC3.first(Object.keys(entry));this._jsPropNameTable.push(propName)}}GetJsPropName(index){index=Math.floor(index);const jsPropNameTable=this._jsPropNameTable;if(index<0||index>=jsPropNameTable.length)throw new Error(\"invalid prop reference\");return jsPropNameTable[index]}HasDOM(){return this._hasDom}IsHeadless(){return this._isHeadless}IsInWorker(){return this._isInWorker}GetRuntimeBaseURL(){return this._runtimeBaseUrl}GetPreviewURL(){return this._previewUrl}GetEventSheetManager(){return this._eventSheetManager}GetEventStack(){return this._eventSheetManager.GetEventStack()}GetCurrentEventStackFrame(){return this._eventSheetManager.GetCurrentEventStackFrame()}GetCurrentEvent(){return this._eventSheetManager.GetCurrentEvent()}GetCurrentCondition(){return this._eventSheetManager.GetCurrentCondition()}IsCurrentConditionFirst(){return this.GetCurrentEventStackFrame().GetConditionIndex()===\n0}GetCurrentAction(){return this._eventSheetManager.GetCurrentAction()}GetPluginManager(){return this._pluginManager}GetSystemPlugin(){return this._pluginManager.GetSystemPlugin()}GetObjectClassByIndex(i){i=Math.floor(i);if(i<0||i>=this._allObjectClasses.length)throw new RangeError(\"invalid index\");return this._allObjectClasses[i]}GetObjectClassByName(name){return this._objectClassesByName.get(name.toLowerCase())||null}GetObjectClassBySID(sid){return this._objectClassesBySid.get(sid)||null}GetSingleGlobalObjectClassByCtor(ctor){const plugin=\nthis._pluginManager.GetPluginByConstructorFunction(ctor);if(!plugin)return null;return plugin.GetSingleGlobalObjectClass()}GetAllObjectClasses(){return this._allObjectClasses}*allInstances(){for(const objectClass of this._allObjectClasses){if(objectClass.IsFamily())continue;yield*objectClass.instances()}}Dispatcher(){return this._dispatcher}UserScriptDispatcher(){return this._userScriptDispatcher}DispatchUserScriptEvent(e){e.runtime=this.GetIRuntime();const shouldTime=this.IsDebug()&&!this._eventSheetManager.IsInEventEngine();\nif(shouldTime)C3Debugger.StartMeasuringScriptTime();this._userScriptDispatcher.dispatchEvent(e);if(shouldTime)C3Debugger.AddScriptTime()}DispatchUserScriptEventAsyncWait(e){e.runtime=this.GetIRuntime();return this._userScriptDispatcher.dispatchEventAndWaitAsync(e)}GetOriginalViewportWidth(){return this._originalViewportWidth}GetOriginalViewportHeight(){return this._originalViewportHeight}SetOriginalViewportSize(w,h){if(this._originalViewportWidth===w&&this._originalViewportHeight===h)return;this._originalViewportWidth=\nw;this._originalViewportHeight=h;const layoutManager=this.GetLayoutManager();layoutManager.SetAllLayerProjectionChanged();layoutManager.SetAllLayerMVChanged()}GetViewportWidth(){return this._viewportWidth}GetViewportHeight(){return this._viewportHeight}SetViewportSize(w,h){if(this._viewportWidth===w&&this._viewportHeight===h)return;this._viewportWidth=w;this._viewportHeight=h;const layoutManager=this.GetLayoutManager();layoutManager.SetAllLayerProjectionChanged();layoutManager.SetAllLayerMVChanged()}_SetDevicePixelRatio(r){if(this.IsExportToVideo())return;\nthis._devicePixelRatio=r}GetDevicePixelRatio(){return this._devicePixelRatio}GetParallaxXOrigin(){return this._parallaxXorigin}GetParallaxYOrigin(){return this._parallaxYorigin}GetCanvasManager(){return this._canvasManager}GetDrawWidth(){if(!this._canvasManager)return this._viewportWidth;return this._canvasManager.GetDrawWidth()}GetDrawHeight(){if(!this._canvasManager)return this._viewportHeight;return this._canvasManager.GetDrawHeight()}GetRenderScale(){if(!this._canvasManager)return 1;return this._canvasManager.GetRenderScale()}GetDisplayScale(){if(!this._canvasManager)return 1;\nreturn this._canvasManager.GetDisplayScale()}GetEffectLayerScaleParam(){if(!this._canvasManager)return 1;return this._canvasManager.GetEffectLayerScaleParam()}GetEffectDevicePixelRatioParam(){if(!this._canvasManager)return 1;return this._canvasManager.GetEffectDevicePixelRatioParam()}GetCanvasClientX(){if(!this._canvasManager)return 0;return this._canvasManager.GetCanvasClientX()}GetCanvasClientY(){if(!this._canvasManager)return 0;return this._canvasManager.GetCanvasClientY()}GetCanvasCssWidth(){if(!this._canvasManager)return 0;\nreturn this._canvasManager.GetCssWidth()}GetCanvasCssHeight(){if(!this._canvasManager)return 0;return this._canvasManager.GetCssHeight()}GetFullscreenMode(){if(!this._canvasManager)return\"off\";return this._canvasManager.GetFullscreenMode()}GetAdditionalRenderTarget(opts){if(!this._canvasManager)return null;return this._canvasManager.GetAdditionalRenderTarget(opts)}ReleaseAdditionalRenderTarget(renderTarget){if(!this._canvasManager)return;this._canvasManager.ReleaseAdditionalRenderTarget(renderTarget)}UsesAnyBackgroundBlending(){return this._usesAnyBackgroundBlending}UsesAnyCrossSampling(){return this._usesAnyCrossSampling}UsesAnyDepthSampling(){return this._usesAnyDepthSampling}GetGPUUtilisation(){if(!this._canvasManager)return NaN;\nreturn this._canvasManager.GetGPUUtilisation()}IsLinearSampling(){return this.GetSampling()!==\"nearest\"}GetFramerateMode(){return this._framerateMode}GetCompositingMode(){return this._compositingMode}GetSampling(){return this._sampling}UsesLoaderLayout(){return this._usesLoaderLayout}GetLoadingLogoAsset(){return this._loadingLogoAsset}ReleaseLoadingLogoAsset(){if(this._loadingLogoAsset){this._loadingLogoAsset.Release();this._loadingLogoAsset=null}}GetLayoutManager(){return this._layoutManager}GetMainRunningLayout(){return this._layoutManager.GetMainRunningLayout()}GetTimelineManager(){return this._timelineManager}GetTransitionManager(){return this._transitionManager}GetTemplateManager(){return this._templateManager}GetAssetManager(){return this._assetManager}LoadImage(opts){return this._assetManager.LoadImage(opts)}CreateInstance(objectClass,\nlayer,x,y,createHierarchy,templateName){if(templateName&&this._templateManager){const templateData=this._templateManager.GetTemplateData(objectClass,templateName);if(templateData){const inst=this.CreateInstanceFromData(templateData,layer,false,x,y,false,createHierarchy,undefined,createHierarchy);this._templateManager.MapInstanceToTemplateName(inst,templateName);return inst}}return this.CreateInstanceFromData(objectClass,layer,false,x,y,false,createHierarchy,undefined,createHierarchy)}CreateInstanceFromData(instData_or_objectClass,\nlayer,isStartupInstance,x,y,skipSiblings,createHierarchy,previousInstance,creatingHierarchy){let instData=null;let objectClass=null;if(instData_or_objectClass instanceof C3.ObjectClass){objectClass=instData_or_objectClass;if(objectClass.IsFamily()){const members=objectClass.GetFamilyMembers();const i=Math.floor(this.Random()*members.length);objectClass=members[i]}instData=objectClass.GetDefaultInstanceData()}else{instData=instData_or_objectClass;objectClass=this.GetObjectClassByIndex(instData[1])}const isWorld=\nobjectClass.GetPlugin().IsWorldType();if(this._isLoading&&isWorld&&!objectClass.IsOnLoaderLayout())return null;const originalLayer=layer;if(!isWorld)layer=null;let uid;if(isStartupInstance&&!skipSiblings&&instData&&!this._instancesByUid.has(instData[2]))uid=instData[2];else uid=this._nextUid++;const worldData=instData?instData[0]:null;const inst=C3.New(C3.Instance,{runtime:this,objectType:objectClass,layer:layer,worldData,instVarData:instData?instData[3]:null,uid:uid});this._instancesByUid.set(uid,\ninst);let wi=null;if(isWorld){wi=inst.GetWorldInfo();if(typeof x!==\"undefined\"&&typeof y!==\"undefined\"){wi.SetX(x);wi.SetY(y)}objectClass._SetAnyCollisionCellChanged(true)}if(layer){if(!creatingHierarchy)layer._AddInstance(inst,true);if(layer.GetParallaxX()!==1||layer.GetParallaxY()!==1)objectClass._SetAnyInstanceParallaxed(true);layer.GetLayout().MaybeLoadTexturesFor(objectClass)}this._objectCount++;let needsSiblingCreation=true;if(previousInstance){const previousObjectClass=previousInstance.GetObjectClass();\nif(previousObjectClass.IsInContainer()&&objectClass.IsInContainer()){const container=objectClass.GetContainer();const previousContainer=previousObjectClass.GetContainer();if(container===previousContainer)needsSiblingCreation=false}}if(objectClass.IsInContainer()&&!isStartupInstance&&!skipSiblings&&needsSiblingCreation){for(const containerType of objectClass.GetContainer().objectTypes()){if(containerType===objectClass)continue;const siblingInst=this.CreateInstanceFromData(containerType,originalLayer,\nfalse,wi?wi.GetX():x,wi?wi.GetY():y,true,false,undefined,creatingHierarchy);inst._AddSibling(siblingInst)}for(const s of inst.siblings()){s._AddSibling(inst);for(const s2 of inst.siblings())if(s!==s2)s._AddSibling(s2)}}if(isWorld&&!isStartupInstance&&!!createHierarchy)this._CreateChildInstancesFromData(inst,worldData,wi,layer,x,y,creatingHierarchy);if(objectClass.IsInContainer()&&!isStartupInstance&&!skipSiblings&&!!createHierarchy)for(const sibling of inst.siblings()){const swi=sibling.GetWorldInfo();\nif(!swi)continue;const siblingPlugin=sibling.GetPlugin();const sWorldData=sibling.GetObjectClass().GetDefaultInstanceData()[0];if(siblingPlugin.IsWorldType())this._CreateChildInstancesFromData(sibling,sWorldData,swi,layer,swi.GetX(),swi.GetY(),creatingHierarchy);else this._CreateChildInstancesFromData(sibling,sWorldData,swi,layer,undefined,undefined,creatingHierarchy)}if(!skipSiblings&&!!createHierarchy){if(typeof x===\"undefined\")x=worldData[0];if(typeof y===\"undefined\")y=worldData[1];const pwi=wi.GetTopParent();\nconst newX=x-wi.GetX()+pwi.GetX();const newY=y-wi.GetY()+pwi.GetY();pwi.SetXY(newX,newY)}objectClass._SetIIDsStale();const instPropertyData=instData?C3.cloneArray(instData[5]):null;const behPropertyData=instData?instData[4].map(bp=>C3.cloneArray(bp)):null;const hasTilemap=isWorld&&worldData&&worldData[13];if(hasTilemap)inst._SetHasTilemap();inst._CreateSdkInstance(instPropertyData,behPropertyData);if(hasTilemap){const tilemapData=worldData[13];inst.GetSdkInstance().LoadTilemapData(tilemapData[2],\ntilemapData[0],tilemapData[1])}this._instancesPendingCreate.push(inst);this._hasPendingInstances=true;if(this.IsDebug())C3Debugger.InstanceCreated(inst);return inst}_CreateChildInstancesFromData(parentInstance,parentWorldData,parentWorldInfo,layer,x,y,creatingHierarchy){const parentZIndex=parentWorldInfo.GetSceneGraphZIndexExportData();const childrenData=parentWorldInfo.GetSceneGraphChildrenExportData();parentInstance.GetWorldInfo().SetSceneGraphZIndex(parentZIndex);if(!childrenData)return;if(typeof x===\n\"undefined\")x=parentWorldData[0];if(typeof y===\"undefined\")y=parentWorldData[1];const sceneGraphSiblings=new Set;const parentX=parentWorldData[0];const parentY=parentWorldData[1];for(const childData of childrenData){const childLayoutSID=childData[0];const childLayerIndex=childData[1];const childUID=childData[2];const childFlags=childData[3];const childIsInContainer=!!childData[4];const childZIndex=childData[5];const uniqueInstanceData=childData[6];let childInstData;if(uniqueInstanceData)childInstData=\nuniqueInstanceData;else{const layout=this._layoutManager.GetLayoutBySID(childLayoutSID);const l=layout.GetLayer(childLayerIndex);childInstData=l.GetInitialInstanceData(childUID)}const childObjectClass=this.GetObjectClassByIndex(childInstData[1]);const hasSibling=parentInstance.HasSibling(childObjectClass);const siblingProcessed=sceneGraphSiblings.has(childObjectClass);if(hasSibling&&!siblingProcessed&&childIsInContainer){const childInst=parentInstance.GetSibling(childObjectClass);const childX=x+childInstData[0][0]-\nparentX;const childY=y+childInstData[0][1]-parentY;childInst.GetWorldInfo().SetXY(childX,childY);childInst.GetWorldInfo().SetSceneGraphZIndex(childZIndex);parentInstance.AddChild(childInst,{transformX:!!(childFlags>>0&1),transformY:!!(childFlags>>1&1),transformWidth:!!(childFlags>>2&1),transformHeight:!!(childFlags>>3&1),transformAngle:!!(childFlags>>4&1),destroyWithParent:!!(childFlags>>5&1),transformZElevation:!!(childFlags>>6&1),transformOpacity:!!(childFlags>>7&1),transformVisibility:!!(childFlags>>\n8&1)});sceneGraphSiblings.add(childObjectClass)}else{const childX=x+childInstData[0][0]-parentX;const childY=y+childInstData[0][1]-parentY;const childInst=this.CreateInstanceFromData(childInstData,layer,false,childX,childY,false,true,parentInstance,creatingHierarchy);childInst.GetWorldInfo().SetSceneGraphZIndex(childZIndex);parentInstance.AddChild(childInst,{transformX:!!(childFlags>>0&1),transformY:!!(childFlags>>1&1),transformWidth:!!(childFlags>>2&1),transformHeight:!!(childFlags>>3&1),transformAngle:!!(childFlags>>\n4&1),destroyWithParent:!!(childFlags>>5&1),transformZElevation:!!(childFlags>>6&1),transformOpacity:!!(childFlags>>7&1),transformVisibility:!!(childFlags>>8&1)})}}}DestroyInstance(inst){if(this._instancesToReleaseAtEndOfTick.has(inst))return;const objectClass=inst.GetObjectClass();let s=this._instancesPendingDestroy.get(objectClass);if(s){if(s.has(inst))return;s.add(inst)}else{s=new Set;s.add(inst);this._instancesPendingDestroy.set(objectClass,s)}if(this.IsDebug())C3Debugger.InstanceDestroyed(inst);\ninst._MarkDestroyed();this._hasPendingInstances=true;if(inst.IsInContainer())for(const s of inst.siblings())this.DestroyInstance(s);for(const c of inst.children())if(c.GetDestroyWithParent())this.DestroyInstance(c);if(!this._layoutManager.IsEndingLayout()&&!this._isLoadingState){const eventSheetManager=this.GetEventSheetManager();eventSheetManager.BlockFlushingInstances(true);inst._TriggerOnDestroyed();eventSheetManager.BlockFlushingInstances(false)}inst._FireDestroyedScriptEvents(this._layoutManager.IsEndingLayout())}FlushPendingInstances(){if(!this._hasPendingInstances)return;\nthis._isFlushingPendingInstances=true;this._FlushInstancesPendingCreate();this._FlushInstancesPendingDestroy();this._isFlushingPendingInstances=false;this._hasPendingInstances=false;this.UpdateRender()}_FlushInstancesPendingCreate(){for(const inst of this._instancesPendingCreate){const objectType=inst.GetObjectClass();objectType._AddInstance(inst);for(const family of objectType.GetFamilies()){family._AddInstance(inst);family._SetIIDsStale()}}C3.clearArray(this._instancesPendingCreate)}_FlushInstancesPendingDestroy(){this._dispatcher.SetDelayRemoveEventsEnabled(true);\nfor(const [objectClass,s]of this._instancesPendingDestroy.entries()){this._FlushInstancesPendingDestroyForObjectClass(objectClass,s);s.clear()}this._instancesPendingDestroy.clear();this._dispatcher.SetDelayRemoveEventsEnabled(false)}_FlushInstancesPendingDestroyForObjectClass(objectClass,s){for(const inst of s){const instanceDestroyEvent=this._eventObjects[\"instancedestroy\"];instanceDestroyEvent.instance=inst;this._dispatcher.dispatchEvent(instanceDestroyEvent);this._instancesByUid.delete(inst.GetUID());\nthis._instanceTimes.delete(inst);const wi=inst.GetWorldInfo();if(wi){wi._RemoveFromCollisionCells();wi._RemoveFromRenderCells();wi._MarkDestroyed()}this._instancesToReleaseAtEndOfTick.add(inst);this._objectCount--}C3.arrayRemoveAllInSet(objectClass.GetInstances(),s);objectClass._SetIIDsStale();this._instancesToReleaseAffectedObjectClasses.add(objectClass);if(objectClass.GetInstances().length===0)objectClass._SetAnyInstanceParallaxed(false);for(const family of objectClass.GetFamilies()){C3.arrayRemoveAllInSet(family.GetInstances(),\ns);family._SetIIDsStale();this._instancesToReleaseAffectedObjectClasses.add(family)}if(objectClass.GetPlugin().IsWorldType()){const layers=new Set([...s].map(i=>i.GetWorldInfo().GetLayer()));for(const layer of layers)layer._RemoveAllInstancesInSet(s)}}_GetInstancesPendingCreate(){return this._instancesPendingCreate}*instancesPendingCreateForObjectClass(objectClass){for(const inst of this._GetInstancesPendingCreate())if(objectClass.IsFamily()){if(inst.GetObjectClass().BelongsToFamily(objectClass))yield inst}else if(inst.GetObjectClass()===\nobjectClass)yield inst}_GetNewUID(){return this._nextUid++}_MapInstanceByUID(uid,inst){this._instancesByUid.set(uid,inst)}_OnRendererContextLost(){this._dispatcher.dispatchEvent(C3.New(C3.Event,\"renderercontextlost\"));this.SetSuspended(true);for(const objectClass of this._allObjectClasses)if(!objectClass.IsFamily()&&objectClass.HasLoadedTextures())objectClass.ReleaseTextures();const runningLayout=this.GetMainRunningLayout();if(runningLayout)runningLayout._OnRendererContextLost();C3.ImageInfo.OnRendererContextLost();\nC3.ImageAsset.OnRendererContextLost()}async _OnRendererContextRestored(){await this.GetMainRunningLayout()._Load(null,this.GetRenderer());this._dispatcher.dispatchEvent(C3.New(C3.Event,\"renderercontextrestored\"));this.SetSuspended(false);this.UpdateRender()}_OnVisibilityChange(e){this.SetSuspended(e[\"hidden\"])}_OnWindowBlur(e){if(!this.IsPreview()||!this._pauseOnBlur||C3.Platform.IsMobile)return;if(!e.data[\"parentHasFocus\"]){this.SetSuspended(true);this._isPausedOnBlur=true}}_OnWindowFocus(){if(!this._isPausedOnBlur)return;\nthis.SetSuspended(false);this._isPausedOnBlur=false}_RequestAnimationFrame(){const tickCallbacks=this._tickCallbacks;if(this._framerateMode===\"vsync\"){if(this._rafId===-1)this._rafId=self.requestAnimationFrame(tickCallbacks.normal)}else if(this._framerateMode===\"unlimited-tick\"){if(this._ruafId===-1)this._ruafId=C3.RequestUnlimitedAnimationFrame(tickCallbacks.tickOnly);if(this._rafId===-1)this._rafId=self.requestAnimationFrame(tickCallbacks.renderOnly)}else if(this._ruafId===-1)this._ruafId=C3.RequestUnlimitedAnimationFrame(tickCallbacks.normal)}_CancelAnimationFrame(){if(this._rafId!==\n-1){self.cancelAnimationFrame(this._rafId);this._rafId=-1}if(this._ruafId!==-1){C3.CancelUnlimitedAnimationFrame(this._ruafId);this._ruafId=-1}}IsSuspended(){return this._suspendCount>0}SetSuspended(s){if(this.IsExportToVideo())return;const wasSuspended=this.IsSuspended();this._suspendCount+=s?1:-1;if(this._suspendCount<0)this._suspendCount=0;const isSuspended=this.IsSuspended();if(!wasSuspended&&isSuspended){console.log(\"[Construct] Suspending\");this._CancelAnimationFrame();this._dispatcher.dispatchEvent(C3.New(C3.Event,\n\"suspend\"));this.Trigger(C3.Plugins.System.Cnds.OnSuspend,null,null)}else if(wasSuspended&&!isSuspended){console.log(\"[Construct] Resuming\");const now=performance.now();this._lastTickTime=now;this._fpsLastTime=now;this._fpsFrameCount=0;this._fps=0;this._mainThreadTime=0;this._mainThreadTimeCounter=0;this._dispatcher.dispatchEvent(C3.New(C3.Event,\"resume\"));this.Trigger(C3.Plugins.System.Cnds.OnResume,null,null);if(!this.HitBreakpoint())this.Tick(now)}}_AddBehInstToTick(behSdkInst){this._behInstsToTick.Add(behSdkInst)}_AddBehInstToPostTick(behSdkInst){this._behInstsToPostTick.Add(behSdkInst)}_AddBehInstToTick2(behSdkInst){this._behInstsToTick2.Add(behSdkInst)}_RemoveBehInstToTick(behSdkInst){this._behInstsToTick.Remove(behSdkInst)}_RemoveBehInstToPostTick(behSdkInst){this._behInstsToPostTick.Remove(behSdkInst)}_RemoveBehInstToTick2(behSdkInst){this._behInstsToTick2.Remove(behSdkInst)}_BehaviorTick(){this._behInstsToTick.SetQueueingEnabled(true);\nfor(const bi of this._behInstsToTick)bi.Tick();this._behInstsToTick.SetQueueingEnabled(false)}_BehaviorPostTick(){this._behInstsToPostTick.SetQueueingEnabled(true);for(const bi of this._behInstsToPostTick)bi.PostTick();this._behInstsToPostTick.SetQueueingEnabled(false)}_BehaviorTick2(){this._behInstsToTick2.SetQueueingEnabled(true);for(const bi of this._behInstsToTick2)bi.Tick2();this._behInstsToTick2.SetQueueingEnabled(false)}*_DebugBehaviorTick(){this._behInstsToTick.SetQueueingEnabled(true);for(const bi of this._behInstsToTick){const ret=\nbi.Tick();if(C3.IsIterator(ret))yield*ret}this._behInstsToTick.SetQueueingEnabled(false)}*_DebugBehaviorPostTick(){this._behInstsToPostTick.SetQueueingEnabled(true);for(const bi of this._behInstsToPostTick){const ret=bi.PostTick();if(C3.IsIterator(ret))yield*ret}this._behInstsToPostTick.SetQueueingEnabled(false)}*_DebugBehaviorTick2(){this._behInstsToTick2.SetQueueingEnabled(true);for(const bi of this._behInstsToTick2){const ret=bi.Tick2();if(C3.IsIterator(ret))yield*ret}this._behInstsToTick2.SetQueueingEnabled(false)}async Tick(timestamp,\nisDebugStep,mode){this._hasStartedTicking=true;const isBackgroundWake=mode===\"background-wake\";const shouldRender=mode!==\"background-wake\"&&mode!==\"skip-render\";if(!this._hasStarted||this.IsSuspended()&&!isDebugStep&&!isBackgroundWake)return;const startTime=performance.now();this._isInTick=true;this._MeasureDt(timestamp||0);const beforePreTickRet=this.Step_BeforePreTick();if(this.IsDebugging())await beforePreTickRet;const pretickRet=this._dispatcher.dispatchEventAndWait_AsyncOptional(this._eventObjects[\"pretick\"]);\nif(pretickRet instanceof Promise)await pretickRet;const afterPreTickRet=this.Step_AfterPreTick();if(this.IsDebugging())await afterPreTickRet;if(this._NeedsHandleSaveOrLoad())await this._HandleSaveOrLoad();if(this.GetLayoutManager().IsPendingChangeMainLayout())await this._MaybeChangeLayout();const runEventsRet=this.Step_RunEventsEtc();if(this.IsDebugging())await runEventsRet;if(shouldRender)this.Render();if(this.IsExportToVideo()){await this._ExportToVideoAddFrame();if(this.GetGameTime()>=this.GetExportVideoDuration()){this._ExportToVideoFinish();\nreturn}}if(!this.IsSuspended()&&!isBackgroundWake)this._RequestAnimationFrame();this._tickCount++;this._tickCountNoSave++;this._isInTick=false;this._mainThreadTimeCounter+=performance.now()-startTime}async Step_BeforePreTick(){const eventSheetManager=this._eventSheetManager;const isDebug=this.IsDebug();this.FlushPendingInstances();eventSheetManager.BlockFlushingInstances(true);this.PushCurrentLayout(this.GetMainRunningLayout());if(isDebug)C3Debugger.StartMeasuringTime();if(this.IsDebugging())await eventSheetManager.DebugRunScheduledWaits();\nelse eventSheetManager.RunScheduledWaits();if(isDebug)C3Debugger.AddEventsTime();this.PopCurrentLayout();eventSheetManager.BlockFlushingInstances(false);this.FlushPendingInstances();eventSheetManager.BlockFlushingInstances(true)}async Step_AfterPreTick(){const isDebug=this.IsDebug();const isDebugging=this.IsDebugging();const dispatcher=this._dispatcher;const eventObjects=this._eventObjects;const userScriptEventObjects=this._userScriptEventObjects;if(isDebug)C3Debugger.StartMeasuringTime();if(isDebugging)await this.DebugIterateAndBreak(this._DebugBehaviorTick());\nelse this._BehaviorTick();if(isDebugging)await this.DebugIterateAndBreak(this._DebugBehaviorPostTick());else this._BehaviorPostTick();if(isDebug)C3Debugger.AddBehaviorTickTime();if(isDebug)C3Debugger.StartMeasuringTime();if(isDebugging)await this.DebugFireGeneratorEventAndBreak(eventObjects[\"tick\"]);else dispatcher.dispatchEvent(eventObjects[\"tick\"]);if(isDebug)C3Debugger.AddPluginTickTime();this._eventSheetManager.BlockFlushingInstances(false);this.DispatchUserScriptEvent(userScriptEventObjects[\"tick\"])}async Step_RunEventsEtc(){const eventSheetManager=\nthis._eventSheetManager;const dispatcher=this._dispatcher;const eventObjects=this._eventObjects;const isDebug=this.IsDebug();const isDebugging=this.IsDebugging();if(isDebug)C3Debugger.StartMeasuringTime();if(isDebugging)await eventSheetManager.DebugRunEvents(this._layoutManager);else eventSheetManager.RunEvents(this._layoutManager);if(isDebug)C3Debugger.AddEventsTime();this._collisionEngine.ClearRegisteredCollisions();this._ReleaseInstancesAtEndOfTick();this._isLayoutFirstTick=false;eventSheetManager.BlockFlushingInstances(true);\nif(isDebug)C3Debugger.StartMeasuringTime();if(isDebugging)await this.DebugIterateAndBreak(this._DebugBehaviorTick2());else this._BehaviorTick2();if(isDebug)C3Debugger.AddBehaviorTickTime();if(isDebug)C3Debugger.StartMeasuringTime();if(isDebugging)await this.DebugFireGeneratorEventAndBreak(eventObjects[\"tick2\"]);else dispatcher.dispatchEvent(eventObjects[\"tick2\"]);if(isDebug)C3Debugger.AddPluginTickTime();eventSheetManager.BlockFlushingInstances(false);if(isDebugging)await eventSheetManager.RunQueuedDebugTriggersAsync()}_ReleaseInstancesAtEndOfTick(){if(this._instancesToReleaseAtEndOfTick.size===\n0)return;const dispatcher=this._dispatcher;dispatcher.SetDelayRemoveEventsEnabled(true);for(const objectClass of this._instancesToReleaseAffectedObjectClasses)objectClass.GetSolStack().RemoveInstances(this._instancesToReleaseAtEndOfTick);this._instancesToReleaseAffectedObjectClasses.clear();this._eventSheetManager.RemoveInstancesFromScheduledWaits(this._instancesToReleaseAtEndOfTick);for(const inst of this._instancesToReleaseAtEndOfTick)inst.Release();this._instancesToReleaseAtEndOfTick.clear();dispatcher.SetDelayRemoveEventsEnabled(false)}async _MaybeChangeLayout(){const layoutManager=\nthis.GetLayoutManager();let i=0;while(layoutManager.IsPendingChangeMainLayout()&&i++<10)await this._DoChangeLayout(layoutManager.GetPendingChangeMainLayout())}_MeasureDt(timestamp){let dtRaw=0;if(this.IsExportToVideo()){dtRaw=1/this.GetExportVideoFramerate();this._dtRaw=dtRaw;this._dt1=dtRaw}else if(this._lastTickTime!==0){const msDiff=Math.max(timestamp-this._lastTickTime,0);dtRaw=msDiff/1E3;if(dtRaw>.5)dtRaw=0;this._dtRaw=dtRaw;const maxDt1=1/this._minimumFramerate;this._dt1=Math.min(dtRaw,maxDt1)}this._lastTickTime=\ntimestamp;this._dt=this._dt1*this._timeScale;this._gameTime.Add(this._dt);this._gameTimeRaw.Add(dtRaw*this._timeScale);this._wallTime.Add(this._dt1);for(const [inst,instTime]of this._instanceTimes)instTime.Add(this._dt1*inst.GetTimeScale());if(this._canvasManager)this._canvasManager._UpdateTick();if(timestamp-this._fpsLastTime>=1E3){this._fpsLastTime+=1E3;if(timestamp-this._fpsLastTime>=1E3)this._fpsLastTime=timestamp;this._fps=this._fpsFrameCount;this._fpsFrameCount=0;this._mainThreadTime=Math.min(this._mainThreadTimeCounter/\n1E3,1);this._mainThreadTimeCounter=0;if(this._canvasManager)this._canvasManager._Update1sFrameRange();this._collisionEngine._Update1sStats();if(this.IsDebug())C3Debugger.Update1sPerfStats()}this._fpsFrameCount++}_SetTrackingInstanceTime(inst,enable){if(enable){if(!this._instanceTimes.has(inst)){const instTime=C3.New(C3.KahanSum);instTime.Copy(this._gameTime);this._instanceTimes.set(inst,instTime)}}else this._instanceTimes.delete(inst)}_GetInstanceGameTime(inst){const instTime=this._instanceTimes.get(inst);\nreturn instTime?instTime.Get():this.GetGameTime()}async _DoChangeLayout(changeToLayout){const dispatcher=this._dispatcher;const layoutManager=this.GetLayoutManager();const prevLayout=layoutManager.GetMainRunningLayout();await prevLayout._StopRunning();prevLayout._Unload(changeToLayout,this.GetRenderer());if(prevLayout===changeToLayout)this._eventSheetManager.ClearAllScheduledWaits();this._collisionEngine.ClearRegisteredCollisions();this._ReleaseInstancesAtEndOfTick();dispatcher.dispatchEvent(this._eventObjects[\"beforelayoutchange\"]);\nC3.Asyncify.SetHighThroughputMode(true);await changeToLayout._Load(prevLayout,this.GetRenderer());C3.Asyncify.SetHighThroughputMode(false);await changeToLayout._StartRunning(false);dispatcher.dispatchEvent(this._eventObjects[\"layoutchange\"]);this.UpdateRender();this._isLayoutFirstTick=true;this.FlushPendingInstances();this._ExportToVideoAddKeyframe()}UpdateRender(){this._needRender=true}GetWebGLRenderer(){if(!this._canvasManager)return null;return this._canvasManager.GetWebGLRenderer()}GetWebGPURenderer(){if(!this._canvasManager)return null;\nreturn this._canvasManager.GetWebGPURenderer()}GetRenderer(){if(!this._canvasManager)return null;return this._canvasManager.GetRenderer()}Render(){const canvasManager=this._canvasManager;if(!canvasManager||canvasManager.IsRendererContextLost())return;const renderer=this.GetRenderer();const supportsGPUProfiling=renderer.SupportsGPUProfiling();const isWebGLProfiling=supportsGPUProfiling&&renderer.IsWebGL();const isWebGPUProfiling=supportsGPUProfiling&&renderer.IsWebGPU();if(isWebGLProfiling)renderer.CheckForQueryResults();\nif(!this._needRender&&!this.IsExportToVideo()){renderer.IncrementFrameNumber();return}const layout=this._layoutManager.GetMainRunningLayout();renderer.Start();const isDebug=this.IsDebug();if(isDebug)C3Debugger.StartMeasuringTime();this._needRender=false;let webglFrameQuery=null;if(isWebGLProfiling){webglFrameQuery=canvasManager.GetGPUFrameTimingsBuffer().AddTimeElapsedQuery();renderer.StartQuery(webglFrameQuery)}let webgpuFrameTimings=null;if(isWebGPUProfiling){webgpuFrameTimings=renderer.StartFrameTiming((1+\nlayout.GetLayerCount())*2);renderer.WriteTimestamp(0)}if(this.Uses3DFeatures()&&canvasManager.GetCurrentFullscreenScalingQuality()===\"low\")renderer.SetFixedSizeDepthBuffer(canvasManager.GetDrawWidth(),canvasManager.GetDrawHeight());else renderer.SetAutoSizeDepthBuffer();this._Render(this.GetRenderer(),layout);if(webglFrameQuery)renderer.EndQuery(webglFrameQuery);if(isWebGPUProfiling){renderer.WriteTimestamp(1);this._canvasManager._AddWebGPUFrameTiming(webgpuFrameTimings)}renderer.Finish();if(isDebug){C3Debugger.AddDrawCallsTime();\nC3Debugger.UpdateInspectHighlight()}if(canvasManager)canvasManager._MaybeTakeSnapshot()}_Render(renderer,layout){renderer.SetTextureFillMode();renderer.SetAlphaBlend();renderer.SetColorRgba(1,1,1,1);renderer.SetRenderTarget(null);renderer.SetTexture(null);renderer.SetDepthEnabled(this.Uses3DFeatures());layout.Draw(renderer)}Trigger(method,inst,behaviorType){if(!this._hasStarted)return false;const isTopLevel=!this._isInTick&&!this._eventSheetManager.IsInTrigger();let startTime=0;if(isTopLevel)startTime=\nperformance.now();const isDebug=this.IsDebug();if(isDebug)this.SetDebuggingEnabled(false);const ret=this._eventSheetManager._Trigger(this._layoutManager,method,inst,behaviorType);if(isTopLevel){const triggerTime=performance.now()-startTime;this._mainThreadTimeCounter+=triggerTime;if(isDebug)C3Debugger.AddTriggersTime(triggerTime)}if(isDebug)this.SetDebuggingEnabled(true);return ret}DebugTrigger(method,inst,behaviorType){if(!this.IsDebug())return this.Trigger(method,inst,behaviorType);if(this.HitBreakpoint())throw new Error(\"called DebugTrigger() while stopped on breakpoint\");\nif(!this._isInTick&&!this._eventSheetManager.IsInTrigger())throw new Error(\"called DebugTrigger() outside of event code - use TriggerAsync() instead\");return this._eventSheetManager._DebugTrigger(this._layoutManager,method,inst,behaviorType)}async TriggerAsync(method,inst,behaviorType){if(!this.IsDebugging())return this.Trigger(method,inst,behaviorType);if(!this._hasStarted)return false;if(this.HitBreakpoint())return this._eventSheetManager.QueueDebugTrigger(method,inst,behaviorType);if(!this.GetMainRunningLayout())return this._eventSheetManager.QueueTrigger(method,\ninst,behaviorType);const startTime=performance.now();const iter=this._eventSheetManager._DebugTrigger(this._layoutManager,method,inst,behaviorType);let result=iter.next();while(!result.done){await this.DebugBreak(result.value);result=iter.next()}if(!this.IsSuspended()&&!this._eventSheetManager.IsInTrigger()){await this._eventSheetManager.RunQueuedDebugTriggersAsync();if(this._hasStartedTicking&&!this._isInTick)this._RequestAnimationFrame()}this._mainThreadTimeCounter+=performance.now()-startTime;\nreturn result.value}FastTrigger(method,inst,value){const isDebug=this.IsDebug();if(isDebug)this.SetDebuggingEnabled(false);const ret=this._eventSheetManager._FastTrigger(this._layoutManager,method,inst,value);if(isDebug)this.SetDebuggingEnabled(true);return ret}DebugFastTrigger(method,inst,value){return this._eventSheetManager._DebugFastTrigger(this._layoutManager,method,inst,value)}ScheduleTriggers(f){return this._scheduleTriggersThrottle.Add(f)}PushCurrentLayout(layout){this._currentLayoutStack.push(layout)}PopCurrentLayout(){if(!this._currentLayoutStack.length)throw new Error(\"layout stack empty\");\nthis._currentLayoutStack.pop()}GetCurrentLayout(){if(!this._currentLayoutStack.length)return this.GetMainRunningLayout();return this._currentLayoutStack.at(-1)}GetDt(inst){if(!inst||inst.GetTimeScale()===-1)return this._dt;return this._dt1*inst.GetTimeScale()}_GetDtFast(){return this._dt}GetDt1(){return this._dt1}GetDtRaw(){return this._dtRaw}GetTimeScale(){return this._timeScale}SetTimeScale(ts){if(isNaN(ts)||ts<0)ts=0;this._timeScale=ts}SetMinimumFramerate(fps){this._minimumFramerate=C3.clamp(fps,\n1,120)}GetMinimumFramerate(){return this._minimumFramerate}GetFPS(){return this._fps}GetMainThreadTime(){return this._mainThreadTime}GetStartTime(){return this._startTime}GetGameTime(){return this._gameTime.Get()}GetGameTimeRaw(){return this._gameTimeRaw.Get()}GetWallTime(){return this._wallTime.Get()}GetTickCount(){return this._tickCount}GetTickCountNoSave(){return this._tickCountNoSave}GetObjectCount(){return this._objectCount}GetProjectName(){return this._projectName}GetProjectVersion(){return this._projectVersion}GetProjectUniqueId(){return this._projectUniqueId}GetAppId(){return this._appId}GetInstanceByUID(uid){if(this._isLoadingState)throw new Error(\"cannot call while loading state - wait until afterload event\");\nreturn this._instancesByUid.get(uid)||null}_RefreshUidMap(){this._instancesByUid.clear();for(const objectClass of this._allObjectClasses){if(objectClass.IsFamily())continue;for(const inst of objectClass.GetInstances())this._instancesByUid.set(inst.GetUID(),inst)}}IsPreview(){return this._exportType===\"preview\"}IsDebug(){return this._isDebug}GetExportType(){return this._exportType}IsCordova(){return this._exportType===\"cordova\"}IsAndroidWebView(){return C3.Platform.OS===\"Android\"&&(this._exportType===\n\"cordova\"||this._exportType===\"playable-ad\"||this._exportType===\"instant-games\")}IsiOSCordova(){return this._isiOSCordova}IsiOSWebView(){return this._isiOSWebView}IsWebView2Wrapper(){return this._isWebView2Wrapper}GetCollisionEngine(){return this._collisionEngine}GetSolidBehavior(){return this._pluginManager.GetSolidBehavior()}GetJumpthruBehavior(){return this._pluginManager.GetJumpthruBehavior()}Uses3DFeatures(){return this._uses3dFeatures}GetZScaleFactor(){return this.GetRenderer().GetZAxisScaleFactor(this.GetViewportHeight())}GetDefaultCameraZ(viewH){return this.GetRenderer().GetDefaultCameraZ(viewH||\nthis.GetViewportHeight())}IsLayoutFirstTick(){return this._isLayoutFirstTick}SetPixelRoundingEnabled(e){e=!!e;if(this._isPixelRoundingEnabled===e)return;this._isPixelRoundingEnabled=e;this.GetLayoutManager().SetAllLayerMVChanged();this.UpdateRender()}IsPixelRoundingEnabled(){return this._isPixelRoundingEnabled}GetTextIconSet(iconSource){if(!this._iconChangeHandlers.has(iconSource)){const changeHandler=()=>this.DeleteTextIconSet(iconSource);this._iconChangeHandlers.set(iconSource,changeHandler);iconSource.Dispatcher().addEventListener(\"animationframeimagechange\",\nchangeHandler)}const iconSet=this._textIconManager.GetIconSet(iconSource);if(!iconSet.HasLoaded())iconSet.LoadContent().then(()=>this.UpdateRender());return iconSet}DeleteTextIconSet(iconSource){this._textIconManager.DeleteIconSet(iconSource)}_GetTextIconSetMeta(iconSource){const icons=[];for(const animation of iconSource.GetAnimations())for(const frame of animation.GetFrames()){const imageInfo=frame.GetImageInfo();icons.push({source:frame,width:imageInfo.GetWidth(),height:imageInfo.GetHeight(),tag:frame.GetTag()})}return{icons}}async _GetTextIconSetContent(iconSource){const promiseThrottle=\nC3.New(C3.PromiseThrottle);const assetDrawablePromises=[];const assetDrawableMap=new Map;for(const animation of iconSource.GetAnimations())for(const frame of animation.GetFrames()){const imageAsset=frame.GetImageInfo().GetImageAsset();if(assetDrawableMap.has(imageAsset))continue;assetDrawableMap.set(imageAsset,null);assetDrawablePromises.push(promiseThrottle.Add(async()=>{const drawable=await imageAsset.LoadToDrawable();assetDrawableMap.set(imageAsset,drawable)}))}await Promise.all(assetDrawablePromises);\nconst extractPromises=[];for(const animation of iconSource.GetAnimations())for(const frame of animation.GetFrames())extractPromises.push(promiseThrottle.Add(async()=>{const imageInfo=frame.GetImageInfo();const imageAssetDrawable=assetDrawableMap.get(imageInfo.GetImageAsset());const canvas=await imageInfo.ExtractImageToCanvas(imageAssetDrawable);const imageBitmap=await createImageBitmap(canvas);return{drawable:imageBitmap}}));const iconsArr=await Promise.all(extractPromises);for(const drawable of assetDrawableMap.values())if(drawable instanceof\nImageBitmap&&drawable[\"close\"])drawable[\"close\"]();return{icons:iconsArr}}SaveToSlot(slotName){this._saveToSlotName=slotName}LoadFromSlot(slotName){this._loadFromSlotName=slotName}LoadFromJsonString(str){this._loadFromJson=str}GetLastSaveJsonString(){return this._lastSaveJson}_NeedsHandleSaveOrLoad(){return!!(this._saveToSlotName||this._loadFromSlotName||this._loadFromJson!==null)}async _HandleSaveOrLoad(){if(this._saveToSlotName){this.FlushPendingInstances();await this._DoSaveToSlot(this._saveToSlotName);\nthis._ClearSaveOrLoad()}if(this._loadFromSlotName){await this._DoLoadFromSlot(this._loadFromSlotName);this._ClearSaveOrLoad();if(this.IsDebug())C3Debugger.StepIfPausedInDebugger()}if(this._loadFromJson!==null){this.FlushPendingInstances();try{await this._DoLoadFromJsonString(this._loadFromJson);this._lastSaveJson=this._loadFromJson;await this.TriggerAsync(C3.Plugins.System.Cnds.OnLoadComplete,null);this._lastSaveJson=\"\"}catch(err){console.error(\"[Construct] Failed to load state from JSON string: \",\nerr);await this.TriggerAsync(C3.Plugins.System.Cnds.OnLoadFailed,null)}this._ClearSaveOrLoad()}}_ClearSaveOrLoad(){this._saveToSlotName=\"\";this._loadFromSlotName=\"\";this._loadFromJson=null}_GetProjectStorage(){if(!this._projectStorage)this._projectStorage=localforage.createInstance({name:\"c3-localstorage-\"+this.GetProjectUniqueId(),description:this.GetProjectName()});return this._projectStorage}_GetSavegamesStorage(){if(!this._savegamesStorage)this._savegamesStorage=localforage.createInstance({name:\"c3-savegames-\"+\nthis.GetProjectUniqueId(),description:this.GetProjectName()});return this._savegamesStorage}async _DoSaveToSlot(slotName){const saveJson=await this._SaveToJsonString();try{await this._GetSavegamesStorage().setItem(slotName,saveJson);console.log(\"[Construct] Saved state to storage (\"+saveJson.length+\" chars)\");this._lastSaveJson=saveJson;await this.TriggerAsync(C3.Plugins.System.Cnds.OnSaveComplete,null);this._lastSaveJson=\"\"}catch(err){console.error(\"[Construct] Failed to save state to storage: \",\nerr);await this.TriggerAsync(C3.Plugins.System.Cnds.OnSaveFailed,null)}}async _DoLoadFromSlot(slotName){try{const loadJson=await this._GetSavegamesStorage().getItem(slotName);if(!loadJson)throw new Error(\"empty slot\");console.log(\"[Construct] Loaded state from storage (\"+loadJson.length+\" chars)\");await this._DoLoadFromJsonString(loadJson);this._lastSaveJson=loadJson;await this.TriggerAsync(C3.Plugins.System.Cnds.OnLoadComplete,null);this._lastSaveJson=\"\"}catch(err){console.error(\"[Construct] Failed to load state from storage: \",\nerr);await this.TriggerAsync(C3.Plugins.System.Cnds.OnLoadFailed,null)}}async _SaveToJsonString(){const o={\"c3save\":true,\"version\":1,\"rt\":{\"time\":this.GetGameTime(),\"timeRaw\":this.GetGameTimeRaw(),\"walltime\":this.GetWallTime(),\"timescale\":this.GetTimeScale(),\"tickcount\":this.GetTickCount(),\"next_uid\":this._nextUid,\"running_layout\":this.GetMainRunningLayout().GetSID(),\"start_time_offset\":Date.now()-this._startTime},\"types\":{},\"layouts\":{},\"events\":this._eventSheetManager._SaveToJson(),\"timelines\":this._timelineManager._SaveToJson(),\n\"user_script_data\":null};for(const objectClass of this._allObjectClasses){if(objectClass.IsFamily()||objectClass.HasNoSaveBehavior())continue;o[\"types\"][objectClass.GetSID().toString()]=objectClass._SaveToJson()}for(const layout of this._layoutManager.GetAllLayouts())o[\"layouts\"][layout.GetSID().toString()]=layout._SaveToJson();const saveEvent=this._CreateUserScriptEvent(\"save\");saveEvent.saveData=null;await this.DispatchUserScriptEventAsyncWait(saveEvent);o[\"user_script_data\"]=saveEvent.saveData;\nreturn JSON.stringify(o)}IsLoadingState(){return this._isLoadingState}async _DoLoadFromJsonString(jsonStr){const layoutManager=this.GetLayoutManager();const o=JSON.parse(jsonStr);if(o[\"c2save\"])throw new Error(\"C2 saves are incompatible with C3 runtime\");if(!o[\"c3save\"])throw new Error(\"not valid C3 save data\");if(o[\"version\"]>1)throw new Error(\"C3 save data from future version\");this.ClearIntancesNeedingAfterLoad();this._dispatcher.dispatchEvent(C3.New(C3.Event,\"beforeload\"));for(const inst of this.allInstances()){const objectClass=\ninst.GetObjectClass();if(objectClass.HasNoSaveBehavior())continue;inst._OnBeforeLoad()}const rt=o[\"rt\"];this._gameTime.Set(rt[\"time\"]);if(rt.hasOwnProperty(\"timeRaw\"))this._gameTimeRaw.Set(rt[\"timeRaw\"]);this._wallTime.Set(rt[\"walltime\"]);this._timeScale=rt[\"timescale\"];this._tickCount=rt[\"tickcount\"];this._startTime=Date.now()-rt[\"start_time_offset\"];const layoutSid=rt[\"running_layout\"];this._isLoadingState=true;let changedLayout=false;if(layoutSid!==this.GetMainRunningLayout().GetSID()){const changeToLayout=\nlayoutManager.GetLayoutBySID(layoutSid);if(changeToLayout){await this._DoChangeLayout(changeToLayout);changedLayout=true}else return}for(const [sidStr,data]of Object.entries(o[\"layouts\"])){const sid=parseInt(sidStr,10);const layout=layoutManager.GetLayoutBySID(sid);if(!layout)continue;layout._LoadFromJson(data)}for(const [sidStr,data]of Object.entries(o[\"types\"])){const sid=parseInt(sidStr,10);const objectClass=this.GetObjectClassBySID(sid);if(!objectClass||objectClass.IsFamily()||objectClass.HasNoSaveBehavior())continue;\nobjectClass._LoadFromJson(data)}for(const layout of this._layoutManager.GetAllLayouts())for(const layer of layout.allLayers())layer._LoadFromJsonAfterInstances();this.FlushPendingInstances();this._RefreshUidMap();this._isLoadingState=false;if(changedLayout){for(const inst of this.allInstances())inst.SetupInitialSceneGraphConnections();for(const [sidStr,data]of Object.entries(o[\"types\"])){const sid=parseInt(sidStr,10);const objectClass=this.GetObjectClassBySID(sid);if(!objectClass||objectClass.IsFamily()||\nobjectClass.HasNoSaveBehavior())continue;objectClass._SetupSceneGraphConnectionsOnChangeOfLayout(data)}}this._nextUid=rt[\"next_uid\"];this._eventSheetManager._LoadFromJson(o[\"events\"]);for(const objectClass of this._allObjectClasses){if(objectClass.IsFamily()||!objectClass.IsInContainer())continue;for(const inst of objectClass.GetInstances()){const iid=inst.GetIID();for(const otherType of objectClass.GetContainer().objectTypes()){if(otherType===objectClass)continue;const otherInstances=otherType.GetInstances();\nif(iid<0||iid>=otherInstances.length)throw new Error(\"missing sibling instance\");inst._AddSibling(otherInstances[iid])}}}this._timelineManager._LoadFromJson(o[\"timelines\"]);layoutManager.SetAllLayerProjectionChanged();layoutManager.SetAllLayerMVChanged();this._dispatcher.dispatchEvent(C3.New(C3.Event,\"afterload\"));this.DoAfterLoad();for(const [sidStr,data]of Object.entries(o[\"types\"])){const sid=parseInt(sidStr,10);const objectClass=this.GetObjectClassBySID(sid);if(objectClass)objectClass._ClearLoadInstancesJson()}const loadEvent=\nthis._CreateUserScriptEvent(\"load\");loadEvent.saveData=o[\"user_script_data\"];await this.DispatchUserScriptEventAsyncWait(loadEvent);this.UpdateRender()}SortOnTmpHierarchyPosition(f,s){return f.GetWorldInfo().GetTmpHierarchyPosition()-s.GetWorldInfo().GetTmpHierarchyPosition()}AddInstanceNeedingAfterLoad(inst,data){if(!inst.GetWorldInfo())return;this._instancesNeedingAfterLoadMap.set(inst,data);this._instancesNeedingAfterLoadArray.push(inst)}ClearIntancesNeedingAfterLoad(){this._instancesNeedingAfterLoadMap=\nnew WeakMap;C3.clearArray(this._instancesNeedingAfterLoadArray)}DoAfterLoad(mode=\"full\",opts=null){this._instancesNeedingAfterLoadArray.sort(this.SortOnTmpHierarchyPosition);for(const wi of this._instancesNeedingAfterLoadArray)wi._OnAfterLoad(this._instancesNeedingAfterLoadMap.get(wi),mode,opts);for(const wi of this._instancesNeedingAfterLoadArray)wi._OnAfterLoad2(this._instancesNeedingAfterLoadMap.get(wi),mode,opts);this.ClearIntancesNeedingAfterLoad()}async AddJobWorkerScripts(scripts){const loadUrls=\nawait Promise.all(scripts.map(async url=>{const isCrossOrigin=C3.IsAbsoluteURL(url)&&(new URL(url)).origin!==location.origin;const isCordovaFileProtocol=this.IsCordova()&&this._assetManager.IsFileProtocol();if(isCrossOrigin||isCordovaFileProtocol||this.IsPreview()||this.GetExportType()===\"playable-ad\"){const blob=await this._assetManager.FetchBlob(url);return URL.createObjectURL(blob)}else if(C3.IsRelativeURL(url))return(new URL(url,this._runtimeBaseUrl)).toString();else return url}));this._jobScheduler.ImportScriptsToJobWorkers(loadUrls)}AddJobWorkerBlob(blob,\nid){this._jobScheduler.SendBlobToJobWorkers(blob,id)}AddJobWorkerBuffer(buffer,id){this._jobScheduler.SendBufferToJobWorkers(buffer,id)}AddJob(type,params,transferables,maxWorkerNum){return this._jobScheduler.AddJob(type,params,transferables,null,null,maxWorkerNum)}BroadcastJob(type,params,transferables,maxWorkerNum){return this._jobScheduler.BroadcastJob(type,params,transferables,maxWorkerNum)}GetMaxNumJobWorkers(){return this._jobScheduler.GetMaxNumWorkers()}InvokeDownload(url,filename){this.PostComponentMessageToDOM(\"runtime\",\n\"invoke-download\",{\"url\":url,\"filename\":filename})}async RasterSvgImage(blob,imageWidth,imageHeight,surfaceWidth,surfaceHeight,imageBitmapOpts){surfaceWidth=surfaceWidth||imageWidth;surfaceHeight=surfaceHeight||imageHeight;if(this.IsInWorker()){const result=await this.PostComponentMessageToDOMAsync(\"runtime\",\"raster-svg-image\",{\"blob\":blob,\"imageWidth\":imageWidth,\"imageHeight\":imageHeight,\"surfaceWidth\":surfaceWidth,\"surfaceHeight\":surfaceHeight,\"imageBitmapOpts\":imageBitmapOpts});return result[\"imageBitmap\"]}else{const canvas=\nawait self[\"C3_RasterSvgImageBlob\"](blob,imageWidth,imageHeight,surfaceWidth,surfaceHeight);if(imageBitmapOpts)return await self.createImageBitmap(canvas,imageBitmapOpts);else return canvas}}async GetSvgImageSize(blob){if(this.IsInWorker())return await this.PostComponentMessageToDOMAsync(\"runtime\",\"get-svg-image-size\",{\"blob\":blob});else return await self[\"C3_GetSvgImageSize\"](blob)}RequestDeviceOrientationEvent(){if(this._didRequestDeviceOrientationEvent)return;this._didRequestDeviceOrientationEvent=\ntrue;this.PostComponentMessageToDOM(\"runtime\",\"enable-device-orientation\")}RequestDeviceMotionEvent(){if(this._didRequestDeviceMotionEvent)return;this._didRequestDeviceMotionEvent=true;this.PostComponentMessageToDOM(\"runtime\",\"enable-device-motion\")}Random(){return this._randomNumberCallback()}SetRandomNumberGeneratorCallback(f){this._randomNumberCallback=f}_GetRemotePreviewStatusInfo(){const renderer=this.GetRenderer();return{\"fps\":this.GetFPS(),\"cpu\":this.GetMainThreadTime(),\"gpu\":this.GetGPUUtilisation(),\n\"layout\":this.GetMainRunningLayout()?this.GetMainRunningLayout().GetName():\"\",\"renderer\":renderer.IsWebGL()?renderer.GetUnmaskedRenderer():renderer.GetBasicAdapterInfoString()}}HitBreakpoint(){if(!this.IsDebug())return false;return C3Debugger.HitBreakpoint()}DebugBreak(eventObject){if(!this.IsDebugging())return Promise.resolve();return C3Debugger.DebugBreak(eventObject)}DebugBreakNext(){if(!this.IsDebugging())return false;return C3Debugger.BreakNext()}SetDebugBreakpointsEnabled(e){this._breakpointsEnabled=\n!!e;this._UpdateDebuggingFlag()}AreDebugBreakpointsEnabled(){return this._breakpointsEnabled}IsDebugging(){return this._isDebugging}SetDebuggingEnabled(d){if(d)this._debuggingDisabled--;else this._debuggingDisabled++;this._UpdateDebuggingFlag()}_UpdateDebuggingFlag(){this._isDebugging=this.IsDebug()&&this._breakpointsEnabled&&this._debuggingDisabled===0}IsCPUProfiling(){return this.IsDebug()&&C3Debugger.IsCPUProfiling()}IsGPUProfiling(){return this.IsDebug()&&this.GetRenderer().SupportsGPUProfiling()&&\nC3Debugger.IsGPUProfiling()}async DebugIterateAndBreak(iter){if(!iter)return;for(const breakEventObject of iter)await this.DebugBreak(breakEventObject)}DebugFireGeneratorEventAndBreak(event){return this.DebugIterateAndBreak(this._dispatcher.dispatchGeneratorEvent(event))}_InvokeFunctionFromJS(e){return this._eventSheetManager._InvokeFunctionFromJS(e[\"name\"],e[\"params\"])}GetIRuntime(){return this._iRuntime}_CreateUserScriptEvent(name){const e=C3.New(C3.Event,name,false);e.runtime=this._iRuntime;return e}_InitScriptInterfaces(){const objectDescriptors=\n{};for(const objectClass of this._allObjectClasses)objectDescriptors[objectClass.GetJsPropName()]={value:objectClass.GetIObjectClass(),enumerable:true,writable:false};const objects=Object.create(Object.prototype,objectDescriptors);this._iRuntime=new self.IRuntime(this,objects);this._userScriptEventObjects={\"tick\":this._CreateUserScriptEvent(\"tick\")}}_InitGlobalVariableScriptInterface(){const globalVarDescriptors={};for(const globalVar of this.GetEventSheetManager().GetAllGlobalVariables())globalVarDescriptors[globalVar.GetJsPropName()]=\nglobalVar._GetScriptInterfaceDescriptor();this._iRuntime._InitGlobalVars(globalVarDescriptors)}_GetCommonScriptInterfaces(){return this._commonScriptInterfaces}_MapScriptInterface(interface_,class_){this._interfaceMap.set(interface_,class_)}_UnwrapScriptInterface(interface_){return this._interfaceMap.get(interface_)}_UnwrapIObjectClass(iObjectClass){if(!(iObjectClass instanceof self.IObjectClass))throw new TypeError(\"expected IObjectClass\");const objectClass=this._UnwrapScriptInterface(iObjectClass);\nif(!objectClass||!(objectClass instanceof C3.ObjectClass))throw new Error(\"invalid IObjectClass\");return objectClass}_UnwrapIWorldInstance(iinst){if(!(iinst instanceof self.IWorldInstance))throw new TypeError(\"expected IWorldInstance\");const inst=this._UnwrapScriptInterface(iinst);if(!inst||!(inst instanceof C3.Instance))throw new Error(\"invalid IInstance\");return inst}};self[\"C3_CreateRuntime\"]=C3.Runtime.Create;self[\"C3_InitRuntime\"]=(runtime,opts)=>runtime.Init(opts);\n\n}\n\n// workers/jobSchedulerRuntime.js\n{\n'use strict';const C3=self.C3;\nC3.JobSchedulerRuntime=class JobSchedulerRuntime extends C3.DefendedBase{constructor(runtime,data){super();this._runtime=runtime;this._jobPromises=new Map;this._nextJobId=0;this._inputPort=data[\"inputPort\"];data[\"outputPort\"].onmessage=e=>this._OnJobWorkerMessage(e);this._maxNumWorkers=data[\"maxNumWorkers\"];this._jobWorkerCount=1;this._isCreatingWorker=false;this._hadErrorCreatingWorker=false}async Init(){}GetMaxNumWorkers(){return this._maxNumWorkers}ImportScriptsToJobWorkers(scripts){this._inputPort.postMessage({\"type\":\"_import_scripts\",\"scripts\":scripts})}SendBlobToJobWorkers(blob,\nid){this._inputPort.postMessage({\"type\":\"_send_blob\",\"blob\":blob,\"id\":id})}SendBufferToJobWorkers(buffer,id){this._inputPort.postMessage({\"type\":\"_send_buffer\",\"buffer\":buffer,\"id\":id},[buffer])}AddJob(type,params,transferables,progressHandler,abortDisposable,maxWorkerNum){if(!transferables)transferables=[];if(typeof maxWorkerNum===\"number\"){maxWorkerNum=Math.floor(maxWorkerNum);if(maxWorkerNum<=0)throw new Error(\"invalid maxWorkerNum\");}const jobId=this._nextJobId++;const job={\"type\":type,\"isBroadcast\":false,\n\"maxWorkerNum\":maxWorkerNum,\"jobId\":jobId,\"params\":params,\"transferables\":transferables};const promise=new Promise((resolve,reject)=>{this._jobPromises.set(jobId,{resolve:resolve,progress:progressHandler,reject:reject,cancelled:false,maxWorkerNum})});if(abortDisposable)abortDisposable.SetAction(()=>this._CancelJob(jobId));this._inputPort.postMessage(job,transferables);this._MaybeCreateExtraWorker();return promise}BroadcastJob(type,params,transferables,maxWorkerNum){if(!transferables)transferables=\n[];if(typeof maxWorkerNum===\"number\"){maxWorkerNum=Math.floor(maxWorkerNum);if(maxWorkerNum<=0)throw new Error(\"invalid maxWorkerNum\");}const jobId=this._nextJobId++;const job={\"type\":type,\"isBroadcast\":true,\"maxWorkerNum\":maxWorkerNum,\"jobId\":jobId,\"params\":params,\"transferables\":transferables};this._inputPort.postMessage(job,transferables)}_CancelJob(jobId){const job=this._jobPromises.get(jobId);if(job){job.cancelled=true;job.resolve=null;job.progress=null;job.reject=null;this._inputPort.postMessage({\"type\":\"_cancel\",\n\"jobId\":jobId})}}_OnJobWorkerMessage(e){const msg=e.data;const type=msg[\"type\"];const id=msg[\"jobId\"];switch(type){case \"result\":this._OnJobResult(id,msg[\"result\"]);break;case \"progress\":this._OnJobProgress(id,msg[\"progress\"]);break;case \"error\":this._OnJobError(id,msg[\"error\"]);break;case \"ready\":this._OnJobWorkerReady();break;default:throw new Error(`unknown message from worker '${type}'`);}}_OnJobResult(jobId,result){const p=this._jobPromises.get(jobId);if(!p)throw new Error(\"invalid job ID\");\nif(!p.cancelled)p.resolve(result);this._jobPromises.delete(jobId)}_OnJobProgress(jobId,progress){const p=this._jobPromises.get(jobId);if(!p)throw new Error(\"invalid job ID\");if(!p.cancelled&&p.progress)p.progress(progress)}_OnJobError(jobId,error){const p=this._jobPromises.get(jobId);if(!p)throw new Error(\"invalid job ID\");if(!p.cancelled)p.reject(error);this._jobPromises.delete(jobId)}_OnJobWorkerReady(){if(!this._isCreatingWorker)return;this._isCreatingWorker=false;this._jobWorkerCount++;if(this._jobWorkerCount<\nthis._maxNumWorkers)this._MaybeCreateExtraWorker();else this._inputPort.postMessage({\"type\":\"_no_more_workers\"})}_GetWorkerCountNeededForPendingJobs(){let needWorkerCount=0;const sortedJobList=[...this._jobPromises.values()].sort((a,b)=>{const an=a.maxWorkerNum||Infinity;const bn=b.maxWorkerNum||Infinity;return an-bn});for(const job of sortedJobList){const maxWorkerNum=job.maxWorkerNum||Infinity;if(needWorkerCount<maxWorkerNum)needWorkerCount++}return needWorkerCount}async _MaybeCreateExtraWorker(){if(this._jobWorkerCount>=\nthis._maxNumWorkers||this._isCreatingWorker||this._hadErrorCreatingWorker||this._GetWorkerCountNeededForPendingJobs()<=this._jobWorkerCount)return;try{this._isCreatingWorker=true;const result=await this._runtime.PostComponentMessageToDOMAsync(\"runtime\",\"create-job-worker\");result[\"outputPort\"].onmessage=e=>this._OnJobWorkerMessage(e)}catch(err){this._hadErrorCreatingWorker=true;this._isCreatingWorker=false;console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this._jobWorkerCount} so far)`,\nerr)}}};\n\n}\n\n{\nself[\"C3_Shaders\"] = {};\nself[\"C3_Shaders\"][\"grayscale\"] = {\n\tglsl: \"varying mediump vec2 vTex;\\nuniform lowp sampler2D samplerFront;\\nuniform lowp float intensity;\\nvoid main(void)\\n{\\nlowp vec4 front = texture2D(samplerFront, vTex);\\nlowp float gray = front.r * 0.299 + front.g * 0.587 + front.b * 0.114;\\ngl_FragColor = mix(front, vec4(gray, gray, gray, front.a), intensity);\\n}\",\n\tglslWebGL2: \"\",\n\twgsl: \"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\\nstruct ShaderParams {\\nintensity : f32\\n};\\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\\n%%C3_UTILITY_FUNCTIONS%%\\n%%FRAGMENTINPUT_STRUCT%%\\n%%FRAGMENTOUTPUT_STRUCT%%\\n@fragment\\nfn main(input : FragmentInput) -> FragmentOutput\\n{\\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\\nvar gray : f32 = c3_grayscale(front.rgb);\\nvar output : FragmentOutput;\\noutput.color = mix(front, vec4<f32>(gray, gray, gray, front.a), shaderParams.intensity);\\nreturn output;\\n}\",\n\tblendsBackground: false,\n\tusesDepth: false,\n\textendBoxHorizontal: 0,\n\textendBoxVertical: 0,\n\tcrossSampling: false,\n\tmustPreDraw: false,\n\tpreservesOpaqueness: true,\n\tanimated: false,\n\tparameters: [[\"intensity\",0,\"percent\"]]\n};\nself[\"C3_Shaders\"][\"contrast\"] = {\n\tglsl: \"varying mediump vec2 vTex;\\nuniform lowp sampler2D samplerFront;\\nuniform lowp float contrast;\\nvoid main(void)\\n{\\nlowp vec4 front = texture2D(samplerFront, vTex);\\nlowp float a = front.a;\\nif (a != 0.0)\\nfront.rgb /= front.a;\\nfront.rgb = (front.rgb - vec3(0.5)) * contrast + vec3(0.5);\\nfront.rgb *= a;\\ngl_FragColor = front;\\n}\",\n\tglslWebGL2: \"\",\n\twgsl: \"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\\nstruct ShaderParams {\\ncontrast : f32\\n};\\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\\n%%C3_UTILITY_FUNCTIONS%%\\n%%FRAGMENTINPUT_STRUCT%%\\n%%FRAGMENTOUTPUT_STRUCT%%\\n@fragment\\nfn main(input : FragmentInput) -> FragmentOutput\\n{\\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\\nvar output : FragmentOutput;\\noutput.color = vec4<f32>(\\n((front.rgb - vec3<f32>(0.5)) * shaderParams.contrast + vec3<f32>(0.5)) * front.a,\\nfront.a);\\nreturn output;\\n}\",\n\tblendsBackground: false,\n\tusesDepth: false,\n\textendBoxHorizontal: 0,\n\textendBoxVertical: 0,\n\tcrossSampling: false,\n\tmustPreDraw: false,\n\tpreservesOpaqueness: true,\n\tanimated: false,\n\tparameters: [[\"contrast\",0,\"percent\"]]\n};\nself[\"C3_Shaders\"][\"noise\"] = {\n\tglsl: \"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n#define highmedp highp\\n#else\\n#define highmedp mediump\\n#endif\\nvarying mediump vec2 vTex;\\nuniform lowp sampler2D samplerFront;\\nuniform highmedp float seconds;\\nuniform lowp float intensity;\\nuniform lowp float noiseColor;\\nvoid main(void)\\n{\\nlowp vec4 front = texture2D(samplerFront, vTex);\\nlowp float a = front.a;\\nif (a != 0.0)\\nfront.rgb /= a;\\nhighmedp float seconds_mod = mod(seconds, 10.0);\\nmediump vec3 noise = vec3(fract(sin(dot(vTex.xy, vec2(12.9898,78.233)) + seconds_mod) * 43758.5453),\\nfract(sin(dot(vTex.yx, vec2(12.9898,-78.233)) + seconds_mod) * 43758.5453),\\nfract(sin(dot(vTex.xy, vec2(-12.9898,-78.233)) + seconds_mod) * 43758.5453));\\nnoise = mix(vec3(noise.r), noise, noiseColor);\\nfront.rgb += (noise * intensity) - (intensity / 2.0);\\nfront.rgb *= a;\\ngl_FragColor = front;\\n}\",\n\tglslWebGL2: \"\",\n\twgsl: \"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\\nstruct ShaderParams {\\nintensity : f32,\\nnoiseColor : f32\\n};\\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\\n%%C3PARAMS_STRUCT%%\\n%%C3_UTILITY_FUNCTIONS%%\\n%%FRAGMENTINPUT_STRUCT%%\\n%%FRAGMENTOUTPUT_STRUCT%%\\n@fragment\\nfn main(input : FragmentInput) -> FragmentOutput\\n{\\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\\nvar seconds_mod : f32 = c3Params.seconds % 10.0;\\nvar noise : vec3<f32> = vec3<f32>(\\nfract(sin(dot(input.fragUV.xy, vec2<f32>(12.9898,78.233)) + seconds_mod) * 43758.5453),\\nfract(sin(dot(input.fragUV.yx, vec2<f32>(12.9898,-78.233)) + seconds_mod) * 43758.5453),\\nfract(sin(dot(input.fragUV.xy, vec2<f32>(-12.9898,-78.233)) + seconds_mod) * 43758.5453));\\nnoise = mix(vec3<f32>(noise.r), noise, shaderParams.noiseColor);\\nvar output : FragmentOutput;\\noutput.color = vec4<f32>((front.rgb + ((noise * shaderParams.intensity) - (shaderParams.intensity / 2.0))) * front.a, front.a);\\nreturn output;\\n}\",\n\tblendsBackground: false,\n\tusesDepth: false,\n\textendBoxHorizontal: 0,\n\textendBoxVertical: 0,\n\tcrossSampling: false,\n\tmustPreDraw: false,\n\tpreservesOpaqueness: true,\n\tanimated: true,\n\tparameters: [[\"intensity\",0,\"percent\"],[\"noiseColor\",0,\"percent\"]]\n};\nself[\"C3_Shaders\"][\"brightness\"] = {\n\tglsl: \"varying mediump vec2 vTex;\\nuniform lowp sampler2D samplerFront;\\nuniform lowp float brightness;\\nvoid main(void)\\n{\\nlowp vec4 front = texture2D(samplerFront, vTex);\\nlowp float a = front.a;\\nif (a != 0.0)\\nfront.rgb /= front.a;\\nfront.rgb += (brightness - 1.0);\\nfront.rgb *= a;\\ngl_FragColor = front;\\n}\",\n\tglslWebGL2: \"\",\n\twgsl: \"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\\nstruct ShaderParams {\\nbrightness : f32\\n};\\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\\n%%C3_UTILITY_FUNCTIONS%%\\n%%FRAGMENTINPUT_STRUCT%%\\n%%FRAGMENTOUTPUT_STRUCT%%\\n@fragment\\nfn main(input : FragmentInput) -> FragmentOutput\\n{\\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\\nvar output : FragmentOutput;\\noutput.color = vec4<f32>((front.rgb + (shaderParams.brightness - 1.0)) * front.a, front.a);\\nreturn output;\\n}\",\n\tblendsBackground: false,\n\tusesDepth: false,\n\textendBoxHorizontal: 0,\n\textendBoxVertical: 0,\n\tcrossSampling: false,\n\tmustPreDraw: false,\n\tpreservesOpaqueness: true,\n\tanimated: false,\n\tparameters: [[\"brightness\",0,\"percent\"]]\n};\nself[\"C3_Shaders\"][\"vibrance\"] = {\n\tglsl: \"varying mediump vec2 vTex;\\nuniform lowp sampler2D samplerFront;\\nuniform lowp float vibrance;\\nvoid main(void)\\n{\\nlowp vec4 front = texture2D(samplerFront, vTex);\\nlowp float average = front.r / 3.0 + front.g / 3.0 + front.b / 3.0;\\nlowp float max_ = max(front.r, max(front.g, front.b));\\nlowp float amount = (max_ - average) * (vibrance * -3.0);\\nfront.rgb = mix(front.rgb, vec3(max_), amount);\\ngl_FragColor = front;\\n}\",\n\tglslWebGL2: \"\",\n\twgsl: \"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\\nstruct ShaderParams {\\nvibrance : f32\\n};\\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\\n%%FRAGMENTINPUT_STRUCT%%\\n%%FRAGMENTOUTPUT_STRUCT%%\\n@fragment\\nfn main(input : FragmentInput) -> FragmentOutput\\n{\\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\\nvar average : f32 = (front.r + front.g + front.b) / 3.0;\\nvar max_ : f32 = max(front.r, max(front.g, front.b));\\nvar amount = (max_ - average) * (shaderParams.vibrance * -3.0);\\nvar output : FragmentOutput;\\noutput.color = vec4<f32>(mix(front.rgb, vec3<f32>(max_), amount), front.a);\\nreturn output;\\n}\",\n\tblendsBackground: false,\n\tusesDepth: false,\n\textendBoxHorizontal: 0,\n\textendBoxVertical: 0,\n\tcrossSampling: false,\n\tmustPreDraw: false,\n\tpreservesOpaqueness: true,\n\tanimated: false,\n\tparameters: [[\"vibrance\",0,\"percent\"]]\n};\nself[\"C3_Shaders\"][\"hsladjust\"] = {\n\tglsl: \"varying mediump vec2 vTex;\\nuniform lowp sampler2D samplerFront;\\nprecision mediump float;\\nuniform float huerotate;\\nuniform float satadjust;\\nuniform float lumadjust;\\nvec3 rgb_to_hsl(vec3 color)\\n{\\nvec3 hsl = vec3(0.0, 0.0, 0.0);\\nfloat fmin = min(min(color.r, color.g), color.b);\\nfloat fmax = max(max(color.r, color.g), color.b);\\nfloat delta = fmax - fmin;\\nhsl.z = (fmax + fmin) / 2.0;\\nif (delta == 0.0)\\n{\\nhsl.x = 0.0;\\nhsl.y = 0.0;\\n}\\nelse\\n{\\nif (hsl.z < 0.5)\\nhsl.y = delta / (fmax + fmin);\\nelse\\nhsl.y = delta / (2.0 - fmax - fmin);\\nfloat dR = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\\nfloat dG = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\\nfloat dB = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\\nif (color.r == fmax)\\nhsl.x = dB - dG;\\nelse if (color.g == fmax)\\nhsl.x = (1.0 / 3.0) + dR - dB;\\nelse if (color.b == fmax)\\nhsl.x = (2.0 / 3.0) + dG - dR;\\nif (hsl.x < 0.0)\\nhsl.x += 1.0;\\nelse if (hsl.x > 1.0)\\nhsl.x -= 1.0;\\n}\\nreturn hsl;\\n}\\nfloat hue_to_rgb(float f1, float f2, float hue)\\n{\\nif (hue < 0.0)\\nhue += 1.0;\\nelse if (hue > 1.0)\\nhue -= 1.0;\\nfloat ret;\\nif ((6.0 * hue) < 1.0)\\nret = f1 + (f2 - f1) * 6.0 * hue;\\nelse if ((2.0 * hue) < 1.0)\\nret = f2;\\nelse if ((3.0 * hue) < 2.0)\\nret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\\nelse\\nret = f1;\\nreturn ret;\\n}\\nvec3 hsl_to_rgb(vec3 hsl)\\n{\\nvec3 rgb = vec3(hsl.z);\\nif (hsl.y != 0.0)\\n{\\nfloat f2;\\nif (hsl.z < 0.5)\\nf2 = hsl.z * (1.0 + hsl.y);\\nelse\\nf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\\nfloat f1 = 2.0 * hsl.z - f2;\\nrgb.r = hue_to_rgb(f1, f2, hsl.x + (1.0 / 3.0));\\nrgb.g = hue_to_rgb(f1, f2, hsl.x);\\nrgb.b = hue_to_rgb(f1, f2, hsl.x - (1.0 / 3.0));\\n}\\nreturn rgb;\\n}\\nvoid main(void)\\n{\\nvec4 front = texture2D(samplerFront, vTex);\\nvec3 rgb = rgb_to_hsl(front.rgb) + vec3((huerotate > 0.5 ? huerotate - 1.0 : huerotate), 0, (lumadjust - 1.0) * front.a);\\nrgb.y *= satadjust;\\nrgb = hsl_to_rgb(rgb);\\ngl_FragColor = vec4(rgb, front.a);\\n}\",\n\tglslWebGL2: \"\",\n\twgsl: \"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\\nstruct ShaderParams {\\nhuerotate : f32,\\nsatadjust : f32,\\nlumadjust : f32\\n};\\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\\n%%C3_UTILITY_FUNCTIONS%%\\n%%FRAGMENTINPUT_STRUCT%%\\n%%FRAGMENTOUTPUT_STRUCT%%\\n@fragment\\nfn main(input : FragmentInput) -> FragmentOutput\\n{\\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\\nvar huerotate : f32 = shaderParams.huerotate;\\nif (huerotate > 0.5)\\n{\\nhuerotate = huerotate - 1.0;\\n}\\nvar rgb : vec3<f32> = c3_RGBtoHSL(front.rgb) + vec3<f32>(huerotate, 0.0, (shaderParams.lumadjust - 1.0) * front.a);\\nrgb.y = rgb.y * shaderParams.satadjust;\\nrgb = c3_HSLtoRGB(rgb);\\nvar output : FragmentOutput;\\noutput.color = vec4<f32>(rgb, front.a);\\nreturn output;\\n}\",\n\tblendsBackground: false,\n\tusesDepth: false,\n\textendBoxHorizontal: 0,\n\textendBoxVertical: 0,\n\tcrossSampling: false,\n\tmustPreDraw: false,\n\tpreservesOpaqueness: true,\n\tanimated: false,\n\tparameters: [[\"huerotate\",0,\"percent\"],[\"satadjust\",0,\"percent\"],[\"lumadjust\",0,\"percent\"]]\n};\nself[\"C3_Shaders\"][\"bulge\"] = {\n\tglsl: \"varying mediump vec2 vTex;\\nuniform lowp sampler2D samplerFront;\\nuniform mediump vec2 srcOriginStart;\\nuniform mediump vec2 srcOriginEnd;\\nuniform mediump float radius;\\nuniform mediump float scale;\\nvoid main(void)\\n{\\nmediump vec2 srcOriginSize = srcOriginEnd - srcOriginStart;\\nmediump vec2 tex = (vTex - srcOriginStart) / srcOriginSize;\\nmediump float dist = distance(vec2(0.5, 0.5), tex);\\ntex -= vec2(0.5, 0.5);\\nif (dist < radius)\\n{\\nmediump float percent = 1.0 - ((radius - dist) / radius) * scale;\\npercent = percent * percent;\\ntex = tex * percent;\\n}\\ntex += vec2(0.5, 0.5);\\ntex = clamp(tex, 0.0, 1.0);\\t\\t\\t// ensure no sampling outside source rect\\ntex = (tex * srcOriginSize) + srcOriginStart;\\t// convert back relative to source rect\\ngl_FragColor = texture2D(samplerFront, tex);\\n}\",\n\tglslWebGL2: \"\",\n\twgsl: \"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\\nstruct ShaderParams {\\nradius : f32,\\nscale : f32\\n};\\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\\n%%C3PARAMS_STRUCT%%\\n%%C3_UTILITY_FUNCTIONS%%\\n%%FRAGMENTINPUT_STRUCT%%\\n%%FRAGMENTOUTPUT_STRUCT%%\\n@fragment\\nfn main(input : FragmentInput) -> FragmentOutput\\n{\\nvar tex : vec2<f32> = c3_srcOriginToNorm(input.fragUV);\\nvar dist : f32 = distance(vec2<f32>(0.5, 0.5), tex);\\ntex = tex - 0.5;\\nif (dist < shaderParams.radius)\\n{\\nvar percent : f32 = 1.0 - ((shaderParams.radius - dist) / shaderParams.radius) * shaderParams.scale;\\npercent = percent * percent;\\ntex = tex * percent;\\n}\\ntex = tex + 0.5;\\ntex = c3_clamp2(tex, 0.0, 1.0);\\t\\t// ensure no sampling outside source rect\\ntex = c3_normToSrcOrigin(tex);\\t\\t// convert back relative to source rect\\nvar output : FragmentOutput;\\noutput.color = textureSample(textureFront, samplerFront, tex);\\nreturn output;\\n}\",\n\tblendsBackground: false,\n\tusesDepth: false,\n\textendBoxHorizontal: 0,\n\textendBoxVertical: 0,\n\tcrossSampling: false,\n\tmustPreDraw: false,\n\tpreservesOpaqueness: false,\n\tanimated: false,\n\tparameters: [[\"radius\",0,\"percent\"],[\"scale\",0,\"percent\"]]\n};\nself[\"C3_Shaders\"][\"pixellate\"] = {\n\tglsl: \"varying mediump vec2 vTex;\\nuniform lowp sampler2D samplerFront;\\nuniform mediump vec2 srcOriginStart;\\nuniform mediump vec2 srcOriginEnd;\\nuniform mediump vec2 pixelSize;\\nuniform mediump float tilesize;\\nvoid main(void)\\n{\\nmediump vec2 tile = pixelSize * tilesize;\\nmediump vec2 halftile = tile / 2.0;\\nmediump vec2 tex = floor(vTex / tile) * tile + halftile;\\ntex = clamp(tex, min(srcOriginStart, srcOriginEnd), max(srcOriginStart, srcOriginEnd));\\ngl_FragColor = texture2D(samplerFront, tex);\\n}\",\n\tglslWebGL2: \"#version 300 es\\nin mediump vec2 vTex;\\nuniform lowp sampler2D samplerFront;\\nout lowp vec4 outColor;\\nuniform mediump vec2 srcOriginStart;\\nuniform mediump vec2 srcOriginEnd;\\nuniform mediump vec2 pixelSize;\\nuniform mediump float tilesize;\\nvoid main(void)\\n{\\nmediump vec2 tile = pixelSize * tilesize;\\nmediump vec2 halftile = tile / 2.0;\\nmediump vec2 tex = floor(vTex / tile) * tile + halftile;\\ntex = clamp(tex, min(srcOriginStart, srcOriginEnd), max(srcOriginStart, srcOriginEnd));\\noutColor = textureGrad(samplerFront, tex, dFdx(vTex), dFdy(vTex));\\n}\",\n\twgsl: \"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\\nstruct ShaderParams {\\ntilesize : f32\\n};\\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\\n%%C3PARAMS_STRUCT%%\\n%%FRAGMENTINPUT_STRUCT%%\\n%%FRAGMENTOUTPUT_STRUCT%%\\n@fragment\\nfn main(input : FragmentInput) -> FragmentOutput\\n{\\nvar tile : vec2<f32> = vec2<f32>(shaderParams.tilesize) / vec2<f32>(textureDimensions(textureFront));\\nvar halftile : vec2<f32> = tile / 2.0;\\nvar tex : vec2<f32> = floor(input.fragUV / tile) * tile + halftile;\\ntex = c3_clampToSrcOrigin(tex);\\nvar output : FragmentOutput;\\noutput.color = textureSampleGrad(textureFront, samplerFront, tex, dpdx(input.fragUV), dpdy(input.fragUV));\\nreturn output;\\n}\",\n\tblendsBackground: false,\n\tusesDepth: false,\n\textendBoxHorizontal: 0,\n\textendBoxVertical: 0,\n\tcrossSampling: false,\n\tmustPreDraw: false,\n\tpreservesOpaqueness: false,\n\tanimated: false,\n\tparameters: [[\"tilesize\",0,\"float\"]]\n};\nself[\"C3_Shaders\"][\"scanlines\"] = {\n\tglsl: \"varying mediump vec2 vTex;\\nuniform lowp sampler2D samplerFront;\\nuniform mediump vec2 pixelSize;\\nuniform mediump float lineHeight;\\nvoid main(void)\\n{\\nlowp vec4 front = texture2D(samplerFront, vTex);\\nmediump float factor = 1.0 + (floor(mod(vTex.y, pixelSize.y * lineHeight * 2.0) / (pixelSize.y * lineHeight)) / 3.0);\\nfront.rgb /= factor;\\ngl_FragColor = front;\\n}\",\n\tglslWebGL2: \"\",\n\twgsl: \"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\\nstruct ShaderParams {\\nlineHeight : f32\\n};\\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\\n%%C3_UTILITY_FUNCTIONS%%\\n%%FRAGMENTINPUT_STRUCT%%\\n%%FRAGMENTOUTPUT_STRUCT%%\\n@fragment\\nfn main(input : FragmentInput) -> FragmentOutput\\n{\\nvar pixelSizeY : f32 = c3_getPixelSize(textureFront).y;\\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\\nvar factor : f32 = 1.0 + (floor(c3_mod(input.fragUV.y, pixelSizeY * shaderParams.lineHeight * 2.0) / (pixelSizeY * shaderParams.lineHeight)) / 3.0);\\nvar output : FragmentOutput;\\noutput.color = vec4<f32>(front.rgb / factor, front.a);\\nreturn output;\\n}\",\n\tblendsBackground: false,\n\tusesDepth: false,\n\textendBoxHorizontal: 0,\n\textendBoxVertical: 0,\n\tcrossSampling: false,\n\tmustPreDraw: false,\n\tpreservesOpaqueness: true,\n\tanimated: false,\n\tparameters: [[\"lineHeight\",0,\"float\"]]\n};\n\n}\n\n{\n'use strict';{const C3=self.C3;let cacheRegex=null;let lastRegex=\"\";let lastFlags=\"\";let regexMatches=[];let lastMatchesStr=\"\";let lastMatchesRegex=\"\";let lastMatchesFlags=\"\";const forEachStack=C3.New(C3.ArrayStack);function ForEachOrdered_SortInstances(a,b){const va=a[1];const vb=b[1];if(typeof va===\"number\"&&typeof vb===\"number\")return va-vb;else{const sa=\"\"+va;const sb=\"\"+vb;if(sa<sb)return-1;else if(sa>sb)return 1;else return 0}}C3.Plugins.System=class SystemPlugin extends C3.SDKPluginBase{constructor(opts){super(opts);\nthis._loopStack=this._runtime.GetEventSheetManager().GetLoopStack();this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._imagesLoadingTotal=0;this._imagesLoadingComplete=0;this._functionMaps=new Map;this._signalTags=[]}Release(){super.Release()}UpdateRender(){this._runtime.UpdateRender()}Trigger(method){this._runtime.Trigger(method,null,null)}GetRegex(regex,flags){if(!cacheRegex||regex!==lastRegex||flags!==lastFlags){cacheRegex=new RegExp(regex,flags);lastRegex=regex;lastFlags=\nflags}cacheRegex.lastIndex=0;return cacheRegex}GetRegexMatches(str,regex,flags){if(str===lastMatchesStr&&regex===lastMatchesRegex&&flags===lastMatchesFlags)return regexMatches;const cacheRegex=this.GetRegex(regex,flags);regexMatches=str.match(cacheRegex);lastMatchesStr=str;lastMatchesRegex=regex;lastMatchesFlags=flags;return regexMatches}async _LoadTexturesForObjectClasses(layout,objectClasses){if(!objectClasses.length)return;this._imagesLoadingTotal+=objectClasses.length;const promises=[];for(const oc of objectClasses)promises.push(layout.MaybeLoadTexturesFor(oc));\nawait C3.PromiseAllWithProgress(promises,()=>{this._imagesLoadingComplete++});this._imagesLoadingComplete++;if(this._imagesLoadingComplete===this._imagesLoadingTotal){this._imagesLoadingComplete=0;this._imagesLoadingTotal=0;this._runtime.Trigger(C3.Plugins.System.Cnds.OnImageLoadingComplete,null,null)}}_UnloadTexturesForObjectClasses(layout,objectClasses){for(const oc of objectClasses)if(oc.GetInstanceCount()===0)layout.MaybeUnloadTexturesFor(oc)}_GetForEachStack(){return forEachStack}_Repeat(count){const eventSheetManager=\nthis._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();loop.SetEnd(count);if(isSolModifierAfterCnds)for(let i=0;i<count&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);\nloop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else for(let i=0;i<count&&!loop.IsStopped();++i){loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame)}eventStack.Pop();loopStack.Pop();return false}*_DebugRepeat(count){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();\nconst isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();loop.SetEnd(count);if(isSolModifierAfterCnds)for(let i=0;i<count&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else for(let i=0;i<count&&!loop.IsStopped();++i){loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,\nnewFrame)}eventStack.Pop();loopStack.Pop();return false}_While(){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();\nif(isSolModifierAfterCnds)for(let i=0;!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);if(!currentEvent.Retrigger(oldFrame,newFrame))loop.Stop();eventSheetManager.PopSol(solModifiers)}else for(let i=0;!loop.IsStopped();++i){loop.SetIndex(i);if(!currentEvent.Retrigger(oldFrame,newFrame))loop.Stop()}eventStack.Pop();loopStack.Pop();return false}*_DebugWhile(){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();\nconst oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();if(isSolModifierAfterCnds)for(let i=0;!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);const ret=yield*currentEvent.DebugRetrigger(oldFrame,\nnewFrame);if(!ret)loop.Stop();eventSheetManager.PopSol(solModifiers)}else for(let i=0;!loop.IsStopped();++i){loop.SetIndex(i);const ret=yield*currentEvent.DebugRetrigger(oldFrame,newFrame);if(!ret)loop.Stop()}eventStack.Pop();loopStack.Pop();return false}_For(name,start,end){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=\ncurrentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();loop.SetName(name);loop.SetEnd(end);if(end<start)if(isSolModifierAfterCnds)for(let i=start;i>=end&&!loop.IsStopped();--i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else for(let i=start;i>=\nend&&!loop.IsStopped();--i){loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame)}else if(isSolModifierAfterCnds)for(let i=start;i<=end&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else for(let i=start;i<=end&&!loop.IsStopped();++i){loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame)}eventStack.Pop();loopStack.Pop();return false}*_DebugFor(name,start,end){const eventSheetManager=\nthis._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();loop.SetName(name);loop.SetEnd(end);if(end<start)if(isSolModifierAfterCnds)for(let i=\nstart;i>=end&&!loop.IsStopped();--i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else for(let i=start;i>=end&&!loop.IsStopped();--i){loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame)}else if(isSolModifierAfterCnds)for(let i=start;i<=end&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame);\neventSheetManager.PopSol(solModifiers)}else for(let i=start;i<=end&&!loop.IsStopped();++i){loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame)}eventStack.Pop();loopStack.Pop();return false}_ForEach(objectClass){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=\noldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();const isInContainer=objectClass.IsInContainer();const sol=objectClass.GetCurrentSol();const instances=forEachStack.Push();C3.shallowAssignArray(instances,sol.GetInstances());loop.SetEnd(instances.length);if(isSolModifierAfterCnds)for(let i=0,len=instances.length;i<len&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);const inst=\ninstances[i];objectClass.GetCurrentSol().SetSinglePicked(inst);if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else{sol._SetSelectAll(false);const solInstances=sol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(null);for(let i=0,len=instances.length;i<len&&!loop.IsStopped();++i){const inst=instances[i];solInstances[0]=inst;if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);\ncurrentEvent.Retrigger(oldFrame,newFrame)}}eventStack.Pop();loopStack.Pop();C3.clearArray(instances);forEachStack.Pop();return false}*_DebugForEach(objectClass){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);\nconst loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();const isInContainer=objectClass.IsInContainer();const sol=objectClass.GetCurrentSol();const instances=forEachStack.Push();C3.shallowAssignArray(instances,sol.GetInstances());loop.SetEnd(instances.length);if(isSolModifierAfterCnds)for(let i=0,len=instances.length;i<len&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);const inst=instances[i];objectClass.GetCurrentSol().SetSinglePicked(inst);if(isInContainer)inst.SetSiblingsSinglePicked();\nloop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else{sol._SetSelectAll(false);const solInstances=sol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(null);for(let i=0,len=instances.length;i<len&&!loop.IsStopped();++i){const inst=instances[i];solInstances[0]=inst;if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame)}}eventStack.Pop();loopStack.Pop();C3.clearArray(instances);\nforEachStack.Pop();return false}_ForEachOrdered(objectClass,order){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const cnd=eventSheetManager.GetCurrentCondition();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();\nconst loop=loopStack.Push();const isInContainer=objectClass.IsInContainer();const sol=objectClass.GetCurrentSol();const instancesData=forEachStack.Push();C3.clearArray(instancesData);const iterInstances=sol.GetInstances();loop.SetEnd(iterInstances.length);for(let i=0,len=iterInstances.length;i<len;++i)instancesData.push([iterInstances[i],cnd.ReevaluateParameter(1,i)]);instancesData.sort(ForEachOrdered_SortInstances);if(order===1)instancesData.reverse();if(isSolModifierAfterCnds)for(let i=0,len=instancesData.length;i<\nlen&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);const inst=instancesData[i][0];objectClass.GetCurrentSol().SetSinglePicked(inst);if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else{sol._SetSelectAll(false);const solInstances=sol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(null);for(let i=0,len=instancesData.length;i<len&&!loop.IsStopped();++i){const inst=\ninstancesData[i][0];solInstances[0]=inst;if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame)}}eventStack.Pop();loopStack.Pop();C3.clearArray(instancesData);forEachStack.Pop();return false}*_DebugForEachOrdered(objectClass,order){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const cnd=eventSheetManager.GetCurrentCondition();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=\noldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();const isInContainer=objectClass.IsInContainer();const sol=objectClass.GetCurrentSol();const instancesData=forEachStack.Push();C3.clearArray(instancesData);const iterInstances=sol.GetInstances();loop.SetEnd(iterInstances.length);for(let i=0,\nlen=iterInstances.length;i<len;++i)instancesData.push([iterInstances[i],cnd.ReevaluateParameter(1,i)]);instancesData.sort(ForEachOrdered_SortInstances);if(order===1)instancesData.reverse();if(isSolModifierAfterCnds)for(let i=0,len=instancesData.length;i<len&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);const inst=instancesData[i][0];objectClass.GetCurrentSol().SetSinglePicked(inst);if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,\nnewFrame);eventSheetManager.PopSol(solModifiers)}else{sol._SetSelectAll(false);const solInstances=sol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(null);for(let i=0,len=instancesData.length;i<len&&!loop.IsStopped();++i){const inst=instancesData[i][0];solInstances[0]=inst;if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame)}}eventStack.Pop();loopStack.Pop();C3.clearArray(instancesData);forEachStack.Pop();return false}_GetFunctionMap(name,\ncreateIfMissing){let ret=this._functionMaps.get(name);if(ret)return ret;if(!createIfMissing)return null;ret={defaultFunc:null,strMap:new Map};this._functionMaps.set(name,ret);return ret}_DoCallMappedFunction(eventSheetManager,functionBlock,paramResults,hasAnySolModifiers,solModifiers){functionBlock.GetEventBlock().RunAsMappedFunctionCall(paramResults,functionBlock.IsCopyPicked());if(hasAnySolModifiers)eventSheetManager.PopSol(solModifiers)}*_DebugDoCallMappedFunction(eventSheetManager,functionBlock,\nparamResults,hasAnySolModifiers,solModifiers){yield*functionBlock.GetEventBlock().DebugRunAsMappedFunctionCall(paramResults,functionBlock.IsCopyPicked());if(hasAnySolModifiers)eventSheetManager.PopSol(solModifiers)}}}\n{const C3=self.C3;C3.Plugins.System.Type=class SystemType extends C3.DefendedBase{constructor(objectClass){super();this._objectClass=objectClass;this._runtime=objectClass.GetRuntime();this._plugin=objectClass.GetPlugin()}OnCreate(){}Release(){this._objectClass=null;this._runtime=null;this._plugin=null}}}\n{const C3=self.C3;C3.Plugins.System.Instance=class SystemInstance extends C3.DefendedBase{constructor(inst,properties){super();this._inst=inst;this._objectClass=this._inst.GetObjectClass();this._sdkType=this._objectClass.GetSdkType();this._runtime=this._inst.GetRuntime()}Release(){this._inst=null;this._objectClass=null;this._sdkType=null;this._runtime=null}}}\n{const C3=self.C3;const tmpPickArray=[];C3.Plugins.System.Cnds={EveryTick(){return true},OnLayoutStart(){return true},OnLayoutEnd(){return true},OnSuspend(){return true},OnResume(){return true},IsSuspended(){return this._runtime.IsSuspended()},Else(){const frame=this._runtime.GetCurrentEventStackFrame();if(frame.GetElseBranchRan())return false;else return!frame.GetLastEventTrue()},TriggerOnce(){const cnd=this._runtime.GetCurrentCondition();const cndSavedData=cnd.GetSavedDataMap();let lastTick=cndSavedData.get(\"TriggerOnce_lastTick\");\nif(typeof lastTick===\"undefined\"){lastTick=-1;cndSavedData.set(\"TriggerOnce_lastTick\",-1)}const curTick=this._runtime.GetTickCount();cndSavedData.set(\"TriggerOnce_lastTick\",curTick);return this._runtime.IsLayoutFirstTick()||lastTick!==curTick-1},Every(seconds){const cnd=this._runtime.GetCurrentCondition();const cndSavedData=cnd.GetSavedDataMap();const lastTime=cndSavedData.get(\"Every_lastTime\")||0;const curTime=this._runtime.GetGameTime();if(!cndSavedData.has(\"Every_seconds\"))cndSavedData.set(\"Every_seconds\",\nseconds);const thisSeconds=cndSavedData.get(\"Every_seconds\");if(curTime>=lastTime+thisSeconds){cndSavedData.set(\"Every_lastTime\",lastTime+thisSeconds);if(curTime>=cndSavedData.get(\"Every_lastTime\")+.04)cndSavedData.set(\"Every_lastTime\",curTime);cndSavedData.set(\"Every_seconds\",seconds);return true}else if(curTime<lastTime-.1)cndSavedData.set(\"Every_lastTime\",curTime);return false},IsGroupActive(groupName){const eventGroup=this._runtime.GetEventSheetManager().GetEventGroupByName(groupName);return eventGroup&&\neventGroup.IsGroupActive()},IsPreview(){return this._runtime.IsPreview()},IsMobile(){return C3.Platform.IsMobile},OnLoadFinished(){return true},OnCanvasSnapshot(){return true},EffectsSupported(){return true},OnSaveComplete(){return true},OnSaveFailed(){return true},OnLoadComplete(){return true},OnLoadFailed(){return true},ObjectUIDExists(uid){return!!this._runtime.GetInstanceByUID(uid)},IsOnPlatform(p){switch(p){case 0:return C3.Platform.Context===\"browser\";case 1:return C3.Platform.OS===\"iOS\";case 2:return C3.Platform.OS===\n\"Android\";case 8:return C3.Platform.Context===\"cordova\";case 9:return this._runtime.GetExportType()===\"scirra-arcade\";case 10:return C3.Platform.Context===\"nwjs\";case 13:return this._runtime.GetExportType()===\"windows-uwp\";default:return false}},RegexTest(str,regex,flags){const cacheRegex=this.GetRegex(regex,flags);return cacheRegex.test(str)},Compare(x,cmp,y){return C3.compare(x,cmp,y)},CompareBetween(x,a,b){return x>=a&&x<=b},CompareVar(ev,cmp,val){return C3.compare(ev.GetValue(),cmp,val)},CompareBoolVar(ev){return!!ev.GetValue()},\nCompareTime(cmp,t){const gameTime=this._runtime.GetGameTime();if(cmp===0){const cnd=this._runtime.GetCurrentCondition();const cndSavedData=cnd.GetSavedDataMap();if(!cndSavedData.get(\"CompareTime_executed\"))if(gameTime>=t){cndSavedData.set(\"CompareTime_executed\",true);return true}return false}else return C3.compare(gameTime,cmp,t)},IsNaN(n){return isNaN(n)},AngleWithin(a1,within,a2){return C3.angleDiff(C3.toRadians(a1),C3.toRadians(a2))<=C3.toRadians(within)},IsClockwiseFrom(a1,a2){return C3.angleClockwise(C3.toRadians(a1),\nC3.toRadians(a2))},IsBetweenAngles(a,la,ua){let angle=C3.toRadians(a);let lower=C3.toRadians(la);let upper=C3.toRadians(ua);let obtuse=!C3.angleClockwise(upper,lower);if(obtuse)return!(!C3.angleClockwise(angle,lower)&&C3.angleClockwise(angle,upper));else return C3.angleClockwise(angle,lower)&&!C3.angleClockwise(angle,upper)},IsValueType(v,t){if(typeof v===\"number\")return t===0;else return t===1},EvaluateExpression(v){return!!v},OnSignal(tag){return tag.toLowerCase()===this._signalTags.at(-1)},PickByComparison(objectClass,\nexp,cmp,val){if(!objectClass)return false;const forEachStack=this._GetForEachStack();const tempInstances=forEachStack.Push();const sol=objectClass.GetCurrentSol();C3.shallowAssignArray(tempInstances,sol.GetInstances());if(sol.IsSelectAll())C3.clearArray(sol._GetOwnElseInstances());const cnd=this._runtime.GetCurrentCondition();let k=0;for(let i=0,len=tempInstances.length;i<len;++i){const inst=tempInstances[i];tempInstances[k]=inst;exp=cnd.ReevaluateParameter(1,i);val=cnd.ReevaluateParameter(3,i);if(C3.compare(exp,\ncmp,val))++k;else sol._PushElseInstance(inst)}C3.truncateArray(tempInstances,k);sol.SetArrayPicked(tempInstances);const ret=!!tempInstances.length;C3.clearArray(tempInstances);forEachStack.Pop();objectClass.ApplySolToContainer();return ret},PickByEvaluate(objectClass,exp){if(!objectClass)return false;const forEachStack=this._GetForEachStack();const tempInstances=forEachStack.Push();const sol=objectClass.GetCurrentSol();C3.shallowAssignArray(tempInstances,sol.GetInstances());if(sol.IsSelectAll())C3.clearArray(sol._GetOwnElseInstances());\nconst cnd=this._runtime.GetCurrentCondition();let k=0;for(let i=0,len=tempInstances.length;i<len;++i){const inst=tempInstances[i];tempInstances[k]=inst;exp=cnd.ReevaluateParameter(1,i);if(exp)++k;else sol._PushElseInstance(inst)}C3.truncateArray(tempInstances,k);sol.SetArrayPicked(tempInstances);const ret=!!tempInstances.length;C3.clearArray(tempInstances);forEachStack.Pop();objectClass.ApplySolToContainer();return ret},PickNth(objectClass,index){if(!objectClass)return false;const sol=objectClass.GetCurrentSol();\nconst instances=sol.GetInstances();index=Math.floor(index);if(index>=instances.length)return false;const inst=instances[index];sol.PickOne(inst);objectClass.ApplySolToContainer();return true},PickRandom(objectClass){if(!objectClass)return false;const sol=objectClass.GetCurrentSol();const instances=sol.GetInstances();const index=Math.floor(this._runtime.Random()*instances.length);if(index>=instances.length)return false;const inst=instances[index];sol.PickOne(inst);objectClass.ApplySolToContainer();\nreturn true},PickAll(objectClass){if(!objectClass)return false;if(!objectClass.GetInstanceCount())return false;const sol=objectClass.GetCurrentSol();sol._SetSelectAll(true);objectClass.ApplySolToContainer();return true},PickOverlappingPoint(objectClass,x,y){if(!objectClass)return false;const sol=objectClass.GetCurrentSol();const instances=sol.GetInstances();const currentEvent=this._runtime.GetCurrentEvent();const isOrBlock=currentEvent.IsOrBlock();const isInverted=this._runtime.GetCurrentCondition().IsInverted();\nif(sol.IsSelectAll()){C3.shallowAssignArray(tmpPickArray,instances);sol.ClearArrays();sol._SetSelectAll(false)}else if(isOrBlock){C3.shallowAssignArray(tmpPickArray,sol._GetOwnElseInstances());C3.clearArray(sol._GetOwnElseInstances())}else{C3.shallowAssignArray(tmpPickArray,sol._GetOwnInstances());C3.clearArray(sol._GetOwnInstances())}for(let i=0,len=tmpPickArray.length;i<len;++i){const inst=tmpPickArray[i];if(C3.xor(inst.GetWorldInfo().ContainsPoint(x,y),isInverted))sol._PushInstance(inst);else sol._PushElseInstance(inst)}objectClass.ApplySolToContainer();\nreturn C3.xor(!!sol._GetOwnInstances().length,isInverted)},PickLastCreated(objectClass){if(!objectClass)return false;const isFamily=objectClass.IsFamily();let pick=null;const instancesPendingCreate=this._runtime._GetInstancesPendingCreate();for(let i=instancesPendingCreate.length-1;i>=0;--i){const inst=instancesPendingCreate[i];if(isFamily){if(inst.GetObjectClass().BelongsToFamily(objectClass)){pick=inst;break}}else if(inst.GetObjectClass()===objectClass){pick=inst;break}}if(!pick){const instances=\nobjectClass.GetInstances();if(instances.length)pick=instances.at(-1)}if(!pick)return false;const sol=objectClass.GetCurrentSol();sol.PickOne(pick);objectClass.ApplySolToContainer();return true},Repeat(count){if(this._runtime.IsDebugging())return this._DebugRepeat(count);else return this._Repeat(count)},While(){if(this._runtime.IsDebugging())return this._DebugWhile();else return this._While()},For(name,start,end){if(this._runtime.IsDebugging())return this._DebugFor(name,start,end);else return this._For(name,\nstart,end)},ForEach(objectClass){if(this._runtime.IsDebugging())return this._DebugForEach(objectClass);else return this._ForEach(objectClass)},ForEachOrdered(objectClass,expression,order){if(this._runtime.IsDebugging())return this._DebugForEachOrdered(objectClass,order);else return this._ForEachOrdered(objectClass,order)},LayerVisible(layer){return layer?layer.IsVisible():false},LayerInteractive(layer){return layer?layer.IsSelfAndParentsInteractive():false},LayerEmpty(layer){return layer?!layer.GetInstanceCount():\nfalse},LayerCmpOpacity(layer,cmp,o){if(!layer)return false;return C3.compare(layer.GetOpacity()*100,cmp,o)},OnImageLoadingComplete(){return true},IsLoadingImages(){return this._imagesLoadingTotal>0},TemplateExists(objectClass,template){const templateManager=this._runtime.GetTemplateManager();if(!templateManager)return false;if(!template)return false;return!!templateManager.GetTemplateData(objectClass,template)}}}\n{const C3=self.C3;function SortZOrderList(a,b){const layerA=a[0];const layerB=b[0];const diff=layerA-layerB;if(diff!==0)return diff;const indexA=a[1];const indexB=b[1];return indexA-indexB}function SortInstancesByValue(a,b){return a[1]-b[1]}const tempZOrderList=[];const tempInstValues=[];const tempRect=C3.New(C3.Rect);const tempColor=C3.New(C3.Color);C3.Plugins.System.Acts={SetVar(ev,x){ev.SetValue(x)},AddVar(ev,x){if(ev.IsNumber()&&typeof x!==\"number\")x=parseFloat(x);ev.SetValue(ev.GetValue()+x)},\nSubVar(ev,x){if(!ev.IsNumber())return;ev.SetValue(ev.GetValue()-x)},SetBoolVar(ev,x){ev.SetValue(!!x)},ToggleBoolVar(ev){ev.SetValue(!ev.GetValue())},ResetGlobals(){this._runtime.GetEventSheetManager().ResetAllGlobalsToInitialValue()},CreateObject(objectClass,layer,x,y,createHierarchy,template){if(!objectClass||!layer)return;const inst=this._runtime.CreateInstance(objectClass,layer,x,y,createHierarchy,template);if(!inst)return;if(createHierarchy)layer.SortAndAddInstancesByZIndex(inst);const eventSheetManager=\nthis._runtime.GetEventSheetManager();eventSheetManager.BlockFlushingInstances(true);inst._TriggerOnCreatedOnSelfAndRelated();eventSheetManager.BlockFlushingInstances(false);const pickMap=new Map;inst.CollectInstancesToPick(pickMap,objectClass,createHierarchy);for(const [pickObjectClass,instSet]of pickMap)pickObjectClass.GetCurrentSol().SetSetPicked(instSet)},CreateObjectByName(objectClassName,layer,x,y,createHierarchy,template){if(!objectClassName||!layer)return;const objectClass=this._runtime.GetObjectClassByName(objectClassName);\nif(!objectClass)return;C3.Plugins.System.Acts.CreateObject.call(this,objectClass,layer,x,y,createHierarchy,template)},RecreateInitialObjects(objectClass,x1,y1,x2,y2,sourceLayoutName,sourceLayerParam,offsetX,offsetY,createHierarchy){if(!objectClass)return;let sourceLayout=this._runtime.GetCurrentLayout();if(sourceLayoutName){const lookupLayout=this._runtime.GetLayoutManager().GetLayoutByName(sourceLayoutName);if(lookupLayout)sourceLayout=lookupLayout;else return}let sourceLayer=null;if(typeof sourceLayerParam!==\n\"number\"||sourceLayerParam>=0){sourceLayer=sourceLayout.GetLayer(sourceLayerParam);if(!sourceLayer)return}tempRect.set(x1,y1,x2,y2);const allCreatedInstances=sourceLayout.RecreateInitialObjects(objectClass,tempRect,sourceLayer,offsetX,offsetY,createHierarchy);objectClass.GetCurrentSol().SetArrayPicked(allCreatedInstances);objectClass.ApplySolToContainer()},StopLoop(){const loopStack=this._loopStack;if(!loopStack.IsInLoop())return;loopStack.GetCurrent().Stop()},SetGroupActive(groupName,a){const group=\nthis._runtime.GetEventSheetManager().GetEventGroupByName(groupName);if(!group)return;if(a===0)group.SetGroupActive(false);else if(a===1)group.SetGroupActive(true);else group.SetGroupActive(!group.IsGroupActive())},SetTimescale(ts){this._runtime.SetTimeScale(ts)},SetObjectTimescale(objectClass,ts){if(ts<0)ts=0;if(!objectClass)return;const sol=objectClass.GetCurrentSol();const instances=sol.GetInstances();for(const inst of instances)inst.SetTimeScale(ts)},RestoreObjectTimescale(objectClass){if(!objectClass)return;\nconst sol=objectClass.GetCurrentSol();const instances=sol.GetInstances();for(const inst of instances)inst.RestoreTimeScale()},Wait(seconds){if(seconds<0)return;this._runtime.GetEventSheetManager().AddScheduledWait().InitTimer(seconds);return true},WaitForSignal(tag){this._runtime.GetEventSheetManager().AddScheduledWait().InitSignal(tag);return true},WaitForPreviousActions(){const eventSheetManager=this._runtime.GetEventSheetManager();eventSheetManager.AddScheduledWait().InitPromise(eventSheetManager.GetPromiseForAllAsyncActions());\nreturn true},Signal(tag){const lowerTag=tag.toLowerCase();this._signalTags.push(lowerTag);this._runtime.Trigger(C3.Plugins.System.Cnds.OnSignal,null);this._signalTags.pop();for(const w of this._runtime.GetEventSheetManager().scheduledWaits())if(w.IsSignal()&&w.GetSignalTag()===lowerTag)w.SetSignalled()},async SnapshotCanvas(format,quality,x,y,width,height){const canvasManager=this._runtime.GetCanvasManager();if(!canvasManager)return;this.UpdateRender();await canvasManager.SnapshotCanvas(format===\n0?\"image/png\":\"image/jpeg\",quality/100,x,y,width,height);await this._runtime.TriggerAsync(C3.Plugins.System.Cnds.OnCanvasSnapshot,null)},SetCanvasSize(w,h){if(w<=0||h<=0)return;this._runtime.SetViewportSize(w,h);this._runtime.GetCurrentLayout().BoundScrolling();const canvasManager=this._runtime.GetCanvasManager();if(!canvasManager)return;if(canvasManager.GetCurrentFullscreenMode()===\"off\")canvasManager.SetSize(canvasManager.GetLastWidth(),canvasManager.GetLastHeight(),true);else{this._runtime.SetOriginalViewportSize(w,\nh);canvasManager.SetSize(canvasManager.GetLastWidth(),canvasManager.GetLastHeight(),true)}this._runtime.UpdateRender()},SetFullscreenQuality(q){const canvasManager=this._runtime.GetCanvasManager();if(!canvasManager)return;if(canvasManager.GetCurrentFullscreenMode()===\"off\")return;canvasManager.SetFullscreenScalingQuality(q!==0?\"high\":\"low\");canvasManager.SetSize(canvasManager.GetLastWidth(),canvasManager.GetLastHeight(),true)},SaveState(slot){this._runtime.SaveToSlot(slot)},LoadState(slot){this._runtime.LoadFromSlot(slot)},\nLoadStateJSON(jsonStr){this._runtime.LoadFromJsonString(jsonStr)},SetHalfFramerateMode(m){},ResetPersisted(){for(const layout of this._runtime.GetLayoutManager().GetAllLayouts())layout.ResetPersistData()},SetPixelRounding(m){this._runtime.SetPixelRoundingEnabled(m!==0)},SetMinimumFramerate(fps){this._runtime.SetMinimumFramerate(fps)},SortZOrderByInstVar(objectClass,instVar){if(!objectClass)return;const sol=objectClass.GetCurrentSol();const pickedInstances=sol.GetInstances();const zOrderList=tempZOrderList;\nconst instValues=tempInstValues;const layout=this._runtime.GetCurrentLayout();const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();for(let i=0,len=pickedInstances.length;i<len;++i){const inst=pickedInstances[i];const wi=inst.GetWorldInfo();if(!wi)continue;let value;if(isFamily)value=inst.GetInstanceVariableValue(instVar+inst.GetObjectClass().GetFamilyInstanceVariableOffset(familyIndex));else value=inst.GetInstanceVariableValue(instVar);zOrderList.push([wi.GetLayer().GetIndex(),\nwi.GetZIndex()]);instValues.push([inst,value])}if(!zOrderList.length)return;zOrderList.sort(SortZOrderList);instValues.sort(SortInstancesByValue);let anyChanged=false;for(let i=0,len=zOrderList.length;i<len;++i){const inst=instValues[i][0];const layer=layout.GetLayerByIndex(zOrderList[i][0]);const toZ=zOrderList[i][1];const layerInstances=layer._GetInstances();if(layerInstances[toZ]!==inst){layerInstances[toZ]=inst;inst.GetWorldInfo()._SetLayer(layer,true);layer.SetZIndicesChanged();anyChanged=true}}if(anyChanged)this._runtime.UpdateRender();\nC3.clearArray(tempZOrderList);C3.clearArray(tempInstValues)},GoToLayout(layout){if(this._runtime.IsLoading())return;const layoutManager=this._runtime.GetLayoutManager();if(layoutManager.IsPendingChangeMainLayout())return;layoutManager.ChangeMainLayout(layout)},GoToLayoutByName(layoutName){if(this._runtime.IsLoading())return;const layoutManager=this._runtime.GetLayoutManager();if(layoutManager.IsPendingChangeMainLayout())return;const toLayout=layoutManager.GetLayoutByName(layoutName);if(toLayout)layoutManager.ChangeMainLayout(toLayout)},\nNextPrevLayout(prev){if(this._runtime.IsLoading())return;const layoutManager=this._runtime.GetLayoutManager();if(layoutManager.IsPendingChangeMainLayout())return;const allLayouts=layoutManager.GetAllLayouts();const index=allLayouts.indexOf(layoutManager.GetMainRunningLayout());if(prev&&index===0)return;if(!prev&&index===allLayouts.length-1)return;const toLayout=allLayouts[index+(prev?-1:1)];layoutManager.ChangeMainLayout(toLayout)},RestartLayout(){if(this._runtime.IsLoading())return;const layoutManager=\nthis._runtime.GetLayoutManager();if(layoutManager.IsPendingChangeMainLayout())return;layoutManager.ChangeMainLayout(layoutManager.GetMainRunningLayout());this._runtime.GetEventSheetManager().ResetAllGroupsInitialActivation()},SetLayerVisible(layer,v){if(!layer)return;layer.SetVisible(v)},SetLayerInteractive(layer,i){if(!layer)return;layer.SetInteractive(i)},SetLayerOpacity(layer,o){if(!layer)return;layer.SetOpacity(o/100)},SetLayerScale(layer,s){if(!layer)return;layer.SetOwnScale(s)},SetLayerScaleRate(layer,\nr){if(!layer)return;layer.SetScaleRate(r)},SetLayerAngle(layer,a){if(!layer)return;layer.SetAngle(C3.toRadians(+a))},SetLayerScroll(layer,scrollX,scrollY){if(!layer)return;layer.SetOwnScrollPositionEnabled(true);layer.SetScrollX(scrollX);layer.SetScrollY(scrollY)},RestoreLayerScroll(layer){if(!layer)return;layer.SetOwnScrollPositionEnabled(false)},SetLayerParallax(layer,px,py){if(!layer)return;layer.SetParallax(px/100,py/100)},SetLayerZElevation(layer,z){if(!layer)return;layer.SetZElevation(+z)},\nSetLayerBackground(layer,rgb){if(!layer)return;tempColor.setFromRgbValue(rgb);tempColor.clamp();const layerBgColor=layer.GetBackgroundColor();if(layerBgColor.equalsIgnoringAlpha(tempColor))return;layerBgColor.copyRgb(tempColor);this.UpdateRender()},SetLayerTransparent(layer,t){if(!layer)return;layer.SetTransparent(t)},SetLayerBlendMode(layer,bm){if(!layer)return;layer.SetBlendMode(bm)},SetLayerEffectEnabled(layer,enabled,effectName){if(!layer)return;const effectList=layer.GetEffectList();const effectType=\neffectList.GetEffectTypeByName(effectName);if(!effectType)return;const e=enabled===1;if(effectType.IsActive()===e)return;effectType.SetActive(e);layer.UpdateActiveEffects();this._runtime.UpdateRender()},SetLayerEffectParam(layer,effectName,paramIndex,value){if(!layer)return;const effectList=layer.GetEffectList();const effectType=effectList.GetEffectTypeByName(effectName);if(!effectType)return;paramIndex=Math.floor(paramIndex);const paramType=effectType.GetShaderProgram().GetParameterType(paramIndex);\nif(!paramType)return;if(paramType===\"color\"){tempColor.setFromRgbValue(value);value=tempColor}else if(paramType===\"percent\")value/=100;const didChange=effectList.SetEffectParameter(effectType.GetIndex(),paramIndex,value);if(didChange&&effectType.IsActive())this._runtime.UpdateRender()},SetLayerForceOwnTexture(layer,f){if(!layer)return;layer.SetForceOwnTexture(f)},SetLayoutScale(s){this._runtime.GetCurrentLayout().SetScale(+s)},SetLayoutAngle(a){this._runtime.GetCurrentLayout().SetAngle(C3.toRadians(+a))},\nSetLayoutEffectEnabled(enabled,effectName){const layout=this._runtime.GetCurrentLayout();const effectList=layout.GetEffectList();const effectType=effectList.GetEffectTypeByName(effectName);if(!effectType)return;const e=enabled===1;if(effectType.IsActive()===e)return;effectType.SetActive(e);layout.UpdateActiveEffects();this._runtime.UpdateRender()},SetLayoutEffectParam(effectName,paramIndex,value){const layout=this._runtime.GetCurrentLayout();const effectList=layout.GetEffectList();const effectType=\neffectList.GetEffectTypeByName(effectName);if(!effectType)return;paramIndex=Math.floor(paramIndex);const paramType=effectType.GetShaderProgram().GetParameterType(paramIndex);if(!paramType)return;if(paramType===\"color\"){tempColor.setFromRgbValue(value);value=tempColor}else if(paramType===\"percent\")value/=100;const didChange=effectList.SetEffectParameter(effectType.GetIndex(),paramIndex,value);if(didChange&&effectType.IsActive())this._runtime.UpdateRender()},SetLayoutVanishingPoint(vpX,vpY){const layout=\nthis._runtime.GetCurrentLayout();layout.SetVanishingPointXY(vpX/100,vpY/100)},SetLayoutProjection(p){const layout=this._runtime.GetCurrentLayout();if(p===0)layout.SetPerspectiveProjection();else layout.SetOrthographicProjection()},ScrollX(x){const layout=this._runtime.GetCurrentLayout();layout.SetScrollX(x)},ScrollY(y){const layout=this._runtime.GetCurrentLayout();layout.SetScrollY(y)},Scroll(x,y){const layout=this._runtime.GetCurrentLayout();layout.SetScrollX(x);layout.SetScrollY(y)},ScrollToObject(objectClass){if(!objectClass)return;\nconst inst=objectClass.GetFirstPicked();if(!inst)return;const wi=inst.GetWorldInfo();if(!wi)return;const layout=this._runtime.GetCurrentLayout();layout.SetScrollX(wi.GetX());layout.SetScrollY(wi.GetY())},AddLayer(layerName,insertBy,where){const layout=this._runtime.GetCurrentLayout();try{layout.AddLayer(layerName,insertBy,where)}catch(err){console.warn(`[Construct] Cannot add layer: `,err)}},MoveLayer(layer,insertBy,where){if(!layer)return;const layout=this._runtime.GetCurrentLayout();try{layout.MoveLayer(layer,\ninsertBy,where)}catch(err){console.warn(`[Construct] Cannot move layer: `,err)}},RemoveLayer(layer){if(!layer)return;const layout=this._runtime.GetCurrentLayout();layout.RemoveLayer(layer)},RemoveAllDynamicLayers(){this._runtime.GetCurrentLayout().RemoveAllDynamicLayers()},async LoadObjectTextures(objectClass){const layout=this._runtime.GetMainRunningLayout();if(!layout||!objectClass||this._runtime.IsLoading())return;const objectClasses=objectClass.IsFamily()?objectClass.GetFamilyMembers():[objectClass];\nawait this._LoadTexturesForObjectClasses(layout,objectClasses)},async LoadObjectTexturesByName(objectClassName){await C3.Plugins.System.Acts.LoadObjectTextures.call(this,this._runtime.GetObjectClassByName(objectClassName))},UnloadObjectTextures(objectClass){const layout=this._runtime.GetMainRunningLayout();if(!layout||!objectClass)return;const objectClasses=objectClass.IsFamily()?objectClass.GetFamilyMembers():[objectClass];this._UnloadTexturesForObjectClasses(layout,objectClasses)},UnloadObjectTexturesByName(objectClassName){C3.Plugins.System.Acts.UnloadObjectTextures.call(this,\nthis._runtime.GetObjectClassByName(objectClassName))},UnloadUnusedTextures(){const layout=this._runtime.GetMainRunningLayout();if(!layout)return;const objectClasses=layout._GetTextureLoadedObjectTypes();this._UnloadTexturesForObjectClasses(layout,objectClasses)},async LoadLayoutTextures(loadLayout){const curLayout=this._runtime.GetMainRunningLayout();if(!loadLayout||!curLayout||this._runtime.IsLoading())return;await this._LoadTexturesForObjectClasses(curLayout,loadLayout._GetInitialObjectClasses())},\nasync LoadLayoutTexturesByName(layoutName){const curLayout=this._runtime.GetMainRunningLayout();const loadLayout=this._runtime.GetLayoutManager().GetLayoutByName(layoutName);if(!loadLayout||!curLayout||this._runtime.IsLoading())return;await this._LoadTexturesForObjectClasses(curLayout,loadLayout._GetInitialObjectClasses())},SetFunctionReturnValue(v){const frame=this._eventStack.GetCurrentExpFuncStackFrame();if(!frame)return;switch(frame.GetFunctionReturnType()){case 1:if(typeof v===\"number\")frame.SetFunctionReturnValue(v);\nbreak;case 2:if(typeof v===\"string\")frame.SetFunctionReturnValue(v);break;case 3:frame.SetFunctionReturnValue(v);break}},MapFunction(name,str,functionBlock){const mapEntry=this._GetFunctionMap(name.toLowerCase(),true);const strMap=mapEntry.strMap;const lowerStr=str.toLowerCase();if(strMap.has(lowerStr))console.warn(`[Construct] Function map '${name}' string '${str}' already in map; overwriting entry`);const firstFunctionBlock=C3.first(strMap.values())||mapEntry.defaultFunc;if(firstFunctionBlock){const firstReturnsValue=\nfirstFunctionBlock.GetReturnType()!==0;const curReturnsValue=functionBlock.GetReturnType()!==0;if(firstReturnsValue!==curReturnsValue){console.error(`[Construct] Function map '${name}' string '${str}' function return type not compatible with other functions in the map; entry ignored`);return}}strMap.set(lowerStr,functionBlock)},MapFunctionDefault(name,functionBlock){const mapEntry=this._GetFunctionMap(name.toLowerCase(),true);if(mapEntry.defaultFunc)console.warn(`[Construct] Function map '${name}' already has a default; overwriting entry`);\nconst firstFunctionBlock=C3.first(mapEntry.strMap.values())||mapEntry.defaultFunc;if(firstFunctionBlock){const firstReturnsValue=firstFunctionBlock.GetReturnType()!==0;const curReturnsValue=functionBlock.GetReturnType()!==0;if(firstReturnsValue!==curReturnsValue){console.error(`[Construct] Function map '${name}' default: function return type not compatible with other functions in the map; entry ignored`);return}}mapEntry.defaultFunc=functionBlock},CallMappedFunction(name,str,forwardParams){forwardParams=\nMath.floor(forwardParams);const mapEntry=this._GetFunctionMap(name.toLowerCase(),false);if(!mapEntry){console.warn(`[Construct] Call mapped function: map name '${name}' not found; call ignored`);return}let functionBlock=mapEntry.strMap.get(str.toLowerCase());if(!functionBlock)if(mapEntry.defaultFunc){functionBlock=mapEntry.defaultFunc;forwardParams=0}else{console.warn(`[Construct] Call mapped function: no function associated with map '${name}' string '${str}'; call ignored (consider setting a default)`);\nreturn}if(!functionBlock.IsEnabled())return;if(functionBlock.GetReturnType()!==0){console.warn(`[Construct] Call mapped function: map '${name}' string '${str}' has a return type so cannot be called`);return}const runtime=this._runtime;const eventSheetManager=runtime.GetEventSheetManager();const currentEvent=eventSheetManager.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiersIncludingParents();const hasAnySolModifiers=solModifiers.length>0;if(hasAnySolModifiers)if(functionBlock.IsCopyPicked())eventSheetManager.PushCopySol(solModifiers);\nelse eventSheetManager.PushCleanSol(solModifiers);const paramResults=[];const callerFunctionBlock=eventSheetManager.FindFirstFunctionBlockParent(currentEvent);if(callerFunctionBlock){const callerParameters=callerFunctionBlock.GetFunctionParameters();for(let i=forwardParams,len=callerParameters.length;i<len;++i)paramResults.push(callerParameters[i].GetValue())}const calleeParameters=functionBlock.GetFunctionParameters();for(let i=paramResults.length,len=calleeParameters.length;i<len;++i)paramResults.push(calleeParameters[i].GetInitialValue());\nif(runtime.IsDebugging())return this._DebugDoCallMappedFunction(eventSheetManager,functionBlock,paramResults,hasAnySolModifiers,solModifiers);else return this._DoCallMappedFunction(eventSheetManager,functionBlock,paramResults,hasAnySolModifiers,solModifiers)}}}\n{const C3=self.C3;C3.Plugins.System.Exps={int:function(x){if(typeof x===\"string\"){x=parseInt(x,10);if(isNaN(x))x=0}return Math.floor(x)},float:function(x){if(typeof x===\"string\"){x=parseFloat(x);if(isNaN(x))x=0}return x},str(x){return x.toString()},len(x){if(typeof x===\"string\")return x.length;else return 0},random(a,b){if(typeof b===\"undefined\")return this._runtime.Random()*a;else return this._runtime.Random()*(b-a)+a},choose(...args){const index=Math.floor(this._runtime.Random()*args.length);return args[index]},\nchooseindex(index,...args){if(typeof index!==\"number\")index=0;index=C3.clamp(Math.floor(index),0,args.length-1);return args[index]},pi(){return Math.PI},infinity(){return Infinity},sqrt(v){return Math.sqrt(v)},abs(v){return Math.abs(v)},round(v){return Math.round(v)},roundtodp(v,dp){dp=Math.max(Math.floor(dp),0);const m=Math.pow(10,dp);return Math.round((v+Number.EPSILON)*m)/m},floor(v){return Math.floor(v)},ceil(v){return Math.ceil(v)},sign(v){return Math.sign(v)},sin(x){return Math.sin(C3.toRadians(x))},\ncos(x){return Math.cos(C3.toRadians(x))},tan(x){return Math.tan(C3.toRadians(x))},asin(x){return C3.toDegrees(Math.asin(x))},acos(x){return C3.toDegrees(Math.acos(x))},atan(x){return C3.toDegrees(Math.atan(x))},exp(x){return Math.exp(x)},ln(x){return Math.log(x)},log10(x){return Math.log(x)/Math.LN10},max(...args){let ret=args[0];if(typeof ret!==\"number\")ret=0;for(let i=1,len=args.length;i<len;++i){let n=args[i];if(typeof n!==\"number\")continue;if(ret<n)ret=n}return ret},min(...args){let ret=args[0];\nif(typeof ret!==\"number\")ret=0;for(let i=1,len=args.length;i<len;++i){let n=args[i];if(typeof n!==\"number\")continue;if(ret>n)ret=n}return ret},clamp(x,l,u){return C3.clamp(x,l,u)},distance(x1,y1,x2,y2){return C3.distanceTo(x1,y1,x2,y2)},angle(x1,y1,x2,y2){return C3.toDegrees(C3.angleTo(x1,y1,x2,y2))},lerp(a,b,x){return C3.lerp(a,b,x)},unlerp(a,b,y){return C3.unlerp(a,b,y)},qarp(a,b,c,x){return C3.qarp(a,b,c,x)},cubic(a,b,c,d,x){return C3.cubic(a,b,c,d,x)},cosp(a,b,x){return C3.cosp(a,b,x)},anglediff(a,\nb){return C3.toDegrees(C3.angleDiff(C3.toRadians(a),C3.toRadians(b)))},anglelerp(a,b,x){return C3.toDegrees(C3.angleLerp(C3.toRadians(a),C3.toRadians(b),x))},anglerotate(a,b,c){return C3.toDegrees(C3.angleRotate(C3.toRadians(a),C3.toRadians(b),C3.toRadians(c)))},setbit(n,b,v){n=n|0;b=b|0;v=v!==0?1:0;return n&~(1<<b)|v<<b},togglebit(n,b){n=n|0;b=b|0;return n^1<<b},getbit(n,b){n=n|0;b=b|0;return n&1<<b?1:0},newline(){return\"\\n\"},uppercase(s){return typeof s===\"string\"?s.toUpperCase():\"\"},lowercase(s){return typeof s===\n\"string\"?s.toLowerCase():\"\"},left(text,n){return typeof text===\"string\"?text.substr(0,n):\"\"},mid(text,index,count){if(typeof text!==\"string\")return\"\";if(count<0)return text.substr(index);else return text.substr(index,count)},right(text,n){return typeof text===\"string\"?text.substr(Math.max(text.length-n,0)):\"\"},trim(text){return typeof text===\"string\"?text.trim():\"\"},tokenat(text,index,sep){if(typeof text!==\"string\"||typeof sep!==\"string\")return\"\";let arr=text.split(sep);index=Math.floor(index);if(index<\n0||index>=arr.length)return\"\";return arr[index]},tokencount(text,sep){if(typeof text!==\"string\"||typeof sep!==\"string\"||!text.length)return 0;return text.split(sep).length},find(text,searchStr){if(typeof text===\"string\"&&typeof searchStr===\"string\")return text.search(new RegExp(C3.EscapeRegex(searchStr),\"i\"));else return-1},findcase(text,searchStr){if(typeof text===\"string\"&&typeof searchStr===\"string\")return text.search(new RegExp(C3.EscapeRegex(searchStr),\"\"));else return-1},replace(text,find,replace){if(typeof text===\n\"string\"&&typeof find===\"string\"&&typeof replace===\"string\")return text.replace(new RegExp(C3.EscapeRegex(find),\"gi\"),replace);else return typeof text===\"string\"?text:\"\"},regexsearch(text,regex,flags){const cacheRegex=this.GetRegex(regex,flags);return text?text.search(cacheRegex):-1},regexreplace(text,regex,flags,replace){const cacheRegex=this.GetRegex(regex,flags);return text?text.replace(cacheRegex,replace):\"\"},regexmatchcount(text,regex,flags){const matches=this.GetRegexMatches(text.toString(),\nregex,flags);return matches?matches.length:0},regexmatchat(text,regex,flags,index){index=Math.floor(index);const matches=this.GetRegexMatches(text.toString(),regex,flags);if(!matches||index<0||index>=matches.length)return\"\";else return matches[index]},zeropad(n,d){let s=n<0?\"-\":\"\";if(n<0)n=-n;const zeroes=d-n.toString().length;s+=\"0\".repeat(Math.max(zeroes,0));return s+n.toString()},urlencode(s){return encodeURIComponent(s)},urldecode(s){return decodeURIComponent(s)},dt(){return this._runtime._GetDtFast()},\ntimescale(){return this._runtime.GetTimeScale()},wallclocktime(){return(Date.now()-this._runtime.GetStartTime())/1E3},unixtime(){return Date.now()},time(){return this._runtime.GetGameTime()},tickcount(){return this._runtime.GetTickCount()},objectcount(){return this._runtime.GetObjectCount()},fps(){return this._runtime.GetFPS()},cpuutilisation(){return this._runtime.GetMainThreadTime()},gpuutilisation(){return this._runtime.GetGPUUtilisation()},windowwidth(){return this._runtime.GetCanvasManager().GetDeviceWidth()},\nwindowheight(){return this._runtime.GetCanvasManager().GetDeviceHeight()},originalwindowwidth(){return this._runtime.GetOriginalViewportWidth()},originalwindowheight(){return this._runtime.GetOriginalViewportHeight()},originalviewportwidth(){return this._runtime.GetOriginalViewportWidth()},originalviewportheight(){return this._runtime.GetOriginalViewportHeight()},scrollx(){return this._runtime.GetCurrentLayout().GetScrollX()},scrolly(){return this._runtime.GetCurrentLayout().GetScrollY()},layoutname(){return this._runtime.GetCurrentLayout().GetName()},\nlayoutscale(){return this._runtime.GetCurrentLayout().GetScale()},layoutangle(){return C3.toDegrees(this._runtime.GetCurrentLayout().GetAngle())},layoutwidth(){return this._runtime.GetCurrentLayout().GetWidth()},layoutheight(){return this._runtime.GetCurrentLayout().GetHeight()},vanishingpointx(){return this._runtime.GetCurrentLayout().GetVanishingPointX()*100},vanishingpointy(){return this._runtime.GetCurrentLayout().GetVanishingPointY()*100},viewportleft(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);\nreturn layer?layer.GetViewport3D().getLeft():0},viewporttop(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetViewport3D().getTop():0},viewportright(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetViewport3D().getRight():0},viewportbottom(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetViewport3D().getBottom():0},viewportwidth(layerParam){const layer=\nthis._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetViewport3D().width():0},viewportheight(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetViewport3D().height():0},viewportmidx(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);if(layer){const vp=layer.GetViewport3D();return(vp.getLeft()+vp.getRight())/2}else return 0},viewportmidy(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);\nif(layer){const vp=layer.GetViewport3D();return(vp.getTop()+vp.getBottom())/2}else return 0},canvastolayerx(layerParam,x,y){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.CanvasCssToLayer(x,y)[0]:0},canvastolayery(layerParam,x,y){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.CanvasCssToLayer(x,y)[1]:0},layertocanvasx(layerParam,x,y){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.LayerToCanvasCss(x,\ny)[0]:0},layertocanvasy(layerParam,x,y){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.LayerToCanvasCss(x,y)[1]:0},layertolayerx(fromLayerParam,toLayerParam,x,y){const layout=this._runtime.GetCurrentLayout();const fromLayer=layout.GetLayer(fromLayerParam);const toLayer=layout.GetLayer(toLayerParam);if(!fromLayer||!toLayer||fromLayer===toLayer)return x;const [canvasX,canvasY]=fromLayer.LayerToCanvasCss(x,y);return toLayer.CanvasCssToLayer(canvasX,canvasY)[0]},\nlayertolayery(fromLayerParam,toLayerParam,x,y){const layout=this._runtime.GetCurrentLayout();const fromLayer=layout.GetLayer(fromLayerParam);const toLayer=layout.GetLayer(toLayerParam);if(!fromLayer||!toLayer||fromLayer===toLayer)return y;const [canvasX,canvasY]=fromLayer.LayerToCanvasCss(x,y);return toLayer.CanvasCssToLayer(canvasX,canvasY)[1]},layerscale(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetOwnScale():0},layerangle(layerParam){const layer=\nthis._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?C3.toDegrees(layer.GetOwnAngle()):0},layeropacity(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetOpacity()*100:0},layerscalerate(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetScaleRate():0},layerscrollx(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetScrollX():0},layerscrolly(layerParam){const layer=\nthis._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetScrollY():0},layerparallaxx(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetParallaxX()*100:0},layerparallaxy(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetParallaxY()*100:0},layerzelevation(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetZElevation():0},layerindex(layerParam){const layer=\nthis._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetIndex():-1},canvassnapshot(){const canvasManager=this._runtime.GetCanvasManager();if(!canvasManager)return\"\";return canvasManager.GetCanvasSnapshotUrl()},loopindex(name){const loopStack=this._loopStack;if(!loopStack.IsInLoop())return 0;if(name){const loop=loopStack.FindByName(name);return loop?loop.GetIndex():0}else return loopStack.GetCurrent().GetIndex()},savestatejson(){return this._runtime.GetLastSaveJsonString()},callmapped(name,\nstr,...paramResults){const mapEntry=this._GetFunctionMap(name.toLowerCase(),false);if(!mapEntry){console.warn(`[Construct] Call mapped function: map name '${name}' not found; returning 0`);return 0}let functionBlock=mapEntry.strMap.get(str.toLowerCase());if(!functionBlock)if(mapEntry.defaultFunc)functionBlock=mapEntry.defaultFunc;else{console.warn(`[Construct] Call mapped function: no function associated with map '${name}' string '${str}'; returning 0 (consider setting a default)`);return 0}const returnType=\nfunctionBlock.GetReturnType();const defaultReturnValue=functionBlock.GetDefaultReturnValue();if(returnType===0){console.warn(`[Construct] Call mapped function: map '${name}' string '${str}' has no return type so cannot be called from an expression; returning 0`);return 0}if(!functionBlock.IsEnabled())return defaultReturnValue;const runtime=this._runtime;const eventSheetManager=runtime.GetEventSheetManager();const currentEvent=eventSheetManager.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiersIncludingParents();\nconst hasAnySolModifiers=solModifiers.length>0;if(hasAnySolModifiers)if(functionBlock.IsCopyPicked())eventSheetManager.PushCopySol(solModifiers);else eventSheetManager.PushCleanSol(solModifiers);const calleeParameters=functionBlock.GetFunctionParameters();for(let i=paramResults.length,len=calleeParameters.length;i<len;++i)paramResults.push(calleeParameters[i].GetInitialValue());const callEventBlock=functionBlock.GetEventBlock();const returnValue=callEventBlock.RunAsExpressionFunctionCall(callEventBlock.GetSolModifiersIncludingParents(),\nfunctionBlock.IsCopyPicked(),returnType,defaultReturnValue,...paramResults);if(hasAnySolModifiers)eventSheetManager.PopSol(solModifiers);return returnValue},loadingprogress(){return this._runtime.GetAssetManager().GetLoadProgress()},imageloadingprogress(){if(this._imagesLoadingTotal===0)return 1;return this._imagesLoadingComplete/this._imagesLoadingTotal},renderer(){if(this._runtime.GetWebGPURenderer())return\"webgpu\";else return\"webgl\"},rendererdetail(){if(this._runtime.GetWebGPURenderer())return this._runtime.GetWebGPURenderer().GetBasicAdapterInfoString();\nelse return this._runtime.GetWebGLRenderer().GetUnmaskedRenderer()},imagememoryusage(){let ret=this._runtime.GetRenderer().GetEstimatedTextureMemoryUsage();return Math.round(100*ret/(1024*1024))/100},rgb(r,g,b){return C3.PackRGB(r,g,b)},rgbex(r,g,b){return C3.PackRGBEx(r/100,g/100,b/100)},rgba(r,g,b,a){return C3.PackRGBAEx(r/100,g/100,b/100,a/100)},rgbex255(r,g,b){return C3.PackRGBEx(r/255,g/255,b/255)},rgba255(r,g,b,a){return C3.PackRGBAEx(r/255,g/255,b/255,a/255)},projectname(){return this._runtime.GetProjectName()},\nprojectversion(){return this._runtime.GetProjectVersion()},currenteventsheetname(){return this._runtime.GetCurrentEvent().GetEventSheet().GetName()},currenteventnumber(){return this._runtime.GetCurrentEvent().GetDisplayNumber()}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Plugins.Sprite=class SpritePlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}}\n{const C3=self.C3;const spawnPickStack=[];C3.Plugins.Sprite.Type=class SpriteType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass);this._animations=objectClass.GetAnimations()}Release(){C3.clearArray(this._animations);super.Release()}OnCreate(){for(const a of this._animations)a.LoadAllAssets(this._runtime)}LoadTextures(renderer){const opts={sampling:this._runtime.GetSampling()};return Promise.all(this._animations.map(a=>a.LoadAllTextures(renderer,opts)))}ReleaseTextures(){for(const a of this._animations)a.ReleaseAllTextures()}OnDynamicTextureLoadComplete(){this._UpdateAllCurrentTexture()}_UpdateAllCurrentTexture(){for(const inst of this._objectClass.instancesIncludingPendingCreate())inst.GetSdkInstance()._UpdateCurrentTexture()}FinishCondition(doPick){C3.Plugins.Sprite.FinishCollisionCondition(this,\ndoPick)}BeforeRunAction(method){spawnPickStack.push({objectClass:null,createHierarchy:false,instances:[]})}_SpawnPickInstance(objectClass,inst,createHierarchy){const entry=spawnPickStack.at(-1);entry.objectClass=objectClass;entry.createHierarchy=createHierarchy;entry.instances.push(inst)}AfterRunAction(method){const entry=spawnPickStack.pop();const objectClass=entry.objectClass;const createHierarchy=entry.createHierarchy;if(!objectClass)return;const pickMap=new Map;for(const inst of entry.instances)inst.CollectInstancesToPick(pickMap,\nobjectClass,createHierarchy);for(const [pickObjectClass,instSet]of pickMap)pickObjectClass.GetCurrentSol().SetSetPicked(instSet)}}}\n{const C3=self.C3;const C3X=self.C3X;const INITIALLY_VISIBLE=0;const INITIAL_ANIMATION=1;const INITIAL_FRAME=2;const ENABLE_COLLISIONS=3;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);const tempVec2=C3.New(C3.Vector2);const FLAG_PLAYING_FORWARDS=1<<0;const FLAG_ANIMATION_PLAYING=1<<1;const FLAG_ANIMATION_TRIGGER=1<<2;C3.Plugins.Sprite.Instance=class SpriteInstance extends C3.SDKWorldInstanceBase{constructor(inst,properties){super(inst);let initiallyVisible=true;let initialAnimation=\n\"\";let initialFrame=0;let collisionEnabled=true;if(properties){initiallyVisible=!!properties[INITIALLY_VISIBLE];initialAnimation=properties[INITIAL_ANIMATION];initialFrame=properties[INITIAL_FRAME];collisionEnabled=properties[ENABLE_COLLISIONS]}this._currentAnimation=this._objectClass.GetAnimationByName(initialAnimation)||this._objectClass.GetAnimations()[0];this._currentFrameIndex=C3.clamp(initialFrame,0,this._currentAnimation.GetFrameCount()-1);this._currentAnimationFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);\nconst initialImageInfo=this._currentAnimationFrame.GetImageInfo();this._currentTexture=initialImageInfo.GetTexture();this._currentRcTex=initialImageInfo.GetTexRect();this._currentQuadTex=initialImageInfo.GetTexQuad();this.HandleRendererContextLoss();inst.SetFlag(FLAG_ANIMATION_PLAYING,true);inst.SetFlag(FLAG_PLAYING_FORWARDS,this._currentAnimation.GetSpeed()>=0);this._currentAnimationSpeed=Math.abs(this._currentAnimation.GetSpeed());this._currentAnimationRepeatTo=this._currentAnimation.GetRepeatTo();\nthis._animationTimer=C3.New(C3.KahanSum);this._frameStartTime=0;this._animationRepeats=0;this._animTriggerName=\"\";this._changeAnimFrameIndex=-1;this._changeAnimationName=\"\";this._changeAnimationFrom=0;const wi=this.GetWorldInfo();this._bquadRef=wi.GetBoundingQuad();wi.SetVisible(initiallyVisible);wi.SetCollisionEnabled(collisionEnabled);wi.SetOriginX(this._currentAnimationFrame.GetOriginX());wi.SetOriginY(this._currentAnimationFrame.GetOriginY());wi.SetSourceCollisionPoly(this._currentAnimationFrame.GetCollisionPoly());\nwi.SetBboxChanged();if((this._objectClass.GetAnimationCount()!==1||this._objectClass.GetAnimations()[0].GetFrameCount()!==1)&&this._currentAnimationSpeed!==0)this._StartTicking()}Release(){this._currentAnimation=null;this._currentAnimationFrame=null;this._currentTexture=null;this._animationTimer=null;super.Release()}GetCurrentImageInfo(){return this._currentAnimationFrame.GetImageInfo()}IsOriginalSizeKnown(){return true}OnRendererContextLost(){this._currentTexture=null}OnRendererContextRestored(){this._UpdateCurrentTexture()}Draw(renderer){const texture=\nthis._currentTexture;if(texture===null)return;renderer.SetTexture(texture);const wi=this.GetWorldInfo();if(wi.HasMesh())this._DrawMesh(wi,renderer);else this._DrawStandard(wi,renderer)}_DrawStandard(wi,renderer){let quad=this._bquadRef;if(this._runtime.IsPixelRoundingEnabled())quad=wi.PixelRoundQuad(quad);renderer.Quad4(quad,this._currentQuadTex)}_DrawMesh(wi,renderer){const transformedMesh=wi.GetTransformedMesh();if(wi.IsMeshChanged()){wi.CalculateBbox(tempRect,tempQuad,false);let quad=tempQuad;\nif(this._runtime.IsPixelRoundingEnabled())quad=wi.PixelRoundQuad(quad);transformedMesh.CalculateTransformedMesh(wi.GetSourceMesh(),quad,this._currentQuadTex);wi.SetMeshChanged(false)}transformedMesh.Draw(renderer)}GetAnimationTime(){return this._animationTimer.Get()}IsAnimationPlaying(){return this._inst.GetFlag(FLAG_ANIMATION_PLAYING)}SetAnimationPlaying(e){this._inst.SetFlag(FLAG_ANIMATION_PLAYING,e)}IsPlayingForwards(){return this._inst.GetFlag(FLAG_PLAYING_FORWARDS)}SetPlayingForwards(e){this._inst.SetFlag(FLAG_PLAYING_FORWARDS,\ne)}IsInAnimationTrigger(){return this._inst.GetFlag(FLAG_ANIMATION_TRIGGER)}SetInAnimationTrigger(e){this._inst.SetFlag(FLAG_ANIMATION_TRIGGER,e)}Tick(){if(this._changeAnimationName)this._DoChangeAnimation();if(this._changeAnimFrameIndex>=0)this._DoChangeAnimFrame();const currentAnimationSpeed=this._currentAnimationSpeed;if(!this.IsAnimationPlaying()||currentAnimationSpeed===0){this._StopTicking();return}const dt=this._runtime.GetDt(this._inst);this._animationTimer.Add(dt);const now=this.GetAnimationTime();\nconst prevFrame=this._currentAnimationFrame;const currentFrameTime=prevFrame.GetDuration()/currentAnimationSpeed;if(now<this._frameStartTime+currentFrameTime)return;const currentAnimation=this._currentAnimation;const repeatTo=this._currentAnimationRepeatTo;const frameCount=currentAnimation.GetFrameCount();const repeatCount=currentAnimation.GetRepeatCount();const isLooping=currentAnimation.IsLooping();const isPingPong=currentAnimation.IsPingPong();if(this.IsPlayingForwards())this._currentFrameIndex++;\nelse this._currentFrameIndex--;this._frameStartTime+=currentFrameTime;if(this._currentFrameIndex>=frameCount)if(isPingPong){this.SetPlayingForwards(false);this._currentFrameIndex=frameCount-2}else if(isLooping)this._currentFrameIndex=repeatTo;else{this._animationRepeats++;if(this._animationRepeats>=repeatCount)this._FinishAnimation(false);else this._currentFrameIndex=repeatTo}if(this._currentFrameIndex<0)if(isPingPong){this._currentFrameIndex=1;this.SetPlayingForwards(true);if(!isLooping){this._animationRepeats++;\nif(this._animationRepeats>=repeatCount)this._FinishAnimation(true)}}else if(isLooping)this._currentFrameIndex=repeatTo;else{this._animationRepeats++;if(this._animationRepeats>=repeatCount)this._FinishAnimation(true);else this._currentFrameIndex=repeatTo}this._currentFrameIndex=C3.clamp(this._currentFrameIndex,0,frameCount-1);const nextFrame=currentAnimation.GetFrameAt(this._currentFrameIndex);if(now>this._frameStartTime+nextFrame.GetDuration()/currentAnimationSpeed)this._frameStartTime=now;this._OnFrameChanged(prevFrame,\nnextFrame)}_FinishAnimation(reverse){this._currentFrameIndex=reverse?0:this._currentAnimation.GetFrameCount()-1;this.SetAnimationPlaying(false);this._animTriggerName=this._currentAnimation.GetName();this.SetInAnimationTrigger(true);this.DispatchScriptEvent(\"animationend\",false,{animationName:this._animTriggerName});this.Trigger(C3.Plugins.Sprite.Cnds.OnAnyAnimFinished);this.Trigger(C3.Plugins.Sprite.Cnds.OnAnimFinished);this.SetInAnimationTrigger(false);this._animationRepeats=0}_OnFrameChanged(prevFrame,\nnextFrame,opts){if(prevFrame===nextFrame)return;const wi=this.GetWorldInfo();const prevImage=prevFrame.GetImageInfo();const nextImage=nextFrame.GetImageInfo();const oldW=prevImage.GetWidth();const oldH=prevImage.GetHeight();const newW=nextImage.GetWidth();const newH=nextImage.GetHeight();if(opts&&opts.onFrameChange)opts.onFrameChange(wi,oldW,oldH,newW,newH);else{if(oldW!==newW)wi.SetWidth(wi.GetWidth()*(newW/oldW));if(oldH!==newH)wi.SetHeight(wi.GetHeight()*(newH/oldH))}wi.SetOriginX(nextFrame.GetOriginX());\nwi.SetOriginY(nextFrame.GetOriginY());wi.SetSourceCollisionPoly(nextFrame.GetCollisionPoly());wi.SetBboxChanged();this._currentAnimationFrame=nextFrame;this._currentTexture=nextImage.GetTexture();this._currentRcTex=nextImage.GetTexRect();this._currentQuadTex=nextImage.GetTexQuad();const behaviorInstances=this.GetInstance().GetBehaviorInstances();for(let i=0,len=behaviorInstances.length;i<len;++i)behaviorInstances[i].OnSpriteFrameChanged(prevFrame,nextFrame);this.DispatchScriptEvent(\"framechange\",\nfalse,{animationName:this._currentAnimation.GetName(),animationFrame:this._currentFrameIndex});this.Trigger(C3.Plugins.Sprite.Cnds.OnFrameChanged);this._runtime.UpdateRender()}_StartAnim(from){this.SetAnimationPlaying(true);this._frameStartTime=this.GetAnimationTime();if(from===1&&this._currentFrameIndex!==0){this._changeAnimFrameIndex=0;if(!this.IsInAnimationTrigger())this._DoChangeAnimFrame()}this._StartTicking()}_SetAnim(animName,from){this._changeAnimationName=animName;this._changeAnimationFrom=\nfrom;this._StartTicking();if(!this.IsInAnimationTrigger())this._DoChangeAnimation()}_GetCurrentAnimation(){return this._currentAnimation}_GetCurrentAnimationName(){if(this._changeAnimationName)return this._changeAnimationName;else return this._currentAnimation.GetName()}_SetAnimFrame(frameNum){if(!isFinite(frameNum))return;this._changeAnimFrameIndex=frameNum;if(!this.IsInAnimationTrigger())this._DoChangeAnimFrame()}_GetAnimFrame(){return this._currentFrameIndex}_SetAnimSpeed(s){this._currentAnimationSpeed=\nMath.abs(s);this.SetPlayingForwards(s>=0);if(this._currentAnimationSpeed>0)this._StartTicking()}_GetAnimSpeed(){return this.IsPlayingForwards()?this._currentAnimationSpeed:-this._currentAnimationSpeed}_SetAnimRepeatToFrame(f){f=C3.clamp(Math.floor(f),0,this._currentAnimation.GetFrameCount()-1);this._currentAnimationRepeatTo=f}_GetAnimRepeatToFrame(){return this._currentAnimationRepeatTo}_DoChangeAnimation(opts){const prevFrame=this._currentAnimationFrame;const animation=this._objectClass.GetAnimationByName(this._changeAnimationName);\nthis._changeAnimationName=\"\";if(!animation)return;if(animation===this._currentAnimation&&this.IsAnimationPlaying())return;this._currentAnimation=animation;this.SetPlayingForwards(animation.GetSpeed()>=0);this._currentAnimationSpeed=Math.abs(animation.GetSpeed());this._currentAnimationRepeatTo=animation.GetRepeatTo();this._currentFrameIndex=C3.clamp(this._currentFrameIndex,0,this._currentAnimation.GetFrameCount()-1);if(this._changeAnimationFrom===1)this._currentFrameIndex=0;this.SetAnimationPlaying(true);\nthis._frameStartTime=this.GetAnimationTime();const nextFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);this._OnFrameChanged(prevFrame,nextFrame,opts)}_DoChangeAnimFrame(){const prevFrame=this._currentAnimationFrame;const prevFrameIndex=this._currentFrameIndex;this._currentFrameIndex=C3.clamp(Math.floor(this._changeAnimFrameIndex),0,this._currentAnimation.GetFrameCount()-1);this._changeAnimFrameIndex=-1;if(prevFrameIndex===this._currentFrameIndex)return;const nextFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);\nthis._OnFrameChanged(prevFrame,nextFrame);this._frameStartTime=this.GetAnimationTime()}_UpdateCurrentTexture(){const curImageInfo=this._currentAnimationFrame.GetImageInfo();this._currentTexture=curImageInfo.GetTexture();this._currentRcTex=curImageInfo.GetTexRect();this._currentQuadTex=curImageInfo.GetTexQuad();this.GetWorldInfo().SetMeshChanged(true)}GetTexture(){return this._currentTexture}GetTexRect(){return this._currentRcTex}GetTexQuad(){return this._currentQuadTex}GetImagePointCount(){return this._currentAnimationFrame.GetImagePointCount()}GetImagePoint(nameOrIndex){const frame=\nthis._currentAnimationFrame;const wi=this.GetWorldInfo();let ip=null;if(typeof nameOrIndex===\"string\")ip=frame.GetImagePointByName(nameOrIndex);else if(typeof nameOrIndex===\"number\")ip=frame.GetImagePointByIndex(nameOrIndex-1);else throw new TypeError(\"expected string or number\");let ptZ=wi.GetTotalZElevation();if(!ip)return[wi.GetX(),wi.GetY(),ptZ];tempVec2.copy(ip.GetVec2());if(wi.HasMesh()){const [tx,ty,tz]=wi.GetSourceMesh().TransformPoint(tempVec2.getX(),tempVec2.getY());tempVec2.set(tx,ty);\nptZ+=tz}tempVec2.offset(-frame.GetOriginX(),-frame.GetOriginY());tempVec2.scale(wi.GetWidth(),wi.GetHeight());tempVec2.rotate(wi.GetAngle());tempVec2.offset(wi.GetX(),wi.GetY());return[tempVec2.getX(),tempVec2.getY(),ptZ]}GetCollisionPolyPointCount(){return this.GetWorldInfo().GetTransformedCollisionPoly().pointCount()}GetCollisionPolyPoint(index){index=Math.floor(index);const wi=this.GetWorldInfo();const poly=wi.GetTransformedCollisionPoly();const pointCount=poly.pointCount();if(index===pointCount)index=\n0;if(index<0||index>=pointCount)return[0,0];const pointsArr=poly.pointsArr();return[pointsArr[index*2+0]+wi.GetX(),pointsArr[index*2+1]+wi.GetY()]}GetDebuggerProperties(){const Acts=C3.Plugins.Sprite.Acts;const prefix=\"plugins.sprite.debugger.animation-properties\";return[{title:prefix+\".title\",properties:[{name:prefix+\".current-animation\",value:this._currentAnimation.GetName(),onedit:v=>this.CallAction(Acts.SetAnim,v,0)},{name:prefix+\".current-frame\",value:this._currentFrameIndex,onedit:v=>this.CallAction(Acts.SetAnimFrame,\nv)},{name:prefix+\".is-playing\",value:this.IsAnimationPlaying(),onedit:v=>v?this.CallAction(Acts.StartAnim,0):this.CallAction(Acts.StopAnim)},{name:prefix+\".speed\",value:this._currentAnimationSpeed,onedit:v=>this.CallAction(Acts.SetAnimSpeed,v)},{name:prefix+\".repeats\",value:this._animationRepeats,onedit:v=>this._animationRepeats=v}]}]}SaveToJson(){const o={\"a\":this._currentAnimation.GetSID()};if(this._frameStartTime!==0)o[\"fs\"]=this._frameStartTime;const animTime=this.GetAnimationTime();if(animTime!==\n0)o[\"at\"]=animTime;if(this._currentFrameIndex!==0)o[\"f\"]=this._currentFrameIndex;if(this._currentAnimationSpeed!==0)o[\"cas\"]=this._currentAnimationSpeed;if(this._animationRepeats!==1)o[\"ar\"]=this._animationRepeats;if(this._currentAnimationRepeatTo!==0)o[\"rt\"]=this._currentAnimationRepeatTo;if(!this.IsAnimationPlaying())o[\"ap\"]=this.IsAnimationPlaying();if(!this.IsPlayingForwards())o[\"af\"]=this.IsPlayingForwards();const wi=this.GetWorldInfo();if(wi.IsCollisionEnabled())o[\"ce\"]=wi.IsCollisionEnabled();\nreturn o}LoadFromJson(o){const anim=this.GetObjectClass().GetAnimationBySID(o[\"a\"]);if(anim)this._currentAnimation=anim;this._frameStartTime=o.hasOwnProperty(\"fs\")?o[\"fs\"]:0;this._animationTimer.Set(o.hasOwnProperty(\"at\")?o[\"at\"]:0);const frameIndex=o.hasOwnProperty(\"f\")?o[\"f\"]:0;this._currentFrameIndex=C3.clamp(frameIndex,0,this._currentAnimation.GetFrameCount()-1);this._currentAnimationSpeed=o.hasOwnProperty(\"cas\")?o[\"cas\"]:0;this._animationRepeats=o.hasOwnProperty(\"ar\")?o[\"ar\"]:1;const repeatToIndex=\no.hasOwnProperty(\"rt\")?o[\"rt\"]:0;this._currentAnimationRepeatTo=C3.clamp(repeatToIndex,0,this._currentAnimation.GetFrameCount()-1);this.SetAnimationPlaying(o.hasOwnProperty(\"ap\")?!!o[\"ap\"]:true);this.SetPlayingForwards(o.hasOwnProperty(\"af\")?!!o[\"af\"]:true);const nextFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);this._currentAnimationFrame=nextFrame;this._UpdateCurrentTexture();const wi=this.GetWorldInfo();wi.SetOriginX(nextFrame.GetOriginX());wi.SetOriginY(nextFrame.GetOriginY());\nwi.SetSourceCollisionPoly(nextFrame.GetCollisionPoly());wi.SetCollisionEnabled(!!o[\"ce\"]);if(this.IsAnimationPlaying())this._StartTicking()}GetPropertyValueByIndex(index){const wi=this.GetWorldInfo();switch(index){case ENABLE_COLLISIONS:return wi.IsCollisionEnabled();case INITIAL_FRAME:return C3.clamp(this._currentFrameIndex,0,this._currentAnimation.GetFrameCount()-1);case INITIAL_ANIMATION:return this._currentAnimation.GetName()}}SetPropertyValueByIndex(index,value,opts){const wi=this.GetWorldInfo();\nswitch(index){case ENABLE_COLLISIONS:{wi.SetCollisionEnabled(!!value);break}case INITIAL_FRAME:{this.SetAnimationPlaying(false);const totalFrames=this._currentAnimation.GetFrameCount()-1;const nextIndex=value=C3.clamp(value,0,totalFrames);const prevFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);const nextFrame=this._currentAnimation.GetFrameAt(nextIndex);this._OnFrameChanged(prevFrame,nextFrame,opts);this._currentFrameIndex=C3.clamp(nextIndex,0,totalFrames);break}case INITIAL_ANIMATION:{this._changeAnimationName=\nvalue;this._DoChangeAnimation(opts);const totalFrames=this._currentAnimation.GetFrameCount();if(totalFrames>1&&this._currentAnimation.GetSpeed()>0)this._StartTicking();else this._StopTicking();break}}}GetScriptInterfaceClass(){return self.ISpriteInstance}};const map=new WeakMap;const ANIM_FROM_MODES=new Map([[\"current-frame\",0],[\"beginning\",1]]);self.ISpriteInstance=class ISpriteInstance extends self.IWorldInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}getImagePointCount(){return map.get(this).GetImagePointCount()}getImagePointX(nameOrIndex){return this.getImagePoint(nameOrIndex)[0]}getImagePointY(nameOrIndex){return this.getImagePoint(nameOrIndex)[1]}getImagePointZ(nameOrIndex){return this.getImagePoint(nameOrIndex)[2]}getImagePoint(nameOrIndex){if(typeof nameOrIndex!==\n\"string\"&&typeof nameOrIndex!==\"number\")throw new TypeError(\"expected string or number\");return map.get(this).GetImagePoint(nameOrIndex)}getPolyPointCount(){return map.get(this).GetCollisionPolyPointCount()}getPolyPointX(index){C3X.RequireFiniteNumber(index);return map.get(this).GetCollisionPolyPoint(index)[0]}getPolyPointY(index){C3X.RequireFiniteNumber(index);return map.get(this).GetCollisionPolyPoint(index)[1]}getPolyPoint(index){C3X.RequireFiniteNumber(index);return map.get(this).GetCollisionPolyPoint(index)}stopAnimation(){map.get(this).SetAnimationPlaying(false)}startAnimation(from=\n\"current-frame\"){C3X.RequireString(from);const f=ANIM_FROM_MODES.get(from);if(typeof f===\"undefined\")throw new Error(\"invalid mode\");map.get(this)._StartAnim(f)}setAnimation(name,from=\"beginning\"){C3X.RequireString(name);C3X.RequireString(from);const f=ANIM_FROM_MODES.get(from);if(typeof f===\"undefined\")throw new Error(\"invalid mode\");const inst=map.get(this);if(!inst.GetObjectClass().GetAnimationByName(name))throw new Error(`animation name \"${name}\" does not exist`);inst._SetAnim(name,f)}getAnimation(name){C3X.RequireString(name);\nconst a=map.get(this).GetObjectClass().GetAnimationByName(name);return a?a.GetIAnimation():null}get animation(){return map.get(this)._GetCurrentAnimation().GetIAnimation()}get animationName(){return map.get(this)._GetCurrentAnimationName()}set animationFrame(frameIndex){C3X.RequireFiniteNumber(frameIndex);map.get(this)._SetAnimFrame(frameIndex)}get animationFrame(){return map.get(this)._GetAnimFrame()}set animationSpeed(s){C3X.RequireFiniteNumber(s);map.get(this)._SetAnimSpeed(s)}get animationSpeed(){return map.get(this)._GetAnimSpeed()}set animationRepeatToFrame(f){C3X.RequireFiniteNumber(f);\nmap.get(this)._SetAnimRepeatToFrame(f)}get animationRepeatToFrame(){return map.get(this)._GetAnimRepeatToFrame()}get imageWidth(){return map.get(this).GetCurrentImageInfo().GetWidth()}get imageHeight(){return map.get(this).GetCurrentImageInfo().GetHeight()}getImageSize(){const imageInfo=map.get(this).GetCurrentImageInfo();return[imageInfo.GetWidth(),imageInfo.GetHeight()]}async replaceCurrentAnimationFrame(blob){C3X.RequireInstanceOf(blob,Blob);const sdkInst=map.get(this);const runtime=sdkInst.GetRuntime();\nconst curImageInfo=sdkInst.GetCurrentImageInfo();const imageInfo=C3.New(C3.ImageInfo);imageInfo.LoadDynamicBlobAsset(runtime,blob);await imageInfo.LoadStaticTexture(runtime.GetRenderer(),{sampling:runtime.GetSampling()});if(sdkInst.WasReleased()){imageInfo.Release();return}curImageInfo.ReplaceWith(imageInfo);const sdkType=sdkInst.GetSdkType();sdkType._UpdateAllCurrentTexture();sdkType.GetObjectClass().Dispatcher().dispatchEvent(new C3.Event(\"animationframeimagechange\"));runtime.UpdateRender()}setSolidCollisionFilter(isInclusive,\ntags){C3X.RequireString(tags);map.get(this).GetWorldInfo().SetSolidCollisionFilter(!!isInclusive,tags)}}}\n{const C3=self.C3;C3.Plugins.Sprite.Cnds={IsAnimPlaying(animName){return C3.equalsNoCase(this._GetCurrentAnimationName(),animName)},CompareFrame(cmp,frameNum){return C3.compare(this._currentFrameIndex,cmp,frameNum)},CompareFrameTag(cmp,frameTag){const selfTag=this._currentAnimationFrame.GetTag();return C3.compare(selfTag.toLowerCase(),cmp,frameTag.toLowerCase())},CompareAnimSpeed(cmp,x){return C3.compare(this._GetAnimSpeed(),cmp,x)},OnAnimFinished(animName){return C3.equalsNoCase(this._animTriggerName,\nanimName)},OnAnyAnimFinished(){return true},OnFrameChanged(){return true},IsMirrored(){return this.GetWorldInfo().GetWidth()<0},IsFlipped(){return this.GetWorldInfo().GetHeight()<0},OnURLLoaded(){return true},OnURLFailed(){return true},IsCollisionEnabled(){return this.GetWorldInfo().IsCollisionEnabled()}}}\n{const C3=self.C3;C3.Plugins.Sprite.Acts={Spawn(objectClass,layer,imgPt,createHierarchy){if(!objectClass||!layer)return;const [imgPtX,imgPtY]=this.GetImagePoint(imgPt);const inst=this._runtime.CreateInstance(objectClass,layer,imgPtX,imgPtY,createHierarchy);if(!inst)return;if(createHierarchy)layer.SortAndAddInstancesByZIndex(inst);if(objectClass.GetPlugin().IsRotatable()){const instWi=inst.GetWorldInfo();instWi.SetAngle(this.GetWorldInfo().GetAngle());instWi.SetBboxChanged()}const eventSheetManager=\nthis._runtime.GetEventSheetManager();eventSheetManager.BlockFlushingInstances(true);inst._TriggerOnCreatedOnSelfAndRelated();eventSheetManager.BlockFlushingInstances(false);if(objectClass!==this._runtime.GetCurrentAction().GetObjectClass())this._sdkType._SpawnPickInstance(objectClass,inst,createHierarchy)},StopAnim(){this.SetAnimationPlaying(false)},StartAnim(from){this._StartAnim(from)},SetAnim(animName,from){this._SetAnim(animName,from)},SetAnimFrame(frameNum){this._SetAnimFrame(frameNum)},SetAnimSpeed(s){this._SetAnimSpeed(s)},\nSetAnimRepeatToFrame(f){this._SetAnimRepeatToFrame(f)},SetMirrored(m){const wi=this.GetWorldInfo();const oldW=wi.GetWidth();const newW=Math.abs(oldW)*(m===0?-1:1);if(oldW===newW)return;wi.SetWidth(newW);wi.SetBboxChanged()},SetFlipped(f){const wi=this.GetWorldInfo();const oldH=wi.GetHeight();const newH=Math.abs(oldH)*(f===0?-1:1);if(oldH===newH)return;wi.SetHeight(newH);wi.SetBboxChanged()},SetScale(s){const frame=this._currentAnimationFrame;const imageInfo=frame.GetImageInfo();const wi=this.GetWorldInfo();\nconst mirrorFactor=wi.GetWidth()<0?-1:1;const flipFactor=wi.GetHeight()<0?-1:1;const newWidth=imageInfo.GetWidth()*s*mirrorFactor;const newHeight=imageInfo.GetHeight()*s*flipFactor;if(wi.GetWidth()!==newWidth||wi.GetHeight()!==newHeight){wi.SetSize(newWidth,newHeight);wi.SetBboxChanged()}},async LoadURL(url,resize,crossOrigin){const curAnimFrame=this._currentAnimationFrame;const curImageInfo=curAnimFrame.GetImageInfo();const wi=this.GetWorldInfo();const runtime=this._runtime;const sdkType=this._sdkType;\nif(curImageInfo.GetURL()===url){if(resize===0){wi.SetSize(curImageInfo.GetWidth(),curImageInfo.GetHeight());wi.SetBboxChanged()}this.Trigger(C3.Plugins.Sprite.Cnds.OnURLLoaded);return}const imageInfo=C3.New(C3.ImageInfo);try{await imageInfo.LoadDynamicAsset(runtime,url);if(!imageInfo.IsLoaded())throw new Error(\"image failed to load\");if(this.WasReleased()){imageInfo.Release();return}await imageInfo.LoadStaticTexture(runtime.GetRenderer(),{sampling:runtime.GetSampling()})}catch(err){console.error(\"Load image from URL failed: \",\nerr);if(!this.WasReleased())this.Trigger(C3.Plugins.Sprite.Cnds.OnURLFailed);return}if(this.WasReleased()){imageInfo.Release();return}curImageInfo.ReplaceWith(imageInfo);sdkType._UpdateAllCurrentTexture();sdkType.GetObjectClass().Dispatcher().dispatchEvent(new C3.Event(\"animationframeimagechange\"));runtime.UpdateRender();if(resize===0){wi.SetSize(curImageInfo.GetWidth(),curImageInfo.GetHeight());wi.SetBboxChanged()}await this.TriggerAsync(C3.Plugins.Sprite.Cnds.OnURLLoaded)},SetCollisions(e){this.GetWorldInfo().SetCollisionEnabled(e)},\nSetSolidCollisionFilter(mode,tags){this.GetWorldInfo().SetSolidCollisionFilter(mode===0,tags)},SetEffect(effect){this.GetWorldInfo().SetBlendMode(effect);this._runtime.UpdateRender()}}}\n{const C3=self.C3;C3.Plugins.Sprite.Exps={AnimationFrame(){return this._currentFrameIndex},AnimationFrameCount(){return this._currentAnimation.GetFrameCount()},AnimationFrameTag(){return this._currentAnimationFrame.GetTag()},AnimationName(){return this._currentAnimation.GetName()},AnimationSpeed(){return this._GetAnimSpeed()},OriginalAnimationSpeed(){return this._currentAnimation.GetSpeed()},ImagePointX(imgpt){return this.GetImagePoint(imgpt)[0]},ImagePointY(imgpt){return this.GetImagePoint(imgpt)[1]},\nImagePointZ(imgpt){return this.GetImagePoint(imgpt)[2]},ImagePointCount(){return this.GetImagePointCount()},ImageWidth(){return this.GetCurrentImageInfo().GetWidth()},ImageHeight(){return this.GetCurrentImageInfo().GetHeight()},PolyPointXAt(i){return this.GetCollisionPolyPoint(i)[0]},PolyPointYAt(i){return this.GetCollisionPolyPoint(i)[1]},PolyPointCount(){return this.GetCollisionPolyPointCount()}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Plugins.Text=class TextPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Plugins.Text.Type=class TextType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}LoadTextures(renderer){}ReleaseTextures(){}}}\n{const C3=self.C3;const C3X=self.C3X;const TEMP_COLOR_ARRAY=[0,0,0];const TEXT=0;const ENABLE_BBCODE=1;const FONT=2;const SIZE=3;const LINE_HEIGHT=4;const BOLD=5;const ITALIC=6;const COLOR=7;const HORIZONTAL_ALIGNMENT=8;const VERTICAL_ALIGNMENT=9;const WRAPPING=10;const ICON_SET=11;const INITIALLY_VISIBLE=12;const ORIGIN=13;const READ_ALOUD=14;const HORIZONTAL_ALIGNMENTS=[\"left\",\"center\",\"right\"];const VERTICAL_ALIGNMENTS=[\"top\",\"center\",\"bottom\"];const WORD_WRAP=0;const CHARACTER_WRAP=1;const tempRect=\nnew C3.Rect;const tempQuad=new C3.Quad;const tempColor=new C3.Color;const tempVec2=C3.New(C3.Vector2);const BBCODE_TAG_TO_HTML=new Map([[\"b\",\"strong\"],[\"i\",\"em\"],[\"s\",\"s\"],[\"u\",\"u\"],[\"iconoffsety\",null]]);C3.Plugins.Text.Instance=class TextInstance extends C3.SDKWorldInstanceBase{constructor(inst,properties){super(inst);this._text=\"\";this._enableBBcode=true;this._faceName=\"Arial\";this._ptSize=12;this._lineHeightOffset=0;this._isBold=false;this._isItalic=false;this._color=C3.New(C3.Color);this._horizontalAlign=\n0;this._verticalAlign=0;this._wrapByWord=true;this._iconObjectClass=null;this._htmlString=\"\";this._isHtmlStringUpToDate=false;this._readAloud=false;this._screenReaderText=null;this._typewriterStartTime=-1;this._typewriterEndTime=-1;this._typewriterLength=0;this._rendererText=C3.New(C3.Gfx.RendererText,this._runtime.GetRenderer(),{timeout:5});this._rendererText.ontextureupdate=()=>this._runtime.UpdateRender();this._animationframeimagechange_handler=()=>this._OnIconObjectClassImageChanged();this._pendingUpdateIconSet=\nfalse;if(properties){this._text=properties[TEXT];this._enableBBcode=!!properties[ENABLE_BBCODE];this._faceName=properties[FONT];this._ptSize=properties[SIZE];this._lineHeightOffset=properties[LINE_HEIGHT];this._isBold=!!properties[BOLD];this._isItalic=!!properties[ITALIC];this._horizontalAlign=properties[HORIZONTAL_ALIGNMENT];this._verticalAlign=properties[VERTICAL_ALIGNMENT];this._wrapByWord=properties[WRAPPING]===WORD_WRAP;this._SetIconObjectClass(this._runtime.GetObjectClassBySID(properties[ICON_SET]));\nconst v=properties[COLOR];this._color.setRgb(v[0],v[1],v[2]);this.GetWorldInfo().SetVisible(properties[INITIALLY_VISIBLE]);this._readAloud=!!properties[READ_ALOUD]}this._UpdateTextSettings();this._UpdateScreenReaderText()}Release(){this._SetIconObjectClass(null);this._CancelTypewriter();if(this._screenReaderText){this._screenReaderText.Release();this._screenReaderText=null}this._rendererText.Release();this._rendererText=null;super.Release()}_UpdateTextSettings(){const rendererText=this._rendererText;\nrendererText.SetText(this._text);rendererText.SetBBCodeEnabled(this._enableBBcode);if(this._rendererText.IsBBCodeEnabled()&&this._iconObjectClass)this._rendererText.SetIconSet(this.GetRuntime().GetTextIconSet(this._iconObjectClass));else this._rendererText.SetIconSet(null);rendererText.SetIconSmoothing(this._runtime.GetSampling()!==\"nearest\");rendererText.SetFontName(this._faceName);rendererText.SetLineHeight(this._lineHeightOffset);rendererText.SetBold(this._isBold);rendererText.SetItalic(this._isItalic);\nrendererText.SetColor(this._color);rendererText.SetHorizontalAlignment(HORIZONTAL_ALIGNMENTS[this._horizontalAlign]);rendererText.SetVerticalAlignment(VERTICAL_ALIGNMENTS[this._verticalAlign]);rendererText.SetWordWrapMode(this._wrapByWord?\"word\":\"character\")}_UpdateTextSize(){const wi=this.GetWorldInfo();this._rendererText.SetFontSize(this._ptSize);this._rendererText.SetFontSizeScale(wi.GetSceneGraphScale());const layer=wi.GetLayer();const textZoom=layer.GetRenderScale()*layer.Get2DScaleFactorToZ(wi.GetTotalZElevation());\nif(wi.HasMesh()&&textZoom!==this._rendererText.GetZoom())wi.SetMeshChanged(true);this._rendererText.SetSize(wi.GetWidth(),wi.GetHeight(),textZoom)}_SetIconObjectClass(objectClass){if(objectClass&&(objectClass.IsFamily()||objectClass.GetPlugin().constructor!==C3.Plugins.Sprite))return;if(objectClass===this._iconObjectClass)return;if(this._iconObjectClass)this._iconObjectClass.Dispatcher().removeEventListener(\"animationframeimagechange\",this._animationframeimagechange_handler);this._iconObjectClass=\nobjectClass;if(this._iconObjectClass)this._iconObjectClass.Dispatcher().addEventListener(\"animationframeimagechange\",this._animationframeimagechange_handler);this._UpdateTextSettings();this._isHtmlStringUpToDate=false;this._runtime.UpdateRender()}_OnIconObjectClassImageChanged(){this._runtime.DeleteTextIconSet(this._iconObjectClass);this._runtime.UpdateRender();this._pendingUpdateIconSet=true}_UpdateScreenReaderText(){if(this._readAloud){let text=this._text;if(this._enableBBcode)text=C3.BBString.StripAnyTags(text);\nif(this._screenReaderText)this._screenReaderText.SetText(text);else this._screenReaderText=C3.New(C3.ScreenReaderText,this._runtime,text)}else if(this._screenReaderText){this._screenReaderText.Release();this._screenReaderText=null}}Draw(renderer){const wi=this.GetWorldInfo();this._UpdateTextSize();if(this._pendingUpdateIconSet){this._pendingUpdateIconSet=false;if(this._rendererText.IsBBCodeEnabled()&&this._iconObjectClass)this._rendererText.SetIconSet(this.GetRuntime().GetTextIconSet(this._iconObjectClass))}const texture=\nthis._rendererText.GetTexture();if(!texture)return;const layer=wi.GetLayer();if(wi.GetAngle()===0&&layer.GetAngle()===0&&wi.GetTotalZElevation()===0&&!wi.HasMesh()&&layer.RendersIn2DMode()){const quad=wi.GetBoundingQuad();const [dl,dt]=layer.LayerToDrawSurface(quad.getTlx(),quad.getTly());const [dr,db]=layer.LayerToDrawSurface(quad.getBrx(),quad.getBry());const offX=dl-Math.round(dl);const offY=dt-Math.round(dt);tempRect.set(dl,dt,dr,db);tempRect.offset(-offX,-offY);tempQuad.setFromRect(tempRect);\nconst [rtWidth,rtHeight]=renderer.GetRenderTargetSize(renderer.GetRenderTarget());this._runtime.GetCanvasManager().SetDeviceTransform(renderer,rtWidth,rtHeight);renderer.SetTexture(texture);renderer.Quad3(tempQuad,this._rendererText.GetTexRect());layer._SetTransform(renderer)}else{renderer.SetTexture(texture);if(wi.HasMesh())this._DrawMesh(wi,renderer);else this._DrawStandard(wi,renderer)}}_DrawStandard(wi,renderer){let quad=wi.GetBoundingQuad();if(this._runtime.IsPixelRoundingEnabled())quad=this._PixelRoundQuad(quad);\nrenderer.Quad3(quad,this._rendererText.GetTexRect())}_DrawMesh(wi,renderer){const transformedMesh=wi.GetTransformedMesh();if(wi.IsMeshChanged()){wi.CalculateBbox(tempRect,tempQuad,false);let quad=tempQuad;if(this._runtime.IsPixelRoundingEnabled())quad=this._PixelRoundQuad(quad);transformedMesh.CalculateTransformedMesh(wi.GetSourceMesh(),quad,this._rendererText.GetTexRect());wi.SetMeshChanged(false)}transformedMesh.Draw(renderer)}_PixelRoundQuad(quad){const offX=quad.getTlx()-Math.round(quad.getTlx());\nconst offY=quad.getTly()-Math.round(quad.getTly());if(offX===0&&offY===0)return quad;else{tempQuad.copy(quad);tempQuad.offset(-offX,-offY);return tempQuad}}GetCurrentSurfaceSize(){const texture=this._rendererText.GetTexture();if(texture)return[texture.GetWidth(),texture.GetHeight()];else return[100,100]}GetCurrentTexRect(){return this._rendererText.GetTexRect()}IsCurrentTexRotated(){return false}SaveToJson(){const o={\"t\":this._text,\"c\":this._color.toJSON(),\"fn\":this._faceName,\"ps\":this._ptSize};if(this._enableBBcode)o[\"bbc\"]=\nthis._enableBBcode;if(this._horizontalAlign!==0)o[\"ha\"]=this._horizontalAlign;if(this._verticalAlign!==0)o[\"va\"]=this._verticalAlign;if(!this._wrapByWord)o[\"wr\"]=this._wrapByWord;if(this._lineHeightOffset!==0)o[\"lho\"]=this._lineHeightOffset;if(this._isBold)o[\"b\"]=this._isBold;if(this._isItalic)o[\"i\"]=this._isItalic;if(this._typewriterEndTime!==-1)o[\"tw\"]={\"st\":this._typewriterStartTime,\"en\":this._typewriterEndTime,\"l\":this._typewriterLength};if(this._iconObjectClass)o[\"ioc\"]=this._iconObjectClass.GetSID();\nreturn o}LoadFromJson(o){this._CancelTypewriter();this._text=o[\"t\"],this._color.setFromJSON(o[\"c\"]);this._faceName=o[\"fn\"],this._ptSize=o[\"ps\"];this._enableBBcode=o.hasOwnProperty(\"bbc\")?o[\"bbc\"]:false;this._horizontalAlign=o.hasOwnProperty(\"ha\")?o[\"ha\"]:0;this._verticalAlign=o.hasOwnProperty(\"va\")?o[\"va\"]:0;this._wrapByWord=o.hasOwnProperty(\"wr\")?o[\"wr\"]:true;this._lineHeightOffset=o.hasOwnProperty(\"lho\")?o[\"lho\"]:0;this._isBold=o.hasOwnProperty(\"b\")?o[\"b\"]:false;this._isItalic=o.hasOwnProperty(\"i\")?\no[\"i\"]:false;if(o.hasOwnProperty(\"tw\")){const tw=o[\"tw\"];this._typewriterStartTime=tw[\"st\"];this._typewriterEndTime=tw[\"en\"];this._typewriterLength=tw[\"l\"]}if(o.hasOwnProperty(\"ioc\")){const objectClass=this.GetRuntime().GetObjectClassBySID(o[\"ioc\"]);if(objectClass)this._SetIconObjectClass(objectClass)}else this._SetIconObjectClass(null);this._UpdateTextSettings();this._UpdateScreenReaderText();this._isHtmlStringUpToDate=false;if(this._typewriterEndTime!==-1)this._StartTicking()}GetPropertyValueByIndex(index){switch(index){case TEXT:return this.GetText();\ncase ENABLE_BBCODE:return this._enableBBcode;case FONT:return this._GetFontFace();case SIZE:return this._GetFontSize();case LINE_HEIGHT:return this._GetLineHeight();case BOLD:return this._IsBold();case ITALIC:return this._IsItalic();case COLOR:TEMP_COLOR_ARRAY[0]=this._color.getR();TEMP_COLOR_ARRAY[1]=this._color.getG();TEMP_COLOR_ARRAY[2]=this._color.getB();return TEMP_COLOR_ARRAY;case HORIZONTAL_ALIGNMENT:return this._GetHAlign();case VERTICAL_ALIGNMENT:return this._GetVAlign();case WRAPPING:return this._IsWrapByWord()?\nCHARACTER_WRAP:WORD_WRAP;case READ_ALOUD:return this._IsReadAloud()}}SetPropertyValueByIndex(index,value){switch(index){case TEXT:this._SetText(value);break;case ENABLE_BBCODE:if(this._enableBBcode===!!value)return;this._enableBBcode=!!value;this._UpdateTextSettings();break;case FONT:this._SetFontFace(value);break;case SIZE:this._SetFontSize(value);break;case LINE_HEIGHT:this._SetLineHeight(value);break;case BOLD:this._SetBold(value);break;case ITALIC:this._SetItalic(value);break;case COLOR:const c=\nthis._color;const v=value;if(c.getR()===v[0]&&c.getG()===v[1]&&c.getB()===v[2])return;this._color.setRgb(v[0],v[1],v[2]);this._UpdateTextSettings();break;case HORIZONTAL_ALIGNMENT:this._SetHAlign(value);break;case VERTICAL_ALIGNMENT:this._SetVAlign(value);break;case WRAPPING:this._SetWrapByWord(value===WORD_WRAP);break}}SetPropertyColorOffsetValueByIndex(index,r,g,b){if(r===0&&g===0&&b===0)return;switch(index){case COLOR:this._color.addRgb(r,g,b);this._UpdateTextSettings();break}}_SetText(text){if(this._text===\ntext)return;this._text=text;this._rendererText.SetText(text);this._UpdateScreenReaderText();this._isHtmlStringUpToDate=false;this._runtime.UpdateRender()}GetText(){return this._text}_StartTypewriter(text,duration){this._UpdateTextSize();this._SetText(text);this._typewriterStartTime=this._runtime.GetWallTime();this._typewriterEndTime=this._typewriterStartTime+duration/this.GetInstance().GetActiveTimeScale();this._typewriterLength=this._rendererText.GetLengthInGraphemes();this._rendererText.SetDrawMaxCharacterCount(0);\nthis._StartTicking()}_CancelTypewriter(){this._typewriterStartTime=-1;this._typewriterEndTime=-1;this._typewriterLength=0;this._rendererText.SetDrawMaxCharacterCount(-1);this._StopTicking()}_FinishTypewriter(){if(this._typewriterEndTime===-1)return;this._CancelTypewriter();this.Trigger(C3.Plugins.Text.Cnds.OnTypewriterTextFinished);this._runtime.UpdateRender()}_SetFontFace(face){if(this._faceName===face)return;this._faceName=face;this._rendererText.SetFontName(face);this._runtime.UpdateRender()}_GetFontFace(){return this._faceName}_SetBold(b){b=\n!!b;if(this._isBold===b)return;this._isBold=b;this._rendererText.SetBold(b);this._runtime.UpdateRender()}_IsBold(){return this._isBold}_SetItalic(i){i=!!i;if(this._isItalic===i)return;this._isItalic=i;this._rendererText.SetItalic(i);this._runtime.UpdateRender()}_IsItalic(){return this._isItalic}_SetFontSize(size){if(this._ptSize===size)return;this._ptSize=size;this._runtime.UpdateRender()}_GetFontSize(){return this._ptSize}_SetFontColor(color){if(this._color.equalsIgnoringAlpha(color))return;this._color.copyRgb(color);\nthis._rendererText.SetColor(this._color);this._runtime.UpdateRender()}_GetFontColor(){return this._color}_SetLineHeight(lho){if(this._lineHeightOffset===lho)return;this._lineHeightOffset=lho;this._UpdateTextSettings();this._runtime.UpdateRender()}_GetLineHeight(){return this._lineHeightOffset}_SetHAlign(h){if(this._horizontalAlign===h)return;this._horizontalAlign=h;this._UpdateTextSettings();this._runtime.UpdateRender()}_GetHAlign(){return this._horizontalAlign}_SetVAlign(v){if(this._verticalAlign===\nv)return;this._verticalAlign=v;this._UpdateTextSettings();this._runtime.UpdateRender()}_GetVAlign(){return this._verticalAlign}_SetWrapByWord(w){w=!!w;if(this._wrapByWord===w)return;this._wrapByWord=w;this._UpdateTextSettings();this._runtime.UpdateRender()}_IsWrapByWord(){return this._wrapByWord}_SetReadAloud(r){this._readAloud=!!r;this._UpdateScreenReaderText()}_IsReadAloud(){return this._readAloud}_GetTextWidth(){this._UpdateTextSize();return this._rendererText.GetTextWidth()}_GetTextHeight(){this._UpdateTextSize();\nreturn this._rendererText.GetTextHeight()}_GetTagAtPosition(x,y){this._UpdateTextSize();const wi=this.GetWorldInfo();tempVec2.set(x-wi.GetX(),y-wi.GetY());tempVec2.rotate(-wi.GetAngle());tempVec2.offset(wi.GetWidth()*wi.GetOriginX(),wi.GetHeight()*wi.GetOriginY());tempVec2.divide(wi.GetWidth(),wi.GetHeight());tempVec2.scale(this._rendererText.GetWidth(),this._rendererText.GetHeight());const frag=this._rendererText.HitTestFragment(tempVec2.getX(),tempVec2.getY());if(frag){const fragTagStyle=frag.GetStyleTag(\"tag\");\nif(fragTagStyle)return fragTagStyle.param}return\"\"}_HasTagAtPosition(tag,x,y){const hitTag=this._GetTagAtPosition(x,y);return hitTag&&C3.equalsNoCase(tag,hitTag)}_GetTagPosition(tag,index){this._UpdateTextSize();index=Math.floor(index);const frag=this._rendererText.FindFragmentWithTag(tag,index);if(!frag)return null;const wi=this.GetWorldInfo();const scale=this._rendererText.GetDrawScale();const posX=frag.GetPosX();const posY=frag.GetPosY()-(frag.GetHeight()-frag.GetFontBoundingBoxDescent())*scale;\nconst width=frag.GetWidth()*scale/this._rendererText.GetWidth()*wi.GetWidth();const height=frag.GetHeight()*scale/this._rendererText.GetHeight()*wi.GetHeight();tempVec2.set(posX,posY);tempVec2.divide(this._rendererText.GetWidth(),this._rendererText.GetHeight());tempVec2.scale(wi.GetWidth(),wi.GetHeight());tempVec2.offset(-wi.GetWidth()*wi.GetOriginX(),-wi.GetHeight()*wi.GetOriginY());tempVec2.rotate(wi.GetAngle());tempVec2.offset(wi.GetX(),wi.GetY());return{x:tempVec2.getX(),y:tempVec2.getY(),width,\nheight}}_GetTagCount(tag){this._UpdateTextSize();return this._rendererText.CountFragmentsWithTag(tag)}_GetHTMLCloseTag(bbTag){let htmlTag=BBCODE_TAG_TO_HTML.get(bbTag);if(htmlTag===null)return\"\";else if(!htmlTag)htmlTag=\"span\";return`</${htmlTag||\"span\"}>`}_GetHTMLOpenTag(bbTag,param){let htmlTag=BBCODE_TAG_TO_HTML.get(bbTag);if(htmlTag===null)return\"\";else if(!htmlTag)htmlTag=\"span\";switch(bbTag){case \"color\":return`<${htmlTag} style=\"color: ${param}\">`;case \"font\":return`<${htmlTag} style=\"font-family: '${param}'\">`;\ncase \"opacity\":return`<${htmlTag} style=\"opacity: ${param}%\">`;case \"size\":return`<${htmlTag} style=\"font-size: ${param}pt\">`;case \"background\":return`<${htmlTag} style=\"background-color: ${param}\">`;case \"hide\":return`<${htmlTag} style=\"visibility: hidden\">`;case \"class\":return`<${htmlTag} class=\"${param}\">`;case \"tag\":return`<${htmlTag} data-tag=\"${param}\">`;default:return`<${htmlTag}>`}}async _UpdateHTMLString(){if(this._isHtmlStringUpToDate)return this._htmlString;const fragList=(new C3.BBString(this._text,\n{noEscape:true})).toFragmentList();const iconBlobUrls=new Map;let htmlStr=`<span class=\"c3-text\"`;const styles=[];styles.push(`font-family: '${this._GetFontFace()}';`);if(this._IsBold())styles.push(\"font-weight: bold;\");if(this._IsItalic())styles.push(\"font-style: italic;\");if(!this._IsWrapByWord())styles.push(\"word-break: break-all;\");htmlStr+=` style=\"${styles.join(\" \")}\">`;const textIconSet=this._iconObjectClass?this.GetRuntime().GetTextIconSet(this._iconObjectClass):null;if(this._iconObjectClass){const promiseThrottle=\nC3.New(C3.PromiseThrottle);const assetDrawablePromises=[];const assetDrawableMap=new Map;for(const frag of fragList)if(frag.IsIcon()){const textIcon=frag.GetTextIcon(textIconSet);if(textIcon){const frame=textIcon.GetSource();const imageAsset=frame.GetImageInfo().GetImageAsset();if(assetDrawableMap.has(imageAsset))continue;assetDrawableMap.set(imageAsset,null);assetDrawablePromises.push(promiseThrottle.Add(async()=>{const drawable=await imageAsset.LoadToDrawable();assetDrawableMap.set(imageAsset,drawable)}))}}await Promise.all(assetDrawablePromises);\nconst blobUrlPromises=[];for(const frag of fragList)if(frag.IsIcon()){const textIcon=frag.GetTextIcon(textIconSet);if(textIcon){const frame=textIcon.GetSource();const imageAsset=frame.GetImageInfo().GetImageAsset();blobUrlPromises.push(promiseThrottle.Add(async()=>{const blobUrl=await frame.GetImageInfo().ExtractImageToBlobURL(assetDrawableMap.get(imageAsset));iconBlobUrls.set(textIcon,blobUrl)}))}}await Promise.all(blobUrlPromises);for(const drawable of assetDrawableMap.values())if(drawable instanceof\nImageBitmap&&drawable[\"close\"])drawable[\"close\"]()}const openTags=new Map;for(const frag of fragList){const fragTags=frag.GetStyleMap();let revKeys=[...openTags.keys()];revKeys.reverse();for(const bbTag of revKeys)if(!fragTags.has(bbTag)||fragTags.get(bbTag)!==openTags.get(bbTag)){openTags.delete(bbTag);htmlStr+=this._GetHTMLCloseTag(bbTag)}for(const [bbTag,param]of fragTags)if(!openTags.has(bbTag)){openTags.set(bbTag,param);htmlStr+=this._GetHTMLOpenTag(bbTag,param)}if(frag.IsText())htmlStr+=C3.ReplaceAll(C3.EscapeHTML(frag.GetCharacterArray().join(\"\")),\n\"\\n\",\"<br>\");if(frag.IsIcon()&&textIconSet){const textIcon=frag.GetTextIcon(textIconSet);if(textIcon){const blobUrl=iconBlobUrls.get(textIcon);if(blobUrl){const styles=[];let topStyle=\"0.2em\";const iconOffsetYStyle=fragTags.get(\"iconoffsety\");if(iconOffsetYStyle){let param=iconOffsetYStyle.trim();if(param.endsWith(\"%\"))topStyle=parseFloat(param)/100+\"em\";else topStyle=param+\"px\"}styles.push(`top: ${topStyle}`);if(this._runtime.GetSampling()===\"nearest\")styles.push(\"image-rendering: pixelated\");htmlStr+=\n`<img class=\"c3-text-icon\" data-icon=\"${frag.GetIconParameter()}\" width=\"${textIcon.GetWidth()}\" height=\"${textIcon.GetHeight()}\" style=\"${styles.join(\";\")}\" src=\"${blobUrl}\">`}}}}const revKeys=[...openTags.keys()];revKeys.reverse();for(const tag of revKeys)htmlStr+=this._GetHTMLCloseTag(tag);htmlStr+=\"</span>\";this._htmlString=htmlStr;this._isHtmlStringUpToDate=true;return this._htmlString}Tick(){const wallTime=this._runtime.GetWallTime();if(wallTime>=this._typewriterEndTime){this._CancelTypewriter();\nthis.Trigger(C3.Plugins.Text.Cnds.OnTypewriterTextFinished);this._runtime.UpdateRender()}else{let displayLength=C3.relerp(this._typewriterStartTime,this._typewriterEndTime,wallTime,0,this._typewriterLength);displayLength=Math.floor(displayLength);if(displayLength!==this._rendererText.GetDrawMaxCharacterCount()){this._rendererText.SetDrawMaxCharacterCount(displayLength);this._runtime.UpdateRender()}}}GetDebuggerProperties(){const prefix=\"plugins.text\";return[{title:prefix+\".name\",properties:[{name:prefix+\n\".properties.text.name\",value:this.GetText(),onedit:v=>this._SetText(v)},{name:prefix+\".properties.font.name\",value:this._GetFontFace(),onedit:v=>this._SetFontFace(v)},{name:prefix+\".properties.size.name\",value:this._GetFontSize(),onedit:v=>this._SetFontSize(v)},{name:prefix+\".properties.line-height.name\",value:this._GetLineHeight(),onedit:v=>this._SetLineHeight(v)},{name:prefix+\".properties.bold.name\",value:this._IsBold(),onedit:v=>this._SetBold(v)},{name:prefix+\".properties.italic.name\",value:this._IsItalic(),\nonedit:v=>this._SetItalic(v)}]}]}GetScriptInterfaceClass(){return self.ITextInstance}};const map=new WeakMap;const SCRIPT_HORIZONTAL_ALIGNMENTS=new Map([[\"left\",0],[\"center\",1],[\"right\",2]]);const SCRIPT_VERTICAL_ALIGNMENTS=new Map([[\"top\",0],[\"center\",1],[\"bottom\",2]]);const SCRIPT_WRAP_MODES=new Map([[\"word\",true],[\"character\",false]]);self.ITextInstance=class ITextInstance extends self.IWorldInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}get text(){return map.get(this).GetText()}set text(str){C3X.RequireString(str);\nconst inst=map.get(this);inst._CancelTypewriter();inst._SetText(str)}typewriterText(str,duration){C3X.RequireString(str);C3X.RequireFiniteNumber(duration);const inst=map.get(this);inst._CancelTypewriter();inst._StartTypewriter(str,duration)}typewriterFinish(){map.get(this)._FinishTypewriter()}set fontFace(str){C3X.RequireString(str);map.get(this)._SetFontFace(str)}get fontFace(){return map.get(this)._GetFontFace()}set isBold(b){map.get(this)._SetBold(b)}get isBold(){return map.get(this)._IsBold()}set isItalic(i){map.get(this)._SetItalic(i)}get isItalic(){return map.get(this)._IsItalic()}set sizePt(pt){C3X.RequireFiniteNumber(pt);\nmap.get(this)._SetFontSize(pt)}get sizePt(){return map.get(this)._GetFontSize()}set fontColor(arr){C3X.RequireArray(arr);if(arr.length<3)throw new Error(\"expected 3 elements\");tempColor.setRgb(arr[0],arr[1],arr[2]);map.get(this)._SetFontColor(tempColor)}get fontColor(){const c=map.get(this)._GetFontColor();return[c.getR(),c.getG(),c.getB()]}set lineHeight(lho){C3X.RequireFiniteNumber(lho);map.get(this)._SetLineHeight(lho)}get lineHeight(){return map.get(this)._GetLineHeight()}set horizontalAlign(str){C3X.RequireString(str);\nconst h=SCRIPT_HORIZONTAL_ALIGNMENTS.get(str);if(typeof h===\"undefined\")throw new Error(\"invalid mode\");map.get(this)._SetHAlign(h)}get horizontalAlign(){return HORIZONTAL_ALIGNMENTS[map.get(this)._GetHAlign()]}set verticalAlign(str){C3X.RequireString(str);const v=SCRIPT_VERTICAL_ALIGNMENTS.get(str);if(typeof v===\"undefined\")throw new Error(\"invalid mode\");map.get(this)._SetVAlign(v)}get verticalAlign(){return VERTICAL_ALIGNMENTS[map.get(this)._GetVAlign()]}set wordWrapMode(str){C3X.RequireString(str);\nconst isWrapByWord=SCRIPT_WRAP_MODES.get(str);if(typeof isWrapByWord===\"undefined\")throw new Error(\"invalid mode\");map.get(this)._SetWrapByWord(isWrapByWord)}get wordWrapMode(){return map.get(this)._IsWrapByWord()?\"word\":\"character\"}set readAloud(r){map.get(this)._SetReadAloud(!!r)}get readAloud(){return map.get(this)._IsReadAloud()}get textWidth(){return map.get(this)._GetTextWidth()}get textHeight(){return map.get(this)._GetTextHeight()}getTextSize(){const inst=map.get(this);return[inst._GetTextWidth(),\ninst._GetTextHeight()]}hasTagAtPosition(tag,x,y){C3X.RequireString(tag);C3X.RequireFiniteNumber(x);C3X.RequireFiniteNumber(y);return map.get(this)._HasTagAtPosition(tag,x,y)}getTagAtPosition(x,y){C3X.RequireFiniteNumber(x);C3X.RequireFiniteNumber(y);return map.get(this)._GetTagAtPosition(x,y)}getTagPositionAndSize(tag,index=0){C3X.RequireString(tag);C3X.RequireFiniteNumber(index);return map.get(this)._GetTagPosition(tag,index)}getTagCount(tag){C3X.RequireString(tag);return map.get(this)._GetTagCount(tag)}changeIconSet(iObjectClass){const sdkInst=\nmap.get(this);const objectClass=sdkInst.GetRuntime()._UnwrapIObjectClass(iObjectClass);sdkInst._SetIconObjectClass(objectClass)}getAsHtmlString(){return map.get(this)._UpdateHTMLString()}}}\n{const C3=self.C3;C3.Plugins.Text.Cnds={CompareText(str,caseSensitive){if(caseSensitive)return this._text===str;else return C3.equalsNoCase(this._text,str)},IsRunningTypewriterText(){return this._typewriterEndTime!==-1},OnTypewriterTextFinished(){return true},HasTagAtPosition(tag,x,y){return this._HasTagAtPosition(tag,x,y)}}}\n{const C3=self.C3;const tempColor=C3.New(C3.Color);C3.Plugins.Text.Acts={SetText(param){this._CancelTypewriter();if(typeof param===\"number\"&&param<1E9)param=Math.round(param*1E10)/1E10;this._SetText(param.toString())},AppendText(param){this._CancelTypewriter();if(typeof param===\"number\"&&param<1E9)param=Math.round(param*1E10)/1E10;param=param.toString();if(!param)return;this._SetText(this._text+param)},TypewriterText(param,duration){this._CancelTypewriter();if(typeof param===\"number\"&&param<1E9)param=\nMath.round(param*1E10)/1E10;this._StartTypewriter(param.toString(),duration)},SetFontFace(face,style){let bold=false;let italic=false;switch(style){case 1:bold=true;break;case 2:italic=true;break;case 3:bold=true;italic=true;break}if(face===this._faceName&&bold===this._isBold&&italic===this._isItalic)return;this._SetFontFace(face);this._SetBold(bold);this._SetItalic(italic)},SetFontSize(size){this._SetFontSize(size)},SetFontColor(rgb){tempColor.setFromRgbValue(rgb);tempColor.clamp();this._SetFontColor(tempColor)},\nSetWebFont(familyName,cssUrl){console.warn(\"[Text] 'Set web font' action is deprecated and no longer has any effect\")},SetEffect(effect){this.GetWorldInfo().SetBlendMode(effect);this._runtime.UpdateRender()},TypewriterFinish(){this._FinishTypewriter()},SetLineHeight(lho){this._SetLineHeight(lho)},SetHAlign(h){this._SetHAlign(h)},SetVAlign(v){this._SetVAlign(v)},SetWrapping(w){this._SetWrapByWord(w===0)},ChangeIconSet(objectClass){this._SetIconObjectClass(objectClass)},UpdateHTML(){return this._UpdateHTMLString()},\nSetReadAloud(r){this._SetReadAloud(r)}}}\n{const C3=self.C3;C3.Plugins.Text.Exps={Text(){return this._text},PlainText(){if(this._enableBBcode)return C3.BBString.StripAnyTags(this._text);else return this._text},FaceName(){return this._faceName},FaceSize(){return this._ptSize},TextWidth(){return this._GetTextWidth()},TextHeight(){return this._GetTextHeight()},LineHeight(){return this._lineHeightOffset},TagAtPosition(x,y){return this._GetTagAtPosition(x,y)},TagCount(tag){return this._GetTagCount(tag)},TagX(tag,index){const ret=this._GetTagPosition(tag,\nindex);return ret?ret.x:0},TagY(tag,index){const ret=this._GetTagPosition(tag,index);return ret?ret.y:0},TagWidth(tag,index){const ret=this._GetTagPosition(tag,index);return ret?ret.width:0},TagHeight(tag,index){const ret=this._GetTagPosition(tag,index);return ret?ret.height:0},AsHTML(){return this._htmlString}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;const DOM_COMPONENT_ID=\"button\";C3.Plugins.Button=class ButtonPlugin extends C3.SDKDOMPluginBase{constructor(opts){super(opts,DOM_COMPONENT_ID);this.AddElementMessageHandler(\"click\",(sdkInst,e)=>sdkInst._OnClick(e))}Release(){super.Release()}}}{const C3=self.C3;C3.Plugins.Button.Type=class ButtonType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const C3X=self.C3X;const TYPE=0;const TEXT=1;const TOOLTIP=2;const INITIALLY_VISIBLE=3;const ENABLE=4;const AUTO_FONT_SIZE=5;const CHECKED=6;const ID=7;const CLASS_NAME=8;const DOM_COMPONENT_ID=\"button\";C3.Plugins.Button.Instance=class ButtonInstance extends C3.SDKDOMInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._text=\"OK\";this._isCheckbox=false;this._isChecked=false;this._title=\"\";this._id=\"\";this._className=\"\";this._isEnabled=true;this._autoFontSize=\ntrue;if(properties){this._isCheckbox=properties[TYPE]===1;this._text=properties[TEXT];this._title=properties[TOOLTIP];this.GetWorldInfo().SetVisible(properties[INITIALLY_VISIBLE]);this._isEnabled=properties[ENABLE];this._autoFontSize=properties[AUTO_FONT_SIZE];this._isChecked=properties[CHECKED];this._id=properties[ID];this._className=properties[CLASS_NAME]}this.CreateElement({\"id\":this._id,\"className\":this._className})}Release(){super.Release()}GetElementState(){return{\"text\":this._text,\"isCheckbox\":this._isCheckbox,\n\"isChecked\":this._isChecked,\"title\":this._title,\"isVisible\":this.GetWorldInfo().IsVisible(),\"isEnabled\":this._isEnabled}}async _OnClick(e){this._isChecked=e[\"isChecked\"];this.DispatchScriptEvent(\"click\",true);await this.TriggerAsync(C3.Plugins.Button.Cnds.OnClicked)}_SetText(text){if(this._text===text)return;this._text=text;this.UpdateElementState()}_GetText(){return this._text}_SetTooltip(title){if(this._title===title)return;this._title=title;this.UpdateElementState()}_GetTooltip(){return this._title}_SetEnabled(e){e=\n!!e;if(this._isEnabled===e)return;this._isEnabled=e;this.UpdateElementState()}_IsEnabled(){return this._isEnabled}_SetChecked(c){if(!this._isCheckbox)return;c=!!c;if(this._isChecked===c)return;this._isChecked=c;this.UpdateElementState()}_IsChecked(){return this._isChecked}Draw(renderer){}SaveToJson(){return{\"text\":this._text,\"checked\":this._isChecked,\"title\":this._title,\"enabled\":this._isEnabled}}LoadFromJson(o){this._text=o[\"text\"];this._isChecked=o[\"checked\"];this._title=o[\"title\"];this._isEnabled=\no[\"enabled\"];this.UpdateElementState()}GetPropertyValueByIndex(index){switch(index){case TEXT:return this._GetText();case TOOLTIP:return this._GetTooltip();case ENABLE:return this._IsEnabled();case AUTO_FONT_SIZE:return this._autoFontSize;case CHECKED:return this._IsChecked()}}SetPropertyValueByIndex(index,value){switch(index){case TEXT:this._SetText(value);break;case TOOLTIP:this._SetTooltip(value);break;case ENABLE:this._SetEnabled(!!value);break;case AUTO_FONT_SIZE:this._autoFontSize=!!value;break;\ncase CHECKED:this._SetChecked(!!value);break}}GetDebuggerProperties(){const prefix=\"plugins.button\";return[{title:prefix+\".name\",properties:[{name:prefix+\".properties.text.name\",value:this._GetText(),onedit:v=>this._SetText(v)},{name:prefix+\".properties.enabled.name\",value:this._IsEnabled(),onedit:v=>this._SetEnabled(v)},{name:prefix+\".properties.checked.name\",value:this._IsChecked(),onedit:v=>this._SetChecked(v)}]}]}GetScriptInterfaceClass(){return self.IButtonInstance}};const map=new WeakMap;self.IButtonInstance=\nclass IButtonInstance extends self.IDOMInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}set text(str){C3X.RequireString(str);map.get(this)._SetText(str)}get text(){return map.get(this)._GetText()}set tooltip(str){C3X.RequireString(str);map.get(this)._SetTooltip(str)}get tooltip(){return map.get(this)._GetTooltip()}set isEnabled(e){map.get(this)._SetEnabled(e)}get isEnabled(){return map.get(this)._IsEnabled()}set isChecked(c){map.get(this)._SetChecked(c)}get isChecked(){return map.get(this)._IsChecked()}}}\n{const C3=self.C3;C3.Plugins.Button.Cnds={OnClicked(){return true},IsChecked(){return this._isChecked},CompareText(str,caseSensitive){if(caseSensitive)return this._text===str;else return C3.equalsNoCase(this._text,str)}}}{const C3=self.C3;C3.Plugins.Button.Acts={SetText(text){this._SetText(text)},SetTooltip(title){this._SetTooltip(title)},SetChecked(c){this._SetChecked(c!==0)},ToggleChecked(){if(!this._isCheckbox)return;this._isChecked=!this._isChecked;this.UpdateElementState()}}}\n{const C3=self.C3;C3.Plugins.Button.Exps={Text(){return this._text}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Plugins.Particles=class ParticlesPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Plugins.Particles.Type=class ParticlesType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){this.GetImageInfo().LoadAsset(this._runtime)}LoadTextures(renderer){return this.GetImageInfo().LoadStaticTexture(renderer,{sampling:this._runtime.GetSampling()})}ReleaseTextures(){this.GetImageInfo().ReleaseTexture()}}}\n{const C3=self.C3;const C3X=self.C3X;const RATE=0;const SPRAY_CONE=1;const TYPE=2;const SPAWNOBJECTCLASS=3;const INITIALLY_VISIBLE=4;const SPEED=5;const SIZE=6;const OPACITY=7;const GROW_RATE=8;const X_RANDOMISER=9;const Y_RANDOMISER=10;const INITIAL_SPEED_RANDOMISER=11;const SIZE_RANDOMISER=12;const GROW_RATE_RANDOMISER=13;const ACCELERATION=14;const GRAVITY=15;const ANGLE_RANDOMISER=16;const LIFE_SPEED_RANDOMISER=17;const OPACITY_RANDOMISER=18;const DESTROY_MODE=19;const TIMEOUT=20;const CONTINUOUS=\n0;const ONE_SHOT=1;const tempRect=C3.New(C3.Rect);C3.Plugins.Particles.Instance=class ParticlesInstance extends C3.SDKWorldInstanceBase{constructor(inst,properties){super(inst);this._isFirstTick=true;const pe=C3.New(self.ParticleEngine);this._particleEngine=pe;pe.ononeshotfinish=()=>this._OnOneShotFinish();this._spawnObjectClass=null;this._particleUpdateCallback=(inst,dx,dy,dSize,dAngle,dOpacity)=>this._OnParticleUpdate(inst,dx,dy,dSize,dAngle,dOpacity);this._particleDestroyCallback=inst=>this._OnParticleDestroy(inst);\nthis._hasAnyDefaultParticle=true;let isInitiallyVisible=true;if(properties){pe.SetRate(properties[RATE]);pe.SetSprayCone(C3.toRadians(properties[SPRAY_CONE]));pe.SetSprayType(properties[TYPE]?\"one-shot\":\"continuous-spray\");this._SetParticleObjectClass(this._runtime.GetObjectClassBySID(properties[SPAWNOBJECTCLASS]));isInitiallyVisible=properties[INITIALLY_VISIBLE];pe.SetInitSpeed(properties[SPEED]);pe.SetInitSize(properties[SIZE]);pe.SetInitOpacity(properties[OPACITY]/100);pe.SetGrowRate(properties[GROW_RATE]);\npe.SetInitXRandom(properties[X_RANDOMISER]);pe.SetInitYRandom(properties[Y_RANDOMISER]);pe.SetInitSpeedRandom(properties[INITIAL_SPEED_RANDOMISER]);pe.SetInitSizeRandom(properties[SIZE_RANDOMISER]);pe.SetGrowRandom(properties[GROW_RATE_RANDOMISER]);pe.SetAcceleration(properties[ACCELERATION]);pe.SetGravity(properties[GRAVITY]);pe.SetLifeAngleRandom(properties[ANGLE_RANDOMISER]);pe.SetLifeSpeedRandom(properties[LIFE_SPEED_RANDOMISER]);pe.SetLifeOpacityRandom(properties[OPACITY_RANDOMISER]);pe.SetDestroyModeIndex(properties[DESTROY_MODE]);\npe.SetTimeout(properties[TIMEOUT])}this._UpdateEngineParameters();if(this._spawnObjectClass)this._hasAnyDefaultParticle=false;if(pe.GetSprayType()===\"one-shot\")pe.CreateOneShotSpray();else pe.SetSpraying(true);const wi=this.GetWorldInfo();wi.SetVisible(isInitiallyVisible);wi.SetBboxChangeEventEnabled(true);this._inst.Dispatcher().addEventListener(\"bboxchange\",()=>{wi.OverwriteBoundingBox(this._particleEngine.GetBoundingBox())});if(this.GetRuntime().GetRenderer().IsWebGPU())wi.SetUsePointsShaderProgram();\nthis._afterLoad=e=>this._OnAfterLoad(e);this.GetRuntime().Dispatcher().addEventListener(\"afterload\",this._afterLoad);this._StartTicking()}Release(){this.GetRuntime().Dispatcher().removeEventListener(\"afterload\",this._afterLoad);this._afterLoad=null;this._particleEngine.Release();this._particleEngine=null;this._particleUpdateCallback=null;this._particleDestroyCallback=null;super.Release()}GetParticleEngine(){return this._particleEngine}_SetRate(r){this._particleEngine.SetRate(r);if(this._particleEngine.GetSprayType()===\n\"one-shot\"&&this._isFirstTick)this._particleEngine.SetParticleCount(r)}_SetParticleObjectClass(objectClass){if(objectClass===this.GetObjectClass())objectClass=null;if(objectClass===this._spawnObjectClass)return;this._spawnObjectClass=objectClass;this._particleEngine.onparticlecreate=objectClass?p=>this._OnParticleCreate(p):null;if(!this._spawnObjectClass)this._hasAnyDefaultParticle=true}_UpdateEngineParameters(){const pe=this._particleEngine;const wi=this.GetWorldInfo();pe.SetMasterOpacity(wi.GetOpacity());\npe.SetPixelRounding(this._runtime.IsPixelRoundingEnabled());pe.SetSpawnX(wi.GetX());pe.SetSpawnY(wi.GetY());pe.SetSpawnAngle(wi.GetAngle());pe.SetInitSizeScale(Math.abs(wi.GetSceneGraphScale()))}_OnOneShotFinish(){this._runtime.DestroyInstance(this._inst)}Draw(renderer){if(!this._hasAnyDefaultParticle)return;const imageInfo=this._objectClass.GetImageInfo();const texture=imageInfo.GetTexture();if(!texture)return;const wi=this.GetWorldInfo();const layer=wi.GetLayer();const viewport=tempRect;if(this._runtime.GetCanvasManager().IsPastingToDrawingCanvas())viewport.set(-Infinity,\n-Infinity,Infinity,Infinity);else if(layer.Has3DCamera())layer.CalculateViewport3D(wi.GetTotalZElevation(),viewport);else layer.GetViewportForZ(wi.GetTotalZElevation(),viewport);renderer.SetTexture(texture);const zScaleFactor=layer.Get2DScaleFactorToZ(wi.GetTotalZElevation());this._particleEngine.SetParticleScale(layer.GetRenderScale()*zScaleFactor);this._particleEngine.Draw(renderer,imageInfo.GetTexQuad(),viewport,layer.Has3DCamera())}SaveToJson(){const pe=this._particleEngine;return{\"r\":pe.GetRate(),\n\"sc\":pe.GetSprayCone(),\"st\":pe.GetSprayType(),\"isp\":pe.GetInitSpeed(),\"isz\":pe.GetInitSize(),\"io\":pe.GetInitOpacity(),\"gr\":pe.GetGrowRate(),\"xr\":pe.GetInitXRandom(),\"yr\":pe.GetInitYRandom(),\"spr\":pe.GetInitSpeedRandom(),\"szr\":pe.GetInitSizeRandom(),\"grnd\":pe.GetGrowRandom(),\"acc\":pe.GetAcceleration(),\"g\":pe.GetGravity(),\"lar\":pe.GetLifeAngleRandom(),\"lsr\":pe.GetLifeSpeedRandom(),\"lor\":pe.GetLifeOpacityRandom(),\"dm\":pe.GetDestroyModeIndex(),\"to\":pe.GetTimeout(),\"s\":pe.IsSpraying(),\"pcc\":pe._GetCreateCounter(),\n\"ft\":this._isFirstTick,\"soc\":this._spawnObjectClass?this._spawnObjectClass.GetSID():null,\"p\":pe.GetParticles().map(p=>p.toJSON())}}LoadFromJson(o,mode){const pe=this._particleEngine;pe.SetRate(o[\"r\"]);pe.SetSprayCone(o[\"sc\"]);pe.SetSprayType(o[\"st\"]);pe.SetInitSpeed(o[\"isp\"]);pe.SetInitSize(o[\"isz\"]);pe.SetInitOpacity(o[\"io\"]);pe.SetGrowRate(o[\"gr\"]);pe.SetInitXRandom(o[\"xr\"]);pe.SetInitYRandom(o[\"yr\"]);pe.SetInitSpeedRandom(o[\"spr\"]);pe.SetInitSizeRandom(o[\"szr\"]);pe.SetGrowRandom(o[\"grnd\"]);pe.SetAcceleration(o[\"acc\"]);\npe.SetGravity(o[\"g\"]);pe.SetLifeAngleRandom(o[\"lar\"]);pe.SetLifeSpeedRandom(o[\"lsr\"]);pe.SetLifeOpacityRandom(o[\"lor\"]);pe.SetDestroyModeIndex(o[\"dm\"]);pe.SetTimeout(o[\"to\"]);pe.SetSpraying(o[\"s\"]);pe._SetCreateCounter(o[\"pcc\"]);this._isFirstTick=o[\"ft\"];if(o.hasOwnProperty(\"soc\")){const objectClass=this.GetRuntime().GetObjectClassBySID(o[\"soc\"]);if(objectClass)this._SetParticleObjectClass(objectClass)}const particlesData=o[\"p\"];pe.SetParticleCount(particlesData.length);const particles=pe.GetParticles();\nfor(let i=0,len=particles.length;i<len;++i)particles[i].setFromJSON(particlesData[i]);if(mode===\"state\"&&this._spawnObjectClass){pe.UpdateAllParticlesUserData();pe.ApplyParticleDataToUserData(this)}}_OnAfterLoad(){const pe=this._particleEngine;pe.UpdateAllParticlesUserData();pe.ApplyParticleDataToUserData(this);if(pe.GetSprayType()!==\"one-shot\")return;const particles=pe.GetParticles();for(let i=0,len=particles.length;i<len;++i){const particle=particles[i];const currentUserData=particle.GetUserData();\nif(!currentUserData)continue;const worldInfo=currentUserData.GetWorldInfo();if(!worldInfo)continue;const instance=worldInfo.GetInstance();if(!instance)continue;const savedUid=particle.GetUserDataUID();const currentUid=instance.GetUID();if(typeof savedUid===\"number\"&&typeof currentUid===\"number\"&&savedUid===currentUid)continue;const runtime=this.GetRuntime();const inst=runtime.GetInstanceByUID(savedUid);if(inst)runtime.DestroyInstance(inst)}}Tick(){const dt=this._runtime.GetDt(this._inst);this._UpdateEngineParameters();\nif(this._isFirstTick&&this._particleEngine.GetSprayType()===\"one-shot\")this._particleEngine.ReInitAllParticles();this._particleEngine.Tick(dt);if(this._particleEngine.IsSpraying())this._runtime.UpdateRender();this.GetWorldInfo().SetBboxChanged();this._isFirstTick=false}_FastForward(time){const FF_DT=1/60;if(this._isFirstTick&&this._particleEngine.GetSprayType()===\"one-shot\")this._particleEngine.ReInitAllParticles();while(time>0){this._particleEngine.Tick(FF_DT);time-=FF_DT}if(this._particleEngine.IsSpraying())this._runtime.UpdateRender();\nthis.GetWorldInfo().SetBboxChanged();this._isFirstTick=false}_OnParticleCreate(p){const inst=this._runtime.CreateInstance(this._spawnObjectClass,this.GetWorldInfo().GetLayer(),p.GetX(),p.GetY());const wi=inst.GetWorldInfo();wi.SetSize(p.GetSize(),p.GetSize());wi.SetAngle(p.GetAngle());wi.SetOpacity(p.GetOpacity());wi.SetUnpremultipliedColor(this.GetWorldInfo().GetUnpremultipliedColor());wi.SetBboxChanged();wi.ZOrderMoveAdjacentToInstance(this.GetInstance(),true);inst._TriggerOnCreated();p.SetUpdateCallback(this._particleUpdateCallback);\np.SetDestroyCallback(this._particleDestroyCallback);return inst}_OnParticleUpdate(inst,dx,dy,dSize,dAngle,dOpacity){if(inst.IsDestroyed())return;const wi=inst.GetWorldInfo();wi.OffsetXY(dx,dy);wi.SetSize(wi.GetWidth()+dSize,wi.GetHeight()+dSize);wi.SetAngle(wi.GetAngle()+dAngle);wi.SetOpacity(wi.GetOpacity()+dOpacity);wi.SetBboxChanged()}_OnParticleDestroy(inst){if(inst.IsDestroyed())return;this._runtime.DestroyInstance(inst)}GetPropertyValueByIndex(index){const pe=this._particleEngine;switch(index){case RATE:return pe.GetRate();\ncase SPRAY_CONE:return C3.toDegrees(pe.GetSprayCone());case TYPE:return pe.GetSprayType()===\"one-shot\"?ONE_SHOT:CONTINUOUS;case SPEED:return pe.GetInitSpeed();case SIZE:return pe.GetInitSize();case OPACITY:return pe.GetInitOpacity()*100;case GROW_RATE:return pe.GetGrowRate();case X_RANDOMISER:return pe.GetInitXRandom();case Y_RANDOMISER:return pe.GetInitYRandom();case INITIAL_SPEED_RANDOMISER:return pe.GetInitSpeedRandom();case SIZE_RANDOMISER:return pe.GetInitSizeRandom();case GROW_RATE_RANDOMISER:return pe.GetGrowRandom();\ncase ACCELERATION:return pe.GetAcceleration();case GRAVITY:return pe.GetGravity();case ANGLE_RANDOMISER:return pe.GetLifeAngleRandom();case LIFE_SPEED_RANDOMISER:return pe.GetLifeSpeedRandom();case OPACITY_RANDOMISER:return pe.GetLifeOpacityRandom();case DESTROY_MODE:return pe.GetDestroyModeIndex();case TIMEOUT:return pe.GetTimeout()}}SetPropertyValueByIndex(index,value){const pe=this._particleEngine;switch(index){case RATE:pe.SetRate(value);break;case SPRAY_CONE:pe.SetSprayCone(C3.toRadians(value));\nbreak;case TYPE:pe.SetSprayType(value?\"one-shot\":\"continuous-spray\");break;case SPEED:pe.SetInitSpeed(value);break;case SIZE:pe.SetInitSize(value);break;case OPACITY:pe.SetInitOpacity(value/100);break;case GROW_RATE:pe.SetGrowRate(value);break;case X_RANDOMISER:pe.SetInitXRandom(value);break;case Y_RANDOMISER:pe.SetInitYRandom(value);break;case INITIAL_SPEED_RANDOMISER:pe.SetInitSpeedRandom(value);break;case SIZE_RANDOMISER:pe.SetInitSizeRandom(value);break;case GROW_RATE_RANDOMISER:pe.SetGrowRandom(value);\nbreak;case ACCELERATION:pe.SetAcceleration(value);break;case GRAVITY:pe.SetGravity(value);break;case ANGLE_RANDOMISER:pe.SetLifeAngleRandom(value);break;case LIFE_SPEED_RANDOMISER:pe.SetLifeSpeedRandom(value);break;case OPACITY_RANDOMISER:pe.SetLifeOpacityRandom(value);break;case DESTROY_MODE:pe.SetDestroyModeIndex(value);break;case TIMEOUT:pe.SetTimeout(value);break}}GetDebuggerProperties(){const prefix=\"plugins.particles\";const propPrefix=prefix+\".properties\";const dbgPrefix=prefix+\".debugger\";\nconst pe=this._particleEngine;return[{title:prefix+\".name\",properties:[{name:dbgPrefix+\".particle-count\",value:pe.GetParticleCount()},{name:propPrefix+\".type.name\",value:[propPrefix+\".type.items.\"+pe.GetSprayType()]},{name:dbgPrefix+\".is-spraying\",value:pe.IsSpraying(),onedit:v=>pe.SetSpraying(v)},{name:propPrefix+\".rate.name\",value:pe.GetRate(),onedit:v=>pe.SetRate(v)},{name:propPrefix+\".spray-cone.name\",value:C3.toDegrees(pe.GetSprayCone()),onedit:v=>pe.SetSprayCone(C3.toRadians(v))},{name:propPrefix+\n\".speed.name\",value:pe.GetInitSpeed(),onedit:v=>pe.SetInitSpeed(v)},{name:propPrefix+\".size.name\",value:pe.GetInitSize(),onedit:v=>pe.SetInitSize(v)},{name:propPrefix+\".opacity.name\",value:pe.GetInitOpacity(),onedit:v=>pe.SetInitOpacity(v)},{name:propPrefix+\".grow-rate.name\",value:pe.GetGrowRate(),onedit:v=>pe.SetGrowRate(v)},{name:propPrefix+\".x-randomiser.name\",value:pe.GetInitXRandom(),onedit:v=>pe.SetInitXRandom(v)},{name:propPrefix+\".y-randomiser.name\",value:pe.GetInitYRandom(),onedit:v=>pe.SetInitYRandom(v)},\n{name:propPrefix+\".initial-speed-randomiser.name\",value:pe.GetInitSpeedRandom(),onedit:v=>pe.SetInitSpeedRandom(v)},{name:propPrefix+\".size-randomiser.name\",value:pe.GetInitSizeRandom(),onedit:v=>pe.SetInitSizeRandom(v)},{name:propPrefix+\".grow-rate-randomiser.name\",value:pe.GetGrowRandom(),onedit:v=>pe.SetGrowRandom(v)},{name:propPrefix+\".acceleration.name\",value:pe.GetAcceleration(),onedit:v=>pe.SetAcceleration(v)},{name:propPrefix+\".gravity.name\",value:pe.GetGravity(),onedit:v=>pe.SetGravity(v)},\n{name:propPrefix+\".angle-randomiser.name\",value:pe.GetLifeAngleRandom(),onedit:v=>pe.SetLifeAngleRandom(v)},{name:propPrefix+\".life-speed-randomiser.name\",value:pe.GetLifeSpeedRandom(),onedit:v=>pe.SetLifeSpeedRandom(v)},{name:propPrefix+\".opacity-randomiser.name\",value:pe.GetLifeOpacityRandom(),onedit:v=>pe.SetLifeOpacityRandom(v)},{name:propPrefix+\".timeout.name\",value:pe.GetTimeout(),onedit:v=>pe.SetTimeout(v)}]}]}GetScriptInterfaceClass(){return self.IParticlesInstance}};const map=new WeakMap;\nfunction GetParticleEngine(iinst){return map.get(iinst).GetParticleEngine()}self.IParticlesInstance=class IParticlesInstance extends self.IWorldInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}set isSpraying(s){GetParticleEngine(this).SetSpraying(!!s)}get isSpraying(){return GetParticleEngine(this).IsSpraying()}set rate(r){C3X.RequireFiniteNumber(r);map.get(this)._SetRate(r)}get rate(){return GetParticleEngine(this).GetRate()}set sprayCone(c){C3X.RequireFiniteNumber(c);\nGetParticleEngine(this).SetSprayCone(c)}get sprayCone(){return GetParticleEngine(this).GetSprayCone()}set initSpeed(s){C3X.RequireFiniteNumber(s);GetParticleEngine(this).SetInitSpeed(s)}get initSpeed(){return GetParticleEngine(this).GetInitSpeed()}set initSize(s){C3X.RequireFiniteNumber(s);GetParticleEngine(this).SetInitSize(s)}get initSize(){return GetParticleEngine(this).GetInitSize()}set initOpacity(o){C3X.RequireFiniteNumber(o);GetParticleEngine(this).SetInitOpacity(o)}get initOpacity(){return GetParticleEngine(this).GetInitOpacity()}set initXRandom(x){C3X.RequireFiniteNumber(x);\nGetParticleEngine(this).SetInitXRandom(x)}get initXRandom(){return GetParticleEngine(this).GetInitXRandom()}set initYRandom(y){C3X.RequireFiniteNumber(y);GetParticleEngine(this).SetInitYRandom(y)}get initYRandom(){return GetParticleEngine(this).GetInitYRandom()}set initSpeedRandom(s){C3X.RequireFiniteNumber(s);GetParticleEngine(this).SetInitSpeedRandom(s)}get initSpeedRandom(){return GetParticleEngine(this).GetInitSpeedRandom()}set initSizeRandom(s){C3X.RequireFiniteNumber(s);GetParticleEngine(this).SetInitSizeRandom(s)}get initSizeRandom(){return GetParticleEngine(this).GetInitSizeRandom()}set initGrowRate(r){C3X.RequireFiniteNumber(r);\nGetParticleEngine(this).SetGrowRate(r)}get initGrowRate(){return GetParticleEngine(this).GetGrowRate()}set initGrowRandom(r){C3X.RequireFiniteNumber(r);GetParticleEngine(this).SetGrowRandom(r)}get initGrowRandom(){return GetParticleEngine(this).GetGrowRandom()}set acceleration(a){C3X.RequireFiniteNumber(a);GetParticleEngine(this).SetAcceleration(a)}get acceleration(){return GetParticleEngine(this).GetAcceleration()}set gravity(g){C3X.RequireFiniteNumber(g);GetParticleEngine(this).SetGravity(g)}get gravity(){return GetParticleEngine(this).GetGravity()}set lifeAngleRandom(r){C3X.RequireFiniteNumber(r);\nGetParticleEngine(this).SetLifeAngleRandom(r)}get lifeAngleRandom(){return GetParticleEngine(this).GetLifeAngleRandom()}set lifeSpeedRandom(r){C3X.RequireFiniteNumber(r);GetParticleEngine(this).SetLifeSpeedRandom(r)}get lifeSpeedRandom(){return GetParticleEngine(this).GetLifeSpeedRandom()}set lifeOpacityRandom(r){C3X.RequireFiniteNumber(r);GetParticleEngine(this).SetLifeOpacityRandom(r)}get lifeOpacityRandom(){return GetParticleEngine(this).GetLifeOpacityRandom()}set timeout(t){C3X.RequireFiniteNumber(t);\nGetParticleEngine(this).SetTimeout(t)}get timeout(){return GetParticleEngine(this).GetTimeout()}fastForward(time){C3X.RequireFiniteNumber(time);map.get(this)._FastForward(time)}setParticleObjectClass(iObjectClass){const inst=map.get(this);if(iObjectClass)inst._SetParticleObjectClass(inst.GetRuntime()._UnwrapIObjectClass(iObjectClass));else inst._SetParticleObjectClass(null)}}}{const C3=self.C3;C3.Plugins.Particles.Cnds={IsSpraying(){return this._particleEngine.IsSpraying()}}}\n{const C3=self.C3;C3.Plugins.Particles.Acts={SetSpraying(s){this._particleEngine.SetSpraying(s!==0)},SetRate(r){this._SetRate(r)},SetParticleObject(objectClass){this._SetParticleObjectClass(objectClass)},UnsetParticleObject(){this._SetParticleObjectClass(null)},SetSprayCone(c){this._particleEngine.SetSprayCone(C3.toRadians(c))},SetInitSpeed(x){this._particleEngine.SetInitSpeed(x)},SetInitSize(x){this._particleEngine.SetInitSize(x)},SetInitOpacity(x){this._particleEngine.SetInitOpacity(x/100)},SetGrowRate(x){this._particleEngine.SetGrowRate(x)},\nSetXRandomiser(x){this._particleEngine.SetInitXRandom(x)},SetYRandomiser(x){this._particleEngine.SetInitYRandom(x)},SetSpeedRandomiser(x){this._particleEngine.SetInitSpeedRandom(x)},SetSizeRandomiser(x){this._particleEngine.SetInitSizeRandom(x)},SetGrowRateRandomiser(x){this._particleEngine.SetGrowRandom(x)},SetParticleAcc(x){this._particleEngine.SetAcceleration(x)},SetGravity(x){this._particleEngine.SetGravity(x)},SetAngleRandomiser(x){this._particleEngine.SetLifeAngleRandom(x)},SetLifeSpeedRandomiser(x){this._particleEngine.SetLifeSpeedRandom(x)},\nSetOpacityRandomiser(x){this._particleEngine.SetLifeOpacityRandom(x)},SetTimeout(x){this._particleEngine.SetTimeout(x)},FastForward(time){this._FastForward(time)},SetEffect(effect){this.GetWorldInfo().SetBlendMode(effect);this._runtime.UpdateRender()}}}\n{const C3=self.C3;C3.Plugins.Particles.Exps={ParticleCount(){return this._particleEngine.GetParticleCount()},Rate(){return this._particleEngine.GetRate()},SprayCone(){return C3.toDegrees(this._particleEngine.GetSprayCone())},InitSpeed(){return this._particleEngine.GetInitSpeed()},InitSize(){return this._particleEngine.GetInitSize()},InitOpacity(){return this._particleEngine.GetInitOpacity()*100},InitGrowRate(){return this._particleEngine.GetGrowRate()},XRandom(){return this._particleEngine.GetInitXRandom()},\nYRandom(){return this._particleEngine.GetInitYRandom()},InitSizeRandom(){return this._particleEngine.GetInitSizeRandom()},InitSpeedRandom(){return this._particleEngine.GetInitSpeedRandom()},InitGrowRandom(){return this._particleEngine.GetGrowRandom()},ParticleAcceleration(){return this._particleEngine.GetAcceleration()},Gravity(){return this._particleEngine.GetGravity()},ParticleAngleRandom(){return this._particleEngine.GetLifeAngleRandom()},ParticleSpeedRandom(){return this._particleEngine.GetLifeSpeedRandom()},\nParticleOpacityRandom(){return this._particleEngine.GetLifeOpacityRandom()},Timeout(){return this._particleEngine.GetTimeout()}}};\n\n}\n\n{\n'use strict';const C3=self.C3;const inactiveParticles=[];const MAX_RECYCLE_PARTICLES=1E3;const VALID_SPRAY_TYPES=new Set([\"continuous-spray\",\"one-shot\"]);const DESTROY_MODES=[\"fade-to-invisible\",\"timeout-expired\",\"particle-stopped\"];const tempRect=C3.New(C3.Rect);\nself.ParticleEngine=class ParticleEngine{constructor(){this._rate=0;this._sprayCone=0;this._sprayType=\"continuous-spray\";this._isSpraying=false;this._masterOpacity=0;this._isPixelRounding=false;this._spawnX=0;this._spawnY=0;this._spawnAngle=0;this._initSpeed=0;this._initSize=0;this._initSizeScale=1;this._initOpacity=0;this._growRate=0;this._xRandom=0;this._yRandom=0;this._initSpeedRandom=0;this._initSizeRandom=0;this._growRandom=0;this._acceleration=0;this._gravity=0;this._lifeAngleRandom=0;this._lifeSpeedRandom=\n0;this._lifeOpacityRandom=0;this._destroyMode=0;this._timeout=0;this._createCounter=0;this._particleScale=1;this.ononeshotfinish=null;this.onparticlecreate=null;this._particles=[];this._boundingBox=new C3.Rect;this._color=new C3.Color}Release(){this.Cancel();C3.clearArray(this._particles);this._particles=null;this.ononeshotfinish=null;this.onparticlecreate=null;this._boundingBox=null;this._color=null}Cancel(){const particles=this._particles;for(let i=0,len=particles.length;i<len;++i)particles[i].Destroy();\nC3.appendArray(inactiveParticles,particles);C3.clearArray(particles);if(inactiveParticles.length>MAX_RECYCLE_PARTICLES)C3.truncateArray(inactiveParticles,MAX_RECYCLE_PARTICLES);this._isSpraying=false}CreateOneShotSpray(){for(let i=0,len=this._rate;i<len;++i)this._CreateParticle();if(this._particles.length)this._isSpraying=true}_CreateParticle(){let ret=null;if(inactiveParticles.length){ret=inactiveParticles.pop();ret.SetEngine(this)}else ret=C3.New(self.Particle,this);this._particles.push(ret);ret.Init(this.onparticlecreate);\nreturn ret}ReInitAllParticles(){const particles=this._particles;const onparticlecreate=this.onparticlecreate;for(let i=0,len=particles.length;i<len;++i)particles[i].Init(onparticlecreate)}UpdateAllParticlesUserData(){const particles=this._particles;const onparticlecreate=this.onparticlecreate;for(let i=0,len=particles.length;i<len;++i)particles[i].UpdateUserData(onparticlecreate)}ApplyParticleDataToUserData(inst){const particles=this._particles;for(let i=0,len=particles.length;i<len;++i){const particle=\nparticles[i];const userData=particle.GetUserData();if(userData){const wi=userData.GetWorldInfo();wi.SetX(particle.GetX());wi.SetY(particle.GetY());wi.SetSize(particle.GetSize(),particle.GetSize());wi.SetOpacity(particle.GetOpacity());wi.SetAngle(particle.GetAngle());wi.SetUnpremultipliedColor(inst.GetWorldInfo().GetUnpremultipliedColor());wi.SetBboxChanged()}}}SetParticleCount(c){const particles=this._particles;if(c<particles.length){const diff=particles.length-c;for(let i=0;i<diff;++i){const p=particles.pop();\np.Destroy();inactiveParticles.push(p)}if(inactiveParticles.length>MAX_RECYCLE_PARTICLES)C3.truncateArray(inactiveParticles,MAX_RECYCLE_PARTICLES)}else if(c>particles.length){const diff=c-particles.length;for(let i=0;i<diff;++i)this._CreateParticle()}}GetParticles(){return this._particles}GetParticleCount(){return this._particles.length}Tick(dt){this._SpawnContinuous(dt);this._TickParticles(dt);this._MaybeFinishOneShot()}_SpawnContinuous(dt){if(this._sprayType===\"continuous-spray\"&&this._isSpraying){this._createCounter+=\ndt*this._rate;const n=Math.floor(this._createCounter);this._createCounter-=n;for(let i=0;i<n;++i)this._CreateParticle()}}_SetCreateCounter(c){this._createCounter=c}_GetCreateCounter(){return this._createCounter}_TickParticles(dt){const bbox=this._boundingBox;bbox.set(this._spawnX,this._spawnY,this._spawnX,this._spawnY);const particles=this._particles;let j=0;for(let i=0,len=particles.length;i<len;++i){const p=particles[i];particles[j]=p;p.Tick(dt);if(p.IsActive()){++j;bbox.expandToContain(p.GetBoundingBox())}else{p.Destroy();\ninactiveParticles.push(p)}}C3.truncateArray(particles,j);if(inactiveParticles.length>MAX_RECYCLE_PARTICLES)C3.truncateArray(inactiveParticles,MAX_RECYCLE_PARTICLES)}_MaybeFinishOneShot(){if(this._sprayType===\"one-shot\"&&this._particles.length===0&&this._isSpraying){if(this.ononeshotfinish)this.ononeshotfinish();this._isSpraying=false}}Draw(renderer,texQuad,viewport,forceQuads){tempRect.set(texQuad.getTlx(),texQuad.getTly(),texQuad.getBrx(),texQuad.getBry());renderer.StartRenderingPoints(tempRect);\nthis._color.copy(renderer.GetColor());const particles=this._particles;for(let i=0,len=particles.length;i<len;++i){const p=particles[i];if(viewport.intersectsRect(p.GetBoundingBox()))p.Draw(renderer,texQuad,forceQuads)}renderer.FinishRenderingPoints()}GetColor(){return this._color}SetRate(r){this._rate=+r}GetRate(){return this._rate}SetSprayCone(c){this._sprayCone=+c}GetSprayCone(){return this._sprayCone}SetSprayType(type){if(!VALID_SPRAY_TYPES.has(type))throw new Error(\"invalid spray type\");this._sprayType=\ntype}GetSprayType(){return this._sprayType}SetSpraying(s){this._isSpraying=!!s}IsSpraying(){return this._isSpraying}SetMasterOpacity(o){this._masterOpacity=+o}GetMasterOpacity(){return this._masterOpacity}SetPixelRounding(r){this._isPixelRounding=!!r}IsPixelRounding(){return this._isPixelRounding}SetSpawnX(x){this._spawnX=+x}GetSpawnX(){return this._spawnX}SetSpawnY(y){this._spawnY=+y}GetSpawnY(){return this._spawnY}SetSpawnAngle(a){this._spawnAngle=+a}GetInitAngle(){return this._spawnAngle}SetInitSpeed(s){this._initSpeed=\n+s}GetInitSpeed(){return this._initSpeed}SetInitSize(s){this._initSize=+s}GetInitSize(){return this._initSize}SetInitSizeScale(s){this._initSizeScale=+s}GetInitSizeScale(){return this._initSizeScale}SetInitOpacity(o){this._initOpacity=+o}GetInitOpacity(){return this._initOpacity}SetGrowRate(g){this._growRate=+g}GetGrowRate(){return this._growRate}SetInitXRandom(x){this._xRandom=+x}GetInitXRandom(){return this._xRandom}SetInitYRandom(y){this._yRandom=+y}GetInitYRandom(){return this._yRandom}SetInitSpeedRandom(s){this._initSpeedRandom=\n+s}GetInitSpeedRandom(){return this._initSpeedRandom}SetInitSizeRandom(s){this._initSizeRandom=+s}GetInitSizeRandom(){return this._initSizeRandom}SetGrowRandom(g){this._growRandom=+g}GetGrowRandom(){return this._growRandom}SetAcceleration(a){this._acceleration=+a}GetAcceleration(){return this._acceleration}SetGravity(g){this._gravity=+g}GetGravity(){return this._gravity}SetLifeAngleRandom(a){this._lifeAngleRandom=+a}GetLifeAngleRandom(){return this._lifeAngleRandom}SetLifeSpeedRandom(s){this._lifeSpeedRandom=\n+s}GetLifeSpeedRandom(){return this._lifeSpeedRandom}SetLifeOpacityRandom(o){this._lifeOpacityRandom=+o}GetLifeOpacityRandom(){return this._lifeOpacityRandom}SetDestroyMode(m){let i=DESTROY_MODES.indexOf(m);if(i===-1)throw new Error(\"invalid destroy mode\");this._destroyMode=i}SetDestroyModeIndex(i){this.SetDestroyMode(DESTROY_MODES[i])}GetDestroyMode(){return DESTROY_MODES[this._destroyMode]}GetDestroyModeIndex(){return this._destroyMode}SetTimeout(t){this._timeout=+t}GetTimeout(){return this._timeout}SetParticleScale(s){this._particleScale=\n+s}GetParticleScale(){return this._particleScale}GetBoundingBox(){return this._boundingBox}};\n\n}\n\n{\n'use strict';const C3=self.C3;const ParticleEngine=self.ParticleEngine;function randomOffset(x){return Math.random()*x-x/2}const tmpQuad=new C3.Quad;const tmpColor=new C3.Color;const DPR=self.devicePixelRatio||1;let didChangeColor=false;\nself.Particle=class Particle{constructor(engine){this._engine=engine;this._isActive=false;this._x=0;this._y=0;this._speed=0;this._angle=0;this._opacity=1;this._lastOpacity=0;this._grow=0;this._size=0;this._halfSize=0;this._gs=0;this._age=0;this._bbox=new C3.Rect;this._userData=null;this._userDataUid=NaN;this._updateCallback=null;this._destroyCallback=null}SetEngine(engine){this._engine=engine}Init(particleCreateCallback){const engine=this._engine;this._isActive=true;this._x=engine.GetSpawnX()+randomOffset(engine.GetInitXRandom());\nthis._y=engine.GetSpawnY()+randomOffset(engine.GetInitYRandom());this._speed=engine.GetInitSpeed()+randomOffset(engine.GetInitSpeedRandom());this._angle=engine.GetInitAngle()+randomOffset(engine.GetSprayCone());this._opacity=engine.GetInitOpacity();this._lastOpacity=this._opacity;this._size=(engine.GetInitSize()+randomOffset(engine.GetInitSizeRandom()))*engine.GetInitSizeScale();this._halfSize=this._size/2;this._grow=engine.GetGrowRate()+randomOffset(engine.GetGrowRandom());this._gs=0;this._age=0;\nthis._UpdateBoundingBox();if(particleCreateCallback){if(!this._userData)this._userData=particleCreateCallback(this)}else{this._userData=null;this._updateCallback=null;this._destroyCallback=null}}UpdateUserData(particleCreateCallback){if(particleCreateCallback){if(!this._userData||this._userData.IsDestroyed())this._userData=particleCreateCallback(this)}else{this._userData=null;this._updateCallback=null;this._destroyCallback=null}}SetUpdateCallback(f){this._updateCallback=f}SetDestroyCallback(f){this._destroyCallback=\nf}Destroy(){const particleDestroyCallback=this._destroyCallback;if(particleDestroyCallback)particleDestroyCallback(this._userData);this._userData=null;this._updateCallback=null;this._destroyCallback=null}toJSON(){let uid;if(this._userData)uid=this._userData.GetWorldInfo().GetInstance().GetUID();return[this._x,this._y,this._speed,this._angle,this._opacity,this._grow,this._size,this._gs,this._age,uid]}setFromJSON(o){this._x=o[0];this._y=o[1];this._speed=o[2];this._angle=o[3];this._opacity=o[4];this._grow=\no[5];this._size=o[6];this._gs=o[7];this._age=o[8];this._userDataUid=o[9];this._halfSize=this._size/2;this._UpdateBoundingBox()}Tick(dt){const engine=this._engine;const dist=this._speed*dt;const a=this._angle;const dx=Math.cos(a)*dist;const dy=Math.sin(a)*dist+this._gs*dt;this._x+=dx;this._y+=dy;const dSize=this._grow*dt;this._size+=dSize;this._halfSize=this._size/2;this._speed+=engine.GetAcceleration()*dt;this._gs+=engine.GetGravity()*dt;this._age+=dt;this._UpdateBoundingBox();const lifeAngleRandom=\nengine.GetLifeAngleRandom();const lifeSpeedRandom=engine.GetLifeSpeedRandom();const lifeOpacityRandom=engine.GetLifeOpacityRandom();let dAngle=0;if(lifeAngleRandom!==0){dAngle=randomOffset(lifeAngleRandom*dt);this._angle+=dAngle}if(lifeSpeedRandom!==0)this._speed+=randomOffset(lifeSpeedRandom*dt);if(lifeOpacityRandom!==0)this._opacity=C3.clamp(this._opacity+randomOffset(lifeOpacityRandom*dt),0,1);const isActive=this._size>=1&&(engine.GetDestroyModeIndex()===2?this._speed>0:this._age<engine.GetTimeout());\nconst particleUpdateCallback=this._updateCallback;if(particleUpdateCallback&&isActive){let curOpacity=engine.GetMasterOpacity()*this._opacity;if(engine.GetDestroyModeIndex()===0)curOpacity*=1-this._age/engine.GetTimeout();const dOpacity=curOpacity-this._lastOpacity;this._lastOpacity=curOpacity;particleUpdateCallback(this._userData,dx,dy,dSize,dAngle,dOpacity)}this._isActive=isActive}IsActive(){return this._isActive}GetBoundingBox(){return this._bbox}_UpdateBoundingBox(){const x=this._x;const y=this._y;\nconst halfSize=this._halfSize;this._bbox.set(x-halfSize,y-halfSize,x+halfSize,y+halfSize)}Draw(renderer,texQuad,forceQuads){if(this._userData)return;const engine=this._engine;let opacity=engine.GetMasterOpacity()*this._opacity;if(engine.GetDestroyModeIndex()===0)opacity*=1-this._age/engine.GetTimeout();if(opacity<=0)return;const size=this._size;const scaledSize=size*engine.GetParticleScale()*DPR;if(scaledSize<1)return;let x=this._x;let y=this._y;if(engine.IsPixelRounding()){x=x+.5|0;y=y+.5|0}if(renderer.IsWebGPU())renderer.Point(x,\ny,size,opacity);else if(forceQuads||scaledSize>renderer.GetMaxPointSize()||scaledSize<renderer.GetMinPointSize()){tmpColor.copy(engine.GetColor());tmpColor.multiplyAlpha(opacity);renderer.SetColor(tmpColor);didChangeColor=true;tmpQuad.setFromRect(this._bbox);renderer.Quad4(tmpQuad,texQuad)}else{if(didChangeColor){renderer.SetColor(engine.GetColor());didChangeColor=false}renderer.Point(x,y,scaledSize,opacity)}}GetUserData(){return this._userData}GetUserDataUID(){return this._userDataUid}GetX(){return this._x}GetY(){return this._y}GetSize(){return this._size}GetAngle(){return this._angle}GetOpacity(){return this._opacity}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Plugins.TiledBg=class TiledBgPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}}\n{const C3=self.C3;function WrapModeToStr(wrapMode){switch(wrapMode){case 0:return\"clamp-to-edge\";case 1:return\"repeat\";case 2:return\"mirror-repeat\"}return\"repeat\"}C3.Plugins.TiledBg.Type=class TiledBgType extends C3.SDKTypeBase{constructor(objectClass,exportData){super(objectClass);this._wrapX=\"repeat\";this._wrapY=\"repeat\";if(exportData){this._wrapX=WrapModeToStr(exportData[0]);this._wrapY=WrapModeToStr(exportData[1])}}Release(){super.Release()}OnCreate(){this.GetImageInfo().LoadAsset(this._runtime)}LoadTextures(renderer){return this.GetImageInfo().LoadStaticTexture(renderer,\n{sampling:this._runtime.GetSampling(),wrapX:this._wrapX,wrapY:this._wrapY})}ReleaseTextures(){this.GetImageInfo().ReleaseTexture()}}}\n{const C3=self.C3;const C3X=self.C3X;const INITIALLY_VISIBLE=0;const ORIGIN=1;const IMAGE_OFFSET_X=4;const IMAGE_OFFSET_Y=5;const IMAGE_SCALE_X=6;const IMAGE_SCALE_Y=7;const IMAGE_ANGLE=8;const ENABLE_TILE_RANDOMIZATION=9;const TILE_XRANDOM=10;const TILE_YRANDOM=11;const TILE_ANGLERANDOM=12;const TILE_BLENDMARGINX=13;const TILE_BLENDMARGINY=14;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);const rcTex=C3.New(C3.Rect);const qTex=C3.New(C3.Quad);C3.Plugins.TiledBg.Instance=class TiledBgInstance extends C3.SDKWorldInstanceBase{constructor(inst,\nproperties){super(inst);this._imageOffsetX=0;this._imageOffsetY=0;this._imageScaleX=1;this._imageScaleY=1;this._imageAngle=0;this._enableTileRandomization=false;this._tileXRandom=0;this._tileYRandom=0;this._tileAngleRandom=0;this._tileBlendMarginX=0;this._tileBlendMarginY=0;this._ownImageInfo=null;if(properties){this.GetWorldInfo().SetVisible(!!properties[INITIALLY_VISIBLE]);this._imageOffsetX=properties[IMAGE_OFFSET_X];this._imageOffsetY=properties[IMAGE_OFFSET_Y];this._imageScaleX=properties[IMAGE_SCALE_X];\nthis._imageScaleY=properties[IMAGE_SCALE_Y];this._imageAngle=C3.toRadians(properties[IMAGE_ANGLE]);this._enableTileRandomization=!!properties[ENABLE_TILE_RANDOMIZATION];this._tileXRandom=properties[TILE_XRANDOM];this._tileYRandom=properties[TILE_YRANDOM];this._tileAngleRandom=properties[TILE_ANGLERANDOM];this._tileBlendMarginX=properties[TILE_BLENDMARGINX];this._tileBlendMarginY=properties[TILE_BLENDMARGINY]}}Release(){this._ReleaseOwnImage();super.Release()}_ReleaseOwnImage(){if(this._ownImageInfo){this._ownImageInfo.Release();\nthis._ownImageInfo=null}}CalculateTextureCoordsFor3DFace(areaWidth,areaHeight,outQuad){const imageInfo=this.GetCurrentImageInfo();const imageWidth=imageInfo.GetWidth();const imageHeight=imageInfo.GetHeight();const imageOffsetX=this._imageOffsetX/imageWidth;const imageOffsetY=this._imageOffsetY/imageHeight;const imageAngle=this._imageAngle;rcTex.set(0,0,areaWidth/(imageWidth*this._imageScaleX),areaHeight/(imageHeight*this._imageScaleY));rcTex.offset(-imageOffsetX,-imageOffsetY);if(imageAngle===0)outQuad.setFromRect(rcTex);\nelse outQuad.setFromRotatedRect(rcTex,-imageAngle)}SetTilingShaderProgram(renderer){if(this._enableTileRandomization){const imageInfo=this.GetCurrentImageInfo();renderer.SetTileRandomizationMode();renderer.SetTileRandomizationInfo(imageInfo.GetWidth()*this._imageScaleX,imageInfo.GetHeight()*this._imageScaleY,this._tileXRandom,this._tileYRandom,this._tileAngleRandom,this._tileBlendMarginX,this._tileBlendMarginY)}else renderer.SetTextureFillMode()}Draw(renderer){const imageInfo=this.GetCurrentImageInfo();\nconst texture=imageInfo.GetTexture();if(texture===null)return;this.SetTilingShaderProgram(renderer);renderer.SetTexture(texture);const imageWidth=imageInfo.GetWidth();const imageHeight=imageInfo.GetHeight();const imageOffsetX=this._imageOffsetX/imageWidth;const imageOffsetY=this._imageOffsetY/imageHeight;const wi=this.GetWorldInfo();rcTex.set(0,0,wi.GetWidth()/(imageWidth*this._imageScaleX),wi.GetHeight()/(imageHeight*this._imageScaleY));rcTex.offset(-imageOffsetX,-imageOffsetY);if(wi.HasMesh())this._DrawMesh(wi,\nrenderer);else this._DrawStandard(wi,renderer)}_DrawStandard(wi,renderer){let quad=wi.GetBoundingQuad();if(this._runtime.IsPixelRoundingEnabled())quad=wi.PixelRoundQuad(quad);if(this._imageAngle===0)renderer.Quad3(quad,rcTex);else{qTex.setFromRotatedRect(rcTex,-this._imageAngle);renderer.Quad4(quad,qTex)}}_DrawMesh(wi,renderer){const transformedMesh=wi.GetTransformedMesh();if(wi.IsMeshChanged()){wi.CalculateBbox(tempRect,tempQuad,false);let quad=tempQuad;if(this._runtime.IsPixelRoundingEnabled())quad=\nwi.PixelRoundQuad(quad);let texCoords=rcTex;if(this._imageAngle!==0){qTex.setFromRotatedRect(rcTex,-this._imageAngle);texCoords=qTex}transformedMesh.CalculateTransformedMesh(wi.GetSourceMesh(),quad,texCoords);wi.SetMeshChanged(false)}transformedMesh.Draw(renderer)}GetCurrentImageInfo(){return this._ownImageInfo||this._objectClass.GetImageInfo()}IsOriginalSizeKnown(){return true}GetTexture(){return this.GetCurrentImageInfo().GetTexture()}_SetMeshChanged(){this.GetWorldInfo().SetMeshChanged(true)}_SetImageOffsetX(x){if(this._imageOffsetX===\nx)return;this._imageOffsetX=x;this._runtime.UpdateRender();this._SetMeshChanged()}_GetImageOffsetX(){return this._imageOffsetX}_SetImageOffsetY(y){if(this._imageOffsetY===y)return;this._imageOffsetY=y;this._runtime.UpdateRender();this._SetMeshChanged()}_GetImageOffsetY(){return this._imageOffsetY}_SetImageScaleX(x){if(this._imageScaleX===x)return;this._imageScaleX=x;this._runtime.UpdateRender();this._SetMeshChanged()}_GetImageScaleX(){return this._imageScaleX}_SetImageScaleY(y){if(this._imageScaleY===\ny)return;this._imageScaleY=y;this._runtime.UpdateRender();this._SetMeshChanged()}_GetImageScaleY(){return this._imageScaleY}_SetImageAngle(a){if(this._imageAngle===a)return;this._imageAngle=a;this._runtime.UpdateRender();this._SetMeshChanged()}_GetImageAngle(){return this._imageAngle}_SetTileRandomizationEnabled(e){e=!!e;if(this._enableTileRandomization===e)return;this._enableTileRandomization=e;this._runtime.UpdateRender()}_IsTileRandomizationEnabled(){return this._enableTileRandomization}_SetTileXRandom(x){if(this._tileXRandom===\nx)return;this._tileXRandom=x;if(this._IsTileRandomizationEnabled())this._runtime.UpdateRender()}_GetTileXRandom(){return this._tileXRandom}_SetTileYRandom(y){if(this._tileYRandom===y)return;this._tileYRandom=y;if(this._IsTileRandomizationEnabled())this._runtime.UpdateRender()}_GetTileYRandom(){return this._tileYRandom}_SetTileAngleRandom(a){if(this._tileAngleRandom===a)return;this._tileAngleRandom=a;if(this._IsTileRandomizationEnabled())this._runtime.UpdateRender()}_GetTileAngleRandom(){return this._tileAngleRandom}_SetTileBlendMarginX(x){if(this._tileBlendMarginX===\nx)return;this._tileBlendMarginX=x;if(this._IsTileRandomizationEnabled())this._runtime.UpdateRender()}_GetTileBlendMarginX(){return this._tileBlendMarginX}_SetTileBlendMarginY(y){if(this._tileBlendMarginY===y)return;this._tileBlendMarginY=y;if(this._IsTileRandomizationEnabled())this._runtime.UpdateRender()}_GetTileBlendMarginY(){return this._tileBlendMarginY}GetDebuggerProperties(){const propsPrefix=\"plugins.tiledbg.properties\";return[{title:propsPrefix+\".image-transform.name\",properties:[{name:propsPrefix+\n\".image-offset-x.name\",value:this._GetImageOffsetX(),onedit:v=>this._SetImageOffsetX(v)},{name:propsPrefix+\".image-offset-y.name\",value:this._GetImageOffsetY(),onedit:v=>this._SetImageOffsetY(v)},{name:propsPrefix+\".image-scale-x.name\",value:this._GetImageScaleX()*100,onedit:v=>this._SetImageScaleX(v/100)},{name:propsPrefix+\".image-scale-y.name\",value:this._GetImageScaleY()*100,onedit:v=>this._SetImageScaleY(v/100)},{name:propsPrefix+\".image-angle.name\",value:C3.toDegrees(this._GetImageAngle()),onedit:v=>\nthis._SetImageAngle(C3.toRadians(v))}]},{title:propsPrefix+\".tile-randomization.name\",properties:[{name:propsPrefix+\".enable-tile-randomization.name\",value:this._IsTileRandomizationEnabled(),onedit:v=>this._SetTileRandomizationEnabled(v)},{name:propsPrefix+\".x-random.name\",value:this._GetTileXRandom()*100,onedit:v=>this._SetTileXRandom(v/100)},{name:propsPrefix+\".y-random.name\",value:this._GetTileYRandom()*100,onedit:v=>this._SetTileYRandom(v/100)},{name:propsPrefix+\".angle-random.name\",value:this._GetTileAngleRandom()*\n100,onedit:v=>this._SetTileAngleRandom(v/100)},{name:propsPrefix+\".blend-margin-x.name\",value:this._GetTileBlendMarginX()*100,onedit:v=>this._SetTileBlendMarginX(v/100)},{name:propsPrefix+\".blend-margin-y.name\",value:this._GetTileBlendMarginY()*100,onedit:v=>this._SetTileBlendMarginY(v/100)}]}]}GetPropertyValueByIndex(index){switch(index){case IMAGE_OFFSET_X:return this._GetImageOffsetX();case IMAGE_OFFSET_Y:return this._GetImageOffsetY();case IMAGE_SCALE_X:return this._GetImageScaleX();case IMAGE_SCALE_Y:return this._GetImageScaleY();\ncase IMAGE_ANGLE:return this._GetImageAngle();case ENABLE_TILE_RANDOMIZATION:return this._IsTileRandomizationEnabled();case TILE_XRANDOM:return this._GetTileXRandom();case TILE_YRANDOM:return this._GetTileYRandom();case TILE_ANGLERANDOM:return this._GetTileAngleRandom();case TILE_BLENDMARGINX:return this._GetTileBlendMarginX();case TILE_BLENDMARGINY:return this._GetTileBlendMarginY()}}SetPropertyValueByIndex(index,value){switch(index){case IMAGE_OFFSET_X:this._SetImageOffsetX(value);break;case IMAGE_OFFSET_Y:this._SetImageOffsetY(value);\nbreak;case IMAGE_SCALE_X:this._SetImageScaleX(value);break;case IMAGE_SCALE_Y:this._SetImageScaleY(value);break;case IMAGE_ANGLE:this._SetImageAngle(value);break;case ENABLE_TILE_RANDOMIZATION:this._SetTileRandomizationEnabled(!!value);break;case TILE_XRANDOM:this._SetTileXRandom(value);break;case TILE_YRANDOM:this._SetTileYRandom(value);break;case TILE_ANGLERANDOM:this._SetTileAngleRandom(value);break;case TILE_BLENDMARGINX:this._SetTileBlendMarginX(value);break;case TILE_BLENDMARGINY:this._SetTileBlendMarginY(value);\nbreak}}GetScriptInterfaceClass(){return self.ITiledBackgroundInstance}};const map=new WeakMap;self.ITiledBackgroundInstance=class ITiledBackgroundInstance extends self.IWorldInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}set imageOffsetX(x){C3X.RequireFiniteNumber(x);map.get(this)._SetImageOffsetX(x)}get imageOffsetX(){return map.get(this)._GetImageOffsetX()}set imageOffsetY(y){C3X.RequireFiniteNumber(y);map.get(this)._SetImageOffsetY(y)}get imageOffsetY(){return map.get(this)._GetImageOffsetY()}setImageOffset(x,\ny){C3X.RequireFiniteNumber(x);C3X.RequireFiniteNumber(y);const inst=map.get(this);inst._SetImageOffsetX(x);inst._SetImageOffsetY(y)}getImageOffset(){const inst=map.get(this);return[inst._GetImageOffsetX(),inst._GetImageOffsetY()]}set imageScaleX(x){C3X.RequireFiniteNumber(x);map.get(this)._SetImageScaleX(x)}get imageScaleX(){return map.get(this)._GetImageScaleX()}set imageScaleY(y){C3X.RequireFiniteNumber(y);map.get(this)._SetImageScaleY(y)}get imageScaleY(){return map.get(this)._GetImageScaleY()}setImageScale(x,\ny){C3X.RequireFiniteNumber(x);C3X.RequireFiniteNumber(y);const inst=map.get(this);inst._SetImageScaleX(x);inst._SetImageScaleY(y)}getImageScale(){const inst=map.get(this);return[inst._GetImageScaleX(),inst._GetImageScaleY()]}set imageAngle(a){C3X.RequireFiniteNumber(a);map.get(this)._SetImageAngle(a)}get imageAngle(){return map.get(this)._GetImageAngle()}set imageAngleDegrees(a){C3X.RequireFiniteNumber(a);map.get(this)._SetImageAngle(C3.toRadians(a))}get imageAngleDegrees(){return C3.toDegrees(map.get(this)._GetImageAngle())}get imageWidth(){return map.get(this).GetCurrentImageInfo().GetWidth()}get imageHeight(){return map.get(this).GetCurrentImageInfo().GetHeight()}getImageSize(){const imageInfo=\nmap.get(this).GetCurrentImageInfo();return[imageInfo.GetWidth(),imageInfo.GetHeight()]}set enableTileRandomization(e){map.get(this)._SetTileRandomizationEnabled(!!e)}get enableTileRandomization(){return map.get(this)._IsTileRandomizationEnabled()}set tileXRandom(x){C3X.RequireFiniteNumber(x);map.get(this)._SetTileXRandom(x)}get tileXRandom(){return map.get(this)._GetTileXRandom()}set tileYRandom(y){C3X.RequireFiniteNumber(y);map.get(this)._SetTileYRandom(y)}get tileYRandom(){return map.get(this)._GetTileYRandom()}setTileRandom(x,\ny){C3X.RequireFiniteNumber(x);C3X.RequireFiniteNumber(y);const inst=map.get(this);inst._SetTileXRandom(x);inst._SetTileYRandom(y)}getTileRandom(){const inst=map.get(this);return[inst._GetTileXRandom(),inst._GetTileYRandom()]}set tileAngleRandom(a){C3X.RequireFiniteNumber(a);map.get(this)._SetTileAngleRandom(a)}get tileAngleRandom(){return map.get(this)._GetTileAngleRandom()}set tileBlendMarginX(x){C3X.RequireFiniteNumber(x);map.get(this)._SetTileBlendMarginX(x)}get tileBlendMarginX(){return map.get(this)._GetTileBlendMarginX()}set tileBlendMarginY(y){C3X.RequireFiniteNumber(y);\nmap.get(this)._SetTileBlendMarginY(y)}get tileBlendMarginY(){return map.get(this)._GetTileBlendMarginY()}setTileBlendMargin(x,y){C3X.RequireFiniteNumber(x);C3X.RequireFiniteNumber(y);const inst=map.get(this);inst._SetTileBlendMarginX(x);inst._SetTileBlendMarginY(y)}getTileBlendMargin(){const inst=map.get(this);return[inst._GetTileBlendMarginX(),inst._GetTileBlendMarginY()]}async replaceImage(blob){C3X.RequireInstanceOf(blob,Blob);const sdkInst=map.get(this);const runtime=sdkInst.GetRuntime();const imageInfo=\nC3.New(C3.ImageInfo);imageInfo.LoadDynamicBlobAsset(runtime,blob);await imageInfo.LoadStaticTexture(runtime.GetRenderer(),{sampling:runtime.GetSampling(),wrapX:\"repeat\",wrapY:\"repeat\"});if(sdkInst.WasReleased()){imageInfo.Release();return}sdkInst._ReleaseOwnImage();sdkInst._ownImageInfo=imageInfo;runtime.UpdateRender()}}}{const C3=self.C3;C3.Plugins.TiledBg.Cnds={OnURLLoaded(){return true},OnURLFailed(){return true},IsTileRandomizationEnabled(){return this._IsTileRandomizationEnabled()}}}\n{const C3=self.C3;C3.Plugins.TiledBg.Acts={SetImageOffsetX(x){this._SetImageOffsetX(x)},SetImageOffsetY(y){this._SetImageOffsetY(y)},SetImageScaleX(x){this._SetImageScaleX(x/100)},SetImageScaleY(y){this._SetImageScaleY(y/100)},SetImageAngle(a){this._SetImageAngle(C3.toRadians(a))},SetTileRandomizationEnabled(e){this._SetTileRandomizationEnabled(e)},SetTilePosRandom(x,y){this._SetTileXRandom(x/100);this._SetTileYRandom(y/100)},SetTileAngleRandom(a){this._SetTileAngleRandom(a/100)},SetTileBlendMargin(x,\ny){this._SetTileBlendMarginX(x/100);this._SetTileBlendMarginY(y/100)},SetEffect(effect){this.GetWorldInfo().SetBlendMode(effect);this._runtime.UpdateRender()},async LoadURL(url,crossOrigin){if(this._ownImageInfo&&this._ownImageInfo.GetURL()===url)return;const runtime=this._runtime;const imageInfo=C3.New(C3.ImageInfo);try{await imageInfo.LoadDynamicAsset(runtime,url);if(!imageInfo.IsLoaded())throw new Error(\"image failed to load\");if(this.WasReleased()){imageInfo.Release();return null}const texture=\nawait imageInfo.LoadStaticTexture(runtime.GetRenderer(),{sampling:runtime.GetSampling(),wrapX:\"repeat\",wrapY:\"repeat\"});if(!texture)return}catch(err){console.error(\"Load image from URL failed: \",err);if(!this.WasReleased())this.Trigger(C3.Plugins.TiledBg.Cnds.OnURLFailed);return}if(this.WasReleased()){imageInfo.Release();return}this._ReleaseOwnImage();this._ownImageInfo=imageInfo;runtime.UpdateRender();await this.TriggerAsync(C3.Plugins.TiledBg.Cnds.OnURLLoaded)}}}\n{const C3=self.C3;C3.Plugins.TiledBg.Exps={ImageWidth(){return this.GetCurrentImageInfo().GetWidth()},ImageHeight(){return this.GetCurrentImageInfo().GetHeight()},ImageOffsetX(){return this._imageOffsetX},ImageOffsetY(){return this._imageOffsetY},ImageScaleX(){return this._imageScaleX*100},ImageScaleY(){return this._imageScaleY*100},ImageAngle(){return C3.toDegrees(this._imageAngle)},TileXRandom(){return this._GetTileXRandom()*100},TileYRandom(){return this._GetTileYRandom()*100},TileAngleRandom(){return this._GetTileAngleRandom()*\n100},TileBlendMarginX(){return this._GetTileBlendMarginX()*100},TileBlendMarginY(){return this._GetTileBlendMarginY()*100}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;const actionPromises=[];C3.Plugins.Audio=class AudioPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}_AddActionPromise(promise){actionPromises.push(promise)}static async WaitForAllActionPromises(){await Promise.all(actionPromises);C3.clearArray(actionPromises)}Release(){super.Release()}}}\n{const C3=self.C3;const C3X=self.C3X;C3.Plugins.Audio.Type=class AudioType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.IAudioObjectType}};function GetAudioDOMInterface(){if(self[\"C3Audio_DOMInterface\"])return self[\"C3Audio_DOMInterface\"];else throw new Error(\"audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode\");}self.IAudioObjectType=class IAudioObjectType extends self.IObjectClass{constructor(objectType){super(objectType)}get audioContext(){return GetAudioDOMInterface()[\"GetAudioContextExtern\"]()}get destinationNode(){return GetAudioDOMInterface()[\"GetDestinationNodeExtern\"]()}}}\n{const C3=self.C3;const DOM_COMPONENT_ID=\"audio\";const LATENCY_HINTS=[\"interactive\",\"balanced\",\"playback\"];C3.Plugins.Audio.Instance=class AudioInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._nextPlayTime=0;this._triggerTags=[];this._enableMultiTags=true;this._timeScaleMode=0;this._saveLoadMode=0;this._playInBackground=false;this._panningModel=1;this._distanceModel=1;this._listenerPos=[this._runtime.GetViewportWidth()/2,this._runtime.GetViewportHeight()/\n2,600];this._listenerForwardVec=[0,0,-1];this._listenerUpVec=[0,1,0];this._referenceDistance=600;this._maxDistance=1E4;this._rolloffFactor=1;this._listenerInst=null;this._loadListenerUid=-1;this._masterVolume=1;this._isSilent=false;this._sampleRate=0;this._audioContextState=\"suspended\";this._outputLatency=0;this._effectCount=new Map;this._preloadTotal=0;this._preloadCount=0;this._bufferMetadata=new Map;this._remoteUrls=new Map;let latencyHint=\"interactive\";if(properties){this._timeScaleMode=properties[0];\nthis._saveLoadMode=properties[1];this._playInBackground=properties[2];latencyHint=LATENCY_HINTS[properties[3]];this._enableMultiTags=properties[4];this._panningModel=properties[5];this._distanceModel=properties[6];this._listenerPos[2]=properties[7];this._referenceDistance=properties[8];this._maxDistance=properties[9];this._rolloffFactor=properties[10]}this._lastAIState=[];this._lastFxState=[];this._lastAnalysersData=[];this.AddDOMMessageHandlers([[\"state\",e=>this._OnUpdateState(e)],[\"audiocontext-state\",\ne=>this._OnAudioContextStateChanged(e)],[\"fxstate\",e=>this._OnUpdateFxState(e)],[\"trigger\",e=>this._OnTrigger(e)],[\"buffer-metadata\",e=>this._OnBufferMetadata(e)]]);const rt=this.GetRuntime().Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,\"instancedestroy\",e=>this._OnInstanceDestroyed(e.instance)),C3.Disposable.From(rt,\"afterload\",()=>this._OnAfterLoad()),C3.Disposable.From(rt,\"suspend\",()=>this._OnSuspend()),C3.Disposable.From(rt,\"resume\",()=>this._OnResume()));this._runtime.AddLoadPromise(this.PostToDOMAsync(\"create-audio-context\",\n{\"preloadList\":this._runtime.GetAssetManager().GetAudioToPreload().map(o=>({\"originalUrl\":o.originalUrl,\"url\":o.url,\"type\":o.type,\"fileSize\":o.fileSize})),\"isiOSCordova\":this._runtime.IsiOSCordova(),\"isSafari\":C3.Platform.Browser===\"Safari\",\"timeScaleMode\":this._timeScaleMode,\"latencyHint\":latencyHint,\"panningModel\":this._panningModel,\"distanceModel\":this._distanceModel,\"refDistance\":this._referenceDistance,\"maxDistance\":this._maxDistance,\"rolloffFactor\":this._rolloffFactor,\"listenerPos\":this._listenerPos}).then(info=>\n{this._sampleRate=info[\"sampleRate\"];this._audioContextState=info[\"audioContextState\"];this._outputLatency=info[\"outputLatency\"]}));this._StartTicking()}Release(){this._listenerInst=null;super.Release()}_SplitTags(tagStr){if(this._enableMultiTags)return tagStr.split(\" \").filter(s=>!!s);else return tagStr?[tagStr]:[]}_MatchTagLists(tagArr1,tagArr2){for(const t2 of tagArr2){let found=false;for(const t1 of tagArr1)if(C3.equalsNoCase(t1,t2)){found=true;break}if(!found)return false}return true}_MatchTagListToStr(tagArr,\ntagStr){return this._MatchTagLists(tagArr,this._SplitTags(tagStr))}_AddActionPromise(promise){this.GetPlugin()._AddActionPromise(promise)}_OnInstanceDestroyed(inst){if(this._listenerInst===inst)this._listenerInst=null}DbToLinearNoCap(x){return Math.pow(10,x/20)}DbToLinear(x){const v=this.DbToLinearNoCap(x);if(!isFinite(v))return 0;return Math.max(Math.min(v,1),0)}LinearToDbNoCap(x){return Math.log(x)/Math.log(10)*20}LinearToDb(x){return this.LinearToDbNoCap(Math.max(Math.min(x,1),0))}_OnSuspend(){if(this._playInBackground)return;\nthis.PostToDOM(\"set-suspended\",{\"isSuspended\":true})}_OnResume(){if(this._playInBackground)return;this.PostToDOM(\"set-suspended\",{\"isSuspended\":false})}_OnUpdateState(e){const tickCount=e[\"tickCount\"];this._outputLatency=e[\"outputLatency\"];const preservePlaceholders=this._lastAIState.filter(ai=>ai.hasOwnProperty(\"placeholder\")&&(ai[\"placeholder\"]>tickCount||ai[\"placeholder\"]===-1));this._lastAIState=e[\"audioInstances\"];this._lastAnalysersData=e[\"analysers\"];if(preservePlaceholders.length>0)C3.appendArray(this._lastAIState,\npreservePlaceholders)}_OnBufferMetadata(e){this._bufferMetadata.set(e[\"originalUrl\"],{duration:e[\"duration\"]})}_OnAudioContextStateChanged(e){this._audioContextState=e[\"audioContextState\"]}GetAudioContextState(){if(this._runtime.IsExportToVideo())return\"running\";else return this._audioContextState}_OnUpdateFxState(e){this._lastFxState=e[\"fxstate\"]}_GetFirstAudioStateByTags(tagStr){const tagArr=this._SplitTags(tagStr);for(const a of this._lastAIState)if(this._MatchTagLists(a[\"tags\"],tagArr))return a;\nreturn null}_IsTagPlaying(tagStr){const tagArr=this._SplitTags(tagStr);return this._lastAIState.some(ai=>this._MatchTagLists(ai[\"tags\"],tagArr)&&ai[\"isPlaying\"])}_MaybeMarkAsPlaying(originalUrl,tagStr,isMusic,isLooping,vol){if(this._IsTagPlaying(tagStr))return null;const bufferMeta=this._bufferMetadata.get(originalUrl);const state={\"tags\":this._SplitTags(tagStr),\"duration\":bufferMeta?bufferMeta.duration:0,\"volume\":vol,\"isPlaying\":true,\"playbackTime\":0,\"playbackRate\":1,\"uid\":-1,\"bufferOriginalUrl\":originalUrl,\n\"bufferUrl\":\"\",\"bufferType\":\"\",\"isMusic\":isMusic,\"isLooping\":isLooping,\"isMuted\":false,\"resumePosition\":0,\"pan\":null,\"placeholder\":-1};this._lastAIState.push(state);return state}async _OnTrigger(e){const type=e[\"type\"];this._triggerTags=e[\"tags\"];const aiId=e[\"aiid\"];if(type===\"ended\"){for(const aiState of this._lastAIState)if(aiState[\"aiid\"]===aiId){aiState[\"isPlaying\"]=false;break}await this.TriggerAsync(C3.Plugins.Audio.Cnds.OnEnded)}else if(type===\"fade-ended\")await this.TriggerAsync(C3.Plugins.Audio.Cnds.OnFadeEnded)}_MatchTriggerTag(tagStr){return this._MatchTagListToStr(this._triggerTags,\ntagStr)}Tick(){const o={\"timeScale\":this._runtime.GetTimeScale(),\"gameTime\":this._runtime.GetGameTimeRaw(),\"instPans\":this.GetInstancePans(),\"tickCount\":this._runtime.GetTickCountNoSave()};if(this._listenerInst){const wi=this._listenerInst.GetWorldInfo();this._listenerPos[0]=wi.GetX();this._listenerPos[1]=wi.GetY();o[\"listenerPos\"]=this._listenerPos;o[\"listenerOrientation\"]=[...this._listenerForwardVec,...this._listenerUpVec]}this.PostToDOM(\"tick\",o)}rotatePtAround(px,py,a,ox,oy){if(a===0)return[px,\npy];const sin_a=Math.sin(a);const cos_a=Math.cos(a);px-=ox;py-=oy;const left_sin_a=px*sin_a;const top_sin_a=py*sin_a;const left_cos_a=px*cos_a;const top_cos_a=py*cos_a;px=left_cos_a-top_sin_a;py=top_cos_a+left_sin_a;px+=ox;py+=oy;return[px,py]}GetInstancePans(){return this._lastAIState.filter(ai=>ai[\"uid\"]!==-1).map(ai=>this._runtime.GetInstanceByUID(ai[\"uid\"])).filter(inst=>inst).map(inst=>{const wi=inst.GetWorldInfo();const layerAngle=wi.GetLayer().GetAngle();const [x,y]=this.rotatePtAround(wi.GetX(),\nwi.GetY(),-layerAngle,this._listenerPos[0],this._listenerPos[1]);return{\"uid\":inst.GetUID(),\"x\":x,\"y\":y,\"z\":wi.GetTotalZElevation(),\"angle\":wi.GetAngle()-layerAngle}})}GetAnalyserData(tagStr,index){for(const o of this._lastAnalysersData)if(o.index===index&&C3.equalsNoCase(o[\"tag\"],tagStr))return o;return null}_IncrementEffectCount(tagStr){for(const tag of this._SplitTags(tagStr)){const lowerTag=tag.toLowerCase();this._effectCount.set(lowerTag,(this._effectCount.get(lowerTag)||0)+1)}}_ShouldSave(ai){if(ai.hasOwnProperty(\"placeholder\"))return false;\nif(this._saveLoadMode===3)return false;else if(ai[\"isMusic\"]&&this._saveLoadMode===1)return false;else if(!ai[\"isMusic\"]&&this._saveLoadMode===2)return false;else return true}SaveToJson(){return{\"isSilent\":this._isSilent,\"masterVolume\":this._masterVolume,\"listenerZ\":this._listenerPos[2],\"listenerForwardVec\":this._listenerForwardVec,\"listenerUpVec\":this._listenerUpVec,\"listenerUid\":this._listenerInst?this._listenerInst.GetUID():-1,\"remoteUrls\":[...this._remoteUrls.entries()],\"playing\":this._lastAIState.filter(ai=>\nthis._ShouldSave(ai)),\"effects\":this._lastFxState,\"analysers\":this._lastAnalysersData}}LoadFromJson(o){this._isSilent=o[\"isSilent\"];this._masterVolume=o[\"masterVolume\"];this._listenerPos[2]=o[\"listenerZ\"];this._listenerInst=null;this._loadListenerUid=o[\"listenerUid\"];if(o.hasOwnProperty(\"listenerForwardVec\"))this._listenerForwardVec=o[\"listenerForwardVec\"];else this._listenerForwardVec=[0,0,-1];if(o.hasOwnProperty(\"listenerUpVec\"))this._listenerUpVec=o[\"listenerUpVec\"];else this._listenerUpVec=[0,\n1,0];this._remoteUrls.clear();if(o[\"remoteUrls\"])for(const [k,v]of o[\"remoteUrls\"])this._remoteUrls.set(k,v);this._lastAIState=o[\"playing\"];for(const a of this._lastAIState)if(a.hasOwnProperty(\"tag\")&&!a.hasOwnProperty(\"tags\"))a[\"tags\"]=[a[\"tag\"]].filter(s=>!!s);this._lastFxState=o[\"effects\"];this._lastAnalysersData=o[\"analysers\"]}_OnAfterLoad(){if(this._loadListenerUid!==-1){this._listenerInst=this._runtime.GetInstanceByUID(this._loadListenerUid);this._loadListenerUid=-1;if(this._listenerInst){const wi=\nthis._listenerInst.GetWorldInfo();this._listenerPos[0]=wi.GetX();this._listenerPos[1]=wi.GetY()}}for(const ai of this._lastAIState){const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(ai[\"bufferOriginalUrl\"]);if(info){ai[\"bufferUrl\"]=info.url;ai[\"bufferType\"]=info.type}else ai[\"bufferUrl\"]=null}for(const fxChainData of Object.values(this._lastFxState))for(const fxData of fxChainData)if(fxData.hasOwnProperty(\"bufferOriginalUrl\")){const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(fxData[\"bufferOriginalUrl\"]);\nif(info){fxData[\"bufferUrl\"]=info.url;fxData[\"bufferType\"]=info.type}}this.PostToDOM(\"load-state\",{\"saveLoadMode\":this._saveLoadMode,\"timeScale\":this._runtime.GetTimeScale(),\"gameTime\":this._runtime.GetGameTimeRaw(),\"listenerPos\":this._listenerPos,\"listenerOrientation\":[...this._listenerForwardVec,...this._listenerUpVec],\"isSilent\":this._isSilent,\"masterVolume\":this._masterVolume,\"playing\":this._lastAIState.filter(ai=>ai[\"bufferUrl\"]!==null),\"effects\":this._lastFxState})}GetDebuggerProperties(){const fxProps=\n[];for(const [tag,fxChainData]of Object.entries(this._lastFxState))fxProps.push({name:\"$\"+tag,value:fxChainData.map(d=>d[\"type\"]).join(\", \")});const prefix=\"plugins.audio.debugger\";return[{title:prefix+\".tag-effects\",properties:fxProps},{title:prefix+\".currently-playing\",properties:[{name:prefix+\".currently-playing-count\",value:this._lastAIState.length},...this._lastAIState.map((s,index)=>({name:\"$#\"+index,value:`${s[\"bufferOriginalUrl\"]} (\"${s[\"tags\"]}\") ${Math.round(s[\"playbackTime\"]*10)/10} / ${Math.round(s[\"duration\"]*\n10)/10}`}))]}]}}}{const C3=self.C3;C3.Plugins.Audio.Cnds={OnEnded(tagStr){return this._MatchTriggerTag(tagStr)},OnFadeEnded(tagStr){return this._MatchTriggerTag(tagStr)},PreloadsComplete(){return this._preloadCount===this._preloadTotal},AdvancedAudioSupported(){return true},IsSilent(){return this._isSilent},IsAnyPlaying(){for(const ai of this._lastAIState)if(ai[\"isPlaying\"])return true;return false},IsTagPlaying(tagStr){return this._IsTagPlaying(tagStr)}}}\n{const C3=self.C3;const FILTER_TYPES=[\"lowpass\",\"highpass\",\"bandpass\",\"lowshelf\",\"highshelf\",\"peaking\",\"notch\",\"allpass\"];C3.Plugins.Audio.Acts={Play(file,looping,vol,stereoPan,tagStr){const ret=C3.Plugins.Audio.Acts._DoPlay.call(this,file,looping,vol,stereoPan,tagStr);this._AddActionPromise(ret);return ret},PlayFromTimeline(file,vol,tagStr,startOffset){C3.Plugins.Audio.Acts._DoPlay.call(this,file,0,vol,0,tagStr,startOffset)},async _DoPlay(file,looping,vol,stereoPan,tagStr,startOffset){if(this._isSilent)return;\nconst isMusic=file[1];const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);if(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(file[0],tagStr,isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync(\"play\",{\"originalUrl\":file[0],\"url\":info.url,\"type\":info.type,\"isMusic\":isMusic,\"tags\":this._SplitTags(tagStr),\"isLooping\":looping!==0,\"vol\":this.DbToLinear(vol),\"stereoPan\":C3.clamp(stereoPan/100,-1,1),\"pos\":startOffset||\n0,\"off\":nextPlayTime,\"trueClock\":!!self[\"C3_GetAudioContextCurrentTime\"]})}finally{if(state)state[\"placeholder\"]=this._runtime.GetTickCountNoSave()}},async PlayAtPosition(file,looping,vol,x,y,z,angle,innerAngle,outerAngle,outerGain,tagStr){if(this._isSilent)return;const isMusic=file[1];const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);if(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(file[0],tagStr,isMusic,looping!==\n0,this.DbToLinear(vol));try{await this.PostToDOMAsync(\"play\",{\"originalUrl\":file[0],\"url\":info.url,\"type\":info.type,\"isMusic\":isMusic,\"tags\":this._SplitTags(tagStr),\"isLooping\":looping!==0,\"vol\":this.DbToLinear(vol),\"pos\":0,\"off\":nextPlayTime,\"trueClock\":!!self[\"C3_GetAudioContextCurrentTime\"],\"panning\":{\"x\":x,\"y\":y,\"z\":z,\"angle\":C3.toRadians(angle),\"innerAngle\":C3.toRadians(innerAngle),\"outerAngle\":C3.toRadians(outerAngle),\"outerGain\":this.DbToLinear(outerGain)}})}finally{if(state)state[\"placeholder\"]=\nthis._runtime.GetTickCountNoSave()}},async PlayAtObject(file,looping,vol,objectClass,innerAngle,outerAngle,outerGain,tagStr){if(this._isSilent)return;if(!objectClass)return;const inst=objectClass.GetFirstPicked();if(!inst||!inst.GetWorldInfo())return;const wi=inst.GetWorldInfo();const layerAngle=wi.GetLayer().GetAngle();const [x,y]=this.rotatePtAround(wi.GetX(),wi.GetY(),-layerAngle,this._listenerPos[0],this._listenerPos[1]);const isMusic=file[1];const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);\nif(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(file[0],tagStr,isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync(\"play\",{\"originalUrl\":file[0],\"url\":info.url,\"type\":info.type,\"isMusic\":isMusic,\"tags\":this._SplitTags(tagStr),\"isLooping\":looping!==0,\"vol\":this.DbToLinear(vol),\"pos\":0,\"off\":nextPlayTime,\"trueClock\":!!self[\"C3_GetAudioContextCurrentTime\"],\"panning\":{\"x\":x,\"y\":y,\"z\":wi.GetTotalZElevation(),\"angle\":wi.GetAngle()-\nlayerAngle,\"innerAngle\":C3.toRadians(innerAngle),\"outerAngle\":C3.toRadians(outerAngle),\"outerGain\":this.DbToLinear(outerGain),\"uid\":inst.GetUID()}})}finally{if(state)state[\"placeholder\"]=this._runtime.GetTickCountNoSave()}},async PlayByName(folder,filename,looping,vol,stereoPan,tagStr){if(this._isSilent)return;const isMusic=folder===1;const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(filename)||this._remoteUrls.get(filename.toLowerCase());if(!info)return;const nextPlayTime=this._nextPlayTime;\nthis._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(filename,tagStr,isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync(\"play\",{\"originalUrl\":filename,\"url\":info.url,\"type\":info.type,\"isMusic\":isMusic,\"tags\":this._SplitTags(tagStr),\"isLooping\":looping!==0,\"vol\":this.DbToLinear(vol),\"stereoPan\":C3.clamp(stereoPan/100,-1,1),\"pos\":0,\"off\":nextPlayTime,\"trueClock\":!!self[\"C3_GetAudioContextCurrentTime\"]})}finally{if(state)state[\"placeholder\"]=this._runtime.GetTickCountNoSave()}},\nasync PlayAtPositionByName(folder,filename,looping,vol,x,y,z,angle,innerAngle,outerAngle,outerGain,tagStr){if(this._isSilent)return;const isMusic=folder===1;const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(filename)||this._remoteUrls.get(filename.toLowerCase());if(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(filename,tagStr,isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync(\"play\",{\"originalUrl\":filename,\n\"url\":info.url,\"type\":info.type,\"isMusic\":isMusic,\"tags\":this._SplitTags(tagStr),\"isLooping\":looping!==0,\"vol\":this.DbToLinear(vol),\"pos\":0,\"off\":nextPlayTime,\"trueClock\":!!self[\"C3_GetAudioContextCurrentTime\"],\"panning\":{\"x\":x,\"y\":y,\"z\":z,\"angle\":C3.toRadians(angle),\"innerAngle\":C3.toRadians(innerAngle),\"outerAngle\":C3.toRadians(outerAngle),\"outerGain\":this.DbToLinear(outerGain)}})}finally{if(state)state[\"placeholder\"]=this._runtime.GetTickCountNoSave()}},async PlayAtObjectByName(folder,filename,\nlooping,vol,objectClass,innerAngle,outerAngle,outerGain,tagStr){if(this._isSilent)return;if(this._isSilent)return;if(!objectClass)return;const inst=objectClass.GetFirstPicked();if(!inst||!inst.GetWorldInfo())return;const wi=inst.GetWorldInfo();const layerAngle=wi.GetLayer().GetAngle();const [x,y]=this.rotatePtAround(wi.GetX(),wi.GetY(),-layerAngle,this._listenerPos[0],this._listenerPos[1]);const isMusic=folder===1;const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(filename)||this._remoteUrls.get(filename.toLowerCase());\nif(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(filename,tagStr,isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync(\"play\",{\"originalUrl\":filename,\"url\":info.url,\"type\":info.type,\"isMusic\":isMusic,\"tags\":this._SplitTags(tagStr),\"isLooping\":looping!==0,\"vol\":this.DbToLinear(vol),\"pos\":0,\"off\":nextPlayTime,\"trueClock\":!!self[\"C3_GetAudioContextCurrentTime\"],\"panning\":{\"x\":x,\"y\":y,\"z\":wi.GetTotalZElevation(),\"angle\":wi.GetAngle()-\nlayerAngle,\"innerAngle\":C3.toRadians(innerAngle),\"outerAngle\":C3.toRadians(outerAngle),\"outerGain\":this.DbToLinear(outerGain),\"uid\":inst.GetUID()}})}finally{if(state)state[\"placeholder\"]=this._runtime.GetTickCountNoSave()}},SetLooping(tagStr,looping){this.PostToDOM(\"set-looping\",{\"tags\":this._SplitTags(tagStr),\"isLooping\":looping===0})},SetMuted(tagStr,muted){this.PostToDOM(\"set-muted\",{\"tags\":this._SplitTags(tagStr),\"isMuted\":muted===0})},SetVolume(tagStr,vol){this.PostToDOM(\"set-volume\",{\"tags\":this._SplitTags(tagStr),\n\"vol\":this.DbToLinear(vol)})},FadeVolume(tagStr,vol,duration,ending){this.PostToDOM(\"fade-volume\",{\"tags\":this._SplitTags(tagStr),\"vol\":this.DbToLinear(vol),\"duration\":duration,\"stopOnEnd\":ending===0})},SetStereoPan(tagStr,p){this.PostToDOM(\"set-stereo-pan\",{\"tags\":this._SplitTags(tagStr),\"p\":C3.clamp(p/100,-1,1)})},async Preload(file){const isMusic=file[1];const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);if(!info)return;this._preloadTotal++;await this.PostToDOMAsync(\"preload\",\n{\"originalUrl\":file[0],\"url\":info.url,\"type\":info.type,\"isMusic\":isMusic});this._preloadCount++},async PreloadByName(folder,filename){const isMusic=folder===1;const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(filename)||this._remoteUrls.get(filename.toLowerCase());if(!info)return;this._preloadTotal++;await this.PostToDOMAsync(\"preload\",{\"originalUrl\":filename,\"url\":info.url,\"type\":info.type,\"isMusic\":isMusic});this._preloadCount++},SetPlaybackRate(tagStr,rate){this.PostToDOM(\"set-playback-rate\",\n{\"tags\":this._SplitTags(tagStr),\"rate\":Math.max(rate,0)})},Stop(tagStr){this.PostToDOM(\"stop\",{\"tags\":this._SplitTags(tagStr)})},StopAll(){this.PostToDOM(\"stop-all\")},SetPaused(tagStr,state){this.PostToDOM(\"set-paused\",{\"tags\":this._SplitTags(tagStr),\"paused\":state===0})},Seek(tagStr,pos){this.PostToDOM(\"seek\",{\"tags\":this._SplitTags(tagStr),\"pos\":pos})},SetSilent(s){if(s===2)s=this._isSilent?1:0;s=s===0;if(this._isSilent===s)return;this._isSilent=s;this.PostToDOM(\"set-silent\",{\"isSilent\":s})},SetMasterVolume(vol){const mv=\nthis.DbToLinear(vol);if(this._masterVolume===mv)return;this._masterVolume=mv;this.PostToDOM(\"set-master-volume\",{\"vol\":mv})},AddFilterEffect(tagStr,type,freq,detune,q,gain,mix){const typeStr=FILTER_TYPES[type];this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"filter\",\"tags\":this._SplitTags(tagStr),\"params\":[typeStr,freq,detune,q,gain,C3.clamp(mix/100,0,1)]})},AddDelayEffect(tagStr,delay,gain,mix){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"delay\",\n\"tags\":this._SplitTags(tagStr),\"params\":[delay,this.DbToLinear(gain),C3.clamp(mix/100,0,1)]})},AddFlangerEffect(tagStr,delay,modulation,freq,feedback,mix){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"flanger\",\"tags\":this._SplitTags(tagStr),\"params\":[delay/1E3,modulation/1E3,freq,feedback/100,C3.clamp(mix/100,0,1)]})},AddPhaserEffect(tagStr,freq,detune,q,mod,modfreq,mix){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"phaser\",\"tags\":this._SplitTags(tagStr),\n\"params\":[freq,detune,q,mod,modfreq,C3.clamp(mix/100,0,1)]})},AddConvolutionEffect(tagStr,file,norm,mix){const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);if(!info)return;this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"convolution\",\"tags\":this._SplitTags(tagStr),\"bufferOriginalUrl\":file[0],\"bufferUrl\":info.url,\"bufferType\":info.type,\"params\":[norm===0,C3.clamp(mix/100,0,1)]})},AddGainEffect(tagStr,g){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",\n{\"type\":\"gain\",\"tags\":this._SplitTags(tagStr),\"params\":[this.DbToLinear(g)]})},AddStereoPanEffect(tagStr,g){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"stereopan\",\"tags\":this._SplitTags(tagStr),\"params\":[C3.clamp(g/100,-1,1)]})},AddMuteEffect(tagStr){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"gain\",\"tags\":this._SplitTags(tagStr),\"params\":[0]})},AddTremoloEffect(tagStr,freq,mix){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",\n{\"type\":\"tremolo\",\"tags\":this._SplitTags(tagStr),\"params\":[freq,C3.clamp(mix/100,0,1)]})},AddRingModEffect(tagStr,freq,mix){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"ringmod\",\"tags\":this._SplitTags(tagStr),\"params\":[freq,C3.clamp(mix/100,0,1)]})},AddDistortionEffect(tagStr,threshold,headroom,drive,makeupgain,mix){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"distortion\",\"tags\":this._SplitTags(tagStr),\"params\":[this.DbToLinearNoCap(threshold),\nthis.DbToLinearNoCap(headroom),drive,this.DbToLinearNoCap(makeupgain),C3.clamp(mix/100,0,1)]})},AddCompressorEffect(tagStr,threshold,knee,ratio,attack,release){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"compressor\",\"tags\":this._SplitTags(tagStr),\"params\":[threshold,knee,ratio,attack/1E3,release/1E3]})},AddAnalyserEffect(tagStr,fftSize,smoothing){this._IncrementEffectCount(tagStr);this.PostToDOM(\"add-effect\",{\"type\":\"analyser\",\"tags\":this._SplitTags(tagStr),\"params\":[fftSize,\nsmoothing]})},RemoveEffects(tagStr){const tagArr=this._SplitTags(tagStr);for(const tag of tagArr)this._effectCount.set(tag.toLowerCase(),0);this.PostToDOM(\"remove-effects\",{\"tags\":tagArr});this._lastFxState={}},SetEffectParameter(tagStr,index,param,value,ramp,time){this.PostToDOM(\"set-effect-param\",{\"tags\":this._SplitTags(tagStr),\"index\":Math.floor(index),\"param\":param,\"value\":value,\"ramp\":ramp,\"time\":time})},SetListenerObject(objectClass){if(!objectClass)return;const inst=objectClass.GetFirstPicked();\nif(!inst||!inst.GetWorldInfo())return;this._listenerInst=inst},SetListenerZ(z){this._listenerPos[2]=z},SetListenerOrientation(fx,fy,fz,ux,uy,uz){this._listenerForwardVec[0]=fx;this._listenerForwardVec[1]=fy;this._listenerForwardVec[2]=-fz;this._listenerUpVec[0]=ux;this._listenerUpVec[1]=uy;this._listenerUpVec[2]=-uz},ScheduleNextPlay(t){this._nextPlayTime=Math.max(t,0)},UnloadAudio(file){const isMusic=file[1];const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);if(!info)return;\nthis.PostToDOM(\"unload\",{\"url\":info.url,\"type\":info.type,\"isMusic\":isMusic})},UnloadAudioByName(folder,filename){const isMusic=folder===1;const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(filename)||this._remoteUrls.get(filename.toLowerCase());if(!info)return;this.PostToDOM(\"unload\",{\"url\":info.url,\"type\":info.type,\"isMusic\":isMusic})},UnloadAll(){this.PostToDOM(\"unload-all\")},AddRemoteURL(url,type,name){this._remoteUrls.set(name.toLowerCase(),{url,type})}}}\n{const C3=self.C3;C3.Plugins.Audio.Exps={Duration(tagStr){const a=this._GetFirstAudioStateByTags(tagStr);return a?a[\"duration\"]:0},PlaybackTime(tagStr){const a=this._GetFirstAudioStateByTags(tagStr);return a?a[\"playbackTime\"]:0},PlaybackRate(tagStr){const a=this._GetFirstAudioStateByTags(tagStr);return a?a[\"playbackRate\"]:0},Volume(tagStr){const a=this._GetFirstAudioStateByTags(tagStr);return a?this.LinearToDb(a[\"volume\"]):0},MasterVolume(){return this.LinearToDb(this._masterVolume)},EffectCount(tag){return this._effectCount.get(tag.toLowerCase())||\n0},AnalyserFreqBinCount(tagStr,index){const o=this.GetAnalyserData(tagStr,Math.floor(index));return o?o[\"binCount\"]:0},AnalyserFreqBinAt(tagStr,index,bin){const o=this.GetAnalyserData(tagStr,Math.floor(index));if(!o)return 0;bin=Math.floor(bin);if(bin<0||bin>=o[\"binCount\"])return 0;return o[\"freqBins\"][bin]},AnalyserPeakLevel(tagStr,index){const o=this.GetAnalyserData(tagStr,Math.floor(index));return o?o[\"peak\"]:0},AnalyserRMSLevel(tagStr,index){const o=this.GetAnalyserData(tagStr,Math.floor(index));\nreturn o?o[\"rms\"]:0},SampleRate(){return this._sampleRate},CurrentTime(){if(self[\"C3_GetAudioContextCurrentTime\"])return self[\"C3_GetAudioContextCurrentTime\"]();else return performance.now()/1E3},OutputLatency(){return this._outputLatency}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Plugins.Touch=class TouchPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}}\n{const C3=self.C3;const C3X=self.C3X;C3.Plugins.Touch.Type=class TouchType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.ITouchObjectType}};let touchObjectType=null;function GetTouchSdkInstance(){return touchObjectType.GetSingleGlobalInstance().GetSdkInstance()}self.ITouchObjectType=class ITouchObjectType extends self.IObjectClass{constructor(objectType){super(objectType);touchObjectType=objectType;objectType.GetRuntime()._GetCommonScriptInterfaces().touch=\nthis}requestPermission(type){C3X.RequireString(type);const touchInst=GetTouchSdkInstance();if(type===\"orientation\")return touchInst._RequestPermission(0);else if(type===\"motion\")return touchInst._RequestPermission(1);else throw new Error(\"invalid type\");}}}\n{const C3=self.C3;const DOM_COMPONENT_ID=\"touch\";C3.Plugins.Touch.Instance=class TouchInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._touches=new Map;this._useMouseInput=false;this._isMouseDown=false;this._orientCompassHeading=0;this._orientAlpha=0;this._orientBeta=0;this._orientGamma=0;this._accX=0;this._accY=0;this._accZ=0;this._accWithGX=0;this._accWithGY=0;this._accWithGZ=0;this._triggerIndex=0;this._triggerId=0;this._triggerPermission=0;this._curTouchX=\n0;this._curTouchY=0;this._getTouchIndex=0;this._permissionPromises=[];if(properties)this._useMouseInput=properties[0];this.AddDOMMessageHandler(\"permission-result\",e=>this._OnPermissionResult(e));const rt=this.GetRuntime().Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,\"pointerdown\",e=>this._OnPointerDown(e.data)),C3.Disposable.From(rt,\"pointermove\",e=>this._OnPointerMove(e.data)),C3.Disposable.From(rt,\"pointerup\",e=>this._OnPointerUp(e.data,false)),C3.Disposable.From(rt,\n\"pointercancel\",e=>this._OnPointerUp(e.data,true)),C3.Disposable.From(rt,\"deviceorientation\",e=>this._OnDeviceOrientation(e.data)),C3.Disposable.From(rt,\"deviceorientationabsolute\",e=>this._OnDeviceOrientationAbsolute(e.data)),C3.Disposable.From(rt,\"devicemotion\",e=>this._OnDeviceMotion(e.data)),C3.Disposable.From(rt,\"tick2\",e=>this._OnTick2()))}Release(){this._touches.clear();super.Release()}_OnPointerDown(e){if(e[\"pointerType\"]===\"mouse\")if(this._useMouseInput)this._isMouseDown=true;else return;\nconst pointerId=e[\"pointerId\"];if(this._touches.has(pointerId))return;const x=e[\"pageX\"]-this._runtime.GetCanvasClientX();const y=e[\"pageY\"]-this._runtime.GetCanvasClientY();const nowTime=performance.now();const index=this._touches.size;this._triggerIndex=index;this._triggerId=pointerId;const touchInfo=C3.New(C3.Plugins.Touch.TouchInfo);touchInfo.Init(nowTime,x,y,pointerId,index);this._touches.set(pointerId,touchInfo);this.Trigger(C3.Plugins.Touch.Cnds.OnNthTouchStart);this.Trigger(C3.Plugins.Touch.Cnds.OnTouchStart);\nthis._curTouchX=x;this._curTouchY=y;this.Trigger(C3.Plugins.Touch.Cnds.OnTouchObject)}_OnPointerMove(e){if(e[\"pointerType\"]===\"mouse\"&&!this._isMouseDown)return;const touchInfo=this._touches.get(e[\"pointerId\"]);if(!touchInfo)return;const nowTime=performance.now();if(nowTime-touchInfo.GetTime()<2)return;const x=e[\"pageX\"]-this._runtime.GetCanvasClientX();const y=e[\"pageY\"]-this._runtime.GetCanvasClientY();touchInfo.Update(nowTime,x,y,e[\"width\"],e[\"height\"],e[\"pressure\"])}_OnPointerUp(e,isCancel){if(e[\"pointerType\"]===\n\"mouse\")if(this._isMouseDown)this._isMouseDown=false;else return;const nowTime=performance.now();const pointerId=e[\"pointerId\"];const touchInfo=this._touches.get(pointerId);if(!touchInfo)return;this._triggerIndex=touchInfo.GetStartIndex();this._triggerId=touchInfo.GetId();this.Trigger(C3.Plugins.Touch.Cnds.OnNthTouchEnd);this.Trigger(C3.Plugins.Touch.Cnds.OnTouchEnd);if(!isCancel){const tap=touchInfo.ShouldTriggerTap(nowTime);if(tap===\"single-tap\"){this.Trigger(C3.Plugins.Touch.Cnds.OnTapGesture);\nthis._curTouchX=touchInfo.GetX();this._curTouchY=touchInfo.GetY();this.Trigger(C3.Plugins.Touch.Cnds.OnTapGestureObject)}else if(tap===\"double-tap\"){this.Trigger(C3.Plugins.Touch.Cnds.OnDoubleTapGesture);this._curTouchX=touchInfo.GetX();this._curTouchY=touchInfo.GetY();this.Trigger(C3.Plugins.Touch.Cnds.OnDoubleTapGestureObject)}}touchInfo.Release();this._touches.delete(pointerId)}_RequestPermission(type){this._PostToDOMMaybeSync(\"request-permission\",{\"type\":type});return new Promise((resolve,reject)=>\n{this._permissionPromises.push({type,resolve,reject})})}_OnPermissionResult(e){const isGranted=e[\"result\"];const type=e[\"type\"];this._triggerPermission=type;const toResolve=this._permissionPromises.filter(o=>o.type===type);for(const o of toResolve)o.resolve(isGranted?\"granted\":\"denied\");this._permissionPromises=this._permissionPromises.filter(o=>o.type!==type);if(isGranted){this.Trigger(C3.Plugins.Touch.Cnds.OnPermissionGranted);if(type===0)this._runtime.RequestDeviceOrientationEvent();else this._runtime.RequestDeviceMotionEvent()}else this.Trigger(C3.Plugins.Touch.Cnds.OnPermissionDenied)}_OnDeviceOrientation(e){if(typeof e[\"webkitCompassHeading\"]===\n\"number\")this._orientCompassHeading=e[\"webkitCompassHeading\"];else if(e[\"absolute\"])this._orientCompassHeading=e[\"alpha\"];this._orientAlpha=e[\"alpha\"];this._orientBeta=e[\"beta\"];this._orientGamma=e[\"gamma\"]}_OnDeviceOrientationAbsolute(e){this._orientCompassHeading=e[\"alpha\"]}_OnDeviceMotion(e){const acc=e[\"acceleration\"];if(acc){this._accX=acc[\"x\"];this._accY=acc[\"y\"];this._accZ=acc[\"z\"]}const withG=e[\"accelerationIncludingGravity\"];if(withG){this._accWithGX=withG[\"x\"];this._accWithGY=withG[\"y\"];\nthis._accWithGZ=withG[\"z\"]}}_OnTick2(){const nowTime=performance.now();let index=0;for(const touchInfo of this._touches.values()){if(touchInfo.GetTime()<=nowTime-50)touchInfo._SetLastTime(nowTime);if(touchInfo.ShouldTriggerHold(nowTime)){this._triggerIndex=touchInfo.GetStartIndex();this._triggerId=touchInfo.GetId();this._getTouchIndex=index;this.Trigger(C3.Plugins.Touch.Cnds.OnHoldGesture);this._curTouchX=touchInfo.GetX();this._curTouchY=touchInfo.GetY();this.Trigger(C3.Plugins.Touch.Cnds.OnHoldGestureObject);\nthis._getTouchIndex=0}++index}}_GetTouchByIndex(index){index=Math.floor(index);for(const touchInfo of this._touches.values()){if(index===0)return touchInfo;--index}return null}_IsClientPosOnCanvas(touchX,touchY){return touchX>=0&&touchY>=0&&touchX<this._runtime.GetCanvasCssWidth()&&touchY<this._runtime.GetCanvasCssHeight()}GetDebuggerProperties(){const prefix=\"plugins.touch.debugger\";return[{title:prefix+\".touches\",properties:[...this._touches.values()].map(ti=>({name:\"$\"+ti.GetId(),value:ti.GetX()+\n\", \"+ti.GetY()}))}]}}}\n{const C3=self.C3;const tempArr=[];C3.Plugins.Touch.Cnds={OnTouchStart(){return true},OnTouchEnd(){return true},IsInTouch(){return this._touches.size>0},OnTouchObject(objectClass){if(!objectClass)return false;if(!this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY))return false;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,this._curTouchX,this._curTouchY,false)},IsTouchingObject(objectClass){if(!objectClass)return false;const interactiveLayersCache=new Map;\nconst isLayerInteractive=layer=>{let ret=interactiveLayersCache.get(layer);if(typeof ret===\"undefined\"){ret=layer.IsSelfAndParentsInteractive();interactiveLayersCache.set(layer,ret)}return ret};const sol=objectClass.GetCurrentSol();const instances=sol.GetInstances();for(const inst of instances){const wi=inst.GetWorldInfo();const layer=wi.GetLayer();if(!isLayerInteractive(layer)||!wi.IsInViewport2())continue;for(const touchInfo of this._touches.values()){if(!this._IsClientPosOnCanvas(touchInfo.GetX(),\ntouchInfo.GetY()))continue;const [px,py]=layer.CanvasCssToLayer(touchInfo.GetX(),touchInfo.GetY(),wi.GetTotalZElevation());if(wi.ContainsPoint(px,py)){tempArr.push(inst);break}}}interactiveLayersCache.clear();if(tempArr.length){sol.SetArrayPicked(tempArr);objectClass.ApplySolToContainer();C3.clearArray(tempArr);return true}else return false},CompareTouchSpeed(index,cmp,s){const touchInfo=this._GetTouchByIndex(index);if(!touchInfo)return false;return C3.compare(touchInfo.GetSpeed(),cmp,s)},OrientationSupported(){return true},\nMotionSupported(){return true},CompareOrientation(orientation,cmp,a){this._runtime.RequestDeviceOrientationEvent();let v=0;if(orientation===0)v=this._orientAlpha;else if(orientation===1)v=this._orientBeta;else v=this._orientGamma;return C3.compare(v,cmp,a)},CompareAcceleration(a,cmp,x){this._runtime.RequestDeviceMotionEvent();let v=0;if(a===0)v=this._accWithGX;else if(a===1)v=this._accWithGY;else if(a===2)v=this._accWithGZ;else if(a===3)v=this._accX;else if(a===4)v=this._accY;else v=this._accZ;return C3.compare(v,\ncmp,x)},OnNthTouchStart(index){index=Math.floor(index);return index===this._triggerIndex},OnNthTouchEnd(index){index=Math.floor(index);return index===this._triggerIndex},HasNthTouch(index){index=Math.floor(index);return this._touches.size>=index+1},OnHoldGesture(){return true},OnTapGesture(){return true},OnDoubleTapGesture(){return true},OnHoldGestureObject(objectClass){if(!objectClass)return false;if(!this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY))return false;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,\nthis._curTouchX,this._curTouchY,false)},OnTapGestureObject(objectClass){if(!objectClass)return false;if(!this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY))return false;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,this._curTouchX,this._curTouchY,false)},OnDoubleTapGestureObject(objectClass){if(!objectClass)return false;if(!this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY))return false;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,\nthis._curTouchX,this._curTouchY,false)},OnPermissionGranted(type){return this._triggerPermission===type},OnPermissionDenied(type){return this._triggerPermission===type}}}{const C3=self.C3;C3.Plugins.Touch.Acts={RequestPermission(type){this._RequestPermission(type)}}}\n{const C3=self.C3;C3.Plugins.Touch.Exps={TouchCount(){return this._touches.size},X(layerParam){const touchInfo=this._GetTouchByIndex(this._getTouchIndex);if(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,true)},Y(layerParam){const touchInfo=this._GetTouchByIndex(this._getTouchIndex);if(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,false)},XAt(index,layerParam){const touchInfo=this._GetTouchByIndex(index);\nif(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,true)},YAt(index,layerParam){const touchInfo=this._GetTouchByIndex(index);if(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,false)},XForID(id,layerParam){const touchInfo=this._touches.get(id);if(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,true)},YForID(id,layerParam){const touchInfo=this._touches.get(id);\nif(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,false)},AbsoluteX(){const touchInfo=this._GetTouchByIndex(0);if(touchInfo)return touchInfo.GetX();else return 0},AbsoluteY(){const touchInfo=this._GetTouchByIndex(0);if(touchInfo)return touchInfo.GetY();else return 0},AbsoluteXAt(index){const touchInfo=this._GetTouchByIndex(index);if(touchInfo)return touchInfo.GetX();else return 0},AbsoluteYAt(index){const touchInfo=this._GetTouchByIndex(index);\nif(touchInfo)return touchInfo.GetY();else return 0},AbsoluteXForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetX();else return 0},AbsoluteYForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetY();else return 0},SpeedAt(index){const touchInfo=this._GetTouchByIndex(index);if(touchInfo)return touchInfo.GetSpeed();else return 0},SpeedForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetSpeed();else return 0},AngleAt(index){const touchInfo=\nthis._GetTouchByIndex(index);if(touchInfo)return C3.toDegrees(touchInfo.GetAngle());else return 0},AngleForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return C3.toDegrees(touchInfo.GetAngle());else return 0},CompassHeading(){this._runtime.RequestDeviceOrientationEvent();return this._orientCompassHeading},Alpha(){this._runtime.RequestDeviceOrientationEvent();return this._orientAlpha},Beta(){this._runtime.RequestDeviceOrientationEvent();return this._orientBeta},Gamma(){this._runtime.RequestDeviceOrientationEvent();\nreturn this._orientGamma},AccelerationXWithG(){this._runtime.RequestDeviceMotionEvent();return this._accWithGX},AccelerationYWithG(){this._runtime.RequestDeviceMotionEvent();return this._accWithGY},AccelerationZWithG(){this._runtime.RequestDeviceMotionEvent();return this._accWithGZ},AccelerationX(){this._runtime.RequestDeviceMotionEvent();return this._accX},AccelerationY(){this._runtime.RequestDeviceMotionEvent();return this._accY},AccelerationZ(){this._runtime.RequestDeviceMotionEvent();return this._accZ},\nTouchIndex(){return this._triggerIndex},TouchID(){return this._triggerId},WidthForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetWidth();else return 0},HeightForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetHeight();else return 0},PressureForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetPressure();else return 0}}};\n\n}\n\n{\n'use strict';const C3=self.C3;const GESTURE_HOLD_THRESHOLD=15;const GESTURE_HOLD_TIMEOUT=500;const GESTURE_TAP_TIMEOUT=333;const GESTURE_DOUBLETAP_THRESHOLD=25;let lastTapX=-1E3;let lastTapY=-1E3;let lastTapTime=-1E4;\nC3.Plugins.Touch.TouchInfo=class TouchInfo extends C3.DefendedBase{constructor(){super();this._pointerId=0;this._startIndex=0;this._startTime=0;this._time=0;this._lastTime=0;this._startX=0;this._startY=0;this._x=0;this._y=0;this._lastX=0;this._lastY=0;this._width=0;this._height=0;this._pressure=0;this._hasTriggeredHold=false;this._isTooFarForHold=false}Release(){}Init(nowTime,x,y,id,index){this._pointerId=id;this._startIndex=index;this._time=nowTime;this._lastTime=nowTime;this._startTime=nowTime;\nthis._startX=x;this._startY=y;this._x=x;this._y=y;this._lastX=x;this._lastY=y}Update(nowTime,x,y,width,height,pressure){this._lastTime=this._time;this._time=nowTime;this._lastX=this._x;this._lastY=this._y;this._x=x;this._y=y;this._width=width;this._height=height;this._pressure=pressure;if(!this._isTooFarForHold&&C3.distanceTo(this._startX,this._startY,this._x,this._y)>=GESTURE_HOLD_THRESHOLD)this._isTooFarForHold=true}GetId(){return this._pointerId}GetStartIndex(){return this._startIndex}GetTime(){return this._time}_SetLastTime(t){this._lastTime=\nt}GetX(){return this._x}GetY(){return this._y}GetSpeed(){const dist=C3.distanceTo(this._x,this._y,this._lastX,this._lastY);const dt=(this._time-this._lastTime)/1E3;if(dt>0)return dist/dt;else return 0}GetAngle(){return C3.angleTo(this._lastX,this._lastY,this._x,this._y)}GetWidth(){return this._width}GetHeight(){return this._height}GetPressure(){return this._pressure}ShouldTriggerHold(nowTime){if(this._hasTriggeredHold)return false;if(nowTime-this._startTime>=GESTURE_HOLD_TIMEOUT&&!this._isTooFarForHold&&\nC3.distanceTo(this._startX,this._startY,this._x,this._y)<GESTURE_HOLD_THRESHOLD){this._hasTriggeredHold=true;return true}return false}ShouldTriggerTap(nowTime){if(this._hasTriggeredHold)return\"\";if(nowTime-this._startTime<=GESTURE_TAP_TIMEOUT&&!this._isTooFarForHold&&C3.distanceTo(this._startX,this._startY,this._x,this._y)<GESTURE_HOLD_THRESHOLD)if(nowTime-lastTapTime<=GESTURE_TAP_TIMEOUT*2&&C3.distanceTo(lastTapX,lastTapY,this._x,this._y)<GESTURE_DOUBLETAP_THRESHOLD){lastTapX=-1E3;lastTapY=-1E3;\nlastTapTime=-1E4;return\"double-tap\"}else{lastTapX=this._x;lastTapY=this._y;lastTapTime=nowTime;return\"single-tap\"}return\"\"}GetPositionForLayer(layout,layerNameOrNumber,getx){if(typeof layerNameOrNumber===\"undefined\"){const layer=layout.GetLayerByIndex(0);return layer.CanvasCssToLayer_DefaultTransform(this._x,this._y)[getx?0:1]}else{const layer=layout.GetLayer(layerNameOrNumber);if(layer)return layer.CanvasCssToLayer(this._x,this._y)[getx?0:1];else return 0}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Plugins.Mouse=class MousePlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}}\n{const C3=self.C3;const C3X=self.C3X;C3.Plugins.Mouse.Type=class MouseType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.IMouseObjectType}};let mouseObjectType=null;function GetMouseSdkInstance(){return mouseObjectType.GetSingleGlobalInstance().GetSdkInstance()}self.IMouseObjectType=class IMouseObjectType extends self.IObjectClass{constructor(objectType){super(objectType);mouseObjectType=objectType;objectType.GetRuntime()._GetCommonScriptInterfaces().mouse=\nthis}getMouseX(layerNameOrNumber){return GetMouseSdkInstance().GetMousePositionForLayer(layerNameOrNumber)[0]}getMouseY(layerNameOrNumber){return GetMouseSdkInstance().GetMousePositionForLayer(layerNameOrNumber)[1]}getMousePosition(layerNameOrNumber){return GetMouseSdkInstance().GetMousePositionForLayer(layerNameOrNumber)}isMouseButtonDown(button){return GetMouseSdkInstance().IsMouseButtonDown(button)}setCursorStyle(cursorStyle){C3X.RequireString(cursorStyle);GetMouseSdkInstance().SetCursorStyle(cursorStyle)}setCursorObjectClass(iObjectClass){const sdkInst=\nGetMouseSdkInstance();const runtime=sdkInst.GetRuntime();const objectClass=runtime._UnwrapIObjectClass(iObjectClass);sdkInst.SetCursorObjectClass(objectClass)}}}\n{const C3=self.C3;const DOM_COMPONENT_ID=\"mouse\";let lastSetCursor=null;C3.Plugins.Mouse.Instance=class MouseInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._buttonMap=[false,false,false];this._mouseXcanvas=0;this._mouseYcanvas=0;this._triggerButton=0;this._triggerType=0;this._triggerDir=0;this._wheelDeltaX=0;this._wheelDeltaY=0;this._wheelDeltaZ=0;this._hasPointerLock=false;this._movementX=0;this._movementY=0;this.AddDOMMessageHandlers([[\"pointer-lock-change\",\ne=>this._OnPointerLockChange(e)],[\"pointer-lock-error\",e=>this._OnPointerLockError(e)]]);const rt=this.GetRuntime().Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,\"pointermove\",e=>this._OnPointerMove(e.data)),C3.Disposable.From(rt,\"pointerdown\",e=>this._OnPointerDown(e.data)),C3.Disposable.From(rt,\"pointerup\",e=>this._OnPointerUp(e.data)),C3.Disposable.From(rt,\"dblclick\",e=>this._OnDoubleClick(e.data)),C3.Disposable.From(rt,\"wheel\",e=>this._OnMouseWheel(e.data)),C3.Disposable.From(rt,\n\"window-blur\",()=>this._OnWindowBlur()))}Release(){super.Release()}_OnPointerDown(e){if(e[\"pointerType\"]!==\"mouse\")return;this._mouseXcanvas=e[\"pageX\"]-this._runtime.GetCanvasClientX();this._mouseYcanvas=e[\"pageY\"]-this._runtime.GetCanvasClientY();this._CheckButtonChanges(e[\"lastButtons\"],e[\"buttons\"])}_OnPointerMove(e){this._movementX=e[\"movementX\"];this._movementY=e[\"movementY\"];this.Trigger(C3.Plugins.Mouse.Cnds.OnMovement);this._movementX=0;this._movementY=0;if(e[\"pointerType\"]!==\"mouse\")return;\nthis._mouseXcanvas=e[\"pageX\"]-this._runtime.GetCanvasClientX();this._mouseYcanvas=e[\"pageY\"]-this._runtime.GetCanvasClientY();this._CheckButtonChanges(e[\"lastButtons\"],e[\"buttons\"])}_OnPointerUp(e){if(e[\"pointerType\"]!==\"mouse\")return;this._CheckButtonChanges(e[\"lastButtons\"],e[\"buttons\"])}_CheckButtonChanges(lastButtons,buttons){this._CheckButtonChange(lastButtons,buttons,1,0);this._CheckButtonChange(lastButtons,buttons,4,1);this._CheckButtonChange(lastButtons,buttons,2,2)}_CheckButtonChange(lastButtons,\nbuttons,checkButtonFlag,resultButton){if(!(lastButtons&checkButtonFlag)&&buttons&checkButtonFlag)this._OnMouseDown(resultButton);else if(lastButtons&checkButtonFlag&&!(buttons&checkButtonFlag))this._OnMouseUp(resultButton)}_OnMouseDown(button){this._buttonMap[button]=true;this.Trigger(C3.Plugins.Mouse.Cnds.OnAnyClick);this._triggerButton=button;this._triggerType=0;this.Trigger(C3.Plugins.Mouse.Cnds.OnClick);this.Trigger(C3.Plugins.Mouse.Cnds.OnObjectClicked)}_OnMouseUp(button){if(!this._buttonMap[button])return;\nthis._buttonMap[button]=false;this._triggerButton=button;this.Trigger(C3.Plugins.Mouse.Cnds.OnRelease)}_OnDoubleClick(e){this._triggerButton=e[\"button\"];this._triggerType=1;this.Trigger(C3.Plugins.Mouse.Cnds.OnClick);this.Trigger(C3.Plugins.Mouse.Cnds.OnObjectClicked)}_OnMouseWheel(e){this._triggerDir=e[\"deltaY\"]<0?1:0;this._wheelDeltaX=e[\"deltaX\"];this._wheelDeltaY=e[\"deltaY\"];this._wheelDeltaZ=e[\"deltaZ\"];this.Trigger(C3.Plugins.Mouse.Cnds.OnWheel)}_OnWindowBlur(){for(let i=0,len=this._buttonMap.length;i<\nlen;++i){if(!this._buttonMap[i])return;this._buttonMap[i]=false;this._triggerButton=i;this.Trigger(C3.Plugins.Mouse.Cnds.OnRelease)}}GetMousePositionForLayer(layerNameOrNumber){const layout=this._runtime.GetMainRunningLayout();const x=this._mouseXcanvas;const y=this._mouseYcanvas;if(typeof layerNameOrNumber===\"undefined\"){const layer=layout.GetLayerByIndex(0);return layer.CanvasCssToLayer_DefaultTransform(x,y)}else{const layer=layout.GetLayer(layerNameOrNumber);if(layer)return layer.CanvasCssToLayer(x,\ny);else return[0,0]}}IsMouseButtonDown(button){button=Math.floor(button);return!!this._buttonMap[button]}_IsMouseOverCanvas(){return this._mouseXcanvas>=0&&this._mouseYcanvas>=0&&this._mouseXcanvas<this._runtime.GetCanvasCssWidth()&&this._mouseYcanvas<this._runtime.GetCanvasCssHeight()}SetCursorStyle(cursorStyle){if(lastSetCursor===cursorStyle)return;lastSetCursor=cursorStyle;this.PostToDOM(\"cursor\",cursorStyle)}async SetCursorObjectClass(objectClass){if(C3.Platform.IsMobile||!objectClass)return;\nconst inst=objectClass.GetFirstPicked();if(!inst)return;const wi=inst.GetWorldInfo();const imageInfo=inst.GetCurrentImageInfo();if(!wi||!imageInfo)return;if(lastSetCursor===imageInfo)return;lastSetCursor=imageInfo;const blobUrl=await imageInfo.ExtractImageToBlobURL();const cursorStyle=`url(${blobUrl}) ${Math.round(wi.GetOriginX()*imageInfo.GetWidth())} ${Math.round(wi.GetOriginY()*imageInfo.GetHeight())}, auto`;this.PostToDOM(\"cursor\",cursorStyle)}_OnPointerLockChange(e){this._UpdatePointerLockState(e[\"has-pointer-lock\"])}_OnPointerLockError(e){this._UpdatePointerLockState(e[\"has-pointer-lock\"]);\nthis.Trigger(C3.Plugins.Mouse.Cnds.OnPointerLockError)}_UpdatePointerLockState(hasPointerLock){if(this._hasPointerLock===hasPointerLock)return;this._hasPointerLock=hasPointerLock;if(this._hasPointerLock)this.Trigger(C3.Plugins.Mouse.Cnds.OnPointerLocked);else this.Trigger(C3.Plugins.Mouse.Cnds.OnPointerUnlocked)}GetDebuggerProperties(){const prefix=\"plugins.mouse\";return[{title:prefix+\".name\",properties:[{name:prefix+\".debugger.absolute-position\",value:this._mouseXcanvas+\",\"+this._mouseYcanvas},{name:prefix+\n\".debugger.left-button\",value:this._buttonMap[0]},{name:prefix+\".debugger.middle-button\",value:this._buttonMap[1]},{name:prefix+\".debugger.right-button\",value:this._buttonMap[2]}]},{title:prefix+\".debugger.position-on-each-layer\",properties:this._runtime.GetMainRunningLayout().GetLayers().map(layer=>({name:\"$\"+layer.GetName(),value:layer.CanvasCssToLayer(this._mouseXcanvas,this._mouseYcanvas).join(\", \")}))}]}}}\n{const C3=self.C3;C3.Plugins.Mouse.Cnds={OnClick(button,type){return this._triggerButton===button&&this._triggerType===type},OnAnyClick(){return true},IsButtonDown(button){return this._buttonMap[button]},OnRelease(button){return this._triggerButton===button},IsOverObject(objectClass){if(!this._IsMouseOverCanvas())return false;const cnd=this._runtime.GetCurrentCondition();const isInverted=cnd.IsInverted();const mx=this._mouseXcanvas;const my=this._mouseYcanvas;return C3.xor(this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,\nmx,my,isInverted),isInverted)},OnObjectClicked(button,type,objectClass){if(button!==this._triggerButton||type!==this._triggerType)return false;if(!this._IsMouseOverCanvas())return false;const mx=this._mouseXcanvas;const my=this._mouseYcanvas;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,mx,my,false)},OnWheel(dir){return dir===2||this._triggerDir===dir},OnPointerLocked(){return true},OnPointerUnlocked(){return true},OnPointerLockError(){return true},HasPointerLock(){return this._hasPointerLock},\nOnMovement(){return true}}}{const C3=self.C3;const CURSOR_STYLES=[\"auto\",\"pointer\",\"text\",\"crosshair\",\"move\",\"help\",\"wait\",\"none\"];C3.Plugins.Mouse.Acts={SetCursor(c){this.SetCursorStyle(CURSOR_STYLES[c])},SetCursorSprite(objectClass){this.SetCursorObjectClass(objectClass)},RequestPointerLock(){this._PostToDOMMaybeSync(\"request-pointer-lock\")},ReleasePointerLock(){this.PostToDOM(\"release-pointer-lock\")}}}\n{const C3=self.C3;C3.Plugins.Mouse.Exps={X(layerParam){return this.GetMousePositionForLayer(layerParam)[0]},Y(layerParam){return this.GetMousePositionForLayer(layerParam)[1]},AbsoluteX(){return this._mouseXcanvas},AbsoluteY(){return this._mouseYcanvas},MovementX(){return this._movementX},MovementY(){return this._movementY},WheelDeltaX(){return this._wheelDeltaX},WheelDeltaY(){return this._wheelDeltaY},WheelDeltaZ(){return this._wheelDeltaZ}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Behaviors.Tween=class TweenBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Behaviors.Tween.Type=class TweenType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const NAMESPACE=C3.Behaviors.Tween;const ENABLED=0;NAMESPACE.Instance=class TweenInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._allowMultiple=false;this._enabled=true;if(properties){this._allowMultiple=false;this._enabled=!!properties[ENABLED]}this._activeTweens=new Map;this._disabledTweens=[];this._waitingForReleaseTweens=new Map;this._finishingTween=null;this._activeTweensJson=null;this._disabledTweensJson=null;this._waitingForReleaseTweensJson=\nnull;this._finishingTweenName=\"\";this._afterLoad=e=>this._OnAfterLoad(e);this.GetRuntime().Dispatcher().addEventListener(\"afterload\",this._afterLoad)}Release(){this.GetRuntime().Dispatcher().removeEventListener(\"afterload\",this._afterLoad);this._afterLoad=null;if(this._finishingTween){this.ReleaseAndCompleteTween(this._finishingTween);this._finishingTween=null}this.ReleaseAndCompleteTweens();this._tweens=null;this.ClearDisabledList();this._disabledTweens=null;this._ReleaseWaitingTweens();this._waitingForReleaseTweens=\nnull;super.Release()}SetEnabled(e){this._enabled=!!e;if(e){if(this._waitingForReleaseTweens&&this._waitingForReleaseTweens.size)this._StartTicking2()}else this._StopTicking2();for(const tween of this.AllTweens())if(e){if(this.IsInDisabledList(tween))tween.Resume()}else{if(tween.IsPlaying()||tween.IsScheduled())this.AddToDisabledList(tween);tween.Stop()}if(e)this.ClearDisabledList()}IsEnabled(){return this._enabled}AddToDisabledList(tween){this._disabledTweens.push(tween)}IsInDisabledList(tween){return this._disabledTweens.includes(tween)}ClearDisabledList(){C3.clearArray(this._disabledTweens)}GetFinishingTween(){return this._finishingTween}IsInstanceValid(){const inst=\nthis.GetObjectInstance();if(!inst)return false;return!inst.IsDestroyed()}GetTween(tags,property,includeWaitingForRelease=false){const tweens=property?this.PropertyTweens(property,includeWaitingForRelease):this.AllTweens(includeWaitingForRelease);if(!tweens||!tweens.length)return;for(const tween of tweens)if(tween.HasTags(tags))return tween}GetTweenIncludingWaitingForRelease(tags,property){return this.GetTween(tags,property,true)}*GetTweens(tags,property,includeWaitingForRelease=false){const tweens=\nproperty?this.PropertyTweens(property,includeWaitingForRelease):this.AllTweens(includeWaitingForRelease);if(tweens&&tweens.length)for(const tween of tweens)if(tween.HasTags(tags))yield tween}*GetTweensIncludingWaitingForRelease(tags,property){yield*this.GetTweens(tags,property,true)}PropertyTweens(property,includeWaitingForRelease){if(includeWaitingForRelease){let active=this._activeTweens.get(property);let waitingForRelease=this._waitingForReleaseTweens.get(property);if(!active)active=[];if(!waitingForRelease)waitingForRelease=\n[];return active.concat(waitingForRelease).filter(t=>t).filter(t=>!t.IsReleased())}else{let active=this._activeTweens.get(property);if(!active)active=[];return active.filter(t=>t).filter(t=>!t.IsReleased())}}AllTweens(includeWaitingForRelease){if(includeWaitingForRelease){const active=[...this._activeTweens.values()].flat();const waitingForRelease=[...this._waitingForReleaseTweens.values()].flat();return active.concat(waitingForRelease).filter(t=>t).filter(t=>!t.IsReleased())}else{const active=[...this._activeTweens.values()].flat();\nreturn active.filter(t=>t).filter(t=>!t.IsReleased())}}AllTweensIncludingWaitingForRelease(){return this.AllTweens(true)}SaveToJson(){return{\"s\":false,\"e\":!!this._enabled,\"at\":this._SaveActiveTweensToJson(),\"dt\":this._SaveDisabledTweensToJson(),\"wt\":this._SaveWaitingForReleaseTweensToJson(),\"ft\":this._SaveFinishingTweenToJson()}}LoadFromJson(o){if(!o)return;this._activeTweensJson=o[\"at\"];this._disabledTweensJson=o[\"dt\"];this._waitingForReleaseTweensJson=o[\"wt\"];this._finishingTweenName=o[\"ft\"];this._allowMultiple=\nfalse;this._enabled=!!o[\"e\"]}_OnAfterLoad(e){const timelineManager=this.GetRuntime().GetTimelineManager();this._PopulateTweenMap(this._activeTweensJson,this._activeTweens,timelineManager);if(this._disabledTweensJson){C3.clearArray(this._disabledTweens);for(const tweenName of this._disabledTweensJson)this._PopulateTweenArray(this._disabledTweens,tweenName,timelineManager)}this._PopulateTweenMap(this._waitingForReleaseTweensJson,this._waitingForReleaseTweens,timelineManager);this._finishingTween=this._GetTween(this._finishingTweenName,\ntimelineManager);if(this._enabled){if(this._waitingForReleaseTweens&&this._waitingForReleaseTweens.size)this._StartTicking2()}else this._StopTicking2()}_PopulateTweenMap(restoreJson,map,timelineManager){if(!restoreJson)return;for(const property in restoreJson){let tweens=map.get(property);tweens?C3.clearArray(tweens):tweens=[];const tweensJson=restoreJson[property];for(const tweenJson of tweensJson){const success=this._PopulateTweenArray(tweens,tweenJson[\"name\"],timelineManager);if(!success){const tween=\nC3.TweenState.Build({runtime:this.GetRuntime(),json:tweenJson});tween.AddCompletedCallback(tween=>this._FinishTriggers(tween));timelineManager.AddScheduledTimeline(tween);this._PopulateTweenArray(tweens,tween,timelineManager)}else this._LoadTweenFromJson(tweenJson[\"name\"],tweenJson,timelineManager)}map.set(property,tweens)}}_GetTween(name,timelineManager){return timelineManager.GetScheduledOrPlayingTimelineByName(name)}_PopulateTweenArray(collection,tweenOrName,timelineManager){if(typeof tweenOrName===\n\"string\"){const tween=this._GetTween(tweenOrName,timelineManager);if(tween)return!!collection.push(tween)}else return!!collection.push(tweenOrName);return false}_LoadTweenFromJson(tweenOrName,tweenJson,timelineManager){if(typeof tweenOrName===\"string\"){const tween=this._GetTween(tweenOrName,timelineManager);if(tween)tween._LoadFromJson(tweenJson)}else tweenOrName._LoadFromJson(tweenJson)}_SaveActiveTweensToJson(){const ret={};for(const [property,tweens]of this._activeTweens)ret[property]=tweens.filter(t=>\n!t.IsReleased()).map(t=>t._SaveToJson());return ret}_SaveDisabledTweensToJson(){return this._disabledTweens.filter(t=>!t.IsReleased()).map(t=>t.GetName())}_SaveWaitingForReleaseTweensToJson(){const ret={};for(const [property,tweens]of this._waitingForReleaseTweens)ret[property]=tweens.map(tween=>tween._SaveToJson());return ret}_SaveFinishingTweenToJson(){return this._finishingTween?this._finishingTween.GetName():\"\"}Tick2(){this._ReleaseWaitingTweens()}CreateTween(args){const propertyTracksConfig=\nNAMESPACE.Config.GetPropertyTracksConfig(args.property,args.startValue,args.endValue,args.ease,args.resultMode,this.GetObjectInstance());const tweenId=NAMESPACE.Maps.GetPropertyFromIndex(args.property);if(!NAMESPACE.Maps.IsValueId(tweenId))this.ReleaseTweens(args.property);const tween=C3.TweenState.Build({runtime:this.GetRuntime(),id:tweenId,tags:args.tags,time:args.time,instance:this.GetObjectInstance(),releaseOnComplete:!!args.releaseOnComplete,loop:!!args.loop,pingPong:!!args.pingPong,repeatCount:args.repeatCount,\ninitialValueMode:args.initialValueMode,propertyTracksConfig:propertyTracksConfig});tween.AddCompletedCallback(tween=>this._FinishTriggers(tween));this._AddTween(tween,args.property);return tween}_MaybeRemoveFromActiveTweenMap(tween){const id=tween.GetId();if(this._activeTweens.has(id)){const tweenArray=this._activeTweens.get(id);if(tweenArray){const index=tweenArray.indexOf(tween);if(index!==-1)tweenArray.splice(index,1)}}}ReleaseTween(tween,complete=false){this._MaybeRemoveFromActiveTweenMap(tween);\nif(tween.IsReleased())return;if(this._IsInWaitingList(tween))return;tween.Stop(complete);this._AddToWaitingList(tween)}ReleaseTweens(indexProperty,complete=false){if(C3.IsFiniteNumber(indexProperty)){const stringProperty=NAMESPACE.Maps.GetPropertyFromIndex(indexProperty);if(!this._activeTweens.has(stringProperty))return;const tweenArray=this._activeTweens.get(stringProperty);const finishingTween=this.GetFinishingTween();for(const tween of tweenArray){if(tween===finishingTween)continue;if(tween.IsReleased())continue;\nif(this._IsInWaitingList(tween))continue;tween.Stop(complete);tween.Release()}C3.clearArray(tweenArray)}else{const finishingTween=this.GetFinishingTween();for(const tween of this.AllTweens()){if(tween===finishingTween)continue;if(tween.IsReleased())continue;if(this._IsInWaitingList(tween))continue;tween.Stop(complete);tween.Release()}for(const property of this._activeTweens.keys()){C3.clearArray(this._activeTweens.get(property));this._activeTweens.delete(property)}this._activeTweens.clear()}}ReleaseAndCompleteTween(tween){this.ReleaseTween(tween,\ntrue)}ReleaseAndCompleteTweens(){this.ReleaseTweens(NaN,true)}GetPropertyValueByIndex(index){switch(index){case ENABLED:return this._enabled}}SetPropertyValueByIndex(index,value){switch(index){case ENABLED:this._enabled=!!value;break}}_GetBehaviorType(tween){const instance=tween.GetInstance();const behaviorInstances=instance.GetBehaviorInstances();for(const behaviorInstance of behaviorInstances){const behaviorType=behaviorInstance.GetBehaviorType();if(behaviorType.GetInstanceSdkCtor()===this.constructor)return behaviorType}}Trigger(method,\nruntime,inst,behaviorType){if(this._runtime)return super.Trigger(method);else return runtime.Trigger(method,inst,behaviorType)}_FinishTriggers(tween){this._finishingTween=tween;NAMESPACE.Cnds.SetFinishingTween(tween);let instance;let runtime;if(!this.GetRuntime()){instance=tween.GetInstance();if(!instance)return;if(instance&&instance.IsDestroyed())return;runtime=instance.GetRuntime();const behaviorType=this._GetBehaviorType(tween);this.Trigger(NAMESPACE.Cnds.OnTweensFinished,runtime,instance,behaviorType);\nthis.Trigger(NAMESPACE.Cnds.OnAnyTweensFinished,runtime,instance,behaviorType);tween.Stop()}else{instance=this._inst;runtime=this._runtime;this.Trigger(NAMESPACE.Cnds.OnTweensFinished);this.Trigger(NAMESPACE.Cnds.OnAnyTweensFinished);this.ReleaseTween(tween)}this._finishingTween=null;NAMESPACE.Cnds.SetFinishingTween(null);if(tween.GetDestroyInstanceOnComplete())runtime.DestroyInstance(instance)}_AddTween(tween,indexProperty){const stringProperty=NAMESPACE.Maps.GetPropertyFromIndex(indexProperty);\nif(!this._activeTweens.has(stringProperty))this._activeTweens.set(stringProperty,[]);const tweenArray=this._activeTweens.get(stringProperty);tweenArray.push(tween)}_AddToWaitingList(tween){const id=tween.GetId();if(!this._waitingForReleaseTweens.has(id))this._waitingForReleaseTweens.set(id,[]);this._waitingForReleaseTweens.get(id).push(tween);if(!this.IsTicking2())this._StartTicking2()}_IsInWaitingList(tween){const id=tween.GetId();if(!this._waitingForReleaseTweens.has(id))return false;return this._waitingForReleaseTweens.get(id).includes(tween)}_ReleaseWaitingTweens(){if(!this._waitingForReleaseTweens.size)return;\nfor(const tweenArray of this._waitingForReleaseTweens.values()){for(const tween of tweenArray){if(tween.IsReleased())continue;tween.Release()}C3.clearArray(tweenArray)}this._waitingForReleaseTweens.clear();if(this.IsTicking2())this._StopTicking2()}GetDebuggerProperties(){const prefix=\"behaviors.tween\";return[{title:\"$\"+this.GetBehaviorType().GetName(),properties:[{name:prefix+\".properties.enabled.name\",value:this.IsEnabled(),onedit:v=>this.SetEnabled(v)}]}]}GetScriptInterfaceClass(){return self.ITweenBehaviorInstance}}}\n{const C3=self.C3;let finishingTween=null;C3.Behaviors.Tween.Cnds={SetFinishingTween(tween){finishingTween=tween},OnTweensFinished(tags){return finishingTween.HasTags(tags)},OnAnyTweensFinished(){return true},IsPlaying(tags){const tweens=[...this.GetTweensIncludingWaitingForRelease(tags)];if(!tweens)return false;if(!tweens.length)return false;return tweens.some(C3.TweenState.IsPlaying)},IsAnyPlaying(){const tweens=[...this.AllTweensIncludingWaitingForRelease()];if(!tweens)return false;if(!tweens.length)return false;\nreturn tweens.some(C3.TweenState.IsPlaying)},IsPaused(tags){const tweens=[...this.GetTweensIncludingWaitingForRelease(tags)];if(!tweens)return false;if(!tweens.length)return false;return tweens.some(C3.TweenState.IsPaused)},IsAnyPaused(){const tweens=[...this.AllTweensIncludingWaitingForRelease()];if(!tweens)return false;if(!tweens.length)return false;return tweens.some(C3.TweenState.IsPaused)}}}\n{const C3=self.C3;const Ease=self.Ease;const NAMESPACE=C3.Behaviors.Tween;NAMESPACE.Acts={SetEnabled(enable){this.SetEnabled(!!enable)},async TweenOneProperty(...args){if(!this.IsEnabled()||!this.IsInstanceValid())return;const tween=this.CreateTween(NAMESPACE.TweenArguments.OneProperty(this,...args));if(tween.Play())await tween.GetPlayPromise()},async TweenTwoProperties(...args){if(!this.IsEnabled()||!this.IsInstanceValid())return;const tween=this.CreateTween(NAMESPACE.TweenArguments.TwoProperties(this,\n...args));if(tween.Play())await tween.GetPlayPromise()},async TweenValue(...args){if(!this.IsEnabled()||!this.IsInstanceValid())return;const tween=this.CreateTween(NAMESPACE.TweenArguments.ValueProperty(this,...args));if(tween.Play())await tween.GetPlayPromise()},PauseTweens(tags){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.GetTweens(tags))tween.Stop()},PauseAllTweens(){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.AllTweens())tween.Stop()},\nResumeTweens(tags){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.GetTweens(tags))tween.Resume()},ResumeAllTweens(){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.AllTweens())tween.Resume()},StopTweens(tags){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.GetTweens(tags))this.ReleaseTween(tween)},StopAllTweens(){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.AllTweens())this.ReleaseTween(tween)},\nSetOnePropertyTweensEndValue(tags,property,endValue){if(!this.IsEnabled()||!this.IsInstanceValid())return;const propertyName=C3.Behaviors.Tween.Maps.GetSinglePropertyFromIndex(property);for(const tween of this.GetTweens(tags)){tween.BeforeSetEndValues([propertyName]);tween.SetEndValue(endValue,propertyName)}},SetTwoPropertiesTweensEndValue(tags,property,endValueX,endValueY){if(!this.IsEnabled()||!this.IsInstanceValid())return;const properties=C3.Behaviors.Tween.Maps.GetRealProperties(property);for(const tween of this.GetTweens(tags)){tween.BeforeSetEndValues(properties);\ntween.SetEndValue(endValueX,properties[0]);tween.SetEndValue(endValueY,properties[1])}},SetValuePropertyTweensStartValue(tags,startValue){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.GetTweens(tags,\"value\"))tween.SetStartValue(startValue,\"value\")},SetValuePropertyTweensEndValue(tags,endValue){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.GetTweens(tags,\"value\")){tween.BeforeSetEndValues([\"value\"]);tween.SetEndValue(endValue,\"value\")}},\nSetTweensEase(tags,easeIndex){if(!this.IsEnabled()||!this.IsInstanceValid())return;const ease=Ease.GetEaseFromIndex(easeIndex);for(const tween of this.GetTweens(tags))tween.SetEase(ease)},SetAllTweensEase(easeIndex){if(!this.IsEnabled()||!this.IsInstanceValid())return;const ease=Ease.GetEaseFromIndex(easeIndex);for(const tween of this.AllTweens())tween.SetEase(ease)},SetTweensTime(tags,time){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.GetTweens(tags))tween.SetTime(time)},\nSetAllTweensTime(time){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.AllTweens())tween.SetTime(time)},SetTweensPlaybackRate(tags,rate){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.GetTweens(tags))tween.SetPlaybackRate(rate)},SetAllTweensPlaybackRate(rate){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.AllTweens())tween.SetPlaybackRate(rate)},SetTweensDestroyOnComplete(tags,destroyOnComplete){if(!this.IsEnabled()||\n!this.IsInstanceValid())return;for(const tween of this.GetTweens(tags))tween.SetDestroyInstanceOnComplete(!!destroyOnComplete)},SetAllTweensDestroyOnComplete(destroyOnComplete){if(!this.IsEnabled()||!this.IsInstanceValid())return;for(const tween of this.AllTweens())tween.SetDestroyInstanceOnComplete(!!destroyOnComplete)}}}\n{const C3=self.C3;C3.Behaviors.Tween.Exps={Time(tags){const tween=this.GetTweenIncludingWaitingForRelease(tags);if(!tween)return 0;return tween.GetTime()},Progress(tags){const tween=this.GetTweenIncludingWaitingForRelease(tags);if(!tween)return 0;return tween.GetTime()/tween.GetTotalTime()},Value(tags){const tween=this.GetTweenIncludingWaitingForRelease(tags,\"value\");if(!tween)return 0;return tween.GetPropertyTrack(\"value\").GetSourceAdapterValue()},Tags(){if(!this.GetFinishingTween())return\"\";return this.GetFinishingTween().GetStringTags()}}};\n\n}\n\n{\n'use strict';const C3=self.C3;const Ease=self.Ease;const PAIR_PROPERTIES=[\"position\",\"size\",\"scale\"];const SINGLE_PROPERTIES=[\"offsetX\",\"offsetY\",\"offsetWidth\",\"offsetHeight\",\"offsetAngle\",\"offsetOpacity\",\"offsetColor\",\"offsetZElevation\",\"offsetScaleX\",\"offsetScaleY\"];const VALUE_PROPERTIES=[\"value\"];const PROPERTY_INDEX_TO_NAME=[].concat(PAIR_PROPERTIES).concat(SINGLE_PROPERTIES).concat(VALUE_PROPERTIES);\nconst PROPERTY_PAIR_TO_REAL_PROPERTIES={\"position\":[\"offsetX\",\"offsetY\"],\"size\":[\"offsetWidth\",\"offsetHeight\"],\"scale\":[\"offsetScaleX\",\"offsetScaleY\"]};const ALL_REAL_PROPERTIES=Object.assign({},PROPERTY_INDEX_TO_NAME.reduce((o,key)=>Object.assign({},o,{[key]:[key]}),{}),PROPERTY_PAIR_TO_REAL_PROPERTIES);\nC3.Behaviors.Tween.Maps=class Maps{constructor(){}static GetEases(){return[...Ease.GetRuntimeEaseNames()]}static GetEaseFromIndex(index){return[...Ease.GetRuntimeEaseNames()][index]}static GetPropertyFromIndex(index){return PROPERTY_INDEX_TO_NAME[index]}static GetPropertyIndexFromName(name){return PROPERTY_INDEX_TO_NAME.indexOf(name)}static GetPairPropertyFromIndex(index){return PAIR_PROPERTIES[index]}static GetSinglePropertyFromIndex(index){return SINGLE_PROPERTIES[index]}static GetValuePropertyFromIndex(index){return VALUE_PROPERTIES[index]}static GetPairProperties(pairId){return PROPERTY_PAIR_TO_REAL_PROPERTIES[pairId]}static GetRealProperties(id){if(C3.IsString(id))return ALL_REAL_PROPERTIES[id];else return ALL_REAL_PROPERTIES[PROPERTY_INDEX_TO_NAME[id]]}static IsPairId(id){return!!PROPERTY_PAIR_TO_REAL_PROPERTIES[id]}static IsColorId(id){return id===\n\"offsetColor\"}static IsAngleId(id){return id===\"offsetAngle\"}static IsOpacityId(id){return id===\"offsetOpacity\"}static IsValueId(id){return id===\"value\"}};\n\n}\n\n{\n'use strict';const C3=self.C3;const NAMESPACE=C3.Behaviors.Tween;const TWEEN_CONFIGURATIONS=new Map;\nNAMESPACE.Config=class Config{constructor(){}static GetPropertyTracksConfig(property,startValue,endValue,ease,resultMode,instance){if(TWEEN_CONFIGURATIONS.size===0)this._CreateConfigObjects();const propertyType=NAMESPACE.PropertyTypes.Pick(property);let config=TWEEN_CONFIGURATIONS.get(propertyType);if(C3.IsFiniteNumber(property))property=NAMESPACE.Maps.GetPropertyFromIndex(property);return this._GetConfig(config,property,startValue,endValue,ease,resultMode,instance)}static TransformValue(property,\nvalue){const configFunctionObject=C3.Behaviors.Tween.GetPropertyTracksConfig(property);return configFunctionObject.valueGetter(value)}static _CreateConfigObjects(){const types=NAMESPACE.PropertyTypes;const getters=NAMESPACE.ValueGetters;this._AddConfigObject(types.PAIR,this._GetPairConfig,getters._GetPropertyValue);this._AddConfigObject(types.COLOR,this._GetColorConfig,getters._GetColorPropertyValue);this._AddConfigObject(types.ANGLE,this._GetAngleConfig,getters._GetPropertyAngleValue);this._AddConfigObject(types.VALUE,\nthis._GetValueConfig,getters._GetPropertyValue);this._AddConfigObject(types.OTHER,this._GetCommonConfig,getters._GetPropertyValue)}static _AddConfigObject(name,configGetter,valueGetter){TWEEN_CONFIGURATIONS.set(name,this._CreateConfigObject(name,configGetter,valueGetter))}static _CreateConfigObject(name,configFunc,valueGetter){return{name:name,configFunc:configFunc,valueGetter:valueGetter}}static _GetConfig(config,property,startValue,endValue,ease,resultMode,instance){return config.configFunc(property,\nconfig.valueGetter(startValue),config.valueGetter(endValue),ease,resultMode,instance)}static _GetPairConfig(property,startValues,endValues,ease,resultMode,instance){const properties=NAMESPACE.Maps.GetPairProperties(property);return properties.map((property,index)=>{return{sourceId:\"world-instance\",property:property,type:\"float\",valueType:\"numeric\",startValue:startValues[index],endValue:endValues[index],ease:NAMESPACE.Maps.GetEaseFromIndex(ease),resultMode:resultMode}})}static _GetColorConfig(property,\nstartValue,endValue,ease,resultMode,instance){if(C3.Plugins.Text&&instance.GetPlugin()instanceof C3.Plugins.Text)return{sourceId:\"plugin\",sourceArgs:[7],property:\"color\",type:\"color\",valueType:\"color\",startValue:startValue,endValue:endValue,ease:NAMESPACE.Maps.GetEaseFromIndex(ease),resultMode:resultMode};else return{sourceId:\"world-instance\",property:property,type:\"color\",valueType:\"color\",startValue:startValue,endValue:endValue,ease:NAMESPACE.Maps.GetEaseFromIndex(ease),resultMode:resultMode}}static _GetAngleConfig(property,\nstartValue,endValue,ease,resultMode,instance){return{sourceId:\"world-instance\",property:property,type:\"angle\",valueType:\"angle\",startValue:startValue,endValue:endValue,ease:NAMESPACE.Maps.GetEaseFromIndex(ease),resultMode:resultMode}}static _GetCommonConfig(property,startValue,endValue,ease,resultMode,instance){return{sourceId:\"world-instance\",property:property,type:\"float\",valueType:\"numeric\",startValue:startValue,endValue:endValue,ease:NAMESPACE.Maps.GetEaseFromIndex(ease),resultMode:resultMode}}static _GetValueConfig(property,\nstartValue,endValue,ease,resultMode,instance){return{sourceId:\"value\",property:property,type:\"float\",valueType:\"numeric\",startValue:startValue,endValue:endValue,ease:NAMESPACE.Maps.GetEaseFromIndex(ease),resultMode:resultMode}}};\n\n}\n\n{\n'use strict';const C3=self.C3;const NAMESPACE=C3.Behaviors.Tween;const COMMON_FIXED_ARGS={resultMode:\"absolute\"};const COMMON_VARIABLE_ARGS=Object.assign({},COMMON_FIXED_ARGS,{tags:\"\",property:\"\",time:0,ease:0,releaseOnComplete:0,loop:false,pingPong:false,repeatCount:1});const ONE_PROPERTY_ARGS=Object.assign({},COMMON_VARIABLE_ARGS,{initialValueMode:\"current-state\",startValue:0,endValue:0});\nconst TWO_PROPERTIES_ARGS=Object.assign({},COMMON_VARIABLE_ARGS,{initialValueMode:\"current-state\",startValue:[0,0],endValue:[0,0]});const COLOR_PROPERTY_ARGS=Object.assign({},COMMON_VARIABLE_ARGS,{initialValueMode:\"current-state\",startValue:[0,0,0],endValue:[0,0,0]});const VALUE_PROPERTY_ARGS=Object.assign({},ONE_PROPERTY_ARGS,{initialValueMode:\"start-value\"});const X=0;const Y=1;const R=0;const G=1;const B=2;\nNAMESPACE.TweenArguments=class TweenArguments{constructor(){}static _SetCommonProperties(argsObject,tags,time,ease,destroyOnComplete,loop,pingPong,repeatCount){argsObject.tags=tags;argsObject.time=time;argsObject.ease=ease;argsObject.releaseOnComplete=destroyOnComplete;argsObject.loop=loop;argsObject.pingPong=pingPong;argsObject.repeatCount=repeatCount}static OneProperty(inst,tags,property,endValue,time,ease,destroyOnComplete,loop,pingPong,repeatCount){const propertyName=typeof property===\"string\"?\nproperty:NAMESPACE.Maps.GetSinglePropertyFromIndex(property);const args=NAMESPACE.Maps.IsColorId(propertyName)?COLOR_PROPERTY_ARGS:ONE_PROPERTY_ARGS;this._SetCommonProperties(args,tags,time,ease,destroyOnComplete,loop,pingPong,repeatCount);if(NAMESPACE.Maps.IsColorId(propertyName)){COLOR_PROPERTY_ARGS.endValue[R]=C3.GetRValue(endValue);COLOR_PROPERTY_ARGS.endValue[G]=C3.GetGValue(endValue);COLOR_PROPERTY_ARGS.endValue[B]=C3.GetBValue(endValue);COLOR_PROPERTY_ARGS.property=NAMESPACE.Maps.GetPropertyIndexFromName(propertyName)}else if(NAMESPACE.Maps.IsOpacityId(propertyName))ONE_PROPERTY_ARGS.endValue=\nendValue/100;else ONE_PROPERTY_ARGS.endValue=endValue;args.property=NAMESPACE.Maps.GetPropertyIndexFromName(propertyName);return args}static TwoProperties(inst,tags,property,endValueX,endValueY,time,ease,destroyOnComplete,loop,pingPong,repeatCount){this._SetCommonProperties(TWO_PROPERTIES_ARGS,tags,time,ease,destroyOnComplete,loop,pingPong,repeatCount);const pairName=typeof property===\"string\"?property:NAMESPACE.Maps.GetPairPropertyFromIndex(property);TWO_PROPERTIES_ARGS.endValue[X]=endValueX;TWO_PROPERTIES_ARGS.endValue[Y]=\nendValueY;TWO_PROPERTIES_ARGS.property=NAMESPACE.Maps.GetPropertyIndexFromName(pairName);return TWO_PROPERTIES_ARGS}static ValueProperty(inst,tags,startValue,endValue,time,ease,destroyOnComplete,loop,pingPong,repeatCount){this._SetCommonProperties(VALUE_PROPERTY_ARGS,tags,time,ease,destroyOnComplete,loop,pingPong,repeatCount);VALUE_PROPERTY_ARGS.startValue=startValue;VALUE_PROPERTY_ARGS.endValue=endValue;VALUE_PROPERTY_ARGS.property=NAMESPACE.Maps.GetPropertyIndexFromName(\"value\");return VALUE_PROPERTY_ARGS}};\n\n}\n\n{\n'use strict';const C3=self.C3;const NAMESPACE=C3.Behaviors.Tween;const TYPE_CHECK_OBJECTS=[];\nNAMESPACE.PropertyTypes=class PropertyTypes{constructor(){}static Pick(property){if(TYPE_CHECK_OBJECTS.length===0){const arr=TYPE_CHECK_OBJECTS;arr.push({checkFunc:NAMESPACE.Maps.IsPairId,result:this.PAIR});arr.push({checkFunc:NAMESPACE.Maps.IsColorId,result:this.COLOR});arr.push({checkFunc:NAMESPACE.Maps.IsAngleId,result:this.ANGLE});arr.push({checkFunc:NAMESPACE.Maps.IsValueId,result:this.VALUE});arr.push({checkFunc:()=>true,result:this.OTHER})}if(C3.IsFiniteNumber(property))property=C3.Behaviors.Tween.Maps.GetPropertyFromIndex(property);\nfor(const propertyTypeFunctionObject of TYPE_CHECK_OBJECTS)if(propertyTypeFunctionObject.checkFunc(property))return propertyTypeFunctionObject.result}static get PAIR(){return\"pair\"}static get COLOR(){return\"color\"}static get ANGLE(){return\"angle\"}static get VALUE(){return\"value\"}static get OTHER(){return\"other\"}};\n\n}\n\n{\n'use strict';const C3=self.C3;const NAMESPACE=C3.Behaviors.Tween;NAMESPACE.ValueGetters=class ValueGetters{constructor(){}static _GetPropertyAngleValue(value){const r=C3.toRadians(parseFloat(value));return C3.clampAngle(r)}static _GetColorPropertyValue(value){return value.slice(0)}static _GetPropertyValue(value){return value}};\n\n}\n\n{\n'use strict';const C3=self.C3;const C3X=self.C3X;const IBehaviorInstance=self.IBehaviorInstance;const Ease=self.Ease;const NAMESPACE=C3.Behaviors.Tween;const map=new WeakMap;\nconst TWEEN_PROPERTIES=new Map([[\"x\",{name:\"offsetX\",type:\"one\"}],[\"y\",{name:\"offsetY\",type:\"one\"}],[\"width\",{name:\"offsetWidth\",type:\"one\"}],[\"height\",{name:\"offsetHeight\",type:\"one\"}],[\"angle\",{name:\"offsetAngle\",type:\"one\"}],[\"opacity\",{name:\"offsetOpacity\",type:\"one\"}],[\"color\",{name:\"offsetColor\",type:\"color\"}],[\"z-elevation\",{name:\"offsetZElevation\",type:\"one\"}],[\"x-scale\",{name:\"offsetScaleX\",type:\"one\"}],[\"y-scale\",{name:\"offsetScaleY\",type:\"one\"}],[\"position\",{name:\"position\",type:\"two\"}],\n[\"size\",{name:\"size\",type:\"two\"}],[\"scale\",{name:\"scale\",type:\"two\"}],[\"value\",{name:\"value\",type:\"value\"}]]);function getIndexForEase(ease){C3X.RequireString(ease);const easeInternalName=Ease.ToInternal(ease);let easeIndex;if(easeInternalName)easeIndex=Ease.GetIndexForEase(easeInternalName,null);else easeIndex=Ease.GetIndexForEase(ease,null);if(easeIndex===-1)throw new Error(`invalid ease name '${ease}'`);return easeIndex}\nconst TWEEN_OPTS={tags:\"\",destroyOnComplete:false,loop:false,pingPong:false,repeatCount:1,startValue:0};const I_TWEEN_OPTS={easeToIndexFunc:getIndexForEase};\nself.ITweenBehaviorInstance=class ITweenBehaviorInstance extends IBehaviorInstance{constructor(){super();map.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}startTween(prop,endValue,time,ease,opts){const inst=map.get(this);if(!inst.IsEnabled()||!inst.IsInstanceValid())return null;const info=TWEEN_PROPERTIES.get(prop);if(!info)throw new Error(\"invalid tween property\");if(info.type===\"one\"||info.type===\"value\")C3X.RequireNumber(endValue);else{C3X.RequireArray(endValue);if(info.type===\"two\"){C3X.RequireNumber(endValue[0]);\nC3X.RequireNumber(endValue[1])}else if(info.type===\"color\"){C3X.RequireNumber(endValue[0]);C3X.RequireNumber(endValue[1]);C3X.RequireNumber(endValue[2])}}if(prop===\"angle\")endValue=C3.toDegrees(endValue);else if(prop===\"opacity\")endValue*=100;else if(prop===\"color\")endValue=C3.PackRGBEx(endValue[0],endValue[1],endValue[2]);const easeIndex=getIndexForEase(ease);C3X.RequireFiniteNumber(time);opts=Object.assign({},TWEEN_OPTS,opts);if(info.type===\"value\")C3X.RequireNumber(opts.startValue);let tween;if(info.type===\n\"one\"||info.type===\"color\")tween=inst.CreateTween(NAMESPACE.TweenArguments.OneProperty(inst,opts.tags,info.name,endValue,time,easeIndex,!!opts.destroyOnComplete,!!opts.loop,!!opts.pingPong,opts.repeatCount));else if(info.type===\"two\")tween=inst.CreateTween(NAMESPACE.TweenArguments.TwoProperties(inst,opts.tags,info.name,endValue[0],endValue[1],time,easeIndex,!!opts.destroyOnComplete,!!opts.loop,!!opts.pingPong,opts.repeatCount));else if(info.type===\"value\")tween=inst.CreateTween(NAMESPACE.TweenArguments.ValueProperty(inst,\nopts.tags,opts.startValue,endValue,time,easeIndex,!!opts.destroyOnComplete,!!opts.loop,!!opts.pingPong,opts.repeatCount));if(!tween.Play())throw new Error(\"failed to start tween\");return tween.GetITweenState(inst,I_TWEEN_OPTS)}*allTweens(){const inst=map.get(this);for(const tween of inst.AllTweens())yield tween.GetITweenState(inst,I_TWEEN_OPTS)}*tweensByTags(tags){C3X.RequireString(tags);const inst=map.get(this);for(const tween of inst.GetTweens(tags))yield tween.GetITweenState(inst,I_TWEEN_OPTS)}get isEnabled(){return map.get(this).IsEnabled()}set isEnabled(e){map.get(this).SetEnabled(e)}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Behaviors.Sin=class SinBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Behaviors.Sin.Type=class SinType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const C3X=self.C3X;const IBehaviorInstance=self.IBehaviorInstance;const MOVEMENT=0;const WAVE=1;const PERIOD=2;const PERIOD_RANDOM=3;const PERIOD_OFFSET=4;const PERIOD_OFFSET_RANDOM=5;const MAGNITUDE=6;const MAGNITUDE_RANDOM=7;const ENABLE=8;const HORIZONTAL=0;const VERTICAL=1;const SIZE=2;const WIDTH=3;const HEIGHT=4;const ANGLE=5;const OPACITY=6;const VALUE=7;const FORWARDS_BACKWARDS=8;const ZELEVATION=9;const SINE=0;const TRIANGLE=1;const SAWTOOTH=2;const REVERSE_SAWTOOTH=3;const SQUARE=\n4;const _2pi=2*Math.PI;const _pi_2=Math.PI/2;const _3pi_2=3*Math.PI/2;const MOVEMENT_LOOKUP=[0,1,8,3,4,2,5,6,9,7];C3.Behaviors.Sin.Instance=class SinInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._i=0;this._movement=0;this._wave=0;this._period=0;this._mag=0;this._isEnabled=true;this._basePeriod=0;this._basePeriodOffset=0;this._baseMag=0;this._periodRandom=0;this._periodOffsetRandom=0;this._magnitudeRandom=0;this._initialValue=0;this._initialValue2=\n0;this._lastKnownValue=0;this._lastKnownValue2=0;this._ratio=0;if(properties){this._movement=MOVEMENT_LOOKUP[properties[MOVEMENT]];this._wave=properties[WAVE];this._periodRandom=this._runtime.Random()*properties[PERIOD_RANDOM];this._basePeriod=properties[PERIOD];this._period=properties[PERIOD];this._period+=this._periodRandom;this._basePeriodOffset=properties[PERIOD_OFFSET];if(this._period!==0){this._periodOffsetRandom=this._runtime.Random()*properties[PERIOD_OFFSET_RANDOM];this._i=properties[PERIOD_OFFSET]/\nthis._period*_2pi;this._i+=this._periodOffsetRandom/this._period*_2pi}this._magnitudeRandom=this._runtime.Random()*properties[MAGNITUDE_RANDOM];this._baseMag=properties[MAGNITUDE];this._mag=properties[MAGNITUDE];this._mag+=this._magnitudeRandom;this._isEnabled=!!properties[ENABLE]}if(this._movement===ANGLE)this._mag=C3.toRadians(this._mag);this.Init();if(this._isEnabled)this._StartTicking()}Release(){super.Release()}SaveToJson(){return{\"i\":this._i,\"e\":this._isEnabled,\"mv\":this._movement,\"w\":this._wave,\n\"p\":this._period,\"mag\":this._mag,\"iv\":this._initialValue,\"iv2\":this._initialValue2,\"r\":this._ratio,\"lkv\":this._lastKnownValue,\"lkv2\":this._lastKnownValue2}}LoadFromJson(o){this._i=o[\"i\"];this._SetEnabled(o[\"e\"]);this._movement=o[\"mv\"];this._wave=o[\"w\"];this._period=o[\"p\"];this._mag=o[\"mag\"];this._initialValue=o[\"iv\"];this._initialValue2=o[\"iv2\"];this._ratio=o[\"r\"];this._lastKnownValue=o[\"lkv\"];this._lastKnownValue2=o[\"lkv2\"]}Init(){const wi=this._inst.GetWorldInfo();switch(this._movement){case HORIZONTAL:this._initialValue=\nwi.GetX();break;case VERTICAL:this._initialValue=wi.GetY();break;case SIZE:this._initialValue=wi.GetWidth();this._ratio=wi.GetHeight()/wi.GetWidth();break;case WIDTH:this._initialValue=wi.GetWidth();break;case HEIGHT:this._initialValue=wi.GetHeight();break;case ANGLE:this._initialValue=wi.GetAngle();break;case OPACITY:this._initialValue=wi.GetOpacity();break;case VALUE:this._initialValue=0;break;case FORWARDS_BACKWARDS:this._initialValue=wi.GetX();this._initialValue2=wi.GetY();break;case ZELEVATION:this._initialValue=\nwi.GetZElevation();break;default:}this._lastKnownValue=this._initialValue;this._lastKnownValue2=this._initialValue2}WaveFunc(x){x=x%_2pi;switch(this._wave){case SINE:return Math.sin(x);case TRIANGLE:if(x<=_pi_2)return x/_pi_2;else if(x<=_3pi_2)return 1-2*(x-_pi_2)/Math.PI;else return(x-_3pi_2)/_pi_2-1;case SAWTOOTH:return 2*x/_2pi-1;case REVERSE_SAWTOOTH:return-2*x/_2pi+1;case SQUARE:return x<Math.PI?-1:1}return 0}Tick(){const dt=this._runtime.GetDt(this._inst);if(!this._isEnabled||dt===0)return;\nif(this._period===0)this._i=0;else this._i=(this._i+dt/this._period*_2pi)%_2pi;this._UpdateFromPhase()}_UpdateFromPhase(){const wi=this._inst.GetWorldInfo();switch(this._movement){case HORIZONTAL:if(wi.GetX()!==this._lastKnownValue)this._initialValue+=wi.GetX()-this._lastKnownValue;wi.SetX(this._initialValue+this.WaveFunc(this._i)*this._mag);this._lastKnownValue=wi.GetX();break;case VERTICAL:if(wi.GetY()!==this._lastKnownValue)this._initialValue+=wi.GetY()-this._lastKnownValue;wi.SetY(this._initialValue+\nthis.WaveFunc(this._i)*this._mag);this._lastKnownValue=wi.GetY();break;case SIZE:wi.SetWidth(this._initialValue+this.WaveFunc(this._i)*this._mag);wi.SetHeight(wi.GetWidth()*this._ratio);break;case WIDTH:wi.SetWidth(this._initialValue+this.WaveFunc(this._i)*this._mag);break;case HEIGHT:wi.SetHeight(this._initialValue+this.WaveFunc(this._i)*this._mag);break;case ANGLE:if(wi.GetAngle()!==this._lastKnownValue)this._initialValue=C3.clampAngle(this._initialValue+(wi.GetAngle()-this._lastKnownValue));wi.SetAngle(this._initialValue+\nthis.WaveFunc(this._i)*this._mag);this._lastKnownValue=wi.GetAngle();break;case OPACITY:wi.SetOpacity(this._initialValue+this.WaveFunc(this._i)*this._mag/100);break;case FORWARDS_BACKWARDS:if(wi.GetX()!==this._lastKnownValue)this._initialValue+=wi.GetX()-this._lastKnownValue;if(wi.GetY()!==this._lastKnownValue2)this._initialValue2+=wi.GetY()-this._lastKnownValue2;wi.SetX(this._initialValue+Math.cos(wi.GetAngle())*this.WaveFunc(this._i)*this._mag);wi.SetY(this._initialValue2+Math.sin(wi.GetAngle())*\nthis.WaveFunc(this._i)*this._mag);this._lastKnownValue=wi.GetX();this._lastKnownValue2=wi.GetY();break;case ZELEVATION:wi.SetZElevation(this._initialValue+this.WaveFunc(this._i)*this._mag);break}wi.SetBboxChanged()}_OnSpriteFrameChanged(prevFrame,nextFrame){}_SetPeriod(x){this._period=x}_GetPeriod(){return this._period}_SetMagnitude(x){this._mag=x}_SetMagnitude_ConvertAngle(x){if(this._movement===5)x=C3.toRadians(x);this._SetMagnitude(x)}_GetMagnitude(){return this._mag}_GetMagnitude_ConvertAngle(){let m=\nthis._GetMagnitude();if(this._movement===5)m=C3.toDegrees(m);return m}_SetMovement(m){if(this._movement===5&&m!==5)this._mag=C3.toDegrees(this._mag);this._movement=m;this.Init()}_GetMovement(){return this._movement}_SetWave(w){this._wave=w}_GetWave(){return this._wave}_SetPhase(x){this._i=C3.clamp(x,0,Math.PI*2);this._UpdateFromPhase()}_GetPhase(){return this._i}_SetEnabled(e){this._isEnabled=!!e;if(this._isEnabled)this._StartTicking();else this._StopTicking()}_IsEnabled(){return this._isEnabled}GetPropertyValueByIndex(index){switch(index){case MOVEMENT:return this._movement;\ncase WAVE:return this._wave;case PERIOD:return this._basePeriod;case MAGNITUDE:return this._baseMag;case ENABLE:return this._isEnabled}}SetPropertyValueByIndex(index,value){switch(index){case MOVEMENT:this._movement=MOVEMENT_LOOKUP[value];this.Init();break;case WAVE:this._wave=value;break;case PERIOD:this._basePeriod=value;this._period=this._basePeriod+this._periodRandom;if(!this._isEnabled)if(this._period!==0){this._i=this._basePeriodOffset/this._period*_2pi;this._i+=this._periodOffsetRandom/this._period*\n_2pi}else this._i=0;break;case MAGNITUDE:this._baseMag=value;this._mag=this._baseMag+this._magnitudeRandom;if(this._movement===ANGLE)this._mag=C3.toRadians(this._mag);break;case ENABLE:this._isEnabled=!!value;break}}GetDebuggerProperties(){const prefix=\"behaviors.sin\";return[{title:\"$\"+this.GetBehaviorType().GetName(),properties:[{name:prefix+\".properties.enabled.name\",value:this._IsEnabled(),onedit:v=>this._SetEnabled(v)},{name:prefix+\".properties.period.name\",value:this._GetPeriod(),onedit:v=>this._SetPeriod(v)},\n{name:prefix+\".properties.magnitude.name\",value:this._GetMagnitude_ConvertAngle(),onedit:v=>this._SetMagnitude_ConvertAngle(v)},{name:prefix+\".debugger.value\",value:this.WaveFunc(this._GetPhase())*this._GetMagnitude_ConvertAngle()}]}]}GetScriptInterfaceClass(){return self.ISineBehaviorInstance}};const map=new WeakMap;const VALID_MOVEMENTS=[\"horizontal\",\"vertical\",\"size\",\"width\",\"height\",\"angle\",\"opacity\",\"value-only\",\"forwards-backwards\",\"z-elevation\"];const VALID_WAVES=[\"sine\",\"triangle\",\"sawtooth\",\n\"reverse-sawtooth\",\"square\"];self.ISineBehaviorInstance=class ISineBehaviorInstance extends IBehaviorInstance{constructor(){super();map.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}set period(x){C3X.RequireFiniteNumber(x);map.get(this)._SetPeriod(x)}get period(){return map.get(this)._GetPeriod()}set magnitude(m){C3X.RequireFiniteNumber(m);map.get(this)._SetMagnitude(m)}get magnitude(){return map.get(this)._GetMagnitude()}set phase(p){map.get(this)._SetPhase(p)}get phase(){return map.get(this)._GetPhase()}set movement(m){C3X.RequireString(m);\nconst i=VALID_MOVEMENTS.indexOf(m);if(i===-1)throw new Error(\"invalid movement\");map.get(this)._SetMovement(i)}get movement(){return VALID_MOVEMENTS[map.get(this)._GetMovement()]}set wave(w){C3X.RequireString(w);const i=VALID_WAVES.indexOf(w);if(i===-1)throw new Error(\"invalid wave\");map.get(this)._SetWave(i)}get wave(){return VALID_WAVES[map.get(this)._GetWave()]}get value(){const inst=map.get(this);return inst.WaveFunc(inst._GetPhase())*inst._GetMagnitude()}updateInitialState(){map.get(this).Init()}set isEnabled(e){map.get(this)._SetEnabled(!!e)}get isEnabled(){return map.get(this)._IsEnabled()}}}\n{const C3=self.C3;C3.Behaviors.Sin.Cnds={IsEnabled(){return this._IsEnabled()},CompareMovement(m){return this._GetMovement()===m},ComparePeriod(cmp,v){return C3.compare(this._GetPeriod(),cmp,v)},CompareMagnitude(cmp,v){return C3.compare(this._GetMagnitude_ConvertAngle(),cmp,v)},CompareWave(w){return this._GetWave()===w}}}\n{const C3=self.C3;C3.Behaviors.Sin.Acts={SetEnabled(e){this._SetEnabled(e!==0)},SetPeriod(x){this._SetPeriod(x)},SetMagnitude(x){this._SetMagnitude_ConvertAngle(x)},SetMovement(m){this._SetMovement(m)},SetWave(w){this._wave=w},SetPhase(x){const _2pi=Math.PI*2;this._SetPhase(x*_2pi%_2pi)},UpdateInitialState(){this.Init()}}}\n{const C3=self.C3;C3.Behaviors.Sin.Exps={CyclePosition(){return this._GetPhase()/(2*Math.PI)},Period(){return this._GetPeriod()},Magnitude(){return this._GetMagnitude_ConvertAngle()},Value(){return this.WaveFunc(this._GetPhase())*this._GetMagnitude_ConvertAngle()}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Behaviors.Pin=class PinBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Behaviors.Pin.Type=class PinType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;C3.Behaviors.Pin.Instance=class PinInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._pinInst=null;this._pinUid=-1;this._mode=\"\";this._propSet=new Set;this._pinDist=0;this._pinAngle=0;this._pinImagePoint=0;this._dx=0;this._dy=0;this._dWidth=0;this._dHeight=0;this._dAngle=0;this._dz=0;this._lastKnownAngle=0;this._destroy=false;if(properties)this._destroy=properties[0];const rt=this._runtime.Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,\n\"instancedestroy\",e=>this._OnInstanceDestroyed(e.instance)),C3.Disposable.From(rt,\"afterload\",e=>this._OnAfterLoad()))}Release(){this._pinInst=null;super.Release()}_SetPinInst(inst){if(inst){this._pinInst=inst;this._StartTicking2()}else{this._pinInst=null;this._StopTicking2()}}_Pin(objectClass,mode,propList){if(!objectClass)return;const otherInst=objectClass.GetFirstPicked(this._inst);if(!otherInst)return;this._mode=mode;this._SetPinInst(otherInst);const myWi=this._inst.GetWorldInfo();const otherWi=\notherInst.GetWorldInfo();if(this._mode===\"properties\"){const propSet=this._propSet;propSet.clear();for(const p of propList)propSet.add(p);this._dx=myWi.GetX()-otherWi.GetX();this._dy=myWi.GetY()-otherWi.GetY();this._dAngle=myWi.GetAngle()-otherWi.GetAngle();this._lastKnownAngle=myWi.GetAngle();this._dz=myWi.GetZElevation()-otherWi.GetZElevation();if(propSet.has(\"x\")&&propSet.has(\"y\")){this._pinAngle=C3.angleTo(otherWi.GetX(),otherWi.GetY(),myWi.GetX(),myWi.GetY())-otherWi.GetAngle();this._pinDist=\nC3.distanceTo(otherWi.GetX(),otherWi.GetY(),myWi.GetX(),myWi.GetY())}if(propSet.has(\"width-abs\"))this._dWidth=myWi.GetWidth()-otherWi.GetWidth();else if(propSet.has(\"width-scale\"))this._dWidth=myWi.GetWidth()/otherWi.GetWidth();if(propSet.has(\"height-abs\"))this._dHeight=myWi.GetHeight()-otherWi.GetHeight();else if(propSet.has(\"height-scale\"))this._dHeight=myWi.GetHeight()/otherWi.GetHeight()}else this._pinDist=C3.distanceTo(otherWi.GetX(),otherWi.GetY(),myWi.GetX(),myWi.GetY())}SaveToJson(){const propSet=\nthis._propSet;const mode=this._mode;const ret={\"uid\":this._pinInst?this._pinInst.GetUID():-1,\"m\":mode,\"d\":this._destroy};if(mode===\"rope\"||mode===\"bar\")ret[\"pd\"]=this._pinDist;else if(mode===\"properties\"){ret[\"ps\"]=[...this._propSet];if(propSet.has(\"imagepoint\"))ret[\"ip\"]=this._pinImagePoint;else if(propSet.has(\"x\")&&propSet.has(\"y\")){ret[\"pa\"]=this._pinAngle;ret[\"pd\"]=this._pinDist}else{if(propSet.has(\"x\"))ret[\"dx\"]=this._dx;if(propSet.has(\"y\"))ret[\"dy\"]=this._dy}if(propSet.has(\"angle\")){ret[\"da\"]=\nthis._dAngle;ret[\"lka\"]=this._lastKnownAngle}if(propSet.has(\"width-abs\")||propSet.has(\"width-scale\"))ret[\"dw\"]=this._dWidth;if(propSet.has(\"height-abs\")||propSet.has(\"height-scale\"))ret[\"dh\"]=this._dHeight;if(propSet.has(\"z\"))ret[\"dz\"]=this._dz}return ret}LoadFromJson(o){const mode=o[\"m\"];const propSet=this._propSet;propSet.clear();this._pinUid=o[\"uid\"];if(typeof mode===\"number\"){this._LoadFromJson_Legacy(o);return}this._mode=mode;if(o.hasOwnProperty(\"d\"))this._destroy=!!o[\"d\"];if(mode===\"rope\"||\nmode===\"bar\")this._pinDist=o[\"pd\"];else if(mode===\"properties\"){for(const p of o[\"ps\"])propSet.add(p);if(propSet.has(\"imagepoint\"))this._pinImagePoint=o[\"ip\"];else if(propSet.has(\"x\")&&propSet.has(\"y\")){this._pinAngle=o[\"pa\"];this._pinDist=o[\"pd\"]}else{if(propSet.has(\"x\"))this._dx=o[\"dx\"];if(propSet.has(\"y\"))this._dy=o[\"dy\"]}if(propSet.has(\"angle\")){this._dAngle=o[\"da\"];this._lastKnownAngle=o[\"lka\"]||0}if(propSet.has(\"width-abs\")||propSet.has(\"width-scale\"))this._dWidth=o[\"dw\"];if(propSet.has(\"height-abs\")||\npropSet.has(\"height-scale\"))this._dHeight=o[\"dh\"];if(propSet.has(\"z\"))this._dz=o[\"dz\"]}}_LoadFromJson_Legacy(o){const propSet=this._propSet;const myStartAngle=o[\"msa\"];const theirStartAngle=o[\"tsa\"];const pinAngle=o[\"pa\"];const pinDist=o[\"pd\"];const mode=o[\"m\"];switch(mode){case 0:this._mode=\"properties\";propSet.add(\"x\").add(\"y\").add(\"angle\");this._pinAngle=pinAngle;this._pinDist=pinDist;this._dAngle=myStartAngle-theirStartAngle;this._lastKnownAngle=o[\"lka\"];break;case 1:this._mode=\"properties\";propSet.add(\"x\").add(\"y\");\nthis._pinAngle=pinAngle;this._pinDist=pinDist;break;case 2:this._mode=\"properties\";propSet.add(\"angle\");this._dAngle=myStartAngle-theirStartAngle;this._lastKnownAngle=o[\"lka\"];break;case 3:this._mode=\"rope\";this._pinDist=o[\"pd\"];break;case 4:this._mode=\"bar\";this._pinDist=o[\"pd\"];break}}_OnAfterLoad(){if(this._pinUid===-1)this._SetPinInst(null);else{this._SetPinInst(this._runtime.GetInstanceByUID(this._pinUid));this._pinUid=-1}}_OnInstanceDestroyed(inst){if(this._pinInst===inst){this._SetPinInst(null);\nif(this._destroy)this._runtime.DestroyInstance(this._inst)}}Tick2(){const pinInst=this._pinInst;if(!pinInst)return;const pinWi=pinInst.GetWorldInfo();const myInst=this._inst;const myWi=myInst.GetWorldInfo();const mode=this._mode;let bboxChanged=false;if(mode===\"rope\"||mode===\"bar\"){const dist=C3.distanceTo(myWi.GetX(),myWi.GetY(),pinWi.GetX(),pinWi.GetY());if(dist>this._pinDist||mode===\"bar\"&&dist<this._pinDist){const a=C3.angleTo(pinWi.GetX(),pinWi.GetY(),myWi.GetX(),myWi.GetY());myWi.SetXY(pinWi.GetX()+\nMath.cos(a)*this._pinDist,pinWi.GetY()+Math.sin(a)*this._pinDist);bboxChanged=true}}else{const propSet=this._propSet;let v=0;if(propSet.has(\"imagepoint\")){const [newX,newY]=pinInst.GetImagePoint(this._pinImagePoint);if(!myWi.EqualsXY(newX,newY)){myWi.SetXY(newX,newY);bboxChanged=true}}else if(propSet.has(\"x\")&&propSet.has(\"y\")){const newX=pinWi.GetX()+Math.cos(pinWi.GetAngle()+this._pinAngle)*this._pinDist;const newY=pinWi.GetY()+Math.sin(pinWi.GetAngle()+this._pinAngle)*this._pinDist;if(!myWi.EqualsXY(newX,\nnewY)){myWi.SetXY(newX,newY);bboxChanged=true}}else{v=pinWi.GetX()+this._dx;if(propSet.has(\"x\")&&v!==myWi.GetX()){myWi.SetX(v);bboxChanged=true}v=pinWi.GetY()+this._dy;if(propSet.has(\"y\")&&v!==myWi.GetY()){myWi.SetY(v);bboxChanged=true}}if(propSet.has(\"angle\")){if(this._lastKnownAngle!==myWi.GetAngle())this._dAngle=C3.clampAngle(this._dAngle+(myWi.GetAngle()-this._lastKnownAngle));v=C3.clampAngle(pinWi.GetAngle()+this._dAngle);if(v!==myWi.GetAngle()){myWi.SetAngle(v);bboxChanged=true}this._lastKnownAngle=\nmyWi.GetAngle()}if(propSet.has(\"width-abs\")){v=pinWi.GetWidth()+this._dWidth;if(v!==myWi.GetWidth()){myWi.SetWidth(v);bboxChanged=true}}if(propSet.has(\"width-scale\")){v=pinWi.GetWidth()*this._dWidth;if(v!==myWi.GetWidth()){myWi.SetWidth(v);bboxChanged=true}}if(propSet.has(\"height-abs\")){v=pinWi.GetHeight()+this._dHeight;if(v!==myWi.GetHeight()){myWi.SetHeight(v);bboxChanged=true}}if(propSet.has(\"height-scale\")){v=pinWi.GetHeight()*this._dHeight;if(v!==myWi.GetHeight()){myWi.SetHeight(v);bboxChanged=\ntrue}}if(propSet.has(\"z\")){v=pinWi.GetZElevation()+this._dz;if(v!==myWi.GetZElevation()){myWi.SetZElevation(v);this._runtime.UpdateRender()}}}if(bboxChanged)myWi.SetBboxChanged()}GetDebuggerProperties(){const prefix=\"behaviors.pin.debugger\";return[{title:\"$\"+this.GetBehaviorType().GetName(),properties:[{name:prefix+\".is-pinned\",value:!!this._pinInst},{name:prefix+\".pinned-uid\",value:this._pinInst?this._pinInst.GetUID():0}]}]}}}\n{const C3=self.C3;C3.Behaviors.Pin.Cnds={IsPinned(){return!!this._pinInst},WillDestroy(){return this._destroy}}}\n{const C3=self.C3;C3.Behaviors.Pin.Acts={PinByDistance(objectClass,mode){this._Pin(objectClass,mode===0?\"rope\":\"bar\")},PinByProperties(objectClass,ex,ey,ea,ew,eh,ez){const propList=[];if(ex)propList.push(\"x\");if(ey)propList.push(\"y\");if(ea)propList.push(\"angle\");if(ez)propList.push(\"z\");if(ew===1)propList.push(\"width-abs\");else if(ew===2)propList.push(\"width-scale\");if(eh===1)propList.push(\"height-abs\");else if(eh===2)propList.push(\"height-scale\");if(propList.length===0)return;this._Pin(objectClass,\n\"properties\",propList)},PinByImagePoint(objectClass,imgPt,ea,ew,eh,ez){const propList=[\"imagepoint\"];if(ea)propList.push(\"angle\");if(ez)propList.push(\"z\");if(ew===1)propList.push(\"width-abs\");else if(ew===2)propList.push(\"width-scale\");if(eh===1)propList.push(\"height-abs\");else if(eh===2)propList.push(\"height-scale\");this._pinImagePoint=imgPt;this._Pin(objectClass,\"properties\",propList)},SetPinDistance(d){if(this._mode===\"rope\"||this._mode===\"bar\")this._pinDist=Math.max(d,0)},SetDestroy(d){this._destroy=\nd},Unpin(){this._SetPinInst(null);this._mode=\"\";this._propSet.clear();this._pinImagePoint=\"\"},Pin(objectClass,mode){switch(mode){case 0:this._Pin(objectClass,\"properties\",[\"x\",\"y\",\"angle\"]);break;case 1:this._Pin(objectClass,\"properties\",[\"x\",\"y\"]);break;case 2:this._Pin(objectClass,\"properties\",[\"angle\"]);break;case 3:this._Pin(objectClass,\"rope\");break;case 4:this._Pin(objectClass,\"bar\");break}}}}{const C3=self.C3;C3.Behaviors.Pin.Exps={PinnedUID(){return this._pinInst?this._pinInst.GetUID():-1}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Behaviors.MoveTo=class MoveToBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Behaviors.MoveTo.Type=class MoveToType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const C3X=self.C3X;const IBehaviorInstance=self.IBehaviorInstance;const PROP_MAX_SPEED=0;const PROP_ACCELERATION=1;const PROP_DECELERATION=2;const PROP_ROTATE_SPEED=3;const PROP_SET_ANGLE=4;const PROP_STOP_ON_SOLIDS=5;const PROP_ENABLED=6;C3.Behaviors.MoveTo.Instance=class MoveToInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._maxSpeed=200;this._acc=600;this._dec=600;this._rotateSpeed=0;this._setAngle=true;this._stopOnSolids=false;\nthis._isEnabled=true;this._speed=0;this._movingAngle=this.GetWorldInfo().GetAngle();this._waypoints=[];if(properties){this._maxSpeed=properties[PROP_MAX_SPEED];this._acc=properties[PROP_ACCELERATION];this._dec=properties[PROP_DECELERATION];this._rotateSpeed=C3.toRadians(properties[PROP_ROTATE_SPEED]);this._setAngle=properties[PROP_SET_ANGLE];this._stopOnSolids=properties[PROP_STOP_ON_SOLIDS];this._isEnabled=properties[PROP_ENABLED]}this._timelineInfo=null;this._lastBezierPosition=NaN;this._lastBezierSegment=\nNaN}Release(){if(this._timelineInfo){this._timelineInfo.Release();this._timelineInfo=null}this._lastBezierPosition=NaN;this._lastBezierSegment=NaN;super.Release()}SaveToJson(){return{\"ms\":this._maxSpeed,\"acc\":this._acc,\"dec\":this._dec,\"rs\":this._rotateSpeed,\"sa\":this._setAngle,\"sos\":this._stopOnSolids,\"s\":this._speed,\"ma\":this._movingAngle,\"wp\":this._waypoints.map(p=>({\"x\":p.x,\"y\":p.y})),\"e\":this._isEnabled}}LoadFromJson(o){this._maxSpeed=o[\"ms\"];this._acc=o[\"acc\"];this._dec=o[\"dec\"];this._rotateSpeed=\no[\"rs\"];this._setAngle=o[\"sa\"];this._stopOnSolids=o[\"sos\"];this._speed=o[\"s\"];this._movingAngle=o[\"ma\"];this._waypoints=o[\"wp\"].map(p=>({x:p[\"x\"],y:p[\"y\"]}));this._SetEnabled(o[\"e\"]);if(this._isEnabled&&this._waypoints.length>0)this._StartTicking()}_AddWaypoint(x,y,isDirect,opts){if(isDirect)C3.clearArray(this._waypoints);this._waypoints.push({x,y,opts});if(this._isEnabled)this._StartTicking()}_GetWaypointCount(){return this._waypoints.length}_GetWaypointXAt(i){i=Math.floor(i);if(i<0||i>=this._waypoints.length)return 0;\nreturn this._waypoints[i].x}_GetWaypointYAt(i){i=Math.floor(i);if(i<0||i>=this._waypoints.length)return 0;return this._waypoints[i].y}_IsMoving(){return this._waypoints.length>0}_Stop(){C3.clearArray(this._waypoints);this._speed=0;this._StopTicking()}_GetTargetX(){if(this._waypoints.length>0)return this._waypoints[0].x;else return 0}_GetTargetY(){if(this._waypoints.length>0)return this._waypoints[0].y;else return 0}_GetTargetIsBezier(){if(this._waypoints.length>0){const waypoint=this._waypoints[0];\nif(waypoint.opts)return waypoint.opts.isBezier}return false}_GetTargetIsBezierFirst(){if(this._waypoints.length>0){const waypoint=this._waypoints[0];if(waypoint.opts)return waypoint.opts.isBezier&&waypoint.opts.isFirst}return false}_GetTargetBezierPosition(){if(this._waypoints.length>0){const waypoint=this._waypoints[0];if(waypoint.opts)return waypoint.opts.bezierPosition}return false}_GetTargetBezierSegment(){if(this._waypoints.length>0){const waypoint=this._waypoints[0];if(waypoint.opts)return waypoint.opts.bezierSegment}return false}_SetSpeed(s){if(!this._IsMoving())return;\nthis._speed=Math.min(s,this._maxSpeed)}_GetSpeed(){return this._speed}_SetMaxSpeed(ms){this._maxSpeed=Math.max(ms,0);this._SetSpeed(this._speed)}_GetMaxSpeed(){return this._maxSpeed}_IsRotationEnabled(){if(this._isEnabled&&this._IsMoving())if(this._GetTargetIsBezier()){if(this._GetTargetIsBezierFirst())return true;return false}return this._rotateSpeed!==0}Tick(){if(!this._isEnabled||!this._IsMoving())return;const dt=this._runtime.GetDt(this._inst);const wi=this._inst.GetWorldInfo();const startX=wi.GetX();\nconst startY=wi.GetY();const startAngle=wi.GetAngle();let curSpeed=this._speed;let maxSpeed=this._maxSpeed;const acc=this._acc;const dec=this._dec;const targetX=this._GetTargetX();const targetY=this._GetTargetY();const angleToTarget=C3.angleTo(startX,startY,targetX,targetY);let isWithinStoppingDistance=false;if(dec>0&&this._waypoints.length===1){const stoppingDist=.5*curSpeed*curSpeed/dec*1.0001;isWithinStoppingDistance=C3.distanceSquared(startX,startY,targetX,targetY)<=stoppingDist*stoppingDist;\nif(isWithinStoppingDistance){const remainingDist=C3.distanceTo(startX,startY,targetX,targetY);curSpeed=Math.sqrt(2*dec*remainingDist);maxSpeed=curSpeed;this._speed=curSpeed}}if(this._IsRotationEnabled()){const da=C3.angleDiff(this._movingAngle,angleToTarget);if(da>Number.EPSILON){const t=da/this._rotateSpeed;const dist=C3.distanceTo(wi.GetX(),wi.GetY(),targetX,targetY);const r=dist/(2*Math.sin(da));const curveDist=r*da;maxSpeed=Math.min(maxSpeed,C3.clamp(curveDist/t,0,this._maxSpeed))}}let curAcc=\nisWithinStoppingDistance?-dec:acc;const stepDist=Math.min(curSpeed*dt+.5*curAcc*dt*dt,maxSpeed*dt);if(isWithinStoppingDistance){if(dec>0){this._speed=Math.max(this._speed-dec*dt,0);if(this._speed===0){this._OnArrived(wi,targetX,targetY);return}}}else if(acc===0)this._speed=maxSpeed;else this._speed=Math.min(this._speed+acc*dt,maxSpeed);if(C3.distanceSquared(wi.GetX(),wi.GetY(),targetX,targetY)<=stepDist*stepDist){this._OnArrived(wi,targetX,targetY);return}if(this._IsRotationEnabled())this._movingAngle=\nC3.angleRotate(this._movingAngle,angleToTarget,this._rotateSpeed*dt);else this._movingAngle=angleToTarget;wi.OffsetXY(Math.cos(this._movingAngle)*stepDist,Math.sin(this._movingAngle)*stepDist);if(this._setAngle){const targetIsBezier=this._GetTargetIsBezier();const targetIsBezierFirst=this._GetTargetIsBezierFirst();if(targetIsBezier&&!targetIsBezierFirst){const bezierSegment=this._GetTargetBezierSegment();const bezierPosition=this._GetTargetBezierPosition();const x=wi.GetX();const y=wi.GetY();if(self.isNaN(this._lastBezierSegment))this._lastBezierSegment=\n0;let projection;if(this._lastBezierSegment===bezierSegment)projection=this._timelineInfo.Project(x,y,{tRange:[this._lastBezierPosition,bezierPosition]});else projection=this._timelineInfo.Project(x,y);const angle=this._timelineInfo.TangentAngle(x,y,projection[2],projection[4]);wi.SetAngle(angle)}else{wi.SetAngle(this._movingAngle);this._lastBezierPosition=NaN;this._lastBezierSegment=NaN}}wi.SetBboxChanged();this._CheckSolidCollision(startX,startY,startAngle)}_OnArrived(wi,targetX,targetY){wi.SetXY(targetX,\ntargetY);wi.SetBboxChanged();const waypoint=this._waypoints[0];if(waypoint.opts&&waypoint.opts.isBezier){this._lastBezierPosition=waypoint.opts.bezierPosition;this._lastBezierSegment=waypoint.opts.bezierSegment}else{this._lastBezierPosition=NaN;this._lastBezierSegment=NaN}this._waypoints.shift();if(this._waypoints.length===0){if(this._timelineInfo){this._timelineInfo.Release();this._timelineInfo=null;this._lastBezierPosition=NaN;this._lastBezierSegment=NaN}this._speed=0;this._StopTicking()}this.DispatchScriptEvent(\"arrived\");\nthis.Trigger(C3.Behaviors.MoveTo.Cnds.OnArrived)}_CheckSolidCollision(startX,startY,startAngle){const collisionEngine=this._runtime.GetCollisionEngine();if(this._stopOnSolids&&collisionEngine.TestOverlapSolid(this._inst)){this._Stop();const wi=this._inst.GetWorldInfo();const x=wi.GetX();const y=wi.GetY();const a=C3.angleTo(x,y,startX,startY);const dist=C3.distanceTo(x,y,startX,startY);if(!collisionEngine.PushOutSolid(this._inst,Math.cos(a),Math.sin(a),Math.max(dist,1))){wi.SetXY(startX,startY);wi.SetAngle(startAngle);\nwi.SetBboxChanged()}this.DispatchScriptEvent(\"hitsolid\");this.Trigger(C3.Behaviors.MoveTo.Cnds.OnHitSolid)}}_IsSetAngle(){return this._setAngle}_SetSetAngle(a){this._setAngle=!!a}_SetAngleOfMotion(a){this._movingAngle=a;if(this._isEnabled&&this._setAngle&&!this._IsMoving()){const wi=this.GetWorldInfo();wi.SetAngle(this._movingAngle);wi.SetBboxChanged()}}_GetAngleOfMotion(){return this._movingAngle}_SetAcceleration(a){this._acc=Math.max(a,0)}_GetAcceleration(){return this._acc}_SetDeceleration(d){this._dec=\nMath.max(d,0)}_GetDeceleration(){return this._dec}_SetRotateSpeed(r){this._rotateSpeed=Math.max(r,0)}_GetRotateSpeed(){return this._rotateSpeed}_SetStopOnSolids(e){this._stopOnSolids=!!e}_IsStopOnSolids(){return this._stopOnSolids}_SetEnabled(e){e=!!e;if(this._isEnabled===e)return;this._isEnabled=e;if(this._isEnabled&&this._IsMoving())this._StartTicking();else this._StopTicking()}_IsEnabled(){return this._isEnabled}GetPropertyValueByIndex(index){switch(index){case PROP_MAX_SPEED:return this._GetMaxSpeed();\ncase PROP_ACCELERATION:return this._GetAcceleration();case PROP_DECELERATION:return this._GetDeceleration();case PROP_ROTATE_SPEED:return C3.toDegrees(this._GetRotateSpeed());case PROP_SET_ANGLE:return this._IsSetAngle();case PROP_STOP_ON_SOLIDS:return this._IsStopOnSolids();case PROP_ENABLED:return this._IsEnabled()}}SetPropertyValueByIndex(index,value){switch(index){case PROP_MAX_SPEED:this._SetMaxSpeed(value);break;case PROP_ACCELERATION:this._SetAcceleration(value);break;case PROP_DECELERATION:this._SetDeceleration(value);\nbreak;case PROP_ROTATE_SPEED:this._SetRotateSpeed(C3.toRadians(value));break;case PROP_SET_ANGLE:this._SetSetAngle(value);break;case PROP_STOP_ON_SOLIDS:this._SetStopOnSolids(value);break;case PROP_ENABLED:this._SetEnabled(value);break}}GetDebuggerProperties(){const prefix=\"behaviors.moveto\";return[{title:\"$\"+this.GetBehaviorType().GetName(),properties:[{name:prefix+\".debugger.speed\",value:this._GetSpeed(),onedit:v=>this._SetSpeed(v)},{name:prefix+\".debugger.angle-of-motion\",value:C3.toDegrees(this._GetAngleOfMotion()),\nonedit:v=>this._movingAngle=C3.toRadians(v)},{name:prefix+\".debugger.target-x\",value:this._GetTargetX()},{name:prefix+\".debugger.target-y\",value:this._GetTargetY()},{name:prefix+\".debugger.waypoint-count\",value:this._GetWaypointCount()},{name:prefix+\".properties.max-speed.name\",value:this._GetMaxSpeed(),onedit:v=>this._SetMaxSpeed(v)},{name:prefix+\".properties.acceleration.name\",value:this._GetAcceleration(),onedit:v=>this._SetAcceleration(v)},{name:prefix+\".properties.deceleration.name\",value:this._GetDeceleration(),\nonedit:v=>this._SetDeceleration(v)},{name:prefix+\".properties.rotate-speed.name\",value:C3.toDegrees(this._GetRotateSpeed()),onedit:v=>this._SetRotateSpeed(C3.toRadians(v))},{name:prefix+\".properties.enabled.name\",value:this._IsEnabled(),onedit:v=>this._SetEnabled(v)}]}]}GetScriptInterfaceClass(){return self.IMoveToBehaviorInstance}};const map=new WeakMap;self.IMoveToBehaviorInstance=class IMoveToBehaviorInstance extends IBehaviorInstance{constructor(){super();map.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}moveToPosition(x,\ny,isDirect=true){C3X.RequireFiniteNumber(x);C3X.RequireFiniteNumber(y);map.get(this)._AddWaypoint(x,y,!!isDirect)}getTargetX(){return map.get(this)._GetTargetX()}getTargetY(){return map.get(this)._GetTargetY()}getTargetPosition(){const b=map.get(this);return[b._GetTargetX(),b._GetTargetY()]}getWaypointCount(){return map.get(this)._GetWaypointCount()}getWaypointX(i){C3X.RequireFiniteNumber(i);return map.get(this)._GetWaypointXAt(i)}getWaypointY(i){C3X.RequireFiniteNumber(i);return map.get(this)._GetWaypointYAt(i)}getWaypoint(i){C3X.RequireFiniteNumber(i);\nconst b=map.get(this);return[b._GetWaypointXAt(i),b._GetWaypointYAt(i)]}stop(){map.get(this)._Stop()}get isMoving(){return map.get(this)._IsMoving()}get speed(){return map.get(this)._GetSpeed()}set speed(s){C3X.RequireFiniteNumber(s);map.get(this)._SetSpeed(s)}get maxSpeed(){return map.get(this)._GetMaxSpeed()}set maxSpeed(ms){C3X.RequireFiniteNumber(ms);map.get(this)._SetMaxSpeed(ms)}get acceleration(){return map.get(this)._GetAcceleration()}set acceleration(a){C3X.RequireFiniteNumber(a);map.get(this)._SetAcceleration(a)}get deceleration(){return map.get(this)._GetDeceleration()}set deceleration(d){C3X.RequireFiniteNumber(d);\nmap.get(this)._SetDeceleration(d)}get angleOfMotion(){return map.get(this)._GetAngleOfMotion()}set angleOfMotion(a){C3X.RequireFiniteNumber(a);map.get(this)._SetAngleOfMotion(a)}get rotateSpeed(){return map.get(this)._GetRotateSpeed()}set rotateSpeed(r){C3X.RequireFiniteNumber(r);map.get(this)._SetRotateSpeed(r)}get isStopOnSolids(){return map.get(this)._IsStopOnSolids()}set isStopOnSolids(e){map.get(this)._SetStopOnSolids(e)}get isEnabled(){return map.get(this)._IsEnabled()}set isEnabled(e){map.get(this)._SetEnabled(e)}}}\n{const C3=self.C3;C3.Behaviors.MoveTo.Cnds={IsMoving(){return this._IsMoving()},CompareSpeed(cmp,s){return C3.compare(this._GetSpeed(),cmp,s)},IsEnabled(){return this._IsEnabled()},OnArrived(){return true},OnHitSolid(){return true}}}\n{const C3=self.C3;C3.Behaviors.MoveTo.Acts={MoveToPosition(x,y,mode){this._AddWaypoint(x,y,mode===0)},MoveToObject(objectClass,imgPt,mode){if(!objectClass)return;const inst=objectClass.GetPairedInstance(this._inst);if(!inst||!inst.GetWorldInfo())return;const [x,y]=inst.GetImagePoint(imgPt);this._AddWaypoint(x,y,mode===0)},MoveAlongPathfindingPath(mode){const behInst=this._inst.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.Pathfinding);if(!behInst)return;const path=behInst._GetPath();if(path.length===\n0)return;for(let i=0,len=path.length;i<len;++i){const n=path[i];this._AddWaypoint(n.x,n.y,i===0&&mode===0)}},MoveAlongTimeline(timeline,trackId,mode){const timelineInfo=C3.New(C3.TimelineInfo,timeline,trackId);if(!timelineInfo.WasInitialized()){timelineInfo.Release();return}timelineInfo.SetOrigin(this._inst.GetWorldInfo());let first=true;for(const segment of timelineInfo.segments())switch(segment.GetType()){case \"line\":{const x=segment.GetX();const y=segment.GetY();this._AddWaypoint(x,y,first&&mode===\n0);first=false;break}case \"cubic-bezier\":{for(let i=0;i<=segment.GetStepCount();i++){const step=i*segment.GetStepIncrement();const p=segment.Map(step);const x=p[0];const y=p[1];this._AddWaypoint(x,y,first&&mode===0,{isBezier:true,isFirst:first,bezierPosition:segment._Map(step),bezierSegment:segment.GetIndex()});first=false}break}}this._timelineInfo=timelineInfo},MoveAlongTimelineByName(timelineName,trackId,mode){const timeline=this._runtime.GetTimelineManager().GetTimelineByName(timelineName);if(!timeline)return;\nC3.Behaviors.MoveTo.Acts.MoveAlongTimeline.call(this,timeline,trackId,mode)},Stop(){this._Stop()},SetMovingAngle(a){this._SetAngleOfMotion(C3.toRadians(a))},SetSpeed(s){this._SetSpeed(s)},SetMaxSpeed(ms){this._SetMaxSpeed(ms)},SetAcceleration(a){this._SetAcceleration(a)},SetDeceleration(d){this._SetDeceleration(d)},SetRotateSpeed(r){this._SetRotateSpeed(C3.toRadians(r))},SetStopOnSolids(e){this._SetStopOnSolids(e)},SetEnabled(e){this._SetEnabled(e)}}}\n{const C3=self.C3;C3.Behaviors.MoveTo.Exps={Speed(){return this._GetSpeed()},MaxSpeed(){return this._GetMaxSpeed()},Acceleration(){return this._GetAcceleration()},Deceleration(){return this._GetDeceleration()},MovingAngle(){return C3.toDegrees(this._GetAngleOfMotion())},RotateSpeed(){return C3.toDegrees(this._GetRotateSpeed())},TargetX(){return this._GetTargetX()},TargetY(){return this._GetTargetY()},WaypointCount(){return this._GetWaypointCount()},WaypointXAt(i){return this._GetWaypointXAt(i)},WaypointYAt(i){return this._GetWaypointYAt(i)}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Behaviors.Rotate=class RotateBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Behaviors.Rotate.Type=class RotateType extends C3.SDKBehaviorTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const C3X=self.C3X;const IBehaviorInstance=self.IBehaviorInstance;const SPEED=0;const ACCELERATION=1;const ENABLE=2;C3.Behaviors.Rotate.Instance=class RotateInstance extends C3.SDKBehaviorInstanceBase{constructor(inst,properties){super(inst);this._speed=0;this._acceleration=0;this._isEnabled=true;if(properties){this._speed=C3.toRadians(properties[SPEED]);this._acceleration=C3.toRadians(properties[ACCELERATION]);this._isEnabled=properties[ENABLE]}if(this._isEnabled)this._StartTicking()}Release(){super.Release()}_SetSpeed(s){this._speed=\ns}_GetSpeed(){return this._speed}_SetAcceleration(a){this._acceleration=a}_GetAcceleration(){return this._acceleration}SaveToJson(){return{\"s\":this._speed,\"a\":this._acceleration,\"e\":this._isEnabled}}LoadFromJson(o){this._speed=o[\"s\"];this._acceleration=o[\"a\"];this._SetEnabled(o[\"e\"])}Tick(){if(!this._isEnabled)return;const dt=this._runtime.GetDt(this._inst);if(dt===0)return;if(this._acceleration!==0)this._speed+=this._acceleration*dt;if(this._speed!==0){const wi=this._inst.GetWorldInfo();wi.SetAngle(wi.GetAngle()+\nthis._speed*dt);wi.SetBboxChanged()}}GetPropertyValueByIndex(index){switch(index){case SPEED:return C3.toDegrees(this._GetSpeed());case ACCELERATION:return C3.toDegrees(this._GetAcceleration());case ENABLE:return this._IsEnabled()}}SetPropertyValueByIndex(index,value){switch(index){case SPEED:this._SetSpeed(C3.toRadians(value));break;case ACCELERATION:this._SetAcceleration(C3.toRadians(value));break;case ENABLE:this._SetEnabled(value);break}}_SetEnabled(e){this._isEnabled=!!e;if(this._isEnabled)this._StartTicking();\nelse this._StopTicking()}_IsEnabled(){return this._isEnabled}GetDebuggerProperties(){const prefix=\"behaviors.rotate\";return[{title:\"$\"+this.GetBehaviorType().GetName(),properties:[{name:prefix+\".properties.speed.name\",value:C3.toDegrees(this._GetSpeed()),onedit:v=>this._SetSpeed(C3.toRadians(v))},{name:prefix+\".properties.acceleration.name\",value:C3.toDegrees(this._GetAcceleration()),onedit:v=>this._SetAcceleration(C3.toRadians(v))},{name:prefix+\".properties.enabled.name\",value:this._IsEnabled(),\nonedit:v=>this._SetEnabled(v)}]}]}GetScriptInterfaceClass(){return self.IRotateBehaviorInstance}};const map=new WeakMap;self.IRotateBehaviorInstance=class IRotateBehaviorInstance extends IBehaviorInstance{constructor(){super();map.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}set speed(s){C3X.RequireFiniteNumber(s);map.get(this)._SetSpeed(s)}get speed(){return map.get(this)._GetSpeed()}set acceleration(a){C3X.RequireFiniteNumber(a);map.get(this)._SetAcceleration(a)}get acceleration(){return map.get(this)._GetAcceleration()}get isEnabled(){return map.get(this)._IsEnabled()}set isEnabled(e){map.get(this)._SetEnabled(e)}}}\n{const C3=self.C3;C3.Behaviors.Rotate.Cnds={IsEnabled(){return this._IsEnabled()}}}{const C3=self.C3;C3.Behaviors.Rotate.Acts={SetSpeed(s){this._SetSpeed(C3.toRadians(s))},SetAcceleration(a){this._SetAcceleration(C3.toRadians(a))},SetEnabled(e){this._SetEnabled(e)}}}{const C3=self.C3;C3.Behaviors.Rotate.Exps={Speed(){return C3.toDegrees(this._GetSpeed())},Acceleration(){return C3.toDegrees(this._GetAcceleration())}}};\n\n}\n\n{\n\"use strict\";\n\n{\n\tconst C3 = self.C3;\n\t\n\tC3.Behaviors.CV_BoundedDragnDrop = class BoundedDragnDrop_Behavior extends C3.SDKBehaviorBase\n\t{\n\t\tconstructor(opts)\n\t\t{\n\t\t\tsuper(opts);\n\t\t\tconst b = this._runtime.Dispatcher();\n\t\t\tthis._disposables = new C3.CompositeDisposable(C3.Disposable.From(b, \"pointerdown\", (a)=>this._OnPointerDown(a.data)),C3.Disposable.From(b, \"pointermove\", (a)=>this._OnPointerMove(a.data)),C3.Disposable.From(b, \"pointerup\", (a)=>this._OnPointerUp(a.data, !1)),C3.Disposable.From(b, \"pointercancel\", (a)=>this._OnPointerUp(a.data, !0)))\n\t\t}\n\t\t\n\t\tRelease()\n\t\t{\n\t\t\tthis._disposables.Release(),\n\t\t\tthis._disposables = null,\n\t\t\tsuper.Release();\n\t\t}\n\n\t\t//-- Custom Class Functions :: Start\n\n\t\t_OnPointerDown(a) {\n\t\t\tthis._OnInputDown(a[\"pointerId\"].toString(), a[\"clientX\"] - this._runtime.GetCanvasClientX(), a[\"clientY\"] - this._runtime.GetCanvasClientY())\n\t\t}\n\t\t_OnPointerMove(a) {\n\t\t\tthis._OnInputMove(a[\"pointerId\"].toString(), a[\"clientX\"] - this._runtime.GetCanvasClientX(), a[\"clientY\"] - this._runtime.GetCanvasClientY())\n\t\t}\n\t\t_OnPointerUp(a) {\n\t\t\tthis._OnInputUp(a[\"pointerId\"].toString())\n\t\t}\n\t\tasync _OnInputDown(a, b, c) {\n\t\t\tconst d = this.GetInstances();\n\t\t\tlet e = null\n\t\t\t  , f = null\n\t\t\t  , g = 0\n\t\t\t  , h = 0;\n\t\t\tfor (const i of d) {\n\t\t\t\tconst a = i.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.CV_BoundedDragnDrop);\n\t\t\t\tif (!a.IsEnabled() || a.IsDragging())\n\t\t\t\t\tcontinue;\n\t\t\t\tconst d = i.GetWorldInfo()\n\t\t\t\t  , j = d.GetLayer()\n\t\t\t\t  , [k,l] = j.CanvasCssToLayer(b, c, d.GetTotalZElevation());\n\t\t\t\tif (!d.ContainsPoint(k, l))\n\t\t\t\t\tcontinue;\n\t\t\t\tif (!e) {\n\t\t\t\t\te = i,\n\t\t\t\t\tf = a,\n\t\t\t\t\tg = k,\n\t\t\t\t\th = l;\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tconst m = e.GetWorldInfo();\n\t\t\t\t(j.GetIndex() > m.GetLayer().GetIndex() || j.GetIndex() === m.GetLayer().GetIndex() && d.GetZIndex() > m.GetZIndex()) && (e = i,\n\t\t\t\tf = a,\n\t\t\t\tg = k,\n\t\t\t\th = l)\n\t\t\t}\n\t\t\te && (await f._OnDown(a,g,h))\n\t\t}\n\t\t_OnInputMove(a, b, c) {\n\t\t\tconst d = this.GetInstances();\n\t\t\tfor (const e of d) {\n\t\t\t\tconst d = e.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.CV_BoundedDragnDrop);\n\t\t\t\tif (!d.IsEnabled() || !d.IsDragging() || d.IsDragging() && d.GetDragSource() !== a)\n\t\t\t\t\tcontinue;\n\t\t\t\tconst f = e.GetWorldInfo()\n\t\t\t\t  , g = f.GetLayer()\n\t\t\t\t  , [h,i] = g.CanvasCssToLayer(b, c, f.GetTotalZElevation());\n\t\t\t\td._OnMove(h, i)\n\t\t\t}\n\t\t}\n\t\tasync _OnInputUp(a) {\n\t\t\tconst b = this.GetInstances();\n\t\t\tfor (const c of b) {\n\t\t\t\tconst b = c.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.CV_BoundedDragnDrop);\n\t\t\t\tb.IsDragging() && b.GetDragSource() === a && (await b._OnUp())\n\t\t\t}\n\t\t}\n\n\t\t//-- Custom Class Functions :: End\n\n\t};\n}\n}\n\n{\n\"use strict\";\n\n{\n\tconst C3 = self.C3;\n\t\n\tC3.Behaviors.CV_BoundedDragnDrop.Type = class BoundedDragnDrop_Type extends C3.SDKBehaviorTypeBase\n\t{\n\t\tconstructor(behaviorType)\n\t\t{\n\t\t\tsuper(behaviorType);\n\t\t}\n\t\t\n\t\tRelease()\n\t\t{\n\t\t\tsuper.Release();\n\t\t}\n\t\t\n\t\tOnCreate()\n\t\t{\t\n\t\t}\n\t};\n}\n}\n\n{\n\"use strict\";\n\n{\n\tconst C3 = self.C3;\n\t\n\tC3.Behaviors.CV_BoundedDragnDrop.Instance = class BoundedDragnDrop_Instance extends C3.SDKBehaviorInstanceBase\n\t{\n\t\tconstructor(behInst, properties)\n\t\t{\n\t\t\tsuper(behInst);\n\n\t\t\tconst WI = this._inst.GetWorldInfo();\n\n\t\t\t if (properties) \n\t\t\t {\n\t\t\t\tthis.axes = properties[0];\n\t\t\t\tthis.enabled = properties[1];\n\n\t\t\t\tthis.dragging = false;\n\t\t\t\tthis.dx = 0;\n\t\t\t\tthis.dy = 0;\n\t\t\t\tthis.dragsource = \"<none>\";\n\t\t\t\t\n\t\t\t\t// 0 = both, 1 = horizontal, 2 = vertical\n\t\t\t\tthis.axes = properties[0];\n\t\t\t\tthis.enabled = (properties[1] !== 0);\n\t\t\n\t\t\t\t// Start\n\t\t\t\t\t//user-defined\n\t\t\t\tthis.boundTo = properties[2];\n\t\t\t\tthis.boundBy = properties[3];\n\t\t\t\tthis.boundMethod = properties[4];\n\t\t\t\tthis.boundXRadius = properties[5];\n\t\t\t\tthis.boundYRadius = properties[6];\n\t\t\t\tthis.boundMinX = properties[7];\n\t\t\t\tthis.boundMaxX = properties[8];\n\t\t\t\tthis.boundMinY = properties[9];\n\t\t\t\tthis.boundMaxY = properties[10];\n\t\t\t\t\t//background\n\t\t\t\tthis.boundEnabled = false;\n\t\t\t\tthis.radiusBound = false;\n\t\t\t\tthis.posBound = false;\n\t\t\t\tthis.posX = WI.GetX();\n\t\t\t\tthis.posY = WI.GetY();\n\t\t\t\t\t//dedicated for expressions\n\t\t\t\tthis.radiusExceeded = false;\n\t\t\t\tthis.positionExceeded = false;\n\t\t\n\t\t\t\tthis.getBoundValues = function ()\n\t\t\t\t{\n\t\t\n\t\t\t\t\t//Off\n\t\t\t\t\tif (this.boundTo === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t\t//All (false)\n\t\t\t\t\t\t\tthis.boundEnabled = false;\n\t\t\t\t\t\t\tthis.radiusBound = false;\n\t\t\t\t\t\t\tthis.posBound = false;\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t//Both\n\t\t\t\t\telse if (this.boundTo === 1)\n\t\t\t\t\t{\n\t\t\n\t\t\t\t\t\t//Enable Bound (true)\n\t\t\t\t\t\tthis.boundEnabled = true;\n\t\t\n\t\t\t\t\t\t//Radius (true)\n\t\t\t\t\t\tif (this.boundXRadius !== 0 || this.boundYRadius !== 0)\t\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.radiusBound = true;\n\t\t\n\t\t\t\t\t\t\t//XAxis Adjust\n\t\t\t\t\t\t\tif(this.boundXRadius === 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.axes === 0 || this.axes === 1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.axes = 2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//YAxis Adjust\n\t\t\t\t\t\t\tif(this.boundYRadius === 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.axes === 0 || this.axes === 2)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.axes = 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\n\t\t\n\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\telse \n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.radiusBound = false;\n\t\t\t\t\t\t}\n\t\t\n\n\t\t\t\t\t\t//Position (true)\n\t\t\t\t\t\t\tthis.posBound = true;\n\t\t\n\t\t\t\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\t\t\telse if (this.boundTo === 2)\n\t\t\t\t\t{\n\t\t\n\t\t\t\t\t\tif (this.boundXRadius !== 0 || this.boundYRadius !== 0)\n\t\t\t\t\t\t\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//Enable Bound (true)\n\t\t\t\t\t\t\tthis.boundEnabled = true;\n\t\t\n\t\t\t\t\t\t\t//Radius (true)\n\t\t\t\t\t\t\tif (this.boundXRadius !== 0 || this.boundYRadius !== 0)\t\n\t\t\t\t\t\t\t{\n\t\t\n\t\t\t\t\t\t\t\tthis.radiusBound = true;\n\t\t\n\t\t\n\t\t\t\t\t\t\t\t//XAxis Adjust\n\t\t\t\t\t\t\t\tif(this.boundXRadius === 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (this.axes === 0 || this.axes === 1)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.axes = 2;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//YAxis Adjust\n\t\t\t\t\t\t\t\tif(this.boundYRadius === 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (this.axes === 0 || this.axes === 2)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.axes = 1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\n\t\t\n\t\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.radiusBound = false;\n\t\t\t\t\t\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\t\t\t\t\t//Position (false)\n\t\t\t\t\t\t\tthis.posBound = false;\n\t\t\n\t\t\t\t\t\t}\t\t\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\telse // (this.boundTo === 3)\n\t\t\t\t\t{\n\t\t\t\t\t\t\t//Enable Bound (true)\n\t\t\t\t\t\t\tthis.boundEnabled = true;\n\t\t\n\t\t\t\t\t\t\t//radius (false)\n\t\t\t\t\t\t\tthis.radiusBound = false;\n\t\t\n\t\t\t\t\t\t\t//position (true)\n\t\t\t\t\t\t\tthis.posBound = true;\n\t\t\t\t\t}\n\t\t\n\t\t\n\t\t\t\t}\n\t\t\n\t\t\t\tthis.getBoundValues();\n\n\t\t\t }\n\n\t\t\t this.inst = {\n\n\t\t\t\t get : {\n\t\t\t\t \tx : WI.GetX(),\n\t\t\t\t\ty : WI.GetY()\n\t\t\t\t },\n\n\t\t\t\t set : {\n\t\t\t\t\tx : function (a) { return WI.SetX(a) },\n\t\t\t\t\ty : function (b) { return WI.SetY(b) }\n\t\t\t\t },\n\n\t\t\t\t set_bbox_changed : function() \n\t\t\t\t {\n\t\t\t\t\tWI.SetBboxChanged();\n\t\t\t\t },\n\n\t\t\t\t hotspotX : WI.GetOriginX(),\n\n\t\t\t\t hotspotY : WI.GetOriginY(),\n\n\t\t\t\t width : WI.GetWidth(),\n\n\t\t\t\t height : WI.GetHeight()\n\n\t\t\t }\n\t\t}\n\n\t\tRelease()\n\t\t{\n\t\t\tsuper.Release();\n\t\t}\n\t\t\n\t\tSaveToJson()\n\t\t{\n\t\t\treturn {\n                \"a\" : this.axes,\n                \"e\" : this.enabled\n\t\t\t};\n\t\t}\n\n\t\tLoadFromJson(o)\n\t\t{\n\t\t\tthis.axes \t  = o[\"a\"]; \n\t\t\tthis.enabled  = o[\"e\"]; \n\t\t\tthis.dragging = false;\n\t\t}\n\t\t\n\t\t// -- Construct 3 Runtime -> Instancse Class Functions :: Start\n\n\t\tIsEnabled() \n\t\t{\n            return this.enabled;\n\t\t}\n\t\t\n\t\tIsDragging() \n\t\t{\n            return this.dragging;\n\t\t}\n\t\t\n\t\tGetDragSource() \n\t\t{\n            return this.dragsource;\n\t\t}\n\t\t\n\t\t// \"_ClassFunction\"s are Construct 3 Runtime  Custom Class Functions.\n\n\t\tasync _OnDown(a, b, c) \n\t\t{\n            const d = this.GetWorldInfo();\n\t\t\tthis.dx = b - d.GetX(); \n\t\t\tthis.dy = c - d.GetY(); \n\t\t\tthis.dragging = true;\n\t\t\tthis.dragsource = a; \n\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnDragStart);\n\t\t}\n\t\t\n\t\t_OnMove(x, y) \n\t\t{\n\t\t\tvar newx = x - this.dx;\n\t\t\tvar newy = y - this.dy;\n\n\t\t\t\t if (this.axes === 0)\t// both\n\t\t\t{\n\n\t\t\t\t//If one or more Bound values aren't 0.\n\t\t\t\tif (this.boundEnabled)\t\n\t\t\t\t{\n\t\t\t\t\t//origin\n\t\t\t\t\tif (this.boundBy === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t//Radius\n\t\t\t\t\t\tthis.limitLowX = this.posX - this.boundXRadius;\n\t\t\t\t\t\tthis.limitHighX = this.posX + this.boundXRadius;\n\t\t\t\t\t\tthis.limitLowY = this.posY - this.boundYRadius;\n\t\t\t\t\t\tthis.limitHighY = this.posY + this.boundYRadius;\n\t\t\t\t\t\t//Position\n\t\t\t\t\t\tthis.limitLowPosX = this.boundMinX;\n\t\t\t\t\t\tthis.limitHighPosX = this.boundMaxX;\n\t\t\t\t\t\tthis.limitLowPosY = this.boundMinY;\n\t\t\t\t\t\tthis.limitHighPosY = this.boundMaxY;\n\t\t\t\t\t\t//Boolean\n\t\t\t\t\t\tvar radiusClear = false;\n\t\t\t\t\t\tvar posClear = false;\n\n\t\t\t\t\t\t//Set Clearance\n\t\t\t\t\t\t//radiusBound clearance\n\t\t\t\t\t\tif (this.radiusBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newx < this.limitLowX || newx > this.limitHighX || newy < this.limitLowY || newy > this.limitHighY)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tradiusClear = false; //not necessary (redundant)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//radius Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnRadiusExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnRadiusExceeded);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//posBound clearance\n\t\t\t\t\t\tif (this.posBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newx < this.limitLowPosX || newx > this.limitHighPosX || newy < this.limitLowPosY || newy > this.limitHighPosY)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tposClear = false; //not necessary (redundant)\n\n\t\t\t\t\t\t\t\t//position Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnPositionExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnPositionExceeded);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t//Set New Position\n\t\t\t\t\t\t//BoundMethod = 'Halt'\n\t\t\t\t\t\tif (this.boundMethod === 0)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tif (radiusClear && posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.inst.get.x !== newx || this.inst.get.y !== newy)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.x(newx);\n\t\t\t\t\t\t\t\t\tthis.inst.set.y(newy);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//BoundMethod = 'Clamp'\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//!RadiusClear\n\t\t\t\t\t\t\tif (!radiusClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//RadiusX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//RadiusY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!PosClear\n\t\t\t\t\t\t\tif (!posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//PosX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//PosY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowPosY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighPosY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//New Position\n\n\t\t\t\t\t\t\tif (this.inst.get.x !== newx || this.inst.get.y !== newy)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.x(newx);\n\t\t\t\t\t\t\t\t\tthis.inst.set.y(newy);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//edge\n\t\t\t\t\telse \n\n\t\t\t\t\t{\n\t\t\t\t\t\t//Hotspot\n\t\t\t\t\t\tvar hotspotX = this.inst.hotspotX;\n\t\t\t\t\t\tvar hotspotY = this.inst.hotspotY;\n\n\t\t\t\t\t\tvar hotspotWidthLeft = (hotspotX * this.inst.width);\n\t\t\t\t\t\tvar hotspotWidthRight = ((1 - hotspotX) * this.inst.width);\n\n\t\t\t\t\t\tvar hotspotHeightTop = (hotspotY * this.inst.height);\n\t\t\t\t\t\tvar hotspotHeightBottom = ((1 - hotspotY) * this.inst.height);\n\n\t\t\t\t\t\t//Radius\n\t\t\t\t\t\tthis.limitLowX = (this.posX + hotspotWidthLeft) - this.boundXRadius;\n\t\t\t\t\t\tthis.limitHighX = (this.posX - hotspotWidthRight) + this.boundXRadius;\n\t\t\t\t\t\tthis.limitLowY = (this.posY + hotspotHeightTop) - this.boundYRadius;\n\t\t\t\t\t\tthis.limitHighY = (this.posY - hotspotHeightBottom) + this.boundYRadius;\n\t\t\t\t\t\t//Position\n\t\t\t\t\t\tthis.limitLowPosX = this.boundMinX + hotspotWidthLeft;\n\t\t\t\t\t\tthis.limitHighPosX = this.boundMaxX - hotspotWidthRight;\n\t\t\t\t\t\tthis.limitLowPosY = this.boundMinY + hotspotHeightTop;\n\t\t\t\t\t\tthis.limitHighPosY = this.boundMaxY - hotspotHeightBottom;\n\t\t\t\t\t\t//Boolean\n\t\t\t\t\t\tvar radiusClear = false;\n\t\t\t\t\t\tvar posClear = false;\n\t\t\t\t\t\t\n\n\t\t\t\t\t\t//Set New Position\n\n\t\t\t\t\t\t//Set Clearance\n\t\t\t\t\t\t//radiusBound clearance\n\t\t\t\t\t\tif (this.radiusBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newx < this.limitLowX || newx > this.limitHighX || newy < this.limitLowY || newy > this.limitHighY)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tradiusClear = false; //not necessary (redundant)\n\n\t\t\t\t\t\t\t\t//radius Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnRadiusExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnRadiusExceeded);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//posBound clearance\n\t\t\t\t\t\tif (this.posBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newx < this.limitLowPosX || newx > this.limitHighPosX || newy < this.limitLowPosY || newy > this.limitHighPosY)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tposClear = false; //not necessary (redundant)\n\n\t\t\t\t\t\t\t\t//position Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnPositionExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnPositionExceeded);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t//Set New Position\n\t\t\t\t\t\t//BoundMethod = 'Halt'\n\t\t\t\t\t\tif (this.boundMethod === 0)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tif (radiusClear && posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.inst.get.x !== newx || this.inst.get.y !== newy)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.x(newx);\n\t\t\t\t\t\t\t\t\tthis.inst.set.y(newy);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//BoundMethod = 'Clamp'\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//!RadiusClear\n\t\t\t\t\t\t\tif (!radiusClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//RadiusX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//RadiusY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!PosClear\n\t\t\t\t\t\t\tif (!posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//PosX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//PosY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowPosY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighPosY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//New Position\n\n\t\t\t\t\t\t\tif (this.inst.get.x !== newx || this.inst.get.y !== newy)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.x(newx);\n\t\t\t\t\t\t\t\t\tthis.inst.set.y(newy);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t//If all Bound values are 0.\n\t\t\t\telse\n\t\t\t\t{\n\n\n\t\t\t\t\tif (this.inst.get.x !== newx || this.inst.get.y !== newy)\t\n\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\tthis.inst.set.x(newx);\n\t\t\t\t\t\tthis.inst.set.y(newy);\n\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t\telse if (this.axes === 1)\t// horizontal\n\t\t\t{\t\t\t\t\n\t\t\t\t//If one or more Bound values aren't 0.\n\t\t\t\tif (this.boundEnabled)\t\n\t\t\t\t{\n\t\t\t\t\t//origin\n\t\t\t\t\tif (this.boundBy === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t//Radius\n\t\t\t\t\t\tthis.limitLowX = this.posX - this.boundXRadius;\n\t\t\t\t\t\tthis.limitHighX = this.posX + this.boundXRadius;\n\t\t\t\t\t\t//Position\n\t\t\t\t\t\tthis.limitLowPosX = this.boundMinX;\n\t\t\t\t\t\tthis.limitHighPosX = this.boundMaxX;\n\t\t\t\t\t\t//Boolean\n\t\t\t\t\t\tvar radiusClear = false;\n\t\t\t\t\t\tvar posClear = false;\n\n\t\t\t\t\t\t//Set Clearance\n\t\t\t\t\t\t//radiusBound clearance\n\t\t\t\t\t\tif (this.radiusBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newx < this.limitLowX || newx > this.limitHighX)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tradiusClear = false; //not necessary (redundant)\n\n\t\t\t\t\t\t\t\t//radius Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnRadiusExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnRadiusExceeded);\n\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//posBound clearance\n\t\t\t\t\t\tif (this.posBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newx < this.limitLowPosX || newx > this.limitHighPosX)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tposClear = false; //not necessary (redundant)\n\n\t\t\t\t\t\t\t\t//position Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnPositionExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnPositionExceeded);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t//Set New Position\n\t\t\t\t\t\t//BoundMethod = 'Halt'\n\t\t\t\t\t\tif (this.boundMethod === 0)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tif (radiusClear && posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.inst.get.x !== newx)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.x(newx);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//BoundMethod = 'Clamp'\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//!RadiusClear\n\t\t\t\t\t\t\tif (!radiusClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//RadiusX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//RadiusY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!PosClear\n\t\t\t\t\t\t\tif (!posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//PosX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//PosY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowPosY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighPosY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//New Position\n\n\t\t\t\t\t\t\tif (this.inst.get.x !== newx)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.x(newx);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//edge\n\t\t\t\t\telse \n\n\t\t\t\t\t{\n\n\t\t\t\t\t\t//Hotspot\n\t\t\t\t\t\tvar hotspotX = this.inst.hotspotX;\n\n\t\t\t\t\t\tvar hotspotWidthLeft = (hotspotX * this.inst.width);\n\t\t\t\t\t\tvar hotspotWidthRight = ((1 - hotspotX) * this.inst.width);\n\n\t\t\t\t\t\t//Radius\n\t\t\t\t\t\tthis.limitLowX = (this.posX + hotspotWidthLeft) - this.boundXRadius;\n\t\t\t\t\t\tthis.limitHighX = (this.posX - hotspotWidthRight) + this.boundXRadius;\n\t\t\t\t\t\t//Position\n\t\t\t\t\t\tthis.limitLowPosX = this.boundMinX + hotspotWidthLeft;\n\t\t\t\t\t\tthis.limitHighPosX = this.boundMaxX - hotspotWidthRight;\n\t\t\t\t\t\t//Boolean\n\t\t\t\t\t\tvar radiusClear = false;\n\t\t\t\t\t\tvar posClear = false;\n\n\t\t\t\t\t\t//Set New Position\n\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Set Clearance\n\t\t\t\t\t\t//radiusBound clearance\n\t\t\t\t\t\tif (this.radiusBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newx < this.limitLowX || newx > this.limitHighX)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tradiusClear = false; //not necessary (redundant)\n\n\t\t\t\t\t\t\t\t//radius Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnRadiusExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnRadiusExceeded);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//posBound clearance\n\t\t\t\t\t\tif (this.posBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newx < this.limitLowPosX || newx > this.limitHighPosX)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tposClear = false; //not necessary (redundant)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//position Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnPositionExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnPositionExceeded);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t//Set New Position\n\t\t\t\t\t\t//BoundMethod = 'Halt'\n\t\t\t\t\t\tif (this.boundMethod === 0)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tif (radiusClear && posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.inst.get.x !== newx)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.x(newx);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//BoundMethod = 'Clamp'\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//!RadiusClear\n\t\t\t\t\t\t\tif (!radiusClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//RadiusX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//RadiusY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!PosClear\n\t\t\t\t\t\t\tif (!posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//PosX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//PosY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowPosY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighPosY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//New Position\n\n\t\t\t\t\t\t\tif (this.inst.get.x !== newx)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.x(newx);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t//If all Bound values are 0.\n\t\t\t\telse\n\t\t\t\t{\n\n\n\t\t\t\t\tif (this.inst.get.x !== newx)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.inst.set.x(newx);\n\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t}\n\t\t\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\n\t\t\telse if (this.axes === 2)\t// vertical\n\t\t\t{\n\t\t\t\t//If one or more Bound values aren't 0.\n\t\t\t\tif (this.boundEnabled)\t\n\t\t\t\t{\n\t\t\t\t\t//origin\n\t\t\t\t\tif (this.boundBy === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t//Radius\n\t\t\t\t\t\tthis.limitLowY = this.posY - this.boundYRadius;\n\t\t\t\t\t\tthis.limitHighY = this.posY + this.boundYRadius;\n\t\t\t\t\t\t//Position\n\t\t\t\t\t\tthis.limitLowPosY = this.boundMinY;\n\t\t\t\t\t\tthis.limitHighPosY = this.boundMaxY;\n\t\t\t\t\t\t//Boolean\n\t\t\t\t\t\tvar radiusClear = false;\n\t\t\t\t\t\tvar posClear = false;\n\n\t\t\t\t\t\t//Set Clearance\n\t\t\t\t\t\t//radiusBound clearance\n\t\t\t\t\t\tif (this.radiusBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newy < this.limitLowY || newy > this.limitHighY)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tradiusClear = false; //not necessary (redundant)\n\n\t\t\t\t\t\t\t\t//radius Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnRadiusExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnRadiusExceeded);\n\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//posBound clearance\n\t\t\t\t\t\tif (this.posBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newy < this.limitLowPosY || newy > this.limitHighPosY)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tposClear = false; //not necessary (redundant)\n\n\t\t\t\t\t\t\t\t//position Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnPositionExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnPositionExceeded);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t//Set New Position\n\t\t\t\t\t\t//BoundMethod = 'Halt'\n\t\t\t\t\t\tif (this.boundMethod === 0)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tif (radiusClear && posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.inst.get.y !== newy)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.y(newy);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//BoundMethod = 'Clamp'\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//!RadiusClear\n\t\t\t\t\t\t\tif (!radiusClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//RadiusX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//RadiusY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!PosClear\n\t\t\t\t\t\t\tif (!posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//PosX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//PosY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowPosY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighPosY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//New Position\n\n\t\t\t\t\t\t\tif (this.inst.get.y !== newy)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.y(newy);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//edge\n\t\t\t\t\telse \n\n\t\t\t\t\t{\n\t\t\t\t\t\t//Hotspot\n\t\t\t\t\t\tvar hotspotY = this.inst.hotspotY;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tvar hotspotHeightTop = (hotspotY * this.inst.height);\n\t\t\t\t\t\tvar hotspotHeightBottom = ((1 - hotspotY) * this.inst.height);\n\n\t\t\t\t\t\t//Radius\n\t\t\t\t\t\tthis.limitLowY = (this.posY + hotspotHeightTop) - this.boundYRadius;\n\t\t\t\t\t\tthis.limitHighY = (this.posY - hotspotHeightBottom) + this.boundYRadius;\n\t\t\t\t\t\t//Position\n\t\t\t\t\t\tthis.limitLowPosY = this.boundMinY + hotspotHeightTop;\n\t\t\t\t\t\tthis.limitHighPosY = this.boundMaxY - hotspotHeightBottom;\n\t\t\t\t\t\t//Boolean\n\t\t\t\t\t\tvar radiusClear = false;\n\t\t\t\t\t\tvar posClear = false;\n\n\t\t\t\t\t\t//Set New Position\n\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Set Clearance\n\t\t\t\t\t\t//radiusBound clearance\n\t\t\t\t\t\tif (this.radiusBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newy < this.limitLowY || newy > this.limitHighY)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tradiusClear = false; //not necessary (redundant)\n\n\t\t\t\t\t\t\t\t//radius Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnRadiusExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnRadiusExceeded);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tradiusClear = true;\n\n\t\t\t\t\t\t\t//radius !Exceeded\n\t\t\t\t\t\t\tthis.radiusExceeded = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//posBound clearance\n\t\t\t\t\t\tif (this.posBound)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (newy < this.limitLowPosY || newy > this.limitHighPosY)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tposClear = false; //not necessary (redundant)\n\n\t\t\t\t\t\t\t\t//position Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = true;\n\n\t\t\t\t\t\t\t\t//OnAnyBoundExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnAnyBoundExceeded);\n\n\t\t\t\t\t\t\t\t//OnPositionExceeded conditional trigger\n\t\t\t\t\t\t\t\tthis.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnPositionExceeded);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tposClear = true;\n\n\t\t\t\t\t\t\t//position !Exceeded\n\t\t\t\t\t\t\tthis.positionExceeded = false;\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t//Set New Position\n\t\t\t\t\t\t//BoundMethod = 'Halt'\n\t\t\t\t\t\tif (this.boundMethod === 0)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tif (radiusClear && posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.inst.get.y !== newy)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.y(newy);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//BoundMethod = 'Clamp'\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//!RadiusClear\n\t\t\t\t\t\t\tif (!radiusClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//RadiusX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//RadiusY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!PosClear\n\t\t\t\t\t\t\tif (!posClear)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//PosX\n\t\t\t\t\t\t\t\tif (newx < this.limitLowPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitLowPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newx > this.limitHighPosX)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewx = this.limitHighPosX;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//PosY\n\t\t\t\t\t\t\t\tif (newy < this.limitLowPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitLowPosY;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (newy > this.limitHighPosY)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tnewy = this.limitHighPosY;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//New Position\n\n\t\t\t\t\t\t\tif (this.inst.get.y !== newy)\t\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.inst.set.y(newy);\n\t\t\t\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//If all Bound values are 0.\n\t\t\t\telse\n\t\t\t\t{\n\n\n\t\t\t\t\tif (this.inst.get.y !== newy)\t\n\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\tthis.inst.set.y(newy);\n\t\t\t\t\t\tthis.inst.set_bbox_changed();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n        }\n        _OnUp() {\n            this.dragging = !1, this.Trigger(C3.Behaviors.CV_BoundedDragnDrop.Cnds.OnDrop)\n        }\n        _GetPropertyValueByIndex(a) {\n            return a === 0 ? this.axes : 1 === a ? this.enabled : void 0\n        }\n        _SetPropertyValueByIndex(a, b) {\n            a === 0 ? this.axes = b : 1 === a ? this.enabled = !!b : void 0\n        }\n\n\t\t// -- Construct 3 Runtime -> Instancse Class Functions :: End\n\n\t};\n}\n}\n\n{\n\"use strict\";\n\n{\n\tconst C3 = self.C3;\n\t\n\tC3.Behaviors.CV_BoundedDragnDrop.Cnds =\n\t{\n\t\tIsDragging ()\n\t\t{\n\t\t\treturn this.dragging;\n\t\t},\n\t\t\n\t\tOnDragStart ()\n\t\t{\n\t\t\treturn true;\n\t\t},\n\t\t\n\t\tOnDrop ()\n\t\t{\n\t\t\treturn true;\n\t\t},\n\t\t\n\t\tIsEnabled ()\n\t\t{\n\t\t\treturn !!this.enabled;\n\t\t},\n\t\n\t\t// Start\n\t\n\t\tOnAnyBoundExceeded ()\n\t\t{\n\t\t\treturn true;\n\t\t},\n\t\n\t\tOnRadiusExceeded ()\n\t\t{\n\t\t\treturn true;\n\t\t},\n\t\n\t\tOnPositionExceeded ()\n\t\t{\n\t\t\treturn true;\n\t\t},\n\t\n\t\tIsRadiusExceeded ()\n\t\t{\n\t\t\treturn this.radiusExceeded;\t\n\t\t},\n\t\n\t\tIsPositionExceeded ()\n\t\t{\n\t\t\treturn this.positionExceeded;\n\t\t}\n\t};\n}\n}\n\n{\n\"use strict\";\n\n{\n\tconst C3 = self.C3;\n\t\n\tC3.Behaviors.CV_BoundedDragnDrop.Acts =\n\t{\n\t\tSetEnabled (s)\n\t\t{\n\t\t\tthis.enabled = (s !== 0);\n\t\t\t\n\t\t\t// Got disabled: cancel any drag\n\t\t\tif (!this.enabled)\n\t\t\t\tthis.dragging = false;\n\t\t},\n\t\t\n\t\tDrop ()\n\t\t{\n\t\t\tif (this.dragging)\n\t\t\t\tthis.onUp();\n\t\t},\n\t\n\t\t// Start\n\t\t\n\t\tSetBoundTo (boundTo)\n\t\t{\n\t\t\tthis.boundTo = boundTo;\n\t\n\t\t\tthis.getBoundValues();\n\t\t},\n\t\n\t\tSetBoundBy (boundBy)\n\t\t{\n\t\t\tthis.boundBy = boundBy;\n\t\n\t\t\tthis.getBoundValues();\n\t\t},\n\t\n\t\tSetBoundMethod (boundMethod)\n\t\t{\n\t\t\tthis.boundMethod = boundMethod;\n\t\n\t\t\t//this.getBoundValues();\n\t\t},\n\t\n\t\tSetXYRadius (x, y)\n\t\t{\n\t\t\tthis.boundXRadius = x;\n\t\t\tthis.boundYRadius = y;\n\t\n\t\t\tthis.getBoundValues();\n\t\t},\n\t\n\t\tSetXRadius (x)\n\t\t{\n\t\t\tthis.boundXRadius = x;\n\t\n\t\t\tthis.getBoundValues();\n\t\t},\n\t\n\t\tSetYRadius (y)\n\t\t{\n\t\t\tthis.boundYRadius = y;\n\t\n\t\t\tthis.getBoundValues();\n\t\t},\n\t\n\t\tSetBoundPosition (xI, xF, yI, yF)\n\t\t{\n\t\t\tthis.boundMinX = xI;\n\t\t\tthis.boundMaxX = xF;\n\t\t\tthis.boundMinY = yI;\n\t\t\tthis.boundMaxY = yF;\n\t\n\t\t\tthis.getBoundValues();\n\t\t},\n\t\n\t\tSetBoundX (xI, xF)\n\t\t{\n\t\t\tthis.boundMinX = xI;\n\t\t\tthis.boundMaxX = xF;\n\t\n\t\t\tthis.getBoundValues();\n\t\t},\n\t\n\t\tSetBoundY (yI, yF)\n\t\t{\n\t\t\tthis.boundMinY = yI;\n\t\t\tthis.boundMaxY = yF;\n\t\n\t\t\tthis.getBoundValues();\n\t\t},\n\t\n\t\tOverwriteOrigin (x, y)\n\t\t{\n\t\t\tthis.posX = x;\n\t\t\tthis.posY = y;\n\t\n\t\t\tthis.getBoundValues();\n\t\t}\n\t};\n}\n}\n\n{\n\"use strict\";\n\n{\n\tconst C3 = self.C3;\n\t\n\tC3.Behaviors.CV_BoundedDragnDrop.Exps =\n\t{\n\t\tBoundTo ()\n\t\t{\n\t\n\t\t\tvar boundToString;\n\t\n\t\t\tswitch(this.boundTo) \n\t\t\t\n\t\t\t{\n\t\n\t\t\t\tcase 0:\n\t\t\t\t\t\n\t\t\t\t\tboundToString = \"Off\";\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 1 : \n\t\n\t\t\t\t\tboundToString = \"Both\";\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 2 : \n\t\n\t\t\t\t\tboundToString = \"Radius\";\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcase 3 : \n\t\n\t\t\t\t\tboundToString = \"Position\";\n\t\t\t}\n\t\n\t\n\t\t\treturn (boundToString);\n\t\t},\n\t\n\t\tBoundBy ()\n\t\t{\n\t\n\t\t\tvar boundByString;\n\t\n\t\t\tswitch(this.boundBy) \n\t\t\t\n\t\t\t{\n\t\n\t\t\t\tcase 0:\n\t\t\t\t\t\n\t\t\t\t\tboundByString = \"Origin\";\n\t\t\t\t\tbreak;\t\t\n\t\t\t\t\t\n\t\t\t\tcase 1 : \n\t\n\t\t\t\t\tboundByString = \"Edge\";\n\t\n\t\t\t}\n\t\n\t\n\t\t\treturn (boundByString);\n\t\t},\n\t\n\t\tBoundMethod ()\n\t\t{\n\t\n\t\t\tvar boundMethodString;\n\t\n\t\t\tswitch(this.boundMethod) \n\t\t\t\n\t\t\t{\n\t\n\t\t\t\tcase 0:\n\t\t\t\t\t\n\t\t\t\t\tboundMethodString = \"Halt\";\n\t\t\t\t\tbreak;\t\t\n\t\t\t\t\t\n\t\t\t\tcase 1 : \n\t\n\t\t\t\t\tboundMethodString = \"Clamp\";\n\t\n\t\t\t}\n\t\n\t\n\t\t\treturn (boundMethodString);\n\t\t},\n\t\n\t\n\t\txBoundRadius ()\n\t\t{\n\t\t\treturn (this.boundXRadius);\n\t\t},\n\t\n\t\tyBoundRadius ()\n\t\t{\n\t\t\treturn (this.boundYRadius);\n\t\t},\n\t\n\t\txMinBoundPos ()\n\t\t{\n\t\t\treturn (this.boundMinX);\n\t\t},\n\t\n\t\txMaxBoundPos ()\n\t\t{\n\t\t\treturn (this.boundMaxX);\n\t\t},\n\t\n\t\tyMinBoundPos ()\n\t\t{\n\t\t\treturn (this.boundMinY);\n\t\t},\n\t\n\t\tyMaxBoundPos ()\n\t\t{\n\t\t\treturn (this.boundMaxY);\n\t\t},\n\t\n\t\txOrigin ()\n\t\t{\n\t\t\treturn (this.posX);\n\t\t},\n\t\n\t\tyOrigin ()\n\t\t{\n\t\t\treturn (this.posY);\n\t\t}\n\t};\n}\n}\n\n{\n'use strict';{const C3=self.C3;C3.Behaviors.Bullet=class BulletBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Behaviors.Bullet.Type=class BulletType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const C3X=self.C3X;const IBehaviorInstance=self.IBehaviorInstance;const SPEED=0;const ACCELERATION=1;const GRAVITY=2;const BOUNCE_OFF_SOLIDS=3;const SET_ANGLE=4;const STEPPING=5;const ENABLE=6;C3.Behaviors.Bullet.Instance=class BulletInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);const wi=this.GetWorldInfo();this._speed=0;this._acc=0;this._g=0;this._bounceOffSolid=false;this._setAngle=false;this._isStepping=false;this._isEnabled=true;this._dx=\n0;this._dy=0;this._lastX=wi.GetX();this._lastY=wi.GetY();this._lastKnownAngle=wi.GetAngle();this._travelled=0;this._stepSize=Math.min(Math.abs(wi.GetWidth()),Math.abs(wi.GetHeight())/2);this._stopStepping=false;if(properties){this._speed=properties[SPEED];this._acc=properties[ACCELERATION];this._g=properties[GRAVITY];this._bounceOffSolid=!!properties[BOUNCE_OFF_SOLIDS];this._setAngle=!!properties[SET_ANGLE];this._isStepping=!!properties[STEPPING];this._isEnabled=!!properties[ENABLE]}const a=wi.GetAngle();\nthis._dx=Math.cos(a)*this._speed;this._dy=Math.sin(a)*this._speed;if(this._isEnabled){this._StartTicking();if(this._bounceOffSolid)this._StartPostTicking()}}Release(){super.Release()}SaveToJson(){const o={\"dx\":this._dx,\"dy\":this._dy,\"lx\":this._lastX,\"ly\":this._lastY,\"lka\":this._lastKnownAngle,\"t\":this._travelled};if(this._acc!==0)o[\"acc\"]=this._acc;if(this._g!==0)o[\"g\"]=this._g;if(this._isStepping)o[\"st\"]=this._isStepping;if(!this._isEnabled)o[\"e\"]=this._isEnabled;if(this._bounceOffSolid)o[\"bos\"]=\nthis._bounceOffSolid;if(this._setAngle)o[\"sa\"]=this._setAngle;return o}LoadFromJson(o){this._dx=o[\"dx\"];this._dy=o[\"dy\"];this._lastX=o[\"lx\"];this._lastY=o[\"ly\"];this._lastKnownAngle=o[\"lka\"];this._travelled=o[\"t\"];this._acc=o.hasOwnProperty(\"acc\")?o[\"acc\"]:0;this._g=o.hasOwnProperty(\"g\")?o[\"g\"]:0;this._isStepping=o.hasOwnProperty(\"st\")?o[\"st\"]:false;this._bounceOffSolid=o.hasOwnProperty(\"bos\")?o[\"bos\"]:false;this._setAngle=o.hasOwnProperty(\"sa\")?o[\"sa\"]:false;this._SetEnabled(o.hasOwnProperty(\"e\")?\no[\"e\"]:true)}Tick(){if(!this._isEnabled)return;const dt=this._runtime.GetDt(this._inst);const wi=this._inst.GetWorldInfo();if(wi.GetAngle()!==this._lastKnownAngle){const angle=wi.GetAngle();if(this._setAngle){const s=C3.distanceTo(0,0,this._dx,this._dy);this._dx=Math.cos(angle)*s;this._dy=Math.sin(angle)*s}this._lastKnownAngle=angle}let xacc=0;let yacc=0;if(this._acc!==0){let s=C3.distanceTo(0,0,this._dx,this._dy);let a=0;if(this._dx===0&&this._dy===0)a=wi.GetAngle();else a=C3.angleTo(0,0,this._dx,\nthis._dy);s+=this._acc*dt;xacc=Math.cos(a)*this._acc;yacc=Math.sin(a)*this._acc;if(s<0){s=0;xacc=0;yacc=0}this._dx=Math.cos(a)*s;this._dy=Math.sin(a)*s}if(this._g!==0){this._dy+=this._g*dt;yacc+=this._g}this._lastX=wi.GetX();this._lastY=wi.GetY();if(this._dx!==0||this._dy!==0){const mx=this._dx*dt+.5*xacc*dt*dt;const my=this._dy*dt+.5*yacc*dt*dt;const stepDist=C3.distanceTo(0,0,mx,my);this._MoveBy(mx,my,stepDist);this._travelled+=stepDist;if(this._setAngle&&(mx!==0||my!==0)){const a=C3.angleTo(0,\n0,mx,my);wi.SetAngle(a);this._lastKnownAngle=wi.GetAngle()}wi.SetBboxChanged()}}_MoveBy(mx,my,stepDist){const wi=this.GetWorldInfo();if(!this._isStepping||stepDist<=this._stepSize){wi.OffsetXY(mx,my);wi.SetBboxChanged();if(this._isStepping)this.Trigger(C3.Behaviors.Bullet.Cnds.OnStep);return}this._stopStepping=false;const startX=wi.GetX();const startY=wi.GetY();const endX=startX+mx;const endY=startY+my;const a=C3.angleTo(0,0,mx,my);const stepX=Math.cos(a)*this._stepSize;const stepY=Math.sin(a)*this._stepSize;\nconst stepCount=Math.floor(stepDist/this._stepSize);for(let i=1;i<=stepCount;++i){wi.SetXY(startX+stepX*i,startY+stepY*i);wi.SetBboxChanged();this.Trigger(C3.Behaviors.Bullet.Cnds.OnStep);if(this._inst.IsDestroyed()||this._stopStepping)return}wi.SetXY(endX,endY);wi.SetBboxChanged();this.Trigger(C3.Behaviors.Bullet.Cnds.OnStep)}PostTick(){if(!this._isEnabled||!this._bounceOffSolid||this._dx===0&&this._dy===0)return;const dt=this._runtime.GetDt(this._inst);const wi=this._inst.GetWorldInfo();const collisionEngine=\nthis._runtime.GetCollisionEngine();const bounceSolid=collisionEngine.TestOverlapSolid(this._inst);if(bounceSolid){collisionEngine.RegisterCollision(this._inst,bounceSolid);const s=C3.distanceTo(0,0,this._dx,this._dy);const bounceAngle=collisionEngine.CalculateBounceAngle(this._inst,this._lastX,this._lastY);this._dx=Math.cos(bounceAngle)*s;this._dy=Math.sin(bounceAngle)*s;wi.OffsetXY(this._dx*dt,this._dy*dt);wi.SetBboxChanged();if(this._setAngle){wi.SetAngle(bounceAngle);this._lastKnownAngle=wi.GetAngle();\nwi.SetBboxChanged()}if(!collisionEngine.PushOutSolid(this._inst,this._dx/s,this._dy/s,Math.max(s*2.5*dt,30)))collisionEngine.PushOutSolidNearest(this._inst,100)}}GetPropertyValueByIndex(index){switch(index){case SPEED:return this._GetSpeed();case ACCELERATION:return this._GetAcceleration();case GRAVITY:return this._GetGravity();case SET_ANGLE:return this._setAngle;case STEPPING:return this._isStepping;case ENABLE:return this._IsEnabled()}}SetPropertyValueByIndex(index,value){switch(index){case SPEED:this._SetSpeed(value);\nbreak;case ACCELERATION:this._acc=value;break;case GRAVITY:this._g=value;break;case SET_ANGLE:this._setAngle=!!value;break;case STEPPING:this._isStepping=!!value;break;case ENABLE:this._SetEnabled(!!value);break}}_SetSpeed(s){const a=C3.angleTo(0,0,this._dx,this._dy);this._dx=Math.cos(a)*s;this._dy=Math.sin(a)*s}_GetSpeed(){return C3.roundToDp(C3.distanceTo(0,0,this._dx,this._dy),6)}_SetAcceleration(a){this._acc=a}_GetAcceleration(){return this._acc}_SetGravity(g){this._g=g}_GetGravity(){return this._g}_SetAngleOfMotion(a){const s=\nC3.distanceTo(0,0,this._dx,this._dy);this._dx=Math.cos(a)*s;this._dy=Math.sin(a)*s}_GetAngleOfMotion(){return C3.angleTo(0,0,this._dx,this._dy)}_SetBounceOffSolids(b){b=!!b;if(this._bounceOffSolid===b)return;this._bounceOffSolid=b;if(this._isEnabled)if(this._bounceOffSolid)this._StartPostTicking();else this._StopPostTicking()}_IsBounceOffSolids(){return this._bounceOffSolid}_SetDistanceTravelled(d){this._travelled=d}_GetDistanceTravelled(){return this._travelled}_SetEnabled(e){this._isEnabled=!!e;\nif(this._isEnabled){this._StartTicking();if(this._bounceOffSolid)this._StartPostTicking()}else{this._StopTicking();this._StopPostTicking()}}_IsEnabled(){return this._isEnabled}GetDebuggerProperties(){const prefix=\"behaviors.bullet\";return[{title:\"$\"+this.GetBehaviorType().GetName(),properties:[{name:prefix+\".debugger.vector-x\",value:this._dx,onedit:v=>this._dx=v},{name:prefix+\".debugger.vector-y\",value:this._dy,onedit:v=>this._dy=v},{name:prefix+\".properties.speed.name\",value:this._GetSpeed(),onedit:v=>\nthis._SetSpeed(v)},{name:prefix+\".debugger.angle-of-motion\",value:C3.toDegrees(this._GetAngleOfMotion())},{name:prefix+\".properties.gravity.name\",value:this._GetGravity(),onedit:v=>this._SetGravity(v)},{name:prefix+\".properties.acceleration.name\",value:this._GetAcceleration(),onedit:v=>this._SetAcceleration(v)},{name:prefix+\".debugger.distance-travelled\",value:this._GetDistanceTravelled()},{name:prefix+\".properties.enabled.name\",value:this._IsEnabled(),onedit:v=>this._SetEnabled(v)}]}]}GetScriptInterfaceClass(){return self.IBulletBehaviorInstance}};\nconst map=new WeakMap;self.IBulletBehaviorInstance=class IBulletBehaviorInstance extends IBehaviorInstance{constructor(){super();map.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}get speed(){return map.get(this)._GetSpeed()}set speed(s){C3X.RequireFiniteNumber(s);map.get(this)._SetSpeed(s)}get acceleration(){return map.get(this)._GetAcceleration()}set acceleration(a){C3X.RequireFiniteNumber(a);map.get(this)._SetAcceleration(a)}get gravity(){return map.get(this)._GetGravity()}set gravity(g){C3X.RequireFiniteNumber(g);\nmap.get(this)._SetGravity(g)}get angleOfMotion(){return map.get(this)._GetAngleOfMotion()}set angleOfMotion(a){C3X.RequireFiniteNumber(a);map.get(this)._SetAngleOfMotion(a)}get bounceOffSolids(){return map.get(this)._IsBounceOffSolids()}set bounceOffSolids(b){map.get(this)._SetBounceOffSolids(!!b)}get distanceTravelled(){return map.get(this)._GetDistanceTravelled()}set distanceTravelled(d){C3X.RequireFiniteNumber(d);map.get(this)._SetDistanceTravelled(d)}get isEnabled(){return map.get(this)._IsEnabled()}set isEnabled(e){map.get(this)._SetEnabled(e)}}}\n{const C3=self.C3;C3.Behaviors.Bullet.Cnds={CompareSpeed(cmp,s){const speed=Math.hypot(this._dx,this._dy);return C3.compare(speed,cmp,s)},CompareTravelled(cmp,d){return C3.compare(this._GetDistanceTravelled(),cmp,d)},OnStep(){return true},IsEnabled(){return this._IsEnabled()}}}\n{const C3=self.C3;C3.Behaviors.Bullet.Acts={SetSpeed(s){this._SetSpeed(s)},SetAcceleration(a){this._SetAcceleration(a)},SetGravity(g){this._SetGravity(g)},SetAngleOfMotion(a){this._SetAngleOfMotion(C3.toRadians(a))},Bounce(objectClass){if(!objectClass)return;const otherInst=objectClass.GetFirstPicked(this._inst);if(!otherInst)return;const wi=this._inst.GetWorldInfo();const collisionEngine=this._runtime.GetCollisionEngine();const dt=this._runtime.GetDt(this._inst);const s=C3.distanceTo(0,0,this._dx,\nthis._dy);const bounceAngle=collisionEngine.CalculateBounceAngle(this._inst,this._lastX,this._lastY,otherInst);this._dx=Math.cos(bounceAngle)*s;this._dy=Math.sin(bounceAngle)*s;wi.OffsetXY(this._dx*dt,this._dy*dt);wi.SetBboxChanged();if(this._setAngle){wi.SetAngle(bounceAngle);this._lastKnownAngle=wi.GetAngle();wi.SetBboxChanged()}if(s!==0)if(this._bounceOffSolid){if(!collisionEngine.PushOutSolid(this._inst,this._dx/s,this._dy/s,Math.max(s*2.5*dt,30)))collisionEngine.PushOutSolidNearest(this._inst,\n100)}else collisionEngine.PushOut(this._inst,this._dx/s,this._dy/s,Math.max(s*2.5*dt,30),otherInst)},SetBounceOffSolids(b){this._SetBounceOffSolids(b)},SetDistanceTravelled(d){this._SetDistanceTravelled(d)},SetEnabled(e){this._SetEnabled(e)},StopStepping(){this._stopStepping=true}}}\n{const C3=self.C3;C3.Behaviors.Bullet.Exps={Speed(){return this._GetSpeed()},Acceleration(){return this._GetAcceleration()},AngleOfMotion(){return C3.toDegrees(this._GetAngleOfMotion())},DistanceTravelled(){return this._GetDistanceTravelled()},Gravity(){return this._GetGravity()}}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Behaviors.bound=class BoundBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Behaviors.bound.Type=class BoundType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const MODE=0;C3.Behaviors.bound.Instance=class BoundInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._mode=0;if(properties)this._mode=properties[MODE];this._StartTicking2()}Release(){super.Release()}SaveToJson(){return{\"m\":this._mode}}LoadFromJson(o){this._mode=o[\"m\"]}Tick2(){const wi=this._inst.GetWorldInfo();const bbox=wi.GetBoundingBox();const layout=wi.GetLayout();let isChanged=false;if(this._mode===0){if(wi.GetX()<0){wi.SetX(0);\nisChanged=true}if(wi.GetY()<0){wi.SetY(0);isChanged=true}if(wi.GetX()>layout.GetWidth()){wi.SetX(layout.GetWidth());isChanged=true}if(wi.GetY()>layout.GetHeight()){wi.SetY(layout.GetHeight());isChanged=true}}else{if(bbox.getLeft()<0){wi.OffsetX(-bbox.getLeft());isChanged=true}if(bbox.getTop()<0){wi.OffsetY(-bbox.getTop());isChanged=true}if(bbox.getRight()>layout.GetWidth()){wi.OffsetX(-(bbox.getRight()-layout.GetWidth()));isChanged=true}if(bbox.getBottom()>layout.GetHeight()){wi.OffsetY(-(bbox.getBottom()-\nlayout.GetHeight()));isChanged=true}}if(isChanged)wi.SetBboxChanged()}GetPropertyValueByIndex(index){switch(index){case MODE:return this._mode}}SetPropertyValueByIndex(index,value){switch(index){case MODE:this._mode=value;break}}}}{const C3=self.C3;C3.Behaviors.bound.Cnds={}}{const C3=self.C3;C3.Behaviors.bound.Acts={}}{const C3=self.C3;C3.Behaviors.bound.Exps={}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Behaviors.solid=class SolidBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Behaviors.solid.Type=class SolidType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const C3X=self.C3X;const IBehaviorInstance=self.IBehaviorInstance;const ENABLE=0;const TAGS=1;const EMPTY_SET=new Set;C3.Behaviors.solid.Instance=class SolidInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this.SetEnabled(true);if(properties){this.SetEnabled(properties[ENABLE]);this.SetTags(properties[TAGS])}}Release(){super.Release()}SetEnabled(e){this._inst._SetSolidEnabled(!!e)}IsEnabled(){return this._inst._IsSolidEnabled()}SetTags(tagList){const savedDataMap=\nthis._inst.GetSavedDataMap();if(!tagList.trim()){savedDataMap.delete(\"solidTags\");return}let solidTags=savedDataMap.get(\"solidTags\");if(!solidTags){solidTags=new Set;savedDataMap.set(\"solidTags\",solidTags)}solidTags.clear();for(const tag of tagList.split(\" \"))if(tag)solidTags.add(tag.toLowerCase())}GetTags(){return this._inst.GetSavedDataMap().get(\"solidTags\")||EMPTY_SET}_GetTagsString(){return[...this.GetTags()].join(\" \")}SaveToJson(){return{\"e\":this.IsEnabled()}}LoadFromJson(o){this.SetEnabled(o[\"e\"])}GetPropertyValueByIndex(index){switch(index){case ENABLE:return this.IsEnabled()}}SetPropertyValueByIndex(index,\nvalue){switch(index){case ENABLE:this.SetEnabled(value);break}}GetDebuggerProperties(){return[{title:\"$\"+this.GetBehaviorType().GetName(),properties:[{name:\"behaviors.solid.properties.enabled.name\",value:this.IsEnabled(),onedit:v=>this.SetEnabled(v)},{name:\"behaviors.solid.properties.tags.name\",value:this._GetTagsString(),onedit:v=>this.SetTags(v)}]}]}GetScriptInterfaceClass(){return self.ISolidBehaviorInstance}};const map=new WeakMap;self.ISolidBehaviorInstance=class ISolidBehaviorInstance extends IBehaviorInstance{constructor(){super();\nmap.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}set isEnabled(e){map.get(this).SetEnabled(!!e)}get isEnabled(){return map.get(this).IsEnabled()}set tags(str){C3X.RequireString(str);map.get(this).SetTags(str)}get tags(){return map.get(this)._GetTagsString()}}}{const C3=self.C3;C3.Behaviors.solid.Cnds={IsEnabled(){return this.IsEnabled()}}}{const C3=self.C3;C3.Behaviors.solid.Acts={SetEnabled(e){this.SetEnabled(e)},SetTags(tagList){this.SetTags(tagList)}}}\n{const C3=self.C3;C3.Behaviors.solid.Exps={}};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Behaviors.DragnDrop=class DragnDropBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts);const rt=this._runtime.Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,\"pointerdown\",e=>this._OnPointerDown(e.data)),C3.Disposable.From(rt,\"pointermove\",e=>this._OnPointerMove(e.data)),C3.Disposable.From(rt,\"pointerup\",e=>this._OnPointerUp(e.data,false)),C3.Disposable.From(rt,\"pointercancel\",e=>this._OnPointerUp(e.data,true)))}Release(){this._disposables.Release();\nthis._disposables=null;super.Release()}_OnPointerDown(e){if(e[\"pointerType\"]===\"mouse\"&&e[\"button\"]!==0)return;this._OnInputDown(e[\"pointerId\"].toString(),e[\"pageX\"]-this._runtime.GetCanvasClientX(),e[\"pageY\"]-this._runtime.GetCanvasClientY())}_OnPointerMove(e){if((e[\"lastButtons\"]&1)!==0&&(e[\"buttons\"]&1)===0)this._OnInputUp(e[\"pointerId\"].toString());else this._OnInputMove(e[\"pointerId\"].toString(),e[\"pageX\"]-this._runtime.GetCanvasClientX(),e[\"pageY\"]-this._runtime.GetCanvasClientY())}_OnPointerUp(e,\nisCancel){if(e[\"pointerType\"]===\"mouse\"&&e[\"button\"]!==0)return;this._OnInputUp(e[\"pointerId\"].toString())}async _OnInputDown(src,clientX,clientY){const myInstances=this.GetInstances();let topMost=null;let topBehInst=null;let topX=0;let topY=0;for(const inst of myInstances){const behInst=inst.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.DragnDrop);if(!behInst.IsEnabled()||behInst.IsDragging()||inst.IsDestroyed())continue;const wi=inst.GetWorldInfo();const layer=wi.GetLayer();const [lx,ly]=layer.CanvasCssToLayer(clientX,\nclientY,wi.GetTotalZElevation());if(!layer.IsSelfAndParentsInteractive()||!wi.ContainsPoint(lx,ly))continue;if(!topMost){topMost=inst;topBehInst=behInst;topX=lx;topY=ly;continue}const topWi=topMost.GetWorldInfo();if(layer.GetIndex()>topWi.GetLayer().GetIndex()||layer.GetIndex()===topWi.GetLayer().GetIndex()&&wi.GetZIndex()>topWi.GetZIndex()){topMost=inst;topBehInst=behInst;topX=lx;topY=ly}}if(topMost)await topBehInst._OnDown(src,topX,topY)}_OnInputMove(src,clientX,clientY){const myInstances=this.GetInstances();\nfor(const inst of myInstances){const behInst=inst.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.DragnDrop);if(!behInst.IsEnabled()||!behInst.IsDragging()||behInst.IsDragging()&&behInst.GetDragSource()!==src)continue;const wi=inst.GetWorldInfo();const layer=wi.GetLayer();const [lx,ly]=layer.CanvasCssToLayer(clientX,clientY,wi.GetTotalZElevation());behInst._OnMove(lx,ly)}}async _OnInputUp(src){const myInstances=this.GetInstances();for(const inst of myInstances){const behInst=inst.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.DragnDrop);\nif(behInst.IsDragging()&&behInst.GetDragSource()===src)await behInst._OnUp()}}}}{const C3=self.C3;C3.Behaviors.DragnDrop.Type=class DragnDropType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const C3X=self.C3X;const IBehaviorInstance=self.IBehaviorInstance;const AXES=0;const ENABLE=1;C3.Behaviors.DragnDrop.Instance=class DragnDropInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._isDragging=false;this._dx=0;this._dy=0;this._dragSource=\"<none>\";this._axes=0;this._isEnabled=true;if(properties){this._axes=properties[AXES];this._isEnabled=properties[ENABLE]}}Release(){super.Release()}SaveToJson(){return{\"a\":this._axes,\"e\":this._isEnabled}}LoadFromJson(o){this._axes=\no[\"a\"];this._isEnabled=o[\"e\"];this._isDragging=false}_SetEnabled(e){this._isEnabled=!!e;if(!this._isEnabled)this._isDragging=false}IsEnabled(){return this._isEnabled}_SetAxes(a){this._axes=a}_GetAxes(){return this._axes}_Drop(){if(this._isDragging)this._OnUp()}IsDragging(){return this._isDragging}GetDragSource(){return this._dragSource}async _OnDown(src,x,y){const wi=this.GetWorldInfo();this._dx=x-wi.GetX();this._dy=y-wi.GetY();this._isDragging=true;this._dragSource=src;this.DispatchScriptEvent(\"dragstart\");\nawait this.TriggerAsync(C3.Behaviors.DragnDrop.Cnds.OnDragStart)}_OnMove(x,y){const wi=this.GetWorldInfo();const newX=x-this._dx;const newY=y-this._dy;if(this._axes===0){if(wi.GetX()!==newX||wi.GetY()!==newY){wi.SetXY(newX,newY);wi.SetBboxChanged()}}else if(this._axes===1){if(wi.GetX()!==newX){wi.SetX(newX);wi.SetBboxChanged()}}else if(this._axes===2)if(wi.GetY()!==newY){wi.SetY(newY);wi.SetBboxChanged()}}async _OnUp(){this._isDragging=false;this.DispatchScriptEvent(\"drop\");await this.TriggerAsync(C3.Behaviors.DragnDrop.Cnds.OnDrop)}GetPropertyValueByIndex(index){switch(index){case AXES:return this._GetAxes();\ncase ENABLE:return this.IsEnabled()}}SetPropertyValueByIndex(index,value){switch(index){case AXES:this._SetAxes(value);break;case ENABLE:this._SetEnabled(!!value);break}}GetDebuggerProperties(){const prefix=\"behaviors.dragndrop\";const axesPrefix=prefix+\".properties.axes\";let axesName=\"\";if(this._axes===0)axesName=axesPrefix+\".items.both\";else if(this._axes===1)axesName=axesPrefix+\".items.horizontal-only\";else if(this._axes===2)axesName=axesPrefix+\".items.vertical-only\";return[{title:\"$\"+this.GetBehaviorType().GetName(),\nproperties:[{name:prefix+\".debugger.is-dragging\",value:this.IsDragging()},{name:axesPrefix+\".name\",value:[axesName]},{name:prefix+\".properties.enabled.name\",value:this.IsEnabled(),onedit:v=>this._SetEnabled(v)}]}]}GetScriptInterfaceClass(){return self.IDragDropBehaviorInstance}};const map=new WeakMap;const VALID_AXES=[\"both\",\"horizontal\",\"vertical\"];self.IDragDropBehaviorInstance=class IDragDropBehaviorInstance extends IBehaviorInstance{constructor(){super();map.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}set axes(str){const a=\nVALID_AXES.indexOf(str);if(a===-1)throw new Error(\"invalid axes\");map.get(this)._SetAxes(a)}get axes(){return VALID_AXES[map.get(this)._GetAxes()]}drop(){map.get(this)._Drop()}get isDragging(){return map.get(this).IsDragging()}get isEnabled(){return map.get(this).IsEnabled()}set isEnabled(e){map.get(this)._SetEnabled(e)}}}{const C3=self.C3;C3.Behaviors.DragnDrop.Cnds={IsDragging(){return this.IsDragging()},OnDragStart(){return true},OnDrop(){return true},IsEnabled(){return this.IsEnabled()}}}\n{const C3=self.C3;C3.Behaviors.DragnDrop.Acts={SetEnabled(e){this._SetEnabled(!!e)},SetAxes(a){this._SetAxes(a)},Drop(){this._Drop()}}}{const C3=self.C3;C3.Behaviors.DragnDrop.Exps={}};\n\n}\n\n{\n'use strict';{const C3=self.C3;const C3X=self.C3X;let tempVec2a=null;let tempVec2b=null;let vec2RecycleCache=[];let Box2D=null;let physicsBehavior=null;const PHYSICS_COLLISIONS_KEY=\"Physics_DisabledCollisions\";function SetObjectTypeCollisionsEnabled(typeA,typeB,state){const savedA=typeA.GetSavedDataMap();const savedB=typeB.GetSavedDataMap();if(state){const setA=savedA.get(PHYSICS_COLLISIONS_KEY);if(setA)setA.delete(typeB.GetSID());const setB=savedB.get(PHYSICS_COLLISIONS_KEY);if(setB)setB.delete(typeA.GetSID())}else{let setA=\nsavedA.get(PHYSICS_COLLISIONS_KEY);if(!setA){setA=new Set;savedA.set(PHYSICS_COLLISIONS_KEY,setA)}let setB=savedB.get(PHYSICS_COLLISIONS_KEY);if(!setB){setB=new Set;savedB.set(PHYSICS_COLLISIONS_KEY,setB)}setA.add(typeB.GetSID());setB.add(typeA.GetSID())}}C3.Behaviors.Physics=class PhysicsBehavior extends C3.SDKBehaviorBase{constructor(opts){opts.scriptInterfaceClass=self.IPhysicsBehavior;super(opts);this._world=null;this._worldG=10;this._worldScale=.02;this._worldManifold=null;this._lastUpdateTick=\n-1;this._steppingMode=1;this._velocityIterations=8;this._positionIterations=3;this._allCollisionsEnabled=true;this._runtime.AddLoadPromise(this._LoadBox2DWasm())}async _LoadBox2DWasm(){const box2dWasmUrl=await this._runtime.GetAssetManager().GetProjectFileUrl(\"box2d.wasm\");await new Promise(resolve=>{self[\"Box2DWasmModule\"]({\"wasmBinaryFile\":box2dWasmUrl}).then(box2d=>{Box2D=box2d;this._InitBox2DWorld();resolve()})})}_InitBox2DWorld(){const collisionEngine=this._runtime.GetCollisionEngine();tempVec2a=\nC3.Behaviors.Physics.GetVec2(0,0);tempVec2b=C3.Behaviors.Physics.GetVec2(0,0);this._world=new Box2D[\"b2World\"](C3.Behaviors.Physics.GetTempVec2A(0,this._worldG),true);const listener=new Box2D[\"JSContactListener\"];listener[\"BeginContact\"]=contactPtr=>{const contact=Box2D[\"wrapPointer\"](contactPtr,Box2D[\"b2Contact\"]);const behA=C3.Behaviors.Physics.Instance.LookupBehInstFromBody(contact[\"GetFixtureA\"]()[\"GetBody\"]());const behB=C3.Behaviors.Physics.Instance.LookupBehInstFromBody(contact[\"GetFixtureB\"]()[\"GetBody\"]());\ncollisionEngine.RegisterCollision(behA.GetObjectInstance(),behB.GetObjectInstance())};listener[\"EndContact\"]=()=>{};listener[\"PreSolve\"]=()=>{};listener[\"PostSolve\"]=()=>{};this._world[\"SetContactListener\"](listener);const filter=new Box2D[\"JSContactFilter\"];filter[\"ShouldCollide\"]=(fixAPtr,fixBPtr)=>{if(this._allCollisionsEnabled)return true;const fixtureA=Box2D[\"wrapPointer\"](fixAPtr,Box2D[\"b2Fixture\"]);const fixtureB=Box2D[\"wrapPointer\"](fixBPtr,Box2D[\"b2Fixture\"]);const behA=C3.Behaviors.Physics.Instance.LookupBehInstFromBody(fixtureA[\"GetBody\"]());\nconst behB=C3.Behaviors.Physics.Instance.LookupBehInstFromBody(fixtureB[\"GetBody\"]());const typeA=behA.GetObjectInstance().GetObjectClass();const typeB=behB.GetObjectInstance().GetObjectClass();const sidA=typeA.GetSID();const sidB=typeB.GetSID();const setA=typeA.GetSavedDataMap().get(PHYSICS_COLLISIONS_KEY);if(setA&&setA.has(sidB))return false;const setB=typeB.GetSavedDataMap().get(PHYSICS_COLLISIONS_KEY);if(setB&&setB.has(sidA))return false;return true};this._world[\"SetContactFilter\"](filter);this._worldManifold=\nnew Box2D[\"b2WorldManifold\"]}Release(){super.Release()}GetBox2D(){return Box2D}GetWorld(){return this._world}GetWorldScale(){return this._worldScale}GetSteppingMode(){return this._steppingMode}SetSteppingMode(m){this._steppingMode=m}SetLastUpdateTick(t){this._lastUpdateTick=t}GetLastUpdateTick(){return this._lastUpdateTick}SetVelocityIterations(v){this._velocityIterations=Math.max(v,1)}GetVelocityIterations(){return this._velocityIterations}SetPositionIterations(p){this._positionIterations=Math.max(p,\n1)}GetPositionIterations(){return this._positionIterations}SetIterations(v,p){this.SetVelocityIterations(v);this.SetPositionIterations(p)}GetGravity(){return this._worldG}SetGravity(g){if(g===this._worldG)return;this._world[\"SetGravity\"](C3.Behaviors.Physics.GetTempVec2A(0,g));this._worldG=g;this._WakeUpAllPhysicsBodies()}_WakeUpAllPhysicsBodies(){for(const inst of this.GetInstances()){const behInst=C3.Behaviors.Physics.Instance.LookupBehInstFromInst(inst);if(!behInst)continue;const body=behInst.GetBody();\nif(!body)continue;body[\"SetAwake\"](true)}}DisableShouldCollideFastPath(){this._allCollisionsEnabled=false}SetCollisionsEnabled(typeA,typeB,state){state=!!state;if(!typeA||!typeB)return;if(typeB.IsFamily())for(const member of typeB.GetFamilyMembers())SetObjectTypeCollisionsEnabled(typeA,member,state);else SetObjectTypeCollisionsEnabled(typeA,typeB,state);this.DisableShouldCollideFastPath()}GetWorldManifold(){return this._worldManifold}static GetPhysicsCollisionKey(){return PHYSICS_COLLISIONS_KEY}static GetVec2(x,\ny){if(vec2RecycleCache.length){const ret=vec2RecycleCache.pop();ret[\"set_x\"](x);ret[\"set_y\"](y);return ret}else{const b2Vec2=Box2D[\"b2Vec2\"];return new b2Vec2(x,y)}}static FreeVec2(v){vec2RecycleCache.push(v)}static GetTempVec2A(x,y){tempVec2a[\"set_x\"](x);tempVec2a[\"set_y\"](y);return tempVec2a}static GetTempVec2B(x,y){tempVec2b[\"set_x\"](x);tempVec2b[\"set_y\"](y);return tempVec2b}static CreatePolygonShape(vertices){const b2PolygonShape=Box2D[\"b2PolygonShape\"];const shape=new b2PolygonShape;const buffer=\nBox2D[\"_malloc\"](vertices.length*8);let offset=0;for(let i=0;i<vertices.length;++i){Box2D[\"HEAPF32\"][buffer+offset>>2]=vertices[i][\"get_x\"]();Box2D[\"HEAPF32\"][buffer+(offset+4)>>2]=vertices[i][\"get_y\"]();offset+=8}const ptr_wrapped=Box2D[\"wrapPointer\"](buffer,Box2D[\"b2Vec2\"]);shape[\"Set\"](ptr_wrapped,vertices.length);Box2D[\"_free\"](buffer);return shape}};const STEPPING_MODES=[\"fixed\",\"variable\"];self.IPhysicsBehavior=class IPhysicsBehavior extends self.IBehavior{constructor(behavior){super(behavior);\nphysicsBehavior=behavior}set worldGravity(g){C3X.RequireFiniteNumber(g);physicsBehavior.SetGravity(g)}get worldGravity(){return physicsBehavior.GetGravity()}set steppingMode(s){const i=STEPPING_MODES.indexOf(s);if(i<0)throw new Error(\"invalid stepping mode\");physicsBehavior.SetSteppingMode(STEPPING_MODES[i])}get steppingMode(){return STEPPING_MODES[physicsBehavior.GetSteppingMode()]}set velocityIterations(v){C3X.RequireFiniteNumber(v);physicsBehavior.SetVelocityIterations(v)}get velocityIterations(){return physicsBehavior.GetVelocityIterations()}set positionIterations(p){C3X.RequireFiniteNumber(p);\nphysicsBehavior.SetPositionIterations(p)}get positionIterations(){return physicsBehavior.GetPositionIterations()}setCollisionsEnabled(iObjectClassA,iObjectClassB,state){const runtime=physicsBehavior.GetRuntime();const objectClassA=runtime._UnwrapIObjectClass(iObjectClassA);const objectClassB=runtime._UnwrapIObjectClass(iObjectClassB);state=!!state;physicsBehavior.SetCollisionsEnabled(objectClassA,objectClassB,state)}}}{const C3=self.C3;C3.Behaviors.Physics.Type=class PhysicsType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const C3X=self.C3X;const IBehaviorInstance=self.IBehaviorInstance;const assert=self.assert;const IMMOVABLE=0;const COLLISION_MASK=1;const PREVENT_ROTATION=2;const DENSITY=3;const FRICTION=4;const ELASTICITY=5;const LINEAR_DAMPING=6;const ANGULAR_DAMPING=7;const BULLET=8;const ENABLE=9;const body2beh=new WeakMap;const inst2beh=new WeakMap;const tileConvexPolyCache=new WeakMap;const TILE_FLIPPED_HORIZONTAL=-2147483648;const TILE_FLIPPED_VERTICAL=1073741824;const TILE_FLIPPED_DIAGONAL=\n536870912;const TILE_FLAGS_MASK=3758096384;const TILE_ID_MASK=536870911;const GetTempVec2A=C3.Behaviors.Physics.GetTempVec2A;const GetTempVec2B=C3.Behaviors.Physics.GetTempVec2B;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);C3.Behaviors.Physics.Instance=class PhysicsInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);const behavior=this.GetBehavior();const wi=this.GetWorldInfo();this._box2d=behavior.GetBox2D();this._world=behavior.GetWorld();\nthis._worldScale=behavior.GetWorldScale();this._isImmovable=false;this._collisionMask=0;this._actualCollisionMask=0;this._preventRotation=false;this._density=1;this._friction=.5;this._restitution=.2;this._linearDamping=0;this._angularDamping=.01;this._isBullet=false;this._isEnabled=true;this._body=null;this._fixtures=[];this._myJoints=[];this._myCreatedJoints=[];this._joiningMe=new Set;this._lastKnownX=wi.GetX();this._lastKnownY=wi.GetY();this._lastKnownAngle=wi.GetAngle();this._lastWidth=0;this._lastHeight=\n0;this._lastTickOverride=false;if(properties){this._isImmovable=!!properties[IMMOVABLE];this._collisionMask=properties[COLLISION_MASK];this._preventRotation=!!properties[PREVENT_ROTATION];this._density=properties[DENSITY];this._friction=properties[FRICTION];this._restitution=properties[ELASTICITY];this._linearDamping=properties[LINEAR_DAMPING];this._angularDamping=properties[ANGULAR_DAMPING];this._isBullet=!!properties[BULLET];this._isEnabled=!!properties[ENABLE]}const rt=this._runtime.Dispatcher();\nthis._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,\"instancedestroy\",e=>this._OnInstanceDestroyed(e.instance)),C3.Disposable.From(rt,\"beforeload\",()=>this._OnBeforeLoad()),C3.Disposable.From(rt,\"afterload\",()=>this._OnAfterLoad()));inst2beh.set(this._inst,this);if(this._isEnabled)this._StartTicking()}PostCreate(){this._CreateBody()}Release(){this._DestroyMyJoints();C3.clearArray(this._myCreatedJoints);this._joiningMe.clear();if(this._body){this._DestroyFixtures();this._world[\"DestroyBody\"](this._body);\nthis._body=null}super.Release()}_CreateFixture(fixDef){if(!this._body)return;const fixture=this._body[\"CreateFixture\"](fixDef);this._fixtures.push(fixture);return fixture}_DestroyFixtures(){if(!this._body)return;for(const fixture of this._fixtures)this._body[\"DestroyFixture\"](fixture);C3.clearArray(this._fixtures)}_GetBoundingQuadExcludingMesh(){const wi=this.GetWorldInfo();if(wi.HasMesh()){wi.CalculateBbox(tempRect,tempQuad,false);return tempQuad}else return wi.GetBoundingQuad()}_Destroy(o){this._box2d[\"destroy\"](o)}_CreateBody(){if(!this._isEnabled)return;\nconst b2FixtureDef=this._box2d[\"b2FixtureDef\"];const b2BodyDef=this._box2d[\"b2BodyDef\"];const wi=this.GetWorldInfo();const hasPoly=wi.HasOwnCollisionPoly();this._actualCollisionMask=this._collisionMask;if(!hasPoly&&!this._inst.HasTilemap()&&this._actualCollisionMask===0)this._actualCollisionMask=1;if(!this._body){const bodyDef=new b2BodyDef;bodyDef[\"set_type\"](this._isImmovable?0:2);let bodyX=wi.GetX()*this._worldScale;let bodyY=wi.GetY()*this._worldScale;if(this._actualCollisionMask===2){const bquad=\nthis._GetBoundingQuadExcludingMesh();bodyX=bquad.midX()*this._worldScale;bodyY=bquad.midY()*this._worldScale}bodyDef[\"set_position\"](GetTempVec2B(bodyX,bodyY));bodyDef[\"set_angle\"](wi.GetAngle());bodyDef[\"set_fixedRotation\"](this._preventRotation);bodyDef[\"set_linearDamping\"](this._linearDamping);bodyDef[\"set_angularDamping\"](this._angularDamping);bodyDef[\"set_bullet\"](this._isBullet);this._body=this._world[\"CreateBody\"](bodyDef);this._Destroy(bodyDef);body2beh.set(this._body,this)}this._DestroyFixtures();\nconst fixDef=new b2FixtureDef;fixDef[\"set_density\"](this._density);fixDef[\"set_friction\"](this._friction);fixDef[\"set_restitution\"](this._restitution);const instW=Math.max(Math.abs(wi.GetWidth()),1);const instH=Math.max(Math.abs(wi.GetHeight()),1);if(this._actualCollisionMask===0)if(this._inst.HasTilemap())this._CreateTilemapFixtures(fixDef);else this._CreatePolygonFixture(fixDef,instW,instH);else if(this._actualCollisionMask===1)this._CreateBoundingBoxFixture(fixDef,wi,instW,instH);else this._CreateCircleFixture(fixDef,\ninstW,instH);this._lastWidth=wi.GetWidth();this._lastHeight=wi.GetHeight();wi.SetPhysicsBodyChanged(false);this._Destroy(fixDef)}_CreateBoundingBoxFixture(fixDef,wi,instW,instH){const b2PolygonShape=this._box2d[\"b2PolygonShape\"];const shape=new b2PolygonShape;const fixWidth=instW*this._worldScale;const fixHeight=instH*this._worldScale;let originX=wi.GetOriginX();let originY=wi.GetOriginY();if(wi.GetWidth()<0)originX=1-originX;if(wi.GetHeight()<0)originY=1-originY;const fixOriginX=(.5-originX)*fixWidth;\nconst fixOriginY=(.5-originY)*fixHeight;const originVec=C3.Behaviors.Physics.GetVec2(fixOriginX,fixOriginY);shape[\"SetAsBox\"](fixWidth/2,fixHeight/2,originVec,0);fixDef[\"set_shape\"](shape);this._CreateFixture(fixDef);this._Destroy(shape);C3.Behaviors.Physics.FreeVec2(originVec)}_CreateCircleFixture(fixDef,instW,instH){const b2CircleShape=this._box2d[\"b2CircleShape\"];const shape=new b2CircleShape;shape[\"set_m_radius\"](Math.min(instW,instH)*this._worldScale*.5);fixDef[\"set_shape\"](shape);this._CreateFixture(fixDef);\nthis._Destroy(shape)}_CreatePolygonFixture(fixDef,instW,instH){const wi=this.GetWorldInfo();const isMirrored=wi.GetWidth()<0;const isFlipped=wi.GetHeight()<0;const worldScale=this._worldScale;const transformedPoly=wi.GetCustomTransformedCollisionPoly(isMirrored?-instW:instW,isFlipped?-instH:instH,0);const ptsArr=transformedPoly.pointsArr();const ptsCount=ptsArr.length/2;const arr=[];for(let i=0;i<ptsCount;++i)arr.push(C3.Behaviors.Physics.GetVec2(ptsArr[i*2],ptsArr[i*2+1]));if(isMirrored!==isFlipped)arr.reverse();\nconst convexPolys=C3.Behaviors.Physics.Separator.Separate(arr,instW*instH);for(const v of arr)C3.Behaviors.Physics.FreeVec2(v);if(convexPolys.length)for(const arr2 of convexPolys){for(const vec of arr2){vec[\"set_x\"](vec[\"get_x\"]()*worldScale);vec[\"set_y\"](vec[\"get_y\"]()*worldScale)}const shape=C3.Behaviors.Physics.CreatePolygonShape(arr2);fixDef[\"set_shape\"](shape);this._CreateFixture(fixDef);this._Destroy(shape);for(const v of arr2)C3.Behaviors.Physics.FreeVec2(v)}else this._CreateBoundingBoxFixture(fixDef,\nwi,instW,instH)}_CreateTilemapFixtures(fixDef){const worldScale=this._worldScale;const GetVec2=C3.Behaviors.Physics.GetVec2;const FreeVec2=C3.Behaviors.Physics.FreeVec2;const collRects=[];this._inst.GetSdkInstance().GetAllCollisionRects(collRects);const arr=[];for(let i=0,len=collRects.length;i<len;++i){const c=collRects[i];const rc=c.GetRect();const poly=c.GetPoly();if(poly){let convexPolys=tileConvexPolyCache.get(poly);if(!convexPolys){const ptsArr=poly.pointsArr();const ptsCount=poly.pointCount();\nfor(let j=0;j<ptsCount;++j)arr.push(GetVec2(ptsArr[j*2],ptsArr[j*2+1]));const flags=c.GetTileId()&TILE_FLAGS_MASK;if(flags===TILE_FLIPPED_HORIZONTAL||flags===TILE_FLIPPED_VERTICAL||flags===TILE_FLIPPED_DIAGONAL||flags&TILE_FLIPPED_HORIZONTAL&&flags&TILE_FLIPPED_VERTICAL&&flags&TILE_FLIPPED_DIAGONAL)arr.reverse();convexPolys=C3.Behaviors.Physics.Separator.Separate(arr,rc.width()*rc.height());tileConvexPolyCache.set(poly,convexPolys);for(const v of arr)FreeVec2(v);C3.clearArray(arr)}for(let j=0,lenj=\nconvexPolys.length;j<lenj;++j){const cp=convexPolys[j];for(let k=0,lenk=cp.length;k<lenk;++k)arr.push(GetVec2((rc.getLeft()+cp[k][\"get_x\"]())*worldScale,(rc.getTop()+cp[k][\"get_y\"]())*worldScale));const shape=C3.Behaviors.Physics.CreatePolygonShape(arr);fixDef[\"set_shape\"](shape);this._CreateFixture(fixDef);this._Destroy(shape);for(const v of arr)FreeVec2(v);C3.clearArray(arr)}}else{arr.push(GetVec2(rc.getLeft()*worldScale,rc.getTop()*worldScale));arr.push(GetVec2(rc.getRight()*worldScale,rc.getTop()*\nworldScale));arr.push(GetVec2(rc.getRight()*worldScale,rc.getBottom()*worldScale));arr.push(GetVec2(rc.getLeft()*worldScale,rc.getBottom()*worldScale));const shape=C3.Behaviors.Physics.CreatePolygonShape(arr);fixDef[\"set_shape\"](shape);this._CreateFixture(fixDef);this._Destroy(shape)}for(const v of arr)FreeVec2(v);C3.clearArray(arr)}}_DestroyBody(){if(!this._body)return;this._DestroyMyJoints();body2beh.delete(this._body);this._DestroyFixtures();this._world[\"DestroyBody\"](this._body);this._body=null}_DestroyMyJoints(){for(const joint of this._myJoints)this._world[\"DestroyJoint\"](joint);\nC3.clearArray(this._myJoints)}_RecreateMyJoints(){for(const j of this._myCreatedJoints)switch(j.type){case 0:this._DoCreateDistanceJoint(...j.params);break;case 1:this._DoCreateRevoluteJoint(...j.params);break;case 2:this._DoCreateLimitedRevoluteJoint(...j.params);break;case 3:this._DoCreatePrismaticJoint(...j.params);break;default:}}_GetInstImagePoint(imgPt){const wi=this.GetWorldInfo();if(imgPt===-1)return[wi.GetX(),wi.GetY()];if(imgPt===0&&this._body){const pos=this._body[\"GetPosition\"]();const lc=\nthis._body[\"GetLocalCenter\"]();return[(pos[\"get_x\"]()+lc[\"get_x\"]())/this._worldScale,(pos[\"get_y\"]()+lc[\"get_y\"]())/this._worldScale]}return this._inst.GetImagePoint(imgPt)}_CreateDistanceJoint(imgPt,otherInst,otherImgPt,damping,freq){if(!this._isEnabled||!otherInst||otherInst===this._inst)return;const otherBehInst=C3.Behaviors.Physics.Instance.LookupBehInstFromInst(otherInst);if(!otherBehInst||!otherBehInst._IsEnabled())return;this._myCreatedJoints.push({type:0,params:[imgPt,otherInst.GetUID(),\notherImgPt,damping,freq]});this._DoCreateDistanceJoint(imgPt,otherInst.GetUID(),otherImgPt,damping,freq)}_DoCreateDistanceJoint(imgPt,otherInstUid,otherImgPt,damping,freq){if(!this._isEnabled)return;const otherInst=this._runtime.GetInstanceByUID(otherInstUid);if(!otherInst||otherInst===this._inst)return;const otherBehInst=C3.Behaviors.Physics.Instance.LookupBehInstFromInst(otherInst);if(!otherBehInst||!otherBehInst._IsEnabled())return;otherBehInst._joiningMe.add(this._inst);this._UpdateBodyToMatchInstance(false);\notherBehInst._UpdateBodyToMatchInstance(false);const [myX,myY]=this._GetInstImagePoint(imgPt);const [theirX,theirY]=otherInst.GetImagePoint(otherImgPt);const dx=myX-theirX;const dy=myY-theirY;const b2DistanceJointDef=this._box2d[\"b2DistanceJointDef\"];const worldScale=this._worldScale;const jointDef=new b2DistanceJointDef;jointDef[\"Initialize\"](this._body,otherBehInst.GetBody(),GetTempVec2A(myX*worldScale,myY*worldScale),GetTempVec2B(theirX*worldScale,theirY*worldScale));jointDef[\"set_length\"](Math.hypot(dx,\ndy)*worldScale);jointDef[\"set_dampingRatio\"](damping);jointDef[\"set_frequencyHz\"](freq);this._myJoints.push(this._world[\"CreateJoint\"](jointDef));this._Destroy(jointDef)}_CreateRevoluteJoint(imgPt,otherInst){if(!this._isEnabled||!otherInst||otherInst===this._inst)return;const otherBehInst=C3.Behaviors.Physics.Instance.LookupBehInstFromInst(otherInst);if(!otherBehInst||!otherBehInst._IsEnabled())return;this._myCreatedJoints.push({type:1,params:[imgPt,otherInst.GetUID()]});this._DoCreateRevoluteJoint(imgPt,\notherInst.GetUID())}_DoCreateRevoluteJoint(imgPt,otherInstUid){if(!this._isEnabled)return;const otherInst=this._runtime.GetInstanceByUID(otherInstUid);if(!otherInst||otherInst===this._inst)return;const otherBehInst=C3.Behaviors.Physics.Instance.LookupBehInstFromInst(otherInst);if(!otherBehInst||!otherBehInst._IsEnabled())return;otherBehInst._joiningMe.add(this._inst);this._UpdateBodyToMatchInstance(false);otherBehInst._UpdateBodyToMatchInstance(false);const [myX,myY]=this._GetInstImagePoint(imgPt);\nconst b2RevoluteJointDef=this._box2d[\"b2RevoluteJointDef\"];const worldScale=this._worldScale;const jointDef=new b2RevoluteJointDef;jointDef[\"Initialize\"](this._body,otherBehInst.GetBody(),GetTempVec2A(myX*worldScale,myY*worldScale));this._myJoints.push(this._world[\"CreateJoint\"](jointDef));this._Destroy(jointDef)}_CreateLimitedRevoluteJoint(imgPt,otherInst,lower,upper){if(!this._isEnabled||!otherInst||otherInst===this._inst)return;const otherBehInst=C3.Behaviors.Physics.Instance.LookupBehInstFromInst(otherInst);\nif(!otherBehInst||!otherBehInst._IsEnabled())return;lower=C3.toDegrees(lower);upper=C3.toDegrees(upper);this._myCreatedJoints.push({type:2,params:[imgPt,otherInst.GetUID(),lower,upper]});this._DoCreateLimitedRevoluteJoint(imgPt,otherInst.GetUID(),lower,upper)}_DoCreateLimitedRevoluteJoint(imgPt,otherInstUid,lower,upper){if(!this._isEnabled)return;const otherInst=this._runtime.GetInstanceByUID(otherInstUid);if(!otherInst||otherInst===this._inst)return;const otherBehInst=C3.Behaviors.Physics.Instance.LookupBehInstFromInst(otherInst);\nif(!otherBehInst||!otherBehInst._IsEnabled())return;otherBehInst._joiningMe.add(this._inst);this._UpdateBodyToMatchInstance(false);otherBehInst._UpdateBodyToMatchInstance(false);const [myX,myY]=this._GetInstImagePoint(imgPt);const b2RevoluteJointDef=this._box2d[\"b2RevoluteJointDef\"];const worldScale=this._worldScale;const jointDef=new b2RevoluteJointDef;jointDef[\"Initialize\"](this._body,otherBehInst.GetBody(),GetTempVec2A(myX*worldScale,myY*worldScale));jointDef[\"set_enableLimit\"](true);jointDef[\"set_lowerAngle\"](C3.toRadians(lower));\njointDef[\"set_upperAngle\"](C3.toRadians(upper));this._myJoints.push(this._world[\"CreateJoint\"](jointDef));this._Destroy(jointDef)}_CreatePrismaticJoint(imgPt,otherInst,axisAngle,enableLimit,lowerTranslation,upperTranslation,enableMotor,motorSpeed,maxMotorForce){if(!this._isEnabled||!otherInst||otherInst===this._inst)return;const otherBehInst=C3.Behaviors.Physics.Instance.LookupBehInstFromInst(otherInst);if(!otherBehInst||!otherBehInst._IsEnabled())return;axisAngle=C3.toDegrees(axisAngle);motorSpeed=\nC3.toDegrees(motorSpeed);this._myCreatedJoints.push({type:3,params:[imgPt,otherInst.GetUID(),axisAngle,enableLimit,lowerTranslation,upperTranslation,enableMotor,motorSpeed,maxMotorForce]});this._DoCreatePrismaticJoint(imgPt,otherInst.GetUID(),axisAngle,enableLimit,lowerTranslation,upperTranslation,enableMotor,motorSpeed,maxMotorForce)}_DoCreatePrismaticJoint(imgPt,otherInstUid,axisAngle,enableLimit,lowerTranslation,upperTranslation,enableMotor,motorSpeed,maxMotorForce){if(!this._isEnabled)return;\nconst otherInst=this._runtime.GetInstanceByUID(otherInstUid);if(!otherInst||otherInst===this._inst)return;const otherBehInst=C3.Behaviors.Physics.Instance.LookupBehInstFromInst(otherInst);if(!otherBehInst||!otherBehInst._IsEnabled())return;otherBehInst._joiningMe.add(this._inst);this._UpdateBodyToMatchInstance(false);otherBehInst._UpdateBodyToMatchInstance(false);const [myX,myY]=this._GetInstImagePoint(imgPt);axisAngle=C3.toRadians(axisAngle);const axisX=Math.cos(axisAngle);const axisY=Math.sin(axisAngle);\nconst b2PrismaticJointDef=this._box2d[\"b2PrismaticJointDef\"];const worldScale=this._worldScale;const jointDef=new b2PrismaticJointDef;jointDef[\"Initialize\"](this._body,otherBehInst.GetBody(),GetTempVec2A(myX*worldScale,myY*worldScale),GetTempVec2B(axisX,axisY));jointDef[\"set_enableLimit\"](!!enableLimit);jointDef[\"set_lowerTranslation\"](lowerTranslation*worldScale);jointDef[\"set_upperTranslation\"](upperTranslation*worldScale);jointDef[\"set_enableMotor\"](!!enableMotor);jointDef[\"set_motorSpeed\"](C3.toRadians(motorSpeed));\njointDef[\"set_maxMotorForce\"](maxMotorForce);this._myJoints.push(this._world[\"CreateJoint\"](jointDef));this._Destroy(jointDef)}_RemoveJoints(){if(!this._isEnabled)return;this._DestroyMyJoints();C3.clearArray(this._myCreatedJoints);this._joiningMe.clear()}_RemoveOtherInstanceJointsToMe(){for(const otherInst of this._joiningMe){const otherBehInst=C3.Behaviors.Physics.Instance.LookupBehInstFromInst(otherInst);if(!otherBehInst||!otherBehInst._IsEnabled())return;otherBehInst._DestroyJointsForInstance(this._inst)}this._joiningMe.clear()}_OnInstanceDestroyed(inst){this._DestroyJointsForInstance(inst)}_DestroyJointsForInstance(inst){const instUid=\ninst.GetUID();let j=0;for(let i=0,len=this._myCreatedJoints.length;i<len;++i){this._myCreatedJoints[j]=this._myCreatedJoints[i];if(j<this._myJoints.length)this._myJoints[j]=this._myJoints[i];if(this._myCreatedJoints[i].params[1]===instUid){if(i<this._myJoints.length)this._world[\"DestroyJoint\"](this._myJoints[i])}else++j}C3.truncateArray(this._myCreatedJoints,j);if(j<this._myJoints.length)C3.truncateArray(this._myJoints,j);this._joiningMe.delete(inst)}GetBody(){return this._body}static LookupBehInstFromBody(body){return body2beh.get(body)||\nnull}static LookupBehInstFromInst(inst){return inst2beh.get(inst)||null}SaveToJson(){const ret={\"e\":this._isEnabled,\"im\":this._isImmovable,\"pr\":this._preventRotation,\"d\":this._density,\"fr\":this._friction,\"re\":this._restitution,\"ld\":this._linearDamping,\"ad\":this._angularDamping,\"b\":this._isBullet,\"mcj\":this._myCreatedJoints};if(this._isEnabled){const v=this._body[\"GetLinearVelocity\"]();ret[\"vx\"]=v[\"get_x\"]();ret[\"vy\"]=v[\"get_y\"]();ret[\"om\"]=this._body[\"GetAngularVelocity\"]()}return ret}_OnBeforeLoad(){this._DestroyMyJoints();\nC3.clearArray(this._myCreatedJoints);this._joiningMe.clear()}LoadFromJson(o){this._DestroyBody();this._isEnabled=o[\"e\"];if(o.hasOwnProperty(\"im\"))this._isImmovable=!!o[\"im\"];this._preventRotation=o[\"pr\"];this._density=o[\"d\"];this._friction=o[\"fr\"];this._restitution=o[\"re\"];this._linearDamping=o[\"ld\"];this._angularDamping=o[\"ad\"];this._isBullet=o[\"b\"];this._myCreatedJoints=o[\"mcj\"];const wi=this.GetWorldInfo();this._lastKnownX=wi.GetX();this._lastKnownY=wi.GetY();this._lastKnownAngle=wi.GetAngle();\nthis._lastWidth=wi.GetWidth();this._lastHeight=wi.GetHeight();if(this._isEnabled){this._CreateBody();this._body[\"SetLinearVelocity\"](GetTempVec2A(o[\"vx\"],o[\"vy\"]));this._body[\"SetAngularVelocity\"](o[\"om\"]);if(o[\"vx\"]!==0||o[\"vy\"]!==0||o[\"om\"]!==0)this._body[\"SetAwake\"](true);this._myCreatedJoints=o[\"mcj\"]}if(this._isEnabled)this._StartTicking();else this._StopTicking()}_OnAfterLoad(){if(this._isEnabled)this._RecreateMyJoints()}Tick(){if(!this._isEnabled)return;const runtime=this._runtime;const behavior=\nthis.GetBehavior();let dt=0;if(behavior.GetSteppingMode()===0)dt=runtime.GetTimeScale()/60;else{dt=runtime.GetDt(this._inst);if(dt>1/30)dt=1/30}const tickCount=runtime.GetTickCountNoSave();if(tickCount>behavior.GetLastUpdateTick()&&runtime.GetTimeScale()>0){const isDebug=this._runtime.IsDebug();let startTime=0;if(isDebug)startTime=performance.now();if(dt!==0)this._world[\"Step\"](dt,behavior.GetVelocityIterations(),behavior.GetPositionIterations());this._world[\"ClearForces\"]();if(isDebug)self.C3Debugger.AddPhysicsTime(performance.now()-\nstartTime);behavior.SetLastUpdateTick(tickCount)}this._UpdateBodyToMatchInstance(true)}_UpdateBodyToMatchInstance(isTickUpdate){const inst=this._inst;const wi=inst.GetWorldInfo();const worldScale=this._worldScale;if(wi.GetWidth()!==this._lastWidth||wi.GetHeight()!==this._lastHeight||wi.IsPhysicsBodyChanged())this._CreateBody();const body=this._body;const curX=wi.GetX();const curY=wi.GetY();const diffX=curX-this._lastKnownX;const diffY=curY-this._lastKnownY;const POS_EPSILON=.001;const posChanged=\nMath.abs(diffX)>POS_EPSILON||Math.abs(diffY)>POS_EPSILON;const angleChanged=wi.GetAngle()!==this._lastKnownAngle;let newBodyX=curX;let newBodyY=curY;if(this._actualCollisionMask===2){const bquad=this._GetBoundingQuadExcludingMesh();newBodyX=bquad.midX();newBodyY=bquad.midY()}if(posChanged){if(angleChanged)body[\"SetTransform\"](GetTempVec2A(newBodyX*worldScale,newBodyY*worldScale),wi.GetAngle());else body[\"SetTransform\"](GetTempVec2A(newBodyX*worldScale,newBodyY*worldScale),body[\"GetAngle\"]());if(isTickUpdate){body[\"SetLinearVelocity\"](GetTempVec2A(diffX,\ndiffY));this._lastTickOverride=true}body[\"SetAwake\"](true)}else if(isTickUpdate&&this._lastTickOverride){this._lastTickOverride=false;body[\"SetLinearVelocity\"](GetTempVec2A(0,0));body[\"SetTransform\"](GetTempVec2A(newBodyX*worldScale,newBodyY*worldScale),body[\"GetAngle\"]())}if(!posChanged&&angleChanged){body[\"SetTransform\"](body[\"GetPosition\"](),wi.GetAngle());body[\"SetAwake\"](true)}const pos=body[\"GetPosition\"]();const newX=pos[\"get_x\"]()/worldScale;const newY=pos[\"get_y\"]()/worldScale;const newAngle=\nbody[\"GetAngle\"]();if(newX!==wi.GetX()||newY!==wi.GetY()||newAngle!==wi.GetAngle()){wi.SetXY(newX,newY);wi.SetAngle(newAngle);wi.SetBboxChanged();if(this._actualCollisionMask===2){const bquad=this._GetBoundingQuadExcludingMesh();const dx=bquad.midX()-wi.GetX();const dy=bquad.midY()-wi.GetY();if(dx!==0||dy!==0){wi.OffsetXY(-dx,-dy);wi.SetBboxChanged()}}}this._lastKnownX=wi.GetX();this._lastKnownY=wi.GetY();this._lastKnownAngle=wi.GetAngle()}GetPropertyValueByIndex(index){switch(index){case PREVENT_ROTATION:return this._IsPreventRotate();\ncase DENSITY:return this._GetDensity();case FRICTION:return this._GetFriction();case ELASTICITY:return this._GetElasticity();case LINEAR_DAMPING:return this._GetLinearDamping();case ANGULAR_DAMPING:return this._GetAngularDamping();case BULLET:return this._IsBullet();case ENABLE:return this._IsEnabled()}}SetPropertyValueByIndex(index,value){switch(index){case PREVENT_ROTATION:this._SetPreventRotate(value);break;case DENSITY:this._SetDensity(value);break;case FRICTION:this._SetFriction(value);break;\ncase ELASTICITY:this._SetElasticity(value);break;case LINEAR_DAMPING:this._SetLinearDamping(value);break;case ANGULAR_DAMPING:this._SetAngularDamping(value);break;case BULLET:this._SetBullet(value);break;case ENABLE:this._SetEnabled(value);break}}_SetEnabled(e){e=!!e;if(this._isEnabled&&!e){this._RemoveOtherInstanceJointsToMe();this._DestroyBody();this._isEnabled=false;this._StopTicking()}else if(!this._isEnabled&&e){this._isEnabled=true;this._CreateBody();this._StartTicking()}}_IsEnabled(){return this._isEnabled}GetDebuggerProperties(){const prefix=\n\"behaviors.physics\";const props=[{name:prefix+\".properties.enabled.name\",value:this._IsEnabled(),onedit:v=>this._SetEnabled(v)},{name:prefix+\".properties.immovable.name\",value:this._IsImmovable(),onedit:v=>this._SetImmovable(v)},{name:prefix+\".properties.density.name\",value:this._GetDensity(),onedit:v=>this._SetDensity(v)},{name:prefix+\".properties.friction.name\",value:this._GetFriction(),onedit:v=>this._SetFriction(v)},{name:prefix+\".properties.elasticity.name\",value:this._GetElasticity(),onedit:v=>\nthis._SetElasticity(v)},{name:prefix+\".properties.linear-damping.name\",value:this._GetLinearDamping(),onedit:v=>this._SetLinearDamping(v)},{name:prefix+\".properties.angular-damping.name\",value:this._GetAngularDamping(),onedit:v=>this._SetAngularDamping(v)}];if(this._isEnabled){props.push({name:prefix+\".debugger.is-sleeping\",value:this._IsSleeping()});props.push({name:prefix+\".debugger.velocity-x\",value:this._GetVelocityX(),onedit:v=>this._SetVelocity(v,this._GetVelocityY())});props.push({name:prefix+\n\".debugger.velocity-y\",value:this._GetVelocityY(),onedit:v=>this._SetVelocity(this._GetVelocityX(),v)});props.push({name:prefix+\".debugger.angular-velocity\",value:C3.toDegrees(this._GetAngularVelocity()),onedit:v=>this._SetAngularVelocity(C3.toRadians(v))});props.push({name:prefix+\".debugger.mass\",value:this._GetMass()})}return[{title:\"$\"+this.GetBehaviorType().GetName(),properties:props}]}_ApplyForce(fx,fy,imgPt){const [x,y]=this._GetInstImagePoint(imgPt);this._DoApplyForce(fx,fy,x,y)}_ApplyForceToward(f,\npx,py,imgPt){const [x,y]=this._GetInstImagePoint(imgPt);const a=C3.angleTo(x,y,px,py);this._DoApplyForce(Math.cos(a)*f,Math.sin(a)*f,x,y)}_ApplyForceAtAngle(f,a,imgPt){const [x,y]=this._GetInstImagePoint(imgPt);this._DoApplyForce(Math.cos(a)*f,Math.sin(a)*f,x,y)}_DoApplyForce(fx,fy,ox,oy){if(!this._isEnabled)return;const worldScale=this._worldScale;this._body[\"ApplyForce\"](GetTempVec2A(fx,fy),GetTempVec2B(ox*worldScale,oy*worldScale),true)}_ApplyImpulse(fx,fy,imgPt){const [x,y]=this._GetInstImagePoint(imgPt);\nthis._DoApplyImpulse(fx,fy,x,y)}_ApplyImpulseToward(f,px,py,imgPt){const [x,y]=this._GetInstImagePoint(imgPt);const a=C3.angleTo(x,y,px,py);this._DoApplyImpulse(Math.cos(a)*f,Math.sin(a)*f,x,y)}_ApplyImpulseAtAngle(f,a,imgPt){const [x,y]=this._GetInstImagePoint(imgPt);this._DoApplyImpulse(Math.cos(a)*f,Math.sin(a)*f,x,y)}_DoApplyImpulse(fx,fy,ox,oy){if(!this._isEnabled)return;const worldScale=this._worldScale;this._body[\"ApplyLinearImpulse\"](GetTempVec2A(fx,fy),GetTempVec2B(ox*worldScale,oy*worldScale),\ntrue);const wi=this.GetWorldInfo();this._lastKnownX=wi.GetX();this._lastKnownY=wi.GetY();this._lastTickOverride=false}_ApplyTorque(m){if(!this._isEnabled)return;this._body[\"ApplyTorque\"](m,true)}_ApplyTorqueToAngle(m,a){const f=C3.angleClockwise(this.GetWorldInfo().GetAngle(),a)?-1:1;this._ApplyTorque(m*f)}_ApplyTorqueToPosition(m,x,y){const wi=this.GetWorldInfo();const a=C3.angleTo(wi.GetX(),wi.GetY(),x,y);const f=C3.angleClockwise(wi.GetAngle(),a)?-1:1;this._ApplyTorque(m*f)}_SetAngularVelocity(v){if(!this._isEnabled)return;\nthis._body[\"SetAngularVelocity\"](v);this._body[\"SetAwake\"](true)}_GetAngularVelocity(){return this._isEnabled?this._body[\"GetAngularVelocity\"]():0}_SetVelocity(vx,vy){if(!this._isEnabled)return;const worldScale=this._worldScale;this._body[\"SetLinearVelocity\"](GetTempVec2A(vx*worldScale,vy*worldScale));this._body[\"SetAwake\"](true);const wi=this.GetWorldInfo();this._lastKnownX=wi.GetX();this._lastKnownY=wi.GetY();this._lastTickOverride=false}_GetVelocity(){if(!this._isEnabled)return[0,0];const worldScale=\nthis._worldScale;const vec=this._body[\"GetLinearVelocity\"]();return[vec[\"get_x\"]()/worldScale,vec[\"get_y\"]()/worldScale]}_GetVelocityX(){return this._isEnabled?this._body[\"GetLinearVelocity\"]()[\"get_x\"]()/this._worldScale:0}_GetVelocityY(){return this._isEnabled?this._body[\"GetLinearVelocity\"]()[\"get_y\"]()/this._worldScale:0}_SetDensity(d){if(!this._isEnabled)return;if(this._density===d)return;this._density=d;for(const fixture of this._fixtures)fixture[\"SetDensity\"](d);this._body[\"ResetMassData\"]()}_GetDensity(){return this._isEnabled?\nthis._density:0}_SetFriction(f){if(!this._isEnabled)return;if(this._friction===f)return;this._friction=f;for(const fixture of this._fixtures)fixture[\"SetFriction\"](f);for(let contactEdge=this._body[\"GetContactList\"]();this._box2d[\"getPointer\"](contactEdge);contactEdge=contactEdge[\"get_next\"]()){const contact=contactEdge[\"get_contact\"]();if(contact)contact[\"ResetFriction\"]()}}_GetFriction(){return this._isEnabled?this._friction:0}_SetElasticity(e){if(!this._isEnabled)return;if(this._restitution===\ne)return;this._restitution=e;for(const fixture of this._fixtures)fixture[\"SetRestitution\"](e)}_GetElasticity(){return this._isEnabled?this._restitution:0}_SetLinearDamping(ld){if(!this._isEnabled)return;if(this._linearDamping===ld)return;this._linearDamping=ld;this._body[\"SetLinearDamping\"](ld)}_GetLinearDamping(){return this._isEnabled?this._linearDamping:0}_SetAngularDamping(ad){if(!this._isEnabled)return;if(this._angularDamping===ad)return;this._angularDamping=ad;this._body[\"SetAngularDamping\"](ad)}_GetAngularDamping(){return this._isEnabled?\nthis._angularDamping:0}_SetImmovable(i){if(!this._isEnabled)return;i=!!i;if(this._isImmovable===i)return;this._isImmovable=i;this._body[\"SetType\"](this._isImmovable?0:2);this._body[\"SetAwake\"](true)}_IsImmovable(){return this._isImmovable}_SetPreventRotate(i){if(!this._isEnabled)return;i=!!i;if(this._preventRotation===i)return;this._preventRotation=i;this._body[\"SetFixedRotation\"](this._preventRotation);this._body[\"SetAngularVelocity\"](0);this._body[\"SetAwake\"](true)}_IsPreventRotate(){return this._preventRotation}_SetBullet(i){if(!this._isEnabled)return;\ni=!!i;if(this._isBullet===i)return;this._isBullet=i;this._body[\"SetBullet\"](this._isBullet);this._body[\"SetAwake\"](true)}_IsBullet(){return this._isBullet}_GetMass(){return this._isEnabled?this._body[\"GetMass\"]()/this._worldScale:0}_GetCenterOfMassX(){return this._isEnabled?(this._body[\"GetPosition\"]()[\"get_x\"]()+this._body[\"GetLocalCenter\"]()[\"get_x\"]())/this._worldScale:0}_GetCenterOfMassY(){return this._isEnabled?(this._body[\"GetPosition\"]()[\"get_y\"]()+this._body[\"GetLocalCenter\"]()[\"get_y\"]())/\nthis._worldScale:0}_GetCenterOfMass(){if(!this._isEnabled)return[0,0];const posVec=this._body[\"GetPosition\"]();const centerVec=this._body[\"GetLocalCenter\"]();const worldScale=this._worldScale;return[(posVec[\"get_x\"]()+centerVec[\"get_x\"]())/worldScale,(posVec[\"get_y\"]()+centerVec[\"get_y\"]())/worldScale]}_IsSleeping(){return this._isEnabled?!this._body[\"IsAwake\"]():false}_GetContactCount(){if(!this._isEnabled)return 0;let count=0;for(let contactEdge=this._body[\"GetContactList\"]();this._box2d[\"getPointer\"](contactEdge);contactEdge=\ncontactEdge[\"get_next\"]()){const contact=contactEdge[\"get_contact\"]();if(!contact)continue;const manifold=contact[\"GetManifold\"]();const pointCount=manifold[\"get_pointCount\"]();count+=pointCount}return count}_GetContactPositionAt(index){index=Math.floor(index);if(!this._isEnabled)return[0,0];let count=0;for(let contactEdge=this._body[\"GetContactList\"]();this._box2d[\"getPointer\"](contactEdge);contactEdge=contactEdge[\"get_next\"]()){const contact=contactEdge[\"get_contact\"]();if(!contact)continue;const manifold=\ncontact[\"GetManifold\"]();const pointCount=manifold[\"get_pointCount\"]();if(index>=count&&index<count+pointCount){const i=index-count;const worldManifold=this.GetBehavior().GetWorldManifold();contact[\"GetWorldManifold\"](worldManifold);const vec=worldManifold[\"get_points\"](i);return[vec[\"get_x\"]()/this._worldScale,vec[\"get_y\"]()/this._worldScale]}else count+=pointCount}return[0,0]}GetScriptInterfaceClass(){return self.IPhysicsBehaviorInstance}};const map=new WeakMap;function UnwrapIWorldInstance(this_,\niinst){const runtime=map.get(this_).GetRuntime();return runtime._UnwrapIWorldInstance(iinst)}self.IPhysicsBehaviorInstance=class IPhysicsBehaviorInstance extends IBehaviorInstance{constructor(){super();map.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}get isEnabled(){return map.get(this)._IsEnabled()}set isEnabled(e){map.get(this)._SetEnabled(e)}applyForce(fx,fy,imgPt=0){C3X.RequireFiniteNumber(fx);C3X.RequireFiniteNumber(fy);map.get(this)._ApplyForce(fx,fy,imgPt)}applyForceTowardPosition(f,\npx,py,imgPt=0){C3X.RequireFiniteNumber(f);C3X.RequireFiniteNumber(px);C3X.RequireFiniteNumber(py);map.get(this)._ApplyForceToward(f,px,py,imgPt)}applyForceAtAngle(f,a,imgPt=0){C3X.RequireFiniteNumber(f);C3X.RequireFiniteNumber(a);map.get(this)._ApplyForceAtAngle(f,a,imgPt)}applyImpulse(ix,iy,imgPt=0){C3X.RequireFiniteNumber(ix);C3X.RequireFiniteNumber(iy);map.get(this)._ApplyImpulse(ix,iy,imgPt)}applyImpulseTowardPosition(i,px,py,imgPt=0){C3X.RequireFiniteNumber(i);C3X.RequireFiniteNumber(px);C3X.RequireFiniteNumber(py);\nmap.get(this)._ApplyImpulseToward(i,px,py,imgPt)}applyImpulseAtAngle(i,a,imgPt=0){C3X.RequireFiniteNumber(i);C3X.RequireFiniteNumber(a);map.get(this)._ApplyImpulseAtAngle(i,a,imgPt)}applyTorque(m){C3X.RequireFiniteNumber(m);map.get(this)._ApplyTorque(m)}applyTorqueToAngle(m,a){C3X.RequireFiniteNumber(m);C3X.RequireFiniteNumber(a);map.get(this)._ApplyTorqueToAngle(m,a)}applyTorqueToPosition(m,px,py){C3X.RequireFiniteNumber(m);C3X.RequireFiniteNumber(px);C3X.RequireFiniteNumber(py);map.get(this)._ApplyTorqueToPosition(m,\npx,py)}set angularVelocity(v){C3X.RequireFiniteNumber(v);map.get(this)._SetAngularVelocity(v)}get angularVelocity(){return map.get(this)._GetAngularVelocity()}setVelocity(vx,vy){C3X.RequireFiniteNumber(vx);C3X.RequireFiniteNumber(vy);map.get(this)._SetVelocity(vx,vy)}getVelocityX(){return map.get(this)._GetVelocityX()}getVelocityY(){return map.get(this)._GetVelocityY()}getVelocity(){return map.get(this)._GetVelocity()}set density(d){C3X.RequireFiniteNumber(d);map.get(this)._SetDensity(d)}get density(){return map.get(this)._GetDensity()}set friction(f){C3X.RequireFiniteNumber(f);\nmap.get(this)._SetFriction(f)}get friction(){return map.get(this)._GetFriction()}set elasticity(e){C3X.RequireFiniteNumber(e);map.get(this)._SetElasticity(e)}get elasticity(){return map.get(this)._GetElasticity()}set linearDamping(ld){C3X.RequireFiniteNumber(ld);map.get(this)._SetLinearDamping(ld)}get linearDamping(){return map.get(this)._GetLinearDamping()}set angularDamping(ad){C3X.RequireFiniteNumber(ad);map.get(this)._SetAngularDamping(ad)}get angularDamping(){return map.get(this)._GetAngularDamping()}set isImmovable(i){map.get(this)._SetImmovable(i)}get isImmovable(){return map.get(this)._IsImmovable()}set isPreventRotation(p){map.get(this)._SetPreventRotate(p)}get isPreventRotation(){return map.get(this)._IsPreventRotate()}set isBullet(b){map.get(this)._SetBullet(b)}get isBullet(){return map.get(this)._IsBullet()}get mass(){return map.get(this)._GetMass()}getCenterOfMassX(){return map.get(this)._GetCenterOfMassX()}getCenterOfMassY(){return map.get(this)._GetCenterOfMassY()}getCenterOfMass(){return map.get(this)._GetCenterOfMass()}getContactCount(){return map.get(this)._GetContactCount()}getContactX(index){C3X.RequireFiniteNumber(index);\nreturn map.get(this)._GetContactPositionAt(index)[0]}getContactY(index){C3X.RequireFiniteNumber(index);return map.get(this)._GetContactPositionAt(index)[1]}getContact(index){C3X.RequireFiniteNumber(index);return map.get(this)._GetContactPositionAt(index)}get isSleeping(){return map.get(this)._IsSleeping()}createDistanceJoint(imgPt,iOtherInst,otherImgPt,damping,freq){C3X.RequireFiniteNumber(damping);C3X.RequireFiniteNumber(freq);const otherInst=UnwrapIWorldInstance(this,iOtherInst);map.get(this)._CreateDistanceJoint(imgPt,\notherInst,otherImgPt,damping,freq)}createRevoluteJoint(imgPt,iOtherInst){const otherInst=UnwrapIWorldInstance(this,iOtherInst);map.get(this)._CreateRevoluteJoint(imgPt,otherInst)}createLimitedRevoluteJoint(imgPt,iOtherInst,lower,upper){C3X.RequireFiniteNumber(lower);C3X.RequireFiniteNumber(upper);const otherInst=UnwrapIWorldInstance(this,iOtherInst);map.get(this)._CreateLimitedRevoluteJoint(imgPt,otherInst,lower,upper)}createPrismaticJoint(imgPt,iOtherInst,axisAngle,enableLimit,lowerTranslation,upperTranslation,\nenableMotor,motorSpeed,maxMotorForce){const otherInst=UnwrapIWorldInstance(this,iOtherInst);map.get(this)._CreatePrismaticJoint(imgPt,otherInst,axisAngle,enableLimit,lowerTranslation,upperTranslation,enableMotor,motorSpeed,maxMotorForce)}removeAllJoints(){map.get(this)._RemoveJoints()}}}\n{const C3=self.C3;C3.Behaviors.Physics.Cnds={IsSleeping(){return this._IsSleeping()},CompareVelocity(which,cmp,x){if(!this._isEnabled)return false;let value=0;if(which===0)value=this._GetVelocityX();else if(which===1)value=this._GetVelocityY();else{const [vx,vy]=this._GetVelocity();value=Math.hypot(vx,vy)}return C3.compare(value,cmp,x)},CompareAngularVelocity(cmp,x){if(!this._isEnabled)return false;const av=C3.toDegrees(this._GetAngularVelocity());return C3.compare(av,cmp,x)},CompareMass(cmp,x){if(!this._isEnabled)return false;\nconst mass=this._GetMass();return C3.compare(mass,cmp,x)},IsEnabled(){return this._IsEnabled()}}}\n{const C3=self.C3;C3.Behaviors.Physics.Acts={ApplyForce(fx,fy,imgPt){this._ApplyForce(fx,fy,imgPt)},ApplyForceToward(f,px,py,imgPt){this._ApplyForceToward(f,px,py,imgPt)},ApplyForceAtAngle(f,a,imgPt){this._ApplyForceAtAngle(f,C3.toRadians(a),imgPt)},ApplyImpulse(fx,fy,imgPt){this._ApplyImpulse(fx,fy,imgPt)},ApplyImpulseToward(f,px,py,imgPt){this._ApplyImpulseToward(f,px,py,imgPt)},ApplyImpulseAtAngle(f,a,imgPt){this._ApplyImpulseAtAngle(f,C3.toRadians(a),imgPt)},ApplyTorque(m){this._ApplyTorque(C3.toRadians(m))},\nApplyTorqueToAngle(m,a){this._ApplyTorqueToAngle(C3.toRadians(m),C3.toRadians(a))},ApplyTorqueToPosition(m,x,y){this._ApplyTorqueToPosition(C3.toRadians(m),x,y)},SetAngularVelocity(v){this._SetAngularVelocity(C3.toRadians(v))},CreateDistanceJoint(imgPt,objectClass,otherImgPt,damping,freq){if(!objectClass)return;const otherInst=objectClass.GetFirstPicked(this._inst);this._CreateDistanceJoint(imgPt,otherInst,otherImgPt,damping,freq)},CreateRevoluteJoint(imgPt,objectClass){if(!objectClass)return;const otherInst=\nobjectClass.GetFirstPicked(this._inst);this._CreateRevoluteJoint(imgPt,otherInst)},CreateLimitedRevoluteJoint(imgPt,objectClass,lower,upper){if(!objectClass)return;const otherInst=objectClass.GetFirstPicked(this._inst);this._CreateLimitedRevoluteJoint(imgPt,otherInst,C3.toRadians(lower),C3.toRadians(upper))},CreatePrismaticJoint(imgPt,objectClass,axisAngle,enableLimit,lowerTranslation,upperTranslation,enableMotor,motorSpeed,maxMotorForce){if(!objectClass)return;const otherInst=objectClass.GetFirstPicked(this._inst);\nthis._CreatePrismaticJoint(imgPt,otherInst,C3.toRadians(axisAngle),enableLimit,lowerTranslation,upperTranslation,enableMotor,C3.toRadians(motorSpeed),maxMotorForce)},RemoveJoints(){this._RemoveJoints()},SetWorldGravity(g){this.GetBehavior().SetGravity(g)},SetSteppingMode(m){this.GetBehavior().SetSteppingMode(m)},SetIterations(vel,pos){this.GetBehavior().SetIterations(vel,pos)},SetVelocity(vx,vy){this._SetVelocity(vx,vy)},SetDensity(d){this._SetDensity(d)},SetFriction(f){this._SetFriction(f)},SetElasticity(e){this._SetElasticity(e)},\nSetLinearDamping(ld){this._SetLinearDamping(ld)},SetAngularDamping(ad){this._SetAngularDamping(ad)},SetImmovable(i){this._SetImmovable(i)},EnableCollisions(objectClass,state){this.GetBehavior().SetCollisionsEnabled(this.GetObjectClass(),objectClass,state!==0)},SetPreventRotate(i){this._SetPreventRotate(i!==0)},SetBullet(i){this._SetBullet(i!==0)},SetEnabled(e){this._SetEnabled(e!==0)}}}\n{const C3=self.C3;C3.Behaviors.Physics.Exps={VelocityX(){return this._GetVelocityX()},VelocityY(){return this._GetVelocityY()},AngularVelocity(){return C3.toDegrees(this._GetAngularVelocity())},Mass(){return this._GetMass()},CenterOfMassX(){return this._GetCenterOfMassX()},CenterOfMassY(){return this._GetCenterOfMassY()},Density(){return this._GetDensity()},Friction(){return this._GetFriction()},Elasticity(){return this._GetElasticity()},LinearDamping(){return this._GetLinearDamping()},AngularDamping(){return this._GetAngularDamping()},\nContactCount(){return this._GetContactCount()},ContactXAt(i){return this._GetContactPositionAt(i)[0]},ContactYAt(i){return this._GetContactPositionAt(i)[1]}}};\n\n}\n\n{\n'use strict';const C3=self.C3;const b2Separator={};C3.Behaviors.Physics.Separator=b2Separator;const GetVec2=C3.Behaviors.Physics.GetVec2;const FreeVec2=C3.Behaviors.Physics.FreeVec2;function CloneVec2(v){return GetVec2(v[\"get_x\"](),v[\"get_y\"]())}b2Separator.det=function(x1,y1,x2,y2,x3,y3){return x1*y2+x2*y3+x3*y1-y1*x2-y2*x3-y3*x1};\nb2Separator.hitRay=function(x1,y1,x2,y2,x3,y3,x4,y4){const t1=x3-x1,t2=y3-y1,t3=x2-x1,t4=y2-y1,t5=x4-x3,t6=y4-y3,t7=t4*t5-t3*t6;const a=(t5*t2-t6*t1)/t7;const px=x1+a*t3,py=y1+a*t4;const b1=b2Separator.isOnSegment(x2,y2,x1,y1,px,py);const b2=b2Separator.isOnSegment(px,py,x3,y3,x4,y4);if(b1&&b2)return GetVec2(px,py);else return null};\nb2Separator.isOnSegment=function(px,py,x1,y1,x2,y2){const b1=x1+.1>=px&&px>=x2-.1||x1-.1<=px&&px<=x2+.1;const b2=y1+.1>=py&&py>=y2-.1||y1-.1<=py&&py<=y2+.1;return b1&&b2&&b2Separator.isOnLine(px,py,x1,y1,x2,y2)};b2Separator.isOnLine=function(px,py,x1,y1,x2,y2){if(Math.abs(x2-x1)>.1){const a=(y2-y1)/(x2-x1);const possibleY=a*(px-x1)+y1;const diff=Math.abs(possibleY-py);return diff<.1}return Math.abs(px-x1)<.1};\nb2Separator.pointsMatch=function(x1,y1,x2,y2){return Math.abs(x2-x1)<.1&&Math.abs(y2-y1)<.1};\nb2Separator.Separate=function(verticesVec,objarea){const calced=b2Separator.calcShapes(verticesVec);let ret=[];for(let i=0,len=calced.length;i<len;++i){const a=calced[i];const poly=[];let areasum=0;for(let j=0,lenj=a.length;j<lenj;++j){const b=a[j];const c=a[(j+1)%lenj];areasum+=b[\"get_x\"]()*c[\"get_y\"]()-b[\"get_y\"]()*c[\"get_x\"]();poly.push(GetVec2(b[\"get_x\"](),b[\"get_y\"]()))}areasum=Math.abs(areasum/2);if(areasum>=objarea*.001)ret.push(poly);else for(let j=0,lenj=poly.length;j<lenj;j++)FreeVec2(poly[j])}ret=\nSplitConvexPolysOver8Points(ret);return ret};\nb2Separator.calcShapes=function(verticesVec){let vec=[];let i=0,n=0,j=0;let d=0,t=0,dx=0,dy=0,minLen=0;let i1=0,i2=0,i3=0;let p1,p2,p3,v1,v2,v,hitV;let j1=0,j2=0,k=0,h=0;let vec1=[],vec2=[];let isConvex=false;let figsVec=[],queue=[];let pushed=false;queue.push(verticesVec);while(queue.length){vec=queue[0];n=vec.length;isConvex=true;for(i=0;i<n;i++){i1=i;i2=i<n-1?i+1:i+1-n;i3=i<n-2?i+2:i+2-n;p1=vec[i1];p2=vec[i2];p3=vec[i3];d=b2Separator.det(p1[\"get_x\"](),p1[\"get_y\"](),p2[\"get_x\"](),p2[\"get_y\"](),\np3[\"get_x\"](),p3[\"get_y\"]());if(d<0){isConvex=false;minLen=1E9;for(j=0;j<n;j++)if(j!==i1&&j!==i2){j1=j;j2=j<n-1?j+1:0;v1=vec[j1];v2=vec[j2];v=b2Separator.hitRay(p1[\"get_x\"](),p1[\"get_y\"](),p2[\"get_x\"](),p2[\"get_y\"](),v1[\"get_x\"](),v1[\"get_y\"](),v2[\"get_x\"](),v2[\"get_y\"]());if(v){dx=p2[\"get_x\"]()-v[\"get_x\"]();dy=p2[\"get_y\"]()-v[\"get_y\"]();t=dx*dx+dy*dy;if(t<minLen){h=j1;k=j2;hitV=v;minLen=t}else FreeVec2(v)}}if(minLen===1E9)return[];vec1=[];vec2=[];j1=h;j2=k;v1=vec[j1];v2=vec[j2];pushed=false;if(!b2Separator.pointsMatch(hitV[\"get_x\"](),\nhitV[\"get_y\"](),v2[\"get_x\"](),v2[\"get_y\"]())){vec1.push(hitV);pushed=true}if(!b2Separator.pointsMatch(hitV[\"get_x\"](),hitV[\"get_y\"](),v1[\"get_x\"](),v1[\"get_y\"]())){vec2.push(hitV);pushed=true}if(!pushed)FreeVec2(hitV);h=-1;k=i1;while(true){if(k!==j2)vec1.push(vec[k]);else{if(h<0||h>=n)return[];if(!b2Separator.isOnSegment(v2[\"get_x\"](),v2[\"get_y\"](),vec[h][\"get_x\"](),vec[h][\"get_y\"](),p1[\"get_x\"](),p1[\"get_y\"]()))vec1.push(vec[k]);break}h=k;if(k-1<0)k=n-1;else k--}vec1.reverse();h=-1;k=i2;while(true){if(k!==\nj1)vec2.push(vec[k]);else{if(h<0||h>=n)return[];if(k===j1&&!b2Separator.isOnSegment(v1[\"get_x\"](),v1[\"get_y\"](),vec[h][\"get_x\"](),vec[h][\"get_y\"](),p2[\"get_x\"](),p2[\"get_y\"]()))vec2.push(vec[k]);break}h=k;if(k+1>n-1)k=0;else k++}queue.push(vec1,vec2);queue.shift();break}}if(isConvex)figsVec.push(queue.shift())}return figsVec};\nfunction SplitConvexPolysOver8Points(convexPolys){const ret=[];for(const arr of convexPolys)if(arr.length<=8)ret.push(arr);else ret.push.apply(ret,SplitConvexPoly(arr));return ret}function SplitConvexPoly(arr){const ret=[];ret.push(arr.splice(0,8));const first=ret[0][0];let last=ret[0][7];while(arr.length){const poly=arr.splice(0,Math.min(arr.length,6));let nextLast=poly.at(-1);poly.push(CloneVec2(first));poly.push(CloneVec2(last));ret.push(poly);last=nextLast}return ret};\n\n}\n\n{\n'use strict';{const C3=self.C3;C3.Behaviors.Flash=class FlashBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}}{const C3=self.C3;C3.Behaviors.Flash.Type=class FlashType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}}\n{const C3=self.C3;const C3X=self.C3X;const IBehaviorInstance=self.IBehaviorInstance;C3.Behaviors.Flash.Instance=class FlashInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._onTime=0;this._offTime=0;this._stage=0;this._stageTimeLeft=0;this._timeLeft=0;this._StartTicking()}Release(){super.Release()}_Flash(on,off,dur){this._onTime=on;this._offTime=off;this._stage=1;this._stageTimeLeft=off;this._timeLeft=dur;this._inst.GetWorldInfo().SetVisible(false);this._runtime.UpdateRender()}_StopFlashing(){this._timeLeft=\n0;this._inst.GetWorldInfo().SetVisible(true);this._runtime.UpdateRender()}_IsFlashing(){return this._timeLeft>0}SaveToJson(){return{\"on\":this._onTime,\"off\":this._offTime,\"s\":this._stage,\"stl\":this._stageTimeLeft,\"tl\":this._timeLeft}}LoadFromJson(o){this._onTime=o[\"on\"];this._offTime=o[\"off\"];this._stage=o[\"s\"];this._stageTimeLeft=o[\"stl\"];this._timeLeft=o[\"tl\"]===null?Infinity:o[\"tl\"]}Tick(){if(this._timeLeft<=0)return;const dt=this._runtime.GetDt(this._inst);this._timeLeft-=dt;if(this._timeLeft<=\n0){this._timeLeft=0;this._inst.GetWorldInfo().SetVisible(true);this._runtime.UpdateRender();this.DispatchScriptEvent(\"flashend\");return this.DebugTrigger(C3.Behaviors.Flash.Cnds.OnFlashEnded)}this._stageTimeLeft-=dt;if(this._stageTimeLeft<=0){if(this._stage===0){this._inst.GetWorldInfo().SetVisible(false);this._stage=1;this._stageTimeLeft+=this._offTime}else{this._inst.GetWorldInfo().SetVisible(true);this._stage=0;this._stageTimeLeft+=this._onTime}this._runtime.UpdateRender()}}GetDebuggerProperties(){const prefix=\n\"behaviors.flash.debugger\";return[{title:\"$\"+this.GetBehaviorType().GetName(),properties:[{name:prefix+\".on-time\",value:this._onTime,onedit:v=>this._onTime=v},{name:prefix+\".off-time\",value:this._offTime,onedit:v=>this._offTime=v},{name:prefix+\".is-flashing\",value:this._timeLeft>0},{name:prefix+\".time-left\",value:this._timeLeft}]}]}GetScriptInterfaceClass(){return self.IFlashBehaviorInstance}};const map=new WeakMap;self.IFlashBehaviorInstance=class IFlashBehaviorInstance extends IBehaviorInstance{constructor(){super();\nmap.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}flash(on,off,dur){C3X.RequireFiniteNumber(on);C3X.RequireFiniteNumber(off);C3X.RequireFiniteNumber(dur);map.get(this)._Flash(on,off,dur)}stop(){map.get(this)._StopFlashing()}get isFlashing(){return map.get(this)._IsFlashing()}}}{const C3=self.C3;C3.Behaviors.Flash.Cnds={IsFlashing(){return this._IsFlashing()},OnFlashEnded(){return true}}}{const C3=self.C3;C3.Behaviors.Flash.Acts={Flash(on,off,dur){this._Flash(on,off,dur)},StopFlashing(){this._StopFlashing()}}}\n{const C3=self.C3;C3.Behaviors.Flash.Exps={}};\n\n}\n\n{\nconst C3 = self.C3;\nself.C3_GetObjectRefTable = function () {\n\treturn [\n\t\tC3.Plugins.Sprite,\n\t\tC3.Behaviors.Tween,\n\t\tC3.Behaviors.Sin,\n\t\tC3.Behaviors.Pin,\n\t\tC3.Plugins.Text,\n\t\tC3.Plugins.Button,\n\t\tC3.Behaviors.MoveTo,\n\t\tC3.Behaviors.Rotate,\n\t\tC3.Plugins.Particles,\n\t\tC3.Plugins.TiledBg,\n\t\tC3.Behaviors.CV_BoundedDragnDrop,\n\t\tC3.Behaviors.Bullet,\n\t\tC3.Behaviors.bound,\n\t\tC3.Behaviors.solid,\n\t\tC3.Behaviors.DragnDrop,\n\t\tC3.Behaviors.Physics,\n\t\tC3.Plugins.Audio,\n\t\tC3.Plugins.Touch,\n\t\tC3.Plugins.Mouse,\n\t\tC3.Behaviors.Flash,\n\t\tC3.Plugins.System.Cnds.IsGroupActive,\n\t\tC3.Plugins.System.Cnds.OnLayoutStart,\n\t\tC3.Plugins.Sprite.Acts.SetInstanceVar,\n\t\tC3.Plugins.System.Cnds.EveryTick,\n\t\tC3.Plugins.TiledBg.Acts.SetImageOffsetX,\n\t\tC3.Plugins.TiledBg.Exps.ImageOffsetX,\n\t\tC3.Plugins.System.Exps.dt,\n\t\tC3.Plugins.TiledBg.Acts.SetImageOffsetY,\n\t\tC3.Plugins.TiledBg.Exps.ImageOffsetY,\n\t\tC3.Plugins.System.Exps.time,\n\t\tC3.Plugins.Sprite.Acts.SetSize,\n\t\tC3.Behaviors.Tween.Acts.TweenTwoProperties,\n\t\tC3.Plugins.System.Acts.Wait,\n\t\tC3.Behaviors.Sin.Acts.SetEnabled,\n\t\tC3.Plugins.Audio.Acts.Play,\n\t\tC3.Plugins.Touch.Cnds.OnTapGesture,\n\t\tC3.Plugins.Sprite.Cnds.CompareInstanceVar,\n\t\tC3.Plugins.System.Acts.GoToLayout,\n\t\tC3.Plugins.Sprite.Acts.AddInstanceVar,\n\t\tC3.Behaviors.MoveTo.Acts.SetSpeed,\n\t\tC3.Behaviors.MoveTo.Acts.MoveToPosition,\n\t\tC3.Plugins.Audio.Acts.Stop,\n\t\tC3.Plugins.Sprite.Acts.StopAnim,\n\t\tC3.Plugins.Sprite.Acts.SetAnimFrame,\n\t\tC3.Plugins.System.Acts.SetGroupActive,\n\t\tC3.Plugins.Text.Acts.SetVisible,\n\t\tC3.Plugins.Text.Acts.SetText,\n\t\tC3.Plugins.Sprite.Acts.SetVisible,\n\t\tC3.Plugins.System.Acts.SetLayerInteractive,\n\t\tC3.Plugins.Touch.Cnds.OnTouchObject,\n\t\tC3.Plugins.Sprite.Acts.SetAnim,\n\t\tC3.Plugins.System.Cnds.TriggerOnce,\n\t\tC3.Plugins.System.Acts.SetLayerVisible,\n\t\tC3.Behaviors.Tween.Acts.TweenOneProperty,\n\t\tC3.Plugins.Sprite.Acts.SetOpacity,\n\t\tC3.Behaviors.Sin.Acts.SetPeriod,\n\t\tC3.Behaviors.Sin.Acts.SetPhase,\n\t\tC3.Plugins.System.Acts.LoadState,\n\t\tC3.Plugins.Audio.Acts.FadeVolume,\n\t\tC3.Behaviors.Sin.Acts.SetMagnitude,\n\t\tC3.Plugins.System.Acts.SetLayoutEffectEnabled,\n\t\tC3.Plugins.System.Exps.random,\n\t\tC3.Plugins.System.Acts.SaveState,\n\t\tC3.Plugins.System.Cnds.CompareTime,\n\t\tC3.Plugins.Touch.Cnds.OnTapGestureObject,\n\t\tC3.Behaviors.Flash.Acts.Flash,\n\t\tC3.Plugins.Sprite.Acts.Destroy,\n\t\tC3.Plugins.System.Exps.int,\n\t\tC3.Plugins.System.Acts.SetLayoutEffectParam,\n\t\tC3.Plugins.System.Acts.WaitForPreviousActions,\n\t\tC3.Plugins.Audio.Acts.PlayByName,\n\t\tC3.Behaviors.CV_BoundedDragnDrop.Acts.SetEnabled,\n\t\tC3.Plugins.Sprite.Acts.SetEffectParam,\n\t\tC3.Plugins.Sprite.Acts.MoveToLayer,\n\t\tC3.Plugins.System.Acts.SetLayerEffectEnabled,\n\t\tC3.Behaviors.Pin.Acts.PinByImagePoint,\n\t\tC3.Plugins.Sprite.Acts.SetPos,\n\t\tC3.Plugins.Sprite.Exps.X,\n\t\tC3.Plugins.Sprite.Exps.Y,\n\t\tC3.Plugins.Sprite.Acts.SetX,\n\t\tC3.Plugins.Audio.Cnds.IsTagPlaying,\n\t\tC3.Plugins.Sprite.Acts.StartAnim,\n\t\tC3.Plugins.Sprite.Cnds.IsOverlapping,\n\t\tC3.Plugins.Sprite.Cnds.OnCollision,\n\t\tC3.Behaviors.Bullet.Cnds.CompareSpeed,\n\t\tC3.Plugins.System.Acts.CreateObject,\n\t\tC3.Plugins.Sprite.Acts.SetAnimSpeed,\n\t\tC3.Plugins.Touch.Cnds.IsTouchingObject,\n\t\tC3.Plugins.Audio.Acts.SetPaused,\n\t\tC3.Behaviors.Bullet.Acts.SetEnabled,\n\t\tC3.Plugins.Sprite.Acts.MoveToTop,\n\t\tC3.Behaviors.MoveTo.Acts.SetMaxSpeed,\n\t\tC3.Behaviors.Physics.Acts.SetEnabled,\n\t\tC3.Plugins.System.Cnds.OnLoadFinished,\n\t\tC3.Plugins.Button.Cnds.OnClicked\n\t];\n};\nself.C3_JsPropNameTable = [\n\t{背景渐变叠加: 0},\n\t{补间动画: 0},\n\t{正弦: 0},\n\t{要领养吗: 0},\n\t{好的: 0},\n\t{不要: 0},\n\t{固定: 0},\n\t{右上角关闭: 0},\n\t{真的放弃吗: 0},\n\t{是的: 0},\n\t{取消: 0},\n\t{拜托不要同意: 0},\n\t{当前解锁结局数: 0},\n\t{按钮1: 0},\n\t{按钮10: 0},\n\t{按钮11: 0},\n\t{按钮12: 0},\n\t{按钮13: 0},\n\t{按钮14: 0},\n\t{按钮2: 0},\n\t{按钮3: 0},\n\t{按钮4: 0},\n\t{按钮5: 0},\n\t{按钮6: 0},\n\t{按钮7: 0},\n\t{按钮8: 0},\n\t{按钮9: 0},\n\t{结局11躺着的人: 0},\n\t{结局11文字: 0},\n\t{移动到: 0},\n\t{坚定的你: 0},\n\t{旋转: 0},\n\t{旋转炫光: 0},\n\t{粒子: 0},\n\t{结局3流浪鲨鱼: 0},\n\t{结局3文字: 0},\n\t{结局1胖胖鲨: 0},\n\t{结局1文字: 0},\n\t{方形鲨鱼出场: 0},\n\t{结局2图案: 0},\n\t{结局2文字: 0},\n\t{结局5文字: 0},\n\t{结局5图案: 0},\n\t{结局6图案: 0},\n\t{结局6文字: 0},\n\t{结局7图案: 0},\n\t{结局7文字: 0},\n\t{结局8图案: 0},\n\t{结局8文字: 0},\n\t{结局4图案: 0},\n\t{结局4文字: 0},\n\t{特殊室内背景: 0},\n\t{特殊外出背景: 0},\n\t{正弦大小: 0},\n\t{结局910带回家的流浪鲨鱼: 0},\n\t{绿色按钮: 0},\n\t{红色按钮: 0},\n\t{结局9图案: 0},\n\t{结局9文字: 0},\n\t{结局10图案: 0},\n\t{结局10文字: 0},\n\t{正弦高度: 0},\n\t{正弦摆动: 0},\n\t{最终结局小鲨鱼: 0},\n\t{好结局对话框: 0},\n\t{白色背景: 0},\n\t{staff字幕好结局: 0},\n\t{坏结局对话框: 0},\n\t{空空的房间: 0},\n\t{staff字幕坏结局: 0},\n\t{小鲨鱼离开了: 0},\n\t{黑色对话背景: 0},\n\t{logo: 0},\n\t{logo背景: 0},\n\t{温馨提示: 0},\n\t{中文: 0},\n\t{English: 0},\n\t{日本语: 0},\n\t{被点击次数: 0},\n\t{正在说话: 0},\n\t{正弦2: 0},\n\t{正弦3: 0},\n\t{选语言小鲨鱼: 0},\n\t{选了英语: 0},\n\t{选了日语: 0},\n\t{苹果碰撞: 0},\n\t{BoundedDragDrop: 0},\n\t{子弹: 0},\n\t{边界约束: 0},\n\t{食物苹果: 0},\n\t{实体: 0},\n\t{边界: 0},\n\t{实际垃圾桶: 0},\n\t{苹果: 0},\n\t{锻炼: 0},\n\t{正弦上下: 0},\n\t{睡眠: 0},\n\t{开关灯: 0},\n\t{垃圾桶: 0},\n\t{出门: 0},\n\t{正弦超快速抖动: 0},\n\t{方形鲨鱼: 0},\n\t{文本新手引导: 0},\n\t{拖拽手势: 0},\n\t{地板墙壁: 0},\n\t{互动背景框: 0},\n\t{植物: 0},\n\t{窗外: 0},\n\t{不同海报: 0},\n\t{正弦抖动: 0},\n\t{正弦锻炼: 0},\n\t{正弦旋转: 0},\n\t{小鲨鱼: 0},\n\t{小云走到头: 0},\n\t{窗外小云: 0},\n\t{嘴巴判定点: 0},\n\t{小鸭子被点击: 0},\n\t{小鸭子: 0},\n\t{坐垫: 0},\n\t{窗户判定区: 0},\n\t{鸭子判定区: 0},\n\t{坐垫判定区: 0},\n\t{植物判定区: 0},\n\t{带回家的流浪鲨鱼: 0},\n\t{拿回家的花: 0},\n\t{头戴花: 0},\n\t{纯眼睛: 0},\n\t{拖放: 0},\n\t{大云: 0},\n\t{天空: 0},\n\t{小云: 0},\n\t{草地: 0},\n\t{物理: 0},\n\t{星星2: 0},\n\t{星星: 0},\n\t{星星3: 0},\n\t{星星4: 0},\n\t{星星5: 0},\n\t{流浪鲨鱼: 0},\n\t{信: 0},\n\t{野花: 0},\n\t{饿死在外: 0},\n\t{回家按钮: 0},\n\t{坏结局字幕: 0},\n\t{好结局字幕: 0},\n\t{点击小叉关掉窗口: 0},\n\t{不喂: 0},\n\t{不喂但有结局3: 0},\n\t{喂食: 0},\n\t{已经不饿啦: 0},\n\t{锻炼字幕: 0},\n\t{点击方形鲨鱼: 0},\n\t{睡觉: 0},\n\t{戴上花: 0},\n\t{关灯: 0},\n\t{中途开灯: 0},\n\t{我害怕关灯: 0},\n\t{等待10分钟: 0},\n\t{发现流浪鲨鱼: 0},\n\t{垃圾桶碰到鲨鱼: 0},\n\t{不领养但带回鲨鱼: 0},\n\t{好结局: 0},\n\t{睡眠按钮被删掉了: 0},\n\t{有只饿死的鲨鱼: 0},\n\t{你没什么: 0},\n\t{纯黑: 0},\n\t{开灯: 0},\n\t{音频: 0},\n\t{Touch: 0},\n\t{随机LOGO音效: 0},\n\t{解锁ED数: 0},\n\t{ED1: 0},\n\t{ED2: 0},\n\t{ED3: 0},\n\t{ED4: 0},\n\t{ED5: 0},\n\t{ED6: 0},\n\t{ED7: 0},\n\t{ED8: 0},\n\t{ED9: 0},\n\t{ED10: 0},\n\t{ED11: 0},\n\t{ED11达成次数: 0},\n\t{ED12: 0},\n\t{ED13: 0},\n\t{ED14: 0},\n\t{BAD: 0},\n\t{有流浪鲨鱼: 0},\n\t{累计喂食: 0},\n\t{累计锻炼: 0},\n\t{摘了花: 0},\n\t{戴了花: 0},\n\t{关灯时长: 0},\n\t{关灯时刻: 0},\n\t{关过灯: 0},\n\t{正在关灯: 0},\n\t{开始喂养时刻: 0},\n\t{喂养时长: 0},\n\t{弹窗开始: 0},\n\t{弹窗等待时间: 0},\n\t{选择不要的次数: 0},\n\t{结局界面开始时间: 0},\n\t{结局界面持续时间: 0},\n\t{\"随机LOGO音效！\": 0},\n\t{滑走音效: 0},\n\t{滤镜转场开始时间: 0},\n\t{开始色调分离: 0},\n\t{海报: 0},\n\t{点击苹果按钮次数: 0},\n\t{活动中: 0},\n\t{请求食物开始: 0},\n\t{饿肚子时长: 0},\n\t{饥饿程度: 0},\n\t{BGM随机: 0},\n\t{锻炼过了: 0},\n\t{做过新手引导: 0},\n\t{睡眠次数: 0},\n\t{垃圾桶出现: 0},\n\t{垃圾桶生效: 0},\n\t{窗户被删了: 0},\n\t{流浪鲨鱼带回家: 0},\n\t{开始ED7的演出: 0},\n\t{无视了鲨鱼: 0},\n\t{信展开: 0},\n\t{关灯阶段: 0},\n\t{开始ED910演出: 0},\n\t{前往最终结局: 0},\n\t{全局变量: 0},\n\t{Text: 0},\n\t{Text2: 0},\n\t{Text3: 0},\n\t{正式发布记得删掉: 0},\n\t{纯黑置顶过渡: 0},\n\t{结局910纯黑置顶过渡: 0},\n\t{过渡: 0},\n\t{纯黑过渡: 0},\n\t{闪烁: 0},\n\t{语言选项: 0},\n\t{结局图标: 0},\n\t{结局文字: 0},\n\t{UI按钮: 0},\n\t{字幕: 0},\n\t{最终结局图文: 0}\n];\n\nself.InstanceType = {\n\t背景渐变叠加: class extends self.ISpriteInstance {},\n\t要领养吗: class extends self.ISpriteInstance {},\n\t好的: class extends self.ISpriteInstance {},\n\t不要: class extends self.ISpriteInstance {},\n\t右上角关闭: class extends self.ISpriteInstance {},\n\t真的放弃吗: class extends self.ISpriteInstance {},\n\t是的: class extends self.ISpriteInstance {},\n\t取消: class extends self.ISpriteInstance {},\n\t拜托不要同意: class extends self.ISpriteInstance {},\n\t当前解锁结局数: class extends self.ITextInstance {},\n\t按钮1: class extends self.IButtonInstance {},\n\t按钮10: class extends self.IButtonInstance {},\n\t按钮11: class extends self.IButtonInstance {},\n\t按钮12: class extends self.IButtonInstance {},\n\t按钮13: class extends self.IButtonInstance {},\n\t按钮14: class extends self.IButtonInstance {},\n\t按钮2: class extends self.IButtonInstance {},\n\t按钮3: class extends self.IButtonInstance {},\n\t按钮4: class extends self.IButtonInstance {},\n\t按钮5: class extends self.IButtonInstance {},\n\t按钮6: class extends self.IButtonInstance {},\n\t按钮7: class extends self.IButtonInstance {},\n\t按钮8: class extends self.IButtonInstance {},\n\t按钮9: class extends self.IButtonInstance {},\n\t结局11躺着的人: class extends self.ISpriteInstance {},\n\t结局11文字: class extends self.ISpriteInstance {},\n\t坚定的你: class extends self.ISpriteInstance {},\n\t旋转炫光: class extends self.ISpriteInstance {},\n\t粒子: class extends self.IParticlesInstance {},\n\t结局3流浪鲨鱼: class extends self.ISpriteInstance {},\n\t结局3文字: class extends self.ISpriteInstance {},\n\t结局1胖胖鲨: class extends self.ISpriteInstance {},\n\t结局1文字: class extends self.ISpriteInstance {},\n\t方形鲨鱼出场: class extends self.ISpriteInstance {},\n\t结局2图案: class extends self.ISpriteInstance {},\n\t结局2文字: class extends self.ISpriteInstance {},\n\t结局5文字: class extends self.ISpriteInstance {},\n\t结局5图案: class extends self.ISpriteInstance {},\n\t结局6图案: class extends self.ISpriteInstance {},\n\t结局6文字: class extends self.ISpriteInstance {},\n\t结局7图案: class extends self.ISpriteInstance {},\n\t结局7文字: class extends self.ISpriteInstance {},\n\t结局8图案: class extends self.ISpriteInstance {},\n\t结局8文字: class extends self.ISpriteInstance {},\n\t结局4图案: class extends self.ISpriteInstance {},\n\t结局4文字: class extends self.ISpriteInstance {},\n\t特殊室内背景: class extends self.ISpriteInstance {},\n\t特殊外出背景: class extends self.ISpriteInstance {},\n\t结局910带回家的流浪鲨鱼: class extends self.ISpriteInstance {},\n\t绿色按钮: class extends self.ISpriteInstance {},\n\t红色按钮: class extends self.ISpriteInstance {},\n\t结局9图案: class extends self.ISpriteInstance {},\n\t结局9文字: class extends self.ISpriteInstance {},\n\t结局10图案: class extends self.ISpriteInstance {},\n\t结局10文字: class extends self.ISpriteInstance {},\n\t最终结局小鲨鱼: class extends self.ISpriteInstance {},\n\t好结局对话框: class extends self.ISpriteInstance {},\n\t白色背景: class extends self.ISpriteInstance {},\n\tstaff字幕好结局: class extends self.ISpriteInstance {},\n\t坏结局对话框: class extends self.ISpriteInstance {},\n\t空空的房间: class extends self.ISpriteInstance {},\n\tstaff字幕坏结局: class extends self.ISpriteInstance {},\n\t小鲨鱼离开了: class extends self.ISpriteInstance {},\n\t黑色对话背景: class extends self.ISpriteInstance {},\n\tlogo: class extends self.ISpriteInstance {},\n\tlogo背景: class extends self.ITiledBackgroundInstance {},\n\t温馨提示: class extends self.ISpriteInstance {},\n\t中文: class extends self.ISpriteInstance {},\n\tEnglish: class extends self.ISpriteInstance {},\n\t日本语: class extends self.ISpriteInstance {},\n\t选语言小鲨鱼: class extends self.ISpriteInstance {},\n\t选了英语: class extends self.ISpriteInstance {},\n\t选了日语: class extends self.ISpriteInstance {},\n\t食物苹果: class extends self.ISpriteInstance {},\n\t边界: class extends self.ISpriteInstance {},\n\t实际垃圾桶: class extends self.ISpriteInstance {},\n\t苹果: class extends self.ISpriteInstance {},\n\t锻炼: class extends self.ISpriteInstance {},\n\t睡眠: class extends self.ISpriteInstance {},\n\t开关灯: class extends self.ISpriteInstance {},\n\t垃圾桶: class extends self.ISpriteInstance {},\n\t出门: class extends self.ISpriteInstance {},\n\t方形鲨鱼: class extends self.ISpriteInstance {},\n\t文本新手引导: class extends self.ISpriteInstance {},\n\t拖拽手势: class extends self.ISpriteInstance {},\n\t地板墙壁: class extends self.ISpriteInstance {},\n\t互动背景框: class extends self.ISpriteInstance {},\n\t植物: class extends self.ISpriteInstance {},\n\t窗外: class extends self.ISpriteInstance {},\n\t不同海报: class extends self.ISpriteInstance {},\n\t小鲨鱼: class extends self.ISpriteInstance {},\n\t窗外小云: class extends self.ISpriteInstance {},\n\t嘴巴判定点: class extends self.ISpriteInstance {},\n\t小鸭子: class extends self.ISpriteInstance {},\n\t坐垫: class extends self.ISpriteInstance {},\n\t窗户判定区: class extends self.ISpriteInstance {},\n\t鸭子判定区: class extends self.ISpriteInstance {},\n\t坐垫判定区: class extends self.ISpriteInstance {},\n\t植物判定区: class extends self.ISpriteInstance {},\n\t带回家的流浪鲨鱼: class extends self.ISpriteInstance {},\n\t拿回家的花: class extends self.ISpriteInstance {},\n\t头戴花: class extends self.ISpriteInstance {},\n\t纯眼睛: class extends self.ISpriteInstance {},\n\t大云: class extends self.ISpriteInstance {},\n\t天空: class extends self.ISpriteInstance {},\n\t小云: class extends self.ISpriteInstance {},\n\t草地: class extends self.ISpriteInstance {},\n\t星星2: class extends self.ISpriteInstance {},\n\t星星: class extends self.ISpriteInstance {},\n\t星星3: class extends self.ISpriteInstance {},\n\t星星4: class extends self.ISpriteInstance {},\n\t星星5: class extends self.ISpriteInstance {},\n\t流浪鲨鱼: class extends self.ISpriteInstance {},\n\t信: class extends self.ISpriteInstance {},\n\t野花: class extends self.ISpriteInstance {},\n\t饿死在外: class extends self.ISpriteInstance {},\n\t回家按钮: class extends self.ISpriteInstance {},\n\t坏结局字幕: class extends self.ISpriteInstance {},\n\t好结局字幕: class extends self.ISpriteInstance {},\n\t点击小叉关掉窗口: class extends self.ISpriteInstance {},\n\t不喂: class extends self.ISpriteInstance {},\n\t不喂但有结局3: class extends self.ISpriteInstance {},\n\t喂食: class extends self.ISpriteInstance {},\n\t已经不饿啦: class extends self.ISpriteInstance {},\n\t锻炼字幕: class extends self.ISpriteInstance {},\n\t点击方形鲨鱼: class extends self.ISpriteInstance {},\n\t睡觉: class extends self.ISpriteInstance {},\n\t戴上花: class extends self.ISpriteInstance {},\n\t关灯: class extends self.ISpriteInstance {},\n\t中途开灯: class extends self.ISpriteInstance {},\n\t我害怕关灯: class extends self.ISpriteInstance {},\n\t等待10分钟: class extends self.ISpriteInstance {},\n\t发现流浪鲨鱼: class extends self.ISpriteInstance {},\n\t垃圾桶碰到鲨鱼: class extends self.ISpriteInstance {},\n\t不领养但带回鲨鱼: class extends self.ISpriteInstance {},\n\t好结局: class extends self.ISpriteInstance {},\n\t睡眠按钮被删掉了: class extends self.ISpriteInstance {},\n\t有只饿死的鲨鱼: class extends self.ISpriteInstance {},\n\t你没什么: class extends self.ISpriteInstance {},\n\t纯黑: class extends self.ISpriteInstance {},\n\t开灯: class extends self.ISpriteInstance {},\n\t音频: class extends self.IInstance {},\n\tTouch: class extends self.IInstance {},\n\t全局变量: class extends self.ISpriteInstance {},\n\tText: class extends self.ITextInstance {},\n\tText2: class extends self.ITextInstance {},\n\tText3: class extends self.ITextInstance {},\n\t正式发布记得删掉: class extends self.IInstance {},\n\t纯黑置顶过渡: class extends self.ISpriteInstance {},\n\t结局910纯黑置顶过渡: class extends self.ISpriteInstance {},\n\t过渡: class extends self.ISpriteInstance {},\n\t纯黑过渡: class extends self.ISpriteInstance {},\n\t语言选项: class extends self.ISpriteInstance {},\n\t结局图标: class extends self.ISpriteInstance {},\n\t结局文字: class extends self.ISpriteInstance {},\n\tUI按钮: class extends self.ISpriteInstance {},\n\t字幕: class extends self.ISpriteInstance {},\n\t最终结局图文: class extends self.ISpriteInstance {}\n}\n}\n\n{\n\r\nconst C3 = self.C3;\r\n\r\nfunction unaryminus(n)\r\n{\r\n\treturn (typeof n === \"number\" ? -n : n);\r\n}\r\n\r\nfunction bothNumbers(a, b)\r\n{\r\n\treturn typeof a === \"number\" && typeof b === \"number\";\r\n}\r\n\r\nfunction add(l, r)\r\n{\r\n\tif (bothNumbers(l, r))\r\n\t\treturn l + r;\r\n\telse\r\n\t\treturn l;\r\n}\r\n\r\nfunction subtract(l, r)\r\n{\r\n\tif (bothNumbers(l, r))\r\n\t\treturn l - r;\r\n\telse\r\n\t\treturn l;\r\n}\r\n\r\nfunction multiply(l, r)\r\n{\r\n\tif (bothNumbers(l, r))\r\n\t\treturn l * r;\r\n\telse\r\n\t\treturn l;\r\n}\r\n\r\nfunction divide(l, r)\r\n{\r\n\tif (bothNumbers(l, r))\r\n\t\treturn l / r;\r\n\telse\r\n\t\treturn l;\r\n}\r\n\r\nfunction mod(l, r)\r\n{\r\n\tif (bothNumbers(l, r))\r\n\t\treturn l % r;\r\n\telse\r\n\t\treturn l;\r\n}\r\n\r\nfunction pow(l, r)\r\n{\r\n\tif (bothNumbers(l, r))\r\n\t\treturn Math.pow(l, r);\r\n\telse\r\n\t\treturn l;\r\n}\r\n\r\nfunction and(l, r)\r\n{\r\n\tif (typeof l === \"string\" || typeof r === \"string\")\r\n\t{\r\n\t\t// & with either side string does string concatenation\r\n\t\tlet lstr, rstr;\r\n\r\n\t\tif (typeof l === \"number\")\r\n\t\t\tlstr = (Math.round(l * 1e10) / 1e10).toString();\r\n\t\telse\r\n\t\t\tlstr = l;\r\n\t\t\r\n\t\tif (typeof r === \"number\")\r\n\t\t\trstr = (Math.round(r * 1e10) / 1e10).toString();\r\n\t\telse\r\n\t\t\trstr = r;\r\n\t\t\r\n\t\treturn lstr + rstr;\r\n\t}\r\n\telse\r\n\t{\r\n\t\t// & with neither side a string does logical AND\r\n\t\treturn (l && r ? 1 : 0);\r\n\t}\r\n}\r\n\r\nfunction or(l, r)\r\n{\r\n\tif (bothNumbers(l, r))\r\n\t\treturn (l || r ? 1 : 0);\r\n\telse\r\n\t\treturn l;\r\n}\r\n\r\nself.C3_ExpressionFuncs = [\r\n\t\t() => \"【要调整】结局变量\",\n\t\t() => 1,\n\t\t() => \"【只改一下结局文字和图标】\",\n\t\tp => {\n\t\t\tconst n0 = p._GetNode(0);\n\t\t\tconst f1 = p._GetNode(1).GetBoundMethod();\n\t\t\treturn () => (n0.ExpObject() + (20 * f1()));\n\t\t},\n\t\tp => {\n\t\t\tconst f0 = p._GetNode(0).GetBoundMethod();\n\t\t\tconst n1 = p._GetNode(1);\n\t\t\treturn () => (f0() - n1.ExpInstVar());\n\t\t},\n\t\t() => \"结局文字\",\n\t\t() => 0.8,\n\t\t() => 0.81,\n\t\tp => {\n\t\t\tconst f0 = p._GetNode(0).GetBoundMethod();\n\t\t\treturn () => f0();\n\t\t},\n\t\t() => 0.2,\n\t\t() => -5,\n\t\t() => 0,\n\t\t() => \"结局通用音效\",\n\t\t() => 3,\n\t\t() => \"\",\n\t\t() => \"结局单独事件\",\n\t\t() => 2,\n\t\t() => 70,\n\t\t() => 155,\n\t\t() => 60,\n\t\t() => \"【要调整】结局变量2\",\n\t\t() => \"【只改一下结局文字和图标】2\",\n\t\t() => \"喂养界面BGM\",\n\t\t() => \"结局单独事件2\",\n\t\t() => \"【要调整】结局变量3\",\n\t\t() => \"【只改一下结局文字和图标】3\",\n\t\t() => -7,\n\t\t() => \"结局单独事件3\",\n\t\t() => \"【要调整】结局变量4\",\n\t\t() => \"【只改一下结局文字和图标】4\",\n\t\t() => \"结局单独事件4\",\n\t\t() => \"【要调整】结局变量5\",\n\t\t() => \"【只改一下结局文字和图标】5\",\n\t\t() => \"结局单独事件5\",\n\t\t() => \"鲨鱼头戴花\",\n\t\t() => \"【要调整】结局变量6\",\n\t\t() => \"【只改一下结局文字和图标】6\",\n\t\t() => \"结局单独事件6\",\n\t\t() => \"【要调整】结局变量7\",\n\t\t() => \"不领养（有流浪鲨鱼）\",\n\t\t() => \"不领养（无流浪鲨鱼）\",\n\t\t() => \"【只改一下结局文字和图标】7\",\n\t\t() => \"结局单独事件7\",\n\t\t() => \"【要调整】结局变量8\",\n\t\t() => \"【只改一下结局文字和图标】8\",\n\t\t() => \"结局单独事件8\",\n\t\t() => \"鲨鱼头戴花2\",\n\t\t() => \"【要调整】结局变量9\",\n\t\t() => \"【只改一下结局文字和图标】9\",\n\t\t() => \"结局单独事件9\",\n\t\t() => \"鲨鱼头戴花3\",\n\t\t() => \"开发者调试3\",\n\t\tp => {\n\t\t\tconst n0 = p._GetNode(0);\n\t\t\tconst n1 = p._GetNode(1);\n\t\t\treturn () => and((and(\"关灯时长：\", n0.ExpInstVar()) + \"   关灯阶段：\"), n1.ExpInstVar());\n\t\t},\n\t\t() => \"场景构建2\",\n\t\t() => \"初始构建2\",\n\t\t() => 7,\n\t\t() => \"信号噪音\",\n\t\t() => \"所有室内功能2\",\n\t\t() => \"同意拒绝按钮\",\n\t\t() => \"点击红色\",\n\t\t() => 1.1,\n\t\t() => 0.1,\n\t\t() => 0.3,\n\t\t() => \"点击绿色\",\n\t\t() => 1.5,\n\t\t() => \"鲨鱼说话\",\n\t\t() => \"说话有点哭\",\n\t\t() => 12,\n\t\t() => 0.43,\n\t\t() => 0.175,\n\t\t() => 0.695,\n\t\t() => 0.448,\n\t\t() => \"如果你当初没有领养我就好了\",\n\t\t() => 13,\n\t\t() => 1.324,\n\t\t() => 95,\n\t\t() => 51,\n\t\t() => 3.33,\n\t\t() => \"如果你当初没有领养我就好了2\",\n\t\t() => 14,\n\t\t() => 0.64,\n\t\t() => 0.23,\n\t\t() => 1.49,\n\t\t() => 0.678,\n\t\t() => 15,\n\t\t() => 0.744,\n\t\t() => 160,\n\t\t() => \"谢谢您\",\n\t\t() => 10,\n\t\t() => 0.53,\n\t\t() => 0.11,\n\t\t() => 0.37,\n\t\t() => 0.149,\n\t\t() => 0.682,\n\t\t() => 0.334,\n\t\t() => \"我会成为一只好宠物的\",\n\t\t() => 11,\n\t\t() => 1.78,\n\t\t() => \"ED9&10\",\n\t\t() => \"流浪鲨鱼\",\n\t\t() => 0.94,\n\t\t() => 0.4,\n\t\t() => 0.78,\n\t\t() => 0.85,\n\t\t() => 2.8,\n\t\t() => 0.6,\n\t\t() => \"闭眼哭\",\n\t\t() => 0.349,\n\t\t() => 0.74,\n\t\t() => 0.14,\n\t\t() => 1.94,\n\t\t() => 0.518,\n\t\t() => 4,\n\t\t() => 1.55,\n\t\t() => 5,\n\t\t() => 1.748,\n\t\t() => 0.813,\n\t\t() => 6,\n\t\t() => 0.87,\n\t\t() => 0.336,\n\t\t() => 0.88,\n\t\t() => 0.851,\n\t\t() => 1.58,\n\t\t() => 8,\n\t\t() => 1.169,\n\t\t() => \"恳求\",\n\t\t() => 9,\n\t\t() => \"出门按钮2\",\n\t\t() => \"大自然鸟叫\",\n\t\t() => \"室外2\",\n\t\t() => \"室外场景构建2\",\n\t\t() => \"点击流浪鲨鱼带回家\",\n\t\t() => 1.3,\n\t\t() => 0.5,\n\t\t() => 110,\n\t\t() => \"普通回家2\",\n\t\t() => \"室外场景功能2\",\n\t\t() => \"回家2\",\n\t\t() => \"1\",\n\t\t() => \"特殊喂养界面BGM\",\n\t\t() => \"【要调整】结局变量10\",\n\t\t() => \"【只改一下结局文字和图标】10\",\n\t\t() => \"结局单独事件10\",\n\t\t() => \"鲨鱼头戴花4\",\n\t\t() => \"【要调整】结局变量11\",\n\t\t() => \"【只改一下结局文字和图标】11\",\n\t\t() => \"结局单独事件11\",\n\t\t() => \"鲨鱼头戴花5\",\n\t\t() => \"背景布置\",\n\t\t() => \"场景初始\",\n\t\t() => 100,\n\t\t() => \"过渡\",\n\t\t() => -6,\n\t\t() => \"好结局BGM\",\n\t\t() => \"开始演出\",\n\t\t() => \"微笑\",\n\t\t() => 1.76,\n\t\t() => 0.162,\n\t\t() => 1.278,\n\t\t() => 0.856,\n\t\t() => 0.218,\n\t\t() => \"大笑\",\n\t\t() => 1.778,\n\t\t() => 1.765,\n\t\t() => 1.916,\n\t\t() => \"大笑腮红\",\n\t\t() => 1.258,\n\t\t() => 0.765,\n\t\t() => 0.409,\n\t\t() => \"开心难过\",\n\t\t() => 1.615,\n\t\t() => 1.741,\n\t\t() => 0.979,\n\t\t() => 0.243,\n\t\t() => 1.84,\n\t\t() => 1.254,\n\t\t() => 0.486,\n\t\t() => \"不喜欢\",\n\t\t() => 1.64,\n\t\t() => 0.205,\n\t\t() => \"沉静\",\n\t\t() => 2.275,\n\t\t() => 1.133,\n\t\t() => 0.532,\n\t\t() => 16,\n\t\t() => 1.819,\n\t\t() => 17,\n\t\t() => 1.632,\n\t\t() => 0.335,\n\t\t() => 18,\n\t\t() => 0.882,\n\t\t() => 0.681,\n\t\t() => 19,\n\t\t() => 1.36,\n\t\t() => 0.35,\n\t\t() => 20,\n\t\t() => 1.323,\n\t\t() => 21,\n\t\t() => 0.908,\n\t\t() => 0.347,\n\t\t() => 22,\n\t\t() => 1.989,\n\t\t() => 23,\n\t\t() => 1.605,\n\t\t() => 0.51,\n\t\t() => 24,\n\t\t() => 0.978,\n\t\t() => 25,\n\t\t() => 2.382,\n\t\t() => 26,\n\t\t() => 1.186,\n\t\t() => 0.228,\n\t\t() => 0.71,\n\t\t() => 0.112,\n\t\t() => 0.635,\n\t\t() => 0.408,\n\t\t() => 27,\n\t\t() => 1.01,\n\t\t() => 0.304,\n\t\t() => 28,\n\t\t() => 2.506,\n\t\t() => -10,\n\t\t() => 29,\n\t\t() => 0.165,\n\t\t() => 0.435,\n\t\t() => 45,\n\t\t() => \"mysave\",\n\t\t() => \"背景布置2\",\n\t\t() => \"场景初始2\",\n\t\t() => \"坏结局演出\",\n\t\t() => 0.18,\n\t\t() => -100,\n\t\t() => 2.328,\n\t\t() => 2.4,\n\t\t() => 0.96,\n\t\t() => 1.33,\n\t\t() => 1.41,\n\t\t() => \"噪点\",\n\t\t() => -3,\n\t\t() => \"难过泪\",\n\t\t() => 1.755,\n\t\t() => \"最终坏结局\",\n\t\t() => \"难过泪2\",\n\t\t() => 0.184,\n\t\t() => 2.017,\n\t\t() => 0.737,\n\t\t() => \"闭眼泪\",\n\t\t() => 2.624,\n\t\t() => 1.256,\n\t\t() => \"难过\",\n\t\t() => 1.996,\n\t\t() => 2.141,\n\t\t() => 0.227,\n\t\t() => 0.764,\n\t\t() => 0.24,\n\t\t() => 0.176,\n\t\t() => 1.4,\n\t\t() => 1.312,\n\t\t() => 0.321,\n\t\t() => 1.438,\n\t\t() => 0.261,\n\t\t() => 1.851,\n\t\t() => 1.473,\n\t\t() => 2.889,\n\t\t() => 1.039,\n\t\t() => 2.925,\n\t\t() => 2.006,\n\t\t() => 1.386,\n\t\tp => {\n\t\t\tconst f0 = p._GetNode(0).GetBoundMethod();\n\t\t\treturn () => f0(0, 10);\n\t\t},\n\t\t() => \"不同LOGO音效\",\n\t\t() => 2.25,\n\t\t() => 4.5,\n\t\t() => 6.75,\n\t\tp => {\n\t\t\tconst n0 = p._GetNode(0);\n\t\t\treturn () => and(\"随机数：\", n0.ExpInstVar());\n\t\t},\n\t\t() => \"选语言BGM\",\n\t\t() => \"等待30秒\",\n\t\t() => 35,\n\t\t() => \"触摸小鲨鱼\",\n\t\t() => \"我觉得要不选中文吧？\",\n\t\t() => \"静置\",\n\t\t() => \"说话\",\n\t\t() => \"好耶\",\n\t\t() => 47,\n\t\t() => 87,\n\t\t() => \"开始领养2\",\n\t\tp => {\n\t\t\tconst f0 = p._GetNode(0).GetBoundMethod();\n\t\t\tconst f1 = p._GetNode(1).GetBoundMethod();\n\t\t\treturn () => f0(f1(0, 4));\n\t\t},\n\t\t() => \"马赛克\",\n\t\tp => {\n\t\t\tconst f0 = p._GetNode(0).GetBoundMethod();\n\t\t\tconst n1 = p._GetNode(1);\n\t\t\treturn () => ((f0() - n1.ExpInstVar()) * 70);\n\t\t},\n\t\t() => \"被点击\",\n\t\t() => \"不要再点我啦\",\n\t\t() => 1.2,\n\t\t() => \"不要再点我啦2\",\n\t\t() => \"不领养\",\n\t\t() => \"点击不要\",\n\t\tp => {\n\t\t\tconst f0 = p._GetNode(0).GetBoundMethod();\n\t\t\treturn () => f0(0, 4);\n\t\t},\n\t\tp => {\n\t\t\tconst f0 = p._GetNode(0).GetBoundMethod();\n\t\t\treturn () => f0(68, 100);\n\t\t},\n\t\tp => {\n\t\t\tconst f0 = p._GetNode(0).GetBoundMethod();\n\t\t\treturn () => f0(20, 100);\n\t\t},\n\t\t() => 156,\n\t\t() => 196,\n\t\t() => -58,\n\t\t() => -18,\n\t\t() => \"开发者调试2\",\n\t\tp => {\n\t\t\tconst n0 = p._GetNode(0);\n\t\t\treturn () => and(\"关灯时长：\", n0.ExpInstVar());\n\t\t},\n\t\t() => \"场景构建\",\n\t\t() => \"初始构建\",\n\t\tp => {\n\t\t\tconst n0 = p._GetNode(0);\n\t\t\treturn () => n0.ExpInstVar();\n\t\t},\n\t\t() => -12,\n\t\t() => \"膨胀\",\n\t\t() => \"鲨鱼进食\",\n\t\t() => \"所有室内功能\",\n\t\t() => \"耐饿\",\n\t\t() => \"饿出走\",\n\t\t() => \"新手引导\",\n\t\t() => \"可喂食\",\n\t\t() => \"不可喂食\",\n\t\t() => \"鲨鱼祈食不能说话\",\n\t\t() => \"饿肚子时长\",\n\t\t() => \"锻炼\",\n\t\t() => \"睡眠\",\n\t\t() => \"关灯\",\n\t\t() => \"垃圾桶\",\n\t\t() => \"出门按钮\",\n\t\t() => \"垃圾桶按钮\",\n\t\t() => \"方形鲨鱼\",\n\t\t() => \"关灯的世界\",\n\t\t() => \"创造垃圾桶\",\n\t\t() => \"消除垃圾桶\",\n\t\t() => \"关灯阶段5开灯\",\n\t\t() => \"关灯阶段4开灯\",\n\t\t() => \"关灯阶段123开灯\",\n\t\t() => \"小鲨鱼被沃玛删除了再开灯\",\n\t\t() => \"计时\",\n\t\t() => \"能关灯\",\n\t\t() => \"不能再关灯\",\n\t\t() => \"【结局8】开灯\",\n\t\t() => \"灰度\",\n\t\t() => \"亮度\",\n\t\t() => \"花出现\",\n\t\t() => \"最初引导\",\n\t\t() => \"多周目\",\n\t\t() => \"难过的开头\",\n\t\t() => \"你没什么开头\",\n\t\t() => \"常规说话\",\n\t\t() => \"喂食按钮\",\n\t\t() => \"与苹果碰撞\",\n\t\t() => \"高兴\",\n\t\tp => {\n\t\t\tconst n0 = p._GetNode(0);\n\t\t\treturn () => n0.ExpObject();\n\t\t},\n\t\t() => 49,\n\t\t() => \"期待\",\n\t\t() => \"【结局3】饿到离家出走\",\n\t\t() => \"悲伤\",\n\t\t() => 0.98,\n\t\t() => \"丧气悲伤\",\n\t\t() => 12.5,\n\t\t() => 13.6,\n\t\t() => 30,\n\t\t() => 1.6,\n\t\t() => 2.9,\n\t\t() => 14.4,\n\t\t() => 15.6,\n\t\t() => 32.2,\n\t\t() => 34.3,\n\t\t() => 2.5,\n\t\t() => 62.7,\n\t\t() => 65.8,\n\t\t() => 90,\n\t\t() => \"离家出走\",\n\t\t() => 0.7,\n\t\t() => \"离家出走翻转\",\n\t\t() => 180,\n\t\t() => \"【结局7】反悔的饲主演出\",\n\t\t() => 120,\n\t\t() => 80,\n\t\t() => 40,\n\t\t() => \"哇!新朋友!\",\n\t\t() => \"说话口型\",\n\t\t() => \"点击小鸭子\",\n\t\t() => 1.7,\n\t\t() => 2.1,\n\t\t() => 2.24,\n\t\t() => 0.93,\n\t\t() => 1.44,\n\t\t() => \"高兴腮红\",\n\t\t() => \"功能解锁控制\",\n\t\t() => \"锻炼按钮\",\n\t\t() => \"喂食\",\n\t\t() => \"苹果碰撞音效\",\n\t\t() => \"食物苹果\",\n\t\t() => \"HSL调整\",\n\t\tp => {\n\t\t\tconst f0 = p._GetNode(0).GetBoundMethod();\n\t\t\treturn () => f0((-3), 3);\n\t\t},\n\t\t() => \"进食后语音\",\n\t\t() => 0.9,\n\t\t() => \"不太高兴\",\n\t\t() => 3.6,\n\t\t() => \"开关灯\",\n\t\t() => \"有点方\",\n\t\t() => 42,\n\t\t() => 556,\n\t\t() => \"非常方\",\n\t\t() => 61,\n\t\t() => \"完全方\",\n\t\t() => 557,\n\t\t() => \"进食后体积变化\",\n\t\t() => 165,\n\t\t() => 230,\n\t\t() => 48,\n\t\t() => 44,\n\t\t() => 295,\n\t\t() => 46,\n\t\t() => 43,\n\t\t() => 360,\n\t\t() => 425,\n\t\t() => 41,\n\t\t() => 490,\n\t\t() => 36,\n\t\t() => 39,\n\t\t() => 555,\n\t\t() => 32,\n\t\t() => \"鲨鱼锻炼\",\n\t\t() => \"锻炼动画和语音【初次锻炼】\",\n\t\t() => \"锻炼A\",\n\t\t() => \"睡眠按钮\",\n\t\t() => 1.9,\n\t\t() => 2.3,\n\t\t() => \"锻炼B\",\n\t\t() => \"锻炼C\",\n\t\t() => 3.5,\n\t\t() => \"锻炼D\",\n\t\t() => \"锻炼D锻炼完\",\n\t\t() => 3.1,\n\t\t() => \"锻炼E累死了\",\n\t\t() => \"锻炼动画和语音【重复锻炼】\",\n\t\t() => \"鲨鱼睡眠\",\n\t\t() => \"抓狂\",\n\t\t() => \"疑问\",\n\t\t() => 2.7,\n\t\t() => 0.38,\n\t\t() => 1.8,\n\t\t() => \"普通开灯\",\n\t\t() => \"被花杀死\",\n\t\t() => \"关灯后的BGM\",\n\t\t() => \"雪花噪音\",\n\t\t() => \"实际垃圾桶\",\n\t\t() => \"垃圾桶删ZZ\",\n\t\t() => \"大惊\",\n\t\t() => 0.45,\n\t\t() => \"垃圾桶删东西\",\n\t\t() => \"触碰让垃圾桶生效\",\n\t\t() => 92,\n\t\t() => -20,\n\t\t() => \"室外场景功能\",\n\t\t() => 79,\n\t\t() => \"啊!你是……!\",\n\t\t() => \"说话1\",\n\t\t() => \"难道你是被喂成……\",\n\t\t() => \"说话2\",\n\t\t() => \"说话3\",\n\t\t() => \"说完\",\n\t\t() => \"我……好吧\",\n\t\t() => \"说完2\",\n\t\t() => 163,\n\t\t() => \"室外\",\n\t\t() => \"室外场景构建\",\n\t\t() => \"和流浪鲨鱼互动\",\n\t\t() => \"你明明看见我了\",\n\t\t() => \"普通回家\",\n\t\t() => \"回家进入ED7\",\n\t\t() => \"信\",\n\t\t() => \"采花\",\n\t\t() => \"发现物出现\",\n\t\t() => \"饿死的鲨鱼\",\n\t\t() => \"点击星星掉落\",\n\t\t() => 55,\n\t\t() => 72,\n\t\t() => 115,\n\t\t() => \"回家\",\n\t\t() => \"你明明看到我了\",\n\t\t() => \"关灯计时事件\",\n\t\t() => \"关灯阶段事件\",\n\t\t() => \"关灯说话\",\n\t\t() => 2.2,\n\t\t() => 18.2,\n\t\t() => 1.85,\n\t\t() => 2.26,\n\t\t() => 2.59,\n\t\t() => 1.17,\n\t\t() => 1.43,\n\t\t() => 0.42,\n\t\t() => 0.44,\n\t\t() => 1.38,\n\t\t() => 2.66,\n\t\t() => \"关灯太久而死\",\n\t\t() => \"开发者调试\",\n\t\tp => {\n\t\t\tconst n0 = p._GetNode(0);\n\t\t\tconst n1 = p._GetNode(1);\n\t\t\tconst n2 = p._GetNode(2);\n\t\t\tconst n3 = p._GetNode(3);\n\t\t\tconst n4 = p._GetNode(4);\n\t\t\tconst n5 = p._GetNode(5);\n\t\t\tconst n6 = p._GetNode(6);\n\t\t\tconst n7 = p._GetNode(7);\n\t\t\tconst n8 = p._GetNode(8);\n\t\t\tconst n9 = p._GetNode(9);\n\t\t\tconst n10 = p._GetNode(10);\n\t\t\tconst n11 = p._GetNode(11);\n\t\t\tconst n12 = p._GetNode(12);\n\t\t\tconst n13 = p._GetNode(13);\n\t\t\tconst n14 = p._GetNode(14);\n\t\t\tconst n15 = p._GetNode(15);\n\t\t\treturn () => and((and((and((and((and((and((and((and((and((and((and((and((and((and((and((and(\"当前解锁结局数：\", n0.ExpInstVar()) + \" 1:\"), n1.ExpInstVar()) + \" 2:\"), n2.ExpInstVar()) + \" 3:\"), n3.ExpInstVar()) + \" 4:\"), n4.ExpInstVar()) + \" 5:\"), n5.ExpInstVar()) + \" 6:\"), n6.ExpInstVar()) + \" 7:\"), n7.ExpInstVar()) + \" 8:\"), n8.ExpInstVar()) + \" 9:\"), n9.ExpInstVar()) + \" 10:\"), n10.ExpInstVar()) + \" 11:\"), n11.ExpInstVar()) + \" 12:\"), n12.ExpInstVar()) + \" 13:\"), n13.ExpInstVar()) + \" 14:\"), n14.ExpInstVar()) + \" 有流浪鲨鱼:\"), n15.ExpInstVar());\n\t\t},\n\t\t() => \"开始领养\",\n\t\t() => \"右上角的叉\",\n\t\t() => 99,\n\t\t() => 34,\n\t\t() => 200,\n\t\t() => 240,\n\t\t() => 0.33,\n\t\t() => 0.264,\n\t\t() => 0.835,\n\t\t() => \"关闭叉叉\",\n\t\t() => 0.432,\n\t\t() => 1.622,\n\t\t() => 2.29,\n\t\t() => 0.317,\n\t\t() => 2.39,\n\t\t() => 4.4,\n\t\t() => 3.195,\n\t\t() => 2.07,\n\t\t() => 1.08,\n\t\tp => {\n\t\t\tconst n0 = p._GetNode(0);\n\t\t\tconst n1 = p._GetNode(1);\n\t\t\tconst n2 = p._GetNode(2);\n\t\t\tconst n3 = p._GetNode(3);\n\t\t\tconst n4 = p._GetNode(4);\n\t\t\tconst n5 = p._GetNode(5);\n\t\t\tconst n6 = p._GetNode(6);\n\t\t\tconst n7 = p._GetNode(7);\n\t\t\tconst n8 = p._GetNode(8);\n\t\t\tconst n9 = p._GetNode(9);\n\t\t\tconst n10 = p._GetNode(10);\n\t\t\tconst n11 = p._GetNode(11);\n\t\t\tconst n12 = p._GetNode(12);\n\t\t\tconst n13 = p._GetNode(13);\n\t\t\treturn () => (((((((((((((n0.ExpInstVar() + n1.ExpInstVar()) + n2.ExpInstVar()) + n3.ExpInstVar()) + n4.ExpInstVar()) + n5.ExpInstVar()) + n6.ExpInstVar()) + n7.ExpInstVar()) + n8.ExpInstVar()) + n9.ExpInstVar()) + n10.ExpInstVar()) + n11.ExpInstVar()) + n12.ExpInstVar()) + n13.ExpInstVar());\n\t\t},\n\t\t() => \"点击不要2\",\n\t\t() => \"点击不要3\",\n\t\t() => \"等待40秒\"\r\n];\r\n\r\n\n}\n\n\n//working/528058722/__c3root__.js\nvoid(function($$require, $$exports, $$module) {\n  var module$working$528058722$c3runtime = $$require(\"working/528058722/c3runtime.js\");\n}, \"working/528058722/__c3root__.js\", [\"working/528058722/c3runtime.js\"]);\n\n"
    },
	"data.json": {
		"type": "application/json",
		"str": "{\"project\":[\"我的小鲨鱼\",null,[[0,false,true,true,true,true,true,true,true,false,false,false,false,true,true,true,true],[4,false,true,true,true,true,true,true,true,false,false,false,false,true,true,false,true],[5,false,true,true,true,false,false,false,false,false,true,true,true,true,false,false,true],[8,false,true,true,false,true,true,true,true,true,false,false,false,true,false,false,true],[9,false,true,true,true,true,true,true,true,true,false,false,false,true,true,false,true],[16,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],[17,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],[18,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]],[[\"背景渐变叠加\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,851194632137727,[[\"images/shared-1-sheet0.png\",34264,129,257,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,832254203153750,[],null,0,null],[\"要领养吗\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,803454658927025,[[\"images/shared-1-sheet3.png\",17602,1,1,105,52,true,1,0.5,0.5,[[\"右上角的叉\",0.8666666666666667,0.21153846153846154]],[-0.4714285714285714,-0.4807692307692308,0.4904761904761905,-0.4230769230769231,0.4904761904761905,0.4423076923076923,0.3666666666666667,0.5,-0.35714285714285715,0.5,-0.49047619047619045,0.42307692307692313],\"\"]]]],[[\"补间动画\",1,141943851233941,1],[\"正弦\",2,960555022477239,2]],false,false,389355002266891,[],null,3,null],[\"好的\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,823272429087812,[[\"images/shared-1-sheet3.png\",17602,61,203,38,22,true,1,0.5,0.5,[],[-0.5,-0.5,0.5,-0.5,0.5,-0.5,0.5,0.4545454545454546,-0.4736842105263158,0.31818181818181823,-0.5,-0.5],\"\"]]]],[[\"补间动画\",1,615381978903748,1]],false,false,224618321759871,[],null,4,null],[\"不要\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,541760287618537,[[\"images/shared-1-sheet3.png\",17602,85,215,38,22,true,1,0.5,0.5,[],[-0.5,-0.5,0.5,-0.5,0.5,-0.5,0.42105263157894735,0.4545454545454546,-0.5,0.31818181818181823,-0.5,-0.5],\"\"]]]],[[\"补间动画\",1,245170052123164,1]],false,false,924142582943815,[],null,5,null],[\"右上角关闭\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,428316588837430,[[\"images/shared-1-sheet4.png\",396,19,17,11,11,false,1,0.5,0.5,[],[-0.4166666666666667,-0.4166666666666667,0.41666666666666663,-0.4166666666666667,0.41666666666666663,0.41666666666666663,-0.4166666666666667,0.41666666666666663],\"\"]]]],[[\"固定\",3,855429446289171,6]],false,false,422637406302004,[],null,7,null],[\"真的放弃吗\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,848996702153568,[[\"images/shared-1-sheet3.png\",17602,55,1,105,52,true,1,0.5,0.5,[],[],\"\"]]]],[[\"补间动画\",1,140965520299551,1]],false,false,850210065728744,[],null,8,null],[\"是的\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,232755849722643,[[\"images/shared-1-sheet3.png\",17602,109,225,38,22,false,1,0.5,0.5,[],[-0.42105263157894735,-0.45454545454545453,0.4736842105263158,-0.3181818181818182,0.42105263157894735,0.4545454545454546,-0.4736842105263158,0.31818181818181823],\"\"]]]],[[\"补间动画\",1,850197648828585,1]],false,false,134454720714347,[],null,9,null],[\"取消\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,921721749345352,[[\"images/shared-1-sheet3.png\",17602,149,225,38,22,false,1,0.5,0.5,[],[-0.42105263157894735,-0.45454545454545453,0.4736842105263158,-0.3181818181818182,0.42105263157894735,0.4545454545454546,-0.4736842105263158,0.31818181818181823],\"\"]]]],[[\"补间动画\",1,749253434787552,1]],false,false,559565973893845,[],null,10,null],[\"拜托不要同意\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,811699814225740,[[\"images/shared-1-sheet1.png\",22857,257,385,120,120,false,1,0.5,0.5,[],[-0.35,-0.4083333333333333,0.3833333333333333,-0.3833333333333333,0.3833333333333333,-0.29166666666666663,-0.375,-0.29166666666666663],\"\"]]]],[],false,false,368785094416548,[],null,11,null],[\"当前解锁结局数\",4,false,[],0,0,null,null,[],false,false,846211115266531,[],null,12,null],[\"按钮1\",5,false,[],0,0,null,null,[],false,false,317653727538675,[],null,13,null],[\"按钮10\",5,false,[],0,0,null,null,[],false,false,405245193549412,[],null,14,null],[\"按钮11\",5,false,[],0,0,null,null,[],false,false,161681733544049,[],null,15,null],[\"按钮12\",5,false,[],0,0,null,null,[],false,false,154648572393107,[],null,16,null],[\"按钮13\",5,false,[],0,0,null,null,[],false,false,704476184724933,[],null,17,null],[\"按钮14\",5,false,[],0,0,null,null,[],false,false,427076344574788,[],null,18,null],[\"按钮2\",5,false,[],0,0,null,null,[],false,false,692060341052099,[],null,19,null],[\"按钮3\",5,false,[],0,0,null,null,[],false,false,212045183224782,[],null,20,null],[\"按钮4\",5,false,[],0,0,null,null,[],false,false,461012019756399,[],null,21,null],[\"按钮5\",5,false,[],0,0,null,null,[],false,false,544396297535633,[],null,22,null],[\"按钮6\",5,false,[],0,0,null,null,[],false,false,737218952000730,[],null,23,null],[\"按钮7\",5,false,[],0,0,null,null,[],false,false,153809809774620,[],null,24,null],[\"按钮8\",5,false,[],0,0,null,null,[],false,false,356005406676594,[],null,25,null],[\"按钮9\",5,false,[],0,0,null,null,[],false,false,420868477016737,[],null,26,null],[\"结局11躺着的人\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,420063630139221,[[\"images/shared-1-sheet3.png\",17602,209,1,54,45,true,1,0.5,0.5,[],[-0.18518518518518517,-0.4777777777777778,-0.018518518518518545,-0.4777777777777778,0.4814814814814815,-0.18888888888888888,0.4629629629629629,0.3222222222222222,0.16666666666666663,0.47777777777777775,-0.16666666666666669,0.3222222222222222,-0.4814814814814814,-0.09999999999999998],\"\"]]]],[],false,false,911587428925113,[],null,27,null],[\"结局11文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,204163753920664,[[\"images/shared-1-sheet2.png\",18772,129,385,90,103,false,1,0.5,0.4854368932038835,[],[-0.26666666666666666,-0.47572815533980584,0.2222222222222222,-0.47572815533980584,0.3222222222222222,-0.4563106796116505,0.48888888888888893,0.3980582524271845,0.47777777777777775,0.5048543689320388,-0.28888888888888886,0.5048543689320388,-0.4888888888888889,0.4368932038834952,-0.3111111111111111,-0.41747572815533984],\"\"]]]],[],false,false,507351345185975,[],null,28,null],[\"坚定的你\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,676433032818009,[[\"images/shared-1-sheet3.png\",17602,1,206,58,16,false,1,0.5,0.5,[],[-0.41379310344827586,-0.4375,0.27586206896551724,-0.4375,0.48275862068965514,-0.3125,0.4655172413793104,0.3125,0.31034482758620685,0.4375,-0.4827586206896552,0.375],\"\"]]]],[[\"移动到\",6,768339304369295,29]],false,false,351341056521537,[],null,30,null],[\"旋转炫光\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,732954816545906,[[\"images/shared-1-sheet0.png\",34264,257,385,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[[\"旋转\",7,739637497846119,31],[\"正弦\",2,874868754744663,2]],false,false,703468068835862,[],null,32,null],[\"粒子\",8,false,[],0,0,[\"images/shared-1-sheet5.png\",115,0,0,5,5,false],null,[],false,false,263605739992645,[],null,33,null],[\"结局3流浪鲨鱼\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,649761355906911,[[\"images/shared-1-sheet3.png\",17602,49,108,48,41,true,1,0.5,0.5,[],[-0.4212962962962963,-0.5,-0.004629629629629761,-0.5,0.5,-0.29674796747967475,0.5,0.5,0.45833333333333337,0.5,-0.375,0.5,-0.5,-0.036585365853658514],\"\"]]]],[],false,false,634748790353160,[],null,34,null],[\"结局3文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,581046523370292,[[\"images/shared-1-sheet0.png\",34264,1,385,120,120,false,1,0.5,0.5,[],[-0.5,-0.5,0.3756218905472638,-0.5,0.5,-0.5,0.5,0.43222735413328317,0.5,0.5,-0.5,0.5,-0.5,0.47747195777170326,-0.5,-0.5],\"\"]]]],[],false,false,896279570678052,[],null,35,null],[\"结局1胖胖鲨\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,622641391155329,[[\"images/shared-1-sheet3.png\",17602,92,133,43,43,false,1,0.5,0.5,[],[-0.5,-0.5,-0.024547803617571418,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,0.11883153715258077],\"\"]]]],[],false,false,336279893886637,[],null,36,null],[\"结局1文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,926587931574960,[[\"images/shared-1-sheet0.png\",34264,129,385,120,120,false,1,0.5,0.5,[],[-0.26666666666666666,-0.49029126213592233,0.2222222222222222,-0.49029126213592233,0.3222222222222222,-0.470873786407767,0.48888888888888893,0.383495145631068,0.47777777777777775,0.49029126213592233,-0.28888888888888886,0.49029126213592233,-0.4888888888888889,0.4223300970873787,-0.3111111111111111,-0.43203883495145634],\"\"]]]],[],false,false,445536932938974,[],null,37,null],[\"方形鲨鱼出场\",0,false,[],2,0,null,[[\"出场\",5,true,1,0,false,817894377135619,[[\"images/shared-1-sheet3.png\",17602,92,133,43,43,false,1,0.5,0.5,[],[-0.47674418604651164,-0.47674418604651164,0.4767441860465116,-0.47674418604651164,0.4767441860465116,0.4767441860465116,-0.47674418604651164,0.4767441860465116],\"\"]]],[\"说话1\",5,true,1,0,false,162900397490008,[[\"images/方形鲨鱼出场-sheet0.png\",3756,65,193,43,43,false,1,0.5,0.5,[],[-0.47674418604651164,-0.47674418604651164,0.4767441860465116,-0.47674418604651164,0.4767441860465116,0.4767441860465116,-0.47674418604651164,0.4767441860465116],\"\"],[\"images/方形鲨鱼出场-sheet0.png\",3756,1,193,43,43,false,1,0.5,0.5,[],[-0.47674418604651164,-0.47674418604651164,0.4767441860465116,-0.47674418604651164,0.4767441860465116,0.4767441860465116,-0.47674418604651164,0.4767441860465116],\"\"]]],[\"说话2\",5,true,1,0,false,343430679543858,[[\"images/方形鲨鱼出场-sheet0.png\",3756,65,129,43,43,false,1,0.5,0.5,[],[-0.47674418604651164,-0.47674418604651164,0.4767441860465116,-0.47674418604651164,0.4767441860465116,0.4767441860465116,-0.47674418604651164,0.4767441860465116],\"\"],[\"images/方形鲨鱼出场-sheet0.png\",3756,1,129,43,43,false,1,0.5,0.5,[],[-0.47674418604651164,-0.47674418604651164,0.4767441860465116,-0.47674418604651164,0.4767441860465116,0.4767441860465116,-0.47674418604651164,0.4767441860465116],\"\"]]],[\"说话3\",5,true,1,0,false,751358615513866,[[\"images/方形鲨鱼出场-sheet0.png\",3756,65,65,43,43,false,1,0.5,0.5,[],[-0.47674418604651164,-0.47674418604651164,0.4767441860465116,-0.47674418604651164,0.4767441860465116,0.4767441860465116,-0.47674418604651164,0.4767441860465116],\"\"],[\"images/方形鲨鱼出场-sheet0.png\",3756,1,65,43,43,false,1,0.5,0.5,[],[-0.47674418604651164,-0.47674418604651164,0.4767441860465116,-0.47674418604651164,0.4767441860465116,0.4767441860465116,-0.47674418604651164,0.4767441860465116],\"\"]]],[\"说完\",5,true,1,0,false,697359573096318,[[\"images/方形鲨鱼出场-sheet0.png\",3756,65,1,43,43,false,1,0.5,0.5,[],[-0.47674418604651164,-0.47674418604651164,0.4767441860465116,-0.47674418604651164,0.4767441860465116,0.4767441860465116,-0.47674418604651164,0.4767441860465116],\"\"]]],[\"说完2\",5,true,1,0,false,226698177585858,[[\"images/方形鲨鱼出场-sheet0.png\",3756,1,1,43,43,false,1,0.5,0.5,[],[0.4767441860465116,0.4767441860465116,-0.4767441860465116,0.4767441860465116,-0.4767441860465116,-0.47674418604651164,0.4767441860465116,-0.47674418604651164],\"\"]]]],[[\"移动到\",6,419480052427030,29],[\"正弦\",2,454132621741722,2]],false,false,385472292277177,[],null,38,null],[\"结局2图案\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,523059434265905,[[\"images/shared-1-sheet3.png\",17602,1,108,51,46,true,1,0.5,0.5,[],[-0.5,-0.5,-0.04795561635506995,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,0.3969518360502108],\"\"]]]],[],false,false,994627728969606,[],null,39,null],[\"结局2文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,122339686279099,[[\"images/shared-1-sheet1.png\",22857,1,1,120,120,false,1,0.5,0.5,[],[-0.26666666666666666,-0.49029126213592233,0.2222222222222222,-0.49029126213592233,0.3222222222222222,-0.470873786407767,0.48888888888888893,0.383495145631068,0.47777777777777775,0.49029126213592233,-0.28888888888888886,0.49029126213592233,-0.4888888888888889,0.4223300970873787,-0.3111111111111111,-0.43203883495145634],\"\"]]]],[],false,false,286672054924544,[],null,40,null],[\"结局5文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,679120641554820,[[\"images/shared-1-sheet1.png\",22857,129,1,120,120,false,1,0.5,0.5,[],[-0.5,-0.5,0.3756218905472638,-0.5,0.5,-0.5,0.5,0.43222735413328317,0.5,0.5,-0.5,0.5,-0.5,0.47747195777170326,-0.5,-0.5],\"\"]]]],[],false,false,557177724669643,[],null,41,null],[\"结局5图案\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,464161006989637,[[\"images/shared-1-sheet3.png\",17602,137,137,58,30,true,1,0.5,0.5,[],[-0.5,-0.5,0.09386973180076597,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.3796747967479675],\"\"],[\"images/shared-1-sheet3.png\",17602,169,137,58,30,true,1,0.5,0.5,[],[-0.5,-0.5,0.09386973180076597,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.3796747967479675],\"\"]]]],[],false,false,248829331196790,[],null,42,null],[\"结局6图案\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,466136923201534,[[\"images/shared-1-sheet3.png\",17602,49,158,43,39,true,1,0.5,0.5,[],[-0.5,-0.5,0.27358994921144,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5],\"\"],[\"images/shared-1-sheet3.png\",17602,1,161,43,39,true,1,0.5,0.5,[],[-0.5,-0.5,0.27358994921144,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5],\"\"]]]],[],false,false,379625642212653,[],null,43,null],[\"结局6文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,744845930102958,[[\"images/shared-1-sheet1.png\",22857,257,1,120,120,false,1,0.5,0.5,[],[-0.5,-0.5,0.3756218905472638,-0.5,0.5,-0.5,0.5,0.43222735413328317,0.5,0.5,-0.5,0.5,-0.5,0.47747195777170326,-0.5,-0.5],\"\"]]]],[],false,false,161184834424300,[],null,44,null],[\"结局7图案\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,204327011421373,[[\"images/shared-1-sheet3.png\",17602,109,1,74,48,true,1,0.5,0.5,[],[-0.30405405405405406,-0.3854166666666667,0.1454644299471881,-0.3854166666666667,0.277027027027027,-0.3854166666666667,0.277027027027027,0.42708333333333337,0.277027027027027,0.42708333333333337,-0.30405405405405406,0.42708333333333337,-0.30405405405405406,-0.3854166666666667],\"\"],[\"images/shared-1-sheet3.png\",17602,159,1,74,48,true,1,0.5,0.5,[],[-0.30405405405405406,-0.3854166666666667,0.1454644299471881,-0.3854166666666667,0.277027027027027,-0.3854166666666667,0.277027027027027,0.42708333333333337,0.277027027027027,0.42708333333333337,-0.30405405405405406,0.42708333333333337,-0.30405405405405406,-0.3854166666666667],\"\"]]]],[],false,false,254152861386638,[],null,45,null],[\"结局7文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,569618194944547,[[\"images/shared-1-sheet1.png\",22857,385,1,120,120,false,1,0.5,0.5,[],[-0.5,-0.5,0.3756218905472638,-0.5,0.5,-0.5,0.5,0.43222735413328317,0.5,0.5,-0.5,0.5,-0.5,0.47747195777170326,-0.5,-0.5],\"\"]]]],[],false,false,207752703646950,[],null,46,null],[\"结局8图案\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,585013710478186,[[\"images/shared-1-sheet3.png\",17602,109,77,54,52,true,1,0.46296296296296297,0.8076923076923077,[],[-0.46296296296296297,-0.8076923076923077,0.20859940400170224,-0.8076923076923077,0.537037037037037,-0.8076923076923077,0.537037037037037,0.1923076923076923,0.537037037037037,0.1923076923076923,-0.46296296296296297,0.1923076923076923,-0.46296296296296297,-0.8076923076923077],\"\"]]]],[],false,false,477263860823297,[],null,47,null],[\"结局8文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,391562823854982,[[\"images/shared-1-sheet1.png\",22857,1,129,120,120,false,1,0.5,0.5,[],[-0.5,-0.5,0.3756218905472638,-0.5,0.5,-0.5,0.5,0.43222735413328317,0.5,0.5,-0.5,0.5,-0.5,0.47747195777170326,-0.5,-0.5],\"\"]]]],[],false,false,924966688694481,[],null,48,null],[\"结局4图案\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,760878517803746,[[\"images/shared-1-sheet1.png\",22857,257,129,120,120,false,1,0.5,0.5,[],[-0.5,-0.5,0.09386973180076597,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.3796747967479675],\"\"]]]],[],false,false,865160452224717,[],null,49,null],[\"结局4文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,580885863883918,[[\"images/shared-1-sheet1.png\",22857,129,129,120,120,false,1,0.5,0.5,[],[-0.5,-0.5,0.3756218905472638,-0.5,0.5,-0.5,0.5,0.43222735413328317,0.5,0.5,-0.5,0.5,-0.5,0.47747195777170326,-0.5,-0.5],\"\"]]]],[],false,false,967971903147564,[],null,50,null],[\"特殊室内背景\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,319680917052276,[[\"images/shared-1-sheet2.png\",18772,1,385,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,541866743502098,[],null,51,null],[\"特殊外出背景\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,292125168568139,[[\"images/shared-1-sheet1.png\",22857,385,385,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,888425211567594,[],null,52,null],[\"结局910带回家的流浪鲨鱼\",0,false,[],3,0,null,[[\"流浪鲨鱼\",5,true,1,0,false,682822582617900,[[\"images/shared-0-sheet3.png\",15203,67,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"],[\"images/shared-0-sheet3.png\",15203,110,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"]]],[\"说话有点哭\",5,true,1,0,false,689342014793200,[[\"images/shared-0-sheet3.png\",15203,153,125,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"],[\"images/shared-0-sheet3.png\",15203,196,125,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"]]],[\"闭眼哭\",5,true,1,0,false,777587062955563,[[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,193,65,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"],[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,44,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"]]],[\"恳求\",5,true,1,0,false,960931988324555,[[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,87,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"],[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,130,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"]]],[\"谢谢您\",5,true,1,0,false,272300122874343,[[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,87,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"],[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,193,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"]]],[\"我会成为一只好宠物的\",5,true,1,0,false,626006475841588,[[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,1,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"],[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,44,193,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"]]],[\"如果你当初没有领养我就好了\",5,true,1,0,false,486258429797277,[[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,87,193,48,41,true,1,0.4375,0.524390243902439,[],[0.29166666666666674,-0.43902439024390244,0.375,-0.34146341463414637,0.5416666666666666,0,0.25,0.3902439024390244,-0.41666666666666663,0.4390243902439024,-0.41666666666666663,0.07317073170731703,-0.39583333333333337,-0.14634146341463417,-0.33333333333333337,-0.34146341463414637,-0.20833333333333337,-0.48780487804878053],\"\"],[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,130,193,48,41,true,1,0.4375,0.524390243902439,[],[0.29166666666666674,-0.43902439024390244,0.375,-0.34146341463414637,0.5416666666666666,0,0.25,0.3902439024390244,-0.41666666666666663,0.4390243902439024,-0.41666666666666663,0.07317073170731703,-0.39583333333333337,-0.14634146341463417,-0.33333333333333337,-0.34146341463414637,-0.20833333333333337,-0.48780487804878053],\"\"]]],[\"如果你当初没有领养我就好了2\",5,true,1,0,false,952625156607180,[[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,193,193,48,41,true,1,0.4375,0.524390243902439,[],[0.29166666666666674,-0.43902439024390244,0.375,-0.34146341463414637,0.5416666666666666,0,0.25,0.3902439024390244,-0.41666666666666663,0.4390243902439024,-0.41666666666666663,0.07317073170731703,-0.39583333333333337,-0.14634146341463417,-0.33333333333333337,-0.34146341463414637,-0.20833333333333337,-0.48780487804878053],\"\"],[\"images/结局910带回家的流浪鲨鱼-sheet0.png\",7496,1,193,48,41,true,1,0.4375,0.524390243902439,[],[0.29166666666666674,-0.43902439024390244,0.375,-0.34146341463414637,0.5416666666666666,0,0.25,0.3902439024390244,-0.41666666666666663,0.4390243902439024,-0.41666666666666663,0.07317073170731703,-0.39583333333333337,-0.14634146341463417,-0.33333333333333337,-0.34146341463414637,-0.20833333333333337,-0.48780487804878053],\"\"]]]],[[\"正弦大小\",2,737176631232479,53],[\"补间动画\",1,885082839847533,1],[\"移动到\",6,177301318758724,29]],false,false,514520978791548,[],null,54,null],[\"绿色按钮\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,350516417573097,[[\"images/shared-1-sheet3.png\",17602,1,225,27,27,false,1,0.48148148148148145,0.4444444444444444,[],[-0.3333333333333333,-0.4074074074074074,0.5185185185185186,-0.4074074074074074,0.5185185185185186,-0.2962962962962963,0.5185185185185186,0.5185185185185185,-0.2962962962962963,0.5185185185185185,-0.4444444444444444,0.37037037037037035],\"\"]]]],[[\"正弦\",2,978949245998618,2],[\"补间动画\",1,464410672811948,1]],false,false,952886348556019,[],null,55,null],[\"红色按钮\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,197774029142901,[[\"images/shared-1-sheet3.png\",17602,30,225,27,27,false,1,0.48148148148148145,0.4444444444444444,[],[-0.48148148148148145,-0.4074074074074074,0.3333333333333333,-0.4074074074074074,0.48148148148148145,-0.2962962962962963,0.3703703703703704,0.5185185185185185,-0.48148148148148145,0.5185185185185185,-0.48148148148148145,0.37037037037037035],\"\"]]]],[[\"正弦\",2,673958757799635,2],[\"补间动画\",1,693497117804669,1]],false,false,536129569212845,[],null,56,null],[\"结局9图案\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,138008669463022,[[\"images/shared-1-sheet3.png\",17602,163,77,58,41,true,1,0.5,0.5,[],[-0.5,-0.5,0.09386973180076597,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.3796747967479675],\"\"]]]],[],false,false,270750748334129,[],null,57,null],[\"结局9文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,306167005490186,[[\"images/shared-1-sheet1.png\",22857,385,129,120,120,false,1,0.5,0.5,[],[-0.5,-0.5,0.3756218905472638,-0.5,0.5,-0.5,0.5,0.43222735413328317,0.5,0.5,-0.5,0.5,-0.5,0.47747195777170326,-0.5,-0.5],\"\"]]]],[],false,false,639137845774653,[],null,58,null],[\"结局10图案\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,190267540594606,[[\"images/shared-1-sheet3.png\",17602,209,57,58,41,true,1,0.5,0.5,[],[-0.5,-0.5,0.09386973180076597,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.3796747967479675],\"\"]]]],[],false,false,327307286977825,[],null,59,null],[\"结局10文字\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,828918656566949,[[\"images/shared-1-sheet1.png\",22857,1,257,120,120,false,1,0.5,0.5,[],[-0.5,-0.5,0.3756218905472638,-0.5,0.5,-0.5,0.5,0.43222735413328317,0.5,0.5,-0.5,0.5,-0.5,0.47747195777170326,-0.5,-0.5],\"\"]]]],[],false,false,206062097554532,[],null,60,null],[\"最终结局小鲨鱼\",0,false,[],2,0,null,[[\"微笑\",5,true,1,0,false,282467557481642,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,129,897,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,1,897,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]],[\"大笑腮红\",5,true,1,0,false,198750924972958,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,385,897,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,257,897,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]],[\"大笑\",5,true,1,0,false,166262179616045,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,129,769,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,1,769,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]],[\"开心难过\",5,true,1,0,false,972333287855711,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,385,769,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,257,769,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]],[\"沉静开心\",5,true,1,0,false,181925117949207,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,129,641,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,1,641,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]],[\"沉静\",5,true,1,0,false,779809133842166,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,385,641,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,257,641,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]],[\"不喜欢\",5,true,1,0,false,666959203280238,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,129,513,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,1,513,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]],[\"难过\",5,true,1,0,false,184129398528207,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,385,513,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,257,513,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]],[\"难过泪\",5,true,1,0,false,523135426199996,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,129,385,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,1,385,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]],[\"难过泪2\",5,true,1,0,false,393269730095690,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,385,385,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,257,385,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]],[\"闭眼泪\",5,true,1,0,false,601739449180057,[[\"images/最终结局小鲨鱼-sheet0.png\",27978,385,257,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"],[\"images/最终结局小鲨鱼-sheet0.png\",27978,257,257,120,120,false,1,0.525,0.9916666666666667,[],[-0.14166666666666666,-0.55,0.29166666666666663,-0.5166666666666667,0.32499999999999996,-0.45000000000000007,0.3916666666666666,-0.17500000000000004,0.375,0.008333333333333304,-0.30000000000000004,0.008333333333333304,-0.4416666666666667,-0.4833333333333334,-0.375,-0.5416666666666667],\"\"]]]],[[\"正弦高度\",2,234185366747050,61],[\"正弦摆动\",2,206067215064200,62]],false,false,361438554556610,[],null,63,null],[\"好结局对话框\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,347506973659438,[[\"images/shared-1-sheet1.png\",22857,257,257,120,120,false,1,0.5,0.5,[],[-0.4166666666666667,-0.5,0.4083333333333333,-0.45,0.43333333333333335,-0.3666666666666667,0.43333333333333335,-0.29166666666666663,0.4,-0.20833333333333331,0.35,-0.15833333333333333,0.2833333333333333,-0.125,-0.26666666666666666,0,-0.4166666666666667,-0.2,-0.45,-0.275,-0.4583333333333333,-0.325,-0.4583333333333333,-0.39166666666666666,-0.44166666666666665,-0.45],\"\"],[\"images/shared-1-sheet1.png\",22857,129,257,120,120,false,1,0.5,0.5,[],[-0.4166666666666667,-0.5,0.4083333333333333,-0.45,0.43333333333333335,-0.3666666666666667,0.43333333333333335,-0.29166666666666663,0.4,-0.20833333333333331,0.35,-0.15833333333333333,0.2833333333333333,-0.125,-0.26666666666666666,0,-0.4166666666666667,-0.2,-0.45,-0.275,-0.4583333333333333,-0.325,-0.4583333333333333,-0.39166666666666666,-0.44166666666666665,-0.45],\"\"]]]],[],false,false,127849914866914,[],null,64,null],[\"白色背景\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,997781805750424,[[\"images/shared-1-sheet0.png\",34264,257,1,120,240,false,1,0.5,0.5,[],[],\"\"]]]],[[\"补间动画\",1,889504948012681,1]],false,false,879878872246732,[],null,65,null],[\"staff字幕好结局\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,413288084907874,[[\"images/shared-1-sheet0.png\",34264,385,1,120,240,false,1,0.5,0.5,[],[-0.24166666666666664,-0.42083333333333334,0.3833333333333333,-0.4041666666666667,0.3833333333333333,-0.07916666666666666,0.19999999999999996,0.38749999999999996,-0.00833333333333336,0.3916666666666667,-0.06666666666666665,0.37916666666666665,-0.125,0.3458333333333333,-0.375,-0.07916666666666666,-0.375,-0.375,-0.3666666666666667,-0.4166666666666667],\"\"]]]],[[\"移动到\",6,741011050187687,29]],false,false,399373080398976,[],null,66,null],[\"坏结局对话框\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,777456300040339,[[\"images/shared-1-sheet1.png\",22857,129,257,120,120,false,1,0.5,0.5,[],[-0.4166666666666667,-0.5,0.4083333333333333,-0.45,0.43333333333333335,-0.3666666666666667,0.43333333333333335,-0.29166666666666663,0.4,-0.20833333333333331,0.35,-0.15833333333333333,0.2833333333333333,-0.125,-0.26666666666666666,0,-0.4166666666666667,-0.2,-0.45,-0.275,-0.4583333333333333,-0.325,-0.4583333333333333,-0.39166666666666666,-0.44166666666666665,-0.45],\"\"]]]],[],false,false,305691322661291,[],null,67,null],[\"空空的房间\",0,false,[],0,3,null,[[\"Animation 1\",5,false,1,0,false,542012102077623,[[\"images/shared-1-sheet2.png\",18772,1,385,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,491216976387853,[[\"grayscale\",\"灰度\"],[\"contrast\",\"对比度\"],[\"noise\",\"噪点\"]],null,68,null],[\"staff字幕坏结局\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,700960936725574,[[\"images/shared-1-sheet1.png\",22857,129,385,120,120,false,1,0.5,1,[],[-0.24166666666666664,-0.8416666666666667,0.3833333333333333,-0.8083333333333333,0.3833333333333333,-0.15833333333333333,0.19999999999999996,0,-0.00833333333333336,0,-0.06666666666666665,0,-0.125,0,-0.375,-0.15833333333333333,-0.375,-0.75,-0.3666666666666667,-0.8333333333333334],\"\"]]]],[[\"补间动画\",1,516350325601477,1]],false,false,403536673652119,[],null,69,null],[\"小鲨鱼离开了\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,900084285497442,[[\"images/shared-1-sheet1.png\",22857,1,385,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[[\"补间动画\",1,722161129497344,1]],false,false,680867946417363,[],null,70,null],[\"黑色对话背景\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,494554057829348,[[\"images/shared-1-sheet1.png\",22857,385,257,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,412153979897927,[],null,71,null],[\"logo\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,878505289407221,[[\"images/shared-1-sheet3.png\",17602,127,197,60,20,false,1,0.5,0.65,[],[0.23333333333333328,-0.6,0.35,-0.35000000000000003,0.4833333333333333,0.15000000000000002,-0.43333333333333335,0.29999999999999993,-0.4666666666666667,-0.45],\"\"]]]],[[\"正弦\",2,864625851378813,2],[\"补间动画\",1,491092341300150,1]],false,false,558630682734603,[],null,72,null],[\"logo背景\",9,false,[],0,0,[\"images/logo背景-sheet0.png\",118,0,0,16,16,false],null,[],false,false,834492091144703,[],null,73,[1,1]],[\"温馨提示\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,126421271034549,[[\"images/shared-1-sheet0.png\",34264,385,385,120,120,false,1,0.5,0.5,[],[-0.4918032786885246,-0.4918032786885246,0.4918032786885246,-0.4918032786885246,0.4918032786885246,0.4918032786885246,-0.4918032786885246,0.4918032786885246],\"\"]]]],[[\"补间动画\",1,906237223495925,1]],false,false,104424349177556,[],null,74,null],[\"中文\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,140644427901938,[[\"images/shared-1-sheet4.png\",396,1,1,27,16,true,1,0.5,0.5,[],[-0.2777777777777778,-0.4375,0.20370370370370372,-0.4375,0.42592592592592593,-0.3125,0.5,0.5,0.5,0.5,0.16666666666666663,0.5,-0.46296296296296297,0.5,-0.42592592592592593,-0.25],\"\"]]]],[],false,false,706077182800600,[],null,75,null],[\"English\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,394022466612448,[[\"images/shared-1-sheet3.png\",17602,189,197,52,15,true,1,0.5,0.5,[],[-0.3846153846153846,-0.5,-0.13461538461538464,-0.5,-0.019230769230769218,-0.5,0.25,-0.5,0.46153846153846156,0.30000000000000004,-0.15384615384615385,0.43333333333333335,-0.4807692307692308,0.23333333333333328,-0.46153846153846156,-0.5],\"\"]]]],[],false,false,778316840200572,[],null,76,null],[\"日本语\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,621637365810716,[[\"images/shared-1-sheet3.png\",17602,206,235,40,16,false,1,0.5,0.5,[],[-0.35,-0.5,-0.025000000000000022,-0.5,0.125,-0.5,0.475,-0.375,0.5,0.5,-0.04999999999999999,0.5,-0.475,0.5,-0.45,-0.5],\"\"]]]],[],false,false,798037650340649,[],null,77,null],[\"选语言小鲨鱼\",0,false,[[350148972399586,1,\"被点击次数\",78],[220616739248448,1,\"正在说话\",79]],4,0,null,[[\"静置\",5,false,1,0,false,222979975465550,[[\"images/选语言小鲨鱼-sheet0.png\",7003,193,1,43,39,true,1,0.46511627906976744,0.9487179487179487,[],[-0.18604651162790697,-0.923076923076923,0.5116279069767442,-0.3846153846153846,0.5116279069767442,0,-0.23255813953488372,-0.05128205128205121,-0.41860465116279066,-0.33333333333333326,-0.4418604651162791,-0.5641025641025641,-0.37209302325581395,-0.8205128205128205],\"\"]]],[\"说话\",5,true,1,0,false,957277226026215,[[\"images/选语言小鲨鱼-sheet0.png\",7003,42,65,43,39,true,1,0.46511627906976744,0.9487179487179487,[],[-0.18604651162790697,-0.923076923076923,0.5116279069767442,-0.3846153846153846,0.5116279069767442,0,-0.23255813953488372,-0.05128205128205121,-0.41860465116279066,-0.33333333333333326,-0.4418604651162791,-0.5641025641025641,-0.37209302325581395,-0.8205128205128205],\"\"],[\"images/选语言小鲨鱼-sheet0.png\",7003,193,1,43,39,true,1,0.46511627906976744,0.9487179487179487,[],[-0.18604651162790697,-0.923076923076923,0.5116279069767442,-0.3846153846153846,0.5116279069767442,0,-0.23255813953488372,-0.05128205128205121,-0.41860465116279066,-0.33333333333333326,-0.4418604651162791,-0.5641025641025641,-0.37209302325581395,-0.8205128205128205],\"\"]]],[\"好耶\",5,true,1,0,false,578568785978479,[[\"images/选语言小鲨鱼-sheet0.png\",7003,83,65,43,39,true,1,0.46511627906976744,0.9487179487179487,[],[-0.18604651162790697,-0.923076923076923,0.5116279069767442,-0.3846153846153846,0.5116279069767442,0,-0.23255813953488372,-0.05128205128205121,-0.41860465116279066,-0.33333333333333326,-0.4418604651162791,-0.5641025641025641,-0.37209302325581395,-0.8205128205128205],\"\"]]],[\"我觉得要不选中文吧？\",5,true,1,0,false,835291217357685,[[\"images/选语言小鲨鱼-sheet0.png\",7003,124,65,43,39,true,1,0.46511627906976744,0.9487179487179487,[],[-0.18604651162790697,-0.923076923076923,0.5116279069767442,-0.3846153846153846,0.5116279069767442,0,-0.23255813953488372,-0.05128205128205121,-0.41860465116279066,-0.33333333333333326,-0.4418604651162791,-0.5641025641025641,-0.37209302325581395,-0.8205128205128205],\"\"],[\"images/选语言小鲨鱼-sheet0.png\",7003,165,65,43,39,true,1,0.46511627906976744,0.9487179487179487,[],[-0.18604651162790697,-0.923076923076923,0.5116279069767442,-0.3846153846153846,0.5116279069767442,0,-0.23255813953488372,-0.05128205128205121,-0.41860465116279066,-0.33333333333333326,-0.4418604651162791,-0.5641025641025641,-0.37209302325581395,-0.8205128205128205],\"\"]]],[\"不要再点我啦\",5,true,1,0,false,102013433749651,[[\"images/选语言小鲨鱼-sheet0.png\",7003,206,65,43,39,true,1,0.46511627906976744,0.9487179487179487,[],[-0.18604651162790697,-0.923076923076923,0.5116279069767442,-0.3846153846153846,0.5116279069767442,0,-0.23255813953488372,-0.05128205128205121,-0.41860465116279066,-0.33333333333333326,-0.4418604651162791,-0.5641025641025641,-0.37209302325581395,-0.8205128205128205],\"\"],[\"images/选语言小鲨鱼-sheet0.png\",7003,1,65,43,39,true,1,0.46511627906976744,0.9487179487179487,[],[-0.18604651162790697,-0.923076923076923,0.5116279069767442,-0.3846153846153846,0.5116279069767442,0,-0.23255813953488372,-0.05128205128205121,-0.41860465116279066,-0.33333333333333326,-0.4418604651162791,-0.5641025641025641,-0.37209302325581395,-0.8205128205128205],\"\"]]],[\"不要再点我啦2\",5,true,1,0,false,983198690512528,[[\"images/选语言小鲨鱼-sheet0.png\",7003,1,65,43,39,true,1,0.46511627906976744,0.9487179487179487,[],[-0.18604651162790697,-0.923076923076923,0.5116279069767442,-0.3846153846153846,0.5116279069767442,0,-0.23255813953488372,-0.05128205128205121,-0.41860465116279066,-0.33333333333333326,-0.4418604651162791,-0.5641025641025641,-0.37209302325581395,-0.8205128205128205],\"\"]]],[\"被点击\",5,false,1,0,false,148253123824697,[[\"images/选语言小鲨鱼-sheet0.png\",7003,42,129,43,39,true,1,0.46511627906976744,0.9487179487179487,[],[-0.18604651162790697,-0.923076923076923,0.5116279069767442,-0.3846153846153846,0.5116279069767442,0,-0.23255813953488372,-0.05128205128205121,-0.41860465116279066,-0.33333333333333326,-0.4418604651162791,-0.5641025641025641,-0.37209302325581395,-0.8205128205128205],\"\"]]],[\"期待\",5,true,1,0,false,556315304178725,[[\"images/选语言小鲨鱼-sheet0.png\",7003,83,129,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"],[\"images/选语言小鲨鱼-sheet0.png\",7003,124,129,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"]]],[\"高兴腮红\",5,true,1,0,false,220411760827459,[[\"images/选语言小鲨鱼-sheet0.png\",7003,165,129,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"],[\"images/选语言小鲨鱼-sheet0.png\",7003,206,129,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"]]],[\"高兴\",5,true,1,0,false,568627300828061,[[\"images/选语言小鲨鱼-sheet0.png\",7003,1,129,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"],[\"images/选语言小鲨鱼-sheet0.png\",7003,42,193,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"]]],[\"不太高兴\",5,true,1,0,false,633894694156154,[[\"images/选语言小鲨鱼-sheet0.png\",7003,83,193,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"],[\"images/选语言小鲨鱼-sheet0.png\",7003,124,193,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"]]],[\"常规说话\",5,true,1,0,false,934700308103602,[[\"images/选语言小鲨鱼-sheet0.png\",7003,165,193,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"],[\"images/选语言小鲨鱼-sheet0.png\",7003,124,193,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"]]],[\"沉静\",5,true,1,0,false,408203609141553,[[\"images/选语言小鲨鱼-sheet0.png\",7003,206,193,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"],[\"images/选语言小鲨鱼-sheet0.png\",7003,1,193,43,39,true,1,0.46511627906976744,0.9487179487179487,[[\"嘴巴\",0.29069767441860467,0.4230769230769231],[\"戴花\",0.5348837209302325,0.2564102564102564]],[-0.45348837209302323,-0.9358974358974359,0.5348837209302326,-0.9358974358974359,0.5348837209302326,0.05128205128205132,-0.45348837209302323,0.05128205128205132],\"\"]]]],[[\"正弦\",2,514552156541603,2],[\"正弦2\",2,343870599195210,80],[\"正弦3\",2,504123822222242,81],[\"补间动画\",1,612747270707450,1]],false,false,401018009442851,[],null,82,null],[\"选了英语\",0,false,[],0,2,null,[[\"Animation 1\",5,false,1,0,false,771859761859709,[[\"images/shared-1-sheet3.png\",17602,206,117,116,16,true,1,0.464922711058264,4.75,[],[-0.24078478002378123,-4.75,0.48156956004756235,-4.75,0.5261593341260404,-3.75,-0.10701545778834726,-3.75,-0.464922711058264,-3.75,-0.464922711058264,-4.75],\"\"]]]],[],false,false,638136316376167,[[\"brightness\",\"亮度\"],[\"vibrance\",\"自然饱和度\"]],null,83,null],[\"选了日语\",0,false,[],0,2,null,[[\"Animation 1\",5,false,1,0,false,951508255686027,[[\"images/shared-1-sheet3.png\",17602,225,117,116,16,true,1,0.5,0.5,[],[-0.36533888228299644,-0.5,0.4640309155766943,-0.5,0.49078478002378123,0.5,-0.5,0.5,-0.5,-0.5],\"\"]]]],[],false,false,884755936842634,[[\"brightness\",\"亮度\"],[\"vibrance\",\"自然饱和度\"]],null,84,null],[\"食物苹果\",0,false,[[447910704087337,1,\"苹果碰撞\",85]],3,1,null,[[\"Animation 1\",5,false,1,0,false,849998675137862,[[\"images/shared-0-sheet4.png\",5774,110,97,15,17,false,1,0.5,0.5,[],[0.5,-0.5,0.5,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.43333333333333335,0.2647058823529411,-0.43333333333333335,-0.02941176470588236,0.033333333333333326,-0.4411764705882353],\"\"]]]],[[\"BoundedDragDrop\",10,654523945479605,86],[\"子弹\",11,596195767454736,87],[\"边界约束\",12,680279420662962,88]],false,false,376585202203613,[[\"hsladjust\",\"HSL调整\"]],null,89,null],[\"边界\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,712994381322883,[[\"images/shared-0-sheet0.png\",13899,257,1,250,250,false,1,0.5,0.5,[],[],\"\"]]]],[[\"实体\",13,647136353056429,90]],false,false,868679482742114,[],null,91,null],[\"实际垃圾桶\",0,false,[],3,0,null,[[\"Animation 1\",5,false,1,0,false,468915250245966,[[\"images/shared-0-sheet4.png\",5774,86,65,17,21,false,1,0.47058823529411764,0.5238095238095238,[],[0.5294117647058824,-0.5238095238095238,0.5294117647058824,-0.5238095238095238,0.5294117647058824,-0.5238095238095238,0.5294117647058824,0.33333333333333326,0.11764705882352944,0.4285714285714285,-0.47058823529411764,0.1428571428571428,-0.47058823529411764,-0.09523809523809529,-0.47058823529411764,-0.4285714285714286],\"\"],[\"images/shared-0-sheet4.png\",5774,47,35,17,28,false,1,0.47058823529411764,0.6428571428571429,[],[0.5294117647058824,-0.6428571428571429,0.5294117647058824,-0.6428571428571429,0.5294117647058824,-0.6428571428571429,0.5294117647058824,0.3571428571428571,0.5294117647058824,0.3571428571428571,-0.47058823529411764,0.1785714285714285,-0.47058823529411764,-0.6428571428571429,-0.47058823529411764,-0.6428571428571429],\"\"],[\"images/shared-0-sheet4.png\",5774,25,37,17,24,false,1,0.47058823529411764,0.5833333333333334,[],[0.5294117647058824,-0.5833333333333334,0.5294117647058824,-0.5833333333333334,0.5294117647058824,-0.5833333333333334,0.5294117647058824,0.41666666666666663,0.5294117647058824,0.41666666666666663,-0.47058823529411764,0.41666666666666663,-0.47058823529411764,-0.5833333333333334,-0.47058823529411764,-0.5833333333333334],\"\"],[\"images/shared-0-sheet4.png\",5774,105,65,17,21,false,1,0.47058823529411764,0.5238095238095238,[],[0.5294117647058824,-0.5238095238095238,0.5294117647058824,-0.5238095238095238,0.5294117647058824,-0.5238095238095238,0.5294117647058824,0.47619047619047616,0.5294117647058824,0.47619047619047616,-0.47058823529411764,0.47619047619047616,-0.47058823529411764,-0.5238095238095238,-0.47058823529411764,-0.5238095238095238],\"\"]]]],[[\"子弹\",11,280096768340734,87],[\"BoundedDragDrop\",10,859545320641697,86],[\"边界约束\",12,348995664716656,88]],false,false,543537484579958,[],null,92,null],[\"苹果\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,149963934785845,[[\"images/shared-0-sheet4.png\",5774,110,97,15,17,false,1,0.5,0.5,[],[0.5,-0.5,0.5,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.43333333333333335,0.2647058823529411,-0.43333333333333335,-0.02941176470588236,0.033333333333333326,-0.4411764705882353],\"\"]]]],[],false,false,360255035145367,[],null,93,null],[\"锻炼\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,816698363988291,[[\"images/shared-0-sheet4.png\",5774,94,97,19,14,true,1,0.5,0.5,[],[0.5,-0.5,0.5,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.2142857142857143,-0.5,-0.14285714285714285,-0.5,-0.5],\"\"]]]],[],false,false,345588287628297,[],null,94,null],[\"睡眠\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,447279063452180,[[\"images/shared-0-sheet4.png\",5774,1,97,15,17,false,1,0.5,0.5,[],[0.5,-0.5,0.5,-0.5,0.5,-0.5,0.5,0.4411764705882353,0.5,0.5,-0.5,0.20588235294117652,-0.5,-0.08823529411764708,-0.5,-0.5],\"\"]]]],[[\"BoundedDragDrop\",10,288224636981427,86],[\"正弦上下\",2,656109354458407,95]],false,false,605936091707410,[],null,96,null],[\"开关灯\",0,false,[],0,0,null,[[\"开关灯\",5,false,1,0,false,859161370534734,[[\"images/shared-0-sheet4.png\",5774,18,97,14,17,false,1,0.5,0.5,[],[0.5,-0.5,0.5,-0.5,0.5,-0.5,0.5,0.4411764705882353,0.5,0.5,-0.5,0.20588235294117652,-0.5,-0.08823529411764708,-0.5,-0.5],\"\"]]]],[],false,false,903360430184985,[],null,97,null],[\"垃圾桶\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,230421985929326,[[\"images/shared-0-sheet4.png\",5774,86,65,17,21,false,1,0.5,0.5,[],[0.5,-0.5,0.5,-0.5,0.5,-0.5,0.5,0.3571428571428571,0.08823529411764708,0.45238095238095233,-0.5,0.16666666666666663,-0.5,-0.07142857142857145,-0.5,-0.40476190476190477],\"\"]]]],[],false,false,412005201291941,[],null,98,null],[\"出门\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,110473843191682,[[\"images/shared-0-sheet4.png\",5774,59,97,16,17,false,1,0.5,0.5,[],[-0.25,-0.5,0.5,-0.5,0.5,-0.5,0.375,0.4411764705882353,-0.5,0.5,-0.5,0.20588235294117652,-0.5,-0.08823529411764708,-0.5,-0.5],\"\"]]]],[],false,false,839669327269794,[],null,99,null],[\"方形鲨鱼\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,886569486354388,[[\"images/shared-0-sheet4.png\",5774,21,65,18,18,false,1,0.5,0.5,[],[-0.33333333333333337,-0.4444444444444444,0.4444444444444444,-0.33333333333333337,0.4444444444444444,0.33333333333333337,0.2222222222222222,0.5,-0.5,0.5,-0.5,0.5,-0.5,0.5,-0.5,0.5],\"\"]]]],[[\"正弦超快速抖动\",2,572011311769432,100]],false,false,517305047396513,[],null,101,null],[\"文本新手引导\",0,false,[],0,0,null,[[\"新手引导\",5,false,1,0,false,263570127714040,[[\"images/shared-0-sheet4.png\",5774,29,1,34,16,true,1,0.5,0.5,[],[-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5],\"\"],[\"images/shared-0-sheet3.png\",15203,239,96,67,16,true,1,0.5,0.5,[],[-0.44029850746268656,-0.4375,0.4701492537313433,-0.375,0.4850746268656716,0,0.4850746268656716,0.375,0.4104477611940298,0.4375,-0.48507462686567165,0.3125],\"\"],[\"images/shared-0-sheet3.png\",15203,237,1,93,16,true,1,0.5,0.5,[],[-0.5,-0.5,0.5,-0.0625,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5],\"\"],[\"images/shared-0-sheet3.png\",15203,239,165,67,16,true,1,0.5,0.5,[],[-0.5,-0.5,0.5,-0.0625,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5],\"\"]]]],[],false,false,511798549766817,[],null,102,null],[\"拖拽手势\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,176189681795990,[[\"images/shared-0-sheet4.png\",5774,41,65,16,18,false,1,0.3125,0.16666666666666666,[],[0.6875,0.8333333333333334,-0.3125,0.8333333333333334,-0.3125,-0.16666666666666666,0.6875,-0.16666666666666666],\"\"]]]],[[\"移动到\",6,475629583364506,29],[\"补间动画\",1,888731218450131,1]],false,false,977531740804394,[],null,103,null],[\"地板墙壁\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,450025404657682,[[\"images/shared-0-sheet2.png\",27233,129,385,120,120,false,1,0.5,0.5,[],[],\"\"],[\"images/shared-0-sheet2.png\",27233,1,385,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,981830027026003,[],null,104,null],[\"互动背景框\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,741480989641794,[[\"images/shared-0-sheet3.png\",15203,1,129,118,32,true,1,0.5,0.5,[],[-0.4661016949152542,-0.46875,0.4915254237288136,-0.375,0.4661016949152542,0.46875,-0.4915254237288136,0.375],\"\"]]]],[],false,false,712952777113639,[],null,105,null],[\"植物\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,626665334481021,[[\"images/shared-0-sheet3.png\",15203,157,175,41,38,true,1,1.3414634146341464,1.605263157894737,[],[-1.2195121951219514,-1.5789473684210527,-0.36585365853658547,-1.5789473684210527,-0.3902439024390245,-0.8947368421052633,-0.6097560975609757,-0.6315789473684211,-0.8048780487804879,-0.6842105263157896,-1.3170731707317074,-0.9473684210526316],\"\"]]]],[],false,false,849653378257607,[],null,106,null],[\"窗外\",0,false,[],0,0,null,[[\"窗外景色\",5,false,1,0,false,396720211915385,[[\"images/shared-0-sheet3.png\",15203,197,175,45,30,true,1,0.5,0.5,[],[-0.4777777777777778,-0.4666666666666667,0.47777777777777775,-0.4666666666666667,0.47777777777777775,0.4666666666666667,-0.4777777777777778,0.4666666666666667],\"\"],[\"images/shared-0-sheet3.png\",15203,193,225,41,28,false,1,0.5,0.5,[],[-0.5,-0.3214285714285714,0.5,-0.3214285714285714,0.5,0.5,-0.5,0.5],\"\"],[\"images/shared-0-sheet3.png\",15203,35,193,45,30,true,1,0.5,0.5,[],[-0.4777777777777778,-0.4666666666666667,0.47777777777777775,-0.4666666666666667,0.47777777777777775,0.4666666666666667,-0.4777777777777778,0.4666666666666667],\"\"]]]],[],false,false,564265977964567,[],null,107,null],[\"不同海报\",0,false,[],0,0,null,[[\"不同海报\",5,false,1,0,false,719864329354957,[[\"images/shared-0-sheet4.png\",5774,66,1,22,22,false,1,0.5,0.5,[],[-0.13636363636363635,-0.45454545454545453,0.4545454545454546,-0.18181818181818182,0.13636363636363635,0.4545454545454546,-0.45454545454545453,0.18181818181818177],\"\"],[\"images/shared-0-sheet4.png\",5774,97,1,22,22,false,1,0.5,0.5,[],[0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5],\"\"],[\"images/shared-0-sheet4.png\",5774,66,33,22,22,false,1,0.5,0.5,[],[0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5],\"\"],[\"images/shared-0-sheet4.png\",5774,97,33,22,22,false,1,0.5,0.5,[],[0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5],\"\"],[\"images/shared-0-sheet4.png\",5774,1,33,22,22,false,1,0.5,0.5,[],[0.02892561983471087,-0.2975206611570248,0.5,0.5,0.5,0.5,-0.5,0.5],\"\"]]]],[],false,false,410029521531440,[],null,108,null],[\"小鲨鱼\",0,false,[],5,1,null,[[\"常规说话\",5,true,1,0,false,965177524865867,[[\"images/小鲨鱼-sheet0.png\",50567,1,129,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,129,129,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"不太高兴\",5,true,1,0,false,375131648384926,[[\"images/小鲨鱼-sheet0.png\",50567,257,129,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,129,129,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"高兴\",5,true,1,0,false,762597559158724,[[\"images/小鲨鱼-sheet0.png\",50567,385,129,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,513,129,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"高兴腮红\",5,true,1,0,false,810328756420733,[[\"images/小鲨鱼-sheet0.png\",50567,641,129,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,129,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"期待\",5,true,1,0,false,432670123516485,[[\"images/小鲨鱼-sheet0.png\",50567,897,129,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,1,257,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"悲伤\",5,true,1,0,false,329610610040838,[[\"images/小鲨鱼-sheet0.png\",50567,129,257,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,257,257,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"丧气悲伤\",5,true,1,0,false,780327162356270,[[\"images/小鲨鱼-sheet0.png\",50567,385,257,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,513,257,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"沉静\",5,true,1,0,false,732025000307042,[[\"images/小鲨鱼-sheet0.png\",50567,641,257,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,257,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"离家出走\",5,true,1,0,false,560413090437004,[[\"images/小鲨鱼-sheet0.png\",50567,897,257,120,120,false,1,0.525,0.5041666666666667,[[\"嘴巴\",0.45,0.4708333333333333]],[0.08333333333333326,-0.16666666666666663,0.1333333333333333,-0.11666666666666664,0.15833333333333333,-0.04999999999999999,0.16666666666666663,0.025000000000000022,0.16666666666666663,0.15000000000000002,-0.10000000000000003,0.1333333333333333,-0.21666666666666667,0,-0.15000000000000002,-0.11666666666666664,-0.1166666666666667,-0.14999999999999997],\"\"]]],[\"离家出走翻转\",5,true,1,0,false,365583768535370,[[\"images/小鲨鱼-sheet0.png\",50567,1,385,120,120,false,1,0.475,0.5041666666666667,[[\"嘴巴\",0.55,0.4708333333333333]],[0.1166666666666667,-0.14999999999999997,0.15000000000000002,-0.11666666666666664,0.21666666666666667,0,0.09999999999999998,0.1333333333333333,-0.16666666666666663,0.15000000000000002,-0.16666666666666663,0.025000000000000022,-0.15833333333333333,-0.04999999999999999,-0.1333333333333333,-0.11666666666666664,-0.08333333333333331,-0.16666666666666663],\"\"]]],[\"抓狂\",5,true,1,0,false,272069453351225,[[\"images/小鲨鱼-sheet0.png\",50567,129,385,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,257,385,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"疑问\",5,true,1,0,false,969972799595989,[[\"images/小鲨鱼-sheet0.png\",50567,385,385,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,513,385,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"大惊\",5,true,1,0,false,120015314646607,[[\"images/小鲨鱼-sheet0.png\",50567,641,385,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,385,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"有点方\",5,true,1,0,false,990530132980700,[[\"images/小鲨鱼-sheet0.png\",50567,897,385,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42916666666666664,0.45416666666666666]],[-0.17916666666666664,-0.17083333333333334,0.1791666666666667,-0.17083333333333334,0.1791666666666667,0.17083333333333328,-0.17916666666666664,0.17083333333333328],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,1,513,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42916666666666664,0.45416666666666666],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.17083333333333334,0.1791666666666667,-0.17083333333333334,0.1791666666666667,0.17083333333333328,-0.17916666666666664,0.17083333333333328],\"\"]]],[\"非常方\",5,true,1,0,false,960489186292581,[[\"images/小鲨鱼-sheet0.png\",50567,129,513,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42916666666666664,0.44583333333333336]],[-0.17916666666666664,-0.17083333333333334,0.1791666666666667,-0.17083333333333334,0.1791666666666667,0.17083333333333328,-0.17916666666666664,0.17083333333333328],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,257,513,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42916666666666664,0.44583333333333336],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.17083333333333334,0.1791666666666667,-0.17083333333333334,0.1791666666666667,0.17083333333333328,-0.17916666666666664,0.17083333333333328],\"\"]]],[\"完全方\",5,true,1,0,false,742608664043533,[[\"images/小鲨鱼-sheet0.png\",50567,385,513,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42916666666666664,0.44583333333333336]],[-0.17083333333333334,-0.17083333333333334,0.17083333333333328,-0.17083333333333334,0.17083333333333328,0.17083333333333328,-0.17083333333333334,0.17083333333333328],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,513,513,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42916666666666664,0.44583333333333336],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17083333333333334,-0.17083333333333334,0.17083333333333328,-0.17083333333333334,0.17083333333333328,0.17083333333333328,-0.17083333333333334,0.17083333333333328],\"\"]]],[\"哇!新朋友!\",5,true,1,0,false,362666382265793,[[\"images/小鲨鱼-sheet0.png\",50567,641,513,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.5791666666666667,0.4708333333333333],[\"戴花\",0.49166666666666664,0.4166666666666667]],[0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998,-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,513,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.5791666666666667,0.4708333333333333],[\"戴花\",0.49166666666666664,0.4166666666666667]],[0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998,-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998],\"\"]]],[\"啊!你是……!\",5,true,1,0,false,378731416652904,[[\"images/小鲨鱼-sheet0.png\",50567,897,513,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.5791666666666667,0.4708333333333333],[\"戴花\",0.49166666666666664,0.4166666666666667]],[0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998,-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,513,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.5791666666666667,0.4708333333333333],[\"戴花\",0.49166666666666664,0.4166666666666667]],[0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998,-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998],\"\"]]],[\"难道你是被喂成……\",5,true,1,0,false,466186929769468,[[\"images/小鲨鱼-sheet0.png\",50567,1,641,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.5791666666666667,0.4708333333333333],[\"戴花\",0.49166666666666664,0.4166666666666667]],[0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998,-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,129,641,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.49166666666666664,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"我……好吧\",5,true,1,0,false,134414586342067,[[\"images/小鲨鱼-sheet0.png\",50567,257,641,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.5791666666666667,0.4708333333333333],[\"戴花\",0.49166666666666664,0.4166666666666667]],[0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998,-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,385,641,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.5791666666666667,0.4708333333333333],[\"戴花\",0.49166666666666664,0.4166666666666667]],[0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998,-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,513,641,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.5791666666666667,0.4708333333333333],[\"戴花\",0.49166666666666664,0.4166666666666667]],[0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998,-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,641,641,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.5791666666666667,0.4708333333333333],[\"戴花\",0.49166666666666664,0.4166666666666667]],[0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998,-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998],\"\"]]],[\"锻炼A\",5,true,1,0,false,786181612552327,[[\"images/小鲨鱼-sheet0.png\",50567,769,641,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,897,641,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"锻炼B\",5,true,1,0,false,457907333710488,[[\"images/小鲨鱼-sheet0.png\",50567,1,769,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,129,769,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"锻炼C\",5,true,1,0,false,847970350814059,[[\"images/小鲨鱼-sheet0.png\",50567,257,769,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,385,769,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"锻炼D\",5,true,1,0,false,980138053849827,[[\"images/小鲨鱼-sheet0.png\",50567,513,769,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,641,769,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"锻炼D锻炼完\",5,true,1,0,false,776813730547312,[[\"images/小鲨鱼-sheet0.png\",50567,769,769,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,897,769,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.5083333333333333,0.4166666666666667]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"锻炼E累死了\",5,false,1,0,false,209371934329932,[[\"images/小鲨鱼-sheet0.png\",50567,1,897,120,120,false,1,0.5,0.5,[[\"嘴巴\",0.42083333333333334,0.4708333333333333],[\"戴花\",0.49166666666666664,0.5083333333333333]],[-0.17916666666666664,-0.16249999999999998,0.1791666666666667,-0.16249999999999998,0.1791666666666667,0.16249999999999998,-0.17916666666666664,0.16249999999999998],\"\"]]],[\"睡眠\",1.7,true,1,0,false,676138303083497,[[\"images/小鲨鱼-sheet0.png\",50567,129,897,120,120,false,1,0.5,0.5,[[\"图像点 2\",0.5,0.5],[\"戴花\",0.475,0.5416666666666666]],[0.05833333333333335,-0.15833333333333333,0.21666666666666667,0.008333333333333304,0.19999999999999996,0.07499999999999996,-0.033333333333333326,0.07499999999999996,-0.18333333333333335,0.050000000000000044,-0.20833333333333331,-0.11666666666666664],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,257,897,120,120,false,1,0.5,0.5,[[\"图像点 2\",0.5,0.5],[\"戴花\",0.475,0.5166666666666667]],[0.05833333333333335,-0.15833333333333333,0.21666666666666667,0.008333333333333304,0.19999999999999996,0.07499999999999996,-0.033333333333333326,0.07499999999999996,-0.18333333333333335,0.050000000000000044,-0.20833333333333331,-0.11666666666666664],\"\"]]],[\"被花杀死\",1.2,true,1,0,false,338138612216953,[[\"images/小鲨鱼-sheet0.png\",50567,385,897,120,120,false,1,0.5,0.5,[],[0.050000000000000044,-0.3416666666666667,0.23333333333333328,-0.2583333333333333,0.22499999999999998,0.07499999999999996,-0.2,0.04166666666666663,-0.125,-0.14166666666666666],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,513,897,120,120,false,1,0.5,0.5,[],[0.050000000000000044,-0.3416666666666667,0.23333333333333328,-0.2583333333333333,0.22499999999999998,0.07499999999999996,-0.2,0.04166666666666663,-0.125,-0.14166666666666666],\"\"]]],[\"关灯太久而死\",6,true,1,0,false,818658647227969,[[\"images/小鲨鱼-sheet0.png\",50567,641,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,897,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,897,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,897,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"],[\"images/小鲨鱼-sheet0.png\",50567,769,897,120,120,false,1,0.5,0.5,[],[-0.15000000000000002,-0.18333333333333335,0.4833333333333333,-0.16666666666666669,0.475,0.07499999999999996,0.44166666666666665,0.15833333333333333,0.3666666666666667,0.17500000000000004,-0.4666666666666667,0.17500000000000004,-0.48333333333333334,-0.06666666666666665,-0.4583333333333333,-0.15833333333333333],\"\"]]]],[[\"正弦大小\",2,516310648311442,53],[\"移动到\",6,158500659421320,29],[\"正弦抖动\",2,647170423286321,109],[\"正弦锻炼\",2,813479474725372,110],[\"正弦旋转\",2,785061272423199,111]],false,false,917124555058161,[[\"bulge\",\"膨胀\"]],null,112,null],[\"窗外小云\",0,false,[[990787291179769,1,\"小云走到头\",113]],1,0,null,[[\"Animation 1\",5,false,1,0,false,677633347363692,[[\"images/shared-0-sheet3.png\",15203,67,193,57,28,true,1,0.5,0.5,[],[-0.2719298245614035,-0.4642857142857143,-0.11403508771929827,-0.4285714285714286,0.48245614035087714,0.4642857142857143,-0.4824561403508772,0.2857142857142858],\"\"],[\"images/shared-0-sheet3.png\",15203,97,193,57,28,true,1,0.5,0.5,[],[-0.2719298245614035,-0.4642857142857143,-0.11403508771929827,-0.4285714285714286,0.48245614035087714,0.4642857142857143,-0.4824561403508772,0.2857142857142858],\"\"]]]],[[\"正弦\",2,286849431456002,2]],false,false,984617681370717,[],null,114,null],[\"嘴巴判定点\",0,false,[],1,1,null,[[\"Animation 1\",5,false,1,0,false,521453121964674,[[\"images/shared-0-sheet5.png\",156,9,9,3,3,false,1,0.5,0.5,[],[-0.16666666666666669,-0.16666666666666669,0.16666666666666663,-0.16666666666666669,0.16666666666666663,0.16666666666666663,-0.16666666666666669,0.16666666666666663],\"\"]]]],[[\"固定\",3,371014624795137,6]],false,false,232703717422104,[[\"bulge\",\"膨胀\"]],null,115,null],[\"小鸭子\",0,false,[[443327491539731,1,\"小鸭子被点击\",116]],1,0,null,[[\"Animation 1\",5,false,1,0,false,674823406141006,[[\"images/shared-0-sheet4.png\",5774,77,97,18,15,true,1,0.5555555555555556,0.9333333333333333,[],[],\"\"]]]],[[\"补间动画\",1,528577113808890,1]],false,false,800323180981149,[],null,117,null],[\"坐垫\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,685606136169130,[[\"images/shared-0-sheet2.png\",27233,385,385,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,627485098733698,[],null,118,null],[\"窗户判定区\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,965013497437101,[[\"images/shared-0-sheet0.png\",13899,1,1,250,250,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,292083736273192,[],null,119,null],[\"鸭子判定区\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,824313284755698,[[\"images/shared-0-sheet0.png\",13899,1,1,250,250,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,166811168844434,[],null,120,null],[\"坐垫判定区\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,144233480291918,[[\"images/shared-0-sheet0.png\",13899,1,1,250,250,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,364527327601078,[],null,121,null],[\"植物判定区\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,154115586882118,[[\"images/shared-0-sheet0.png\",13899,1,1,250,250,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,226458899110283,[],null,122,null],[\"带回家的流浪鲨鱼\",0,false,[],3,0,null,[[\"流浪鲨鱼\",5,true,1,0,false,166012744274580,[[\"images/shared-0-sheet3.png\",15203,67,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"],[\"images/shared-0-sheet3.png\",15203,110,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"]]],[\"你明明看到我了\",5,true,1,0,false,958753181660948,[[\"images/shared-0-sheet3.png\",15203,153,125,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"],[\"images/shared-0-sheet3.png\",15203,196,125,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"]]]],[[\"正弦大小\",2,608040162902400,53],[\"补间动画\",1,892825451903128,1],[\"移动到\",6,177231846842555,29]],false,false,771891095969229,[],null,123,null],[\"拿回家的花\",0,false,[],4,0,null,[[\"Animation 1\",5,false,1,0,false,139800006820114,[[\"images/shared-0-sheet4.png\",5774,1,1,27,26,true,1,0.7777777777777778,0.9615384615384616,[],[],\"\"]]]],[[\"正弦\",2,964943581456950,2],[\"正弦2\",2,249179985631781,80],[\"补间动画\",1,731860736809771,1],[\"BoundedDragDrop\",10,135190152483367,86]],false,false,599966072578459,[],null,124,null],[\"头戴花\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,562539089950526,[[\"images/shared-0-sheet4.png\",5774,1,65,19,18,true,1,0.5263157894736842,0.5555555555555556,[],[-0.2631578947368421,-0.5,0.052631578947368474,-0.4444444444444445,0.42105263157894735,-0.16666666666666669,0.368421052631579,0.33333333333333326,-0.2631578947368421,0.33333333333333326,-0.47368421052631576,0.11111111111111105,-0.47368421052631576,-0.16666666666666669],\"\"]]]],[[\"固定\",3,903949648851419,6]],false,false,668297925765883,[],null,125,null],[\"纯眼睛\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,418120992412080,[[\"images/shared-0-sheet4.png\",5774,47,1,32,17,true,1,0.5,0.5,[],[-0.15625,-0.4411764705882353,0.21875,-0.38235294117647056,0.4375,0.08823529411764708,0.15625,0.4411764705882353,-0.21875,0.38235294117647056,-0.4375,-0.08823529411764708],\"\"]]]],[],false,false,484523282750354,[],null,126,null],[\"大云\",0,false,[],2,0,null,[[\"白天黄昏\",5,false,1,0,false,736011836459197,[[\"images/shared-0-sheet3.png\",15203,1,1,113,61,true,1,0.5,0.5,[],[-0.11946902654867259,-0.48360655737704916,0.030973451327433676,-0.45081967213114754,0.40265486725663713,0.12295081967213117,0.4823008849557522,0.48360655737704916,-0.43805309734513276,0.48360655737704916,-0.4911504424778761,0.3688524590163934,-0.47345132743362833,0.1885245901639344,-0.24336283185840707,-0.319672131147541],\"\"],[\"images/shared-0-sheet3.png\",15203,64,1,113,61,true,1,0.5,0.5,[],[-0.12244498394549302,-0.5,0.03731693946276149,-0.5,0.4320228678831546,0.4631819403386188,0.5,0.5,-0.4607643511629728,0.5,-0.5,0.5,-0.498355391964915,0.5,-0.25401362675229067,-0.4075517334049986],\"\"]]]],[[\"正弦\",2,952158989345329,2],[\"拖放\",14,991395505656615,127]],false,false,338624449207820,[],null,128,null],[\"天空\",0,false,[],0,0,null,[[\"白天黄昏\",5,false,1,0,false,200824688179098,[[\"images/shared-0-sheet0.png\",13899,129,257,120,120,false,1,0.5,0.5,[],[],\"\"],[\"images/shared-0-sheet0.png\",13899,1,257,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,961297127563752,[],null,129,null],[\"小云\",0,false,[[723261112732656,1,\"小云走到头\",113]],2,0,null,[[\"Animation 1\",5,false,1,0,false,397481276378502,[[\"images/shared-0-sheet3.png\",15203,67,193,57,28,true,1,0.5,0.5,[],[-0.2719298245614035,-0.4642857142857143,-0.11403508771929827,-0.4285714285714286,0.48245614035087714,0.4642857142857143,-0.4824561403508772,0.2857142857142858],\"\"],[\"images/shared-0-sheet3.png\",15203,127,193,57,28,true,1,0.5,0.5,[],[-0.5,-0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5],\"\"]]]],[[\"正弦\",2,498807066761097,2],[\"拖放\",14,349660820845509,127]],false,false,893834955165238,[],null,130,null],[\"草地\",0,false,[],0,0,null,[[\"白天黄昏\",5,false,1,0,false,622761033408242,[[\"images/shared-0-sheet3.png\",15203,127,1,122,53,true,1,0.5,0.5,[],[0.4918032786885246,-0.4811320754716981,0.4918032786885246,0.4811320754716981,-0.4918032786885246,0.4811320754716981,-0.45901639344262296,-0.46226415094339623],\"\"],[\"images/shared-0-sheet3.png\",15203,182,1,122,53,true,1,0.5,0.5,[],[0.4918032786885246,-0.4811320754716981,0.4918032786885246,0.4811320754716981,-0.4918032786885246,0.4811320754716981,-0.45901639344262296,-0.46226415094339623],\"\"]]]],[],false,false,337569647829076,[],null,131,null],[\"星星2\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,507056152732689,[[\"images/shared-0-sheet5.png\",156,1,9,5,5,false,1,0.5,0.5,[],[],\"\"]]]],[[\"正弦\",2,355239799102034,2],[\"物理\",15,420919693132613,132]],false,false,345591643231007,[],null,133,null],[\"星星\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,538028605143291,[[\"images/shared-0-sheet5.png\",156,9,1,3,3,false,1,0.5,0.5,[],[],\"\"]]]],[[\"正弦\",2,170807381601126,2],[\"物理\",15,413664013952967,132]],false,false,264299163331651,[],null,134,null],[\"星星3\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,246461188843180,[[\"images/shared-0-sheet5.png\",156,9,1,3,3,false,1,0.5,0.5,[],[],\"\"]]]],[[\"正弦\",2,413394151871905,2],[\"物理\",15,815614120068296,132]],false,false,627496406726634,[],null,135,null],[\"星星4\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,152179090537197,[[\"images/shared-0-sheet5.png\",156,9,1,3,3,false,1,0.5,0.5,[],[],\"\"]]]],[[\"正弦\",2,386664750560496,2],[\"物理\",15,220241614921129,132]],false,false,858311475233732,[],null,136,null],[\"星星5\",0,false,[],2,0,null,[[\"Animation 1\",5,false,1,0,false,874625688044924,[[\"images/shared-0-sheet5.png\",156,1,9,5,5,false,1,0.5,0.5,[],[],\"\"]]]],[[\"正弦\",2,446180196824783,2],[\"物理\",15,687720895728412,132]],false,false,187254058090381,[],null,137,null],[\"流浪鲨鱼\",0,false,[],2,0,null,[[\"流浪鲨鱼\",5,true,1,0,false,234648836233313,[[\"images/shared-0-sheet3.png\",15203,67,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"],[\"images/shared-0-sheet3.png\",15203,110,129,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"]]],[\"你明明看到我了\",5,true,1,0,false,974834713973912,[[\"images/shared-0-sheet3.png\",15203,153,125,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"],[\"images/shared-0-sheet3.png\",15203,196,125,48,41,true,1,0.5625,0.524390243902439,[],[0.20833333333333337,-0.48780487804878053,0.33333333333333337,-0.34146341463414637,0.39583333333333337,-0.14634146341463417,0.41666666666666663,0.07317073170731703,0.41666666666666663,0.4390243902439024,-0.25,0.3902439024390244,-0.5416666666666666,0,-0.375,-0.34146341463414637,-0.2916666666666667,-0.43902439024390244],\"\"]]]],[[\"正弦大小\",2,197991610765348,53],[\"补间动画\",1,695765622293232,1]],false,false,965003557386734,[],null,138,null],[\"信\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,774075532099432,[[\"images/shared-0-sheet2.png\",27233,257,385,120,120,false,1,0.5,0.5,[],[-0.033333333333333326,0.275,0.05833333333333335,0.33333333333333337,0,0.375,-0.09166666666666667,0.31666666666666665],\"\"],[\"images/shared-0-sheet2.png\",27233,129,257,120,120,false,1,0.5,0.5,[],[-0.033333333333333326,0.275,0.05833333333333335,0.33333333333333337,0,0.375,-0.09166666666666667,0.31666666666666665],\"\"]]]],[],false,false,359454239261906,[],null,139,null],[\"野花\",0,false,[],3,0,null,[[\"Animation 1\",5,false,1,0,false,865996677734092,[[\"images/shared-0-sheet4.png\",5774,1,1,27,26,true,1,0.7777777777777778,0.9615384615384616,[],[],\"\"]]]],[[\"正弦\",2,600724325816932,2],[\"正弦2\",2,828699375125724,80],[\"补间动画\",1,143480033583467,1]],false,false,727682743064871,[],null,140,null],[\"饿死在外\",0,false,[],0,0,null,[[\"饿死在外\",5,true,1,0,false,190928280808270,[[\"images/shared-0-sheet3.png\",15203,35,116,72,30,true,1,0.4722222222222222,0.9333333333333333,[],[0.4652777777777778,-0.9333333333333333,0.5277777777777778,-0.9333333333333333,0.5277777777777778,-0.9333333333333333,0.5277777777777778,-0.9333333333333333,0.5277777777777778,0.06666666666666665,-0.2986111111111111,0.06666666666666665,-0.4722222222222222,-0.9333333333333333,-0.4722222222222222,-0.9333333333333333,-0.3680555555555555,-0.9333333333333333],\"\"]]]],[],false,false,542073047150049,[],null,141,null],[\"回家按钮\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,459004604649141,[[\"images/shared-0-sheet4.png\",5774,65,65,18,20,false,1,0.5,0.5,[],[-0.2777777777777778,-0.45,0.05555555555555558,-0.45,0.4444444444444444,-0.04999999999999999,0.2777777777777778,0.44999999999999996,-0.3888888888888889,0.35,-0.4444444444444444,-0.09999999999999998],\"\"]]]],[],false,false,269594956777662,[],null,142,null],[\"坏结局字幕\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,868308599613092,[[\"images/坏结局字幕-sheet0.png\",31513,257,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,129,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,1,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,385,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,257,769,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,129,769,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,1,769,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,385,769,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,257,641,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,129,641,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,1,641,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,385,641,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,257,513,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,129,513,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,1,513,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,385,513,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,257,385,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,129,385,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,1,385,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,385,385,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,385,257,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,257,257,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,129,257,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"]]]],[],false,false,593724270144312,[],null,143,null],[\"好结局字幕\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,495450664739706,[[\"images/坏结局字幕-sheet0.png\",31513,257,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,129,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,1,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,385,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,257,769,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/坏结局字幕-sheet0.png\",31513,129,769,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,385,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,257,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,129,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,1,897,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,385,769,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,257,769,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,129,769,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,1,769,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,385,641,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,257,641,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,129,641,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,1,641,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,385,513,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,257,513,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,129,513,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,1,513,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,385,385,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,257,385,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,129,385,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,1,385,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,385,257,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,257,257,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,129,257,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"],[\"images/好结局字幕-sheet0.png\",31220,1,257,120,120,false,1,0.5,0.5,[],[-0.30833333333333335,-0.45,0.2833333333333333,-0.45,0.32499999999999996,-0.43333333333333335,0.31666666666666665,-0.24166666666666664,0.2833333333333333,-0.21666666666666667,-0.325,-0.25],\"\"]]]],[],true,false,165916492998747,[],null,144,null],[\"点击小叉关掉窗口\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,729412781156594,[[\"images/点击小叉关掉窗口-sheet0.png\",15191,385,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/点击小叉关掉窗口-sheet0.png\",15191,129,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/点击小叉关掉窗口-sheet0.png\",15191,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/点击小叉关掉窗口-sheet0.png\",15191,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/点击小叉关掉窗口-sheet0.png\",15191,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/点击小叉关掉窗口-sheet0.png\",15191,129,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/点击小叉关掉窗口-sheet0.png\",15191,257,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/点击小叉关掉窗口-sheet0.png\",15191,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/点击小叉关掉窗口-sheet0.png\",15191,1,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,803635948321739,[],null,145,null],[\"不喂\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,523837902580231,[[\"images/shared-0-sheet2.png\",27233,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,257,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet2.png\",27233,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet2.png\",27233,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,385,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,257,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,385,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,1,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,129,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,129,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,257,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,1,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不喂-sheet0.png\",16974,129,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,351337916042408,[],null,146,null],[\"不喂但有结局3\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,309465557120802,[[\"images/shared-0-sheet2.png\",27233,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet2.png\",27233,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet2.png\",27233,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet2.png\",27233,129,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet2.png\",27233,1,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet2.png\",27233,385,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,336942357835422,[],null,147,null],[\"喂食\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,251494393308086,[[\"images/喂食-sheet0.png\",20532,1,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,385,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,257,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,385,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,129,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,1,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,385,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,257,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,129,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,1,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,385,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,257,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,129,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,1,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,385,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,257,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,129,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/喂食-sheet0.png\",20532,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,659103799145856,[],null,148,null],[\"已经不饿啦\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,165649173762586,[[\"images/shared-0-sheet2.png\",27233,257,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,716936162218604,[],null,149,null],[\"锻炼字幕\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,869776161458660,[[\"images/锻炼字幕-sheet0.png\",13203,257,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/锻炼字幕-sheet0.png\",13203,385,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/锻炼字幕-sheet0.png\",13203,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/锻炼字幕-sheet0.png\",13203,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/锻炼字幕-sheet0.png\",13203,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/锻炼字幕-sheet0.png\",13203,129,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/锻炼字幕-sheet0.png\",13203,257,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/锻炼字幕-sheet0.png\",13203,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/锻炼字幕-sheet0.png\",13203,1,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/锻炼字幕-sheet0.png\",13203,129,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,103402746414055,[],null,150,null],[\"点击方形鲨鱼\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,983128129809581,[[\"images/shared-0-sheet2.png\",27233,385,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet2.png\",27233,257,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,257,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,129,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,1,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,968256222861931,[],null,151,null],[\"睡觉\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,210897913355300,[[\"images/睡觉-sheet0.png\",12804,385,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/睡觉-sheet0.png\",12804,129,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/睡觉-sheet0.png\",12804,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/睡觉-sheet0.png\",12804,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/睡觉-sheet0.png\",12804,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/睡觉-sheet0.png\",12804,129,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/睡觉-sheet0.png\",12804,257,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/睡觉-sheet0.png\",12804,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/睡觉-sheet0.png\",12804,1,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,195827160220676,[],null,152,null],[\"戴上花\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,494801699109200,[[\"images/shared-0-sheet1.png\",16986,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,129,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,385,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,257,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,129,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,269658671272118,[],null,153,null],[\"关灯\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,818401347563106,[[\"images/关灯-sheet0.png\",31302,129,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,1,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,385,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,257,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,129,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,1,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,385,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,257,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,129,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,1,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,385,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,257,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,129,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,129,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,1,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,385,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,257,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,129,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,1,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,257,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,129,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,385,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/关灯-sheet0.png\",31302,257,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,212021037707447,[],null,154,null],[\"中途开灯\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,497879632169975,[[\"images/shared-0-sheet1.png\",16986,1,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,385,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,257,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet1.png\",16986,129,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,671665781127897,[],null,155,null],[\"我害怕关灯\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,334406144654216,[[\"images/shared-0-sheet1.png\",16986,1,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,567803886835837,[],null,156,null],[\"等待10分钟\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,601201558566238,[[\"images/等待10分钟-sheet0.png\",17780,385,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,129,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,257,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,385,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,1,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,129,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,129,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,257,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/等待10分钟-sheet0.png\",17780,1,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,491158238639834,[],null,157,null],[\"发现流浪鲨鱼\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,375196388672004,[[\"images/shared-1-sheet2.png\",18772,1,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-1-sheet2.png\",18772,129,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-1-sheet2.png\",18772,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-1-sheet2.png\",18772,129,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,865442939168129,[],null,158,null],[\"垃圾桶碰到鲨鱼\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,600000028642074,[[\"images/shared-1-sheet0.png\",34264,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-1-sheet0.png\",34264,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-1-sheet0.png\",34264,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-1-sheet0.png\",34264,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,367159871606769,[],null,159,null],[\"不领养但带回鲨鱼\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,193129671108101,[[\"images/shared-1-sheet2.png\",18772,129,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,129,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,257,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,385,1,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,385,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,1,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,129,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,257,129,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,385,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,1,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,129,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,257,257,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,1,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,129,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/不领养但带回鲨鱼-sheet0.png\",17359,257,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,593659310205754,[],null,160,null],[\"好结局\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,558455699870496,[[\"images/好结局-sheet0.png\",30533,385,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,257,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,129,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,1,897,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,385,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,257,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,129,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,1,769,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,385,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,257,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,129,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,1,641,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,385,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,257,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,129,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,1,513,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,257,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,129,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/好结局-sheet0.png\",30533,1,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,552856582883176,[],null,161,null],[\"睡眠按钮被删掉了\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,510747230980125,[[\"images/shared-0-sheet0.png\",13899,385,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet0.png\",13899,257,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"],[\"images/shared-0-sheet0.png\",13899,129,385,120,120,false,1,0.5,0.5,[],[-0.4583333333333333,-0.4166666666666667,0.4833333333333333,-0.375,0.45833333333333337,-0.3,-0.48333333333333334,-0.31666666666666665],\"\"]]]],[],false,false,810088088561485,[],null,162,null],[\"有只饿死的鲨鱼\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,494726031069510,[[\"images/shared-0-sheet0.png\",13899,1,385,120,120,false,1,0.5,0.5,[],[-0.125,0.32499999999999996,0.275,0.3583333333333333,0.2416666666666667,0.44166666666666665,-0.25,0.42500000000000004,-0.24166666666666664,0.33333333333333337],\"\"]]]],[],false,false,306137491439073,[],null,163,null],[\"你没什么\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,300979675029743,[[\"images/shared-0-sheet0.png\",13899,385,257,120,120,false,1,0.5,0.5,[],[-0.22499999999999998,-0.425,0.275,-0.4083333333333333,0.29166666666666663,-0.30833333333333335,-0.23333333333333334,-0.30833333333333335,-0.25,-0.3833333333333333],\"\"]]]],[],false,false,271936067327686,[],null,164,null],[\"纯黑\",0,false,[],0,0,null,[[\"Animation 1\",5,false,1,0,false,634472869790691,[[\"images/shared-0-sheet0.png\",13899,257,257,120,120,false,1,0.5,0.5,[],[],\"\"]]]],[],false,false,231229271984393,[],null,165,null],[\"开灯\",0,false,[],0,0,null,[[\"开关灯\",5,false,1,0,false,384325655506044,[[\"images/shared-0-sheet4.png\",5774,34,97,14,17,false,1,0.5,0.5,[],[0.5,-0.5,0.5,-0.5,0.5,-0.5,0.5,0.4411764705882353,0.5,0.5,-0.5,0.20588235294117652,-0.5,-0.08823529411764708,-0.5,-0.5],\"\"]]]],[],false,false,909811478129128,[],null,166,null],[\"音频\",16,false,[],0,0,null,null,[],false,false,655639352610138,[],null,167,null,[0,0,false,0,true,1,1,600,600,10000,1]],[\"Touch\",17,false,[],0,0,null,null,[],false,false,965781905242970,[],null,168,null,[true]],[\"全局变量\",0,false,[[355213684773967,1,\"随机LOGO音效\",169],[586629515236047,1,\"解锁ED数\",170],[127400880560524,1,\"ED1\",171],[227527094855545,1,\"ED2\",172],[522067675082813,1,\"ED3\",173],[849043438900613,1,\"ED4\",174],[461750616061264,1,\"ED5\",175],[483232423204284,1,\"ED6\",176],[144644494770068,1,\"ED7\",177],[289105734742693,1,\"ED8\",178],[124011330598497,1,\"ED9\",179],[964962348710774,1,\"ED10\",180],[462953659517643,1,\"ED11\",181],[585363237479527,1,\"ED11达成次数\",182],[192796864834809,1,\"ED12\",183],[677610412652179,1,\"ED13\",184],[151585840076940,1,\"ED14\",185],[897035314131506,1,\"BAD\",186],[195658310835618,1,\"有流浪鲨鱼\",187],[220709569424212,1,\"饿死在外\",141],[784339118709023,1,\"累计喂食\",188],[978194359309501,1,\"累计锻炼\",189],[153943238130273,1,\"摘了花\",190],[649145378668130,1,\"戴了花\",191],[405160983823553,1,\"关灯时长\",192],[982428050757636,1,\"关灯时刻\",193],[229606714418484,1,\"关过灯\",194],[920876388551534,1,\"正在关灯\",195],[975660056340115,1,\"开始喂养时刻\",196],[616234682327154,1,\"喂养时长\",197],[211554915944610,1,\"弹窗开始\",198],[985083256783544,1,\"弹窗等待时间\",199],[687731933475539,1,\"正在说话\",79],[147005196895707,1,\"选择不要的次数\",200],[397686104897469,1,\"结局界面开始时间\",201],[584118680285880,1,\"结局界面持续时间\",202],[630382700029730,2,\"随机LOGO音效！\",203],[376600199703958,1,\"滑走音效\",204],[604150583913877,1,\"滤镜转场开始时间\",205],[254329696066383,1,\"开始色调分离\",206],[739684497595787,1,\"海报\",207],[364089658230279,1,\"点击苹果按钮次数\",208],[822983111611604,1,\"活动中\",209],[950172227733200,1,\"请求食物开始\",210],[833577068693608,1,\"饿肚子时长\",211],[859986158368623,1,\"饥饿程度\",212],[461426372419514,2,\"BGM随机\",213],[749268642690651,1,\"锻炼过了\",214],[240614974122013,1,\"做过新手引导\",215],[437293129860571,1,\"睡眠次数\",216],[489939607147414,1,\"垃圾桶出现\",217],[649422421254947,1,\"垃圾桶生效\",218],[803819626992508,1,\"窗户被删了\",219],[991501491058839,1,\"发现流浪鲨鱼\",158],[338197635917726,1,\"流浪鲨鱼带回家\",220],[726364308513129,1,\"开始ED7的演出\",221],[207273624315732,1,\"无视了鲨鱼\",222],[401448203153438,1,\"信展开\",223],[442709864388934,1,\"关灯阶段\",224],[168107065677952,1,\"开始ED910演出\",225],[892352748764557,1,\"前往最终结局\",226]],0,0,null,[[\"Animation 1\",5,false,1,0,false,756393475749474,[[\"images/shared-1-sheet3.png\",17602,90,178,35,35,false,1,0.5714285714285714,0.4857142857142857,[],[],\"\"]]]],[],true,false,737490135776787,[],null,227,null],[\"Text\",4,false,[],0,0,null,null,[],false,false,211624981743992,[],null,228,null],[\"Text2\",4,false,[],0,0,null,null,[],false,false,929148761534787,[],null,229,null],[\"Text3\",4,false,[],0,0,null,null,[],false,false,843229413535939,[],null,230,null],[\"正式发布记得删掉\",18,false,[],0,0,null,null,[],false,false,429921206524476,[],null,231,null,[]],[\"纯黑置顶过渡\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,866924035453318,[[\"images/shared-0-sheet0.png\",13899,257,1,250,250,false,1,0.5,0.5,[],[],\"\"]]]],[[\"补间动画\",1,961852627144121,1]],false,false,587016992783669,[],null,232,null],[\"结局910纯黑置顶过渡\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,567860686896761,[[\"images/shared-0-sheet0.png\",13899,257,1,250,250,false,1,0.5,0.5,[],[],\"\"]]]],[[\"补间动画\",1,875345602885895,1]],false,false,942337960571278,[],null,233,null],[\"过渡\",0,false,[],1,1,null,[[\"Animation 1\",5,false,1,0,false,380316539895080,[[\"images/shared-1-sheet0.png\",34264,1,1,250,250,false,1,0.5,0.5,[],[],\"\"]]]],[[\"补间动画\",1,794517540089557,1]],false,false,581530887058182,[[\"brightness\",\"亮度\"]],null,234,null],[\"纯黑过渡\",0,false,[],1,0,null,[[\"Animation 1\",5,false,1,0,false,555985554158538,[[\"images/shared-0-sheet0.png\",13899,257,1,250,250,false,1,0.5,0.5,[],[],\"\"]]]],[[\"补间动画\",1,788160789053939,1]],false,false,153173697637633,[],null,235,null],[\"语言选项\",0,true,[],1,0,null,null,[[\"闪烁\",19,686291404045930,236]],false,false,851382937733107,[],null,237,null],[\"结局图标\",0,true,[],4,0,null,null,[[\"正弦\",2,314773642269549,2],[\"正弦2\",2,561558882324309,80],[\"正弦3\",2,516891279181322,81],[\"补间动画\",1,337962128680642,1]],false,false,348661441224665,[],null,238,null],[\"结局文字\",0,true,[],2,0,null,null,[[\"补间动画\",1,564091408986045,1],[\"正弦\",2,510926886963988,2]],false,false,488394905328245,[],null,239,null],[\"UI按钮\",0,true,[],1,0,null,null,[[\"正弦\",2,917995573930814,2]],false,false,383035069334880,[],null,240,null],[\"字幕\",0,true,[],0,0,null,null,[],false,false,378794911968695,[],null,241,null],[\"最终结局图文\",0,true,[],1,0,null,null,[[\"补间动画\",1,778922683825454,1]],false,false,232303760340644,[],null,242,null]],[[152,67,69,68],[153,24,29,31,34,37,38,40,42,44,51,53],[154,25,30,32,35,36,39,41,43,45,52,54],[155,76,77,78,79,80,81,82,116,140],[156,121,134,120,129,128,132,122,133,135,123,127,130,83,119,125,126,124,136,137,138,117],[157,118,56,117,55,27]],[[\"【最开头】温馨提示\",120,120,false,false,0.5,0.5,\"温馨提示\",764548002906822,[[\"图层 0\",0,609005491207294,true,[0,0,0],false,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,0],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],66,57,[],[[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"开场LOGO\",120,120,false,false,0.5,0.5,\"开场logo\",842787046261399,[[\"背景\",0,406737251808199,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,5,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,14,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"1\",1,312850246820369,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[59.121114094362326,58.66804543207395,0,60,20,0,0,[1,1,1,1],0.5,0.65,0,0,[],null,null,null,[\"\",\"\"]],64,6,[],[[6,0,1,0,0,0,10,0,true],[true]],[true,\"Animation 1\",0,true]],[[-39.98987810658615,-13.915585160820196,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,19,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"选择语言\",120,120,false,false,0.5,0.5,\"选择语言\",401540645327030,[[\"背景\",0,177244208176399,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,3,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,15,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"1\",1,819949947321192,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[61,108,0,43,39,0,0,[1,1,1,1],0.46511627906976744,0.9487179487179487,0,0,[],null,null,null,[\"\",\"\"]],70,11,[0,0],[[4,0,2,0,0,0,1,0,true],[6,0,2,0,0,0,1,0,true],[1,0,0.5,0,0,0,5.799865861328125,1,false],[true]],[true,\"静置\",0,true]],[[55,21,0,27,16,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],67,7,[],[[]],[true,\"Animation 1\",0,true]],[[62,37,0,40,16,0,6.277873186543697,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],69,8,[],[[]],[true,\"Animation 1\",0,true]],[[68,54,0,52,15,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],68,9,[],[[]],[true,\"Animation 1\",0,true]],[[-24,-15,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,18,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"2\",2,646656621717613,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[58,122,0,116,16,0,0,[1,1,1,1],0.464922711058264,4.75,0,0,[[true,0.8],[true,-0.35]],null,null,null,[\"\",\"\"]],71,12,[],[],[false,\"Animation 1\",0,true]],[[62,37,0,116,16,0,0,[1,1,1,1],0.5,0.5,0,0,[[true,0.8],[true,-0.35]],null,null,null,[\"\",\"\"]],72,13,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"3 领养询问\",3,300206166154394,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[61,156,0,105,52,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],1,24,[],[[true],[0,0,4,0,0,0,50,0,false]],[true,\"Animation 1\",0,true]],[[36,196,0,38,22,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],2,25,[],[[true]],[true,\"Animation 1\",0,true]],[[86,196,0,38,22,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],3,26,[],[[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"真的放弃吗\",4,502361010600385,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[61,-58,0,105,52,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],5,50,[],[[true]],[true,\"Animation 1\",0,true]],[[36,-18,0,38,22,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],6,51,[],[[true]],[true,\"Animation 1\",0,true]],[[86,-18,0,38,22,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],7,52,[],[[true]],[true,\"Animation 1\",0,true]],[[3,3,0,159,24,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],144,58,[],[],[\"Text\",true,\"Arial\",12,0,false,false,[0,0,0],0,0,0,-1,false,0,false]]],[],0,true,false,[]]],[],[[\"pixellate\",\"马赛克\",[false,0]]]],[\"常规喂养\",120,120,false,false,0.5,0.5,\"常规喂养\",694991184613546,[[\"室内\",12,177835435846676,true,[255,255,255],true,1,1,1,false,false,1,0,true,[],[[\"noise\",\"噪点\",[false,0.0872,0.1]],[\"grayscale\",\"灰度\",[false,0.8233999633789061]],[\"brightness\",\"亮度\",[false,0.7959999999999998]]],0,true,false,[[\"场景背景\",4,807436964583017,true,[0,0,0],false,1,1,1,false,false,1,0,true,[[[-103,-37,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,56,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[[\"窗外\",0,729257718482488,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[84.80571449045297,13.56722431930583,0,45,30,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],88,63,[],[],[true,\"窗外景色\",0,true]],[[38,10,0,57,28,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],91,66,[0],[[0,3,40,0,0,0,100,0,true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"地板墙壁\",1,304424761393802,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],85,60,[],[],[true,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],94,137,[],[],[true,\"Animation 1\",0,true]],[[75.5,17.5,0,25,23,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],95,138,[],[],[false,\"Animation 1\",0,true]],[[98.5,20,0,15,14,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],96,139,[],[],[false,\"Animation 1\",0,true]],[[61,72.5,0,22,7,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],97,140,[],[],[false,\"Animation 1\",0,true]],[[25.5,5,0,11,12,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],98,141,[],[],[false,\"Animation 1\",0,true]],[[85,11,0,32,17,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],102,176,[],[],[false,\"Animation 1\",0,true]],[[98,27,0,18,15,0,0,[1,1,1,1],0.5555555555555556,0.9333333333333333,0,0,[],null,null,null,[\"\",\"\"]],93,136,[0],[[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"画框\",2,483580482262093,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[43.09181448903567,13.232601128795956,0,22,22,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],89,67,[],[],[true,\"不同海报\",0,true]]],[],0,true,false,[]],[\"植物\",3,977337800628435,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[59.958744245191774,60.113878939651784,0,41,38,0,0,[1,1,1,1],1.3414634146341464,1.605263157894737,0,0,[],null,null,null,[\"\",\"\"]],87,62,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]]],[\"互动对话框\",5,443643962663451,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,102.56603622436523,0,118,32,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],86,61,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"按钮\",6,942822811052115,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[34,103,0,19,14,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],77,65,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true]],[false,\"Animation 1\",0,true]],[[69,103,0,14,17,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],79,69,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true]],[false,\"开关灯\",0,true]],[[86,103,0,17,21,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],80,70,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true]],[false,\"Animation 1\",0,true]],[[104,103,0,16,17,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],81,71,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true]],[false,\"Animation 1\",0,true]],[[53,103,0,15,17,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],78,68,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true],[0,0,2,0,1,100,100,0,120,0,120],[1,3,2,0,0,0,8,0,false]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"方形鲨鱼\",7,447436521195981,true,[255,255,255],true,1,1,1,false,false,1,0,true,[],[],0,true,false,[]],[\"小鲨鱼\",8,428209709644904,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,51,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[[true,1,0]],null,null,null,[\"\",\"\"]],90,73,[],[[5,0,3,0,0,0,1,0,true],[100,300,300,0,false,false,true],[2,0,0.1,0,0,0,1,0,false],[4,0,0.5,0,0.25,0,10,0,false],[6,0,3,0,0,0,5,0,false]],[true,\"常规说话\",0,true]],[[50,47.5,0,3,3,0,0,[1,1,1,1],0.5,0.5,0,0,[[true,1,0]],null,null,null,[\"\",\"\"]],92,84,[],[[true]],[false,\"Animation 1\",0,true]],[[80,51,0,48,41,0,0,[1,1,1,1],0.5625,0.524390243902439,0,0,[],null,null,null,[\"\",\"\"]],99,154,[],[[5,0,3,0,0,0,1,0,true],[true],[50,20,20,0,false,false,true]],[false,\"流浪鲨鱼\",0,true]],[[106,72,0,18,18,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],82,72,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true],[1,0,0.2,0,0,0,4,0,false]],[false,\"Animation 1\",0,true]],[[163,42,0,87,87,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],33,108,[],[[100,300,300,0,false,false,true],[0,0,0.1,0,0,0,1,0,false]],[true,\"出场\",0,true]]],[],0,true,false,[]],[\"产生物\",9,546823605184821,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[57.5,102.5,0,183,39,0,0,[1,1,1,0],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],74,81,[],[[true,\"\"]],[false,\"Animation 1\",0,true]],[[-37,-1,0,69,4,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],74,82,[],[[true,\"\"]],[false,\"Animation 1\",0,true]],[[-16,-10,0,15,17,0,0,[1,1,1,1],0.5,0.5,0,0,[[true,0,1,1]],null,null,null,[\"\",\"\"]],73,80,[0],[[0,1,2,0,1,100,100,0,120,0,82],[0,-80,200,true,false,false,true],[1]],[true,\"Animation 1\",0,true]],[[-40,-14,0,17,21,0,0,[1,1,1,1],0.47058823529411764,0.5238095238095238,0,0,[],null,null,null,[\"\",\"\"]],75,135,[],[[0,-80,200,true,false,false,true],[0,1,1,1,1,100,100,0,120,0,82],[1]],[true,\"Animation 1\",0,true]],[[-12,55,0,27,26,0,0,[1,1,1,1],0.7777777777777778,0.9615384615384616,0,0,[],null,null,null,[\"\",\"\"]],100,149,[],[[6,0,3,0,0,0,2,0,true],[4,0,3,0,0,0,1,0,true],[true],[0,0,1,1,1,0,0,0,120,0,82]],[false,\"Animation 1\",0,true]],[[61,42,0,19,18,0,0,[1,1,1,1],0.5263157894736842,0.5555555555555556,0,0,[],null,null,null,[\"\",\"\"]],101,164,[],[[false]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"苹果按钮\",10,318135593777531,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[15,102,0,15,17,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],76,64,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"图标示意\",11,567071430953702,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-16,79,0,16,18,0,0,[1,1,1,1],0.3125,0.16666666666666666,0,0,[],null,null,null,[\"\",\"\"]],84,83,[],[[200,600,600,0,true,false,true],[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]]],[\"室外\",17,757461095519047,false,[255,255,255],true,1,1,1,false,false,1,0,false,[],[],0,true,false,[[\"天空和云朵\",13,594514909506774,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],104,125,[],[],[true,\"白天黄昏\",0,true]],[[17,15,0,3,3,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],108,184,[],[[7,0,4,1,0,0.5,80,10,true],[false,0,false,1,0.5,0.2,0,0.01,false,false]],[true,\"Animation 1\",0,true]],[[37,48,0,5,5,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],107,185,[],[[7,0,4,1,0,0.5,80,10,true],[false,0,false,1,0.5,0.2,0,0.01,false,false]],[true,\"Animation 1\",0,true]],[[62,22,0,3,3,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],109,186,[],[[7,0,4,1,0,0.5,80,10,true],[false,0,false,1,0.5,0.2,0,0.01,false,false]],[true,\"Animation 1\",0,true]],[[89,52,0,3,3,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],110,187,[],[[7,0,4,1,0,0.5,80,10,true],[false,0,false,1,0.5,0.2,0,0.01,false,false]],[true,\"Animation 1\",0,true]],[[104,21,0,5,5,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],111,188,[],[[7,0,4,1,0,0.5,80,10,true],[false,0,false,1,0.5,0.2,0,0.01,false,false]],[true,\"Animation 1\",0,true]],[[-28,32,0,57,28,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],105,129,[0],[[0,3,50,0,0,0,180,0,true],[0,true]],[true,\"Animation 1\",0,true]],[[-67,47,0,113,61,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],103,126,[],[[0,3,30,0,0,0,250,0,true],[0,true]],[true,\"白天黄昏\",0,true]]],[],0,true,false,[]],[\"草地\",14,860819551591113,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,95,0,122,53,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],106,130,[],[],[true,\"白天黄昏\",0,true]]],[],0,true,false,[]],[\"回家按钮\",15,834004078824014,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[11,108,0,18,20,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],116,131,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"发现物\",16,613920515226571,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,88,0,48,41,0,0,[1,1,1,1],0.5625,0.524390243902439,0,0,[],null,null,null,[\"\",\"\"]],112,148,[],[[5,0,3,0,0,0,1,0,true],[true]],[false,\"流浪鲨鱼\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],113,152,[],[],[false,\"Animation 1\",0,true]],[[102,96,0,27,26,0,0,[1,1,1,1],0.7777777777777778,0.9615384615384616,0,0,[],null,null,null,[\"\",\"\"]],114,161,[],[[6,0,3,0,0,0,2,0,true],[4,0,3,0,0,0,1,0,true],[true]],[true,\"Animation 1\",0,true]],[[58,106,0,72,30,0,0,[1,1,1,1],0.4722222222222222,0.9333333333333333,0,0,[],null,null,null,[\"\",\"\"]],115,273,[],[],[false,\"饿死在外\",0,true]]],[],0,true,false,[]]]],[\"关灯的世界\",20,937566875088353,false,[255,255,255],true,1,1,1,false,false,1,0,false,[],[[\"scanlines\",\"扫描线\",[true,1]],[\"noise\",\"噪点\",[true,0.0871999511718748,0.1]]],0,true,false,[[\"纯黑\",18,204621021714332,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],139,132,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"开灯按钮\",19,633850040165343,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[69,103,0,14,17,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],140,133,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true]],[true,\"开关灯\",0,true]]],[],0,true,false,[]]]],[\"对话文本\",36,896891575250642,true,[255,255,255],true,1,1,1,false,false,1,0,true,[],[],0,true,false,[[\"你没什么\",21,366217535102199,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],138,276,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"有只饿死的鲨鱼\",22,993918549054963,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],137,272,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"我害怕关灯\",23,463431813494845,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],130,173,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"中途开灯\",24,433938232428272,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],129,172,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"关灯\",25,134799061181771,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],128,166,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"戴上花\",26,911300523397793,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],127,165,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"发现流浪鲨鱼\",27,423038920336506,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],132,153,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"睡眠按钮被删掉了\",28,826516614845038,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],136,142,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"睡眠\",29,254642435006219,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],126,134,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"锻炼\",30,838608435520024,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],124,117,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"点击方形鲨鱼\",31,868601634923053,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,113,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],125,111,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"喂食\",32,762028985622827,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],122,100,[],[],[false,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],123,101,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"不喂但有结局3\",33,651350793026842,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],121,97,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"不喂\",34,637149275869630,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],120,90,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"新手引导\",35,460902718925696,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,13,0,34,16,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],83,79,[],[],[false,\"新手引导\",0,true]]],[],0,true,false,[]]]],[\"开发者调试\",37,199513626542345,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[4,77,0,109,22,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],146,96,[],[],[\"Text\",true,\"Arial\",4.200000000000004,0,false,false,[0,0,0],0,0,0,-1,false,0,false]]],[],0,true,false,[]],[\"纯黑置顶过渡\",38,379168628021500,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[55,55,0,250,250,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],148,160,[],[[true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局9&10特殊喂养\",120,120,false,false,0.5,0.5,\"结局9&10\",393188627852784,[[\"室内\",3,917267194122809,true,[255,255,255],true,1,1,1,false,false,1,0,true,[],[[\"noise\",\"噪点\",[false,0.0872,0.1]],[\"grayscale\",\"灰度\",[true,0.6539999084472653]],[\"brightness\",\"亮度\",[true,0.9185999450683593]]],0,true,false,[[\"场景背景\",0,488783128834541,true,[0,0,0],false,1,1,1,false,false,1,0,true,[[[-103,-37,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,218,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],46,220,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"小鲨鱼\",1,454863758201054,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[50,47.5,0,3,3,0,0,[1,1,1,1],0.5,0.5,0,0,[[true,1,0]],null,null,null,[\"\",\"\"]],92,226,[],[[true]],[false,\"Animation 1\",0,true]],[[60,51,0,48,41,0,0,[1,1,1,1],0.5625,0.524390243902439,0,0,[],null,null,null,[\"\",\"\"]],48,221,[],[[5,0,3,0,0,0,1,0,true],[true],[50,20,20,0,false,false,true]],[false,\"流浪鲨鱼\",0,true]]],[],0,true,false,[]],[\"按钮\",2,678910208981443,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[104,103,0,16,17,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],81,223,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true]],[true,\"Animation 1\",0,true]],[[21,65,0,27,27,0,0,[1,1,1,1],0.48148148148148145,0.4444444444444444,0,0,[],null,null,null,[\"\",\"\"]],49,225,[],[[5,0,3,0,0,0,1,0,true],[true]],[false,\"Animation 1\",0,true]],[[99,65,0,27,27,0,0,[1,1,1,1],0.48148148148148145,0.4444444444444444,0,0,[],null,null,null,[\"\",\"\"]],50,224,[],[[5,0,3,0,0,0,1,0,true],[true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]]]],[\"室外\",7,192279234601570,false,[255,255,255],true,1,1,1,false,false,1,0,false,[],[[\"grayscale\",\"灰度\",[true,0.5379998779296871]],[\"brightness\",\"亮度\",[true,0.9127999877929687]]],0,true,false,[[\"背景\",4,749575983660609,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],47,202,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"回家按钮\",5,862971987401523,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[11,108,0,18,20,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],116,200,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true]],[false,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],132,203,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"发现小鲨鱼\",6,824134777173290,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,88,0,48,41,0,0,[1,1,1,1],0.5625,0.524390243902439,0,0,[],null,null,null,[\"\",\"\"]],112,201,[],[[5,0,3,0,0,0,1,0,true],[true]],[true,\"流浪鲨鱼\",0,true]]],[],0,true,false,[]]]],[\"对话文本\",10,430407719775172,true,[255,255,255],true,1,1,1,false,false,1,0,true,[],[],0,true,false,[[\"不领养但带回鲨鱼\",8,524536989416265,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,143,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],134,222,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"发现流浪鲨鱼\",9,112862512522322,true,[255,255,255],true,1,1,1,false,false,1,0,true,[],[],0,true,false,[]]]],[\"开发者调试\",11,210137273116221,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[4,77,0,109,22,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],146,189,[],[],[\"Text\",true,\"Arial\",4.200000000000004,0,false,false,[0,0,0],0,0,0,-1,false,0,false]]],[],0,true,false,[]],[\"纯黑置顶过渡\",12,585426065688921,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[52,62,0,250,250,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],149,190,[],[[true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"常规外出\",120,120,false,false,0.5,0.5,\"常规外出\",351140192811871,[[\"背景\",4,730304834518252,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-103,-37,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,59,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[[\"天空\",0,645327976194392,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],104,76,[],[],[true,\"白天黄昏\",0,true]],[[81,28,0,5,5,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],107,85,[],[[7,0,4,1,0,0.5,80,10,true],[false,0,false,1,0.5,0.2,0,0.01,false,true]],[true,\"Animation 1\",0,true]],[[102,54,0,5,5,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],107,86,[],[[7,0,4,1,0,0.5,80,10,true],[false,0,false,1,0.5,0.2,0,0.01,false,true]],[true,\"Animation 1\",0,true]],[[11,20,0,5,5,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],107,87,[],[[7,0,4,1,0,0.5,80,10,true],[false,0,false,1,0.5,0.2,0,0.01,false,true]],[true,\"Animation 1\",0,true]],[[40,52,0,3,3,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],108,88,[],[[7,0,4,1,0,0.5,80,10,true],[false,0,false,1,0.5,0.2,0,0.01,false,true]],[true,\"Animation 1\",0,true]],[[94,13,0,3,3,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],108,89,[],[[7,0,4,0.5,0,0.5,80,10,true],[false,0,false,1,0.5,0.2,0,0.01,false,true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"云朵\",1,641601091907645,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-28,32,0,57,28,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],105,75,[0],[[0,3,50,0,0,0,180,0,true],[0,true]],[true,\"Animation 1\",0,true]],[[-67,47,0,113,61,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],103,74,[],[[0,3,30,0,0,0,250,0,true],[0,true]],[true,\"白天黄昏\",0,true]]],[],0,true,false,[]],[\"草地\",2,772004670022116,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,95,0,122,53,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],106,77,[],[],[true,\"白天黄昏\",0,true]]],[],0,true,false,[]],[\"回家按钮\",3,289786696041314,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[11,108,0,18,20,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],116,78,[],[[5,0,3,0.5,0,0.5,0.5,0.2,true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]]]],[],[]],[\"结局1胖胖鲨\",120,120,false,false,0.5,0.5,\"结局1\",600096987830977,[[\"背景\",0,828015625067163,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,103,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,104,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,534763664020623,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,105,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,106,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,107,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"图文\",2,675547880417913,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,58,0,43,43,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],31,110,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],32,109,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局2口碑太差的饲主\",120,120,false,false,0.5,0.5,\"结局2\",215965043929823,[[\"背景\",0,629717902701681,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,112,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,113,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,740680302194072,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,114,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,115,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,116,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"图文\",2,822723110638291,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[59,58,0,51,46,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],34,119,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],35,120,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局3流浪的鲨鱼\",120,120,false,false,0.5,0.5,\"结局3\",490997353415490,[[\"背景\",0,161908788524833,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,91,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,92,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,232817806799662,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,93,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,94,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,95,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"图文\",2,868599148134279,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],30,98,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]],[[60,57,0,48,41,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],29,99,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局4被视作无用的鲨鱼\",120,120,false,false,0.5,0.5,\"结局4被视作无用的鲨鱼\",775086488535487,[[\"背景\",0,859083398273743,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,177,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,178,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,572228631636924,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,179,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,180,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,181,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"图文\",2,454911834027128,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[58,59,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],44,182,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],45,183,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局5横纹肌溶解\",120,120,false,false,0.5,0.5,\"结局5必须以这个为模板克隆\",283616251305553,[[\"背景\",0,235816216277652,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,118,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,121,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,795796682966842,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,122,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,123,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,124,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"图文\",2,762594657039286,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],36,127,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]],[[57,58,0,58,30,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],37,128,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局6失眠的鲨鱼\",120,120,false,false,0.5,0.5,\"结局6\",375451128937327,[[\"背景\",0,332045512922500,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,143,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,144,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,167326424806287,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,145,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,146,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,147,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"图文\",2,552550064259271,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[63,58,0,43,39,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],38,150,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],39,151,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局7反悔的饲主\",120,120,false,false,0.5,0.5,\"结局7\",477539824606436,[[\"背景\",0,331064038546627,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,155,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,156,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,149685761178105,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,157,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,158,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,159,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"图文\",2,843470683293649,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,58,0,74,48,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],40,162,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],41,163,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局8成为养料的鲨鱼\",120,120,false,false,0.5,0.5,\"结局8\",972927991495076,[[\"背景\",0,330447537532328,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,167,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,168,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,885503751079378,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,169,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,170,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,171,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"图文\",2,686700204860354,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[57,64,0,54,52,0,0,[1,1,1,1],0.46296296296296297,0.8076923076923077,0,0,[],null,null,null,[\"\",\"\"]],42,174,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],43,175,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局9破镜难圆\",120,120,false,false,0.5,0.5,\"结局9\",503871170608678,[[\"背景\",0,326920960846057,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,227,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,228,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,420243151745386,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,229,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,263,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,264,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"图文\",2,969685639539150,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,57,0,58,41,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],51,274,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]],[[61,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],52,275,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局10原来我是与你无关的事物\",120,120,false,false,0.5,0.5,\"结局10\",967485382350152,[[\"背景\",0,763936353791656,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,267,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,268,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,394284473743047,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,269,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,270,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,271,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"图文\",2,126789366764282,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[61,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],54,265,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]],[[61,55,0,58,41,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],53,266,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"结局11一个人也很自在\",120,120,false,false,0.5,0.5,\"结局11\",201867216629519,[[\"背景\",0,439184828641677,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,27,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,28,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"1\",1,280730562280463,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,29,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,60,0,170,170,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,30,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,32,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"2\",2,245540985575950,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,54,45,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],24,31,[],[[5,0,1,0,0,0,2,0,false],[4,0,1,0,0,0,2,0,false],[6,0,2,0,0,0,5,0,false],[true]],[true,\"Animation 1\",0,true]],[[60,60,0,90,103,0,0,[1,1,1,1],0.5,0.4854368932038835,0,0,[],null,null,null,[\"\",\"\"]],25,33,[],[[true],[5,0,2,0,0,0,2,0,false]],[true,\"Animation 1\",0,true]],[[-35,60,0,58,16,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],26,2,[],[[200,600,600,0,true,false,true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"好结局\",120,120,false,false,0.5,0.5,\"好结局\",180823925654626,[[\"背景\",0,684980253932133,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,193,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,198,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,506119721104332,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,199,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,81,0,216,216,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,204,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,231,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"对话框\",2,309827791122036,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],56,237,[],[[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"字幕\",3,436720997620150,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],118,242,[],[[true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"小鲨鱼\",4,729431296805624,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[63,123,0,120,120,0,0,[1,1,1,1],0.525,0.9916666666666667,0,0,[],null,null,null,[\"\",\"\"]],55,238,[],[[true],[4,0,0.5,0,0,0,3,0,true],[6,0,1,0,0,0,4,0,true]],[true,\"微笑\",0,true]]],[],0,true,false,[]],[\"staff界面\",6,925741354418531,true,[255,255,255],true,1,1,1,false,false,1,0,true,[],[],0,true,false,[[\"staff列表\",5,784569252670784,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,240,0,120,240,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],58,240,[],[[10,0,0,0,false,false,true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]]]],[\"纯白色过渡\",7,139133866569506,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[70,99,0,250,250,0,0,[1,1,1,1],0.5,0.5,0,0,[[true,1]],null,null,null,[\"\",\"\"]],150,194,[],[[true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[]],[\"坏结局\",120,120,false,false,0.5,0.5,\"坏结局\",410935686731135,[[\"背景\",0,182921469414084,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,243,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,244,[],[],[true,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],63,257,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"炫光\",1,930784034626144,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,245,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[60,81,0,216,216,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],27,246,[],[[true],[188.59991479296875,0,true],[5,0,1,0,0,0,15,0,true]],[true,\"Animation 1\",0,true]],[[56,60,0,100,100,0,0,[1,1,1,1],0,0.5,0,0,[],null,null,null,[\"\",\"\"]],28,247,[],[],[10,360,0,-1,true,78.60000610351562,10,100,15.19998179296875,16.199981689453125,18.79998779296875,0,6,0,77.79995779296875,0,0,800,0,0,1]]],[],0,true,false,[]],[\"对话框\",2,828519146469863,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],56,248,[],[[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"字幕\",3,314219068754685,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],117,241,[],[[true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"小鲨鱼\",4,810074304123343,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[63,123,0,120,120,0,0,[1,1,1,1],0.525,0.9916666666666667,0,0,[],null,null,null,[\"\",\"\"]],55,249,[],[[true],[4,0,0.5,0,0,0,3,0,true],[6,0,1,0,0,0,4,0,true]],[true,\"微笑\",0,true]]],[],0,true,false,[]],[\"空空的房间\",5,273425355128026,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[[true,1],[true,1.9914000091552722],[true,0.058199951171874854,0.20119989013671807]],null,null,null,[\"\",\"\"]],60,250,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"staff字幕\",6,311034503586389,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,120,0,120,120,0,0,[1,1,1,1],0.5,1,0,0,[],null,null,null,[\"\",\"\"]],61,254,[],[[true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"纯黑色过渡\",7,945631628409640,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[46,81,0,250,250,0,0,[1,1,1,1],0.5,0.5,0,0,[[true,-0.4502000732421879]],null,null,null,[\"\",\"\"]],150,195,[],[[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"小鲨鱼离开了\",8,673477972393192,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],62,256,[],[[true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[[\"noise\",\"噪点\",[false,0.11019995117187487,-0.12740005493164072]]]],[\"领养询问\",120,120,false,false,0.5,0.5,\"领养询问\",963104006016134,[[\"背景\",0,992155814906872,true,[255,255,255],false,1,1,1,false,false,1,0,true,[[[-2.340601681853002,-2.1089433183189925,0,123.18774183067401,123.18774183067401,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],65,16,[],[],[true,0,1,1,0,0,1,1,0,false,1,1,1,0.1,0.1]],[[60,60,0,120,120,0,0,[1,1,1,0.3],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],0,17,[],[],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"小鲨鱼\",1,573686203416684,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[61,60,0,43,39,0,0,[1,1,1,1],0.46511627906976744,0.9487179487179487,0,0,[],null,null,null,[\"\",\"\"]],70,48,[0,0],[[4,0,2,0,0,0,1,0,true],[6,0,2,0,0,0,1,0,true],[1,0,0.5,0,0,0,5.799865861328125,1,false],[true]],[true,\"静置\",0,true]]],[],0,true,false,[]],[\"对话框\",2,481623839239647,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[-38,-31,0,19,19,0,0,[1,1,1,1],0.5714285714285714,0.4857142857142857,0,0,[],null,null,null,[\"\",\"\"]],143,20,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\"\",0,0,0,0,0,0,0,0,0,\"0\",0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[true,\"Animation 1\",0,true]],[[61,47,0,105,52,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],1,21,[],[[true],[5,0,2,0,0,0,2,0,true]],[true,\"Animation 1\",0,true]],[[36,87,0,38,22,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],2,22,[],[[true]],[true,\"Animation 1\",0,true]],[[86,87,0,38,22,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],3,23,[],[[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"右上角的叉\",3,999302063891279,true,[255,255,255],true,1,1,1,false,false,1,0,true,[],[],0,true,false,[]],[\"真的放弃吗\",4,802561470262143,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[61,-58,0,105,52,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],5,53,[],[[true]],[true,\"Animation 1\",0,true]],[[36,-18,0,38,22,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],6,54,[],[[true]],[true,\"Animation 1\",0,true]],[[86,-18,0,38,22,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],7,55,[],[[true]],[true,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"开发者路径\",5,791734358977063,false,[255,255,255],true,1,1,1,false,false,1,0,false,[[[3,3,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],10,34,[],[],[0,\"1\",\"\",true,true,true,false,\"\",\"\"]],[[17,3,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],16,35,[],[],[0,\"2\",\"\",true,true,true,false,\"\",\"\"]],[[31,3,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],17,36,[],[],[0,\"3\",\"\",true,true,true,false,\"\",\"\"]],[[45,3,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],18,37,[],[],[0,\"4\",\"\",true,true,true,false,\"\",\"\"]],[[59,3,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],19,38,[],[],[0,\"5\",\"\",true,true,true,false,\"\",\"\"]],[[73,3,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],20,39,[],[],[0,\"6\",\"\",true,true,true,false,\"\",\"\"]],[[88,3,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],21,40,[],[],[0,\"7\",\"\",true,true,true,false,\"\",\"\"]],[[3,17,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],22,41,[],[],[0,\"8\",\"\",true,true,true,false,\"\",\"\"]],[[15,17,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],23,42,[],[],[0,\"9\",\"\",true,true,true,false,\"\",\"\"]],[[27,17,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],11,43,[],[],[0,\"10\",\"\",true,true,true,false,\"\",\"\"]],[[39,17,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],12,44,[],[],[0,\"11\",\"\",true,true,true,false,\"\",\"\"]],[[51,17,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],13,45,[],[],[0,\"12\",\"\",true,true,true,false,\"\",\"\"]],[[63,17,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],14,46,[],[],[0,\"13\",\"\",true,true,true,false,\"\",\"\"]],[[75,17,0,12,12,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],15,47,[],[],[0,\"14\",\"\",true,true,true,false,\"\",\"\"]],[[5,97,0,93,20,0,0,[1,1,1,1],0,0,0,0,[],null,null,null,[\"\",\"\"]],9,49,[],[],[\"Text\",true,\"Arial\",3,0,false,false,[0,0,0],0,0,1,-1,true,0,false]]],[],0,true,false,[]],[\"字幕\",6,432288250798183,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[60,130,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],119,191,[],[],[false,\"Animation 1\",0,true]],[[60,60,0,120,120,0,0,[1,1,1,1],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],8,197,[],[],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"纯白过渡\",7,900333165575058,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[68,64,0,250,250,0,0,[1,1,1,0],0.5,0.5,0,0,[[true,1]],null,null,null,[\"\",\"\"]],150,192,[],[[true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]],[\"纯黑过渡\",8,493881497356269,true,[255,255,255],true,1,1,1,false,false,1,0,true,[[[52,59,0,250,250,0,0,[1,1,1,0],0.5,0.5,0,0,[],null,null,null,[\"\",\"\"]],151,196,[],[[true]],[false,\"Animation 1\",0,true]]],[],0,true,false,[]]],[],[[\"pixellate\",\"马赛克\",[false,0]]]]],[[\"结局11\",[[3,[true,\"【要调整】结局变量\"],false,null,507243368347932,1,[[-1,20,null,0,false,false,false,0,false,[[1,[0]]]]],[],[[0,0,false,null,444848993240614,2,[[-1,21,null,1,false,false,false,511318755495659,null]],[[143,22,null,901365893073230,0,null,[[10,12],[7,[1]]]]]]]],[3,[true,\"【只改一下结局文字和图标】\"],false,null,198646239010230,3,[[-1,20,null,0,false,false,false,0,false,[[1,[2]]]]],[],[[0,0,false,null,280715973390824,4,[[-1,23,null,0,false,false,false,876130554667290,null]],[[65,24,null,267051150643194,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,307161726434288,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,202214543540742,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,568474157811200,5,[[-1,21,null,1,false,false,false,490698742106859,null]],[[25,30,null,159186387424815,0,null,[[0,[1]],[0,[1]]]],[24,30,null,826907775401663,0,null,[[0,[1]],[0,[1]]]],[25,31,\"补间动画\",933651697695328,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[24,31,\"补间动画\",393635468042629,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,293591984537754,2,null,[[0,[7]]]],[25,33,\"正弦\",453520279064340,0,null,[[3,1]]],[24,33,\"正弦\",238248559231406,0,null,[[3,1]]],[24,33,\"正弦2\",467335101498932,0,null,[[3,1]]],[24,33,\"正弦3\",675010662066922,0,null,[[3,1]]]]],[0,0,false,null,616755476244227,6,[[-1,21,null,1,false,false,false,112584871450592,null]],[[143,22,null,152515244965069,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,808658894371766,2,null,[[0,[9]]]],[141,34,null,903837164815234,0,null,[[2,[\"普通结局BGM\",true]],[3,1],[0,[10]],[0,[11]],[1,[12]]]]]],[0,0,false,null,184747335030923,7,[[142,35,null,1,false,false,false,415329072645210,null],[143,36,null,0,false,false,false,248956035077928,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,444674171161205,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,234278291305115,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件\"],false,null,213429893210363,8,[[-1,20,null,0,false,false,false,0,false,[[1,[15]]]]],[],[[0,0,false,null,792382873596326,9,[[-1,21,null,1,false,false,false,853337159752699,null]],[[143,38,null,163149830612695,0,null,[[10,13],[7,[1]]]]]],[0,0,false,null,199616154632486,10,[[143,36,null,0,false,false,false,149413807801476,null,[[10,13],[8,5],[7,[16]]]]],[[26,39,\"移动到\",520908703449331,0,null,[[0,[17]]]],[26,40,\"移动到\",296277477211900,0,null,[[0,[18]],[0,[19]],[3,0]]]]]]]]],[\"结局3\",[[3,[true,\"【要调整】结局变量2\"],false,null,730503712989618,1,[[-1,20,null,0,false,false,false,0,false,[[1,[20]]]]],[],[[0,0,false,null,834735996830102,2,[[-1,21,null,1,false,false,false,599839748026431,null]],[[143,22,null,429307137395363,0,null,[[10,4],[7,[1]]]],[143,22,null,423034645597078,0,null,[[10,18],[7,[1]]]],[143,22,null,643304001522387,0,null,[[10,17],[7,[1]]]]]]]],[3,[true,\"【只改一下结局文字和图标】2\"],false,null,301659799198932,3,[[-1,20,null,0,false,false,false,0,false,[[1,[21]]]]],[],[[0,0,false,null,199815476036658,4,[[-1,23,null,0,false,false,false,834523565543637,null]],[[65,24,null,697106363985165,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,421607628524312,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,374734823908146,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,982405935731405,5,[[-1,21,null,1,false,false,false,785780163844292,null]],[[30,30,null,496293363090613,0,null,[[0,[1]],[0,[1]]]],[29,30,null,921596549920747,0,null,[[0,[1]],[0,[1]]]],[30,31,\"补间动画\",101625721545482,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[29,31,\"补间动画\",269637774007078,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,528934675746280,2,null,[[0,[7]]]],[30,33,\"正弦\",573576789913275,0,null,[[3,1]]],[29,33,\"正弦\",286834316000962,0,null,[[3,1]]],[29,33,\"正弦2\",337810740450025,0,null,[[3,1]]],[29,33,\"正弦3\",869509980227578,0,null,[[3,1]]]]],[0,0,false,null,250278537776330,6,[[-1,21,null,1,false,false,false,808355025115103,null]],[[141,41,null,708393316577421,0,null,[[1,[22]]]],[143,22,null,921103982606952,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,909991920512052,2,null,[[0,[9]]]],[141,34,null,298066116098624,0,null,[[2,[\"有点悲伤结局BGM\",true]],[3,1],[0,[10]],[0,[11]],[1,[12]]]]]],[0,0,false,null,643159411769147,7,[[142,35,null,1,false,false,false,850554401239047,null],[143,36,null,0,false,false,false,357181919838053,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,469786660831509,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,222069219837944,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件2\"],false,null,923279461505477,8,[[-1,20,null,0,false,false,false,0,false,[[1,[23]]]]],[]]]],[\"结局1\",[[3,[true,\"【要调整】结局变量3\"],false,null,715071123786556,1,[[-1,20,null,0,false,false,false,0,false,[[1,[24]]]]],[],[[0,0,false,null,519218445753262,2,[[-1,21,null,1,false,false,false,527005287740560,null]],[[143,22,null,288498249110551,0,null,[[10,2],[7,[1]]]]]]]],[3,[true,\"【只改一下结局文字和图标】3\"],false,null,367891306359588,3,[[-1,20,null,0,false,false,false,0,false,[[1,[25]]]]],[],[[0,0,false,null,498538949592999,4,[[-1,23,null,0,false,false,false,712115313362489,null]],[[65,24,null,596904300572447,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,665386892862854,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,180056416265170,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,933367231123061,5,[[-1,21,null,1,false,false,false,666968929693542,null]],[[32,30,null,148609674138160,0,null,[[0,[1]],[0,[1]]]],[31,30,null,330682116011565,0,null,[[0,[1]],[0,[1]]]],[32,31,\"补间动画\",604126985419593,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[31,31,\"补间动画\",864068443766568,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,768913989993830,2,null,[[0,[7]]]],[32,33,\"正弦\",629022257322624,0,null,[[3,1]]],[31,33,\"正弦\",621798863595737,0,null,[[3,1]]],[31,33,\"正弦2\",913114348239767,0,null,[[3,1]]],[31,33,\"正弦3\",861641038438880,0,null,[[3,1]]]]],[0,0,false,null,689779321994683,6,[[-1,21,null,1,false,false,false,170387283336582,null]],[[141,41,null,733630911842357,0,null,[[1,[22]]]],[143,22,null,634523554298246,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,506289954046968,2,null,[[0,[9]]]],[141,34,null,725145701876066,0,null,[[2,[\"普通结局BGM\",true]],[3,1],[0,[26]],[0,[11]],[1,[12]]]]]],[0,0,false,null,782038755109821,7,[[142,35,null,1,false,false,false,362343539708531,null],[143,36,null,0,false,false,false,400507679218224,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,928300318107140,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,942987378380148,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件3\"],false,null,402994469108832,8,[[-1,20,null,0,false,false,false,0,false,[[1,[27]]]]],[]]]],[\"结局2\",[[3,[true,\"【要调整】结局变量4\"],false,null,557052919127758,1,[[-1,20,null,0,false,false,false,0,false,[[1,[28]]]]],[],[[0,0,false,null,609909949315518,2,[[-1,21,null,1,false,false,false,228023860098378,null]],[[143,22,null,975525430786702,0,null,[[10,3],[7,[1]]]]]]]],[3,[true,\"【只改一下结局文字和图标】4\"],false,null,337776202876193,3,[[-1,20,null,0,false,false,false,0,false,[[1,[29]]]]],[],[[0,0,false,null,609627493853185,4,[[-1,23,null,0,false,false,false,120653572254214,null]],[[65,24,null,717279523727480,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,445912489421727,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,455054437192778,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,502642230075153,5,[[-1,21,null,1,false,false,false,980347121855305,null]],[[35,30,null,351420249718899,0,null,[[0,[1]],[0,[1]]]],[34,30,null,210715351046568,0,null,[[0,[1]],[0,[1]]]],[35,31,\"补间动画\",564496037085763,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[34,31,\"补间动画\",449406953924514,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,224330580679906,2,null,[[0,[7]]]],[35,33,\"正弦\",821735333132615,0,null,[[3,1]]],[34,33,\"正弦\",730300749185940,0,null,[[3,1]]],[34,33,\"正弦2\",127500651402064,0,null,[[3,1]]],[34,33,\"正弦3\",610987463887192,0,null,[[3,1]]]]],[0,0,false,null,457617305020132,6,[[-1,21,null,1,false,false,false,779998299561612,null]],[[141,41,null,962113540252225,0,null,[[1,[22]]]],[143,22,null,448225474696818,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,760695944951687,2,null,[[0,[9]]]],[141,34,null,357363078911119,0,null,[[2,[\"普通结局BGM\",true]],[3,1],[0,[26]],[0,[11]],[1,[12]]]]]],[0,0,false,null,475016544767595,7,[[142,35,null,1,false,false,false,592243087296941,null],[143,36,null,0,false,false,false,454912300582747,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,520514905849203,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,285097808394594,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件4\"],false,null,631820457426246,8,[[-1,20,null,0,false,false,false,0,false,[[1,[30]]]]],[]]]],[\"结局5必须以这个为模板克隆\",[[3,[true,\"【要调整】结局变量5\"],false,null,907612434518983,1,[[-1,20,null,0,false,false,false,0,false,[[1,[31]]]]],[],[[0,0,false,null,194323481863162,2,[[-1,21,null,1,false,false,false,833230652641124,null]],[[143,22,null,694205199711178,0,null,[[10,6],[7,[1]]]],[143,22,null,161020783095856,0,null,[[10,17],[7,[1]]]],[37,42,null,453629032550620,0,null],[37,43,null,585008415839757,0,null,[[0,[11]]]]]]]],[3,[true,\"【只改一下结局文字和图标】5\"],false,null,745318214128599,3,[[-1,20,null,0,false,false,false,0,false,[[1,[32]]]]],[],[[0,0,false,null,539541103332760,4,[[-1,23,null,0,false,false,false,324295636264110,null]],[[65,24,null,318918881261307,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,866240715911543,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,658144319350621,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,915247623516354,5,[[-1,21,null,1,false,false,false,845417404942909,null]],[[36,30,null,415886843554685,0,null,[[0,[1]],[0,[1]]]],[37,30,null,354810760620874,0,null,[[0,[1]],[0,[1]]]],[36,31,\"补间动画\",431563843916775,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[37,31,\"补间动画\",775312164027135,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,961586793017599,2,null,[[0,[7]]]],[36,33,\"正弦\",447501034089942,0,null,[[3,1]]],[37,33,\"正弦\",536494537920144,0,null,[[3,1]]],[37,33,\"正弦2\",572833799900400,0,null,[[3,1]]],[37,33,\"正弦3\",878627603044140,0,null,[[3,1]]]]],[0,0,false,null,962573568357060,6,[[-1,21,null,1,false,false,false,384003768798270,null]],[[141,41,null,529791085376465,0,null,[[1,[22]]]],[143,22,null,281382152430521,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,339477179165786,2,null,[[0,[9]]]],[141,34,null,752069945846441,0,null,[[2,[\"有点悲伤结局BGM\",true]],[3,1],[0,[10]],[0,[11]],[1,[12]]]]]],[0,0,false,null,467975830598799,7,[[142,35,null,1,false,false,false,312990124730180,null],[143,36,null,0,false,false,false,890216321022433,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,902608364300972,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,660717268166219,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件5\"],false,null,326475340077832,8,[[-1,20,null,0,false,false,false,0,false,[[1,[33]]]]],[]],[3,[true,\"鲨鱼头戴花\"],false,null,192497773822637,9,[[-1,20,null,0,false,false,false,0,false,[[1,[34]]]]],[],[[0,0,false,null,138734861241450,10,[[143,36,null,0,false,false,false,867273424561285,null,[[10,23],[8,0],[7,[1]]]]],[[37,43,null,486638810425616,0,null,[[0,[1]]]]]]]]]],[\"结局6\",[[3,[true,\"【要调整】结局变量6\"],false,null,867312638513374,1,[[-1,20,null,0,false,false,false,0,false,[[1,[35]]]]],[],[[0,0,false,null,233936534100247,2,[[-1,21,null,1,false,false,false,785741692881965,null]],[[143,22,null,789148403424289,0,null,[[10,7],[7,[1]]]],[38,42,null,912517860107865,0,null],[38,43,null,628515320919719,0,null,[[0,[11]]]]]]]],[3,[true,\"【只改一下结局文字和图标】6\"],false,null,277071156788399,3,[[-1,20,null,0,false,false,false,0,false,[[1,[36]]]]],[],[[0,0,false,null,320896549855102,4,[[-1,23,null,0,false,false,false,585351979802987,null]],[[65,24,null,330526630470623,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,582286105499129,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,955341918841032,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,788037737545519,5,[[-1,21,null,1,false,false,false,887681691925156,null]],[[39,30,null,320512417061946,0,null,[[0,[1]],[0,[1]]]],[38,30,null,892823909036054,0,null,[[0,[1]],[0,[1]]]],[39,31,\"补间动画\",343876033930381,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[38,31,\"补间动画\",504105829683061,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,871440760850182,2,null,[[0,[7]]]],[39,33,\"正弦\",717623524042565,0,null,[[3,1]]],[38,33,\"正弦\",276771155787407,0,null,[[3,1]]],[38,33,\"正弦2\",544097182520405,0,null,[[3,1]]],[38,33,\"正弦3\",774898078809312,0,null,[[3,1]]]]],[0,0,false,null,688921759917111,6,[[-1,21,null,1,false,false,false,765661263567974,null]],[[141,41,null,390908700777770,0,null,[[1,[22]]]],[143,22,null,389838095096821,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,646687076061817,2,null,[[0,[9]]]],[141,34,null,645226851674899,0,null,[[2,[\"普通结局BGM\",true]],[3,1],[0,[26]],[0,[11]],[1,[12]]]]]],[0,0,false,null,617371281243394,7,[[142,35,null,1,false,false,false,746167128771177,null],[143,36,null,0,false,false,false,325875771241579,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,897890442588402,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,570658581623425,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件6\"],false,null,300761823237099,8,[[-1,20,null,0,false,false,false,0,false,[[1,[37]]]]],[]],[0,0,false,null,572056755475105,9,[[143,36,null,0,false,false,false,496122002407233,null,[[10,23],[8,0],[7,[1]]]]],[[38,43,null,335368761955013,0,null,[[0,[1]]]]]]]],[\"结局7\",[[3,[true,\"【要调整】结局变量7\"],false,null,712525285538005,1,[[-1,20,null,0,false,false,false,0,false,[[1,[38]]]]],[],[[0,0,false,null,996634066593415,2,[[-1,21,null,1,false,false,false,220794278406753,null]],[[143,22,null,809842436816470,0,null,[[10,8],[7,[1]]]],[40,42,null,660967070015617,0,null],[40,43,null,396204941078976,0,null,[[0,[11]]]],[-1,44,null,400822466706562,0,null,[[1,[39]],[3,0]]],[-1,44,null,152499474414514,0,null,[[1,[40]],[3,1]]]]]]],[3,[true,\"【只改一下结局文字和图标】7\"],false,null,856722631222345,3,[[-1,20,null,0,false,false,false,0,false,[[1,[41]]]]],[],[[0,0,false,null,581957497395679,4,[[-1,23,null,0,false,false,false,632950547087552,null]],[[65,24,null,307699378670197,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,647544636030212,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,782816510894726,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,794193084484501,5,[[-1,21,null,1,false,false,false,228873331868869,null]],[[41,30,null,932216497659490,0,null,[[0,[1]],[0,[1]]]],[40,30,null,570881764626728,0,null,[[0,[1]],[0,[1]]]],[41,31,\"补间动画\",613446582136140,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[40,31,\"补间动画\",358452500067556,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,528609727909187,2,null,[[0,[7]]]],[41,33,\"正弦\",160584012826077,0,null,[[3,1]]],[40,33,\"正弦\",163304500370035,0,null,[[3,1]]],[40,33,\"正弦2\",133428894420836,0,null,[[3,1]]],[40,33,\"正弦3\",256030514473708,0,null,[[3,1]]]]],[0,0,false,null,938359956874262,6,[[-1,21,null,1,false,false,false,235967303555539,null]],[[141,41,null,384745223081054,0,null,[[1,[22]]]],[143,22,null,327790153833272,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,103064791999818,2,null,[[0,[9]]]],[141,34,null,994409193719193,0,null,[[2,[\"普通结局BGM\",true]],[3,1],[0,[26]],[0,[11]],[1,[12]]]]]],[0,0,false,null,960623562275494,7,[[142,35,null,1,false,false,false,148838373533454,null],[143,36,null,0,false,false,false,287907383133289,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,883665505452007,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,858790763510675,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件7\"],false,null,704268829594981,8,[[-1,20,null,0,false,false,false,0,false,[[1,[42]]]]],[]],[0,0,false,null,612379064389968,9,[[143,36,null,0,false,false,false,873899181650633,null,[[10,23],[8,0],[7,[1]]]]],[[38,43,null,862493600480078,0,null,[[0,[1]]]]]]]],[\"结局8\",[[3,[true,\"【要调整】结局变量8\"],false,null,123071595510153,1,[[-1,20,null,0,false,false,false,0,false,[[1,[43]]]]],[],[[0,0,false,null,801844133827155,2,[[-1,21,null,1,false,false,false,774175877227497,null]],[[143,22,null,821952533852484,0,null,[[10,9],[7,[1]]]],[42,42,null,848029207751805,0,null]]]]],[3,[true,\"【只改一下结局文字和图标】8\"],false,null,369363942104196,3,[[-1,20,null,0,false,false,false,0,false,[[1,[44]]]]],[],[[0,0,false,null,191464321987290,4,[[-1,23,null,0,false,false,false,814198187291588,null]],[[65,24,null,454459074816795,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,611625555051091,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,589091162228500,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,640534870651947,5,[[-1,21,null,1,false,false,false,930252132564932,null]],[[43,30,null,284551056974064,0,null,[[0,[1]],[0,[1]]]],[42,30,null,148770921949826,0,null,[[0,[1]],[0,[1]]]],[43,31,\"补间动画\",482699547722716,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[42,31,\"补间动画\",412667652608729,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,801342928244041,2,null,[[0,[7]]]],[43,33,\"正弦\",781700030838598,0,null,[[3,1]]],[42,33,\"正弦\",497042089487566,0,null,[[3,1]]],[42,33,\"正弦2\",401607090956109,0,null,[[3,1]]],[42,33,\"正弦3\",751928933798588,0,null,[[3,1]]]]],[0,0,false,null,203316607066080,6,[[-1,21,null,1,false,false,false,257083777089075,null]],[[141,41,null,496594890091596,0,null,[[1,[22]]]],[143,22,null,236730381077887,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,209193517048945,2,null,[[0,[9]]]],[141,34,null,445118015797311,0,null,[[2,[\"有点悲伤结局BGM\",true]],[3,1],[0,[10]],[0,[11]],[1,[12]]]]]],[0,0,false,null,363685209281713,7,[[142,35,null,1,false,false,false,393687245381000,null],[143,36,null,0,false,false,false,749008079848690,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,841793526451293,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,910186669925244,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件8\"],false,null,961590297206308,8,[[-1,20,null,0,false,false,false,0,false,[[1,[45]]]]],[]],[3,[true,\"鲨鱼头戴花2\"],false,null,749067629561746,9,[[-1,20,null,0,false,false,false,0,false,[[1,[46]]]]],[]]]],[\"结局4被视作无用的鲨鱼\",[[3,[true,\"【要调整】结局变量9\"],false,null,922146569413360,1,[[-1,20,null,0,false,false,false,0,false,[[1,[47]]]]],[],[[0,0,false,null,257074177346409,2,[[-1,21,null,1,false,false,false,197729615526793,null]],[[143,22,null,178033046572322,0,null,[[10,5],[7,[1]]]],[143,22,null,160098560183485,0,null,[[10,17],[7,[1]]]],[44,42,null,645258051669644,0,null]]]]],[3,[true,\"【只改一下结局文字和图标】9\"],false,null,556457467364865,3,[[-1,20,null,0,false,false,false,0,false,[[1,[48]]]]],[],[[0,0,false,null,923054369978566,4,[[-1,23,null,0,false,false,false,436970213074455,null]],[[65,24,null,650035144684678,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,194274267603817,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,792781102362050,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,254108316443509,5,[[-1,21,null,1,false,false,false,941407730346909,null]],[[45,30,null,607351682199989,0,null,[[0,[1]],[0,[1]]]],[44,30,null,799928819170202,0,null,[[0,[1]],[0,[1]]]],[45,31,\"补间动画\",101043524178870,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[44,31,\"补间动画\",916717541459623,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,746037398005296,2,null,[[0,[7]]]],[45,33,\"正弦\",760222745714335,0,null,[[3,1]]],[44,33,\"正弦\",476356727458657,0,null,[[3,1]]],[44,33,\"正弦2\",592126112757241,0,null,[[3,1]]],[44,33,\"正弦3\",142204798431381,0,null,[[3,1]]]]],[0,0,false,null,642284056576811,6,[[-1,21,null,1,false,false,false,263057821943690,null]],[[141,41,null,745202279240390,0,null,[[1,[22]]]],[143,22,null,720972535170381,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,524261181737877,2,null,[[0,[9]]]],[141,34,null,549009834402780,0,null,[[2,[\"有点悲伤结局BGM\",true]],[3,1],[0,[10]],[0,[11]],[1,[12]]]]]],[0,0,false,null,100377512511126,7,[[142,35,null,1,false,false,false,926453062051127,null],[143,36,null,0,false,false,false,447210472268936,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,682774089798075,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,221833119429643,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件9\"],false,null,294757128282837,8,[[-1,20,null,0,false,false,false,0,false,[[1,[49]]]]],[]],[3,[true,\"鲨鱼头戴花3\"],false,null,137984516574576,9,[[-1,20,null,0,false,false,false,0,false,[[1,[50]]]]],[]]]],[\"结局9&10\",[[3,[false,\"开发者调试3\"],false,null,828475884348243,1,[[-1,20,null,0,false,false,false,0,false,[[1,[51]]]]],[],[[0,0,false,null,169091158161568,2,[[-1,23,null,0,false,false,false,173303028088598,null]],[[146,45,null,568558293079866,0,null,[[3,1]]],[146,46,null,281544731157874,0,null,[[7,[52,[2,143,false,24],[2,143,false,58]]]]]]]]],[3,[true,\"场景构建2\"],false,null,176200794981312,3,[[-1,20,null,0,false,false,false,0,false,[[1,[53]]]]],[],[[3,[true,\"初始构建2\"],false,null,132004719623844,4,[[-1,20,null,0,false,false,false,0,false,[[1,[54]]]]],[],[[0,0,false,null,754643887037666,5,[[-1,21,null,1,false,false,false,959872090742376,null]],[[156,42,null,124330860470802,0,null],[156,47,null,683012787252237,0,null,[[3,0]]],[-1,48,null,456284446114777,0,null,[[5,[55]],[16,false]]],[-1,48,null,635571945774994,0,null,[[5,[13]],[16,true]]],[143,22,null,294518885423880,0,null,[[10,59],[7,[11]]]],[141,34,null,740025543295621,0,null,[[2,[\"开关灯/信号噪音\",false]],[3,0],[0,[11]],[0,[11]],[1,[56]]]],[-1,44,null,470083694812657,0,null,[[1,[39]],[3,0]]],[-1,44,null,143023915670518,0,null,[[1,[40]],[3,1]]]]]]]]],[3,[true,\"所有室内功能2\"],false,null,184065300965403,6,[[-1,20,null,0,false,false,false,0,false,[[1,[57]]]]],[],[[3,[true,\"同意拒绝按钮\"],false,null,286967234156306,7,[[-1,20,null,0,false,false,false,0,false,[[1,[58]]]]],[],[[3,[false,\"点击红色\"],false,null,972828351413029,8,[[-1,20,null,0,false,false,false,0,false,[[1,[59]]]]],[],[[0,0,false,null,975933308226682,9,[[142,49,null,1,false,false,false,191630256280535,null,[[4,50]]]],[[-1,48,null,338930687474647,0,null,[[5,[13]],[16,false]]],[141,34,null,552891258837169,0,null,[[2,[\"领养询问/确认放弃\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[50,33,\"正弦\",898398578364810,0,null,[[3,0]]],[50,31,\"补间动画\",169832498494419,1,null,[[1,[14]],[3,2],[0,[60]],[0,[60]],[0,[61]],[18,0],[3,0],[3,0],[3,1],[0,[1]]]],[-1,32,null,371807959571155,2,null,[[0,[62]]]],[-1,44,null,934512721751031,0,null,[[1,[59]],[3,0]]],[-1,44,null,816449190481660,0,null,[[1,[63]],[3,0]]],[50,47,null,270018070749999,0,null,[[3,0]]],[49,47,null,263746380382788,0,null,[[3,0]]],[-1,32,null,255834616312590,2,null,[[0,[64]]]],[141,34,null,272320104518908,0,null,[[2,[\"不领养但带回鲨鱼/我……明白了。\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[48,50,null,192900254603526,0,null,[[1,[66]],[3,1]]],[134,43,null,225549528533652,0,null,[[0,[67]]]],[-1,32,null,141627728991146,2,null,[[0,[68]]]],[48,42,null,232592599355438,0,null],[48,43,null,147407995446484,0,null,[[0,[1]]]],[-1,32,null,723903953477472,2,null,[[0,[69]]]],[48,50,null,256491582058560,0,null,[[1,[66]],[3,1]]],[-1,32,null,884729381897504,2,null,[[0,[70]]]],[48,42,null,749663344528435,0,null],[48,43,null,104433894448097,0,null,[[0,[1]]]],[-1,32,null,398117801847956,2,null,[[0,[71]]]],[48,50,null,729784433199358,0,null,[[1,[72]],[3,1]]],[134,43,null,641260272500734,0,null,[[0,[73]]]],[-1,32,null,256560655217102,2,null,[[0,[74]]]],[48,42,null,505720604566578,0,null],[48,43,null,549051133723041,0,null,[[0,[1]]]],[48,40,\"移动到\",509299583321671,0,null,[[0,[75]],[0,[76]],[3,0]]],[-1,32,null,714808249962415,2,null,[[0,[77]]]],[48,50,null,402879292628014,0,null,[[1,[78]],[3,1]]],[134,43,null,186266673144700,0,null,[[0,[79]]]],[-1,32,null,855126707064803,2,null,[[0,[80]]]],[48,42,null,999303448203385,0,null],[48,43,null,191171748457651,0,null,[[0,[1]]]],[-1,32,null,365004356547491,2,null,[[0,[81]]]],[48,50,null,422634495533851,0,null,[[1,[78]],[3,1]]],[-1,32,null,173855333933959,2,null,[[0,[82]]]],[48,42,null,900337937407491,0,null],[48,43,null,647747551805018,0,null,[[0,[1]]]],[-1,32,null,910560722647755,2,null,[[0,[83]]]],[48,50,null,796054080649546,0,null,[[1,[78]],[3,1]]],[134,43,null,116808447501219,0,null,[[0,[84]]]],[-1,32,null,269004950623868,2,null,[[0,[85]]]],[48,42,null,682671163173863,0,null],[48,43,null,384883443741105,0,null,[[0,[1]]]],[-1,32,null,757639593260021,2,null,[[0,[6]]]],[48,40,\"移动到\",382443733541223,0,null,[[0,[86]],[0,[76]],[3,0]]],[-1,32,null,400170286533708,2,null,[[0,[1]]]],[134,47,null,258579247357080,0,null,[[3,0]]],[-1,32,null,155050340817709,2,null,[[0,[64]]]],[-1,48,null,746545280611912,0,null,[[5,[13]],[16,true]]],[-1,37,null,387869802960179,0,null,[[6,\"结局10原来我是与你无关的事物\"]]]]]]],[3,[false,\"点击绿色\"],false,null,440328565341366,10,[[-1,20,null,0,false,false,false,0,false,[[1,[63]]]]],[],[[0,0,false,null,710856800491519,11,[[142,49,null,1,false,false,false,615234123648792,null,[[4,49]]]],[[-1,48,null,469409210924430,0,null,[[5,[13]],[16,false]]],[141,34,null,523007610317238,0,null,[[2,[\"领养询问/确认放弃\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[49,33,\"正弦\",288571341114899,0,null,[[3,0]]],[49,31,\"补间动画\",353537004786674,1,null,[[1,[14]],[3,2],[0,[60]],[0,[60]],[0,[61]],[18,0],[3,0],[3,0],[3,1],[0,[1]]]],[-1,32,null,866631831109783,2,null,[[0,[62]]]],[-1,44,null,229980312487738,0,null,[[1,[59]],[3,0]]],[-1,44,null,628578127413194,0,null,[[1,[63]],[3,0]]],[50,47,null,880877011909159,0,null,[[3,0]]],[49,47,null,785548020946073,0,null,[[3,0]]],[-1,32,null,219663300661660,2,null,[[0,[1]]]],[141,34,null,956189397398346,0,null,[[2,[\"不领养但带回鲨鱼/谢谢你……您……谢谢您……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[48,50,null,695029679106843,0,null,[[1,[87]],[3,1]]],[134,43,null,132446322393089,0,null,[[0,[88]]]],[-1,32,null,120938620494749,2,null,[[0,[89]]]],[48,42,null,465267147652334,0,null],[48,43,null,993640032690568,0,null,[[0,[1]]]],[-1,32,null,511965350641357,2,null,[[0,[90]]]],[48,50,null,596073044171674,0,null,[[1,[87]],[3,1]]],[-1,32,null,492268360278808,2,null,[[0,[91]]]],[48,42,null,111025192043930,0,null],[48,43,null,242563801118148,0,null,[[0,[1]]]],[-1,32,null,398571489855199,2,null,[[0,[92]]]],[48,50,null,469716760775145,0,null,[[1,[87]],[3,1]]],[-1,32,null,611230331405907,2,null,[[0,[93]]]],[48,42,null,789324437791008,0,null],[48,43,null,376626347404344,0,null,[[0,[1]]]],[-1,32,null,760985792978803,2,null,[[0,[94]]]],[48,50,null,220698174041229,0,null,[[1,[95]],[3,1]]],[134,43,null,584384079916059,0,null,[[0,[96]]]],[-1,32,null,775454738134180,2,null,[[0,[97]]]],[48,42,null,682747315977235,0,null],[48,43,null,273064654852896,0,null,[[0,[1]]]],[-1,32,null,880078007726846,2,null,[[0,[13]]]],[134,47,null,793110410878959,0,null,[[3,0]]],[-1,48,null,156431260630025,0,null,[[5,[13]],[16,true]]],[-1,37,null,226019977777535,0,null,[[6,\"结局9破镜难圆\"]]]]]]]]],[3,[true,\"ED9&10\"],false,null,865783856131375,12,[[-1,20,null,0,false,false,false,0,false,[[1,[98]]]]],[],[[0,0,false,null,355970946383354,13,[[143,36,null,0,false,false,false,651610597297331,null,[[10,59],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,424133586431038,null]],[[-1,48,null,398397439022417,0,null,[[5,[13]],[16,false]]],[-1,32,null,875002997124815,2,null,[[0,[64]]]],[141,34,null,820575924791222,0,null,[[2,[\"不领养但带回鲨鱼/不领养，但带回鲨鱼\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[134,47,null,566044413881845,0,null,[[3,1]]],[134,43,null,999405572103048,0,null,[[0,[11]]]],[48,50,null,441604870709137,0,null,[[1,[99]],[3,1]]],[-1,32,null,483010136665450,2,null,[[0,[100]]]],[48,42,null,676239460888610,0,null],[48,43,null,872676347479203,0,null,[[0,[1]]]],[-1,32,null,825326387999204,2,null,[[0,[101]]]],[48,50,null,686212598725394,0,null,[[1,[99]],[3,1]]],[-1,32,null,607115883377143,2,null,[[0,[102]]]],[48,42,null,203152978356427,0,null],[48,43,null,371195849255744,0,null,[[0,[1]]]],[-1,32,null,817892546590097,2,null,[[0,[103]]]],[48,50,null,980445575517534,0,null,[[1,[66]],[3,1]]],[134,43,null,563651930696873,0,null,[[0,[1]]]],[-1,32,null,679174650255935,2,null,[[0,[104]]]],[48,42,null,498192743729313,0,null],[48,43,null,373057715757682,0,null,[[0,[1]]]],[-1,32,null,841704072005188,2,null,[[0,[105]]]],[48,50,null,600895162094278,0,null,[[1,[106]],[3,1]]],[134,43,null,431331280700647,0,null,[[0,[16]]]],[-1,32,null,891822298633577,2,null,[[0,[60]]]],[48,42,null,483473038273175,0,null],[48,43,null,571908032550888,0,null,[[0,[1]]]],[-1,32,null,381040852824227,2,null,[[0,[107]]]],[48,50,null,787514315027461,0,null,[[1,[106]],[3,1]]],[134,43,null,115745080237705,0,null,[[0,[13]]]],[-1,32,null,619713651830751,2,null,[[0,[108]]]],[48,42,null,961185258853967,0,null],[48,43,null,307766176899594,0,null,[[0,[1]]]],[-1,32,null,168455631258553,2,null,[[0,[109]]]],[48,50,null,824029326465161,0,null,[[1,[106]],[3,1]]],[-1,32,null,344438005279768,2,null,[[0,[110]]]],[48,42,null,592713129925230,0,null],[48,43,null,110166816017971,0,null,[[0,[1]]]],[-1,32,null,123666845434458,2,null,[[0,[111]]]],[48,50,null,467757461477614,0,null,[[1,[66]],[3,1]]],[134,43,null,647904968666748,0,null,[[0,[112]]]],[-1,32,null,251853930880299,2,null,[[0,[113]]]],[48,50,null,963862700666921,0,null,[[1,[66]],[3,1]]],[134,43,null,302814077390114,0,null,[[0,[114]]]],[-1,32,null,846340008814275,2,null,[[0,[115]]]],[48,42,null,229576617742770,0,null],[48,43,null,154738099371114,0,null,[[0,[1]]]],[-1,32,null,682339419311711,2,null,[[0,[116]]]],[48,50,null,213151555214004,0,null,[[1,[106]],[3,1]]],[134,43,null,977931540687606,0,null,[[0,[117]]]],[-1,32,null,920505777451245,2,null,[[0,[118]]]],[48,42,null,162917409208754,0,null],[48,43,null,909163441856659,0,null,[[0,[1]]]],[-1,32,null,218973094699433,2,null,[[0,[119]]]],[48,50,null,800583737402723,0,null,[[1,[106]],[3,1]]],[-1,32,null,591716694224450,2,null,[[0,[120]]]],[48,42,null,200876786298448,0,null],[48,43,null,252659317327372,0,null,[[0,[1]]]],[-1,32,null,679124243013808,2,null,[[0,[121]]]],[48,50,null,632375064919042,0,null,[[1,[66]],[3,1]]],[134,43,null,561286609459764,0,null,[[0,[55]]]],[-1,32,null,392610854936927,2,null,[[0,[122]]]],[48,50,null,723008173151884,0,null,[[1,[66]],[3,1]]],[134,43,null,462749099741683,0,null,[[0,[123]]]],[-1,32,null,119722916898363,2,null,[[0,[124]]]],[48,50,null,886485807049521,0,null,[[1,[125]],[3,1]]],[134,43,null,575605385371641,0,null,[[0,[126]]]],[-1,32,null,910335346751548,2,null,[[0,[16]]]],[48,42,null,241500123882422,0,null],[48,43,null,448334085875077,0,null,[[0,[1]]]],[-1,32,null,655335112324390,2,null,[[0,[6]]]],[50,47,null,928985332651177,0,null,[[3,1]]],[49,47,null,577014782849957,0,null,[[3,1]]],[-1,44,null,642374799205620,0,null,[[1,[59]],[3,1]]],[-1,44,null,617965566945166,0,null,[[1,[63]],[3,1]]],[-1,48,null,484211852572302,0,null,[[5,[13]],[16,true]]]]]]],[3,[true,\"出门按钮2\"],false,null,511441827379048,14,[[-1,20,null,0,false,false,false,0,false,[[1,[127]]]]],[],[[0,0,false,null,435386918789633,15,[[142,49,null,1,false,false,false,899589546419427,null,[[4,81]]]],[[141,34,null,712736995453451,0,null,[[2,[\"室外/出门和回家音效\",false]],[3,0],[0,[13]],[0,[11]],[1,[14]]]],[-1,52,null,840664692643049,0,null,[[5,[55]],[3,1]]],[-1,48,null,257288874765852,0,null,[[5,[55]],[16,true]]],[-1,48,null,420051262770989,0,null,[[5,[13]],[16,false]]],[112,42,null,754575535840230,0,null],[112,43,null,528831515071757,0,null,[[0,[1]]]],[141,41,null,447721904371735,0,null,[[1,[56]]]],[141,34,null,930281421418985,0,null,[[2,[\"室外/大自然鸟叫\",false]],[3,1],[0,[11]],[0,[11]],[1,[128]]]]]]]]]],[3,[true,\"室外2\"],false,null,896097368184846,16,[[-1,20,null,0,false,false,false,0,false,[[1,[129]]]]],[],[[3,[true,\"室外场景构建2\"],false,null,419115994577441,17,[[-1,20,null,0,false,false,false,0,false,[[1,[130]]]]],[],[[0,0,false,null,767106285958657,18,[[-1,21,null,1,false,false,false,515026378069989,null]],[[112,42,null,339018654488110,0,null],[112,43,null,220960919372252,0,null,[[0,[1]]]]]],[3,[true,\"点击流浪鲨鱼带回家\"],false,null,492654694503522,19,[[-1,20,null,0,false,false,false,0,false,[[1,[131]]]]],[],[[0,0,false,null,901577935220063,20,[[142,49,null,1,false,false,false,775734254971526,null,[[4,112]]],[143,36,null,0,false,false,false,458077149572356,null,[[10,18],[8,0],[7,[1]]]]],[[-1,48,null,979627416997623,0,null,[[5,[55]],[16,false]]],[48,47,null,718590414106624,0,null,[[3,1]]],[48,42,null,268124276362570,0,null],[48,43,null,237444033126543,0,null,[[0,[1]]]],[143,22,null,865575586495942,0,null,[[10,18],[7,[11]]]],[132,47,null,368866408686838,0,null,[[3,1]]],[132,43,null,472414982034786,0,null,[[0,[11]]]],[112,50,null,832517322944834,0,null,[[1,[99]],[3,1]]],[141,34,null,452691806028564,0,null,[[2,[\"室外/你……不讨厌我吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,924323148938787,2,null,[[0,[132]]]],[112,42,null,268796576108844,0,null],[112,43,null,130368448645240,0,null,[[0,[1]]]],[-1,32,null,451252625766442,2,null,[[0,[133]]]],[132,47,null,140614785257437,0,null,[[3,0]]],[112,31,\"补间动画\",340816436455098,1,null,[[1,[14]],[3,0],[0,[96]],[0,[134]],[0,[1]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[112,53,\"补间动画\",736057740730725,1,null,[[1,[14]],[3,5],[0,[11]],[0,[1]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,876396085253185,2,null,[[0,[1]]]],[141,34,null,527842606270091,0,null,[[2,[\"室外/出门和回家音效\",false]],[3,0],[0,[13]],[0,[11]],[1,[14]]]],[143,22,null,710207514766814,0,null,[[10,54],[7,[1]]]],[116,47,null,605803775124916,0,null,[[3,1]]],[-1,48,null,583733849884708,0,null,[[5,[55]],[16,true]]],[-1,44,null,388083444118678,0,null,[[1,[135]],[3,1]]],[112,47,null,569234839703571,0,null,[[3,0]]]]]]]]],[3,[true,\"室外场景功能2\"],false,null,553602280725182,21,[[-1,20,null,0,false,false,false,0,false,[[1,[136]]]]],[],[[3,[true,\"回家2\"],false,null,581910394342490,22,[[-1,20,null,0,false,false,false,0,false,[[1,[137]]]]],[],[[3,[false,\"普通回家2\"],false,null,118902474133615,23,[[-1,20,null,0,false,false,false,0,false,[[1,[135]]]]],[],[[0,0,false,null,885515741058758,24,[[142,49,null,1,false,false,false,788424828310726,null,[[4,116]]]],[[141,34,null,143928099450804,0,null,[[2,[\"室外/出门和回家音效\",false]],[3,0],[0,[13]],[0,[11]],[1,[14]]]],[149,47,null,180605079815348,0,null,[[3,1]]],[-1,52,null,716624962972185,0,null,[[5,[55]],[3,0]]],[149,53,\"补间动画\",888997088152188,1,null,[[1,[138]],[3,5],[0,[11]],[0,[112]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,48,null,141778347642378,0,null,[[5,[55]],[16,false]]],[-1,48,null,156490591224388,0,null,[[5,[13]],[16,true]]],[81,47,null,529118395596115,0,null,[[3,0]]],[-1,44,null,728444133239398,0,null,[[1,[127]],[3,0]]],[141,41,null,475523072465619,0,null,[[1,[128]]]],[-1,32,null,796419875200754,2,null,[[0,[64]]]],[141,34,null,615586739642930,0,null,[[2,[\"特殊喂养界面BGM\",true]],[3,1],[0,[10]],[0,[11]],[1,[139]]]],[-1,32,null,948250119378446,2,null,[[0,[64]]]],[143,22,null,482542486797102,0,null,[[10,59],[7,[1]]]]]]]]]]]]]]]],[\"结局9\",[[3,[true,\"【要调整】结局变量10\"],false,null,868539046561167,1,[[-1,20,null,0,false,false,false,0,false,[[1,[140]]]]],[],[[0,0,false,null,818255801680686,2,[[-1,21,null,1,false,false,false,428359896609746,null]],[[143,22,null,887156992655091,0,null,[[10,10],[7,[1]]]],[143,22,null,694896275275957,0,null,[[10,17],[7,[1]]]],[143,22,null,716141074072156,0,null,[[10,18],[7,[11]]]],[51,42,null,460255317543584,0,null],[51,43,null,365170263756883,0,null,[[0,[11]]]]]]]],[3,[true,\"【只改一下结局文字和图标】10\"],false,null,336045365460184,3,[[-1,20,null,0,false,false,false,0,false,[[1,[141]]]]],[],[[0,0,false,null,759699963542709,4,[[-1,23,null,0,false,false,false,548588360664080,null]],[[65,24,null,357808682667454,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,230504978654990,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,725816245749138,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,542423206518363,5,[[-1,21,null,1,false,false,false,377600217417166,null]],[[36,30,null,390432714961173,0,null,[[0,[1]],[0,[1]]]],[51,30,null,351683436946576,0,null,[[0,[1]],[0,[1]]]],[52,31,\"补间动画\",809923944593559,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[51,31,\"补间动画\",255158950282785,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,485348618030860,2,null,[[0,[7]]]],[52,33,\"正弦\",780571291112362,0,null,[[3,1]]],[51,33,\"正弦\",647634109283382,0,null,[[3,1]]],[51,33,\"正弦2\",121976297553915,0,null,[[3,1]]],[51,33,\"正弦3\",392609682401876,0,null,[[3,1]]]]],[0,0,false,null,711862332837803,6,[[-1,21,null,1,false,false,false,985728561519689,null]],[[141,41,null,630938926002793,0,null,[[1,[22]]]],[143,22,null,947919463850610,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,411449206213853,2,null,[[0,[9]]]]]],[0,0,false,null,262159731168248,7,[[142,35,null,1,false,false,false,905001447498465,null],[143,36,null,0,false,false,false,640522541889780,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,979547061532276,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,458867132000897,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件10\"],false,null,675206714859046,8,[[-1,20,null,0,false,false,false,0,false,[[1,[142]]]]],[]],[3,[true,\"鲨鱼头戴花4\"],false,null,267926102239086,9,[[-1,20,null,0,false,false,false,0,false,[[1,[143]]]]],[]]]],[\"结局10\",[[3,[true,\"【要调整】结局变量11\"],false,null,834036833924928,1,[[-1,20,null,0,false,false,false,0,false,[[1,[144]]]]],[],[[0,0,false,null,190549763081052,2,[[-1,21,null,1,false,false,false,132467170439459,null]],[[143,22,null,795586091973430,0,null,[[10,11],[7,[1]]]],[143,22,null,381863209616283,0,null,[[10,17],[7,[1]]]],[143,22,null,543066995409377,0,null,[[10,19],[7,[1]]]],[143,22,null,642859811160591,0,null,[[10,18],[7,[11]]]],[53,42,null,435000820479392,0,null],[53,43,null,438629412793378,0,null,[[0,[11]]]]]]]],[3,[true,\"【只改一下结局文字和图标】11\"],false,null,914683851635088,3,[[-1,20,null,0,false,false,false,0,false,[[1,[145]]]]],[],[[0,0,false,null,210961380427935,4,[[-1,23,null,0,false,false,false,680038827644623,null]],[[65,24,null,549122104833782,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,759869516110462,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,725972463925581,0,null,[[10,35],[7,[4,[4,29],[2,143,false,34]]]]]]],[0,0,false,null,397621035492289,5,[[-1,21,null,1,false,false,false,502297134289752,null]],[[54,30,null,646942826004650,0,null,[[0,[1]],[0,[1]]]],[53,30,null,940839149678307,0,null,[[0,[1]],[0,[1]]]],[54,31,\"补间动画\",162825864566082,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[53,31,\"补间动画\",300498187261057,1,null,[[1,[5]],[3,2],[0,[1]],[0,[1]],[0,[6]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,523052481815449,2,null,[[0,[7]]]],[54,33,\"正弦\",889156043212724,0,null,[[3,1]]],[53,33,\"正弦\",980085748329064,0,null,[[3,1]]],[53,33,\"正弦2\",520057293131896,0,null,[[3,1]]],[53,33,\"正弦3\",871004829938450,0,null,[[3,1]]]]],[0,0,false,null,626280385630674,6,[[-1,21,null,1,false,false,false,559706676754360,null]],[[143,22,null,645258573146112,0,null,[[10,34],[7,[8,[4,29]]]]],[-1,32,null,830597437893470,2,null,[[0,[9]]]]]],[0,0,false,null,705269799348980,7,[[142,35,null,1,false,false,false,528231887030280,null],[143,36,null,0,false,false,false,962085614330123,null,[[10,35],[8,5],[7,[13]]]]],[[141,34,null,455250524734258,0,null,[[2,[\"结局通用音效/跳转到领养询问\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[-1,37,null,114281831706436,0,null,[[6,\"领养询问\"]]]]]]],[3,[true,\"结局单独事件11\"],false,null,239473918577015,8,[[-1,20,null,0,false,false,false,0,false,[[1,[146]]]]],[]],[3,[true,\"鲨鱼头戴花5\"],false,null,450757966703355,9,[[-1,20,null,0,false,false,false,0,false,[[1,[147]]]]],[]]]],[\"好结局\",[[3,[true,\"背景布置\"],false,null,254140756038249,1,[[-1,20,null,0,false,false,false,0,false,[[1,[148]]]]],[],[[0,0,false,null,854182438463457,2,[[-1,23,null,0,false,false,false,614417534816487,null]],[[65,24,null,497159350405788,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,554440574526379,0,null,[[0,[3,[1,65,28,false],[4,26]]]]]]]]],[3,[true,\"场景初始\"],false,null,344627897440639,3,[[-1,20,null,0,false,false,false,0,false,[[1,[149]]]]],[],[[0,0,false,null,477650780558850,4,[[-1,21,null,1,false,false,false,224852031039358,null]],[[-1,52,null,762983536041746,0,null,[[5,[16]],[3,0]]],[56,42,null,373622612011007,0,null],[56,43,null,410553638549509,0,null,[[0,[11]]]],[150,47,null,490745267934021,0,null,[[3,1]]],[150,54,null,756308346134457,0,null,[[0,[150]]]],[150,53,\"补间动画\",657217048019646,1,null,[[1,[151]],[3,5],[0,[11]],[0,[16]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[55,42,null,339855589823279,0,null],[55,43,null,739751607696102,0,null,[[0,[1]]]],[141,34,null,498563674332754,0,null,[[2,[\"好结局BGM\",true]],[3,0],[0,[152]],[0,[11]],[1,[153]]]],[118,42,null,680434054883367,0,null]]]]],[3,[true,\"开始演出\"],false,null,396492171609492,5,[[-1,20,null,0,false,false,false,0,false,[[1,[154]]]]],[],[[0,0,false,null,564264670601676,6,[[-1,21,null,1,false,false,false,620609861651880,null]],[[-1,32,null,977649499267495,2,null,[[0,[1]]]],[118,42,null,107726482744529,0,null],[-1,52,null,284261928795227,0,null,[[5,[16]],[3,1]]],[118,47,null,607219327259057,0,null,[[3,1]]],[141,34,null,489660235915561,0,null,[[2,[\"最终结局/好结局\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[55,50,null,231370664743513,0,null,[[1,[155]],[3,1]]],[118,43,null,539166352051248,0,null,[[0,[11]]]],[-1,32,null,620651889442709,2,null,[[0,[156]]]],[55,42,null,924509411197386,0,null],[55,43,null,826335238409054,0,null,[[0,[1]]]],[-1,32,null,984206831307926,2,null,[[0,[157]]]],[55,50,null,833066056307256,0,null,[[1,[155]],[3,1]]],[118,43,null,379590315527748,0,null,[[0,[1]]]],[-1,32,null,378507252597769,2,null,[[0,[158]]]],[55,50,null,823297340449191,0,null,[[1,[155]],[3,1]]],[118,43,null,544383565912129,0,null,[[0,[16]]]],[-1,32,null,647015791883813,2,null,[[0,[159]]]],[55,42,null,654686793890027,0,null],[55,43,null,871619474869732,0,null,[[0,[1]]]],[-1,32,null,786024578872660,2,null,[[0,[160]]]],[55,50,null,268695679099199,0,null,[[1,[161]],[3,1]]],[118,43,null,749310436823511,0,null,[[0,[13]]]],[-1,32,null,367087637846763,2,null,[[0,[162]]]],[55,50,null,645576074795534,0,null,[[1,[161]],[3,1]]],[118,43,null,322503160969019,0,null,[[0,[112]]]],[-1,32,null,139655284412404,2,null,[[0,[163]]]],[55,50,null,834938637319653,0,null,[[1,[161]],[3,1]]],[118,43,null,702682738882155,0,null,[[0,[114]]]],[-1,32,null,903575144538385,2,null,[[0,[164]]]],[55,42,null,109964298105742,0,null],[55,43,null,276461365249297,0,null,[[0,[1]]]],[-1,32,null,936262772154434,2,null,[[0,[157]]]],[55,50,null,115711737988049,0,null,[[1,[165]],[3,1]]],[118,43,null,785755843404172,0,null,[[0,[117]]]],[-1,32,null,859712949804799,2,null,[[0,[166]]]],[55,50,null,297457111947985,0,null,[[1,[165]],[3,1]]],[118,43,null,686317427961843,0,null,[[0,[55]]]],[-1,32,null,736047326108947,2,null,[[0,[167]]]],[55,42,null,984248355471839,0,null],[55,43,null,918182607693172,0,null,[[0,[1]]]],[-1,32,null,927654651402985,2,null,[[0,[168]]]],[55,55,\"正弦摆动\",116656157347064,0,null,[[0,[16]]]],[55,55,\"正弦高度\",729320809523147,0,null,[[0,[1]]]],[55,50,null,636899901027126,0,null,[[1,[169]],[3,1]]],[118,43,null,888911568504283,0,null,[[0,[123]]]],[-1,32,null,302022709536517,2,null,[[0,[170]]]],[55,50,null,462121568148947,0,null,[[1,[169]],[3,1]]],[118,43,null,718809376294108,0,null,[[0,[126]]]],[-1,32,null,542705833754999,2,null,[[0,[171]]]],[55,50,null,397240987226565,0,null,[[1,[169]],[3,1]]],[118,43,null,813101186234937,0,null,[[0,[88]]]],[-1,32,null,992659148610067,2,null,[[0,[172]]]],[55,42,null,625803712129938,0,null],[55,43,null,439503547055043,0,null,[[0,[1]]]],[-1,32,null,628912011413072,2,null,[[0,[173]]]],[55,55,\"正弦摆动\",237691360636673,0,null,[[0,[13]]]],[55,55,\"正弦高度\",937542731701901,0,null,[[0,[64]]]],[55,50,null,631198374146756,0,null,[[1,[169]],[3,1]]],[118,43,null,460444681458367,0,null,[[0,[96]]]],[-1,32,null,345497296636745,2,null,[[0,[174]]]],[55,50,null,943086146061092,0,null,[[1,[169]],[3,1]]],[118,43,null,944643111327784,0,null,[[0,[67]]]],[-1,32,null,933877967933411,2,null,[[0,[175]]]],[55,42,null,267497275469251,0,null],[55,43,null,331822533578489,0,null,[[0,[1]]]],[-1,32,null,387263944473776,2,null,[[0,[176]]]],[55,33,\"正弦摆动\",859693839324855,0,null,[[3,0]]],[55,56,\"正弦摆动\",680628340187703,0,null,[[0,[11]]]],[55,50,null,730920044857407,0,null,[[1,[177]],[3,1]]],[118,43,null,893237842990208,0,null,[[0,[73]]]],[-1,32,null,199913628039294,2,null,[[0,[178]]]],[55,42,null,532704696455985,0,null],[55,43,null,295311077167167,0,null,[[0,[1]]]],[-1,32,null,398368107251690,2,null,[[0,[179]]]],[55,50,null,400452999457097,0,null,[[1,[180]],[3,1]]],[118,43,null,678428614599276,0,null,[[0,[79]]]],[-1,32,null,678139907599585,2,null,[[0,[181]]]],[55,50,null,372944727017114,0,null,[[1,[180]],[3,1]]],[118,43,null,344031735653344,0,null,[[0,[84]]]],[-1,32,null,911871159139916,2,null,[[0,[182]]]],[55,42,null,170044491813330,0,null],[55,43,null,340953513883102,0,null,[[0,[1]]]],[-1,32,null,799732348646025,2,null,[[0,[183]]]],[55,33,\"正弦摆动\",528745261012885,0,null,[[3,1]]],[55,55,\"正弦摆动\",334574983623268,0,null,[[0,[1]]]],[55,55,\"正弦高度\",641110998366731,0,null,[[0,[133]]]],[55,50,null,573962923663748,0,null,[[1,[155]],[3,1]]],[118,43,null,185107929042982,0,null,[[0,[184]]]],[-1,32,null,355229429509585,2,null,[[0,[185]]]],[55,50,null,956539583953339,0,null,[[1,[155]],[3,1]]],[118,43,null,666307584611870,0,null,[[0,[186]]]],[-1,32,null,472477908602395,2,null,[[0,[187]]]],[55,42,null,230595514687461,0,null],[55,43,null,384977346887080,0,null,[[0,[1]]]],[-1,32,null,693243748442878,2,null,[[0,[188]]]],[55,55,\"正弦摆动\",224742894880580,0,null,[[0,[13]]]],[55,55,\"正弦高度\",441908510554553,0,null,[[0,[64]]]],[55,50,null,716697620362028,0,null,[[1,[155]],[3,1]]],[118,43,null,801863085582162,0,null,[[0,[189]]]],[-1,32,null,550116969894477,2,null,[[0,[190]]]],[55,42,null,202348383371489,0,null],[55,43,null,839761794012809,0,null,[[0,[1]]]],[-1,32,null,137416992847329,2,null,[[0,[191]]]],[55,55,\"正弦摆动\",689058135205330,0,null,[[0,[6]]]],[55,55,\"正弦高度\",226820764315993,0,null,[[0,[101]]]],[55,50,null,788594916044298,0,null,[[1,[161]],[3,1]]],[118,43,null,464370745505802,0,null,[[0,[192]]]],[-1,32,null,728422607696721,2,null,[[0,[193]]]],[55,42,null,965286396800253,0,null],[55,43,null,496572981437951,0,null,[[0,[1]]]],[-1,32,null,869743703310353,2,null,[[0,[194]]]],[55,50,null,815642708065043,0,null,[[1,[165]],[3,1]]],[118,43,null,591184980187700,0,null,[[0,[195]]]],[-1,32,null,832642230543611,2,null,[[0,[196]]]],[55,50,null,996720418136777,0,null,[[1,[165]],[3,1]]],[118,43,null,570848921031376,0,null,[[0,[197]]]],[-1,32,null,348778285532034,2,null,[[0,[198]]]],[55,42,null,289322565340038,0,null],[55,43,null,680070728219530,0,null,[[0,[1]]]],[-1,32,null,117126689087586,2,null,[[0,[199]]]],[55,55,\"正弦摆动\",711876290997628,0,null,[[0,[16]]]],[55,55,\"正弦高度\",889485470491284,0,null,[[0,[1]]]],[55,50,null,195540316140599,0,null,[[1,[155]],[3,1]]],[118,43,null,142640933345300,0,null,[[0,[200]]]],[-1,32,null,636902535528134,2,null,[[0,[201]]]],[55,50,null,777817576974051,0,null,[[1,[155]],[3,1]]],[118,43,null,273181233777578,0,null,[[0,[202]]]],[-1,32,null,345853946479072,2,null,[[0,[203]]]],[55,42,null,147505477028825,0,null],[55,43,null,117973120310620,0,null,[[0,[1]]]],[-1,32,null,580153687754854,2,null,[[0,[204]]]],[55,55,\"正弦摆动\",772124398443269,0,null,[[0,[13]]]],[55,55,\"正弦高度\",720207892915436,0,null,[[0,[64]]]],[55,50,null,603683308695451,0,null,[[1,[155]],[3,1]]],[118,43,null,642945812095853,0,null,[[0,[205]]]],[-1,32,null,262475873013437,2,null,[[0,[206]]]],[55,50,null,855690316577198,0,null,[[1,[155]],[3,1]]],[118,43,null,620123811912610,0,null,[[0,[207]]]],[-1,32,null,547462103622776,2,null,[[0,[208]]]],[55,42,null,355861395808191,0,null],[55,43,null,218594308033068,0,null,[[0,[1]]]],[-1,32,null,462751914481559,2,null,[[0,[160]]]],[55,55,\"正弦摆动\",765853150300188,0,null,[[0,[112]]]],[55,55,\"正弦高度\",577454482564299,0,null,[[0,[16]]]],[55,50,null,340133518061346,0,null,[[1,[155]],[3,1]]],[118,43,null,165834782419681,0,null,[[0,[209]]]],[-1,32,null,844900318147370,2,null,[[0,[210]]]],[55,42,null,726599148575586,0,null],[55,43,null,679310877042878,0,null,[[0,[1]]]],[-1,32,null,114688152564843,2,null,[[0,[211]]]],[55,50,null,561320576935138,0,null,[[1,[155]],[3,1]]],[-1,32,null,152688931312643,2,null,[[0,[212]]]],[55,42,null,241090868988504,0,null],[55,43,null,405168241979821,0,null,[[0,[1]]]],[-1,32,null,507296750468656,2,null,[[0,[213]]]],[55,50,null,803670849696010,0,null,[[1,[155]],[3,1]]],[-1,32,null,631252714606203,2,null,[[0,[214]]]],[55,42,null,344123153407509,0,null],[55,43,null,640507738331706,0,null,[[0,[1]]]],[-1,32,null,428556284581077,2,null,[[0,[215]]]],[55,55,\"正弦摆动\",320083795998483,0,null,[[0,[16]]]],[55,55,\"正弦高度\",252052669174296,0,null,[[0,[1]]]],[55,50,null,654196002868221,0,null,[[1,[155]],[3,1]]],[118,43,null,534449779821624,0,null,[[0,[216]]]],[-1,32,null,110188011514551,2,null,[[0,[217]]]],[55,42,null,924824242803106,0,null],[55,43,null,837198513380854,0,null,[[0,[1]]]],[-1,32,null,800592750081439,2,null,[[0,[218]]]],[55,55,\"正弦摆动\",239215704131718,0,null,[[0,[1]]]],[55,55,\"正弦高度\",776124782501915,0,null,[[0,[133]]]],[55,50,null,756572066836758,0,null,[[1,[161]],[3,1]]],[118,43,null,448378473281294,0,null,[[0,[219]]]],[-1,32,null,498221538724148,2,null,[[0,[220]]]],[55,42,null,630313101296163,0,null],[55,43,null,785795191192833,0,null,[[0,[1]]]],[-1,32,null,162159086762052,2,null,[[0,[111]]]],[58,39,\"移动到\",485676189574913,0,null,[[0,[205]]]],[58,40,\"移动到\",100095258122339,0,null,[[0,[19]],[0,[221]],[3,0]]],[55,50,null,707535635580917,0,null,[[1,[165]],[3,1]]],[118,43,null,477970504105802,0,null,[[0,[222]]]],[55,42,null,274266722786938,0,null],[55,43,null,911939788606662,0,null,[[0,[1]]]],[-1,32,null,820074230571993,2,null,[[0,[223]]]],[55,50,null,300846025573930,0,null,[[1,[165]],[3,1]]],[-1,32,null,967665220325450,2,null,[[0,[224]]]],[55,42,null,954431081446562,0,null],[55,43,null,476519643421838,0,null,[[0,[11]]]],[157,53,\"补间动画\",703307243831632,1,null,[[1,[14]],[3,5],[0,[11]],[0,[88]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,777257828699699,2,null,[[0,[225]]]],[-1,57,null,489716124548615,0,null,[[1,[226]]]]]]]]]],[\"坏结局\",[[3,[true,\"背景布置2\"],false,null,596026654746396,1,[[-1,20,null,0,false,false,false,0,false,[[1,[227]]]]],[],[[0,0,false,null,763968615928449,2,[[-1,23,null,0,false,false,false,295439559486291,null]],[[65,24,null,880532758658980,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,445890839364430,0,null,[[0,[3,[1,65,28,false],[4,26]]]]]]]]],[3,[true,\"场景初始2\"],false,null,112786802208595,3,[[-1,20,null,0,false,false,false,0,false,[[1,[228]]]]],[],[[0,0,false,null,784779989142895,4,[[-1,21,null,1,false,false,false,392906595816900,null]],[[56,42,null,150465049691483,0,null],[56,43,null,876607527403743,0,null,[[0,[11]]]],[117,47,null,748731361612603,0,null,[[3,0]]],[-1,52,null,493626676487624,0,null,[[5,[16]],[3,0]]],[150,47,null,861936227938718,0,null,[[3,1]]],[150,54,null,237291236842957,0,null,[[0,[150]]]],[150,53,\"补间动画\",209158074580855,1,null,[[1,[151]],[3,5],[0,[11]],[0,[16]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[55,42,null,119711531645236,0,null],[55,43,null,912888763831664,0,null,[[0,[1]]]],[117,42,null,589793632839597,0,null],[141,34,null,598745131161721,0,null,[[2,[\"好结局BGM\",true]],[3,1],[0,[10]],[0,[11]],[1,[153]]]]]]]],[3,[true,\"坏结局演出\"],false,null,663491812355973,5,[[-1,20,null,0,false,false,false,0,false,[[1,[229]]]]],[],[[0,0,false,null,257310254014624,6,[[-1,21,null,1,false,false,false,672393046196635,null]],[[-1,32,null,926085278623489,2,null,[[0,[1]]]],[117,42,null,997231587731792,0,null],[117,47,null,679379552238302,0,null,[[3,1]]],[-1,52,null,560782417962122,0,null,[[5,[16]],[3,1]]],[141,34,null,603974633368399,0,null,[[2,[\"最终结局/坏结局\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[55,50,null,418768890366669,0,null,[[1,[155]],[3,1]]],[117,43,null,545525624503711,0,null,[[0,[11]]]],[-1,32,null,505656852066352,2,null,[[0,[156]]]],[55,42,null,657421031141630,0,null],[55,43,null,963939800990821,0,null,[[0,[1]]]],[-1,32,null,389147206058887,2,null,[[0,[157]]]],[55,50,null,881306070836983,0,null,[[1,[155]],[3,1]]],[117,43,null,239530163091433,0,null,[[0,[1]]]],[-1,32,null,295777159731698,2,null,[[0,[158]]]],[55,50,null,701976239750368,0,null,[[1,[155]],[3,1]]],[117,43,null,758987071085029,0,null,[[0,[16]]]],[-1,32,null,633304249731300,2,null,[[0,[159]]]],[55,42,null,215888492536585,0,null],[55,43,null,484826143703630,0,null,[[0,[1]]]],[-1,32,null,991153798160520,2,null,[[0,[160]]]],[55,50,null,347159813833175,0,null,[[1,[161]],[3,1]]],[117,43,null,740590640212048,0,null,[[0,[13]]]],[-1,32,null,481738424874184,2,null,[[0,[162]]]],[55,50,null,390799218901566,0,null,[[1,[161]],[3,1]]],[117,43,null,621986181105639,0,null,[[0,[112]]]],[-1,32,null,378299896098874,2,null,[[0,[163]]]],[55,50,null,588909266505601,0,null,[[1,[161]],[3,1]]],[117,43,null,539819512789396,0,null,[[0,[114]]]],[-1,32,null,349191210552088,2,null,[[0,[164]]]],[55,42,null,697830518812485,0,null],[55,43,null,846406043073028,0,null,[[0,[1]]]],[-1,32,null,697293681470651,2,null,[[0,[230]]]],[55,55,\"正弦摆动\",243750975707438,0,null,[[0,[16]]]],[55,55,\"正弦高度\",669605322094748,0,null,[[0,[1]]]],[141,58,null,753594891429672,0,null,[[1,[153]],[0,[231]],[0,[13]],[3,0]]],[55,50,null,593141431307935,0,null,[[1,[169]],[3,1]]],[117,43,null,592692293091935,0,null,[[0,[117]]]],[-1,32,null,114754975541999,2,null,[[0,[232]]]],[55,55,\"正弦摆动\",650727722541612,0,null,[[0,[233]]]],[55,55,\"正弦高度\",516885569327349,0,null,[[0,[64]]]],[55,59,\"正弦高度\",679373444320560,0,null,[[0,[1]]]],[55,50,null,523387253747885,0,null,[[1,[169]],[3,1]]],[117,43,null,194879841042078,0,null,[[0,[55]]]],[-1,32,null,597817511428113,2,null,[[0,[234]]]],[55,42,null,188185005396925,0,null],[55,43,null,271941420179442,0,null,[[0,[1]]]],[-1,32,null,424161228234372,2,null,[[0,[6]]]],[55,50,null,326399482907981,0,null,[[1,[169]],[3,1]]],[-1,32,null,966486117763187,2,null,[[0,[235]]]],[55,42,null,687907829092500,0,null],[55,43,null,982567989017661,0,null,[[0,[1]]]],[-1,32,null,812963368942963,2,null,[[0,[236]]]],[55,56,\"正弦摆动\",347588927024281,0,null,[[0,[11]]]],[55,33,\"正弦摆动\",466762003865216,0,null,[[3,0]]],[55,55,\"正弦高度\",157137417822222,0,null,[[0,[16]]]],[-1,60,null,702393665020334,0,null,[[3,1],[1,[237]]]],[141,34,null,719886275668567,0,null,[[2,[\"最终结局/一震诡异不妙的氛围声\",false]],[3,0],[0,[238]],[0,[11]],[1,[14]]]],[-1,52,null,676571752066985,0,null,[[5,[1]],[3,0]]],[56,43,null,531858556138767,0,null,[[0,[1]]]],[63,47,null,195447965502735,0,null,[[3,1]]],[55,50,null,949108628545629,0,null,[[1,[239]],[3,1]]],[117,43,null,213369069395211,0,null,[[0,[123]]]],[-1,32,null,242748841028911,2,null,[[0,[236]]]],[55,42,null,800271895956381,0,null],[55,43,null,816504952424391,0,null,[[0,[1]]]],[-1,32,null,904806212290694,2,null,[[0,[240]]]],[55,55,\"正弦高度\",866052757265467,0,null,[[0,[13]]]],[141,34,null,981646882649195,0,null,[[2,[\"最终坏结局\",true]],[3,0],[0,[10]],[0,[11]],[1,[241]]]],[55,50,null,806366558345883,0,null,[[1,[242]],[3,1]]],[117,43,null,509547869513828,0,null,[[0,[126]]]],[-1,32,null,872568557975239,2,null,[[0,[104]]]],[55,42,null,759648948016645,0,null],[55,43,null,647554309692412,0,null,[[0,[1]]]],[-1,32,null,394748301023749,2,null,[[0,[243]]]],[55,50,null,787040110473853,0,null,[[1,[242]],[3,1]]],[117,43,null,669174775814850,0,null,[[0,[88]]]],[-1,32,null,327330222113710,2,null,[[0,[244]]]],[55,42,null,267778309426751,0,null],[55,43,null,527391117132724,0,null,[[0,[1]]]],[-1,32,null,742725562896443,2,null,[[0,[245]]]],[55,55,\"正弦高度\",235806271690138,0,null,[[0,[16]]]],[55,50,null,747164267025487,0,null,[[1,[246]],[3,1]]],[117,43,null,946716700560730,0,null,[[0,[96]]]],[-1,32,null,630827510084378,2,null,[[0,[247]]]],[55,42,null,916607920069805,0,null],[55,43,null,877137399794380,0,null,[[0,[1]]]],[-1,32,null,310416836702288,2,null,[[0,[94]]]],[55,50,null,548785614003026,0,null,[[1,[246]],[3,1]]],[117,43,null,252262886061731,0,null,[[0,[67]]]],[-1,32,null,815535812213784,2,null,[[0,[233]]]],[55,50,null,325318041437073,0,null,[[1,[246]],[3,1]]],[117,43,null,118431336038848,0,null,[[0,[73]]]],[-1,32,null,690650158717656,2,null,[[0,[248]]]],[55,42,null,733874879730353,0,null],[55,43,null,877019532547726,0,null,[[0,[1]]]],[-1,32,null,626103889960043,2,null,[[0,[61]]]],[55,50,null,315008212140223,0,null,[[1,[249]],[3,1]]],[117,43,null,518109884665814,0,null,[[0,[79]]]],[-1,32,null,257151857809699,2,null,[[0,[250]]]],[55,50,null,246532436168355,0,null,[[1,[249]],[3,1]]],[117,43,null,374175197260289,0,null,[[0,[84]]]],[-1,32,null,596899544667113,2,null,[[0,[251]]]],[55,42,null,329455999971094,0,null],[55,43,null,453221137729433,0,null,[[0,[1]]]],[-1,32,null,594206839823554,2,null,[[0,[252]]]],[55,50,null,560464343159472,0,null,[[1,[239]],[3,1]]],[117,43,null,549298480066706,0,null,[[0,[184]]]],[-1,32,null,817918229109315,2,null,[[0,[253]]]],[55,42,null,425935061988463,0,null],[55,43,null,793207740985538,0,null,[[0,[1]]]],[-1,32,null,959629091632102,2,null,[[0,[230]]]],[55,50,null,474633048484313,0,null,[[1,[239]],[3,1]]],[-1,32,null,660851881315934,2,null,[[0,[254]]]],[55,42,null,538302810477266,0,null],[55,43,null,131923586938742,0,null,[[0,[1]]]],[-1,32,null,873493019596006,2,null,[[0,[255]]]],[55,50,null,396056242501526,0,null,[[1,[239]],[3,1]]],[-1,32,null,948969786409509,2,null,[[0,[256]]]],[55,50,null,893247873349749,0,null,[[1,[239]],[3,1]]],[117,43,null,416458963278481,0,null,[[0,[186]]]],[-1,32,null,399019796072754,2,null,[[0,[257]]]],[55,42,null,469238899245775,0,null],[55,43,null,737236662480129,0,null,[[0,[1]]]],[-1,32,null,113737811408703,2,null,[[0,[258]]]],[55,55,\"正弦高度\",130069714415388,0,null,[[0,[13]]]],[55,50,null,175151433886458,0,null,[[1,[246]],[3,1]]],[117,43,null,865308299776976,0,null,[[0,[189]]]],[-1,32,null,804334823658944,2,null,[[0,[259]]]],[55,42,null,391179142285161,0,null],[55,43,null,118686983996862,0,null,[[0,[1]]]],[-1,32,null,100551744954489,2,null,[[0,[260]]]],[55,55,\"正弦高度\",482747016759671,0,null,[[0,[112]]]],[55,50,null,397248168086845,0,null,[[1,[246]],[3,1]]],[117,43,null,199719677348789,0,null,[[0,[192]]]],[-1,32,null,351198779364970,2,null,[[0,[261]]]],[55,42,null,973099121247032,0,null],[55,43,null,214432542420057,0,null,[[0,[1]]]],[-1,32,null,170793902576231,2,null,[[0,[262]]]],[55,55,\"正弦高度\",639484362188588,0,null,[[0,[13]]]],[55,50,null,511515022752529,0,null,[[1,[239]],[3,1]]],[117,43,null,310950643188712,0,null,[[0,[195]]]],[-1,32,null,257427314588666,2,null,[[0,[263]]]],[55,42,null,737013501256223,0,null],[55,43,null,385587331202080,0,null,[[0,[1]]]],[-1,32,null,189416334156089,2,null,[[0,[264]]]],[55,55,\"正弦高度\",408076419383044,0,null,[[0,[112]]]],[55,50,null,582372398922846,0,null,[[1,[242]],[3,1]]],[117,43,null,688040751875794,0,null,[[0,[197]]]],[-1,32,null,904953911312243,2,null,[[0,[265]]]],[55,42,null,671890343321359,0,null],[55,43,null,827460162972358,0,null,[[0,[1]]]],[-1,32,null,180384190334209,2,null,[[0,[266]]]],[55,55,\"正弦高度\",789812963203592,0,null,[[0,[114]]]],[55,50,null,518607442985479,0,null,[[1,[246]],[3,1]]],[117,43,null,210217830722764,0,null,[[0,[200]]]],[-1,32,null,663630977899276,2,null,[[0,[267]]]],[55,42,null,363714555655319,0,null],[55,43,null,884943874054931,0,null,[[0,[1]]]],[150,54,null,228987196006653,0,null,[[0,[11]]]],[150,53,\"补间动画\",568412599655187,1,null,[[1,[151]],[3,5],[0,[150]],[0,[16]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,653398340140852,2,null,[[0,[16]]]],[60,47,null,922742798666560,0,null,[[3,1]]],[150,53,\"补间动画\",423988225226228,1,null,[[1,[151]],[3,5],[0,[11]],[0,[16]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[141,34,null,597919372317777,0,null,[[2,[\"开关灯/信号噪音\",false]],[3,0],[0,[11]],[0,[11]],[1,[56]]]],[-1,32,null,169483714177395,2,null,[[0,[117]]]],[61,47,null,657382484938243,0,null,[[3,1]]],[61,54,null,814477736750703,0,null,[[0,[11]]]],[61,53,\"补间动画\",833653313292830,1,null,[[1,[14]],[3,5],[0,[150]],[0,[13]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,458658869510976,2,null,[[0,[114]]]],[141,58,null,355760740164159,0,null,[[1,[56]],[0,[231]],[0,[13]],[3,0]]],[150,47,null,609089380438450,0,null,[[3,1]]],[150,54,null,342573958238542,0,null,[[0,[11]]]],[150,53,\"补间动画\",511377405287390,1,null,[[1,[14]],[3,5],[0,[150]],[0,[13]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,366450103936500,2,null,[[0,[13]]]],[62,47,null,214610831702194,0,null,[[3,1]]],[62,54,null,482914883744749,0,null,[[0,[11]]]],[62,53,\"补间动画\",512219994748321,1,null,[[1,[14]],[3,5],[0,[150]],[0,[13]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,395200097915681,2,null,[[0,[88]]]],[141,58,null,607968154388197,0,null,[[1,[241]],[0,[231]],[0,[88]],[3,0]]],[-1,32,null,847330340718697,2,null,[[0,[88]]]],[-1,57,null,700577162808248,0,null,[[1,[226]]]]]]]]]],[\"开场logo\",[[0,0,false,null,635390742807693,1,[[-1,21,null,1,false,false,false,891319587648085,null]],[[143,22,null,551746189197051,0,null,[[10,0],[7,[268,[4,61]]]]],[64,30,null,426065608380606,0,null,[[0,[1]],[0,[1]]]],[64,54,null,354864567784601,0,null,[[0,[11]]]],[141,34,null,877110939554112,0,null,[[2,[\"logo/en\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[64,31,\"补间动画\",187637482499803,1,null,[[1,[14]],[3,2],[0,[1]],[0,[1]],[0,[1]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[64,53,\"补间动画\",918913160717210,1,null,[[1,[14]],[3,5],[0,[150]],[0,[1]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]]]],[0,0,false,null,919188208578258,2,[[-1,23,null,0,false,false,false,556044812185839,null]],[[65,24,null,514088119338970,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,591700625180632,0,null,[[0,[3,[1,65,28,false],[4,26]]]]]]],[3,[true,\"不同LOGO音效\"],false,null,191970548938597,3,[[-1,20,null,0,false,false,false,0,false,[[1,[269]]]]],[],[[0,0,false,null,910538130011236,4,[[143,36,null,0,false,false,false,205806319217571,null,[[10,0],[8,5],[7,[11]]]],[143,36,null,0,false,false,false,949799535546383,null,[[10,0],[8,2],[7,[270]]]],[-1,51,null,0,false,false,false,840113382178012,null]],[[-1,32,null,376665001637120,2,null,[[0,[1]]]],[141,34,null,625237541060848,0,null,[[2,[\"logo/logo语音1\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,417231852760201,2,null,[[0,[16]]]],[-1,37,null,811320395047711,0,null,[[6,\"选择语言\"]]]]],[0,0,false,null,515800901757207,5,[[143,36,null,0,false,false,false,948260533153980,null,[[10,0],[8,5],[7,[270]]]],[143,36,null,0,false,false,false,601285009838444,null,[[10,0],[8,2],[7,[271]]]],[-1,51,null,0,false,false,false,120286584607616,null]],[[-1,32,null,135618389106048,2,null,[[0,[1]]]],[141,34,null,819445072576136,0,null,[[2,[\"logo/logo语音2\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,196302496155497,2,null,[[0,[16]]]],[-1,37,null,819766976495793,0,null,[[6,\"选择语言\"]]]]],[0,0,false,null,299147221686703,6,[[143,36,null,0,false,false,false,124782121751639,null,[[10,0],[8,5],[7,[271]]]],[143,36,null,0,false,false,false,175626876332116,null,[[10,0],[8,2],[7,[272]]]],[-1,51,null,0,false,false,false,156803290925870,null]],[[-1,32,null,181315630379174,2,null,[[0,[1]]]],[141,34,null,604572962870146,0,null,[[2,[\"logo/logo语音3\",false]],[3,0],[0,[13]],[0,[11]],[1,[14]]]],[-1,32,null,441076765179724,2,null,[[0,[16]]]],[-1,37,null,115491247392874,0,null,[[6,\"选择语言\"]]]]],[0,0,false,null,880380572821951,7,[[143,36,null,0,false,false,false,742273252881804,null,[[10,0],[8,5],[7,[272]]]],[143,36,null,0,false,false,false,708083929355885,null,[[10,0],[8,2],[7,[126]]]],[-1,51,null,0,false,false,false,562542779619773,null]],[[-1,32,null,684432120736206,2,null,[[0,[1]]]],[141,34,null,247988301206628,0,null,[[2,[\"logo/logo语音4\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,801657522996276,2,null,[[0,[16]]]],[-1,37,null,274958334235709,0,null,[[6,\"选择语言\"]]]]],[0,0,false,null,585980539483574,8,[[143,36,null,0,false,false,false,571154505727640,null,[[10,0],[8,5],[7,[126]]]],[143,36,null,0,false,false,false,647612931460565,null,[[10,0],[8,3],[7,[88]]]],[-1,51,null,0,false,false,false,187925166423475,null]],[[-1,32,null,996824501170739,2,null,[[0,[1]]]],[141,34,null,645492696348388,0,null,[[2,[\"logo/logo语音5\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,782683781624412,2,null,[[0,[114]]]],[-1,37,null,380067004987448,0,null,[[6,\"选择语言\"]]]]]]]]],[\"温馨提示\",[[0,0,false,null,495881525936895,1,[[-1,21,null,1,false,false,false,155987732068708,null]],[[-1,62,null,417276288938517,0,null,[[1,[226]]]],[66,53,\"补间动画\",959204469791764,1,null,[[1,[14]],[3,5],[0,[150]],[0,[16]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,109576973360675,2,null,[[0,[112]]]],[66,53,\"补间动画\",555356079128074,1,null,[[1,[14]],[3,5],[0,[11]],[0,[16]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,503814609365537,2,null,[[0,[16]]]],[-1,37,null,893882036080115,0,null,[[6,\"开场LOGO\"]]]]]]],[\"选择语言\",[[0,0,false,null,909130341170754,1,[[-1,23,null,0,false,false,false,149641503032895,null]],[[65,24,null,509846481047495,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,442257512632934,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[144,46,null,297444260319545,0,null,[[7,[273,[2,143,false,37]]]]]]],[0,0,false,null,553413991284009,2,[[-1,21,null,1,false,false,false,123420231045017,null]],[[141,34,null,636728411258043,0,null,[[2,[\"选语言BGM\",true]],[3,1],[0,[238]],[0,[11]],[1,[274]]]]]],[3,[true,\"等待30秒\"],false,null,784585002816868,3,[[-1,20,null,0,false,false,false,0,false,[[1,[275]]]]],[],[[0,0,false,null,603373314201649,4,[[-1,63,null,0,false,false,false,587802158291630,null,[[8,5],[0,[276]]]],[-1,51,null,0,false,false,false,974601736636309,null],[70,36,null,0,false,false,false,468965846562635,null,[[10,1],[8,0],[7,[11]]]]],[[70,22,null,908867472039213,0,null,[[10,1],[7,[1]]]],[-1,44,null,531819099802913,0,null,[[1,[277]],[3,0]]],[141,34,null,821901534486586,0,null,[[2,[\"选语言/我觉得要不选中文吧？\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[70,50,null,719657137269381,0,null,[[1,[278]],[3,1]]],[-1,32,null,205106775889793,2,null,[[0,[64]]]],[70,50,null,983998779259366,0,null,[[1,[279]],[3,1]]],[-1,44,null,118317071721091,0,null,[[1,[277]],[3,1]]],[70,22,null,401079747677734,0,null,[[10,1],[7,[11]]]]]]]],[0,0,false,null,972803227337368,5,[[142,64,null,1,false,false,false,248205441112418,null,[[4,69]]],[70,36,null,0,false,false,false,453649912613699,null,[[10,1],[8,0],[7,[11]]]]],[[141,34,null,321913009340706,0,null,[[2,[\"选语言/咚当\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[69,65,\"闪烁\",381370124497142,0,null,[[0,[61]],[0,[61]],[0,[1]]]],[70,22,null,828226786301642,0,null,[[10,1],[7,[1]]]],[-1,32,null,560144814100598,2,null,[[0,[1]]]],[69,66,null,290163181118014,0,null],[72,47,null,275401656185254,0,null,[[3,1]]],[70,50,null,861454255983460,0,null,[[1,[280]],[3,1]]],[141,34,null,735297158579475,0,null,[[2,[\"选语言/选了日语\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,517630513289436,2,null,[[0,[132]]]],[70,50,null,992971960647775,0,null,[[1,[279]],[3,1]]],[70,22,null,804798120543933,0,null,[[10,1],[7,[11]]]]]],[0,0,false,null,755884736020253,6,[[142,64,null,1,false,false,false,603693762494538,null,[[4,68]]],[70,36,null,0,false,false,false,526566520546936,null,[[10,1],[8,0],[7,[11]]]]],[[141,34,null,889044499115575,0,null,[[2,[\"选语言/咚当\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[68,65,\"闪烁\",558772972689107,0,null,[[0,[61]],[0,[61]],[0,[1]]]],[70,22,null,423418278405412,0,null,[[10,1],[7,[1]]]],[-1,32,null,333862879939776,2,null,[[0,[1]]]],[68,66,null,849932887291528,0,null],[71,47,null,511601849958424,0,null,[[3,1]]],[70,50,null,587063477397111,0,null,[[1,[280]],[3,1]]],[141,34,null,496399203121606,0,null,[[2,[\"选语言/选了英语\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,596026175493491,2,null,[[0,[64]]]],[70,50,null,680740328385519,0,null,[[1,[279]],[3,1]]],[70,22,null,363183052361347,0,null,[[10,1],[7,[11]]]]]],[0,0,false,null,241179110917978,7,[[142,64,null,1,false,false,false,191036323414413,null,[[4,67]]],[70,36,null,0,false,false,false,990709325013438,null,[[10,1],[8,0],[7,[11]]]]],[[70,22,null,370492559980953,0,null,[[10,1],[7,[1]]]],[141,34,null,385945980315041,0,null,[[2,[\"选语言/咚当\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[67,65,\"闪烁\",293427502969116,0,null,[[0,[61]],[0,[61]],[0,[1]]]],[70,22,null,698768827220988,0,null,[[10,1],[7,[1]]]],[-1,44,null,520843452867632,0,null,[[1,[275]],[3,0]]],[-1,32,null,402233712422961,2,null,[[0,[1]]]],[67,66,null,603342823830037,0,null],[70,33,\"正弦3\",247584742698800,0,null,[[3,1]]],[70,50,null,839355367145296,0,null,[[1,[281]],[3,1]]],[141,34,null,651951911433094,0,null,[[2,[\"选语言/选了中文\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[152,66,null,615216586643325,0,null],[72,66,null,214193501320154,0,null],[71,66,null,486501511416860,0,null],[-1,32,null,992167332319948,2,null,[[0,[133]]]],[70,22,null,621388997211303,0,null,[[10,1],[7,[11]]]],[1,53,\"补间动画\",582191765425242,1,null,[[1,[14]],[3,1],[0,[282]],[0,[1]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[2,53,\"补间动画\",988644079876685,1,null,[[1,[14]],[3,1],[0,[283]],[0,[1]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[3,53,\"补间动画\",945687242769649,1,null,[[1,[14]],[3,1],[0,[283]],[0,[1]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,609049536554634,2,null,[[0,[62]]]],[70,33,\"正弦3\",621187761020974,0,null,[[3,0]]],[70,33,\"正弦2\",710142641053467,0,null,[[3,0]]],[70,33,\"正弦\",897672430082608,0,null,[[3,0]]],[70,53,\"补间动画\",685252534444737,1,null,[[1,[14]],[3,1],[0,[19]],[0,[6]],[18,0],[3,1],[3,0],[3,0],[0,[1]]]],[70,22,null,832386011110342,0,null,[[10,1],[7,[11]]]]]],[3,[true,\"开始领养2\"],false,null,531357604121088,8,[[-1,20,null,0,false,false,false,0,false,[[1,[284]]]]],[],[[0,0,false,null,647985050618901,9,[[142,64,null,1,false,false,false,406166594687051,null,[[4,2]]]],[[-1,48,null,249077069351231,0,null,[[5,[13]],[16,false]]],[2,31,\"补间动画\",596052622804990,1,null,[[1,[14]],[3,2],[0,[60]],[0,[60]],[0,[61]],[18,0],[3,0],[3,0],[3,1],[0,[1]]]],[143,22,null,421951178784034,0,null,[[10,40],[7,[285,[4,67],[4,61]]]]],[-1,32,null,616626869335168,2,null,[[0,[61]]]],[143,22,null,586334183407213,0,null,[[10,38],[7,[8,[4,29]]]]],[-1,60,null,703372246090306,0,null,[[3,1],[1,[286]]]],[143,22,null,943980668070016,0,null,[[10,39],[7,[1]]]],[141,41,null,416195544297759,0,null,[[1,[12]]]],[141,34,null,248218949803761,0,null,[[2,[\"领养询问/确认领养\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]]]],[0,0,false,null,423161929278481,10,[[143,36,null,0,false,false,false,767633752116850,null,[[10,39],[8,0],[7,[1]]]]],[[-1,68,null,910811714340949,0,null,[[1,[286]],[0,[11]],[0,[287,[4,29],[2,143,false,38]]]]],[141,58,null,507951591749426,0,null,[[1,[274]],[0,[231]],[0,[62]],[3,0]]],[-1,32,null,493676401918337,2,null,[[0,[64]]]],[-1,48,null,410259588259886,0,null,[[5,[13]],[16,true]]],[-1,37,null,177084899717259,0,null,[[6,\"常规喂养\"]]]]]]],[3,[true,\"触摸小鲨鱼\"],false,null,792989564803040,11,[[-1,20,null,0,false,false,false,0,false,[[1,[277]]]]],[],[[0,0,false,null,290764073422256,12,[[142,64,null,1,false,false,false,343492533212420,null,[[4,70]]],[70,36,null,0,false,false,false,664731939451229,null,[[10,1],[8,0],[7,[11]]]]],[[70,22,null,835798842986114,0,null,[[10,1],[7,[1]]]],[70,33,\"正弦\",881741601747948,0,null,[[3,0]]],[70,33,\"正弦2\",569321600478463,0,null,[[3,0]]],[70,50,null,733942871322934,0,null,[[1,[288]],[3,1]]],[70,31,\"补间动画\",820306010669302,1,null,[[1,[14]],[3,2],[0,[60]],[0,[60]],[0,[61]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[141,34,null,772922922004014,0,null,[[2,[\"选语言/小鲨鱼被点击\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,708904202772100,2,null,[[0,[61]]]],[70,31,\"补间动画\",632615346876547,1,null,[[1,[14]],[3,2],[0,[1]],[0,[1]],[0,[61]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,413759007085232,2,null,[[0,[61]]]],[70,33,\"正弦\",758634507097561,0,null,[[3,1]]],[70,33,\"正弦2\",436690516789320,0,null,[[3,1]]],[70,50,null,741339651775462,0,null,[[1,[279]],[3,1]]],[70,38,null,580474368789827,0,null,[[10,0],[7,[1]]]],[70,22,null,750845405855588,0,null,[[10,1],[7,[11]]]]]]]],[3,[true,\"不要再点我啦\"],false,null,295718695643091,13,[[-1,20,null,0,false,false,false,0,false,[[1,[289]]]]],[],[[0,0,false,null,693890205563039,14,[[70,36,null,0,false,false,false,546295436085593,null,[[10,0],[8,0],[7,[88]]]],[70,36,null,0,false,false,false,201060543237781,null,[[10,1],[8,0],[7,[11]]]],[-1,51,null,0,false,false,false,116784358176804,null]],[[-1,44,null,649400199677078,0,null,[[1,[277]],[3,0]]],[-1,32,null,803792159574553,2,null,[[0,[101]]]],[70,50,null,276114148488317,0,null,[[1,[289]],[3,1]]],[70,22,null,246414104714482,0,null,[[10,1],[7,[1]]]],[141,34,null,123103489606962,0,null,[[2,[\"选语言/不要再点我啦\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,843404156115194,2,null,[[0,[290]]]],[70,50,null,509940051698265,0,null,[[1,[291]],[3,1]]],[-1,69,null,653900317105561,2,null],[70,22,null,908746382337011,0,null,[[10,1],[7,[11]]]],[-1,44,null,320935315895386,0,null,[[1,[289]],[3,0]]]]]]],[3,[true,\"不领养\"],false,null,303176974470837,15,[[-1,20,null,0,false,false,false,0,false,[[1,[292]]]]],[],[[3,[true,\"点击不要\"],false,null,811002917508822,16,[[-1,20,null,0,false,false,false,0,false,[[1,[293]]]]],[],[[0,0,false,null,128973026118572,17,[[142,64,null,1,false,false,false,579403239596058,null,[[4,3]]]],[[143,22,null,200852831104819,0,null,[[10,37],[7,[294,[4,61]]]]],[3,31,\"补间动画\",247632534679592,1,null,[[1,[14]],[3,0],[0,[295,[4,61]]],[0,[296,[4,61]]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[143,38,null,386325035163861,0,null,[[10,33],[7,[1]]]]]],[0,0,false,null,666738011786440,18,[[143,36,null,0,false,false,false,111462736145078,null,[[10,37],[8,4],[7,[11]]]],[143,36,null,0,false,false,false,796357009430715,null,[[10,37],[8,3],[7,[1]]]],[-1,51,null,0,false,false,false,350366962527664,null]],[[141,34,null,215035184719494,0,null,[[2,[\"领养询问/滑走的音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,823217270034186,0,null,[[10,37],[7,[11]]]]]],[0,0,false,null,546302207981756,19,[[143,36,null,0,false,false,false,500342244821970,null,[[10,37],[8,4],[7,[1]]]],[143,36,null,0,false,false,false,851880700769732,null,[[10,37],[8,3],[7,[16]]]],[-1,51,null,0,false,false,false,904456791144322,null]],[[141,34,null,373237775107626,0,null,[[2,[\"领养询问/滑走的音效2\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,225222180325639,0,null,[[10,37],[7,[11]]]]]],[0,0,false,null,792915878696271,20,[[143,36,null,0,false,false,false,230486729574215,null,[[10,37],[8,4],[7,[16]]]],[143,36,null,0,false,false,false,391552594109261,null,[[10,37],[8,3],[7,[13]]]],[-1,51,null,0,false,false,false,774520670044583,null]],[[141,34,null,972830473564640,0,null,[[2,[\"领养询问/滑走的音效3\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,724656004157679,0,null,[[10,37],[7,[11]]]]]],[0,0,false,null,566560240386376,21,[[143,36,null,0,false,false,false,322417857108767,null,[[10,37],[8,4],[7,[13]]]],[143,36,null,0,false,false,false,711212723527647,null,[[10,37],[8,3],[7,[112]]]],[-1,51,null,0,false,false,false,477266243587756,null]],[[141,34,null,472612408710941,0,null,[[2,[\"领养询问/滑走的音效4\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,799900516167107,0,null,[[10,37],[7,[11]]]]]]]],[0,0,false,null,366255974955727,22,[[-1,23,null,0,false,false,false,489825999947956,null],[143,36,null,0,false,false,false,558786933612463,null,[[10,33],[8,5],[7,[55]]]],[-1,51,null,0,false,false,false,146446150580429,null]],[[143,22,null,619146471045267,0,null,[[10,33],[7,[11]]]],[70,47,null,281612909075435,0,null,[[3,0]]],[-1,32,null,926512852498454,2,null,[[0,[133]]]],[1,53,\"补间动画\",563533978154141,1,null,[[1,[14]],[3,1],[0,[297]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[2,53,\"补间动画\",997141511606529,1,null,[[1,[14]],[3,1],[0,[298]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[3,53,\"补间动画\",395846178930003,1,null,[[1,[14]],[3,1],[0,[298]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[5,53,\"补间动画\",329568629750743,1,null,[[1,[14]],[3,1],[0,[282]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[6,53,\"补间动画\",548182077374281,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[7,53,\"补间动画\",240604112888127,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]]]],[0,0,false,null,103236901948133,23,[[142,64,null,1,false,false,false,520027371681135,null,[[4,7]]]],[[1,53,\"补间动画\",760027104247027,1,null,[[1,[14]],[3,1],[0,[282]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[2,53,\"补间动画\",453696088434962,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[3,53,\"补间动画\",125425035487205,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[5,53,\"补间动画\",541711264743925,1,null,[[1,[14]],[3,1],[0,[299]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[6,53,\"补间动画\",541322336071579,1,null,[[1,[14]],[3,1],[0,[300]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[7,53,\"补间动画\",906269271608592,1,null,[[1,[14]],[3,1],[0,[300]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]]]],[0,0,false,null,313780501782534,24,[[142,64,null,1,false,false,false,409286150979650,null,[[4,6]]]],[[-1,48,null,858134316783488,0,null,[[5,[112]],[16,false]]],[6,31,\"补间动画\",631724196502805,1,null,[[1,[14]],[3,2],[0,[60]],[0,[60]],[0,[61]],[18,0],[3,0],[3,0],[3,1],[0,[1]]]],[141,34,null,374701806663078,0,null,[[2,[\"领养询问/确认放弃\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,853947573812257,2,null,[[0,[133]]]],[141,41,null,716738532083385,0,null,[[1,[274]]]],[-1,48,null,707152191208181,0,null,[[5,[112]],[16,true]]],[-1,37,null,107870592889807,0,null,[[6,\"结局11一个人也很自在\"]]]]]]]]],[\"常规喂养\",[[3,[false,\"开发者调试2\"],false,null,235150713031159,1,[[-1,20,null,0,false,false,false,0,false,[[1,[301]]]]],[],[[0,0,false,null,990254681866078,2,[[-1,23,null,0,false,false,false,744115124187659,null]],[[146,45,null,925478301110747,0,null,[[3,1]]],[146,46,null,735715905777291,0,null,[[7,[302,[2,143,false,24]]]]]]]]],[3,[true,\"场景构建\"],false,null,189851213060775,3,[[-1,20,null,0,false,false,false,0,false,[[1,[303]]]]],[],[[3,[true,\"初始构建\"],false,null,537544140593551,4,[[-1,20,null,0,false,false,false,0,false,[[1,[304]]]]],[],[[0,0,false,null,792626342476692,5,[[-1,21,null,1,false,false,false,919474264044170,null]],[[143,22,null,710559988291742,0,null,[[10,46],[7,[305,[2,143,false,40]]]]],[141,70,null,407224244460103,0,null,[[3,1],[1,[305,[2,143,true,46]]],[3,1],[0,[306]],[0,[11]],[1,[22]]]],[88,42,null,187132373713524,0,null],[88,43,null,888065606575188,0,null,[[0,[11]]]],[91,47,null,665874550143248,0,null,[[3,1]]],[91,42,null,555044264803385,0,null],[91,43,null,884490604217087,0,null,[[0,[11]]]],[102,47,null,590242047246844,0,null,[[3,0]]],[79,42,null,479234942261059,0,null],[105,42,null,987455905799836,0,null],[89,43,null,489159852973742,0,null,[[0,[305,[2,143,false,40]]]]],[89,42,null,747010064217190,0,null],[85,42,null,877881057358854,0,null],[83,42,null,236330186546434,0,null],[83,42,null,355584511723362,0,null],[75,43,null,333637599351589,0,null,[[0,[1]]]],[75,42,null,928624096383407,0,null],[75,66,null,366120969402982,0,null],[73,66,null,472303475346540,0,null],[73,71,\"BoundedDragDrop\",115873806485340,0,null,[[3,0]]],[156,42,null,920784889118515,0,null],[156,47,null,963849941873543,0,null,[[3,0]]],[90,72,null,226549498779146,0,null,[[1,[307]],[0,[11]],[0,[150]]]],[90,72,null,640547132326416,0,null,[[1,[307]],[0,[1]],[0,[11]]]],[78,55,\"正弦\",535955371647586,0,null,[[0,[13]]]],[-1,52,null,808444409820275,0,null,[[5,[114]],[3,1]]],[-1,52,null,608653081140488,0,null,[[5,[117]],[3,1]]],[-1,52,null,588165637553228,0,null,[[5,[55]],[3,1]]],[-1,52,null,208930597617703,0,null,[[5,[88]],[3,1]]],[82,47,null,694890268087908,0,null,[[3,0]]],[82,33,\"正弦超快速抖动\",635527357661993,0,null,[[3,0]]],[78,47,null,177216801371248,0,null,[[3,0]]],[76,47,null,982319812614805,0,null,[[3,0]]],[77,47,null,588936225345140,0,null,[[3,0]]],[79,47,null,324189572099603,0,null,[[3,0]]],[81,47,null,170528547920747,0,null,[[3,0]]],[80,47,null,846387872855815,0,null,[[3,0]]],[100,73,null,633499945565271,0,null,[[5,[126]]]],[-1,44,null,328861961545236,0,null,[[1,[308]],[3,1]]],[-1,44,null,825072463734696,0,null,[[1,[309]],[3,1]]],[-1,44,null,721304051008754,0,null,[[1,[310]],[3,1]]],[-1,44,null,137226014989599,0,null,[[1,[311]],[3,1]]],[-1,44,null,896471097360013,0,null,[[1,[312]],[3,1]]],[-1,44,null,568484536799504,0,null,[[1,[313]],[3,1]]],[-1,44,null,969453348293841,0,null,[[1,[314]],[3,0]]],[-1,44,null,662005743119440,0,null,[[1,[315]],[3,0]]],[-1,44,null,230977653594775,0,null,[[1,[316]],[3,0]]],[-1,44,null,482830031302740,0,null,[[1,[317]],[3,0]]],[-1,44,null,876491127184824,0,null,[[1,[318]],[3,0]]],[-1,44,null,387933845059368,0,null,[[1,[319]],[3,0]]],[-1,44,null,929370759007691,0,null,[[1,[320]],[3,0]]],[-1,44,null,425230231886962,0,null,[[1,[321]],[3,0]]],[-1,44,null,414034462104661,0,null,[[1,[322]],[3,0]]],[-1,44,null,424297059109448,0,null,[[1,[323]],[3,0]]],[-1,44,null,318131691676198,0,null,[[1,[324]],[3,0]]],[-1,44,null,173916055286158,0,null,[[1,[325]],[3,1]]],[-1,44,null,109733869924229,0,null,[[1,[326]],[3,0]]],[-1,44,null,908266143386071,0,null,[[1,[327]],[3,0]]],[-1,44,null,784201103665894,0,null,[[1,[328]],[3,0]]],[-1,44,null,279467146221553,0,null,[[1,[329]],[3,0]]],[-1,44,null,254989933106335,0,null,[[1,[330]],[3,0]]],[-1,44,null,306258945039647,0,null,[[1,[331]],[3,0]]],[-1,44,null,874668854184632,0,null,[[1,[332]],[3,1]]],[-1,44,null,489226093219166,0,null,[[1,[333]],[3,0]]],[-1,44,null,698133548910478,0,null,[[1,[334]],[3,0]]],[-1,74,null,547686911790580,0,null,[[5,[67]],[3,0],[1,[237]]]],[-1,74,null,834706552414077,0,null,[[5,[67]],[3,0],[1,[335]]]],[-1,74,null,221133989983242,0,null,[[5,[67]],[3,0],[1,[336]]]],[-1,44,null,696174226062704,0,null,[[1,[337]],[3,1]]],[78,33,\"正弦上下\",660403886344511,0,null,[[3,0]]],[143,22,null,469421600465367,0,null,[[10,39],[7,[11]]]],[82,33,\"正弦超快速抖动\",502781626059545,0,null,[[3,0]]],[143,22,null,509036660791902,0,null,[[10,44],[7,[11]]]],[143,22,null,634010068205488,0,null,[[10,41],[7,[11]]]],[143,22,null,601426685171546,0,null,[[10,20],[7,[11]]]],[143,22,null,864076177469406,0,null,[[10,49],[7,[11]]]],[143,22,null,845931884796571,0,null,[[10,45],[7,[11]]]],[143,22,null,519228500297488,0,null,[[10,47],[7,[11]]]],[143,22,null,889568413904007,0,null,[[10,21],[7,[11]]]],[143,22,null,827924989233349,0,null,[[10,50],[7,[11]]]],[143,22,null,690861973344576,0,null,[[10,51],[7,[11]]]],[143,22,null,955352643659920,0,null,[[10,52],[7,[11]]]],[143,22,null,770756636594967,0,null,[[10,22],[7,[11]]]],[143,22,null,234372147360035,0,null,[[10,23],[7,[11]]]],[143,22,null,656232420236044,0,null,[[10,58],[7,[11]]]],[143,22,null,785322005695115,0,null,[[10,24],[7,[11]]]],[93,22,null,344390070377650,0,null,[[10,0],[7,[11]]]],[-1,52,null,166767422222847,0,null,[[5,[186]],[3,0]]],[-1,48,null,153544837376774,0,null,[[5,[186]],[16,false]]],[-1,48,null,774889863780781,0,null,[[5,[67]],[16,true]]],[-1,48,null,195327549157202,0,null,[[5,[195]],[16,false]]],[100,47,null,331597815314573,0,null,[[3,0]]],[100,66,null,685790389469815,0,null],[101,47,null,225361046089664,0,null,[[3,0]]],[128,47,null,550228937246069,0,null,[[3,0]]],[-1,48,null,731661274810141,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,340536710660498,6,[],[]]]],[0,0,false,null,207915026272220,7,[[-1,23,null,0,false,false,false,896180555753905,null]],[[101,75,\"固定\",479523827806765,0,null,[[4,90],[7,[16]],[16,true],[3,1],[3,1],[16,false]]]]],[0,0,false,null,404085845880147,8,[[-1,21,null,1,false,false,false,265861925648833,null],[143,36,null,0,false,false,false,196493742056385,null,[[10,17],[8,0],[7,[1]]]]],[[91,43,null,527497008993809,0,null,[[0,[1]]]],[88,43,null,767443224813364,0,null,[[0,[13]]]]]],[0,0,false,null,973947605170255,9,[[143,36,null,0,false,false,false,148089571812548,null,[[10,1],[8,0],[7,[11]]]]],[[-1,44,null,404911063226419,0,null,[[1,[338]],[3,1]]],[-1,44,null,762181649965891,0,null,[[1,[339]],[3,0]]],[-1,44,null,404843688235732,0,null,[[1,[340]],[3,0]]],[-1,44,null,908566852499854,0,null,[[1,[341]],[3,0]]]]],[0,0,false,null,998203445534057,10,[[143,36,null,0,false,false,false,882059507222258,null,[[10,1],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,979127640430254,null,[[10,12],[8,0],[7,[1]]]]],[[-1,44,null,298434641179362,0,null,[[1,[338]],[3,1]]],[-1,44,null,319673832607530,0,null,[[1,[339]],[3,0]]],[-1,44,null,549849893903737,0,null,[[1,[340]],[3,0]]],[-1,44,null,232932636209841,0,null,[[1,[341]],[3,0]]]]],[0,0,false,null,101330180185843,11,[[143,36,null,0,false,false,false,385198652572126,null,[[10,1],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,928942600388398,null,[[10,12],[8,0],[7,[11]]]]],[[-1,44,null,536631217372243,0,null,[[1,[339]],[3,1]]],[-1,44,null,600630005856583,0,null,[[1,[340]],[3,0]]],[-1,44,null,894500747475570,0,null,[[1,[338]],[3,0]]],[-1,44,null,821254905177954,0,null,[[1,[341]],[3,0]]]]],[0,0,false,null,834007740221381,12,[[143,36,null,0,false,false,false,442107919630065,null,[[10,1],[8,2],[7,[112]]]],[143,36,null,0,false,false,false,394798371142397,null,[[10,1],[8,5],[7,[16]]]]],[[-1,44,null,285691395333108,0,null,[[1,[339]],[3,1]]],[-1,44,null,331974213698193,0,null,[[1,[340]],[3,0]]],[-1,44,null,205739398452699,0,null,[[1,[338]],[3,0]]],[-1,44,null,212036974450218,0,null,[[1,[341]],[3,0]]]]],[0,0,false,null,187929136568392,13,[[143,36,null,0,false,false,false,648741476502586,null,[[10,1],[8,5],[7,[112]]]],[143,36,null,0,false,false,false,841855146565452,null,[[10,1],[8,2],[7,[117]]]]],[[-1,44,null,688611653829556,0,null,[[1,[340]],[3,1]]],[-1,44,null,931014600057872,0,null,[[1,[338]],[3,0]]],[-1,44,null,993214612996455,0,null,[[1,[339]],[3,0]]],[-1,44,null,188901244429290,0,null,[[1,[341]],[3,0]]]]],[0,0,false,null,555599416108502,14,[[143,36,null,0,false,false,false,903249130220440,null,[[10,1],[8,0],[7,[117]]]]],[[-1,44,null,464401335041954,0,null,[[1,[341]],[3,1]]],[-1,44,null,794235672590291,0,null,[[1,[340]],[3,0]]],[-1,44,null,405609850614293,0,null,[[1,[338]],[3,0]]],[-1,44,null,837012495516170,0,null,[[1,[339]],[3,0]]]]],[0,0,false,null,601715498096846,15,[[143,36,null,0,false,false,false,516951436414210,null,[[10,1],[8,5],[7,[55]]]]],[[-1,44,null,804026803532052,0,null,[[1,[340]],[3,1]]],[-1,44,null,987082063298728,0,null,[[1,[338]],[3,0]]],[-1,44,null,870368103288216,0,null,[[1,[339]],[3,0]]],[-1,44,null,606529800090088,0,null,[[1,[341]],[3,0]]]]]]],[3,[true,\"新手引导\"],false,null,546441721416066,16,[[-1,20,null,0,false,false,false,0,false,[[1,[312]]]]],[],[[3,[false,\"最初引导\"],false,null,472772086484123,17,[[-1,20,null,0,false,false,false,0,false,[[1,[338]]]]],[],[[0,0,false,null,371041025290241,18,[[-1,51,null,0,false,false,false,890096759669483,null]],[[-1,32,null,692114355078093,2,null,[[0,[133]]]],[83,47,null,628154339143014,0,null,[[3,1]]],[83,43,null,593065018533347,0,null,[[0,[11]]]],[90,50,null,261329534502766,0,null,[[1,[342]],[3,1]]],[141,34,null,772156934172731,0,null,[[2,[\"喂养界面/新手引导/你好\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,768530239003732,2,null,[[0,[1]]]],[83,43,null,785265519436718,0,null,[[0,[1]]]],[141,34,null,834771820540089,0,null,[[2,[\"喂养界面/新手引导/我想吃苹果\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,587458628184397,2,null,[[0,[1]]]],[-1,32,null,457223837858420,2,null,[[0,[1]]]],[83,47,null,567124705291613,0,null,[[3,0]]],[76,47,null,194173727889588,0,null,[[3,1]]],[-1,44,null,981387567549948,0,null,[[1,[343]],[3,1]]]]],[0,0,false,null,118282763274778,19,[[143,36,null,0,false,false,false,419937304133498,null,[[10,41],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,721381366505623,null]],[[-1,44,null,717849523480985,0,null,[[1,[344]],[3,0]]],[-1,48,null,187836501394041,0,null,[[5,[67]],[16,false]]],[-1,32,null,814287387087416,2,null,[[0,[1]]]],[83,43,null,628697432688930,0,null,[[0,[16]]]],[83,47,null,436076019954452,0,null,[[3,1]]],[90,50,null,293855627136516,0,null,[[1,[345]],[3,1]]],[84,76,null,570486720060503,0,null,[[0,[346,[1,73,77,false]]],[0,[346,[1,73,78,false]]]]],[84,31,\"补间动画\",220521832714652,1,null,[[1,[14]],[3,0],[0,[347]],[0,[282]],[0,[1]],[18,0],[3,1],[3,0],[3,0],[0,[16]]]],[141,34,null,757175049472246,0,null,[[2,[\"喂养界面/新手引导/对对 就是那个 \",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,782084452050355,2,null,[[0,[64]]]],[83,43,null,635159993045417,0,null,[[0,[13]]]],[90,50,null,467861588582211,0,null,[[1,[348]],[3,1]]],[141,34,null,675118653455048,0,null,[[2,[\"喂养界面/新手引导/可以给我吗\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,48,null,973776298964221,0,null,[[5,[67]],[16,true]]],[-1,44,null,910637022500316,0,null,[[1,[344]],[3,1]]],[-1,32,null,129714648654541,2,null,[[0,[16]]]],[73,71,\"BoundedDragDrop\",698572140641117,0,null,[[3,1]]],[83,47,null,368265090102468,0,null,[[3,0]]],[143,22,null,287108265927015,0,null,[[10,43],[7,[8,[4,29]]]]],[-1,44,null,427995491715980,0,null,[[1,[316]],[3,1]]],[-1,44,null,742862104988535,0,null,[[1,[349]],[3,1]]],[-1,44,null,771734020488500,0,null,[[1,[312]],[3,0]]]]]]],[3,[false,\"多周目\"],false,null,773069810849909,20,[[-1,20,null,0,false,false,false,0,false,[[1,[339]]]]],[],[[0,0,false,null,428628773337813,21,[[-1,51,null,0,false,false,false,369212311423082,null]],[[76,47,null,562664546617838,0,null,[[3,1]]],[-1,44,null,668594213240588,0,null,[[1,[343]],[3,1]]]]],[0,0,false,null,512657928455346,22,[[143,36,null,0,false,false,false,728122478841505,null,[[10,41],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,802908837039225,null]],[[73,71,\"BoundedDragDrop\",528185331215286,0,null,[[3,1]]],[83,47,null,479499031997109,0,null,[[3,0]]],[143,22,null,405740506360877,0,null,[[10,43],[7,[8,[4,29]]]]],[-1,44,null,588229095345162,0,null,[[1,[316]],[3,1]]],[-1,44,null,337375060416945,0,null,[[1,[349]],[3,1]]],[-1,44,null,540930899944924,0,null,[[1,[312]],[3,0]]]]]]],[3,[false,\"难过的开头\"],false,null,234605401822692,23,[[-1,20,null,0,false,false,false,0,false,[[1,[340]]]]],[],[[0,0,false,null,974799594235281,24,[[-1,51,null,0,false,false,false,946846111974241,null]],[[90,50,null,973041397765372,0,null,[[1,[350]],[3,1]]],[90,42,null,334192234102339,0,null],[90,43,null,486248473650571,0,null,[[0,[1]]]],[76,47,null,472261301148721,0,null,[[3,1]]],[-1,44,null,549405061244433,0,null,[[1,[343]],[3,1]]]]],[0,0,false,null,816457648884892,25,[[143,36,null,0,false,false,false,181095623779069,null,[[10,41],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,300620582221369,null]],[[73,71,\"BoundedDragDrop\",723510575582327,0,null,[[3,1]]],[83,47,null,702328651208151,0,null,[[3,0]]],[143,22,null,572074409071934,0,null,[[10,43],[7,[8,[4,29]]]]],[-1,44,null,373542974060678,0,null,[[1,[316]],[3,1]]],[-1,44,null,137655876027349,0,null,[[1,[349]],[3,1]]],[-1,44,null,770508214689449,0,null,[[1,[312]],[3,0]]],[-1,44,null,815022055222408,0,null,[[1,[338]],[3,0]]],[-1,44,null,951609298492653,0,null,[[1,[339]],[3,1]]]]]]],[3,[false,\"你没什么开头\"],false,null,697195922608339,26,[[-1,20,null,0,false,false,false,0,false,[[1,[341]]]]],[],[[0,0,false,null,116238481714679,27,[[-1,51,null,0,false,false,false,613555864985560,null]],[[90,50,null,761775957494690,0,null,[[1,[350]],[3,1]]],[90,42,null,162947772066649,0,null],[90,43,null,782152507865787,0,null,[[0,[1]]]],[-1,32,null,562125778292476,2,null,[[0,[133]]]],[138,47,null,541773585419438,0,null,[[3,1]]],[141,34,null,777140841763581,0,null,[[2,[\"喂养界面/你……没什么\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[90,50,null,528994459648984,0,null,[[1,[350]],[3,1]]],[-1,32,null,809311354306001,2,null,[[0,[81]]]],[90,42,null,597456825348253,0,null],[90,43,null,173528348847212,0,null,[[0,[1]]]],[-1,32,null,309878905583047,2,null,[[0,[351]]]],[90,50,null,830650690730377,0,null,[[1,[352]],[3,1]]],[-1,32,null,899562117975458,2,null,[[0,[133]]]],[90,42,null,346306839021716,0,null],[90,43,null,302707490086790,0,null,[[0,[1]]]],[-1,32,null,589587385163778,2,null,[[0,[133]]]],[138,47,null,694826085334017,0,null,[[3,0]]],[76,47,null,409316537274561,0,null,[[3,1]]],[-1,44,null,805006227182240,0,null,[[1,[343]],[3,1]]]]],[0,0,false,null,118042685256961,28,[[143,36,null,0,false,false,false,169301768199769,null,[[10,41],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,183160485242265,null]],[[73,71,\"BoundedDragDrop\",577275793892176,0,null,[[3,1]]],[83,47,null,369234043851353,0,null,[[3,0]]],[143,22,null,905916690175829,0,null,[[10,43],[7,[8,[4,29]]]]],[-1,44,null,962352978809575,0,null,[[1,[316]],[3,1]]],[-1,44,null,518299982916031,0,null,[[1,[349]],[3,1]]],[-1,44,null,967643777129408,0,null,[[1,[312]],[3,0]]],[-1,44,null,716766769042125,0,null,[[1,[338]],[3,0]]],[-1,44,null,276747574592216,0,null,[[1,[339]],[3,1]]]]]]]]],[3,[false,\"饿肚子时长\"],false,null,455222746547228,29,[[-1,20,null,0,false,false,false,0,false,[[1,[316]]]]],[],[[0,0,false,null,274652432079524,30,[[-1,23,null,0,false,false,false,602093243030122,null]],[[143,22,null,166324755098124,0,null,[[10,44],[7,[4,[4,29],[2,143,false,43]]]]]]]]],[3,[false,\"【结局3】饿到离家出走\"],false,null,955142829848728,31,[[-1,20,null,0,false,false,false,0,false,[[1,[349]]]]],[],[[0,0,false,null,237088960220011,32,[[143,36,null,0,false,false,false,263326087811345,null,[[10,4],[8,0],[7,[1]]]]],[[-1,44,null,547583886277367,0,null,[[1,[311]],[3,0]]]]],[3,[true,\"耐饿\"],false,null,786797474802038,33,[[-1,20,null,0,false,false,false,0,false,[[1,[310]]]]],[],[[0,0,false,null,804102843042300,34,[[143,36,null,0,false,false,false,112919035818532,null,[[10,44],[8,5],[7,[88]]]],[-1,51,null,0,false,false,false,107530930279503,null],[143,36,null,0,false,false,false,863127112407960,null,[[10,4],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,164895227036954,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,585674929980966,0,null,[[1,[345]],[3,1]]],[120,47,null,111745652628033,0,null,[[3,1]]],[120,43,null,262032063668526,0,null,[[0,[11]]]],[141,34,null,445858121523418,0,null,[[2,[\"喂养界面/不喂/我闻到甜甜的香味了！\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,273180667881413,2,null,[[0,[233]]]],[90,42,null,456491832240184,0,null],[90,43,null,596165746988448,0,null,[[0,[1]]]]]],[0,0,false,null,999782034549456,35,[[143,36,null,0,false,false,false,110737399106025,null,[[10,44],[8,5],[7,[353]]]],[-1,51,null,0,false,false,false,985561794103340,null],[143,36,null,0,false,false,false,689091043058992,null,[[10,4],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,139281369193154,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,905327061658811,0,null,[[1,[342]],[3,1]]],[120,43,null,157465940759118,0,null,[[0,[16]]]],[141,34,null,145095701386169,0,null,[[2,[\"喂养界面/不喂/可以给我苹果吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,172453629032167,2,null,[[0,[1]]]],[90,42,null,881342086979709,0,null],[90,43,null,795489940839594,0,null,[[0,[1]]]]]],[0,0,false,null,522418197570893,36,[[143,36,null,0,false,false,false,343901832675509,null,[[10,44],[8,5],[7,[354]]]],[-1,51,null,0,false,false,false,650128972517191,null],[143,36,null,0,false,false,false,227829798352234,null,[[10,4],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,296653932283734,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,140367607352739,0,null,[[1,[348]],[3,1]]],[120,43,null,685760304721669,0,null,[[0,[13]]]],[141,34,null,282726955480859,0,null,[[2,[\"喂养界面/不喂/拜托？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,734524176919503,2,null,[[0,[13]]]],[120,47,null,190858557777504,0,null,[[3,0]]],[90,42,null,543545442318849,0,null],[90,43,null,131627923750767,0,null,[[0,[1]]]]]],[0,0,false,null,507487521189377,37,[[143,36,null,0,false,false,false,816104544737190,null,[[10,44],[8,5],[7,[355]]]],[-1,51,null,0,false,false,false,436119545662205,null],[143,36,null,0,false,false,false,550749160925742,null,[[10,4],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,469891841756157,null,[[10,20],[8,0],[7,[11]]]]],[[-1,44,null,884401297537803,0,null,[[1,[308]],[3,0]]],[90,50,null,221030384944400,0,null,[[1,[345]],[3,1]]],[121,47,null,245658999119747,0,null,[[3,1]]],[121,43,null,925716884305537,0,null,[[0,[13]]]],[141,34,null,442065377959175,0,null,[[2,[\"喂养界面/不喂/其实……我提前吃了点小零食，不怎么饿，嘿嘿\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,711559936373064,2,null,[[0,[6]]]],[121,43,null,269004584872302,0,null,[[0,[112]]]],[-1,32,null,920133716073867,2,null,[[0,[356]]]],[121,43,null,857415968766311,0,null,[[0,[114]]]],[-1,32,null,929262995694004,2,null,[[0,[16]]]],[121,47,null,111766068385997,0,null,[[3,0]]],[90,42,null,228536340834129,0,null],[90,43,null,587000779595040,0,null,[[0,[1]]]],[143,22,null,354312862554176,0,null,[[10,20],[7,[114]]]],[-1,44,null,144646711312523,0,null,[[1,[313]],[3,0]]],[-1,44,null,764860948513320,0,null,[[1,[314]],[3,1]]],[-1,44,null,212997121790453,0,null,[[1,[308]],[3,0]]],[-1,44,null,350171921628849,0,null,[[1,[316]],[3,0]]],[143,22,null,302447816970590,0,null,[[10,44],[7,[11]]]]]]]],[3,[true,\"饿出走\"],false,null,530858103341956,38,[[-1,20,null,0,false,false,false,0,false,[[1,[311]]]]],[],[[0,0,false,null,452057488542832,39,[[143,36,null,0,false,false,false,348871850843998,null,[[10,44],[8,5],[7,[88]]]],[-1,51,null,0,false,false,false,734054346215927,null],[143,36,null,0,false,false,false,613942974064739,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,651171113512451,null,[[10,20],[8,0],[7,[11]]]]],[[143,22,null,536458645874204,0,null,[[10,45],[7,[1]]]],[90,50,null,828055597922683,0,null,[[1,[345]],[3,1]]],[120,47,null,957960137313759,0,null,[[3,1]]],[120,43,null,485900769655348,0,null,[[0,[11]]]],[141,34,null,153457551462444,0,null,[[2,[\"喂养界面/不喂/我闻到甜甜的香味了！\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,748480319162435,2,null,[[0,[357]]]],[90,42,null,314947733022726,0,null],[90,43,null,419811465774449,0,null,[[0,[1]]]]]],[0,0,false,null,580834135454648,40,[[143,36,null,0,false,false,false,152494951425577,null,[[10,44],[8,5],[7,[73]]]],[-1,51,null,0,false,false,false,436370154949335,null],[143,36,null,0,false,false,false,693848335667981,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,900378056101222,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,118540475238110,0,null,[[1,[342]],[3,1]]],[120,43,null,140590324645790,0,null,[[0,[1]]]],[141,34,null,924458626964858,0,null,[[2,[\"喂养界面/不喂/好饿哦……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,241174072876152,2,null,[[0,[290]]]],[90,42,null,929868738912394,0,null],[90,43,null,787905748683661,0,null,[[0,[1]]]]]],[0,0,false,null,806859241614143,41,[[143,36,null,0,false,false,false,778436714709633,null,[[10,44],[8,5],[7,[358]]]],[-1,51,null,0,false,false,false,526301631363013,null],[143,36,null,0,false,false,false,211436885068383,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,422926770040997,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,556277009668531,0,null,[[1,[342]],[3,1]]],[120,43,null,204975283028770,0,null,[[0,[16]]]],[141,34,null,158642048319126,0,null,[[2,[\"喂养界面/不喂/可以给我苹果吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,702183449060159,2,null,[[0,[60]]]],[90,42,null,121439576276345,0,null],[90,43,null,693784925547869,0,null,[[0,[1]]]]]],[0,0,false,null,730743410844424,42,[[143,36,null,0,false,false,false,850367292014544,null,[[10,44],[8,5],[7,[359]]]],[-1,51,null,0,false,false,false,894733722904333,null],[143,36,null,0,false,false,false,223144159579811,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,347542756559650,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,172234183831730,0,null,[[1,[348]],[3,1]]],[120,43,null,876035147389353,0,null,[[0,[13]]]],[141,34,null,847142034287247,0,null,[[2,[\"喂养界面/不喂/拜托？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,371808085137312,2,null,[[0,[13]]]],[90,50,null,244882119718118,0,null,[[1,[342]],[3,1]]],[120,47,null,742747907264667,0,null,[[3,0]]],[90,42,null,776549790923528,0,null],[90,43,null,588399274347301,0,null,[[0,[1]]]]]],[0,0,false,null,382021037784850,43,[[143,36,null,0,false,false,false,322490527516207,null,[[10,44],[8,5],[7,[355]]]],[-1,51,null,0,false,false,false,706906030105567,null],[143,36,null,0,false,false,false,744752123948358,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,567988197174197,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,391731810988970,0,null,[[1,[342]],[3,1]]],[120,47,null,213183544457803,0,null,[[3,1]]],[120,43,null,858240673587883,0,null,[[0,[112]]]],[141,34,null,634815773605348,0,null,[[2,[\"喂养界面/不喂/明明苹果就在这么近的地方……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,483500629043655,2,null,[[0,[16]]]],[90,42,null,577023409802700,0,null],[90,43,null,385063593110090,0,null,[[0,[1]]]]]],[0,0,false,null,263729675599834,44,[[143,36,null,0,false,false,false,192768403080945,null,[[10,44],[8,5],[7,[360]]]],[-1,51,null,0,false,false,false,903988332608592,null],[143,36,null,0,false,false,false,764953539892687,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,551595902012032,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,390845960530816,0,null,[[1,[342]],[3,1]]],[120,43,null,524302871185829,0,null,[[0,[114]]]],[141,34,null,301216009780098,0,null,[[2,[\"喂养界面/不喂/就差一点就可以吃到了\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,648160425476123,2,null,[[0,[16]]]],[90,42,null,500408007113987,0,null],[90,43,null,976591330624746,0,null,[[0,[1]]]]]],[0,0,false,null,863482406532566,45,[[143,36,null,0,false,false,false,727506838361571,null,[[10,44],[8,5],[7,[361]]]],[-1,51,null,0,false,false,false,549266621820953,null],[143,36,null,0,false,false,false,538067541903949,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,263310005376756,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,342998482381504,0,null,[[1,[348]],[3,1]]],[120,43,null,651951589552404,0,null,[[0,[117]]]],[141,34,null,333291502434661,0,null,[[2,[\"喂养界面/不喂/可以帮帮我吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,112962574130246,2,null,[[0,[13]]]],[90,50,null,967545894591022,0,null,[[1,[342]],[3,1]]],[90,42,null,301148084439945,0,null],[90,43,null,230672925018680,0,null,[[0,[1]]]],[120,47,null,978965363832350,0,null,[[3,0]]]]],[0,0,false,null,558998084058607,46,[[143,36,null,0,false,false,false,678230740580210,null,[[10,44],[8,5],[7,[19]]]],[-1,51,null,0,false,false,false,831987121556583,null],[143,36,null,0,false,false,false,615501041342128,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,473107064891457,null,[[10,20],[8,0],[7,[11]]]]],[[143,22,null,541489089672580,0,null,[[10,45],[7,[16]]]],[90,50,null,303963206318372,0,null,[[1,[350]],[3,1]]],[120,47,null,212887714669682,0,null,[[3,1]]],[120,43,null,681727571035574,0,null,[[0,[55]]]],[141,34,null,131866463907044,0,null,[[2,[\"喂养界面/不喂/为什么无动于衷呢？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,584433988994797,2,null,[[0,[362]]]],[90,42,null,593638974984805,0,null],[90,43,null,426606267856169,0,null,[[0,[1]]]]]],[0,0,false,null,816235586754902,47,[[143,36,null,0,false,false,false,435084893335128,null,[[10,44],[8,5],[7,[363]]]],[-1,51,null,0,false,false,false,696916043215947,null],[143,36,null,0,false,false,false,748952058110924,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,471994992730301,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,510496833222209,0,null,[[1,[350]],[3,1]]],[120,43,null,324736827698973,0,null,[[0,[123]]]],[141,34,null,101362233701578,0,null,[[2,[\"喂养界面/不喂/莫非……其实你讨厌我？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,638281061164261,2,null,[[0,[104]]]],[90,42,null,153217477303794,0,null],[90,43,null,634402156648233,0,null,[[0,[1]]]]]],[0,0,false,null,591954170743528,48,[[143,36,null,0,false,false,false,796308244890567,null,[[10,44],[8,5],[7,[364]]]],[-1,51,null,0,false,false,false,535064978938675,null],[143,36,null,0,false,false,false,508194943673101,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,765478039700481,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,246574833382193,0,null,[[1,[350]],[3,1]]],[120,43,null,916240493805004,0,null,[[0,[126]]]],[141,34,null,625863098600166,0,null,[[2,[\"喂养界面/不喂/照料宠物让你感到很枯燥吗\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,702272444762002,2,null,[[0,[112]]]],[90,42,null,663637331350024,0,null],[90,43,null,712262811278406,0,null,[[0,[1]]]]]],[0,0,false,null,418402108225432,49,[[143,36,null,0,false,false,false,939115367962280,null,[[10,44],[8,5],[7,[17]]]],[-1,51,null,0,false,false,false,687534842356076,null],[143,36,null,0,false,false,false,449039710642701,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,566737274182062,null,[[10,20],[8,0],[7,[11]]]]],[[90,50,null,416974550564933,0,null,[[1,[352]],[3,1]]],[141,34,null,651599915437192,0,null,[[2,[\"喂养界面/不喂/抱歉，如果我不是给人带来麻烦的宠物就好了\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[120,43,null,889507770730485,0,null,[[0,[88]]]],[-1,32,null,841830403512608,2,null,[[0,[6]]]],[120,43,null,771817072624534,0,null,[[0,[96]]]],[-1,32,null,993467672225846,2,null,[[0,[112]]]],[120,47,null,230526300216411,0,null,[[3,0]]],[90,42,null,739626898884661,0,null],[90,43,null,620951084858508,0,null,[[0,[1]]]]]],[0,0,false,null,145205873987090,50,[[143,36,null,0,false,false,false,139372882786189,null,[[10,44],[8,5],[7,[365]]]],[-1,51,null,0,false,false,false,182438172139016,null],[143,36,null,0,false,false,false,301521590538183,null,[[10,4],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,825334914042079,null,[[10,20],[8,0],[7,[11]]]]],[[141,58,null,562955430140599,0,null,[[1,[22]],[0,[231]],[0,[123]],[3,0]]],[-1,44,null,538125985537572,0,null,[[1,[309]],[3,0]]],[90,50,null,757709792839861,0,null,[[1,[350]],[3,1]]],[120,47,null,640938626205694,0,null,[[3,1]]],[120,43,null,428802363426222,0,null,[[0,[67]]]],[141,34,null,376616152910826,0,null,[[2,[\"喂养界面/不喂/好饿，要饿晕了\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,311823649158371,2,null,[[0,[104]]]],[120,43,null,356825188234387,0,null,[[0,[73]]]],[141,34,null,183049987340839,0,null,[[2,[\"喂养界面/不喂/苹果是属于你的，我没办法吃到\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,173771562489459,2,null,[[0,[114]]]],[90,50,null,837061229114468,0,null,[[1,[366]],[3,1]]],[141,34,null,728751228705662,0,null,[[2,[\"喂养界面/不喂/唉再见了，我要出门去找食物吃了……【结局3】……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[120,43,null,361495777305520,0,null,[[0,[79]]]],[-1,32,null,450658618364032,2,null,[[0,[1]]]],[120,43,null,150194402247365,0,null,[[0,[84]]]],[-1,32,null,730599528880861,2,null,[[0,[367]]]],[120,43,null,701947954579273,0,null,[[0,[184]]]],[90,50,null,127359348247665,0,null,[[1,[368]],[3,1]]],[-1,32,null,820591614514090,2,null,[[0,[16]]]],[90,40,\"移动到\",100771386028000,0,null,[[0,[369]],[0,[76]],[3,0]]],[-1,32,null,495814325614650,2,null,[[0,[16]]]],[-1,44,null,526534448283909,0,null,[[1,[39]],[3,1]]],[-1,44,null,737520331497996,0,null,[[1,[40]],[3,0]]],[-1,37,null,537059546993183,0,null,[[6,\"结局3流浪的鲨鱼\"]]]]]]]]],[3,[true,\"【结局7】反悔的饲主演出\"],false,null,885682969905547,51,[[-1,20,null,0,false,false,false,0,false,[[1,[370]]]]],[],[[0,0,false,null,956707796952577,52,[[143,36,null,0,false,false,false,897248474498592,null,[[10,55],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,752647075666779,null]],[[-1,48,null,272833451812843,0,null,[[5,[67]],[16,false]]],[141,58,null,554423221065380,0,null,[[1,[22]],[0,[231]],[0,[64]],[3,0]]],[-1,52,null,313933280326010,0,null,[[5,[114]],[3,0]]],[-1,52,null,794365259801824,0,null,[[5,[117]],[3,0]]],[-1,52,null,299732086586953,0,null,[[5,[55]],[3,0]]],[-1,52,null,901219961956149,0,null,[[5,[88]],[3,0]]],[148,47,null,310754750044681,0,null,[[3,1]]],[148,53,\"补间动画\",970830878600099,1,null,[[1,[14]],[3,5],[0,[11]],[0,[13]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[99,79,null,656921884811100,0,null,[[0,[371]]]],[99,47,null,226439922341975,0,null,[[3,1]]],[99,40,\"移动到\",119029481194300,0,null,[[0,[372]],[0,[76]],[3,0]]],[90,79,null,400431035482373,0,null,[[0,[373]]]],[90,50,null,937163261860453,0,null,[[1,[374]],[3,1]]],[90,42,null,186807141428893,0,null],[90,43,null,711802380320137,0,null,[[0,[1]]]],[99,50,null,680722708058661,0,null,[[1,[99]],[3,1]]],[99,42,null,314266575756869,0,null],[99,43,null,773275843324000,0,null,[[0,[1]]]],[-1,32,null,949530402374595,2,null,[[0,[13]]]],[132,47,null,655453339699414,0,null,[[3,1]]],[132,43,null,124716842516150,0,null,[[0,[16]]]],[90,50,null,272611374476860,0,null,[[1,[374]],[3,1]]],[141,34,null,122631470323583,0,null,[[2,[\"流浪鲨鱼带回家/家里的鲨鱼：哇！新朋友！？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[90,33,\"正弦锻炼\",726384339357806,0,null,[[3,1]]],[90,33,\"正弦旋转\",774928738786932,0,null,[[3,1]]],[90,55,\"正弦旋转\",843813670623983,0,null,[[0,[6]]]],[-1,32,null,276370383289556,2,null,[[0,[290]]]],[90,42,null,499495929167777,0,null],[90,43,null,999355471298145,0,null,[[0,[1]]]],[90,33,\"正弦锻炼\",908592649350803,0,null,[[3,0]]],[90,56,\"正弦旋转\",108830928173965,0,null,[[0,[11]]]],[90,33,\"正弦旋转\",483874068965031,0,null,[[3,0]]],[90,55,\"正弦旋转\",429918867663024,0,null,[[0,[13]]]],[-1,32,null,768810167518416,2,null,[[0,[133]]]],[132,43,null,176399976271895,0,null,[[0,[13]]]],[99,50,null,550319402854106,0,null,[[1,[99]],[3,1]]],[-1,32,null,598652229796239,2,null,[[0,[1]]]],[99,42,null,806094391579142,0,null],[99,43,null,719873538657247,0,null,[[0,[1]]]],[-1,32,null,455774649386265,2,null,[[0,[62]]]],[99,50,null,496793077865589,0,null,[[1,[99]],[3,1]]],[-1,32,null,318831052289781,2,null,[[0,[6]]]],[99,42,null,319264908274841,0,null],[99,43,null,321540902307790,0,null,[[0,[1]]]],[-1,32,null,115410798912130,2,null,[[0,[133]]]],[132,47,null,153999167934598,0,null,[[3,0]]],[-1,32,null,872457901040203,2,null,[[0,[1]]]],[143,22,null,118419486063553,0,null,[[10,55],[7,[11]]]],[-1,48,null,848772280106321,0,null,[[5,[67]],[16,true]]],[-1,37,null,174239871309046,0,null,[[6,\"结局7反悔的饲主\"]]]]]]],[3,[true,\"说话口型\"],false,null,571706738721474,53,[[-1,20,null,0,false,false,false,0,false,[[1,[375]]]]],[],[[0,0,false,null,705126533984875,54,[[141,80,null,0,false,false,false,224960374368686,null,[[1,[65]]]],[-1,51,null,0,false,false,false,687513817133165,null]],[[90,81,null,364655016183789,0,null,[[3,1]]]]],[0,0,false,null,344708527707279,55,[[141,80,null,0,false,true,false,808267897866084,null,[[1,[65]]]],[-1,51,null,0,false,false,false,452148867661392,null]],[[90,42,null,730400200499970,0,null],[90,43,null,541395322088126,0,null,[[0,[1]]]]]],[0,0,false,null,405027126908642,56,[],[]]]],[3,[true,\"所有室内功能\"],false,null,421360851214095,57,[[-1,20,null,0,false,false,false,0,false,[[1,[309]]]]],[],[[3,[true,\"点击小鸭子\"],false,null,345668366199844,58,[[-1,20,null,0,false,false,false,0,false,[[1,[376]]]]],[],[[0,0,false,null,349228447288197,59,[[142,49,null,1,false,false,false,688933063776685,null,[[4,93]]],[93,36,null,0,false,false,false,931965450063776,null,[[10,0],[8,0],[7,[11]]]]],[[93,22,null,634897289079198,0,null,[[10,0],[7,[1]]]],[93,53,\"补间动画\",525987434188065,1,null,[[1,[14]],[3,9],[0,[6]],[0,[61]],[18,0],[3,0],[3,0],[3,1],[0,[1]]]],[141,34,null,835684171022432,0,null,[[2,[\"喂养界面/橡皮鸭子\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,332758329332767,2,null,[[0,[9]]]],[93,22,null,130249579903539,0,null,[[10,0],[7,[11]]]]]]]],[3,[true,\"花出现\"],false,null,482960027245095,60,[[-1,20,null,0,false,false,false,0,false,[[1,[337]]]]],[],[[0,0,false,null,842625698025139,61,[[143,36,null,0,false,false,false,746708997510411,null,[[10,22],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,214329776761789,null]],[[100,47,null,161003489661275,0,null,[[3,1]]],[100,71,\"BoundedDragDrop\",669126289462510,0,null,[[3,1]]]]],[0,0,false,null,871933928458668,62,[[100,82,null,0,false,false,false,191807633057650,null,[[4,90]]]],[[-1,48,null,320841990625945,0,null,[[5,[67]],[16,false]]],[143,22,null,265676893772382,0,null,[[10,23],[7,[1]]]],[101,47,null,495136383373866,0,null,[[3,1]]],[100,66,null,434691708275886,0,null],[-1,32,null,797202292023760,2,null,[[0,[133]]]],[141,34,null,353493930718424,0,null,[[2,[\"喂养界面/戴上花/戴上花\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[90,33,\"正弦锻炼\",270450608846196,0,null,[[3,1]]],[90,33,\"正弦旋转\",813407700158164,0,null,[[3,1]]],[90,55,\"正弦旋转\",300801592692004,0,null,[[0,[1]]]],[127,47,null,642018176925702,0,null,[[3,1]]],[90,50,null,302036507058706,0,null,[[1,[345]],[3,1]]],[127,43,null,334283822467447,0,null,[[0,[11]]]],[-1,32,null,694943810055519,2,null,[[0,[377]]]],[90,56,\"正弦旋转\",650423772567478,0,null,[[0,[11]]]],[90,33,\"正弦旋转\",498306097962128,0,null,[[3,0]]],[90,50,null,177357343161076,0,null,[[1,[342]],[3,1]]],[127,43,null,985675924155246,0,null,[[0,[1]]]],[-1,32,null,279920751025712,2,null,[[0,[378]]]],[90,50,null,389305612705683,0,null,[[1,[348]],[3,1]]],[127,43,null,785166639458792,0,null,[[0,[16]]]],[-1,32,null,872934268563003,2,null,[[0,[379]]]],[90,33,\"正弦旋转\",333894887381192,0,null,[[3,1]]],[90,50,null,618976213587934,0,null,[[1,[345]],[3,1]]],[127,43,null,373216977578626,0,null,[[0,[13]]]],[-1,32,null,626459416107767,2,null,[[0,[380]]]],[90,50,null,935816466016330,0,null,[[1,[345]],[3,1]]],[127,43,null,323370416976985,0,null,[[0,[112]]]],[-1,32,null,867044034257783,2,null,[[0,[381]]]],[90,50,null,417424790151868,0,null,[[1,[382]],[3,1]]],[127,43,null,272372336827611,0,null,[[0,[114]]]],[-1,32,null,311886380159727,2,null,[[0,[60]]]],[127,47,null,423033715240230,0,null,[[3,0]]],[90,42,null,777392357374599,0,null],[90,43,null,533471308966871,0,null,[[0,[1]]]],[90,33,\"正弦锻炼\",638894707820933,0,null,[[3,0]]],[90,56,\"正弦旋转\",168036687373856,0,null,[[0,[11]]]],[90,33,\"正弦旋转\",709774173700984,0,null,[[3,0]]],[90,55,\"正弦旋转\",828717053922070,0,null,[[0,[13]]]],[-1,48,null,640031480762843,0,null,[[5,[67]],[16,true]]]]]]],[3,[true,\"功能解锁控制\"],false,null,732780075175884,63,[[-1,20,null,0,false,false,false,0,false,[[1,[383]]]]],[],[[0,0,false,null,719681658722489,64,[[143,36,null,0,false,false,false,618895411289014,null,[[10,20],[8,5],[7,[1]]]],[-1,51,null,0,false,false,false,946159884760199,null]],[[80,47,null,826146834205255,0,null,[[3,1]]],[-1,44,null,454386514352485,0,null,[[1,[320]],[3,1]]],[-1,44,null,981266983371290,0,null,[[1,[322]],[3,1]]]]],[0,0,false,null,445612385424069,65,[[143,36,null,0,false,false,false,114464464751804,null,[[10,20],[8,5],[7,[1]]]],[-1,51,null,0,false,false,false,772143458920233,null]],[[77,47,null,701726960090006,0,null,[[3,1]]],[-1,44,null,226756330664236,0,null,[[1,[384]],[3,1]]],[-1,44,null,993136149978917,0,null,[[1,[317]],[3,1]]]]],[0,0,false,null,969704956922199,66,[[143,36,null,0,false,false,false,696627647756874,null,[[10,2],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,374212992420763,null,[[10,3],[8,0],[7,[11]]]],[143,36,null,0,false,false,false,637738705873130,null,[[10,20],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,239497604315795,null]],[[-1,32,null,704871313704337,2,null,[[0,[64]]]],[82,47,null,555944116925547,0,null,[[3,1]]],[-1,44,null,971542205533962,0,null,[[1,[323]],[3,1]]]]]]],[3,[true,\"喂食\"],false,null,837186295618176,67,[[-1,20,null,0,false,false,false,0,false,[[1,[385]]]]],[],[[3,[true,\"苹果碰撞音效\"],false,null,743364200392818,68,[[-1,20,null,0,false,false,false,0,false,[[1,[386]]]]],[],[[0,0,false,null,562635744473528,69,[[73,83,null,0,false,false,true,373602042324076,null,[[4,74]]],[73,36,null,0,false,false,false,666173669455702,null,[[10,0],[8,0],[7,[11]]]],[73,84,\"子弹\",0,false,false,false,691101731787228,null,[[8,4],[0,[88]]]]],[[73,22,null,824970389579230,0,null,[[10,0],[7,[1]]]],[141,34,null,611726034932048,0,null,[[2,[\"喂养界面/苹果反弹\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[73,22,null,750564040063751,0,null,[[10,0],[7,[11]]]]]]]],[3,[false,\"喂食按钮\"],false,null,602935581312168,70,[[-1,20,null,0,false,false,false,0,false,[[1,[343]]]]],[],[[3,[false,\"不可喂食\"],false,null,169207114569213,71,[[-1,20,null,0,false,false,false,0,false,[[1,[314]]]]],[],[[0,0,false,null,697658375169876,72,[[142,49,null,1,false,false,false,892112631646733,null,[[4,76]]]],[[-1,48,null,195950856642569,0,null,[[5,[67]],[16,false]]],[90,50,null,704822665446335,0,null,[[1,[342]],[3,1]]],[123,47,null,353928128260248,0,null,[[3,1]]],[141,34,null,471463344138150,0,null,[[2,[\"喂养界面/喂食/已经不饿啦\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,269982673489020,2,null,[[0,[6]]]],[90,42,null,317328751285957,0,null],[90,43,null,145262637427536,0,null,[[0,[1]]]],[123,47,null,968576906613434,0,null,[[3,0]]],[-1,48,null,925635093479516,0,null,[[5,[67]],[16,true]]]]]]],[3,[true,\"可喂食\"],false,null,935926288352003,73,[[-1,20,null,0,false,false,false,0,false,[[1,[313]]]]],[],[[0,0,false,null,215281942094505,74,[[142,64,null,1,false,false,false,938850001793239,null,[[4,76]]]],[[-1,85,null,605792697570082,256,null,[[4,73],[5,[126]],[0,[84]],[0,[306]],[16,false],[20,[387]]]],[143,38,null,118031227513036,0,null,[[10,41],[7,[1]]]],[73,72,null,636372933155755,0,null,[[1,[388]],[0,[11]],[0,[389,[4,61]]]]]]]]]]],[3,[true,\"鲨鱼进食\"],false,null,379822182263333,75,[[-1,20,null,0,false,false,false,0,false,[[1,[308]]]]],[],[[3,[true,\"与苹果碰撞\"],false,null,280392892141965,76,[[-1,20,null,0,false,false,false,0,false,[[1,[344]]]]],[],[[0,0,false,null,714812968888897,77,[[73,82,null,0,false,false,false,563836938528434,null,[[4,92]]],[-1,51,null,0,false,false,false,426594141269779,null]],[[84,47,null,395969842154549,0,null,[[3,0]]],[-1,44,null,631364051181716,0,null,[[1,[349]],[3,0]]],[120,47,null,717764519928279,0,null,[[3,0]]],[121,47,null,251585371165762,0,null,[[3,0]]],[83,47,null,966655725034783,0,null,[[3,0]]],[-1,44,null,282364508939533,0,null,[[1,[310]],[3,0]]],[-1,44,null,153933790001781,0,null,[[1,[311]],[3,0]]],[-1,44,null,711362225626677,0,null,[[1,[316]],[3,0]]],[143,22,null,368314500842281,0,null,[[10,44],[7,[11]]]],[120,47,null,196445148703079,0,null,[[3,0]]],[141,34,null,555717148930808,0,null,[[2,[\"喂养界面/咀嚼\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[73,66,null,231668785627040,0,null],[90,43,null,474868942661485,0,null,[[0,[11]]]],[-1,32,null,376236224744077,2,null,[[0,[62]]]],[143,38,null,702570064642999,0,null,[[10,20],[7,[1]]]],[90,43,null,314109441021620,0,null,[[0,[1]]]]]]]],[3,[true,\"进食后语音\"],false,null,589155899620020,78,[[-1,20,null,0,false,false,false,0,false,[[1,[390]]]]],[],[[0,0,false,null,428197424577627,79,[[143,36,null,0,false,false,false,544767946814089,null,[[10,20],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,982818903764763,null,[[10,45],[8,0],[7,[11]]]],[-1,51,null,0,false,false,false,499578137709531,null]],[[-1,44,null,654889509798096,0,null,[[1,[344]],[3,0]]],[-1,48,null,137074276205002,0,null,[[5,[67]],[16,false]]],[-1,44,null,833702868791474,0,null,[[1,[316]],[3,0]]],[-1,32,null,119739192922430,2,null,[[0,[133]]]],[90,50,null,216347613170380,0,null,[[1,[345]],[3,1]]],[141,34,null,708521098943466,0,null,[[2,[\"喂养界面/喂食/好好吃哦！谢谢你！\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,47,null,503492212372293,0,null,[[3,1]]],[122,43,null,254179240960422,0,null,[[0,[11]]]],[-1,32,null,658790896437389,2,null,[[0,[6]]]],[90,50,null,708406999262968,0,null,[[1,[342]],[3,1]]],[122,43,null,912285554781682,0,null,[[0,[1]]]],[-1,32,null,808409118025784,2,null,[[0,[6]]]],[90,42,null,269210661981604,0,null],[90,43,null,486228180324098,0,null,[[0,[1]]]],[122,47,null,615335671846064,0,null,[[3,0]]],[-1,48,null,599936546590428,0,null,[[5,[67]],[16,true]]],[-1,44,null,560386562005547,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,712181256834342,80,[[143,36,null,0,false,false,false,123676832716469,null,[[10,20],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,436564603132994,null,[[10,45],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,446974032181605,null]],[[-1,44,null,951401206432462,0,null,[[1,[344]],[3,0]]],[-1,48,null,861536178148253,0,null,[[5,[67]],[16,false]]],[-1,44,null,997637367586623,0,null,[[1,[316]],[3,0]]],[-1,32,null,955191043033420,2,null,[[0,[133]]]],[90,50,null,386354894351254,0,null,[[1,[345]],[3,1]]],[141,34,null,378854805279165,0,null,[[2,[\"喂养界面/喂食/终于吃到了，谢谢你！\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,47,null,551876130847255,0,null,[[3,1]]],[122,43,null,809280470962804,0,null,[[0,[16]]]],[-1,32,null,461514924640886,2,null,[[0,[132]]]],[90,50,null,894364136529708,0,null,[[1,[345]],[3,1]]],[122,43,null,980161678320449,0,null,[[0,[13]]]],[-1,32,null,464767809320360,2,null,[[0,[6]]]],[90,50,null,311681796705080,0,null,[[1,[342]],[3,1]]],[90,42,null,518867575000684,0,null],[90,43,null,897606210869745,0,null,[[0,[1]]]],[122,47,null,772351633964550,0,null,[[3,0]]],[-1,48,null,330099936535674,0,null,[[5,[67]],[16,true]]],[-1,44,null,715916449302666,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,886685563500374,81,[[143,36,null,0,false,false,false,738544102339227,null,[[10,20],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,715999220301571,null,[[10,45],[8,0],[7,[16]]]],[-1,51,null,0,false,false,false,373932588395200,null]],[[-1,44,null,381208331340020,0,null,[[1,[344]],[3,0]]],[-1,48,null,892071804818784,0,null,[[5,[67]],[16,false]]],[-1,44,null,979163662062809,0,null,[[1,[349]],[3,0]]],[-1,44,null,586737218453961,0,null,[[1,[316]],[3,0]]],[-1,32,null,485725573704528,2,null,[[0,[133]]]],[90,50,null,940560151671207,0,null,[[1,[352]],[3,1]]],[141,34,null,260298584301117,0,null,[[2,[\"喂养界面/喂食/谢谢你愿意接纳我\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,47,null,878030571004443,0,null,[[3,1]]],[122,43,null,843324834751386,0,null,[[0,[112]]]],[-1,32,null,610495105812987,2,null,[[0,[378]]]],[90,50,null,968042302369771,0,null,[[1,[342]],[3,1]]],[90,42,null,806192458425474,0,null],[90,43,null,631686629268930,0,null,[[0,[1]]]],[122,47,null,134512068954105,0,null,[[3,0]]],[-1,48,null,573579616920228,0,null,[[5,[67]],[16,true]]],[-1,44,null,291641550178765,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,472569257230922,82,[[143,36,null,0,false,false,false,485139829313037,null,[[10,20],[8,0],[7,[16]]]],[-1,51,null,0,false,false,false,137956369218292,null]],[[-1,44,null,538350808530572,0,null,[[1,[344]],[3,0]]],[-1,48,null,655487494377827,0,null,[[5,[67]],[16,false]]],[-1,32,null,886035356981506,2,null,[[0,[133]]]],[90,50,null,742198476716781,0,null,[[1,[345]],[3,1]]],[141,34,null,180817229933916,0,null,[[2,[\"喂养界面/喂食/我爱吃苹果！\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,43,null,491002283906703,0,null,[[0,[114]]]],[122,47,null,947737196418038,0,null,[[3,1]]],[-1,32,null,236892185673525,2,null,[[0,[391]]]],[90,42,null,685319948145596,0,null],[90,43,null,868631374994523,0,null,[[0,[1]]]],[122,47,null,442987611289752,0,null,[[3,0]]],[-1,48,null,491194847254848,0,null,[[5,[67]],[16,true]]],[-1,44,null,697237608180703,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,603703477535880,83,[[143,36,null,0,false,false,false,294373603707025,null,[[10,20],[8,0],[7,[13]]]],[-1,51,null,0,false,false,false,197925059653572,null]],[[-1,44,null,368997697757138,0,null,[[1,[344]],[3,0]]],[-1,48,null,957568962658793,0,null,[[5,[67]],[16,false]]],[-1,32,null,905616004786081,2,null,[[0,[133]]]],[90,50,null,816687875244309,0,null,[[1,[342]],[3,1]]],[141,34,null,229150205333102,0,null,[[2,[\"喂养界面/喂食/嗯？鲨鱼应该吃鱼肉？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,43,null,269435308419827,0,null,[[0,[117]]]],[122,47,null,665521593007880,0,null,[[3,1]]],[-1,32,null,107254822672742,2,null,[[0,[101]]]],[122,43,null,392651171517026,0,null,[[0,[55]]]],[122,47,null,885993952459002,0,null,[[3,1]]],[-1,32,null,549673755800082,2,null,[[0,[16]]]],[90,42,null,619371310138566,0,null],[90,43,null,242476667563488,0,null,[[0,[1]]]],[122,47,null,904799335855291,0,null,[[3,0]]],[-1,48,null,189230341403154,0,null,[[5,[67]],[16,true]]],[-1,44,null,643357210252121,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,347768685638319,84,[[143,36,null,0,false,false,false,389754355993046,null,[[10,20],[8,0],[7,[112]]]],[-1,51,null,0,false,false,false,610970708916647,null]],[[-1,44,null,299831729852541,0,null,[[1,[344]],[3,0]]],[-1,48,null,347720707048228,0,null,[[5,[67]],[16,false]]],[-1,32,null,506681421818866,2,null,[[0,[133]]]],[90,50,null,969253337633224,0,null,[[1,[342]],[3,1]]],[141,34,null,833392485797770,0,null,[[2,[\"喂养界面/喂食/鲨鱼吃苹果也很正常嘛\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,43,null,495597597709730,0,null,[[0,[123]]]],[122,47,null,881067935872424,0,null,[[3,1]]],[-1,32,null,819663793244450,2,null,[[0,[356]]]],[90,42,null,407728785104618,0,null],[90,43,null,223266502087088,0,null,[[0,[1]]]],[122,47,null,753112528428805,0,null,[[3,0]]],[-1,48,null,871129677916529,0,null,[[5,[67]],[16,true]]],[-1,44,null,807708337961503,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,719656159372493,85,[[143,36,null,0,false,false,false,238071015288722,null,[[10,20],[8,0],[7,[114]]]],[-1,51,null,0,false,false,false,983606114317504,null]],[[-1,44,null,306708963142395,0,null,[[1,[344]],[3,0]]],[-1,48,null,298959398649286,0,null,[[5,[67]],[16,false]]],[-1,32,null,140791179928287,2,null,[[0,[133]]]],[90,50,null,379348381740191,0,null,[[1,[345]],[3,1]]],[141,34,null,564139457302674,0,null,[[2,[\"喂养界面/喂食/吃得很满足啦\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,43,null,482623056532286,0,null,[[0,[126]]]],[122,47,null,492974869477671,0,null,[[3,1]]],[-1,32,null,690963444284171,2,null,[[0,[16]]]],[90,42,null,861633301375288,0,null],[90,43,null,864844596136842,0,null,[[0,[1]]]],[122,47,null,398280716479367,0,null,[[3,0]]],[-1,48,null,258601733915738,0,null,[[5,[67]],[16,true]]],[-1,44,null,939466324515263,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,372070035407622,86,[[143,36,null,0,false,false,false,436491669496553,null,[[10,20],[8,0],[7,[117]]]],[-1,51,null,0,false,false,false,826160042546434,null]],[[-1,44,null,134182248951957,0,null,[[1,[344]],[3,0]]],[-1,48,null,198422650243328,0,null,[[5,[67]],[16,false]]],[-1,32,null,676979277499817,2,null,[[0,[133]]]],[90,50,null,901444927007730,0,null,[[1,[392]],[3,1]]],[141,34,null,825260353763157,0,null,[[2,[\"喂养界面/喂食/我会不会吃胖了？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,43,null,325342998512130,0,null,[[0,[88]]]],[122,47,null,241268029954653,0,null,[[3,1]]],[-1,32,null,180788381416203,2,null,[[0,[290]]]],[90,42,null,510490062134224,0,null],[90,43,null,210783451944141,0,null,[[0,[1]]]],[122,47,null,246232807078956,0,null,[[3,0]]],[-1,48,null,903295189081153,0,null,[[5,[67]],[16,true]]],[-1,44,null,714988572423591,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,191316921556150,87,[[143,36,null,0,false,false,false,620154809977239,null,[[10,20],[8,0],[7,[55]]]],[-1,51,null,0,false,false,false,141761836616812,null]],[[-1,44,null,999764429343337,0,null,[[1,[344]],[3,0]]],[-1,48,null,751989848285731,0,null,[[5,[67]],[16,false]]],[-1,32,null,218495180609642,2,null,[[0,[133]]]],[82,33,\"正弦超快速抖动\",568182842629011,0,null,[[3,1]]],[90,50,null,187339553050459,0,null,[[1,[350]],[3,1]]],[141,34,null,172160070188067,0,null,[[2,[\"喂养界面/喂食/好想锻炼一下消消食啊\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,43,null,432239144947203,0,null,[[0,[96]]]],[122,47,null,760309667961667,0,null,[[3,1]]],[-1,32,null,288716441761741,2,null,[[0,[393]]]],[90,42,null,194982891083738,0,null],[90,43,null,610987966653036,0,null,[[0,[1]]]],[122,47,null,705121049083149,0,null,[[3,0]]],[-1,48,null,116446689185530,0,null,[[5,[67]],[16,true]]],[-1,44,null,157979780001050,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,399716380138006,88,[[143,36,null,0,false,false,false,238522894802326,null,[[10,20],[8,0],[7,[123]]]],[-1,51,null,0,false,false,false,939755317496980,null]],[[-1,44,null,130402915793011,0,null,[[1,[344]],[3,0]]],[-1,48,null,604083131389984,0,null,[[5,[67]],[16,false]]],[82,47,null,446875363632840,0,null,[[3,0]]],[-1,44,null,990466263069219,0,null,[[1,[317]],[3,0]]],[-1,44,null,686892525570477,0,null,[[1,[318]],[3,0]]],[-1,44,null,257195779604277,0,null,[[1,[394]],[3,0]]],[-1,44,null,970983381969595,0,null,[[1,[321]],[3,0]]],[-1,44,null,783444115911269,0,null,[[1,[323]],[3,0]]],[-1,32,null,766800083995716,2,null,[[0,[133]]]],[90,50,null,505815279817252,0,null,[[1,[395]],[3,1]]],[90,76,null,498131411631231,0,null,[[0,[19]],[0,[19]]]],[92,76,null,328021900517911,0,null,[[0,[276]],[0,[396]]]],[90,72,null,796759290497574,0,null,[[1,[307]],[0,[11]],[0,[397]]]],[90,72,null,882491171108247,0,null,[[1,[307]],[0,[1]],[0,[225]]]],[141,34,null,973185023921609,0,null,[[2,[\"喂养界面/喂食/糟了，好像身体卡住了\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,43,null,559394293912923,0,null,[[0,[67]]]],[122,47,null,585786796770138,0,null,[[3,1]]],[-1,32,null,426385545040757,2,null,[[0,[105]]]],[122,43,null,594935982914355,0,null,[[0,[73]]]],[122,47,null,383055890112032,0,null,[[3,1]]],[-1,32,null,447498373768548,2,null,[[0,[356]]]],[90,42,null,379930494834436,0,null],[90,43,null,469877453561151,0,null,[[0,[1]]]],[122,47,null,322481394868222,0,null,[[3,0]]],[-1,48,null,422737421326303,0,null,[[5,[67]],[16,true]]],[-1,44,null,398468253382479,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,265837148078897,89,[[143,36,null,0,false,false,false,686212135652799,null,[[10,20],[8,0],[7,[126]]]],[-1,51,null,0,false,false,false,910268425213102,null]],[[-1,44,null,328669223490684,0,null,[[1,[344]],[3,0]]],[-1,48,null,781045903801649,0,null,[[5,[67]],[16,false]]],[-1,32,null,914449801045588,2,null,[[0,[133]]]],[90,50,null,910649805116540,0,null,[[1,[398]],[3,1]]],[90,76,null,300092890985666,0,null,[[0,[399]],[0,[19]]]],[90,72,null,371448422997142,0,null,[[1,[307]],[0,[11]],[0,[397]]]],[90,72,null,290257111033527,0,null,[[1,[307]],[0,[1]],[0,[225]]]],[141,34,null,419921906600333,0,null,[[2,[\"喂养界面/喂食/真的不能再吃了\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,43,null,397303157348756,0,null,[[0,[79]]]],[122,47,null,702409423088487,0,null,[[3,1]]],[-1,32,null,608084627234509,2,null,[[0,[16]]]],[90,42,null,362079916232129,0,null],[90,43,null,890418174812018,0,null,[[0,[1]]]],[122,47,null,683310928217411,0,null,[[3,0]]],[-1,48,null,123518782323531,0,null,[[5,[67]],[16,true]]],[-1,44,null,403650054598993,0,null,[[1,[344]],[3,1]]]]],[0,0,false,null,886789451840796,90,[[143,36,null,0,false,false,false,993117671995252,null,[[10,20],[8,0],[7,[88]]]],[-1,51,null,0,false,false,false,889951903308171,null]],[[-1,44,null,682370337303181,0,null,[[1,[344]],[3,0]]],[-1,48,null,864978292701081,0,null,[[5,[67]],[16,false]]],[-1,32,null,904372695801655,2,null,[[0,[133]]]],[141,58,null,183903291535300,0,null,[[1,[22]],[0,[231]],[0,[16]],[3,0]]],[73,66,null,513777106926155,0,null],[76,47,null,100504233392605,0,null,[[3,0]]],[90,50,null,100006512558409,0,null,[[1,[400]],[3,1]]],[90,76,null,207828324356916,0,null,[[0,[399]],[0,[399]]]],[90,72,null,703991101585536,0,null,[[1,[307]],[0,[11]],[0,[401]]]],[90,72,null,921729408294564,0,null,[[1,[307]],[0,[1]],[0,[225]]]],[141,34,null,275581852011282,0,null,[[2,[\"喂养界面/喂食/啊！我怎么……完全变成方块了\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[122,43,null,671634633135670,0,null,[[0,[84]]]],[122,47,null,635936568716351,0,null,[[3,1]]],[-1,32,null,732479998820815,2,null,[[0,[105]]]],[122,43,null,944483938951187,0,null,[[0,[184]]]],[122,47,null,906699435321581,0,null,[[3,1]]],[-1,32,null,959256331524463,2,null,[[0,[133]]]],[122,43,null,245093710589316,0,null,[[0,[186]]]],[122,47,null,541620752066522,0,null,[[3,1]]],[-1,32,null,596188924626193,2,null,[[0,[64]]]],[90,42,null,106944921489590,0,null],[90,43,null,908527507688166,0,null,[[0,[1]]]],[122,47,null,768091393493076,0,null,[[3,0]]],[-1,32,null,230603089265735,2,null,[[0,[64]]]],[-1,48,null,653912012665588,0,null,[[5,[67]],[16,true]]],[-1,44,null,101357788574922,0,null,[[1,[344]],[3,1]]],[-1,37,null,912007519004922,0,null,[[6,\"结局1胖胖鲨\"]]]]]]],[3,[true,\"进食后体积变化\"],false,null,376952655539784,91,[[-1,20,null,0,false,false,false,0,false,[[1,[402]]]]],[],[[0,0,false,null,676769522794142,92,[[143,36,null,0,false,false,false,317698844934925,null,[[10,20],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,312863633467885,null]],[[90,72,null,968319621676972,0,null,[[1,[307]],[0,[11]],[0,[403]]]],[90,72,null,929415793132651,0,null,[[1,[307]],[0,[1]],[0,[117]]]],[92,76,null,713905347029959,0,null,[[0,[347]],[0,[225]]]]]],[0,0,false,null,978937862758883,93,[[143,36,null,0,false,false,false,116544417885459,null,[[10,20],[8,0],[7,[16]]]],[-1,51,null,0,false,false,false,769586574844315,null]],[[90,72,null,625198072989274,0,null,[[1,[307]],[0,[11]],[0,[404]]]],[90,72,null,804343282078811,0,null,[[1,[307]],[0,[1]],[0,[67]]]],[92,76,null,388043763693095,0,null,[[0,[405]],[0,[406]]]]]],[0,0,false,null,537003277673724,94,[[143,36,null,0,false,false,false,116083905833584,null,[[10,20],[8,0],[7,[13]]]],[-1,51,null,0,false,false,false,915799082848468,null]],[[90,72,null,285444488859982,0,null,[[1,[307]],[0,[11]],[0,[407]]]],[90,72,null,194960697726653,0,null,[[1,[307]],[0,[1]],[0,[189]]]],[92,76,null,356828690423424,0,null,[[0,[408]],[0,[409]]]]]],[0,0,false,null,803068812721765,95,[[143,36,null,0,false,false,false,429643946390361,null,[[10,20],[8,0],[7,[112]]]],[-1,51,null,0,false,false,false,235040800706168,null]],[[90,72,null,167062716895477,0,null,[[1,[307]],[0,[11]],[0,[410]]]],[90,72,null,140428727812143,0,null,[[1,[307]],[0,[1]],[0,[205]]]],[92,76,null,910570416315872,0,null,[[0,[406]],[0,[396]]]]]],[0,0,false,null,788644475762086,96,[[143,36,null,0,false,false,false,842768595227245,null,[[10,20],[8,0],[7,[114]]]],[-1,51,null,0,false,false,false,442936774423345,null]],[[90,72,null,458678585017605,0,null,[[1,[307]],[0,[11]],[0,[411]]]],[90,72,null,550519536222517,0,null,[[1,[307]],[0,[1]],[0,[355]]]],[92,76,null,385107663734063,0,null,[[0,[412]],[0,[412]]]]]],[0,0,false,null,152451004236995,97,[[143,36,null,0,false,false,false,364232267803474,null,[[10,20],[8,0],[7,[117]]]],[-1,51,null,0,false,false,false,969748549604970,null]],[[90,72,null,819049130804689,0,null,[[1,[307]],[0,[11]],[0,[413]]]],[90,72,null,958828840413726,0,null,[[1,[307]],[0,[1]],[0,[414]]]],[92,76,null,337447361343129,0,null,[[0,[415]],[0,[415]]]]]],[0,0,false,null,997573840239586,98,[[143,36,null,0,false,false,false,480055514320727,null,[[10,20],[8,0],[7,[55]]]],[-1,51,null,0,false,false,false,562382495744685,null]],[[90,72,null,517450225533203,0,null,[[1,[307]],[0,[11]],[0,[416]]]],[90,72,null,496626933812326,0,null,[[1,[307]],[0,[1]],[0,[406]]]],[92,76,null,402170759715786,0,null,[[0,[417]],[0,[414]]]]]]]]]]]],[3,[true,\"锻炼\"],false,null,359239688804254,99,[[-1,20,null,0,false,false,false,0,false,[[1,[317]]]]],[],[[3,[false,\"锻炼按钮\"],false,null,337783417924541,100,[[-1,20,null,0,false,false,false,0,false,[[1,[384]]]]],[],[[0,0,false,null,407944605429381,101,[[142,49,null,1,false,false,false,477873173254235,null,[[4,77]]]],[[143,38,null,335965970566005,0,null,[[10,21],[7,[1]]]],[82,33,\"正弦超快速抖动\",413875317512660,0,null,[[3,0]]],[-1,44,null,474442602808649,0,null,[[1,[313]],[3,0]]],[-1,44,null,304722333156201,0,null,[[1,[314]],[3,1]]],[-1,44,null,482166025235090,0,null,[[1,[308]],[3,0]]],[-1,32,null,511724028755467,2,null,[[0,[64]]]],[90,72,null,456418130262146,0,null,[[1,[307]],[0,[11]],[0,[150]]]],[90,72,null,240999474310105,0,null,[[1,[307]],[0,[1]],[0,[11]]]]]]]],[3,[true,\"鲨鱼锻炼\"],false,null,828885267435008,102,[[-1,20,null,0,false,false,false,0,false,[[1,[418]]]]],[],[[3,[true,\"锻炼动画和语音【初次锻炼】\"],false,null,793112129159257,103,[[-1,20,null,0,false,false,false,0,false,[[1,[419]]]]],[],[[0,0,false,null,685723088133288,104,[[142,49,null,1,false,false,false,109915772946993,null,[[4,77]]],[143,36,null,0,false,false,false,582812194137096,null,[[10,21],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,295720092621218,null,[[10,47],[8,2],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,594478356478948,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",544012427304060,0,null,[[3,1]]],[90,50,null,288144092410618,0,null,[[1,[420]],[3,1]]],[-1,32,null,725678055150517,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",714006443425739,0,null,[[3,0]]],[90,50,null,939167173225935,0,null,[[1,[342]],[3,1]]],[124,47,null,861749257097069,0,null,[[3,1]]],[124,43,null,849663742541089,0,null,[[0,[11]]]],[141,34,null,353270580784052,0,null,[[2,[\"喂养界面/锻炼/1 瘦下来咯\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[141,34,null,448397199397275,0,null,[[2,[\"喂养界面/锻炼/瘦下来咯 音效\",false]],[3,0],[0,[221]],[0,[11]],[1,[65]]]],[-1,32,null,528428073328247,2,null,[[0,[391]]]],[124,47,null,929573887325949,0,null,[[3,0]]],[90,42,null,790020742828880,0,null],[90,43,null,324011622574825,0,null,[[0,[1]]]],[78,47,null,590625268565825,0,null,[[3,1]]],[-1,44,null,548638963039900,0,null,[[1,[318]],[3,1]]],[-1,44,null,757381708482826,0,null,[[1,[421]],[3,1]]],[143,38,null,124679310381363,0,null,[[10,47],[7,[1]]]],[81,47,null,587470968795447,0,null,[[3,1]]],[-1,44,null,219093066071262,0,null,[[1,[321]],[3,1]]],[-1,48,null,920842344943331,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,154537252292217,105,[[142,49,null,1,false,false,false,743319790106086,null,[[4,77]]],[143,36,null,0,false,false,false,770263584241515,null,[[10,21],[8,0],[7,[16]]]],[143,36,null,0,false,false,false,174029952262836,null,[[10,47],[8,2],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,943342115792418,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",999581109314380,0,null,[[3,1]]],[90,50,null,119140918082544,0,null,[[1,[420]],[3,1]]],[-1,32,null,235749110845994,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",467063028334013,0,null,[[3,0]]],[90,50,null,475851066008950,0,null,[[1,[342]],[3,1]]],[124,47,null,710635277505211,0,null,[[3,1]]],[124,43,null,840458367178255,0,null,[[0,[1]]]],[141,34,null,910398095628089,0,null,[[2,[\"喂养界面/锻炼/这个东西是哑铃吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,557938320259224,2,null,[[0,[422]]]],[124,47,null,949339052974488,0,null,[[3,0]]],[90,42,null,832625393677052,0,null],[90,43,null,272290327041974,0,null,[[0,[1]]]],[143,38,null,757177582445654,0,null,[[10,47],[7,[1]]]],[-1,48,null,993946033556052,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,368501953122771,106,[[142,49,null,1,false,false,false,831161911657758,null,[[4,77]]],[143,36,null,0,false,false,false,587409902020758,null,[[10,21],[8,0],[7,[13]]]],[143,36,null,0,false,false,false,919957399181953,null,[[10,47],[8,2],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,434367143752749,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",908344115573487,0,null,[[3,1]]],[90,50,null,894139023241572,0,null,[[1,[420]],[3,1]]],[-1,32,null,109462884424165,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",972195235854105,0,null,[[3,0]]],[90,50,null,829265837436311,0,null,[[1,[342]],[3,1]]],[124,47,null,637449966973939,0,null,[[3,1]]],[124,43,null,299887952476840,0,null,[[0,[16]]]],[141,34,null,422585244304354,0,null,[[2,[\"喂养界面/锻炼/鲨鱼也要健身吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,210881397177212,2,null,[[0,[16]]]],[124,47,null,538613618682337,0,null,[[3,0]]],[90,42,null,354002554825625,0,null],[90,43,null,902332886390312,0,null,[[0,[1]]]],[143,38,null,887547980116796,0,null,[[10,47],[7,[1]]]],[-1,48,null,379304253702612,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,129468452845167,107,[[142,49,null,1,false,false,false,527462038542270,null,[[4,77]]],[143,36,null,0,false,false,false,576214615913718,null,[[10,21],[8,0],[7,[112]]]],[143,36,null,0,false,false,false,197078453482810,null,[[10,47],[8,2],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,442733156215834,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",152552373680585,0,null,[[3,1]]],[90,50,null,184943145325214,0,null,[[1,[420]],[3,1]]],[-1,32,null,400260618912077,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",527070413736745,0,null,[[3,0]]],[90,50,null,164523593524922,0,null,[[1,[342]],[3,1]]],[124,47,null,672740468367633,0,null,[[3,1]]],[124,43,null,321315416478385,0,null,[[0,[13]]]],[141,34,null,782519952924596,0,null,[[2,[\"喂养界面/锻炼/我要是去游泳，算不算健身？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,998488608537414,2,null,[[0,[423]]]],[124,47,null,691571300639199,0,null,[[3,0]]],[90,42,null,513407150422379,0,null],[90,43,null,952316994713755,0,null,[[0,[1]]]],[143,38,null,185349842205327,0,null,[[10,47],[7,[1]]]],[-1,48,null,481040342436300,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,431758820778213,108,[[142,49,null,1,false,false,false,160847425952548,null,[[4,77]]],[143,36,null,0,false,false,false,698784426228536,null,[[10,21],[8,0],[7,[114]]]],[143,36,null,0,false,false,false,634512150800965,null,[[10,47],[8,2],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,594514535785451,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",212585566188848,0,null,[[3,1]]],[90,50,null,800966008080226,0,null,[[1,[420]],[3,1]]],[-1,32,null,803884885330825,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",559399218564698,0,null,[[3,0]]],[90,50,null,798350006334501,0,null,[[1,[342]],[3,1]]],[124,47,null,407347726442384,0,null,[[3,1]]],[124,43,null,179105548446569,0,null,[[0,[112]]]],[141,34,null,653067460935916,0,null,[[2,[\"喂养界面/锻炼/我可以去海里帮你抓鱼！\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,177946965098063,2,null,[[0,[64]]]],[124,47,null,313886972397386,0,null,[[3,0]]],[90,42,null,628258456190764,0,null],[90,43,null,430405479954174,0,null,[[0,[1]]]],[143,38,null,607200836821725,0,null,[[10,47],[7,[1]]]],[-1,48,null,499458082484957,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,960598409066687,109,[[142,49,null,1,false,false,false,379029771182448,null,[[4,77]]],[143,36,null,0,false,false,false,999779880783829,null,[[10,21],[8,0],[7,[117]]]],[143,36,null,0,false,false,false,492067354501466,null,[[10,47],[8,2],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,506217786660097,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",899647993156466,0,null,[[3,1]]],[90,50,null,754936003047826,0,null,[[1,[420]],[3,1]]],[-1,32,null,445326254445567,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",189509383637572,0,null,[[3,0]]],[90,50,null,811294772894615,0,null,[[1,[345]],[3,1]]],[124,47,null,955490228904694,0,null,[[3,1]]],[124,43,null,548750380666781,0,null,[[0,[114]]]],[141,34,null,864593714054058,0,null,[[2,[\"喂养界面/锻炼/我是超级肌肉鲨！\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,576742927699113,2,null,[[0,[362]]]],[124,47,null,647664624964684,0,null,[[3,0]]],[90,50,null,202902231602624,0,null,[[1,[342]],[3,1]]],[90,42,null,754782802600089,0,null],[90,43,null,395415108308234,0,null,[[0,[1]]]],[143,38,null,122285882657596,0,null,[[10,47],[7,[1]]]],[-1,48,null,935766632854370,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,488456569164312,110,[[142,49,null,1,false,false,false,456169007879901,null,[[4,77]]],[143,36,null,0,false,false,false,886422635109877,null,[[10,21],[8,0],[7,[55]]]],[143,36,null,0,false,false,false,985497982334892,null,[[10,47],[8,2],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,103943803980129,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",727866991952023,0,null,[[3,1]]],[90,55,\"正弦锻炼\",648373217545598,0,null,[[0,[1]]]],[90,50,null,687088623992370,0,null,[[1,[424]],[3,1]]],[90,86,null,493284003925179,0,null,[[0,[13]]]],[-1,32,null,607957973267917,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",539055086129931,0,null,[[3,0]]],[90,50,null,928457200287814,0,null,[[1,[342]],[3,1]]],[124,47,null,137196731162611,0,null,[[3,1]]],[124,43,null,367300893624745,0,null,[[0,[117]]]],[141,34,null,430116726068142,0,null,[[2,[\"喂养界面/锻炼/身上有点酸疼……是正常的吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,914923138587085,2,null,[[0,[13]]]],[124,47,null,720054611308939,0,null,[[3,0]]],[90,42,null,803145700780902,0,null],[90,43,null,850493392504793,0,null,[[0,[1]]]],[143,38,null,130454759442326,0,null,[[10,47],[7,[1]]]],[-1,48,null,465227413711992,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,800861215170695,111,[[142,49,null,1,false,false,false,783214874144300,null,[[4,77]]],[143,36,null,0,false,false,false,830075968106511,null,[[10,21],[8,0],[7,[123]]]],[143,36,null,0,false,false,false,385450693463551,null,[[10,47],[8,2],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,875426147009601,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",152117145433600,0,null,[[3,1]]],[90,50,null,609631572319619,0,null,[[1,[425]],[3,1]]],[90,86,null,340184323779218,0,null,[[0,[16]]]],[90,55,\"正弦锻炼\",105175607091706,0,null,[[0,[16]]]],[-1,32,null,375912083087992,2,null,[[0,[16]]]],[90,33,\"正弦锻炼\",778054135334756,0,null,[[3,0]]],[90,50,null,451346624426025,0,null,[[1,[350]],[3,1]]],[124,47,null,487185493378292,0,null,[[3,1]]],[124,43,null,295962995481717,0,null,[[0,[55]]]],[141,34,null,923352855432052,0,null,[[2,[\"喂养界面/锻炼/身体有点痛，而且好困啊……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,494216684142616,2,null,[[0,[426]]]],[124,47,null,933449236713740,0,null,[[3,0]]],[90,42,null,676287172289578,0,null],[90,43,null,344232255324625,0,null,[[0,[1]]]],[143,38,null,129901872652644,0,null,[[10,47],[7,[1]]]],[-1,48,null,973562197742549,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,609347480678356,112,[[142,49,null,1,false,false,false,871213273212177,null,[[4,77]]],[143,36,null,0,false,false,false,486623780011863,null,[[10,21],[8,0],[7,[126]]]],[143,36,null,0,false,false,false,450518100756631,null,[[10,47],[8,2],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,669376700586985,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",464539030329593,0,null,[[3,1]]],[90,50,null,863154109869831,0,null,[[1,[427]],[3,1]]],[90,86,null,137876370929566,0,null,[[0,[64]]]],[90,55,\"正弦锻炼\",431101840735682,0,null,[[0,[16]]]],[-1,32,null,334614514257811,2,null,[[0,[16]]]],[90,33,\"正弦锻炼\",267938966757085,0,null,[[3,0]]],[90,50,null,656199333180304,0,null,[[1,[428]],[3,1]]],[90,33,\"正弦旋转\",808116879933594,0,null,[[3,1]]],[124,47,null,358686560312106,0,null,[[3,1]]],[124,43,null,373225452759437,0,null,[[0,[123]]]],[141,34,null,537282071228218,0,null,[[2,[\"喂养界面/锻炼/可以让我休息吗……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,707529262031787,2,null,[[0,[429]]]],[124,47,null,606100066300492,0,null,[[3,0]]],[90,42,null,648572733216209,0,null],[90,43,null,614049306666830,0,null,[[0,[1]]]],[143,38,null,996796347560217,0,null,[[10,47],[7,[1]]]],[-1,48,null,873570682594250,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,633529792021335,113,[[142,49,null,1,false,false,false,739691889949978,null,[[4,77]]],[143,36,null,0,false,false,false,685257415978207,null,[[10,21],[8,0],[7,[88]]]],[143,36,null,0,false,false,false,173077393403287,null,[[10,47],[8,2],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,143884008267667,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",734549443023969,0,null,[[3,1]]],[90,50,null,946417146354002,0,null,[[1,[427]],[3,1]]],[90,86,null,393205904818747,0,null,[[0,[290]]]],[90,55,\"正弦锻炼\",598042157514116,0,null,[[0,[13]]]],[141,58,null,461126797437326,0,null,[[1,[22]],[0,[231]],[0,[13]],[3,0]]],[-1,32,null,233483939564727,2,null,[[0,[13]]]],[143,38,null,646326994826287,0,null,[[10,47],[7,[1]]]],[90,50,null,704146848371607,0,null,[[1,[428]],[3,1]]],[-1,32,null,613697474896726,2,null,[[0,[62]]]],[124,47,null,410815065827689,0,null,[[3,1]]],[124,43,null,345186611289911,0,null,[[0,[126]]]],[141,34,null,724090291044544,0,null,[[2,[\"喂养界面/锻炼/我……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[90,42,null,986665397600960,0,null],[90,43,null,574428291273206,0,null,[[0,[11]]]],[90,55,\"正弦旋转\",671417284120971,0,null,[[0,[132]]]],[-1,32,null,505566774351043,2,null,[[0,[16]]]],[124,47,null,137324534481586,0,null,[[3,0]]],[90,56,\"正弦旋转\",622593629838115,0,null,[[0,[11]]]],[90,33,\"正弦旋转\",351290192482814,0,null,[[3,0]]],[90,33,\"正弦锻炼\",248884706280333,0,null,[[3,0]]],[90,33,\"正弦大小\",781246928774706,0,null,[[3,0]]],[141,34,null,291489768403804,0,null,[[2,[\"喂养界面/锻炼/累死 倒地\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[90,50,null,690412786385486,0,null,[[1,[430]],[3,1]]],[-1,32,null,881597260281572,2,null,[[0,[16]]]],[-1,37,null,402903624019761,0,null,[[6,\"结局5横纹肌溶解\"]]],[-1,48,null,952089585509313,0,null,[[5,[67]],[16,true]]]]]]],[3,[true,\"锻炼动画和语音【重复锻炼】\"],false,null,534443596474185,114,[[-1,20,null,0,false,false,false,0,false,[[1,[431]]]]],[],[[0,0,false,null,625277112973280,115,[[142,49,null,1,false,false,false,927196493972369,null,[[4,77]]],[143,36,null,0,false,false,false,769446848230325,null,[[10,21],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,577996916246075,null,[[10,47],[8,4],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,157501133773108,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",823035319626639,0,null,[[3,1]]],[90,50,null,555370611148718,0,null,[[1,[420]],[3,1]]],[-1,32,null,102970773955249,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",615456879962690,0,null,[[3,0]]],[90,50,null,360286974810627,0,null,[[1,[342]],[3,1]]],[90,42,null,449910262554514,0,null],[90,43,null,579249760319106,0,null,[[0,[1]]]],[78,47,null,629781283712063,0,null,[[3,1]]],[-1,44,null,958102791546623,0,null,[[1,[318]],[3,1]]],[-1,44,null,608522369654927,0,null,[[1,[421]],[3,1]]],[-1,48,null,930343486974098,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,850257198427554,116,[[142,49,null,1,false,false,false,184932825687702,null,[[4,77]]],[143,36,null,0,false,false,false,711860182649289,null,[[10,21],[8,0],[7,[16]]]],[143,36,null,0,false,false,false,126774607338465,null,[[10,47],[8,5],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,114381110254009,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",167142281235326,0,null,[[3,1]]],[90,50,null,732855616267367,0,null,[[1,[420]],[3,1]]],[-1,32,null,465109014757141,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",287502781612216,0,null,[[3,0]]],[90,50,null,621343716652506,0,null,[[1,[342]],[3,1]]],[90,42,null,658747287832817,0,null],[90,43,null,839943100097653,0,null,[[0,[1]]]],[-1,48,null,788596190070776,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,856169942472791,117,[[142,49,null,1,false,false,false,835600022734376,null,[[4,77]]],[143,36,null,0,false,false,false,786240786708667,null,[[10,21],[8,0],[7,[13]]]],[143,36,null,0,false,false,false,867305925684171,null,[[10,47],[8,5],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,883581554136671,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",394428390264742,0,null,[[3,1]]],[90,50,null,136319092799880,0,null,[[1,[420]],[3,1]]],[-1,32,null,471648348452252,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",437435906777799,0,null,[[3,0]]],[90,50,null,175096053844499,0,null,[[1,[342]],[3,1]]],[90,42,null,842110033118231,0,null],[90,43,null,228307680161549,0,null,[[0,[1]]]],[-1,48,null,354705168309104,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,220102896492786,118,[[142,49,null,1,false,false,false,658198299669550,null,[[4,77]]],[143,36,null,0,false,false,false,545001461541462,null,[[10,21],[8,0],[7,[112]]]],[143,36,null,0,false,false,false,866106964819526,null,[[10,47],[8,5],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,361852155817933,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",334314670847235,0,null,[[3,1]]],[90,50,null,623916351691049,0,null,[[1,[420]],[3,1]]],[-1,32,null,620581795037338,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",946529264285495,0,null,[[3,0]]],[90,50,null,258490947991654,0,null,[[1,[342]],[3,1]]],[90,42,null,992421570380042,0,null],[90,43,null,899418707844670,0,null,[[0,[1]]]],[-1,48,null,269285861239706,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,655849923385841,119,[[142,49,null,1,false,false,false,541221905199373,null,[[4,77]]],[143,36,null,0,false,false,false,509406012765422,null,[[10,21],[8,0],[7,[114]]]],[143,36,null,0,false,false,false,541510189070328,null,[[10,47],[8,5],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,436015598762595,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",533528660414900,0,null,[[3,1]]],[90,50,null,145961048114642,0,null,[[1,[420]],[3,1]]],[-1,32,null,374573839290448,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",932276519109673,0,null,[[3,0]]],[90,50,null,987624235902209,0,null,[[1,[342]],[3,1]]],[90,42,null,665592833388051,0,null],[90,43,null,970680723665943,0,null,[[0,[1]]]],[-1,48,null,676798037950763,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,320188140509749,120,[[142,49,null,1,false,false,false,150263635283492,null,[[4,77]]],[143,36,null,0,false,false,false,874717697568176,null,[[10,21],[8,0],[7,[117]]]],[143,36,null,0,false,false,false,562121275693783,null,[[10,47],[8,5],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,589409464193766,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",596213706223218,0,null,[[3,1]]],[90,50,null,484340183403560,0,null,[[1,[420]],[3,1]]],[-1,32,null,690171866193396,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",820838153546965,0,null,[[3,0]]],[90,50,null,310928394538948,0,null,[[1,[342]],[3,1]]],[90,42,null,998148222292982,0,null],[90,43,null,179856621487345,0,null,[[0,[1]]]],[-1,48,null,817676585383716,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,275063509945796,121,[[142,49,null,1,false,false,false,751507030277927,null,[[4,77]]],[143,36,null,0,false,false,false,653190136013576,null,[[10,21],[8,0],[7,[55]]]],[143,36,null,0,false,false,false,297558132139866,null,[[10,47],[8,5],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,115209483413696,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",206923868336830,0,null,[[3,1]]],[90,55,\"正弦锻炼\",289347840450102,0,null,[[0,[1]]]],[90,50,null,439725052710372,0,null,[[1,[424]],[3,1]]],[90,86,null,351107459334965,0,null,[[0,[13]]]],[-1,32,null,526231202139514,2,null,[[0,[64]]]],[90,33,\"正弦锻炼\",817203644378337,0,null,[[3,0]]],[90,50,null,655245367558609,0,null,[[1,[342]],[3,1]]],[90,42,null,754768672581810,0,null],[90,43,null,731152234341054,0,null,[[0,[1]]]],[-1,48,null,827982768718970,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,325916259085109,122,[[142,49,null,1,false,false,false,658268611252815,null,[[4,77]]],[143,36,null,0,false,false,false,374032743812401,null,[[10,21],[8,0],[7,[123]]]],[143,36,null,0,false,false,false,228690785552837,null,[[10,47],[8,5],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,937564242196944,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",332553192865305,0,null,[[3,1]]],[90,50,null,525235758356592,0,null,[[1,[425]],[3,1]]],[90,86,null,939565992113269,0,null,[[0,[16]]]],[90,55,\"正弦锻炼\",925315556251727,0,null,[[0,[16]]]],[-1,32,null,171513661321291,2,null,[[0,[16]]]],[90,33,\"正弦锻炼\",175729138363234,0,null,[[3,0]]],[90,50,null,792880399387588,0,null,[[1,[350]],[3,1]]],[124,47,null,474238128784745,0,null,[[3,1]]],[124,43,null,129291906785040,0,null,[[0,[55]]]],[141,34,null,666126948396348,0,null,[[2,[\"喂养界面/锻炼/身体有点痛，而且好困啊……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,331631007677097,2,null,[[0,[426]]]],[124,47,null,192928744089725,0,null,[[3,0]]],[90,42,null,217405480799161,0,null],[90,43,null,181769789508978,0,null,[[0,[1]]]],[-1,48,null,158347489986758,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,471960800182400,123,[[142,49,null,1,false,false,false,525210717357967,null,[[4,77]]],[143,36,null,0,false,false,false,713434861202084,null,[[10,21],[8,0],[7,[126]]]],[143,36,null,0,false,false,false,940288322703859,null,[[10,47],[8,5],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,808692050545897,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",728004005051784,0,null,[[3,1]]],[90,50,null,114710677691583,0,null,[[1,[427]],[3,1]]],[90,86,null,431675995302084,0,null,[[0,[64]]]],[90,55,\"正弦锻炼\",731645422336023,0,null,[[0,[16]]]],[-1,32,null,938347291885934,2,null,[[0,[16]]]],[90,33,\"正弦锻炼\",859704851278696,0,null,[[3,0]]],[90,50,null,180629423464972,0,null,[[1,[428]],[3,1]]],[90,33,\"正弦旋转\",924606735537144,0,null,[[3,1]]],[90,55,\"正弦旋转\",851910421151480,0,null,[[0,[13]]]],[124,47,null,833294888471567,0,null,[[3,1]]],[124,43,null,726329056243964,0,null,[[0,[123]]]],[141,34,null,783267427316191,0,null,[[2,[\"喂养界面/锻炼/可以让我休息吗……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,293499889916876,2,null,[[0,[429]]]],[124,47,null,828473283556064,0,null,[[3,0]]],[90,42,null,125808127833895,0,null],[90,43,null,574336647730870,0,null,[[0,[1]]]],[-1,48,null,215452684557891,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,997231337195226,124,[[142,49,null,1,false,false,false,942115680532677,null,[[4,77]]],[143,36,null,0,false,false,false,320514482307867,null,[[10,21],[8,0],[7,[88]]]],[143,36,null,0,false,false,false,332040290091287,null,[[10,47],[8,5],[7,[305,[2,143,false,21]]]]]],[[-1,48,null,592758822299191,0,null,[[5,[67]],[16,false]]],[90,33,\"正弦锻炼\",982117899490039,0,null,[[3,1]]],[90,50,null,351379998893979,0,null,[[1,[427]],[3,1]]],[90,86,null,354394908699875,0,null,[[0,[290]]]],[90,55,\"正弦锻炼\",471688996367062,0,null,[[0,[13]]]],[141,58,null,623912407862825,0,null,[[1,[22]],[0,[231]],[0,[13]],[3,0]]],[-1,32,null,267523351344844,2,null,[[0,[13]]]],[90,50,null,713282868145467,0,null,[[1,[428]],[3,1]]],[-1,32,null,768225450596279,2,null,[[0,[62]]]],[124,47,null,597876247688272,0,null,[[3,1]]],[124,43,null,300709404446652,0,null,[[0,[126]]]],[141,34,null,971493773998627,0,null,[[2,[\"喂养界面/锻炼/我……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[90,42,null,641712147087601,0,null],[90,43,null,143433388957757,0,null,[[0,[11]]]],[90,55,\"正弦旋转\",174063512968282,0,null,[[0,[132]]]],[-1,32,null,637738918319528,2,null,[[0,[16]]]],[124,47,null,274896953196713,0,null,[[3,0]]],[90,56,\"正弦旋转\",617560005137503,0,null,[[0,[11]]]],[90,33,\"正弦旋转\",459306888584628,0,null,[[3,0]]],[90,33,\"正弦锻炼\",724054928246138,0,null,[[3,0]]],[90,33,\"正弦大小\",572645854474872,0,null,[[3,0]]],[141,34,null,343136616708879,0,null,[[2,[\"喂养界面/锻炼/累死 倒地\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[90,50,null,655872649352555,0,null,[[1,[430]],[3,1]]],[-1,32,null,249234159518585,2,null,[[0,[16]]]],[-1,37,null,571271953731209,0,null,[[6,\"结局5横纹肌溶解\"]]],[-1,48,null,575928728960333,0,null,[[5,[67]],[16,true]]]]]]]]]]],[3,[true,\"睡眠\"],false,null,447169675604931,125,[[-1,20,null,0,false,false,false,0,false,[[1,[318]]]]],[],[[3,[false,\"睡眠按钮\"],false,null,918049098161289,126,[[-1,20,null,0,false,false,false,0,false,[[1,[421]]]]],[],[[0,0,false,null,641064464822268,127,[[142,49,null,1,false,false,false,224124554006302,null,[[4,78]]]],[[143,22,null,612337031279843,0,null,[[10,21],[7,[11]]]],[90,56,\"正弦旋转\",948429388122910,0,null,[[0,[11]]]],[90,33,\"正弦旋转\",947486963735658,0,null,[[3,0]]],[143,38,null,923209869916773,0,null,[[10,49],[7,[1]]]]]],[0,0,false,null,870582384468677,128,[[143,36,null,0,false,false,false,526608200851033,null,[[10,49],[8,5],[7,[55]]]]],[[78,71,\"BoundedDragDrop\",166340383367639,0,null,[[3,1]]]]]]],[3,[true,\"鲨鱼睡眠\"],false,null,347322175962456,129,[[-1,20,null,0,false,false,false,0,false,[[1,[432]]]]],[],[[0,0,false,null,663183145582960,130,[[142,49,null,1,false,false,false,259755068811203,null,[[4,78]]],[143,36,null,0,false,false,false,704661352826491,null,[[10,49],[8,0],[7,[1]]]]],[[-1,48,null,893330195864757,0,null,[[5,[67]],[16,false]]],[90,50,null,226099179360828,0,null,[[1,[318]],[3,1]]],[-1,32,null,998167676103117,2,null,[[0,[16]]]],[126,47,null,661327461901723,0,null,[[3,1]]],[126,43,null,728306064635910,0,null,[[0,[11]]]],[90,50,null,877861106036546,0,null,[[1,[342]],[3,1]]],[141,34,null,374801714047783,0,null,[[2,[\"喂养界面/睡眠/神清气爽！\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,298889069437668,2,null,[[0,[64]]]],[90,42,null,450591170106798,0,null],[90,43,null,416608425031567,0,null,[[0,[1]]]],[126,47,null,885178384980267,0,null,[[3,0]]],[-1,48,null,796275664539042,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,661194244092938,131,[[142,49,null,1,false,false,false,465017951904743,null,[[4,78]]],[143,36,null,0,false,false,false,280365794121171,null,[[10,49],[8,0],[7,[16]]]]],[[-1,48,null,306958072351806,0,null,[[5,[67]],[16,false]]],[90,50,null,366916901390513,0,null,[[1,[318]],[3,1]]],[-1,32,null,596947776553555,2,null,[[0,[16]]]],[126,47,null,717599118167010,0,null,[[3,1]]],[126,43,null,115502354779405,0,null,[[0,[1]]]],[90,50,null,799607056481029,0,null,[[1,[350]],[3,1]]],[141,34,null,944705844394365,0,null,[[2,[\"喂养界面/睡眠/我刚梦见自己被吃得只剩鱼骨了，吓死我了\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,987440950191035,2,null,[[0,[104]]]],[126,43,null,637205120806861,0,null,[[0,[16]]]],[90,50,null,443356691810058,0,null,[[1,[433]],[3,1]]],[-1,32,null,348181027382608,2,null,[[0,[290]]]],[90,42,null,807904060628849,0,null],[90,43,null,232411337615810,0,null,[[0,[1]]]],[126,47,null,350038003190879,0,null,[[3,0]]],[-1,48,null,171062211842968,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,483470501110081,132,[[142,49,null,1,false,false,false,928689660282184,null,[[4,78]]],[143,36,null,0,false,false,false,541028834948110,null,[[10,49],[8,0],[7,[13]]]]],[[-1,48,null,795910646858958,0,null,[[5,[67]],[16,false]]],[90,50,null,787350476340117,0,null,[[1,[318]],[3,1]]],[-1,32,null,101072689909618,2,null,[[0,[16]]]],[126,47,null,696804184275118,0,null,[[3,1]]],[126,43,null,421261521397263,0,null,[[0,[13]]]],[90,50,null,526296749678892,0,null,[[1,[434]],[3,1]]],[141,34,null,908311365783409,0,null,[[2,[\"喂养界面/睡眠/快睡着时突然腿抽搐一下是为什么呢？……嗯？我没有腿？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,841040640468450,2,null,[[0,[435]]]],[90,42,null,485763494727350,0,null],[90,43,null,906378863152021,0,null,[[0,[1]]]],[-1,32,null,263333801255741,2,null,[[0,[62]]]],[90,50,null,790571904743977,0,null,[[1,[434]],[3,1]]],[126,43,null,295528567216941,0,null,[[0,[112]]]],[-1,32,null,150931804044860,2,null,[[0,[62]]]],[90,42,null,887435807171763,0,null],[90,43,null,856007703893549,0,null,[[0,[1]]]],[-1,32,null,415731021996628,2,null,[[0,[436]]]],[90,50,null,709893282682769,0,null,[[1,[434]],[3,1]]],[-1,32,null,880681306259215,2,null,[[0,[1]]]],[90,42,null,453601343264227,0,null],[90,43,null,657985915671028,0,null,[[0,[1]]]],[126,47,null,993215751094854,0,null,[[3,0]]],[-1,48,null,990634540922722,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,933954513810317,133,[[142,49,null,1,false,false,false,715022329761666,null,[[4,78]]],[143,36,null,0,false,false,false,362813638481976,null,[[10,49],[8,0],[7,[112]]]]],[[-1,48,null,692263850068147,0,null,[[5,[67]],[16,false]]],[90,50,null,391444305014751,0,null,[[1,[318]],[3,1]]],[-1,32,null,520995343922468,2,null,[[0,[16]]]],[126,47,null,506199998501404,0,null,[[3,1]]],[126,43,null,336297924634262,0,null,[[0,[114]]]],[90,50,null,550150122369591,0,null,[[1,[342]],[3,1]]],[141,34,null,722995160109764,0,null,[[2,[\"喂养界面/睡眠/我睡觉时有冒泡泡吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,734292222149380,2,null,[[0,[64]]]],[90,42,null,670521734634721,0,null],[90,43,null,776886747569093,0,null,[[0,[1]]]],[126,47,null,646795169647439,0,null,[[3,0]]],[-1,48,null,554229426759799,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,317232240436721,134,[[142,49,null,1,false,false,false,711251411166690,null,[[4,78]]],[143,36,null,0,false,false,false,713155767384185,null,[[10,49],[8,0],[7,[114]]]]],[[-1,48,null,186526116233750,0,null,[[5,[67]],[16,false]]],[90,50,null,912288938823360,0,null,[[1,[318]],[3,1]]],[-1,32,null,123687550242782,2,null,[[0,[16]]]],[126,47,null,993994700755712,0,null,[[3,1]]],[126,43,null,463836386552715,0,null,[[0,[117]]]],[90,50,null,681002179191419,0,null,[[1,[382]],[3,1]]],[141,34,null,573886158271344,0,null,[[2,[\"喂养界面/睡眠/你不会一直在盯着我睡觉吧？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,855089692845713,2,null,[[0,[437]]]],[90,42,null,978150261376904,0,null],[90,43,null,277692258285993,0,null,[[0,[1]]]],[126,47,null,783662747481232,0,null,[[3,0]]],[-1,48,null,254308807149771,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,486539864486822,135,[[142,49,null,1,false,false,false,533228642792055,null,[[4,78]]],[143,36,null,0,false,false,false,153657724619996,null,[[10,49],[8,0],[7,[117]]]]],[[-1,48,null,318258771190871,0,null,[[5,[67]],[16,false]]],[90,50,null,991629595630365,0,null,[[1,[318]],[3,1]]],[-1,32,null,186037124577908,2,null,[[0,[16]]]],[126,47,null,814718726348002,0,null,[[3,1]]],[126,43,null,126735007313674,0,null,[[0,[55]]]],[90,50,null,883668980730907,0,null,[[1,[345]],[3,1]]],[141,34,null,707063582751888,0,null,[[2,[\"喂养界面/睡眠/完全睡饱啦！\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,465095843699364,2,null,[[0,[64]]]],[90,42,null,258155282318321,0,null],[90,43,null,365877538989541,0,null,[[0,[1]]]],[126,47,null,586770246063052,0,null,[[3,0]]],[-1,48,null,359085933397017,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,981531551743756,136,[[142,49,null,1,false,false,false,215217297773918,null,[[4,78]]],[143,36,null,0,false,false,false,851766627661541,null,[[10,49],[8,0],[7,[55]]]]],[[-1,48,null,939269799459855,0,null,[[5,[67]],[16,false]]],[126,47,null,106698921066150,0,null,[[3,1]]],[126,43,null,513202821688260,0,null,[[0,[123]]]],[90,50,null,196632595809014,0,null,[[1,[342]],[3,1]]],[141,34,null,897805514603212,0,null,[[2,[\"喂养界面/睡眠/我不困\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,32,null,272383292788697,2,null,[[0,[133]]]],[90,42,null,386409235049508,0,null],[90,43,null,160844388851775,0,null,[[0,[1]]]],[126,47,null,641232072402271,0,null,[[3,0]]],[78,55,\"正弦\",656604478761375,0,null,[[0,[133]]]],[78,33,\"正弦上下\",865309352286582,0,null,[[3,1]]],[-1,48,null,977432862522279,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,451787606682026,137,[[142,87,null,0,false,false,false,132564418675019,null,[[4,78]]],[143,36,null,0,false,false,false,511309467843337,null,[[10,49],[8,5],[7,[123]]]]],[[78,55,\"正弦\",738913442297344,0,null,[[0,[13]]]],[78,33,\"正弦上下\",710817502739496,0,null,[[3,0]]]]]]]]],[3,[true,\"关灯\"],false,null,298050109648934,138,[[-1,20,null,0,false,false,false,0,false,[[1,[319]]]]],[],[[3,[true,\"能关灯\"],false,null,375520296789724,139,[[-1,20,null,0,false,false,false,0,false,[[1,[332]]]]],[],[[0,0,false,null,389243028121696,140,[[142,49,null,1,false,false,false,295224182252916,null,[[4,79]]],[143,36,null,0,false,false,false,411062797108051,null,[[10,23],[8,0],[7,[11]]]]],[[143,22,null,157112914541682,0,null,[[10,25],[7,[8,[4,29]]]]],[-1,44,null,750058012221283,0,null,[[1,[331]],[3,1]]],[141,88,null,603198043313814,0,null,[[1,[22]],[3,0]]],[141,34,null,617680070971398,0,null,[[2,[\"开关灯/开关灯的音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[141,34,null,668126274587626,0,null,[[2,[\"开关灯/信号噪音\",false]],[3,0],[0,[11]],[0,[11]],[1,[56]]]],[-1,52,null,108351145620933,0,null,[[5,[195]],[3,1]]],[-1,48,null,784264330955936,0,null,[[5,[195]],[16,true]]],[-1,44,null,451399416469864,0,null,[[1,[309]],[3,0]]],[-1,32,null,910315032465738,2,null,[[0,[1]]]],[-1,44,null,713405878747279,0,null,[[1,[324]],[3,1]]],[-1,44,null,536918476735436,0,null,[[1,[438]],[3,1]]]]],[0,0,false,null,535441497845553,141,[[142,49,null,1,false,false,false,550903151683785,null,[[4,79]]],[143,36,null,0,false,false,false,100823167019994,null,[[10,23],[8,0],[7,[1]]]]],[[141,88,null,814698626634936,0,null,[[1,[22]],[3,0]]],[141,34,null,161290574049351,0,null,[[2,[\"开关灯/开关灯的音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[141,34,null,858342495349089,0,null,[[2,[\"开关灯/信号噪音\",false]],[3,0],[0,[11]],[0,[11]],[1,[56]]]],[-1,52,null,886643608424661,0,null,[[5,[195]],[3,1]]],[-1,44,null,200950989810438,0,null,[[1,[309]],[3,0]]],[-1,32,null,329901057241060,2,null,[[0,[133]]]],[90,33,\"正弦大小\",904933898854195,0,null,[[3,0]]],[90,33,\"正弦抖动\",445975599399537,0,null,[[3,0]]],[90,33,\"正弦旋转\",806167585093692,0,null,[[3,0]]],[90,33,\"正弦锻炼\",368614442250326,0,null,[[3,0]]],[90,50,null,642105542435829,0,null,[[1,[439]],[3,1]]],[101,47,null,843751621543728,0,null,[[3,0]]],[-1,74,null,825511272978086,0,null,[[5,[67]],[3,1],[1,[237]]]],[-1,74,null,677497370093731,0,null,[[5,[67]],[3,1],[1,[335]]]],[-1,74,null,585898739788216,0,null,[[5,[67]],[3,1],[1,[336]]]],[128,47,null,812243256855427,0,null,[[3,1]]],[128,43,null,651231374775475,0,null,[[0,[11]]]],[141,34,null,543943925785580,0,null,[[2,[\"开关灯/啊……（有些惨痛）2\",false]],[3,0],[0,[11]],[0,[11]],[1,[56]]]],[-1,32,null,367829980613868,2,null,[[0,[429]]]],[128,47,null,583232268576877,0,null,[[3,0]]],[-1,32,null,249274656583429,2,null,[[0,[1]]]],[141,34,null,729180363917200,0,null,[[2,[\"关灯后的BGM\",true]],[3,1],[0,[10]],[0,[11]],[1,[440]]]],[-1,44,null,156860939325500,0,null,[[1,[324]],[3,1]]],[-1,44,null,886404644066543,0,null,[[1,[334]],[3,1]]],[-1,48,null,646408931700762,0,null,[[5,[195]],[16,true]]]]]]],[3,[false,\"不能再关灯\"],false,null,936883745699201,142,[[-1,20,null,0,false,false,false,0,false,[[1,[333]]]]],[],[[0,0,false,null,785417642095501,143,[[142,49,null,1,false,false,false,600127717640410,null,[[4,79]]]],[[-1,48,null,337039829390851,0,null,[[5,[67]],[16,false]]],[141,34,null,308277537752764,0,null,[[2,[\"开关灯/开关灯的音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,226769922176069,2,null,[[0,[9]]]],[141,34,null,232213432448755,0,null,[[2,[\"开关灯/我害怕关灯……\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[90,50,null,162616193148183,0,null,[[1,[350]],[3,1]]],[130,47,null,669098479906502,0,null,[[3,1]]],[-1,32,null,504473263324287,2,null,[[0,[64]]]],[90,42,null,354069578326613,0,null],[90,43,null,844896454885641,0,null,[[0,[1]]]],[130,47,null,282270235424354,0,null,[[3,0]]],[-1,48,null,855192916727199,0,null,[[5,[67]],[16,true]]]]],[0,0,false,null,244076138023014,144,[[-1,23,null,0,false,false,false,714985387549712,null]],[[128,47,null,288785213735775,0,null,[[3,0]]],[141,41,null,936322045913628,0,null,[[1,[441]]]]]]]]]],[3,[true,\"垃圾桶\"],false,null,218885446723914,145,[[-1,20,null,0,false,false,false,0,false,[[1,[320]]]]],[],[[3,[true,\"实际垃圾桶\"],false,null,778948228216258,146,[[-1,20,null,0,false,false,false,0,false,[[1,[442]]]]],[],[[3,[true,\"垃圾桶删ZZ\"],false,null,349159811522396,147,[[-1,20,null,0,false,false,false,0,false,[[1,[443]]]]],[],[[0,0,false,null,657183093880773,148,[[75,82,null,0,false,false,false,144767124766918,null,[[4,78]]],[143,36,null,0,false,false,false,402780642073184,null,[[10,51],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,593985584196241,null]],[[-1,48,null,556685508641056,0,null,[[5,[67]],[16,false]]],[141,41,null,287562462751221,0,null,[[1,[22]]]],[141,41,null,707191346142219,0,null,[[1,[65]]]],[78,66,null,818250735235223,0,null],[75,71,\"BoundedDragDrop\",776394128847556,0,null,[[3,0]]],[141,34,null,335559712139764,0,null,[[2,[\"喂养界面/垃圾桶/ZZ被删\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[75,43,null,916793695589834,0,null,[[0,[1]]]],[-1,32,null,506199954549944,2,null,[[0,[60]]]],[75,43,null,965308077154555,0,null,[[0,[16]]]],[-1,32,null,724102688252599,2,null,[[0,[6]]]],[75,43,null,211075322482073,0,null,[[0,[13]]]],[-1,32,null,382439275955478,2,null,[[0,[290]]]],[75,43,null,972113755187008,0,null,[[0,[11]]]],[141,34,null,836603433132902,0,null,[[2,[\"喂养界面/垃圾桶/删除音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,300879288616119,2,null,[[0,[1]]]],[90,33,\"正弦抖动\",462295854988304,0,null,[[3,1]]],[141,34,null,808706715417508,0,null,[[2,[\"喂养界面/垃圾桶/啊！你把重要的东西删掉了……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[136,47,null,681241362736009,0,null,[[3,1]]],[136,43,null,728459553305862,0,null,[[0,[11]]]],[90,50,null,265846780862863,0,null,[[1,[444]],[3,1]]],[-1,32,null,530159417237955,2,null,[[0,[62]]]],[90,33,\"正弦抖动\",261089331514930,0,null,[[3,0]]],[90,42,null,312461889623939,0,null],[90,43,null,541874439863520,0,null,[[0,[1]]]],[-1,32,null,238243661894517,2,null,[[0,[445]]]],[90,50,null,846873215111749,0,null,[[1,[444]],[3,1]]],[-1,32,null,505552426895239,2,null,[[0,[377]]]],[90,50,null,496788479164076,0,null,[[1,[350]],[3,1]]],[136,43,null,361118248647835,0,null,[[0,[1]]]],[-1,32,null,505406592405848,2,null,[[0,[16]]]],[90,50,null,487977569909057,0,null,[[1,[352]],[3,1]]],[136,43,null,847452931805491,0,null,[[0,[16]]]],[-1,32,null,594302002122620,2,null,[[0,[362]]]],[-1,37,null,169352874978173,0,null,[[6,\"结局6失眠的鲨鱼\"]]]]]]],[3,[true,\"垃圾桶删东西\"],false,null,913283597753214,149,[[-1,20,null,0,false,false,false,0,false,[[1,[446]]]]],[],[[0,0,false,null,189438945983296,150,[[75,82,null,0,false,false,false,182913877864319,null,[[4,98]]],[143,36,null,0,false,false,false,715142605671525,null,[[10,51],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,578050732634776,null]],[[87,66,null,599790032251204,0,null],[98,66,null,974440103896914,0,null],[141,34,null,775892766323799,0,null,[[2,[\"喂养界面/垃圾桶/删除音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]]]],[0,0,false,null,414353666880200,151,[[75,82,null,0,false,false,false,651477806801192,null,[[4,89]]],[143,36,null,0,false,false,false,393478310966701,null,[[10,51],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,965397496352262,null]],[[89,66,null,478931739530396,0,null],[141,34,null,442295751616919,0,null,[[2,[\"喂养界面/垃圾桶/删除音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]]]],[0,0,false,null,394450750778461,152,[[75,82,null,0,false,false,false,400947374461457,null,[[4,95]]],[143,36,null,0,false,false,false,242031895658474,null,[[10,51],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,759003345825666,null]],[[85,43,null,390671398688264,0,null,[[0,[1]]]],[95,66,null,121706564413645,0,null],[141,34,null,851454037417903,0,null,[[2,[\"喂养界面/垃圾桶/删除音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,119279669462597,0,null,[[10,52],[7,[1]]]]]],[0,0,false,null,170989835719730,153,[[75,82,null,0,false,false,false,683080847445343,null,[[4,96]]],[143,36,null,0,false,false,false,925450831902052,null,[[10,51],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,344991942149459,null]],[[93,66,null,410416225876995,0,null],[96,66,null,334610961570955,0,null],[141,34,null,665757171628045,0,null,[[2,[\"喂养界面/垃圾桶/删除音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]]]],[0,0,false,null,560770740175041,154,[[75,82,null,0,false,false,false,560658417985501,null,[[4,97]]],[143,36,null,0,false,false,false,997770313017025,null,[[10,51],[8,0],[7,[1]]]],[-1,51,null,0,false,false,false,454812469639200,null]],[[94,66,null,107301200948434,0,null],[97,66,null,525064839400375,0,null],[141,34,null,940372120816822,0,null,[[2,[\"喂养界面/垃圾桶/删除音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]]]],[0,0,false,null,876659072005731,155,[[75,82,null,0,false,false,false,956996366761128,null,[[4,73]]],[143,36,null,0,false,false,false,987113440665185,null,[[10,51],[8,0],[7,[1]]]]],[[73,66,null,162878644525641,0,null],[141,34,null,529159834112788,0,null,[[2,[\"喂养界面/垃圾桶/删除音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]]]],[0,0,false,null,308621077148014,156,[[75,82,null,0,false,false,false,119944612383174,null,[[4,100]]],[143,36,null,0,false,false,false,840125943646679,null,[[10,51],[8,0],[7,[1]]]]],[[100,66,null,470238160921826,0,null],[141,34,null,499684791052797,0,null,[[2,[\"喂养界面/垃圾桶/删除音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]]]]]],[3,[true,\"触碰让垃圾桶生效\"],false,null,676505761926566,157,[[-1,20,null,0,false,false,false,0,false,[[1,[447]]]]],[],[[0,0,false,null,907053232867653,158,[[142,87,null,0,false,false,false,543317245660503,null,[[4,75]]]],[[75,89,\"子弹\",903002205088415,0,null,[[3,0]]],[143,22,null,159231601417497,0,null,[[10,51],[7,[1]]]]]],[0,0,false,null,351452996356454,159,[[142,49,null,1,false,false,false,378961739499085,null,[[4,75]]]],[[75,89,\"子弹\",548989363804380,0,null,[[3,0]]],[143,22,null,427840546340044,0,null,[[10,51],[7,[1]]]]]]]]]],[3,[true,\"垃圾桶按钮\"],false,null,645133408726408,160,[[-1,20,null,0,false,false,false,0,false,[[1,[322]]]]],[],[[3,[true,\"创造垃圾桶\"],false,null,961654956144210,161,[[-1,20,null,0,false,false,false,0,false,[[1,[325]]]]],[],[[0,0,false,null,450592856579268,162,[[142,49,null,1,false,false,false,531463129931326,null,[[4,80]]]],[[-1,85,null,942427803900065,256,null,[[4,75],[5,[126]],[0,[448]],[0,[449]],[16,false],[20,[14]]]],[75,42,null,547525183043502,0,null],[75,43,null,253316979252304,0,null,[[0,[11]]]],[-1,44,null,509970778191580,0,null,[[1,[325]],[3,0]]]]]]]]]]],[3,[true,\"出门按钮\"],false,null,822001477868944,163,[[-1,20,null,0,false,false,false,0,false,[[1,[321]]]]],[],[[0,0,false,null,169266879741371,164,[[142,49,null,1,false,false,false,229109121986424,null,[[4,81]]]],[[141,34,null,584839830213812,0,null,[[2,[\"室外/出门和回家音效\",false]],[3,0],[0,[13]],[0,[11]],[1,[14]]]],[-1,52,null,841256363782858,0,null,[[5,[186]],[3,1]]],[-1,48,null,714245630509261,0,null,[[5,[186]],[16,true]]],[-1,44,null,714997562368911,0,null,[[1,[309]],[3,0]]],[-1,44,null,948178299496718,0,null,[[1,[450]],[3,1]]],[112,42,null,164993531116095,0,null],[112,43,null,206549776746090,0,null,[[0,[1]]]],[141,34,null,769019621957801,0,null,[[2,[\"室外/大自然鸟叫\",false]],[3,1],[0,[11]],[0,[11]],[1,[128]]]]]]]],[3,[false,\"方形鲨鱼\"],false,null,764717062157018,165,[[-1,20,null,0,false,false,false,0,false,[[1,[323]]]]],[],[[0,0,false,null,620968523652081,166,[[142,49,null,1,false,false,false,711463614379308,null,[[4,82]]]],[[-1,44,null,798310999436332,0,null,[[1,[337]],[3,0]]],[100,73,null,745912694858919,0,null,[[5,[112]]]],[-1,48,null,136341424298871,0,null,[[5,[67]],[16,false]]],[90,90,null,798638003821124,0,null],[82,47,null,288625026617308,0,null,[[3,0]]],[-1,44,null,854387155517377,0,null,[[1,[309]],[3,0]]],[-1,44,null,223254225077154,0,null,[[1,[323]],[3,0]]],[141,41,null,439998324572105,0,null,[[1,[22]]]],[33,91,\"移动到\",236059853840288,0,null,[[0,[355]]]],[-1,32,null,975324595769356,2,null,[[0,[62]]]],[141,34,null,782252736713229,0,null,[[2,[\"喂养界面/喂食/嗝兹嗝兹_01\",false]],[3,0],[0,[11]],[0,[355]],[1,[22]]]],[33,40,\"移动到\",733115042670563,0,null,[[0,[451]],[0,[396]],[3,0]]],[-1,32,null,575001327557185,2,null,[[0,[16]]]],[90,40,\"移动到\",554165371585828,0,null,[[0,[96]],[0,[76]],[3,0]]],[-1,32,null,137017001507528,2,null,[[0,[64]]]],[90,50,null,322234058758869,0,null,[[1,[452]],[3,1]]],[90,90,null,164621325024860,0,null],[141,34,null,398864100470266,0,null,[[2,[\"喂养界面/喂食/方形鲨鱼\",false]],[3,0],[0,[11]],[0,[11]],[1,[22]]]],[141,34,null,463572909384759,0,null,[[2,[\"喂养界面/喂食/方形鲨鱼_BGM\",false]],[3,0],[0,[11]],[0,[11]],[1,[22]]]],[125,47,null,395699179466143,0,null,[[3,1]]],[125,43,null,445422030150259,0,null,[[0,[11]]]],[-1,32,null,834031813813506,2,null,[[0,[256]]]],[90,42,null,434380836184487,0,null],[90,43,null,938545163783975,0,null,[[0,[1]]]],[33,50,null,208147760614948,0,null,[[1,[453]],[3,1]]],[33,90,null,123016910886148,0,null],[125,43,null,951858107536636,0,null,[[0,[1]]]],[-1,32,null,942739377636439,2,null,[[0,[437]]]],[125,43,null,110517648759684,0,null,[[0,[16]]]],[-1,32,null,138989055073539,2,null,[[0,[377]]]],[33,43,null,510601683477313,0,null,[[0,[1]]]],[33,42,null,747526666334684,0,null],[90,90,null,407469421012256,0,null],[90,33,\"正弦抖动\",185028006891299,0,null,[[3,1]]],[90,50,null,699790611178444,0,null,[[1,[454]],[3,1]]],[125,43,null,943440862275678,0,null,[[0,[13]]]],[-1,32,null,482624567041091,2,null,[[0,[422]]]],[90,42,null,421398161016444,0,null],[90,43,null,839860456373248,0,null,[[0,[1]]]],[90,33,\"正弦抖动\",157752245627035,0,null,[[3,0]]],[33,90,null,648434860693689,0,null],[33,33,\"正弦\",289406392139426,0,null,[[3,1]]],[33,50,null,972139958514900,0,null,[[1,[455]],[3,1]]],[125,43,null,234664807735723,0,null,[[0,[112]]]],[-1,32,null,989662720445850,2,null,[[0,[290]]]],[33,50,null,898384979397101,0,null,[[1,[456]],[3,1]]],[125,43,null,666877043034326,0,null,[[0,[114]]]],[-1,32,null,124671532413055,2,null,[[0,[132]]]],[33,50,null,471515498764023,0,null,[[1,[457]],[3,1]]],[33,43,null,154976735160958,0,null,[[0,[1]]]],[33,42,null,512883420361012,0,null],[33,33,\"正弦\",629547380996297,0,null,[[3,0]]],[90,90,null,227922146724505,0,null],[125,43,null,960617292797606,0,null,[[0,[117]]]],[90,50,null,505425882210961,0,null,[[1,[458]],[3,1]]],[90,42,null,403337658877739,0,null],[90,43,null,241835224680269,0,null,[[0,[11]]]],[-1,32,null,255404460581274,2,null,[[0,[367]]]],[90,43,null,444800607272811,0,null,[[0,[1]]]],[-1,32,null,500902610577132,2,null,[[0,[436]]]],[90,43,null,920249056602778,0,null,[[0,[13]]]],[-1,32,null,800250325953454,2,null,[[0,[64]]]],[90,43,null,717123830919895,0,null,[[0,[112]]]],[90,40,\"移动到\",120939612564356,0,null,[[0,[369]],[0,[76]],[3,0]]],[-1,32,null,998216102794292,2,null,[[0,[1]]]],[33,91,\"移动到\",570692803477877,0,null,[[0,[372]]]],[33,50,null,112210559947211,0,null,[[1,[459]],[3,1]]],[33,40,\"移动到\",940625753571945,0,null,[[0,[460]],[0,[396]],[3,0]]],[125,47,null,590567307335816,0,null,[[3,0]]],[-1,32,null,424835926955123,2,null,[[0,[16]]]],[-1,48,null,915254477836899,0,null,[[5,[67]],[16,true]]],[-1,37,null,170506930500834,0,null,[[6,\"结局2口碑太差的饲主\"]]]]]]]]],[3,[true,\"室外\"],false,null,700865651917386,167,[[-1,20,null,0,false,false,false,0,false,[[1,[461]]]]],[],[[3,[true,\"室外场景构建\"],false,null,881945257236649,168,[[-1,20,null,0,false,false,false,0,false,[[1,[462]]]]],[],[[0,0,false,null,552414264700205,169,[[-1,21,null,1,false,false,false,571955570139961,null]],[[105,42,null,624734474496231,0,null],[103,42,null,854461502269982,0,null],[104,42,null,677781894694360,0,null],[106,42,null,693838957970980,0,null],[112,47,null,518603932883339,0,null,[[3,0]]],[-1,44,null,252163482369032,0,null,[[1,[463]],[3,0]]],[-1,44,null,947111795480460,0,null,[[1,[464]],[3,0]]],[-1,44,null,131079067045923,0,null,[[1,[465]],[3,1]]],[-1,44,null,383954947209095,0,null,[[1,[466]],[3,0]]],[-1,44,null,882961968569290,0,null,[[1,[467]],[3,0]]],[-1,44,null,700595934888129,0,null,[[1,[468]],[3,1]]],[113,47,null,193663199354031,0,null,[[3,0]]],[113,42,null,611401659625383,0,null],[113,43,null,143047205293546,0,null,[[0,[11]]]],[132,47,null,962926793972953,0,null,[[3,0]]],[143,22,null,275395281147843,0,null,[[10,54],[7,[11]]]],[143,22,null,852363356237457,0,null,[[10,22],[7,[11]]]]]],[0,0,false,null,419126650508057,170,[[143,36,null,0,false,false,false,583172761308353,null,[[10,17],[8,0],[7,[1]]]]],[[105,43,null,845348138684527,0,null,[[0,[1]]]],[103,43,null,967594745774450,0,null,[[0,[1]]]],[104,43,null,380433916205181,0,null,[[0,[1]]]],[106,43,null,313643007251774,0,null,[[0,[1]]]]]],[3,[true,\"发现物出现\"],false,null,789215990069507,171,[[-1,20,null,0,false,false,false,0,false,[[1,[469]]]]],[],[[0,0,false,null,388225704525242,172,[[143,36,null,0,false,false,false,614274395717412,null,[[10,18],[8,0],[7,[1]]]]],[[112,47,null,461443297604912,0,null,[[3,1]]],[-1,44,null,285106012575769,0,null,[[1,[463]],[3,1]]],[-1,44,null,485414377443403,0,null,[[1,[464]],[3,1]]],[-1,44,null,206565042157223,0,null,[[1,[465]],[3,0]]]]],[0,0,false,null,752671345505335,173,[[143,36,null,0,false,false,false,379654591667112,null,[[10,56],[8,0],[7,[1]]]]],[[113,47,null,376792376396099,0,null,[[3,1]]],[-1,44,null,379831915761708,0,null,[[1,[467]],[3,1]]]]],[0,0,false,null,681735440132169,174,[[143,36,null,0,false,false,false,565435277753792,null,[[10,19],[8,0],[7,[1]]]]],[[115,47,null,859508177746067,0,null,[[3,1]]],[-1,44,null,495490062136742,0,null,[[1,[470]],[3,1]]]]]]]]],[3,[false,\"室外场景功能\"],false,null,923063288449744,175,[[-1,20,null,0,false,false,false,0,false,[[1,[450]]]]],[],[[3,[false,\"饿死的鲨鱼\"],false,null,550822806079482,176,[[-1,20,null,0,false,false,false,0,false,[[1,[470]]]]],[],[[0,0,false,null,637267752307764,177,[[142,49,null,1,false,false,false,590562910326812,null,[[4,112]]]],[[137,47,null,377108484261949,0,null,[[3,1]]],[-1,32,null,913670671931418,2,null,[[0,[16]]]],[137,47,null,219119546922425,0,null,[[3,0]]]]]]],[3,[true,\"点击星星掉落\"],false,null,531366421321276,178,[[-1,20,null,0,false,false,false,0,false,[[1,[471]]]]],[],[[0,0,false,null,555584431759625,179,[[142,49,null,1,false,false,false,171844842244681,null,[[4,108]]]],[[108,92,\"物理\",859994714447562,0,null,[[3,1]]]]],[0,0,false,null,994961489379885,180,[[142,49,null,1,false,false,false,759651585979830,null,[[4,107]]]],[[107,92,\"物理\",909886257683681,0,null,[[3,1]]]]],[0,0,false,null,308721437611988,181,[[142,49,null,1,false,false,false,767809369275160,null,[[4,109]]]],[[109,92,\"物理\",203431894414048,0,null,[[3,1]]]]],[0,0,false,null,663474424256436,182,[[142,49,null,1,false,false,false,642794093278366,null,[[4,110]]]],[[110,92,\"物理\",696619961163412,0,null,[[3,1]]]]],[0,0,false,null,870192595716722,183,[[142,49,null,1,false,false,false,994153692083541,null,[[4,111]]]],[[111,92,\"物理\",686367671763944,0,null,[[3,1]]]]]]],[3,[true,\"采花\"],false,null,259927269321423,184,[[-1,20,null,0,false,false,false,0,false,[[1,[468]]]]],[],[[0,0,false,null,808315427371439,185,[[142,49,null,1,false,false,false,895721283330399,null,[[4,114]]],[143,36,null,0,false,false,false,838289018297069,null,[[10,22],[8,0],[7,[11]]]]],[[-1,48,null,460701491588625,0,null,[[5,[186]],[16,false]]],[-1,85,null,176701650583823,256,null,[[4,100],[5,[126]],[0,[202]],[0,[472]],[16,false],[20,[14]]]],[-1,44,null,627972459791257,0,null,[[1,[468]],[3,0]]],[114,33,\"正弦\",814849276772631,0,null,[[3,0]]],[114,33,\"正弦2\",824250985085174,0,null,[[3,0]]],[141,34,null,878815873596590,0,null,[[2,[\"结局通用音效/获得结局\",false]],[3,0],[0,[114]],[0,[11]],[1,[14]]]],[114,53,\"补间动画\",931312634103484,1,null,[[1,[14]],[3,1],[0,[473]],[0,[1]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,380813723205529,2,null,[[0,[1]]]],[114,31,\"补间动画\",869428425479152,1,null,[[1,[14]],[3,0],[0,[96]],[0,[474]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[114,53,\"补间动画\",193639848870223,1,null,[[1,[14]],[3,5],[0,[11]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[143,22,null,604554066251308,0,null,[[10,22],[7,[1]]]],[-1,48,null,968369399585701,0,null,[[5,[186]],[16,true]]]]]]],[3,[false,\"信\"],false,null,702650615234625,186,[[-1,20,null,0,false,false,false,0,false,[[1,[467]]]]],[],[[0,0,false,null,929426424755808,187,[[142,49,null,1,false,false,false,771740708688773,null,[[4,113]]],[143,36,null,0,false,false,false,585266313758023,null,[[10,57],[8,0],[7,[11]]]]],[[141,34,null,258246117788034,0,null,[[2,[\"室外/展开信\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[113,42,null,984694083819385,0,null],[113,43,null,345473087852076,0,null,[[0,[1]]]],[-1,32,null,126899470468928,2,null,[[0,[9]]]],[143,22,null,754377007577189,0,null,[[10,57],[7,[1]]]]]],[0,0,false,null,485199245983905,188,[[142,49,null,1,false,false,false,189426003027277,null,[[4,113]]],[143,36,null,0,false,false,false,762592935658125,null,[[10,57],[8,0],[7,[1]]]]],[[141,34,null,878957353878466,0,null,[[2,[\"室外/展开信\",false]],[3,0],[0,[10]],[0,[11]],[1,[14]]]],[113,42,null,354454284153497,0,null],[113,43,null,921468990031565,0,null,[[0,[11]]]],[-1,32,null,662870873915840,2,null,[[0,[9]]]],[143,22,null,728507074618382,0,null,[[10,57],[7,[11]]]]]]]],[3,[true,\"回家\"],false,null,977333348765663,189,[[-1,20,null,0,false,false,false,0,false,[[1,[475]]]]],[],[[3,[true,\"普通回家\"],false,null,592699096405823,190,[[-1,20,null,0,false,false,false,0,false,[[1,[465]]]]],[],[[0,0,false,null,690684368211076,191,[[142,49,null,1,false,false,false,388147439185321,null,[[4,116]]]],[[141,34,null,897832066393430,0,null,[[2,[\"室外/出门和回家音效\",false]],[3,0],[0,[13]],[0,[11]],[1,[14]]]],[79,47,null,532882637740957,0,null,[[3,1]]],[-1,44,null,357199819206977,0,null,[[1,[319]],[3,1]]],[-1,52,null,945898231879737,0,null,[[5,[186]],[3,0]]],[-1,48,null,189823772758521,0,null,[[5,[186]],[16,false]]],[81,47,null,744692457100837,0,null,[[3,1]]],[-1,44,null,515068677890190,0,null,[[1,[309]],[3,1]]],[-1,44,null,600188207703429,0,null,[[1,[450]],[3,0]]],[141,41,null,784410645856257,0,null,[[1,[128]]]]]]]],[3,[false,\"你明明看见我了\"],false,null,173915265815219,192,[[-1,20,null,0,false,false,false,0,false,[[1,[464]]]]],[],[[0,0,false,null,305142216953955,193,[[142,49,null,1,false,false,false,666045002271167,null,[[4,116]]]],[[-1,48,null,178744121803464,0,null,[[5,[186]],[16,false]]],[-1,32,null,331071622364146,2,null,[[0,[133]]]],[112,50,null,748296060746372,0,null,[[1,[476]],[3,1]]],[141,34,null,307945806151701,0,null,[[2,[\"室外/你明明看到我了……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[132,47,null,802592234852940,0,null,[[3,1]]],[132,43,null,175209400028158,0,null,[[0,[1]]]],[-1,32,null,612217449859248,2,null,[[0,[64]]]],[112,42,null,741101421596321,0,null],[112,43,null,286212323798894,0,null,[[0,[1]]]],[-1,32,null,209695681053676,2,null,[[0,[133]]]],[132,47,null,214186936738051,0,null,[[3,0]]],[143,22,null,160684360012030,0,null,[[10,18],[7,[11]]]],[143,22,null,461364286692023,0,null,[[10,56],[7,[1]]]],[141,34,null,376737147490422,0,null,[[2,[\"室外/出门和回家音效\",false]],[3,0],[0,[13]],[0,[11]],[1,[14]]]],[79,47,null,320116011328315,0,null,[[3,1]]],[-1,44,null,655063241541021,0,null,[[1,[319]],[3,1]]],[-1,52,null,564047788241588,0,null,[[5,[186]],[3,0]]],[-1,48,null,836786198304437,0,null,[[5,[186]],[16,false]]],[81,47,null,844737722019747,0,null,[[3,1]]],[-1,44,null,449982056392907,0,null,[[1,[309]],[3,1]]],[-1,44,null,855506189054347,0,null,[[1,[450]],[3,0]]],[141,41,null,909852311055775,0,null,[[1,[128]]]],[113,47,null,418117689686778,0,null,[[3,1]]],[-1,44,null,161356138158342,0,null,[[1,[467]],[3,1]]],[112,47,null,481953154916194,0,null,[[3,0]]],[-1,44,null,164423690625252,0,null,[[1,[463]],[3,0]]],[-1,44,null,820820596345569,0,null,[[1,[464]],[3,0]]],[-1,44,null,274242675013001,0,null,[[1,[465]],[3,1]]]]]]],[3,[false,\"回家进入ED7\"],false,null,999856429440055,194,[[-1,20,null,0,false,false,false,0,false,[[1,[466]]]]],[],[[0,0,false,null,303817096869608,195,[[142,49,null,1,false,false,false,339582495764254,null,[[4,116]]]],[[141,34,null,257861143777592,0,null,[[2,[\"室外/出门和回家音效\",false]],[3,0],[0,[13]],[0,[11]],[1,[14]]]],[143,22,null,704358783119790,0,null,[[10,55],[7,[1]]]],[79,47,null,748496114208454,0,null,[[3,1]]],[-1,44,null,812128733126473,0,null,[[1,[319]],[3,1]]],[-1,52,null,491316508382651,0,null,[[5,[186]],[3,0]]],[-1,48,null,544335489421965,0,null,[[5,[186]],[16,false]]],[81,47,null,666929415031930,0,null,[[3,1]]],[-1,44,null,586723322039550,0,null,[[1,[309]],[3,1]]],[-1,44,null,503323527743681,0,null,[[1,[450]],[3,0]]],[141,41,null,485753836371482,0,null,[[1,[128]]]]]]]]]],[3,[true,\"和流浪鲨鱼互动\"],false,null,825180931312957,196,[[-1,20,null,0,false,false,false,0,false,[[1,[463]]]]],[],[[0,0,false,null,862905593541911,197,[[142,49,null,1,false,false,false,848279017926971,null,[[4,112]]],[143,36,null,0,false,false,false,503806968519838,null,[[10,18],[8,0],[7,[1]]]]],[[-1,48,null,180445993696127,0,null,[[5,[186]],[16,false]]],[-1,44,null,740963422365994,0,null,[[1,[466]],[3,1]]],[-1,44,null,297763305689808,0,null,[[1,[464]],[3,0]]],[-1,44,null,103204879165117,0,null,[[1,[465]],[3,0]]],[143,22,null,756322229946312,0,null,[[10,18],[7,[11]]]],[132,47,null,754282799838073,0,null,[[3,1]]],[132,43,null,977184862490354,0,null,[[0,[11]]]],[112,50,null,106671468249943,0,null,[[1,[99]],[3,1]]],[141,34,null,911946202934166,0,null,[[2,[\"室外/你……不讨厌我吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[-1,44,null,273001602157815,0,null,[[1,[337]],[3,0]]],[-1,32,null,521199931510274,2,null,[[0,[132]]]],[112,42,null,132385234510174,0,null],[112,43,null,779178056245400,0,null,[[0,[1]]]],[-1,32,null,240998708244438,2,null,[[0,[133]]]],[132,47,null,212537956996848,0,null,[[3,0]]],[112,31,\"补间动画\",771024614116581,1,null,[[1,[14]],[3,0],[0,[96]],[0,[134]],[0,[1]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[112,53,\"补间动画\",990847642551895,1,null,[[1,[14]],[3,5],[0,[11]],[0,[1]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,144652604750208,2,null,[[0,[1]]]],[141,34,null,228584647691578,0,null,[[2,[\"室外/出门和回家音效\",false]],[3,0],[0,[13]],[0,[11]],[1,[14]]]],[112,47,null,627530954060621,0,null,[[3,0]]],[-1,48,null,540749234102389,0,null,[[5,[186]],[16,true]]]]]]]]]]],[3,[true,\"关灯的世界\"],false,null,309282786604435,198,[[-1,20,null,0,false,false,false,0,false,[[1,[324]]]]],[],[[3,[true,\"关灯计时事件\"],false,null,166338181978645,199,[[-1,20,null,0,false,false,false,0,false,[[1,[477]]]]],[],[[3,[true,\"关灯阶段事件\"],false,null,670976502505571,200,[[-1,20,null,0,false,false,false,0,false,[[1,[478]]]]],[],[[0,0,false,null,861911440377051,201,[[143,36,null,0,false,false,false,966484280596350,null,[[10,24],[8,5],[7,[16]]]],[-1,51,null,0,false,false,false,776694392334336,null]],[[143,22,null,569607415900451,0,null,[[10,58],[7,[1]]]],[-1,44,null,362543766628106,0,null,[[1,[329]],[3,1]]],[-1,44,null,346259343356669,0,null,[[1,[334]],[3,0]]],[-1,44,null,959044540596336,0,null,[[1,[438]],[3,0]]],[-1,44,null,550273598033861,0,null,[[1,[328]],[3,0]]],[-1,44,null,877640577763549,0,null,[[1,[327]],[3,0]]],[-1,44,null,565544781165732,0,null,[[1,[330]],[3,0]]],[141,34,null,476744742804693,0,null,[[2,[\"开关灯/哇！好黑！是你关了灯吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[479]]]],[128,47,null,730859639252735,0,null,[[3,1]]],[128,43,null,701818893842359,0,null,[[0,[1]]]],[-1,32,null,401210075763808,2,null,[[0,[256]]]],[128,43,null,100886131307861,0,null,[[0,[16]]]],[-1,32,null,303374838744888,2,null,[[0,[132]]]],[128,47,null,895045061716859,0,null,[[3,0]]]]],[0,0,false,null,909222101676335,202,[[143,36,null,0,false,false,false,136878622151322,null,[[10,24],[8,5],[7,[84]]]],[-1,51,null,0,false,false,false,865895695212176,null]],[[143,22,null,364803134464060,0,null,[[10,58],[7,[16]]]],[-1,44,null,251659652355801,0,null,[[1,[329]],[3,1]]],[-1,44,null,419784385059246,0,null,[[1,[334]],[3,0]]],[-1,44,null,270212801224877,0,null,[[1,[438]],[3,0]]],[-1,44,null,145429586902651,0,null,[[1,[328]],[3,0]]],[-1,44,null,885849767590194,0,null,[[1,[327]],[3,0]]],[-1,44,null,640528112017976,0,null,[[1,[330]],[3,0]]],[141,34,null,737228550588491,0,null,[[2,[\"开关灯/其实……我有点怕黑， 可以开灯吗？\",false]],[3,0],[0,[11]],[0,[11]],[1,[479]]]],[128,47,null,865858644965727,0,null,[[3,1]]],[128,43,null,635568850324585,0,null,[[0,[13]]]],[-1,32,null,984470336635716,2,null,[[0,[480]]]],[128,43,null,706270817726435,0,null,[[0,[112]]]],[-1,32,null,251390467147181,2,null,[[0,[290]]]],[128,47,null,177660911029092,0,null,[[3,0]]]]],[0,0,false,null,247364069440799,203,[[143,36,null,0,false,false,false,771719426279685,null,[[10,24],[8,5],[7,[355]]]],[-1,51,null,0,false,false,false,380457914963996,null]],[[141,34,null,370647266203872,0,null,[[2,[\"开关灯/阶段345\",false]],[3,0],[0,[11]],[0,[11]],[1,[479]]]],[-1,32,null,966356760778206,2,null,[[0,[290]]]],[143,22,null,919498648412666,0,null,[[10,58],[7,[13]]]],[-1,44,null,718528201011061,0,null,[[1,[329]],[3,1]]],[-1,44,null,352739541565446,0,null,[[1,[334]],[3,0]]],[-1,44,null,618018713248555,0,null,[[1,[438]],[3,0]]],[-1,44,null,386311677397346,0,null,[[1,[328]],[3,0]]],[-1,44,null,256208749008747,0,null,[[1,[327]],[3,0]]],[-1,44,null,796355695758025,0,null,[[1,[330]],[3,0]]],[128,47,null,710030676227815,0,null,[[3,1]]],[128,43,null,432991271036880,0,null,[[0,[114]]]],[-1,32,null,245711393968649,2,null,[[0,[362]]]],[128,43,null,859360140209334,0,null,[[0,[117]]]],[-1,32,null,705815899113739,2,null,[[0,[435]]]],[128,43,null,119190179248502,0,null,[[0,[55]]]],[-1,32,null,776208348966895,2,null,[[0,[16]]]],[128,47,null,306655177278763,0,null,[[3,0]]],[-1,32,null,929212999621221,2,null,[[0,[481]]]],[143,22,null,159415147520177,0,null,[[10,58],[7,[112]]]],[-1,44,null,189638264474960,0,null,[[1,[329]],[3,0]]],[-1,44,null,396626457765300,0,null,[[1,[328]],[3,1]]],[-1,44,null,282700297839874,0,null,[[1,[327]],[3,0]]],[-1,44,null,722765071366863,0,null,[[1,[330]],[3,0]]],[-1,44,null,180356950896805,0,null,[[1,[334]],[3,0]]],[-1,44,null,742778652585426,0,null,[[1,[438]],[3,0]]],[128,47,null,458873027403361,0,null,[[3,1]]],[128,43,null,821534202214273,0,null,[[0,[123]]]],[-1,32,null,322707284396389,2,null,[[0,[362]]]],[128,43,null,741674691674090,0,null,[[0,[126]]]],[-1,32,null,305058511037531,2,null,[[0,[233]]]],[128,43,null,264562345763391,0,null,[[0,[88]]]],[-1,32,null,503414770221316,2,null,[[0,[422]]]],[128,43,null,702500744149022,0,null,[[0,[96]]]],[-1,32,null,866358425141973,2,null,[[0,[482]]]],[128,43,null,318053741833686,0,null,[[0,[67]]]],[-1,32,null,363546762925826,2,null,[[0,[290]]]],[128,47,null,541145262135000,0,null,[[3,0]]],[-1,32,null,879420662001947,2,null,[[0,[55]]]],[143,22,null,228714184181272,0,null,[[10,58],[7,[114]]]],[-1,44,null,519295862154690,0,null,[[1,[329]],[3,0]]],[-1,44,null,653850254479301,0,null,[[1,[328]],[3,0]]],[-1,44,null,612646121875700,0,null,[[1,[327]],[3,1]]],[-1,44,null,208678856283598,0,null,[[1,[330]],[3,0]]],[-1,44,null,582324951826824,0,null,[[1,[334]],[3,0]]],[-1,44,null,305718170150848,0,null,[[1,[438]],[3,0]]],[128,47,null,292780361637816,0,null,[[3,1]]],[128,43,null,713327516560776,0,null,[[0,[73]]]],[-1,32,null,114950365150417,2,null,[[0,[378]]]],[128,43,null,434447408526567,0,null,[[0,[79]]]],[-1,32,null,563950455744248,2,null,[[0,[16]]]],[128,43,null,188534131551991,0,null,[[0,[84]]]],[-1,32,null,971657441687618,2,null,[[0,[64]]]],[128,43,null,925990183478326,0,null,[[0,[184]]]],[-1,32,null,141924424004143,2,null,[[0,[483]]]],[128,43,null,296846066605157,0,null,[[0,[186]]]],[-1,32,null,393802810455800,2,null,[[0,[60]]]],[128,43,null,375776825230562,0,null,[[0,[189]]]],[-1,32,null,209346980270219,2,null,[[0,[110]]]],[128,43,null,509765689285407,0,null,[[0,[192]]]],[-1,32,null,702557023805478,2,null,[[0,[1]]]],[128,43,null,273970558331182,0,null,[[0,[195]]]],[-1,32,null,304806521785317,2,null,[[0,[113]]]],[128,43,null,791125869994326,0,null,[[0,[197]]]],[-1,32,null,760716577966532,2,null,[[0,[484]]]],[128,43,null,803280072676873,0,null,[[0,[200]]]],[-1,32,null,367172710305296,2,null,[[0,[485]]]],[128,43,null,500280368693900,0,null,[[0,[202]]]],[-1,32,null,865820460470989,2,null,[[0,[486]]]],[128,43,null,517986131681967,0,null,[[0,[205]]]],[-1,32,null,734334409729707,2,null,[[0,[485]]]],[128,43,null,943278739547566,0,null,[[0,[207]]]],[-1,32,null,943532029076251,2,null,[[0,[133]]]],[128,43,null,902046811071253,0,null,[[0,[209]]]],[-1,32,null,453330143961386,2,null,[[0,[6]]]],[128,47,null,436523781096629,0,null,[[3,0]]],[-1,32,null,104300113637877,2,null,[[0,[105]]]],[141,34,null,796190422237445,0,null,[[2,[\"开关灯/被删除后的雪花噪音\",false]],[3,1],[0,[11]],[0,[11]],[1,[441]]]],[-1,44,null,399243189652573,0,null,[[1,[329]],[3,0]]],[-1,44,null,419687980974948,0,null,[[1,[328]],[3,0]]],[-1,44,null,302505732264447,0,null,[[1,[327]],[3,0]]],[-1,44,null,644921390652072,0,null,[[1,[330]],[3,1]]],[-1,44,null,136690742534120,0,null,[[1,[334]],[3,0]]],[-1,44,null,635739576368268,0,null,[[1,[438]],[3,0]]]]]]],[3,[false,\"计时\"],false,null,907554139697273,204,[[-1,20,null,0,false,false,false,0,false,[[1,[331]]]]],[],[[0,0,false,null,844372620355200,205,[[-1,23,null,0,false,false,false,706665512560169,null]],[[143,22,null,587541179634520,0,null,[[10,24],[7,[4,[4,29],[2,143,false,25]]]]]]]]]]],[3,[false,\"【结局8】开灯\"],false,null,634338360617021,206,[[-1,20,null,0,false,false,false,0,false,[[1,[334]]]]],[],[[0,0,false,null,399091273130979,207,[[142,49,null,1,false,false,false,281009708062638,null,[[4,140]]]],[[141,34,null,743859924367460,0,null,[[2,[\"开关灯/不妙震撼地开灯\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,52,null,750815941264100,0,null,[[5,[195]],[3,0]]],[-1,48,null,949107324126610,0,null,[[5,[195]],[16,false]]],[-1,44,null,355743635315598,0,null,[[1,[309]],[3,0]]],[-1,44,null,423381607021576,0,null,[[1,[324]],[3,0]]],[-1,32,null,126523771964321,2,null,[[0,[114]]]],[141,41,null,979113643054247,0,null,[[1,[440]]]],[141,41,null,311554323724008,0,null,[[1,[56]]]],[-1,37,null,386042131931633,0,null,[[6,\"结局8成为养料的鲨鱼\"]]]]]]],[3,[false,\"普通开灯\"],false,null,491158231027738,208,[[-1,20,null,0,false,false,false,0,false,[[1,[438]]]]],[],[[0,0,false,null,250944032789394,209,[[142,49,null,1,false,false,false,445105418177930,null,[[4,140]]]],[[141,34,null,398359946114782,0,null,[[2,[\"开关灯/开关灯的音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[141,41,null,945448708977745,0,null,[[1,[56]]]],[-1,52,null,221370435215955,0,null,[[5,[195]],[3,0]]],[-1,48,null,107050652277782,0,null,[[5,[195]],[16,false]]],[-1,44,null,368546557903661,0,null,[[1,[309]],[3,1]]],[-1,44,null,169716909250383,0,null,[[1,[324]],[3,0]]],[141,88,null,146034816061648,0,null,[[1,[22]],[3,1]]]]]]],[3,[false,\"关灯阶段123开灯\"],false,null,707533024411856,210,[[-1,20,null,0,false,false,false,0,false,[[1,[329]]]]],[],[[0,0,false,null,520731740633242,211,[[142,49,null,1,false,false,false,496926071140453,null,[[4,140]]]],[[-1,44,null,444657692166513,0,null,[[1,[331]],[3,0]]],[128,47,null,358668397591812,0,null,[[3,0]]],[141,41,null,293103640468017,0,null,[[1,[479]]]],[-1,44,null,103955704656483,0,null,[[1,[333]],[3,1]]],[-1,44,null,776237907856389,0,null,[[1,[332]],[3,0]]],[141,34,null,171970590644399,0,null,[[2,[\"开关灯/开关灯的音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[141,41,null,712334834345900,0,null,[[1,[56]]]],[-1,52,null,817877657979051,0,null,[[5,[195]],[3,0]]],[-1,48,null,902004795930222,0,null,[[5,[195]],[16,false]]],[-1,44,null,271127167222132,0,null,[[1,[309]],[3,1]]],[-1,44,null,413976288620971,0,null,[[1,[324]],[3,0]]],[90,50,null,642599891676038,0,null,[[1,[350]],[3,1]]],[90,42,null,709877671834540,0,null],[90,43,null,639739685101869,0,null,[[0,[1]]]],[-1,32,null,468010387605316,2,null,[[0,[133]]]],[141,34,null,676946880087780,0,null,[[2,[\"开关灯/呼……黑暗好吓人啊\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[90,50,null,128713702958561,0,null,[[1,[350]],[3,1]]],[129,47,null,272763418798457,0,null,[[3,1]]],[-1,32,null,388958788856682,2,null,[[0,[487]]]],[90,42,null,496834887970880,0,null],[90,43,null,501147207906115,0,null,[[0,[1]]]],[-1,32,null,891588094074718,2,null,[[0,[488]]]],[90,50,null,734268873114848,0,null,[[1,[350]],[3,1]]],[129,43,null,410548342284703,0,null,[[0,[11]]]],[-1,32,null,719507285552047,2,null,[[0,[489]]]],[90,42,null,157967450092473,0,null],[90,43,null,723067604129825,0,null,[[0,[1]]]],[129,47,null,257482336781604,0,null,[[3,0]]],[-1,32,null,907635763199668,2,null,[[0,[62]]]],[141,88,null,151383902691091,0,null,[[1,[22]],[3,1]]]]]]],[3,[false,\"关灯阶段4开灯\"],false,null,557238727031813,212,[[-1,20,null,0,false,false,false,0,false,[[1,[328]]]]],[],[[0,0,false,null,843403446841081,213,[[142,49,null,1,false,false,false,740229461516909,null,[[4,140]]]],[[-1,44,null,530641528579747,0,null,[[1,[331]],[3,0]]],[128,47,null,458172829618556,0,null,[[3,0]]],[141,41,null,556794811410331,0,null,[[1,[479]]]],[-1,44,null,616053794242940,0,null,[[1,[333]],[3,1]]],[-1,44,null,975364019030728,0,null,[[1,[332]],[3,0]]],[88,43,null,667601230358848,0,null,[[0,[1]]]],[91,47,null,171736384298029,0,null,[[3,0]]],[89,43,null,168441507536392,0,null,[[0,[112]]]],[102,47,null,532012693148552,0,null,[[3,1]]],[141,34,null,683211435648702,0,null,[[2,[\"开关灯/开关灯的音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[141,34,null,418870351748538,0,null,[[2,[\"开关灯/信号噪音\",false]],[3,0],[0,[11]],[0,[11]],[1,[56]]]],[-1,52,null,659087251830112,0,null,[[5,[195]],[3,0]]],[-1,48,null,255658528111575,0,null,[[5,[195]],[16,false]]],[-1,44,null,576576772272116,0,null,[[1,[309]],[3,1]]],[-1,44,null,431635437886356,0,null,[[1,[324]],[3,0]]],[-1,44,null,362233070869512,0,null,[[1,[333]],[3,1]]],[90,50,null,277795046890275,0,null,[[1,[350]],[3,1]]],[90,42,null,618389575281386,0,null],[90,43,null,355089614208723,0,null,[[0,[1]]]],[-1,32,null,864132770206449,2,null,[[0,[133]]]],[141,34,null,238016372133375,0,null,[[2,[\"开关灯/啊……终于……终于开灯了，谢谢您，请不要再这样吓我了……好可怕……\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[90,81,null,840861654655362,0,null,[[3,1]]],[129,47,null,217194371013642,0,null,[[3,1]]],[129,43,null,988149670967730,0,null,[[0,[1]]]],[-1,32,null,462035709858078,2,null,[[0,[429]]]],[129,43,null,115565853919441,0,null,[[0,[16]]]],[90,50,null,370482359637530,0,null,[[1,[352]],[3,1]]],[-1,32,null,725424856873855,2,null,[[0,[490]]]],[129,43,null,485900795102205,0,null,[[0,[13]]]],[-1,32,null,311070361486865,2,null,[[0,[290]]]],[129,47,null,567845474969278,0,null,[[3,0]]],[90,42,null,926277933885530,0,null],[90,43,null,189856434301621,0,null,[[0,[1]]]],[-1,32,null,729065742061129,2,null,[[0,[62]]]],[141,88,null,970454634082731,0,null,[[1,[22]],[3,1]]],[141,58,null,585436616552742,0,null,[[1,[56]],[0,[231]],[0,[88]],[3,0]]]]]]],[3,[false,\"关灯阶段5开灯\"],false,null,155793499931022,214,[[-1,20,null,0,false,false,false,0,false,[[1,[327]]]]],[],[[0,0,false,null,913276181744984,215,[[142,49,null,1,false,false,false,520352909163939,null,[[4,140]]]],[[141,34,null,813662162582853,0,null,[[2,[\"开关灯/打不开灯\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]]]]]],[3,[false,\"小鲨鱼被沃玛删除了再开灯\"],false,null,461504954149999,216,[[-1,20,null,0,false,false,false,0,false,[[1,[330]]]]],[],[[0,0,false,null,158533941087863,217,[[142,49,null,1,false,false,false,170069378255660,null,[[4,140]]]],[[88,43,null,916870111529161,0,null,[[0,[1]]]],[91,47,null,897621527523698,0,null,[[3,0]]],[102,47,null,148418921372476,0,null,[[3,1]]],[-1,74,null,663686557327564,0,null,[[5,[67]],[3,1],[1,[237]]]],[-1,74,null,728637271697435,0,null,[[5,[67]],[3,1],[1,[335]]]],[-1,74,null,661777810161648,0,null,[[5,[67]],[3,1],[1,[336]]]],[90,33,\"正弦大小\",564981047737771,0,null,[[3,0]]],[90,33,\"正弦抖动\",553393634053804,0,null,[[3,0]]],[90,33,\"正弦旋转\",702152657937914,0,null,[[3,0]]],[90,33,\"正弦锻炼\",864321097197777,0,null,[[3,0]]],[90,50,null,851066721504214,0,null,[[1,[491]],[3,1]]],[141,34,null,293225099965209,0,null,[[2,[\"开关灯/不妙震撼地开灯\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,52,null,985551764061082,0,null,[[5,[195]],[3,0]]],[-1,48,null,609398100601002,0,null,[[5,[195]],[16,false]]],[-1,44,null,378299927103255,0,null,[[1,[324]],[3,0]]],[-1,32,null,887123266239246,2,null,[[0,[114]]]],[141,41,null,891151838424652,0,null,[[1,[441]]]],[141,41,null,279532226360942,0,null,[[1,[56]]]],[-1,37,null,629530266974873,0,null,[[6,\"结局4被视作无用的鲨鱼\"]]]]]]]]]]],[\"常规外出\",[[0,0,false,null,950726805731306,1,[[-1,93,null,1,false,false,false,357705529173810,null]],[[105,42,null,506837716362135,0,null],[103,42,null,882959847400097,0,null],[104,42,null,406262269690959,0,null],[106,42,null,218100885160155,0,null]]],[0,0,false,null,612653028380688,2,[[143,36,null,0,false,false,false,650329612289033,null,[[10,17],[8,0],[7,[1]]]]],[[105,43,null,612926056371898,0,null,[[0,[1]]]],[103,43,null,428709616006897,0,null,[[0,[1]]]],[104,43,null,321011638032988,0,null,[[0,[1]]]],[106,43,null,913378179134381,0,null,[[0,[1]]]]]],[0,0,false,null,386096565401742,3,[[142,49,null,1,false,false,false,467789413769796,null,[[4,116]]]],[[-1,37,null,835347288826260,0,null,[[6,\"常规喂养\"]]]]]]],[\"领养询问\",[[3,[false,\"开发者调试\"],false,null,785724178926372,1,[[-1,20,null,0,false,false,false,0,false,[[1,[492]]]]],[],[[0,0,false,null,306047409932057,2,[[-1,21,null,1,false,false,false,595416041360238,null]],[[-1,52,null,930583522376975,0,null,[[5,[114]],[3,1]]]]],[0,0,false,null,300632405332684,3,[[10,94,null,1,false,false,false,302698829169966,null]],[[143,22,null,793431195372717,0,null,[[10,2],[7,[1]]]]]],[0,0,false,null,364780697467302,4,[[16,94,null,1,false,false,false,885649222230429,null]],[[143,22,null,100629811677169,0,null,[[10,3],[7,[1]]]]]],[0,0,false,null,560888357767062,5,[[17,94,null,1,false,false,false,207070405209287,null]],[[143,22,null,282508806663799,0,null,[[10,4],[7,[1]]]],[143,22,null,461987693190845,0,null,[[10,18],[7,[1]]]],[143,22,null,991905786484892,0,null,[[10,17],[7,[1]]]]]],[0,0,false,null,249347987215102,6,[[18,94,null,1,false,false,false,327617940440937,null]],[[143,22,null,980783336062677,0,null,[[10,5],[7,[1]]]]]],[0,0,false,null,511671187346786,7,[[19,94,null,1,false,false,false,274225498952848,null]],[[143,22,null,350727035028973,0,null,[[10,6],[7,[1]]]],[143,22,null,750215212770042,0,null,[[10,17],[7,[1]]]]]],[0,0,false,null,670759630910538,8,[[20,94,null,1,false,false,false,573728633998024,null]],[[143,22,null,886111486866709,0,null,[[10,7],[7,[1]]]]]],[0,0,false,null,600032325692866,9,[[21,94,null,1,false,false,false,838382207256338,null]],[[143,22,null,190361721476394,0,null,[[10,8],[7,[1]]]]]],[0,0,false,null,677619174355031,10,[[22,94,null,1,false,false,false,672080685386193,null]],[[143,22,null,379909764233803,0,null,[[10,9],[7,[1]]]]]],[0,0,false,null,989305408984647,11,[[23,94,null,1,false,false,false,149065444139657,null]],[[143,22,null,570097849933821,0,null,[[10,10],[7,[1]]]],[143,22,null,653660184204026,0,null,[[10,17],[7,[1]]]]]],[0,0,false,null,553512478445203,12,[[11,94,null,1,false,false,false,396213887315284,null]],[[143,22,null,170684353718539,0,null,[[10,11],[7,[1]]]],[143,22,null,923262075119850,0,null,[[10,19],[7,[1]]]],[143,22,null,261575552909744,0,null,[[10,17],[7,[1]]]]]],[0,0,false,null,420585625088588,13,[[12,94,null,1,false,false,false,687697658379965,null]],[[143,22,null,178089737429585,0,null,[[10,12],[7,[1]]]]]],[0,0,false,null,566458337813241,14,[[13,94,null,1,false,false,false,803508335369716,null]],[[143,22,null,367183495748916,0,null,[[10,14],[7,[1]]]]]],[0,0,false,null,556590165529329,15,[[14,94,null,1,false,false,false,108935191408359,null]],[[143,22,null,544859384926296,0,null,[[10,15],[7,[1]]]]]],[0,0,false,null,632553315594985,16,[[15,94,null,1,false,false,false,406538580357215,null]],[[143,22,null,161272278190199,0,null,[[10,16],[7,[1]]]]]],[0,0,false,null,339322949833725,17,[[-1,23,null,0,false,false,false,426347372945200,null]],[[9,46,null,154843298165910,0,null,[[7,[493,[2,143,false,1],[2,143,false,2],[2,143,false,3],[2,143,false,4],[2,143,false,5],[2,143,false,6],[2,143,false,7],[2,143,false,8],[2,143,false,9],[2,143,false,10],[2,143,false,11],[2,143,false,12],[2,143,false,14],[2,143,false,15],[2,143,false,16],[2,143,false,18]]]]]]]]],[0,0,false,null,432771897474278,18,[[-1,21,null,1,false,false,false,364311469558624,null]],[[1,33,\"正弦\",777751995514930,0,null,[[3,1]]],[143,22,null,139305281272196,0,null,[[10,30],[7,[8,[4,29]]]]],[-1,60,null,140318873813343,0,null,[[3,0],[1,[286]]]]]],[0,0,false,null,123769609557747,19,[[-1,23,null,0,false,false,false,769861739019893,null]],[[65,24,null,275910673360428,0,null,[[0,[3,[1,65,25,false],[4,26]]]]],[65,27,null,175825420459431,0,null,[[0,[3,[1,65,28,false],[4,26]]]]],[143,22,null,470911940674494,0,null,[[10,31],[7,[4,[4,29],[2,143,false,30]]]]]]],[3,[true,\"开始领养\"],false,null,842836300954008,20,[[-1,20,null,0,false,false,false,0,false,[[1,[494]]]]],[],[[0,0,false,null,177780025982526,21,[[142,64,null,1,false,false,false,594393282752209,null,[[4,2]]]],[[-1,48,null,361227762837373,0,null,[[5,[16]],[16,false]]],[143,22,null,744408442558189,0,null,[[10,40],[7,[285,[4,67],[4,61]]]]],[2,31,\"补间动画\",116549948424136,1,null,[[1,[14]],[3,2],[0,[60]],[0,[60]],[0,[61]],[18,0],[3,0],[3,0],[3,1],[0,[1]]]],[-1,32,null,808139144366155,2,null,[[0,[61]]]],[143,22,null,609114217332790,0,null,[[10,38],[7,[8,[4,29]]]]],[-1,60,null,269104248277383,0,null,[[3,1],[1,[286]]]],[143,22,null,204605761476565,0,null,[[10,39],[7,[1]]]],[141,41,null,439842866685447,0,null,[[1,[12]]]],[141,41,null,743373560064155,0,null,[[1,[139]]]],[141,34,null,421113937501160,0,null,[[2,[\"领养询问/确认领养\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]]]],[0,0,false,null,964056698598246,22,[[143,36,null,0,false,false,false,376157967661532,null,[[10,39],[8,0],[7,[1]]]]],[[-1,68,null,282785364504349,0,null,[[1,[286]],[0,[11]],[0,[287,[4,29],[2,143,false,38]]]]],[-1,32,null,143596346512333,2,null,[[0,[64]]]],[-1,48,null,698730888052890,0,null,[[5,[16]],[16,true]]],[-1,37,null,170465144672257,0,null,[[6,\"常规喂养\"]]]]]]],[3,[true,\"右上角的叉\"],false,null,284649427828313,23,[[-1,20,null,0,false,false,false,0,false,[[1,[495]]]]],[],[[0,0,false,null,730685722772376,24,[[143,36,null,0,false,false,false,712052957950168,null,[[10,1],[8,5],[7,[112]]]]],[[-1,85,null,264212864867538,256,null,[[4,4],[5,[495]],[0,[496]],[0,[497]],[16,false],[20,[14]]]],[4,75,\"固定\",303354759859630,0,null,[[4,1],[7,[1]],[16,true],[3,2],[3,2],[16,false]]]]],[0,0,false,null,438614393897245,25,[[142,64,null,1,false,false,false,937591326674870,null,[[4,4]]]],[[141,34,null,694101198678059,0,null,[[2,[\"领养询问/确认放弃\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,52,null,541532066483836,0,null,[[5,[114]],[3,0]]],[1,33,\"正弦\",712441010378698,0,null,[[3,0]]],[1,53,\"补间动画\",665513744580273,1,null,[[1,[14]],[3,1],[0,[498]],[0,[16]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[2,53,\"补间动画\",792152437059140,1,null,[[1,[14]],[3,1],[0,[499]],[0,[16]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[3,53,\"补间动画\",988492668839382,1,null,[[1,[14]],[3,1],[0,[499]],[0,[16]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[141,58,null,488286578058476,0,null,[[1,[12]],[0,[231]],[0,[13]],[3,0]]],[141,58,null,939404548704468,0,null,[[1,[139]],[0,[231]],[0,[13]],[3,0]]],[-1,32,null,769816332651184,2,null,[[0,[1]]]],[119,47,null,534010370636659,0,null,[[3,1]]],[141,34,null,920376927279968,0,null,[[2,[\"最终结局/点掉叉叉\",false]],[3,0],[0,[11]],[0,[11]],[1,[65]]]],[70,33,\"正弦3\",802592096055359,0,null,[[3,1]]],[119,43,null,705427477140196,0,null,[[0,[11]]]],[70,50,null,736897135988723,0,null,[[1,[345]],[3,1]]],[-1,32,null,182767083291322,2,null,[[0,[500]]]],[70,42,null,322477387522797,0,null],[70,43,null,874030552442105,0,null,[[0,[1]]]],[-1,32,null,737766450923414,2,null,[[0,[501]]]],[70,50,null,705978791217646,0,null,[[1,[345]],[3,1]]],[-1,32,null,315935785023717,2,null,[[0,[502]]]],[70,33,\"正弦3\",522117981784466,0,null,[[3,0]]],[70,42,null,256593368217101,0,null],[70,43,null,836584112011985,0,null,[[0,[1]]]],[141,34,null,504502649709612,0,null,[[2,[\"关闭叉叉发现鲨鱼\",true]],[3,0],[0,[10]],[0,[11]],[1,[503]]]],[-1,32,null,277935860010169,2,null,[[0,[504]]]],[119,43,null,874020483524866,0,null,[[0,[1]]]],[70,50,null,112436639974153,0,null,[[1,[342]],[3,1]]],[-1,32,null,896273913219158,2,null,[[0,[505]]]],[70,42,null,441394773302802,0,null],[70,43,null,477346365049222,0,null,[[0,[1]]]],[-1,32,null,655968133406540,2,null,[[0,[91]]]],[70,33,\"正弦3\",457181689141551,0,null,[[3,1]]],[70,50,null,978939361485393,0,null,[[1,[342]],[3,1]]],[119,43,null,600625261570962,0,null,[[0,[16]]]],[-1,32,null,311283884865037,2,null,[[0,[506]]]],[70,33,\"正弦3\",472485119466333,0,null,[[3,0]]],[70,42,null,445120918525065,0,null],[70,43,null,150836413815941,0,null,[[0,[1]]]],[-1,32,null,418851942309143,2,null,[[0,[507]]]],[70,33,\"正弦\",585905012080165,0,null,[[3,1]]],[70,33,\"正弦2\",185782560118835,0,null,[[3,1]]],[70,55,\"正弦2\",219820433928074,0,null,[[0,[1]]]],[70,59,\"正弦2\",128855344191993,0,null,[[0,[13]]]],[70,50,null,117714748330549,0,null,[[1,[382]],[3,1]]],[119,43,null,284823827254797,0,null,[[0,[13]]]],[-1,32,null,970295513022419,2,null,[[0,[508]]]],[70,50,null,805567316985825,0,null,[[1,[382]],[3,1]]],[119,43,null,349926067939304,0,null,[[0,[112]]]],[-1,32,null,234586721388756,2,null,[[0,[166]]]],[70,42,null,140606502964508,0,null],[70,43,null,934014424223378,0,null,[[0,[1]]]],[-1,32,null,322680488774841,2,null,[[0,[6]]]],[70,33,\"正弦\",893508374700638,0,null,[[3,0]]],[70,33,\"正弦2\",283711526955406,0,null,[[3,0]]],[70,56,\"正弦2\",322235328948466,0,null,[[0,[11]]]],[70,56,\"正弦\",847249731977736,0,null,[[0,[11]]]],[70,33,\"正弦3\",685981035356215,0,null,[[3,1]]],[70,50,null,724365886944196,0,null,[[1,[345]],[3,1]]],[119,43,null,605285398774197,0,null,[[0,[114]]]],[-1,32,null,467996933456503,2,null,[[0,[509]]]],[70,33,\"正弦3\",444543825066631,0,null,[[3,0]]],[70,33,\"正弦\",467361814543560,0,null,[[3,1]]],[70,55,\"正弦\",670508690260903,0,null,[[0,[16]]]],[70,59,\"正弦\",830568799960838,0,null,[[0,[1]]]],[70,50,null,539820548083039,0,null,[[1,[348]],[3,1]]],[119,43,null,971108566738245,0,null,[[0,[117]]]],[-1,32,null,494152498377250,2,null,[[0,[510]]]],[70,50,null,429256512577154,0,null,[[1,[180]],[3,1]]],[119,43,null,141555494044207,0,null,[[0,[55]]]],[-1,32,null,722361245582002,2,null,[[0,[511]]]],[141,58,null,276389987519603,0,null,[[1,[503]],[0,[231]],[0,[13]],[3,0]]],[70,50,null,462685920540489,0,null,[[1,[342]],[3,1]]],[119,43,null,847549897611660,0,null,[[0,[123]]]],[-1,32,null,991929238779088,2,null,[[0,[512]]]],[-1,32,null,533280244351394,2,null,[[0,[1]]]],[143,22,null,472543214616481,0,null,[[10,60],[7,[1]]]],[70,42,null,454562018454667,0,null],[70,43,null,907515930689958,0,null,[[0,[1]]]]]],[0,0,false,null,106659357774563,26,[[-1,23,null,0,false,false,false,508824232617215,null]],[[143,22,null,121925016523029,0,null,[[10,1],[7,[513,[2,143,false,2],[2,143,false,3],[2,143,false,4],[2,143,false,5],[2,143,false,6],[2,143,false,7],[2,143,false,8],[2,143,false,9],[2,143,false,10],[2,143,false,11],[2,143,false,12],[2,143,false,14],[2,143,false,15],[2,143,false,16]]]]]]],[0,0,false,null,522882001475267,27,[[143,36,null,0,false,false,false,991824528218754,null,[[10,60],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,292558920565658,null,[[10,17],[8,0],[7,[1]]]]],[[151,47,null,284820417487047,0,null,[[3,1]]],[151,53,\"补间动画\",124037550574671,1,null,[[1,[151]],[3,5],[0,[150]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,802154599546185,2,null,[[0,[64]]]],[-1,37,null,713482930001655,0,null,[[6,\"坏结局\"]]]]],[0,0,false,null,146517148525813,28,[[143,36,null,0,false,false,false,533898610476891,null,[[10,60],[8,0],[7,[1]]]],[143,36,null,0,false,false,false,791007638578900,null,[[10,17],[8,0],[7,[11]]]]],[[150,47,null,283553136685960,0,null,[[3,1]]],[150,53,\"补间动画\",263289341347402,1,null,[[1,[151]],[3,5],[0,[150]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[-1,32,null,337224180824353,2,null,[[0,[64]]]],[-1,37,null,779068536721442,0,null,[[6,\"好结局\"]]]]]]],[3,[true,\"不领养（无流浪鲨鱼）\"],false,null,554163700236325,29,[[-1,20,null,0,false,false,false,0,false,[[1,[40]]]]],[],[[3,[true,\"点击不要2\"],false,null,516932605356830,30,[[-1,20,null,0,false,false,false,0,false,[[1,[514]]]]],[],[[0,0,false,null,205735722811884,31,[[142,64,null,1,false,false,false,856115171743169,null,[[4,3]]]],[[143,22,null,894128376758906,0,null,[[10,37],[7,[294,[4,61]]]]],[3,31,\"补间动画\",129759555290615,1,null,[[1,[14]],[3,0],[0,[295,[4,61]]],[0,[296,[4,61]]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[143,38,null,409870314943245,0,null,[[10,33],[7,[1]]]]]],[0,0,false,null,599674035945743,32,[[143,36,null,0,false,false,false,130581345285234,null,[[10,37],[8,3],[7,[1]]]],[143,36,null,0,false,false,false,899933396467922,null,[[10,37],[8,4],[7,[11]]]],[-1,51,null,0,false,false,false,737635282343536,null]],[[141,34,null,476503523947508,0,null,[[2,[\"领养询问/滑走的音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,767307685619534,0,null,[[10,37],[7,[11]]]]]],[0,0,false,null,981988671473007,33,[[143,36,null,0,false,false,false,742117066408214,null,[[10,37],[8,3],[7,[16]]]],[143,36,null,0,false,false,false,578843722833786,null,[[10,37],[8,4],[7,[1]]]],[-1,51,null,0,false,false,false,823164015025966,null]],[[141,34,null,422670777452470,0,null,[[2,[\"领养询问/滑走的音效2\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,427025022507545,0,null,[[10,37],[7,[11]]]]]],[0,0,false,null,909460070696094,34,[[143,36,null,0,false,false,false,481566781427635,null,[[10,37],[8,3],[7,[13]]]],[143,36,null,0,false,false,false,254443309386491,null,[[10,37],[8,4],[7,[16]]]],[-1,51,null,0,false,false,false,263128617856888,null]],[[141,34,null,493696947550248,0,null,[[2,[\"领养询问/滑走的音效3\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,924790581075491,0,null,[[10,37],[7,[11]]]]]],[0,0,false,null,847708756567392,35,[[143,36,null,0,false,false,false,588544280719694,null,[[10,37],[8,3],[7,[112]]]],[143,36,null,0,false,false,false,554074868132246,null,[[10,37],[8,4],[7,[13]]]],[-1,51,null,0,false,false,false,608440763737103,null]],[[141,34,null,342644599153996,0,null,[[2,[\"领养询问/滑走的音效4\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,886394567536136,0,null,[[10,37],[7,[11]]]]]]]],[0,0,false,null,144652989697720,36,[[-1,23,null,0,false,false,false,536034037828494,null],[143,36,null,0,false,false,false,540490715103885,null,[[10,33],[8,5],[7,[55]]]],[-1,51,null,0,false,false,false,501578655868131,null]],[[70,47,null,455298548069627,0,null,[[3,0]]],[-1,32,null,439163212218520,2,null,[[0,[133]]]],[143,22,null,957298169968470,0,null,[[10,33],[7,[11]]]],[1,53,\"补间动画\",281629103494158,1,null,[[1,[14]],[3,1],[0,[297]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[2,53,\"补间动画\",175484172445544,1,null,[[1,[14]],[3,1],[0,[298]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[3,53,\"补间动画\",823490951416227,1,null,[[1,[14]],[3,1],[0,[298]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[5,53,\"补间动画\",718707341048496,1,null,[[1,[14]],[3,1],[0,[282]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[6,53,\"补间动画\",734836001913130,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[7,53,\"补间动画\",129251951845102,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]]]],[0,0,false,null,703032852322964,37,[[142,64,null,1,false,false,false,703623263471202,null,[[4,7]]]],[[1,53,\"补间动画\",977494348803681,1,null,[[1,[14]],[3,1],[0,[282]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[2,53,\"补间动画\",251313297293600,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[3,53,\"补间动画\",253106545738752,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[5,53,\"补间动画\",375310017150648,1,null,[[1,[14]],[3,1],[0,[299]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[6,53,\"补间动画\",712630075213279,1,null,[[1,[14]],[3,1],[0,[300]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[7,53,\"补间动画\",453353269950456,1,null,[[1,[14]],[3,1],[0,[300]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]]]],[0,0,false,null,128931129594371,38,[[142,64,null,1,false,false,false,771569866379115,null,[[4,6]]]],[[-1,48,null,774640874936270,0,null,[[5,[112]],[16,false]]],[141,41,null,912742656935301,0,null,[[1,[12]]]],[141,41,null,304581959290216,0,null,[[1,[139]]]],[6,31,\"补间动画\",938201395980033,1,null,[[1,[14]],[3,2],[0,[60]],[0,[60]],[0,[61]],[18,0],[3,0],[3,0],[3,1],[0,[1]]]],[141,34,null,996741287862876,0,null,[[2,[\"领养询问/确认放弃\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,809211204390640,2,null,[[0,[133]]]],[-1,48,null,780197476374181,0,null,[[5,[112]],[16,true]]],[-1,37,null,720732125149773,0,null,[[6,\"结局11一个人也很自在\"]]]]]]],[3,[false,\"不领养（有流浪鲨鱼）\"],false,null,295501588894850,39,[[-1,20,null,0,false,false,false,0,false,[[1,[39]]]]],[],[[3,[true,\"点击不要3\"],false,null,798254266411457,40,[[-1,20,null,0,false,false,false,0,false,[[1,[515]]]]],[],[[0,0,false,null,881040311817538,41,[[142,64,null,1,false,false,false,926246817194927,null,[[4,3]]]],[[143,22,null,636689794401185,0,null,[[10,37],[7,[294,[4,61]]]]],[3,31,\"补间动画\",819473293739154,1,null,[[1,[14]],[3,0],[0,[295,[4,61]]],[0,[296,[4,61]]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[143,38,null,810294864927648,0,null,[[10,33],[7,[1]]]]]],[0,0,false,null,464253856825036,42,[[143,36,null,0,false,false,false,106779487108444,null,[[10,37],[8,3],[7,[1]]]],[143,36,null,0,false,false,false,486486236055616,null,[[10,37],[8,4],[7,[11]]]],[-1,51,null,0,false,false,false,124409710708807,null]],[[141,34,null,922460928979659,0,null,[[2,[\"领养询问/滑走的音效\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,703641629980674,0,null,[[10,37],[7,[11]]]]]],[0,0,false,null,445148890647166,43,[[143,36,null,0,false,false,false,917251841185643,null,[[10,37],[8,3],[7,[16]]]],[143,36,null,0,false,false,false,216984206163436,null,[[10,37],[8,4],[7,[1]]]],[-1,51,null,0,false,false,false,740002618269165,null]],[[141,34,null,421692011558556,0,null,[[2,[\"领养询问/滑走的音效2\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,893480921121995,0,null,[[10,37],[7,[11]]]]]],[0,0,false,null,239409130771124,44,[[143,36,null,0,false,false,false,686116225694919,null,[[10,37],[8,3],[7,[13]]]],[143,36,null,0,false,false,false,349900680536258,null,[[10,37],[8,4],[7,[16]]]],[-1,51,null,0,false,false,false,190932557843432,null]],[[141,34,null,132235311529857,0,null,[[2,[\"领养询问/滑走的音效3\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,194839883515670,0,null,[[10,37],[7,[11]]]]]],[0,0,false,null,273074104355125,45,[[143,36,null,0,false,false,false,166007032677176,null,[[10,37],[8,3],[7,[112]]]],[143,36,null,0,false,false,false,120080317668392,null,[[10,37],[8,4],[7,[13]]]],[-1,51,null,0,false,false,false,193509449238578,null]],[[141,34,null,613372090997330,0,null,[[2,[\"领养询问/滑走的音效4\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[143,22,null,555657710223823,0,null,[[10,37],[7,[11]]]]]]]],[0,0,false,null,501755271616349,46,[[-1,23,null,0,false,false,false,540413561002150,null],[143,36,null,0,false,false,false,954730175555936,null,[[10,33],[8,5],[7,[55]]]],[-1,51,null,0,false,false,false,695759048765428,null]],[[70,47,null,436461952334019,0,null,[[3,0]]],[-1,32,null,385132267847758,2,null,[[0,[133]]]],[143,22,null,155209492015990,0,null,[[10,33],[7,[11]]]],[1,53,\"补间动画\",465822461333622,1,null,[[1,[14]],[3,1],[0,[297]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[2,53,\"补间动画\",393162666772427,1,null,[[1,[14]],[3,1],[0,[298]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[3,53,\"补间动画\",460543671770491,1,null,[[1,[14]],[3,1],[0,[298]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[5,53,\"补间动画\",674696525565363,1,null,[[1,[14]],[3,1],[0,[282]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[6,53,\"补间动画\",383985813581001,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[7,53,\"补间动画\",479274393721037,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]]]],[0,0,false,null,311822301904363,47,[[142,64,null,1,false,false,false,897865095351970,null,[[4,7]]]],[[1,53,\"补间动画\",230336152693558,1,null,[[1,[14]],[3,1],[0,[282]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[2,53,\"补间动画\",617868940890803,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[3,53,\"补间动画\",156771938025305,1,null,[[1,[14]],[3,1],[0,[283]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[5,53,\"补间动画\",771265318563172,1,null,[[1,[14]],[3,1],[0,[299]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[6,53,\"补间动画\",659544490516371,1,null,[[1,[14]],[3,1],[0,[300]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]],[7,53,\"补间动画\",904196707029762,1,null,[[1,[14]],[3,1],[0,[300]],[0,[133]],[18,0],[3,0],[3,0],[3,0],[0,[1]]]]]],[0,0,false,null,869074778059816,48,[[142,64,null,1,false,false,false,159255436127116,null,[[4,6]]]],[[-1,48,null,810349829685465,0,null,[[5,[112]],[16,false]]],[141,41,null,180055381596656,0,null,[[1,[12]]]],[141,41,null,156359425314779,0,null,[[1,[139]]]],[6,31,\"补间动画\",734114417151978,1,null,[[1,[14]],[3,2],[0,[60]],[0,[60]],[0,[61]],[18,0],[3,0],[3,0],[3,1],[0,[1]]]],[141,34,null,551063617648302,0,null,[[2,[\"领养询问/确认放弃\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,335596396384562,2,null,[[0,[133]]]],[-1,48,null,135651902282217,0,null,[[5,[112]],[16,true]]],[-1,37,null,870517177545975,0,null,[[6,\"结局9&10特殊喂养\"]]]]]]],[3,[true,\"等待40秒\"],false,null,306492099031087,49,[[-1,20,null,0,false,false,false,0,false,[[1,[516]]]]],[],[[0,0,false,null,899156471800179,50,[[143,36,null,0,false,false,false,828069292534991,null,[[10,31],[8,5],[7,[373]]]],[-1,51,null,0,false,false,false,434584330529685,null]],[[8,47,null,258135727660110,0,null,[[3,1]]],[141,34,null,144710572018721,0,null,[[2,[\"领养询问/等待40秒\",false]],[3,0],[0,[11]],[0,[11]],[1,[14]]]],[-1,32,null,564826578687453,2,null,[[0,[362]]]],[8,47,null,700257077211340,0,null,[[3,0]]]]]]]]]],[[\"logo/咚 小提示\",[[\"audio/webm; codecs=opus\",\".webm\",9956]],false],[\"logo/logo语音1\",[[\"audio/webm; codecs=opus\",\".webm\",16353]],false],[\"logo/en\",[[\"audio/webm; codecs=opus\",\".webm\",11678]],false],[\"logo/logo语音2\",[[\"audio/webm; codecs=opus\",\".webm\",5656]],false],[\"logo/logo语音3\",[[\"audio/webm; codecs=opus\",\".webm\",13416]],false],[\"logo/logo语音4\",[[\"audio/webm; codecs=opus\",\".webm\",6820]],false],[\"logo/logo语音5\",[[\"audio/webm; codecs=opus\",\".webm\",40169]],false],[\"选语言/咚当\",[[\"audio/webm; codecs=opus\",\".webm\",9681]],false],[\"选语言/选了日语\",[[\"audio/webm; codecs=opus\",\".webm\",22684]],false],[\"选语言/选了英语\",[[\"audio/webm; codecs=opus\",\".webm\",25533]],false],[\"选语言/选了中文\",[[\"audio/webm; codecs=opus\",\".webm\",9240]],false],[\"选语言/我觉得要不选中文吧？\",[[\"audio/webm; codecs=opus\",\".webm\",22055]],false],[\"选语言/小鲨鱼被点击\",[[\"audio/webm; codecs=opus\",\".webm\",3945]],false],[\"选语言/不要再点我啦\",[[\"audio/webm; codecs=opus\",\".webm\",18756]],false],[\"领养询问/滑走的音效\",[[\"audio/webm; codecs=opus\",\".webm\",4951]],false],[\"领养询问/确认放弃\",[[\"audio/webm; codecs=opus\",\".webm\",4348]],false],[\"领养询问/确认领养\",[[\"audio/webm; codecs=opus\",\".webm\",15362]],false],[\"领养询问/滑走的音效2\",[[\"audio/webm; codecs=opus\",\".webm\",5004]],false],[\"领养询问/滑走的音效3\",[[\"audio/webm; codecs=opus\",\".webm\",5062]],false],[\"领养询问/滑走的音效4\",[[\"audio/webm; codecs=opus\",\".webm\",4946]],false],[\"领养询问/等待40秒\",[[\"audio/webm; codecs=opus\",\".webm\",27819]],false],[\"结局通用音效/获得结局\",[[\"audio/webm; codecs=opus\",\".webm\",11195]],false],[\"结局通用音效/跳转到领养询问\",[[\"audio/webm; codecs=opus\",\".webm\",13666]],false],[\"喂养界面/新手引导/可以给我吗\",[[\"audio/webm; codecs=opus\",\".webm\",16407]],false],[\"喂养界面/新手引导/我想吃苹果\",[[\"audio/webm; codecs=opus\",\".webm\",15878]],false],[\"喂养界面/新手引导/对对 就是那个 \",[[\"audio/webm; codecs=opus\",\".webm\",16672]],false],[\"喂养界面/新手引导/你好\",[[\"audio/webm; codecs=opus\",\".webm\",6617]],false],[\"喂养界面/喂食/啊！我怎么……完全变成方块了\",[[\"audio/webm; codecs=opus\",\".webm\",44158]],false],[\"喂养界面/喂食/吃得很满足啦\",[[\"audio/webm; codecs=opus\",\".webm\",35956]],false],[\"喂养界面/喂食/好好吃哦！谢谢你！\",[[\"audio/webm; codecs=opus\",\".webm\",25972]],false],[\"喂养界面/喂食/好想锻炼一下消消食啊\",[[\"audio/webm; codecs=opus\",\".webm\",57560]],false],[\"喂养界面/喂食/嗯？鲨鱼应该吃鱼肉？\",[[\"audio/webm; codecs=opus\",\".webm\",41224]],false],[\"喂养界面/喂食/鲨鱼吃苹果也很正常嘛\",[[\"audio/webm; codecs=opus\",\".webm\",29685]],false],[\"喂养界面/喂食/我爱吃苹果！\",[[\"audio/webm; codecs=opus\",\".webm\",17187]],false],[\"喂养界面/喂食/我会不会吃胖了？\",[[\"audio/webm; codecs=opus\",\".webm\",20589]],false],[\"喂养界面/喂食/谢谢你愿意接纳我\",[[\"audio/webm; codecs=opus\",\".webm\",33613]],false],[\"喂养界面/喂食/已经不饿啦\",[[\"audio/webm; codecs=opus\",\".webm\",13031]],false],[\"喂养界面/喂食/糟了，好像身体卡住了\",[[\"audio/webm; codecs=opus\",\".webm\",36915]],false],[\"喂养界面/喂食/真的不能再吃了\",[[\"audio/webm; codecs=opus\",\".webm\",34567]],false],[\"喂养界面/喂食/终于吃到了，谢谢你！\",[[\"audio/webm; codecs=opus\",\".webm\",35259]],false],[\"喂养界面/喂食/方形鲨鱼\",[[\"audio/webm; codecs=opus\",\".webm\",196292]],false],[\"喂养界面/喂食/方形鲨鱼_BGM\",[[\"audio/webm; codecs=opus\",\".webm\",211904]],false],[\"喂养界面/喂食/嗝兹嗝兹_01\",[[\"audio/webm; codecs=opus\",\".webm\",45672]],false],[\"喂养界面/不喂/唉再见了，我要出门去找食物吃了……【结局3】……\",[[\"audio/webm; codecs=opus\",\".webm\",70948]],false],[\"喂养界面/不喂/拜托？\",[[\"audio/webm; codecs=opus\",\".webm\",9550]],false],[\"喂养界面/不喂/抱歉，如果我不是给人带来麻烦的宠物就好了\",[[\"audio/webm; codecs=opus\",\".webm\",57466]],false],[\"喂养界面/不喂/好饿，要饿晕了\",[[\"audio/webm; codecs=opus\",\".webm\",42986]],false],[\"喂养界面/不喂/好饿哦……\",[[\"audio/webm; codecs=opus\",\".webm\",19194]],false],[\"喂养界面/不喂/就差一点就可以吃到了\",[[\"audio/webm; codecs=opus\",\".webm\",33912]],false],[\"喂养界面/不喂/可以帮帮我吗？\",[[\"audio/webm; codecs=opus\",\".webm\",19412]],false],[\"喂养界面/不喂/可以给我苹果吗？\",[[\"audio/webm; codecs=opus\",\".webm\",19673]],false],[\"喂养界面/不喂/明明苹果就在这么近的地方……\",[[\"audio/webm; codecs=opus\",\".webm\",34714]],false],[\"喂养界面/不喂/莫非……其实你讨厌我？\",[[\"audio/webm; codecs=opus\",\".webm\",36140]],false],[\"喂养界面/不喂/苹果是属于你的，我没办法吃到\",[[\"audio/webm; codecs=opus\",\".webm\",68583]],false],[\"喂养界面/不喂/其实……我提前吃了点小零食，不怎么饿，嘿嘿\",[[\"audio/webm; codecs=opus\",\".webm\",60561]],false],[\"喂养界面/不喂/为什么无动于衷呢？\",[[\"audio/webm; codecs=opus\",\".webm\",28896]],false],[\"喂养界面/不喂/我闻到甜甜的香味了！\",[[\"audio/webm; codecs=opus\",\".webm\",41580]],false],[\"喂养界面/不喂/照料宠物让你感到很枯燥吗\",[[\"audio/webm; codecs=opus\",\".webm\",48413]],false],[\"喂养界面/锻炼/1 瘦下来咯\",[[\"audio/webm; codecs=opus\",\".webm\",16385]],false],[\"喂养界面/锻炼/可以让我休息吗……\",[[\"audio/webm; codecs=opus\",\".webm\",49702]],false],[\"喂养界面/锻炼/快离开这恶劣的主人，不然你也有危险！\",[[\"audio/webm; codecs=opus\",\".webm\",32205]],false],[\"喂养界面/锻炼/鲨鱼也要健身吗？\",[[\"audio/webm; codecs=opus\",\".webm\",34328]],false],[\"喂养界面/锻炼/身上有点酸疼……是正常的吗？\",[[\"audio/webm; codecs=opus\",\".webm\",52552]],false],[\"喂养界面/锻炼/身体有点痛，而且好困啊……\",[[\"audio/webm; codecs=opus\",\".webm\",59627]],false],[\"喂养界面/锻炼/我……\",[[\"audio/webm; codecs=opus\",\".webm\",12327]],false],[\"喂养界面/锻炼/我可以去海里帮你抓鱼！\",[[\"audio/webm; codecs=opus\",\".webm\",26822]],false],[\"喂养界面/锻炼/我是超级肌肉鲨！\",[[\"audio/webm; codecs=opus\",\".webm\",41971]],false],[\"喂养界面/锻炼/我要是去游泳，算不算健身？\",[[\"audio/webm; codecs=opus\",\".webm\",37770]],false],[\"喂养界面/锻炼/这个东西是哑铃吗？\",[[\"audio/webm; codecs=opus\",\".webm\",31963]],false],[\"喂养界面/锻炼/累死 倒地\",[[\"audio/webm; codecs=opus\",\".webm\",20694]],false],[\"喂养界面/锻炼/瘦下来咯 音效\",[[\"audio/webm; codecs=opus\",\".webm\",16034]],false],[\"喂养界面/睡眠/快睡着时突然腿抽搐一下是为什么呢？……嗯？我没有腿？\",[[\"audio/webm; codecs=opus\",\".webm\",76799]],false],[\"喂养界面/睡眠/你不会一直在盯着我睡觉吧？\",[[\"audio/webm; codecs=opus\",\".webm\",33439]],false],[\"喂养界面/睡眠/神清气爽！\",[[\"audio/webm; codecs=opus\",\".webm\",26163]],false],[\"喂养界面/睡眠/完全睡饱啦！\",[[\"audio/webm; codecs=opus\",\".webm\",26000]],false],[\"喂养界面/睡眠/我不困\",[[\"audio/webm; codecs=opus\",\".webm\",9681]],false],[\"喂养界面/睡眠/我刚梦见自己被吃得只剩鱼骨了，吓死我了\",[[\"audio/webm; codecs=opus\",\".webm\",69101]],false],[\"喂养界面/睡眠/我睡觉时有冒泡泡吗？\",[[\"audio/webm; codecs=opus\",\".webm\",27430]],false],[\"喂养界面/垃圾桶/删除音效\",[[\"audio/webm; codecs=opus\",\".webm\",11858]],false],[\"喂养界面/垃圾桶/ZZ被删\",[[\"audio/webm; codecs=opus\",\".webm\",62897]],false],[\"喂养界面/垃圾桶/啊！你把重要的东西删掉了……\",[[\"audio/webm; codecs=opus\",\".webm\",97295]],false],[\"喂养界面/戴上花/戴上花\",[[\"audio/webm; codecs=opus\",\".webm\",171810]],false],[\"喂养界面/苹果反弹\",[[\"audio/webm; codecs=opus\",\".webm\",2675]],false],[\"喂养界面/咀嚼\",[[\"audio/webm; codecs=opus\",\".webm\",11009]],false],[\"喂养界面/橡皮鸭子\",[[\"audio/webm; codecs=opus\",\".webm\",6492]],false],[\"喂养界面/你……没什么\",[[\"audio/webm; codecs=opus\",\".webm\",27522]],false],[\"室外/大自然鸟叫\",[[\"audio/webm; codecs=opus\",\".webm\",1267429]],false],[\"室外/出门和回家音效\",[[\"audio/webm; codecs=opus\",\".webm\",11708]],false],[\"室外/你……不讨厌我吗？\",[[\"audio/webm; codecs=opus\",\".webm\",23490]],false],[\"室外/你明明看到我了……\",[[\"audio/webm; codecs=opus\",\".webm\",25742]],false],[\"室外/展开信\",[[\"audio/webm; codecs=opus\",\".webm\",6907]],false],[\"开关灯/开关灯的音效\",[[\"audio/webm; codecs=opus\",\".webm\",9257]],false],[\"开关灯/信号噪音\",[[\"audio/webm; codecs=opus\",\".webm\",926627]],false],[\"开关灯/啊……（有些惨痛）\",[[\"audio/webm; codecs=opus\",\".webm\",55744]],false],[\"开关灯/啊……终于……终于开灯了，谢谢您，请不要再这样吓我了……好可怕……\",[[\"audio/webm; codecs=opus\",\".webm\",114984]],false],[\"开关灯/拜托……可以先开个灯吗？我真的非常非常害怕关灯，要是关灯太久的话……\",[[\"audio/webm; codecs=opus\",\".webm\",120174]],false],[\"开关灯/呼……黑暗好吓人啊\",[[\"audio/webm; codecs=opus\",\".webm\",35921]],false],[\"开关灯/其实……我有点怕黑， 可以开灯吗？\",[[\"audio/webm; codecs=opus\",\".webm\",55959]],false],[\"开关灯/求……求你了快开灯吧，是我哪里做得不好让你觉得无趣了吗，真的这么讨厌看到我吗？我……我会尽力让你开心的，可以开灯吗？\",[[\"audio/webm; codecs=opus\",\".webm\",162940]],false],[\"开关灯/她的眼睛看到我了……\",[[\"audio/webm; codecs=opus\",\".webm\",346941]],false],[\"开关灯/哇！好黑！是你关了灯吗？\",[[\"audio/webm; codecs=opus\",\".webm\",45309]],false],[\"开关灯/我害怕关灯……\",[[\"audio/webm; codecs=opus\",\".webm\",24902]],false],[\"开关灯/啊……（有些惨痛）2\",[[\"audio/webm; codecs=opus\",\".webm\",57592]],false],[\"开关灯/被删除后的雪花噪音\",[[\"audio/webm; codecs=opus\",\".webm\",939422]],false],[\"开关灯/阶段345\",[[\"audio/webm; codecs=opus\",\".webm\",1042778]],false],[\"开关灯/打不开灯\",[[\"audio/webm; codecs=opus\",\".webm\",7542]],false],[\"开关灯/不妙震撼地开灯\",[[\"audio/webm; codecs=opus\",\".webm\",38174]],false],[\"流浪鲨鱼带回家/呼……这一次终于不用 再被 变成 电子程序了\",[[\"audio/webm; codecs=opus\",\".webm\",204418]],false],[\"流浪鲨鱼带回家/家里的鲨鱼：哇！新朋友！？\",[[\"audio/webm; codecs=opus\",\".webm\",75704]],false],[\"不领养但带回鲨鱼/不领养，但带回鲨鱼\",[[\"audio/webm; codecs=opus\",\".webm\",436833]],false],[\"不领养但带回鲨鱼/我……明白了。\",[[\"audio/webm; codecs=opus\",\".webm\",148303]],false],[\"不领养但带回鲨鱼/谢谢你……您……谢谢您……\",[[\"audio/webm; codecs=opus\",\".webm\",72707]],false],[\"最终结局/点掉叉叉\",[[\"audio/webm; codecs=opus\",\".webm\",389587]],false],[\"最终结局/好结局\",[[\"audio/webm; codecs=opus\",\".webm\",980687]],false],[\"最终结局/坏结局\",[[\"audio/webm; codecs=opus\",\".webm\",981270]],false],[\"最终结局/一震诡异不妙的氛围声\",[[\"audio/webm; codecs=opus\",\".webm\",104924]],false],[\"普通结局BGM\",[[\"audio/webm; codecs=opus\",\".webm\",442851]],true],[\"选语言BGM\",[[\"audio/webm; codecs=opus\",\".webm\",471199]],true],[\"有点悲伤结局BGM\",[[\"audio/webm; codecs=opus\",\".webm\",1168933]],true],[\"0\",[[\"audio/webm; codecs=opus\",\".webm\",1618911]],true],[\"1\",[[\"audio/webm; codecs=opus\",\".webm\",1021526]],true],[\"2\",[[\"audio/webm; codecs=opus\",\".webm\",2401037]],true],[\"关闭叉叉发现鲨鱼\",[[\"audio/webm; codecs=opus\",\".webm\",3519974]],true],[\"3\",[[\"audio/webm; codecs=opus\",\".webm\",1430022]],true],[\"关灯后的BGM\",[[\"audio/webm; codecs=opus\",\".webm\",1177436]],true],[\"特殊喂养界面BGM\",[[\"audio/webm; codecs=opus\",\".webm\",1441857]],true],[\"好结局BGM\",[[\"audio/webm; codecs=opus\",\".webm\",1838274]],true],[\"最终坏结局\",[[\"audio/webm; codecs=opus\",\".webm\",2510131]],true]],\"media/\",true,120,120,4,false,\"nearest\",false,\"10000.0\",false,false,4,0,277,false,true,1,true,0.7853981633974483,[],\"icons/\",[],\"normalized\",\"ymxsq6vb1xe\",\"fonts/\",[[\"时间轴 1\",5,0.1,\"default\",\"default\",[],0,0,1,\"\",1,1]],\"high-performance\",[],\"standard\",\"vsync\",\"\",\"icons/loading-logo.png\",false,4,false,null,[],\"folders\",1,10000,false]}"
	},
	"scripts/opus.wasm.js": {
		"type": "application/javascript",
		"str": "((function() {\n    \"use strict\";\n    var VINT_SIZES = [0, 8, 7, 7, 6, 6, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\n    var VINT_MASKS = [255, 127, 63, 31, 15, 7, 3, 1, 0];\n    var OPUS_SIG = [65, 95, 79, 80, 85, 83];\n    \n    var _decoder = null;\n    var _audioBuffer = null;\n    var _inputPointer = null;\n    var _outputBuffer = null;\n    var _outputPointer = null;\n    var _outputOffset = 0;\n    \n    // Ready promise resolves when onRuntimeInitialized called\n    let readyPromiseResolve = null;\n    const readyPromise = new Promise(resolve => readyPromiseResolve = resolve);\n    \n    Module = {\n        // When WASM has finished loading, resolve the ready promise\n        onRuntimeInitialized: readyPromiseResolve\n    };\n\n    function ReadVInt(data, position, length, initialMask) {\n        var value = data.getUint8(position) & initialMask;\n        for (var i = 1; i < length; i++) value = (value << 8) + data.getUint8(position + i);\n        return value\n    }\n\n    function ParseIntTag(data, position, size)\n    {\n        switch (size) {\n            case 1: \n                return data.getInt8(position);\n            case 2:\n                return data.getInt16(position);\n            case 3:\n                return ReadInt24(data, position);\n            case 4: \n                return data.getInt32(position);\n            default:\n                throw new Error(\"Invalid size\");\n        }\n    }\n\n    function ReadInt24(data, position)\n    {\n        var first = data.getInt8(position);\n        var sign = first >> 7;\n        var value = first & 0b1111111;\n\n        value = (value << 8) | data.getUint8(position);\n        value = (value << 8) | data.getUint8(position);\n\n        return sign === 1 ? -value : value;\n    }\n\n    function CalculateAudioBufferSize(rate, channels, duration) {\n        return rate / 1e3 * channels * duration\n    }\n\n    function CreateDecoder(duration) {\n        var frequency = 48e3;\n        var channels = 1;\n        var bufferSize = 2048;\n        // the true size should be \"duration - codecDelay\"\n        // but we also write the \"discardpadding\" at the end \n        // of the buffer before discarding it, so we need 1 opus frame of\n        // extra space. max size of a frame is 120ms\n        var length = CalculateAudioBufferSize(frequency, channels, duration + 120);\n        _audioBuffer = new Float32Array(length);\n        if (!_outputBuffer) {\n            _outputPointer = Module._malloc(bufferSize << 2);\n            _outputBuffer = new Float32Array(Module.HEAPU8.buffer, _outputPointer, bufferSize)\n        }\n        if (!_inputPointer) {\n            _inputPointer = Module._malloc(bufferSize)\n        }\n        _decoder = Module._create_decoder(frequency, channels);\n        if (_decoder < 0) throw new Error(\"Failed to create decoder\")\n    }\n\n    function DestroyDecoder() {\n        Module._destroy_decoder(_decoder);\n        _decoder = null;\n        _outputOffset = 0;\n    }\n    \n    /////////////////////////////////////////////////////////\n    // Main job handler\n    self.JobHandlers[\"OpusDecode\"] = async function OpusDecode(params)\n    {\n        // Wait for WASM to finish loading if necessary\n        await readyPromise;\n        \n        // Decode the Opus compressed audio to a float sample buffer and return the ArrayBuffer\n        const arrayBuffer = params[\"arrayBuffer\"];\n        ParseMaster(new DataView(arrayBuffer), 0, arrayBuffer.byteLength);  \n        const end = _outputOffset;\n        DestroyDecoder();\n        const outputBuffer = _audioBuffer.buffer.slice(0, end * 4);\n        _audioBuffer = null;\n        return {\n            result: outputBuffer,\n            transferables: [outputBuffer]\n        };\n    };\n\n    function WriteOutput (ret) {\n        if (ret + _outputOffset > 0) {\n            var tempBuffer;\n            var writePosition = _outputOffset;\n            if (_outputOffset < 0) {\n                var trim = -_outputOffset;\n                tempBuffer = new Float32Array(Module.HEAPU8.buffer, _outputPointer + trim * 4, ret - trim);\n                writePosition = 0;\n            }\n            else {\n                tempBuffer = new Float32Array(Module.HEAPU8.buffer, _outputPointer, ret);\n            }\n\n            if (writePosition + tempBuffer.length > _audioBuffer.length)\n                throw new Error(\"Buffer overflow\");\n\n            _audioBuffer.set(tempBuffer, writePosition);\n        }\n\n        _outputOffset += ret;\n    }\n\n    function ParseFrame(data) {\n        var length = data.length;\n        Module.HEAPU8.set(data, _inputPointer);\n        var ret = Module._decode_frame(_decoder, _inputPointer, length, _outputPointer, 4096);\n        if (ret > 0) {\n            WriteOutput(ret);\n        } else {\n            throw new Error(\"Failed to parse frame\")\n        }\n    }\n\n    function ParseBlock(data, position, size) {\n        var firstByte, tagLength, mask, trackEntry, timeCode, flags, lacing;\n        firstByte = data.getUint8(position);\n        tagLength = VINT_SIZES[firstByte];\n        mask = VINT_MASKS[tagLength];\n        trackEntry = ReadVInt(data, position, tagLength, mask);\n        position += tagLength;\n        timeCode = data.getInt16(position);\n        position += 2;\n        flags = data.getUint8(position);\n        position += 1;\n        size -= tagLength + 3;\n        lacing = flags & 6;\n        if (lacing) throw \"Lacing not supported\";\n        ParseFrame(new Uint8Array(data.buffer, position, size))\n    }\n\n    function ParseDuration(data, position, size) {\n        var duration;\n        if (size == 4) duration = data.getFloat32(position);\n        else if (size == 8) duration = data.getFloat64(position);\n        else throw new Error(\"Invalid size\");\n        CreateDecoder(duration)\n    }\n\n    function ParseDiscard(data, position, size) {\n        // NOTE discard in an integer\n        // postive values are trailing, negative are leading\n        // value is in nanoseconds\n        var discardDuration = ParseIntTag(data, position, size);\n        if (discardDuration < 0)\n            throw new Error(\"Cannot discard leading block data\");\n        var discardFrames = Math.floor(discardDuration * 0.000048);\n        _outputOffset -= discardFrames;\n    }\n\n    function ParseDelay(data, position, size) {\n        var discardDuration = ReadVInt(data, position, size, 0xFF);\n        _outputOffset = -Math.floor(discardDuration * 0.000048)\n    }\n\n    function TestOpus(data, position) {\n        for (var i = 0, l = 6; i < l; i++) {\n            if (data.getUint8(position + i) != OPUS_SIG[i]) throw new Error(\"Contains non opus data\")\n        }\n    }\n\n    function ParseMaster(data, position, length) {\n        var firstByte, tagLength, id, sizeLength, mask, size;\n        var end = position + length;\n        while (position < end) {\n            firstByte = data.getUint8(position);\n            tagLength = VINT_SIZES[firstByte];\n            if (tagLength > 4 || tagLength == 0) throw \"Invalid tag length \" + tagLength;\n            id = ReadVInt(data, position, tagLength, 255);\n            position += tagLength;\n            firstByte = data.getUint8(position);\n            sizeLength = VINT_SIZES[firstByte];\n            mask = VINT_MASKS[sizeLength];\n            if (sizeLength == 0) throw \"Invalid size length\";\n            size = ReadVInt(data, position, sizeLength, mask);\n            position += sizeLength;\n            switch (id) {\n                case 408125543: // Segment\n                case 357149030: // Info\n                case 524531317: // Cluster\n                case 374648427: // Tracks\n                case 174:       // TrackEntry\n                case 160:       // BlockGroup\n                    ParseMaster(data, position, size);\n                    break;\n                case 17545:     // Duration\n                    ParseDuration(data, position, size);\n                    break;\n                case 22186:     // CodecDelay\n                    ParseDelay(data, position, size);\n                    break;\n                case 30114:     // DiscardPadding\n                    ParseDiscard(data, position, size);\n                    break;\n                case 134:       // CodecID\n                    TestOpus(data, position, size);\n                    break;\n                case 161:       // Block\n                case 163:       // SimpleBlock\n                    ParseBlock(data, position, size);\n                    break;\n            }\n            position += size\n        }\n    }\n}))();\nvar Module;\nif (!Module) Module = (typeof Module !== \"undefined\" ? Module : null) || {};\nvar moduleOverrides = {};\nfor (var key in Module) {\n    if (Module.hasOwnProperty(key)) {\n        moduleOverrides[key] = Module[key]\n    }\n}\nvar ENVIRONMENT_IS_WEB = false;\nvar ENVIRONMENT_IS_WORKER = false;\nvar ENVIRONMENT_IS_NODE = false;\nvar ENVIRONMENT_IS_SHELL = false;\nif (Module[\"ENVIRONMENT\"]) {\n    if (Module[\"ENVIRONMENT\"] === \"WEB\") {\n        ENVIRONMENT_IS_WEB = true\n    } else if (Module[\"ENVIRONMENT\"] === \"WORKER\") {\n        ENVIRONMENT_IS_WORKER = true\n    } else if (Module[\"ENVIRONMENT\"] === \"NODE\") {\n        ENVIRONMENT_IS_NODE = true\n    } else if (Module[\"ENVIRONMENT\"] === \"SHELL\") {\n        ENVIRONMENT_IS_SHELL = true\n    } else {\n        throw new Error(\"The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.\")\n    }\n} else {\n    ENVIRONMENT_IS_WEB = typeof window === \"object\";\n    ENVIRONMENT_IS_WORKER = typeof importScripts === \"function\";\n    ENVIRONMENT_IS_NODE = typeof process === \"object\" && typeof require === \"function\" && !ENVIRONMENT_IS_WEB && !ENVIRONMENT_IS_WORKER;\n    ENVIRONMENT_IS_SHELL = !ENVIRONMENT_IS_WEB && !ENVIRONMENT_IS_NODE && !ENVIRONMENT_IS_WORKER\n}\nif (ENVIRONMENT_IS_NODE) {\n    if (!Module[\"print\"]) Module[\"print\"] = console.log;\n    if (!Module[\"printErr\"]) Module[\"printErr\"] = console.warn;\n    var nodeFS;\n    var nodePath;\n    Module[\"read\"] = function shell_read(filename, binary) {\n        if (!nodeFS) nodeFS = require(\"fs\");\n        if (!nodePath) nodePath = require(\"path\");\n        filename = nodePath[\"normalize\"](filename);\n        var ret = nodeFS[\"readFileSync\"](filename);\n        return binary ? ret : ret.toString()\n    };\n    Module[\"readBinary\"] = function readBinary(filename) {\n        var ret = Module[\"read\"](filename, true);\n        if (!ret.buffer) {\n            ret = new Uint8Array(ret)\n        }\n        assert(ret.buffer);\n        return ret\n    };\n    Module[\"load\"] = function load(f) {\n        globalEval(read(f))\n    };\n    if (!Module[\"thisProgram\"]) {\n        if (process[\"argv\"].length > 1) {\n            Module[\"thisProgram\"] = process[\"argv\"][1].replace(/\\\\/g, \"/\")\n        } else {\n            Module[\"thisProgram\"] = \"unknown-program\"\n        }\n    }\n    Module[\"arguments\"] = process[\"argv\"].slice(2);\n    if (typeof module !== \"undefined\") {\n        module[\"exports\"] = Module\n    }\n    process[\"on\"](\"uncaughtException\", (function(ex) {\n        if (!(ex instanceof ExitStatus)) {\n            throw ex\n        }\n    }));\n    Module[\"inspect\"] = (function() {\n        return \"[Emscripten Module object]\"\n    })\n} else if (ENVIRONMENT_IS_SHELL) {\n    if (!Module[\"print\"]) Module[\"print\"] = print;\n    if (typeof printErr != \"undefined\") Module[\"printErr\"] = printErr;\n    if (typeof read != \"undefined\") {\n        Module[\"read\"] = read\n    } else {\n        Module[\"read\"] = function shell_read() {\n            throw \"no read() available\"\n        }\n    }\n    Module[\"readBinary\"] = function readBinary(f) {\n        if (typeof readbuffer === \"function\") {\n            return new Uint8Array(readbuffer(f))\n        }\n        var data = read(f, \"binary\");\n        assert(typeof data === \"object\");\n        return data\n    };\n    if (typeof scriptArgs != \"undefined\") {\n        Module[\"arguments\"] = scriptArgs\n    } else if (typeof arguments != \"undefined\") {\n        Module[\"arguments\"] = arguments\n    }\n    if (typeof quit === \"function\") {\n        Module[\"quit\"] = (function(status, toThrow) {\n            quit(status)\n        })\n    }\n} else if (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n    Module[\"read\"] = function shell_read(url) {\n        var xhr = new XMLHttpRequest;\n        xhr.open(\"GET\", url, false);\n        xhr.send(null);\n        return xhr.responseText\n    };\n    if (ENVIRONMENT_IS_WORKER) {\n        Module[\"readBinary\"] = function readBinary(url) {\n            var xhr = new XMLHttpRequest;\n            xhr.open(\"GET\", url, false);\n            xhr.responseType = \"arraybuffer\";\n            xhr.send(null);\n            return new Uint8Array(xhr.response)\n        }\n    }\n    Module[\"readAsync\"] = function readAsync(url, onload, onerror) {\n        var xhr = new XMLHttpRequest;\n        xhr.open(\"GET\", url, true);\n        xhr.responseType = \"arraybuffer\";\n        xhr.onload = function xhr_onload() {\n            if (xhr.status == 200 || xhr.status == 0 && xhr.response) {\n                onload(xhr.response)\n            } else {\n                onerror()\n            }\n        };\n        xhr.onerror = onerror;\n        xhr.send(null)\n    };\n    if (typeof arguments != \"undefined\") {\n        Module[\"arguments\"] = arguments\n    }\n    if (typeof console !== \"undefined\") {\n        if (!Module[\"print\"]) Module[\"print\"] = function shell_print(x) {\n            console.log(x)\n        };\n        if (!Module[\"printErr\"]) Module[\"printErr\"] = function shell_printErr(x) {\n            console.warn(x)\n        }\n    } else {\n        var TRY_USE_DUMP = false;\n        if (!Module[\"print\"]) Module[\"print\"] = TRY_USE_DUMP && typeof dump !== \"undefined\" ? (function(x) {\n            dump(x)\n        }) : (function(x) {})\n    }\n    if (ENVIRONMENT_IS_WORKER) {\n        Module[\"load\"] = importScripts\n    }\n    if (typeof Module[\"setWindowTitle\"] === \"undefined\") {\n        Module[\"setWindowTitle\"] = (function(title) {\n            document.title = title\n        })\n    }\n} else {\n    throw \"Unknown runtime environment. Where are we?\"\n}\n\nfunction globalEval(x) {\n    eval.call(null, x)\n}\nif (!Module[\"load\"] && Module[\"read\"]) {\n    Module[\"load\"] = function load(f) {\n        globalEval(Module[\"read\"](f))\n    }\n}\nif (!Module[\"print\"]) {\n    Module[\"print\"] = (function() {})\n}\nif (!Module[\"printErr\"]) {\n    Module[\"printErr\"] = Module[\"print\"]\n}\nif (!Module[\"arguments\"]) {\n    Module[\"arguments\"] = []\n}\nif (!Module[\"thisProgram\"]) {\n    Module[\"thisProgram\"] = \"./this.program\"\n}\nif (!Module[\"quit\"]) {\n    Module[\"quit\"] = (function(status, toThrow) {\n        throw toThrow\n    })\n}\nModule.print = Module[\"print\"];\nModule.printErr = Module[\"printErr\"];\nModule[\"preRun\"] = [];\nModule[\"postRun\"] = [];\nfor (var key in moduleOverrides) {\n    if (moduleOverrides.hasOwnProperty(key)) {\n        Module[key] = moduleOverrides[key]\n    }\n}\nmoduleOverrides = undefined;\nvar Runtime = {\n    setTempRet0: (function(value) {\n        tempRet0 = value;\n        return value\n    }),\n    getTempRet0: (function() {\n        return tempRet0\n    }),\n    stackSave: (function() {\n        return STACKTOP\n    }),\n    stackRestore: (function(stackTop) {\n        STACKTOP = stackTop\n    }),\n    getNativeTypeSize: (function(type) {\n        switch (type) {\n            case \"i1\":\n            case \"i8\":\n                return 1;\n            case \"i16\":\n                return 2;\n            case \"i32\":\n                return 4;\n            case \"i64\":\n                return 8;\n            case \"float\":\n                return 4;\n            case \"double\":\n                return 8;\n            default:\n                {\n                    if (type[type.length - 1] === \"*\") {\n                        return Runtime.QUANTUM_SIZE\n                    } else if (type[0] === \"i\") {\n                        var bits = parseInt(type.substr(1));\n                        assert(bits % 8 === 0);\n                        return bits / 8\n                    } else {\n                        return 0\n                    }\n                }\n        }\n    }),\n    getNativeFieldSize: (function(type) {\n        return Math.max(Runtime.getNativeTypeSize(type), Runtime.QUANTUM_SIZE)\n    }),\n    STACK_ALIGN: 16,\n    prepVararg: (function(ptr, type) {\n        if (type === \"double\" || type === \"i64\") {\n            if (ptr & 7) {\n                assert((ptr & 7) === 4);\n                ptr += 4\n            }\n        } else {\n            assert((ptr & 3) === 0)\n        }\n        return ptr\n    }),\n    getAlignSize: (function(type, size, vararg) {\n        if (!vararg && (type == \"i64\" || type == \"double\")) return 8;\n        if (!type) return Math.min(size, 8);\n        return Math.min(size || (type ? Runtime.getNativeFieldSize(type) : 0), Runtime.QUANTUM_SIZE)\n    }),\n    dynCall: (function(sig, ptr, args) {\n        if (args && args.length) {\n            return Module[\"dynCall_\" + sig].apply(null, [ptr].concat(args))\n        } else {\n            return Module[\"dynCall_\" + sig].call(null, ptr)\n        }\n    }),\n    functionPointers: [],\n    addFunction: (function(func) {\n        for (var i = 0; i < Runtime.functionPointers.length; i++) {\n            if (!Runtime.functionPointers[i]) {\n                Runtime.functionPointers[i] = func;\n                return 2 * (1 + i)\n            }\n        }\n        throw \"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS.\"\n    }),\n    removeFunction: (function(index) {\n        Runtime.functionPointers[(index - 2) / 2] = null\n    }),\n    warnOnce: (function(text) {\n        if (!Runtime.warnOnce.shown) Runtime.warnOnce.shown = {};\n        if (!Runtime.warnOnce.shown[text]) {\n            Runtime.warnOnce.shown[text] = 1;\n            Module.printErr(text)\n        }\n    }),\n    funcWrappers: {},\n    getFuncWrapper: (function(func, sig) {\n        assert(sig);\n        if (!Runtime.funcWrappers[sig]) {\n            Runtime.funcWrappers[sig] = {}\n        }\n        var sigCache = Runtime.funcWrappers[sig];\n        if (!sigCache[func]) {\n            if (sig.length === 1) {\n                sigCache[func] = function dynCall_wrapper() {\n                    return Runtime.dynCall(sig, func)\n                }\n            } else if (sig.length === 2) {\n                sigCache[func] = function dynCall_wrapper(arg) {\n                    return Runtime.dynCall(sig, func, [arg])\n                }\n            } else {\n                sigCache[func] = function dynCall_wrapper() {\n                    return Runtime.dynCall(sig, func, Array.prototype.slice.call(arguments))\n                }\n            }\n        }\n        return sigCache[func]\n    }),\n    getCompilerSetting: (function(name) {\n        throw \"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work\"\n    }),\n    stackAlloc: (function(size) {\n        var ret = STACKTOP;\n        STACKTOP = STACKTOP + size | 0;\n        STACKTOP = STACKTOP + 15 & -16;\n        return ret\n    }),\n    staticAlloc: (function(size) {\n        var ret = STATICTOP;\n        STATICTOP = STATICTOP + size | 0;\n        STATICTOP = STATICTOP + 15 & -16;\n        return ret\n    }),\n    dynamicAlloc: (function(size) {\n        var ret = HEAP32[DYNAMICTOP_PTR >> 2];\n        var end = (ret + size + 15 | 0) & -16;\n        HEAP32[DYNAMICTOP_PTR >> 2] = end;\n        if (end >= TOTAL_MEMORY) {\n            var success = enlargeMemory();\n            if (!success) {\n                HEAP32[DYNAMICTOP_PTR >> 2] = ret;\n                return 0\n            }\n        }\n        return ret\n    }),\n    alignMemory: (function(size, quantum) {\n        var ret = size = Math.ceil(size / (quantum ? quantum : 16)) * (quantum ? quantum : 16);\n        return ret\n    }),\n    makeBigInt: (function(low, high, unsigned) {\n        var ret = unsigned ? +(low >>> 0) + +(high >>> 0) * 4294967296 : +(low >>> 0) + +(high | 0) * 4294967296;\n        return ret\n    }),\n    GLOBAL_BASE: 1024,\n    QUANTUM_SIZE: 4,\n    __dummy__: 0\n};\nModule[\"Runtime\"] = Runtime;\nvar ABORT = 0;\nvar EXITSTATUS = 0;\n\nfunction assert(condition, text) {\n    if (!condition) {\n        abort(\"Assertion failed: \" + text)\n    }\n}\n\nfunction getCFunc(ident) {\n    var func = Module[\"_\" + ident];\n    if (!func) {\n        try {\n            func = eval(\"_\" + ident)\n        } catch (e) {}\n    }\n    assert(func, \"Cannot call unknown function \" + ident + \" (perhaps LLVM optimizations or closure removed it?)\");\n    return func\n}\nvar cwrap, ccall;\n((function() {\n    var JSfuncs = {\n        \"stackSave\": (function() {\n            Runtime.stackSave()\n        }),\n        \"stackRestore\": (function() {\n            Runtime.stackRestore()\n        }),\n        \"arrayToC\": (function(arr) {\n            var ret = Runtime.stackAlloc(arr.length);\n            writeArrayToMemory(arr, ret);\n            return ret\n        }),\n        \"stringToC\": (function(str) {\n            var ret = 0;\n            if (str !== null && str !== undefined && str !== 0) {\n                var len = (str.length << 2) + 1;\n                ret = Runtime.stackAlloc(len);\n                stringToUTF8(str, ret, len)\n            }\n            return ret\n        })\n    };\n    var toC = {\n        \"string\": JSfuncs[\"stringToC\"],\n        \"array\": JSfuncs[\"arrayToC\"]\n    };\n    ccall = function ccallFunc(ident, returnType, argTypes, args, opts) {\n        var func = getCFunc(ident);\n        var cArgs = [];\n        var stack = 0;\n        if (args) {\n            for (var i = 0; i < args.length; i++) {\n                var converter = toC[argTypes[i]];\n                if (converter) {\n                    if (stack === 0) stack = Runtime.stackSave();\n                    cArgs[i] = converter(args[i])\n                } else {\n                    cArgs[i] = args[i]\n                }\n            }\n        }\n        var ret = func.apply(null, cArgs);\n        if (returnType === \"string\") ret = Pointer_stringify(ret);\n        if (stack !== 0) {\n            if (opts && opts.async) {\n                EmterpreterAsync.asyncFinalizers.push((function() {\n                    Runtime.stackRestore(stack)\n                }));\n                return\n            }\n            Runtime.stackRestore(stack)\n        }\n        return ret\n    };\n    var sourceRegex = /^function\\s*[a-zA-Z$_0-9]*\\s*\\(([^)]*)\\)\\s*{\\s*([^*]*?)[\\s;]*(?:return\\s*(.*?)[;\\s]*)?}$/;\n\n    function parseJSFunc(jsfunc) {\n        var parsed = jsfunc.toString().match(sourceRegex).slice(1);\n        return {\n            arguments: parsed[0],\n            body: parsed[1],\n            returnValue: parsed[2]\n        }\n    }\n    var JSsource = null;\n\n    function ensureJSsource() {\n        if (!JSsource) {\n            JSsource = {};\n            for (var fun in JSfuncs) {\n                if (JSfuncs.hasOwnProperty(fun)) {\n                    JSsource[fun] = parseJSFunc(JSfuncs[fun])\n                }\n            }\n        }\n    }\n    cwrap = function cwrap(ident, returnType, argTypes) {\n        argTypes = argTypes || [];\n        var cfunc = getCFunc(ident);\n        var numericArgs = argTypes.every((function(type) {\n            return type === \"number\"\n        }));\n        var numericRet = returnType !== \"string\";\n        if (numericRet && numericArgs) {\n            return cfunc\n        }\n        var argNames = argTypes.map((function(x, i) {\n            return \"$\" + i\n        }));\n        var funcstr = \"(function(\" + argNames.join(\",\") + \") {\";\n        var nargs = argTypes.length;\n        if (!numericArgs) {\n            ensureJSsource();\n            funcstr += \"var stack = \" + JSsource[\"stackSave\"].body + \";\";\n            for (var i = 0; i < nargs; i++) {\n                var arg = argNames[i],\n                    type = argTypes[i];\n                if (type === \"number\") continue;\n                var convertCode = JSsource[type + \"ToC\"];\n                funcstr += \"var \" + convertCode.arguments + \" = \" + arg + \";\";\n                funcstr += convertCode.body + \";\";\n                funcstr += arg + \"=(\" + convertCode.returnValue + \");\"\n            }\n        }\n        var cfuncname = parseJSFunc((function() {\n            return cfunc\n        })).returnValue;\n        funcstr += \"var ret = \" + cfuncname + \"(\" + argNames.join(\",\") + \");\";\n        if (!numericRet) {\n            var strgfy = parseJSFunc((function() {\n                return Pointer_stringify\n            })).returnValue;\n            funcstr += \"ret = \" + strgfy + \"(ret);\"\n        }\n        if (!numericArgs) {\n            ensureJSsource();\n            funcstr += JSsource[\"stackRestore\"].body.replace(\"()\", \"(stack)\") + \";\"\n        }\n        funcstr += \"return ret})\";\n        return eval(funcstr)\n    }\n}))();\nModule[\"ccall\"] = ccall;\nModule[\"cwrap\"] = cwrap;\n\nfunction setValue(ptr, value, type, noSafe) {\n    type = type || \"i8\";\n    if (type.charAt(type.length - 1) === \"*\") type = \"i32\";\n    switch (type) {\n        case \"i1\":\n            HEAP8[ptr >> 0] = value;\n            break;\n        case \"i8\":\n            HEAP8[ptr >> 0] = value;\n            break;\n        case \"i16\":\n            HEAP16[ptr >> 1] = value;\n            break;\n        case \"i32\":\n            HEAP32[ptr >> 2] = value;\n            break;\n        case \"i64\":\n            tempI64 = [value >>> 0, (tempDouble = value, +Math_abs(tempDouble) >= 1 ? tempDouble > 0 ? (Math_min(+Math_floor(tempDouble / 4294967296), 4294967295) | 0) >>> 0 : ~~+Math_ceil((tempDouble - +(~~tempDouble >>> 0)) / 4294967296) >>> 0 : 0)], HEAP32[ptr >> 2] = tempI64[0], HEAP32[ptr + 4 >> 2] = tempI64[1];\n            break;\n        case \"float\":\n            HEAPF32[ptr >> 2] = value;\n            break;\n        case \"double\":\n            HEAPF64[ptr >> 3] = value;\n            break;\n        default:\n            abort(\"invalid type for setValue: \" + type)\n    }\n}\nModule[\"setValue\"] = setValue;\n\nfunction getValue(ptr, type, noSafe) {\n    type = type || \"i8\";\n    if (type.charAt(type.length - 1) === \"*\") type = \"i32\";\n    switch (type) {\n        case \"i1\":\n            return HEAP8[ptr >> 0];\n        case \"i8\":\n            return HEAP8[ptr >> 0];\n        case \"i16\":\n            return HEAP16[ptr >> 1];\n        case \"i32\":\n            return HEAP32[ptr >> 2];\n        case \"i64\":\n            return HEAP32[ptr >> 2];\n        case \"float\":\n            return HEAPF32[ptr >> 2];\n        case \"double\":\n            return HEAPF64[ptr >> 3];\n        default:\n            abort(\"invalid type for setValue: \" + type)\n    }\n    return null\n}\nModule[\"getValue\"] = getValue;\nvar ALLOC_NORMAL = 0;\nvar ALLOC_STACK = 1;\nvar ALLOC_STATIC = 2;\nvar ALLOC_DYNAMIC = 3;\nvar ALLOC_NONE = 4;\nModule[\"ALLOC_NORMAL\"] = ALLOC_NORMAL;\nModule[\"ALLOC_STACK\"] = ALLOC_STACK;\nModule[\"ALLOC_STATIC\"] = ALLOC_STATIC;\nModule[\"ALLOC_DYNAMIC\"] = ALLOC_DYNAMIC;\nModule[\"ALLOC_NONE\"] = ALLOC_NONE;\n\nfunction allocate(slab, types, allocator, ptr) {\n    var zeroinit, size;\n    if (typeof slab === \"number\") {\n        zeroinit = true;\n        size = slab\n    } else {\n        zeroinit = false;\n        size = slab.length\n    }\n    var singleType = typeof types === \"string\" ? types : null;\n    var ret;\n    if (allocator == ALLOC_NONE) {\n        ret = ptr\n    } else {\n        ret = [typeof _malloc === \"function\" ? _malloc : Runtime.staticAlloc, Runtime.stackAlloc, Runtime.staticAlloc, Runtime.dynamicAlloc][allocator === undefined ? ALLOC_STATIC : allocator](Math.max(size, singleType ? 1 : types.length))\n    }\n    if (zeroinit) {\n        var ptr = ret,\n            stop;\n        assert((ret & 3) == 0);\n        stop = ret + (size & ~3);\n        for (; ptr < stop; ptr += 4) {\n            HEAP32[ptr >> 2] = 0\n        }\n        stop = ret + size;\n        while (ptr < stop) {\n            HEAP8[ptr++ >> 0] = 0\n        }\n        return ret\n    }\n    if (singleType === \"i8\") {\n        if (slab.subarray || slab.slice) {\n            HEAPU8.set(slab, ret)\n        } else {\n            HEAPU8.set(new Uint8Array(slab), ret)\n        }\n        return ret\n    }\n    var i = 0,\n        type, typeSize, previousType;\n    while (i < size) {\n        var curr = slab[i];\n        if (typeof curr === \"function\") {\n            curr = Runtime.getFunctionIndex(curr)\n        }\n        type = singleType || types[i];\n        if (type === 0) {\n            i++;\n            continue\n        }\n        if (type == \"i64\") type = \"i32\";\n        setValue(ret + i, curr, type);\n        if (previousType !== type) {\n            typeSize = Runtime.getNativeTypeSize(type);\n            previousType = type\n        }\n        i += typeSize\n    }\n    return ret\n}\nModule[\"allocate\"] = allocate;\n\nfunction getMemory(size) {\n    if (!staticSealed) return Runtime.staticAlloc(size);\n    if (!runtimeInitialized) return Runtime.dynamicAlloc(size);\n    return _malloc(size)\n}\nModule[\"getMemory\"] = getMemory;\n\nfunction Pointer_stringify(ptr, length) {\n    if (length === 0 || !ptr) return \"\";\n    var hasUtf = 0;\n    var t;\n    var i = 0;\n    while (1) {\n        t = HEAPU8[ptr + i >> 0];\n        hasUtf |= t;\n        if (t == 0 && !length) break;\n        i++;\n        if (length && i == length) break\n    }\n    if (!length) length = i;\n    var ret = \"\";\n    if (hasUtf < 128) {\n        var MAX_CHUNK = 1024;\n        var curr;\n        while (length > 0) {\n            curr = String.fromCharCode.apply(String, HEAPU8.subarray(ptr, ptr + Math.min(length, MAX_CHUNK)));\n            ret = ret ? ret + curr : curr;\n            ptr += MAX_CHUNK;\n            length -= MAX_CHUNK\n        }\n        return ret\n    }\n    return Module[\"UTF8ToString\"](ptr)\n}\nModule[\"Pointer_stringify\"] = Pointer_stringify;\n\nfunction AsciiToString(ptr) {\n    var str = \"\";\n    while (1) {\n        var ch = HEAP8[ptr++ >> 0];\n        if (!ch) return str;\n        str += String.fromCharCode(ch)\n    }\n}\nModule[\"AsciiToString\"] = AsciiToString;\n\nfunction stringToAscii(str, outPtr) {\n    return writeAsciiToMemory(str, outPtr, false)\n}\nModule[\"stringToAscii\"] = stringToAscii;\nvar UTF8Decoder = typeof TextDecoder !== \"undefined\" ? new TextDecoder(\"utf8\") : undefined;\n\nfunction UTF8ArrayToString(u8Array, idx) {\n    var endPtr = idx;\n    while (u8Array[endPtr]) ++endPtr;\n    if (endPtr - idx > 16 && u8Array.subarray && UTF8Decoder) {\n        return UTF8Decoder.decode(u8Array.subarray(idx, endPtr))\n    } else {\n        var u0, u1, u2, u3, u4, u5;\n        var str = \"\";\n        while (1) {\n            u0 = u8Array[idx++];\n            if (!u0) return str;\n            if (!(u0 & 128)) {\n                str += String.fromCharCode(u0);\n                continue\n            }\n            u1 = u8Array[idx++] & 63;\n            if ((u0 & 224) == 192) {\n                str += String.fromCharCode((u0 & 31) << 6 | u1);\n                continue\n            }\n            u2 = u8Array[idx++] & 63;\n            if ((u0 & 240) == 224) {\n                u0 = (u0 & 15) << 12 | u1 << 6 | u2\n            } else {\n                u3 = u8Array[idx++] & 63;\n                if ((u0 & 248) == 240) {\n                    u0 = (u0 & 7) << 18 | u1 << 12 | u2 << 6 | u3\n                } else {\n                    u4 = u8Array[idx++] & 63;\n                    if ((u0 & 252) == 248) {\n                        u0 = (u0 & 3) << 24 | u1 << 18 | u2 << 12 | u3 << 6 | u4\n                    } else {\n                        u5 = u8Array[idx++] & 63;\n                        u0 = (u0 & 1) << 30 | u1 << 24 | u2 << 18 | u3 << 12 | u4 << 6 | u5\n                    }\n                }\n            }\n            if (u0 < 65536) {\n                str += String.fromCharCode(u0)\n            } else {\n                var ch = u0 - 65536;\n                str += String.fromCharCode(55296 | ch >> 10, 56320 | ch & 1023)\n            }\n        }\n    }\n}\nModule[\"UTF8ArrayToString\"] = UTF8ArrayToString;\n\nfunction UTF8ToString(ptr) {\n    return UTF8ArrayToString(HEAPU8, ptr)\n}\nModule[\"UTF8ToString\"] = UTF8ToString;\n\nfunction stringToUTF8Array(str, outU8Array, outIdx, maxBytesToWrite) {\n    if (!(maxBytesToWrite > 0)) return 0;\n    var startIdx = outIdx;\n    var endIdx = outIdx + maxBytesToWrite - 1;\n    for (var i = 0; i < str.length; ++i) {\n        var u = str.charCodeAt(i);\n        if (u >= 55296 && u <= 57343) u = 65536 + ((u & 1023) << 10) | str.charCodeAt(++i) & 1023;\n        if (u <= 127) {\n            if (outIdx >= endIdx) break;\n            outU8Array[outIdx++] = u\n        } else if (u <= 2047) {\n            if (outIdx + 1 >= endIdx) break;\n            outU8Array[outIdx++] = 192 | u >> 6;\n            outU8Array[outIdx++] = 128 | u & 63\n        } else if (u <= 65535) {\n            if (outIdx + 2 >= endIdx) break;\n            outU8Array[outIdx++] = 224 | u >> 12;\n            outU8Array[outIdx++] = 128 | u >> 6 & 63;\n            outU8Array[outIdx++] = 128 | u & 63\n        } else if (u <= 2097151) {\n            if (outIdx + 3 >= endIdx) break;\n            outU8Array[outIdx++] = 240 | u >> 18;\n            outU8Array[outIdx++] = 128 | u >> 12 & 63;\n            outU8Array[outIdx++] = 128 | u >> 6 & 63;\n            outU8Array[outIdx++] = 128 | u & 63\n        } else if (u <= 67108863) {\n            if (outIdx + 4 >= endIdx) break;\n            outU8Array[outIdx++] = 248 | u >> 24;\n            outU8Array[outIdx++] = 128 | u >> 18 & 63;\n            outU8Array[outIdx++] = 128 | u >> 12 & 63;\n            outU8Array[outIdx++] = 128 | u >> 6 & 63;\n            outU8Array[outIdx++] = 128 | u & 63\n        } else {\n            if (outIdx + 5 >= endIdx) break;\n            outU8Array[outIdx++] = 252 | u >> 30;\n            outU8Array[outIdx++] = 128 | u >> 24 & 63;\n            outU8Array[outIdx++] = 128 | u >> 18 & 63;\n            outU8Array[outIdx++] = 128 | u >> 12 & 63;\n            outU8Array[outIdx++] = 128 | u >> 6 & 63;\n            outU8Array[outIdx++] = 128 | u & 63\n        }\n    }\n    outU8Array[outIdx] = 0;\n    return outIdx - startIdx\n}\nModule[\"stringToUTF8Array\"] = stringToUTF8Array;\n\nfunction stringToUTF8(str, outPtr, maxBytesToWrite) {\n    return stringToUTF8Array(str, HEAPU8, outPtr, maxBytesToWrite)\n}\nModule[\"stringToUTF8\"] = stringToUTF8;\n\nfunction lengthBytesUTF8(str) {\n    var len = 0;\n    for (var i = 0; i < str.length; ++i) {\n        var u = str.charCodeAt(i);\n        if (u >= 55296 && u <= 57343) u = 65536 + ((u & 1023) << 10) | str.charCodeAt(++i) & 1023;\n        if (u <= 127) {\n            ++len\n        } else if (u <= 2047) {\n            len += 2\n        } else if (u <= 65535) {\n            len += 3\n        } else if (u <= 2097151) {\n            len += 4\n        } else if (u <= 67108863) {\n            len += 5\n        } else {\n            len += 6\n        }\n    }\n    return len\n}\nModule[\"lengthBytesUTF8\"] = lengthBytesUTF8;\nvar UTF16Decoder = typeof TextDecoder !== \"undefined\" ? new TextDecoder(\"utf-16le\") : undefined;\n\nfunction demangle(func) {\n    var __cxa_demangle_func = Module[\"___cxa_demangle\"] || Module[\"__cxa_demangle\"];\n    if (__cxa_demangle_func) {\n        try {\n            var s = func.substr(1);\n            var len = lengthBytesUTF8(s) + 1;\n            var buf = _malloc(len);\n            stringToUTF8(s, buf, len);\n            var status = _malloc(4);\n            var ret = __cxa_demangle_func(buf, 0, 0, status);\n            if (getValue(status, \"i32\") === 0 && ret) {\n                return Pointer_stringify(ret)\n            }\n        } catch (e) {} finally {\n            if (buf) _free(buf);\n            if (status) _free(status);\n            if (ret) _free(ret)\n        }\n        return func\n    }\n    Runtime.warnOnce(\"warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling\");\n    return func\n}\n\nfunction demangleAll(text) {\n    var regex = /__Z[\\w\\d_]+/g;\n    return text.replace(regex, (function(x) {\n        var y = demangle(x);\n        return x === y ? x : x + \" [\" + y + \"]\"\n    }))\n}\n\nfunction jsStackTrace() {\n    var err = new Error;\n    if (!err.stack) {\n        try {\n            throw new Error(0)\n        } catch (e) {\n            err = e\n        }\n        if (!err.stack) {\n            return \"(no stack trace available)\"\n        }\n    }\n    return err.stack.toString()\n}\n\nfunction stackTrace() {\n    var js = jsStackTrace();\n    if (Module[\"extraStackTrace\"]) js += \"\\n\" + Module[\"extraStackTrace\"]();\n    return demangleAll(js)\n}\nModule[\"stackTrace\"] = stackTrace;\nvar WASM_PAGE_SIZE = 65536;\nvar ASMJS_PAGE_SIZE = 16777216;\n\nfunction alignUp(x, multiple) {\n    if (x % multiple > 0) {\n        x += multiple - x % multiple\n    }\n    return x\n}\nvar HEAP, buffer, HEAP8, HEAPU8, HEAP16, HEAPU16, HEAP32, HEAPU32, HEAPF32, HEAPF64;\n\nfunction updateGlobalBuffer(buf) {\n    Module[\"buffer\"] = buffer = buf\n}\n\nfunction updateGlobalBufferViews() {\n    Module[\"HEAP8\"] = HEAP8 = new Int8Array(buffer);\n    Module[\"HEAP16\"] = HEAP16 = new Int16Array(buffer);\n    Module[\"HEAP32\"] = HEAP32 = new Int32Array(buffer);\n    Module[\"HEAPU8\"] = HEAPU8 = new Uint8Array(buffer);\n    Module[\"HEAPU16\"] = HEAPU16 = new Uint16Array(buffer);\n    Module[\"HEAPU32\"] = HEAPU32 = new Uint32Array(buffer);\n    Module[\"HEAPF32\"] = HEAPF32 = new Float32Array(buffer);\n    Module[\"HEAPF64\"] = HEAPF64 = new Float64Array(buffer)\n}\nvar STATIC_BASE, STATICTOP, staticSealed;\nvar STACK_BASE, STACKTOP, STACK_MAX;\nvar DYNAMIC_BASE, DYNAMICTOP_PTR;\nSTATIC_BASE = STATICTOP = STACK_BASE = STACKTOP = STACK_MAX = DYNAMIC_BASE = DYNAMICTOP_PTR = 0;\nstaticSealed = false;\n\nfunction abortOnCannotGrowMemory() {\n    abort(\"Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value \" + TOTAL_MEMORY + \", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 \")\n}\n\nfunction enlargeMemory() {\n    abortOnCannotGrowMemory()\n}\nvar TOTAL_STACK = Module[\"TOTAL_STACK\"] || 5242880;\nvar TOTAL_MEMORY = Module[\"TOTAL_MEMORY\"] || 67108864;\nif (TOTAL_MEMORY < TOTAL_STACK) Module.printErr(\"TOTAL_MEMORY should be larger than TOTAL_STACK, was \" + TOTAL_MEMORY + \"! (TOTAL_STACK=\" + TOTAL_STACK + \")\");\nif (Module[\"buffer\"]) {\n    buffer = Module[\"buffer\"]\n} else {\n    if (typeof WebAssembly === \"object\" && typeof WebAssembly.Memory === \"function\") {\n        Module[\"wasmMemory\"] = new WebAssembly.Memory({\n            \"initial\": TOTAL_MEMORY / WASM_PAGE_SIZE,\n            \"maximum\": TOTAL_MEMORY / WASM_PAGE_SIZE\n        });\n        buffer = Module[\"wasmMemory\"].buffer\n    } else {\n        buffer = new ArrayBuffer(TOTAL_MEMORY)\n    }\n}\nupdateGlobalBufferViews();\n\nfunction getTotalMemory() {\n    return TOTAL_MEMORY\n}\nHEAP32[0] = 1668509029;\nHEAP16[1] = 25459;\nif (HEAPU8[2] !== 115 || HEAPU8[3] !== 99) throw \"Runtime error: expected the system to be little-endian!\";\nModule[\"HEAP\"] = HEAP;\nModule[\"buffer\"] = buffer;\nModule[\"HEAP8\"] = HEAP8;\nModule[\"HEAP16\"] = HEAP16;\nModule[\"HEAP32\"] = HEAP32;\nModule[\"HEAPU8\"] = HEAPU8;\nModule[\"HEAPU16\"] = HEAPU16;\nModule[\"HEAPU32\"] = HEAPU32;\nModule[\"HEAPF32\"] = HEAPF32;\nModule[\"HEAPF64\"] = HEAPF64;\n\nfunction callRuntimeCallbacks(callbacks) {\n    while (callbacks.length > 0) {\n        var callback = callbacks.shift();\n        if (typeof callback == \"function\") {\n            callback();\n            continue\n        }\n        var func = callback.func;\n        if (typeof func === \"number\") {\n            if (callback.arg === undefined) {\n                Module[\"dynCall_v\"](func)\n            } else {\n                Module[\"dynCall_vi\"](func, callback.arg)\n            }\n        } else {\n            func(callback.arg === undefined ? null : callback.arg)\n        }\n    }\n}\nvar __ATPRERUN__ = [];\nvar __ATINIT__ = [];\nvar __ATMAIN__ = [];\nvar __ATEXIT__ = [];\nvar __ATPOSTRUN__ = [];\nvar runtimeInitialized = false;\nvar runtimeExited = false;\n\nfunction preRun() {\n    if (Module[\"preRun\"]) {\n        if (typeof Module[\"preRun\"] == \"function\") Module[\"preRun\"] = [Module[\"preRun\"]];\n        while (Module[\"preRun\"].length) {\n            addOnPreRun(Module[\"preRun\"].shift())\n        }\n    }\n    callRuntimeCallbacks(__ATPRERUN__)\n}\n\nfunction ensureInitRuntime() {\n    if (runtimeInitialized) return;\n    runtimeInitialized = true;\n    callRuntimeCallbacks(__ATINIT__)\n}\n\nfunction preMain() {\n    callRuntimeCallbacks(__ATMAIN__)\n}\n\nfunction exitRuntime() {\n    callRuntimeCallbacks(__ATEXIT__);\n    runtimeExited = true\n}\n\nfunction postRun() {\n    if (Module[\"postRun\"]) {\n        if (typeof Module[\"postRun\"] == \"function\") Module[\"postRun\"] = [Module[\"postRun\"]];\n        while (Module[\"postRun\"].length) {\n            addOnPostRun(Module[\"postRun\"].shift())\n        }\n    }\n    callRuntimeCallbacks(__ATPOSTRUN__)\n}\n\nfunction addOnPreRun(cb) {\n    __ATPRERUN__.unshift(cb)\n}\nModule[\"addOnPreRun\"] = addOnPreRun;\n\nfunction addOnInit(cb) {\n    __ATINIT__.unshift(cb)\n}\nModule[\"addOnInit\"] = addOnInit;\n\nfunction addOnPreMain(cb) {\n    __ATMAIN__.unshift(cb)\n}\nModule[\"addOnPreMain\"] = addOnPreMain;\n\nfunction addOnExit(cb) {\n    __ATEXIT__.unshift(cb)\n}\nModule[\"addOnExit\"] = addOnExit;\n\nfunction addOnPostRun(cb) {\n    __ATPOSTRUN__.unshift(cb)\n}\nModule[\"addOnPostRun\"] = addOnPostRun;\n\nfunction intArrayFromString(stringy, dontAddNull, length) {\n    var len = length > 0 ? length : lengthBytesUTF8(stringy) + 1;\n    var u8array = new Array(len);\n    var numBytesWritten = stringToUTF8Array(stringy, u8array, 0, u8array.length);\n    if (dontAddNull) u8array.length = numBytesWritten;\n    return u8array\n}\nModule[\"intArrayFromString\"] = intArrayFromString;\n\nfunction intArrayToString(array) {\n    var ret = [];\n    for (var i = 0; i < array.length; i++) {\n        var chr = array[i];\n        if (chr > 255) {\n            chr &= 255\n        }\n        ret.push(String.fromCharCode(chr))\n    }\n    return ret.join(\"\")\n}\nModule[\"intArrayToString\"] = intArrayToString;\n\nfunction writeStringToMemory(string, buffer, dontAddNull) {\n    Runtime.warnOnce(\"writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!\");\n    var lastChar, end;\n    if (dontAddNull) {\n        end = buffer + lengthBytesUTF8(string);\n        lastChar = HEAP8[end]\n    }\n    stringToUTF8(string, buffer, Infinity);\n    if (dontAddNull) HEAP8[end] = lastChar\n}\nModule[\"writeStringToMemory\"] = writeStringToMemory;\n\nfunction writeArrayToMemory(array, buffer) {\n    HEAP8.set(array, buffer)\n}\nModule[\"writeArrayToMemory\"] = writeArrayToMemory;\n\nfunction writeAsciiToMemory(str, buffer, dontAddNull) {\n    for (var i = 0; i < str.length; ++i) {\n        HEAP8[buffer++ >> 0] = str.charCodeAt(i)\n    }\n    if (!dontAddNull) HEAP8[buffer >> 0] = 0\n}\nModule[\"writeAsciiToMemory\"] = writeAsciiToMemory;\nif (!Math[\"imul\"] || Math[\"imul\"](4294967295, 5) !== -5) Math[\"imul\"] = function imul(a, b) {\n    var ah = a >>> 16;\n    var al = a & 65535;\n    var bh = b >>> 16;\n    var bl = b & 65535;\n    return al * bl + (ah * bl + al * bh << 16) | 0\n};\nMath.imul = Math[\"imul\"];\nif (!Math[\"fround\"]) {\n    var froundBuffer = new Float32Array(1);\n    Math[\"fround\"] = (function(x) {\n        froundBuffer[0] = x;\n        return froundBuffer[0]\n    })\n}\nMath.fround = Math[\"fround\"];\nif (!Math[\"clz32\"]) Math[\"clz32\"] = (function(x) {\n    x = x >>> 0;\n    for (var i = 0; i < 32; i++) {\n        if (x & 1 << 31 - i) return i\n    }\n    return 32\n});\nMath.clz32 = Math[\"clz32\"];\nif (!Math[\"trunc\"]) Math[\"trunc\"] = (function(x) {\n    return x < 0 ? Math.ceil(x) : Math.floor(x)\n});\nMath.trunc = Math[\"trunc\"];\nvar Math_abs = Math.abs;\nvar Math_cos = Math.cos;\nvar Math_sin = Math.sin;\nvar Math_tan = Math.tan;\nvar Math_acos = Math.acos;\nvar Math_asin = Math.asin;\nvar Math_atan = Math.atan;\nvar Math_atan2 = Math.atan2;\nvar Math_exp = Math.exp;\nvar Math_log = Math.log;\nvar Math_sqrt = Math.sqrt;\nvar Math_ceil = Math.ceil;\nvar Math_floor = Math.floor;\nvar Math_pow = Math.pow;\nvar Math_imul = Math.imul;\nvar Math_fround = Math.fround;\nvar Math_round = Math.round;\nvar Math_min = Math.min;\nvar Math_clz32 = Math.clz32;\nvar Math_trunc = Math.trunc;\nvar runDependencies = 0;\nvar runDependencyWatcher = null;\nvar dependenciesFulfilled = null;\n\nfunction addRunDependency(id) {\n    runDependencies++;\n    if (Module[\"monitorRunDependencies\"]) {\n        Module[\"monitorRunDependencies\"](runDependencies)\n    }\n}\nModule[\"addRunDependency\"] = addRunDependency;\n\nfunction removeRunDependency(id) {\n    runDependencies--;\n    if (Module[\"monitorRunDependencies\"]) {\n        Module[\"monitorRunDependencies\"](runDependencies)\n    }\n    if (runDependencies == 0) {\n        if (runDependencyWatcher !== null) {\n            clearInterval(runDependencyWatcher);\n            runDependencyWatcher = null\n        }\n        if (dependenciesFulfilled) {\n            var callback = dependenciesFulfilled;\n            dependenciesFulfilled = null;\n            callback()\n        }\n    }\n}\nModule[\"removeRunDependency\"] = removeRunDependency;\nModule[\"preloadedImages\"] = {};\nModule[\"preloadedAudios\"] = {};\nvar memoryInitializer = null;\n\nfunction integrateWasmJS(Module) {\n    var method = Module[\"wasmJSMethod\"] || \"native-wasm\";\n    Module[\"wasmJSMethod\"] = method;\n    var wasmTextFile = Module[\"wasmTextFile\"] || \"opus.wasm.wast\";\n\tvar wasmBinaryFile = Module[\"wasmBinaryFile\"] || self[\"cr_opusWasmBinaryUrl\"] || \"opus.wasm.wasm\";\n    var asmjsCodeFile = Module[\"asmjsCodeFile\"] || \"opus.wasm.temp.asm.js\";\n    if (typeof Module[\"locateFile\"] === \"function\") {\n        wasmTextFile = Module[\"locateFile\"](wasmTextFile);\n        wasmBinaryFile = Module[\"locateFile\"](wasmBinaryFile);\n        asmjsCodeFile = Module[\"locateFile\"](asmjsCodeFile)\n    }\n    var wasmPageSize = 64 * 1024;\n    var asm2wasmImports = {\n        \"f64-rem\": (function(x, y) {\n            return x % y\n        }),\n        \"f64-to-int\": (function(x) {\n            return x | 0\n        }),\n        \"i32s-div\": (function(x, y) {\n            return (x | 0) / (y | 0) | 0\n        }),\n        \"i32u-div\": (function(x, y) {\n            return (x >>> 0) / (y >>> 0) >>> 0\n        }),\n        \"i32s-rem\": (function(x, y) {\n            return (x | 0) % (y | 0) | 0\n        }),\n        \"i32u-rem\": (function(x, y) {\n            return (x >>> 0) % (y >>> 0) >>> 0\n        }),\n        \"debugger\": (function() {\n            debugger\n        })\n    };\n    var info = {\n        \"global\": null,\n        \"env\": null,\n        \"asm2wasm\": asm2wasmImports,\n        \"parent\": Module\n    };\n    var exports = null;\n\n    function lookupImport(mod, base) {\n        var lookup = info;\n        if (mod.indexOf(\".\") < 0) {\n            lookup = (lookup || {})[mod]\n        } else {\n            var parts = mod.split(\".\");\n            lookup = (lookup || {})[parts[0]];\n            lookup = (lookup || {})[parts[1]]\n        }\n        if (base) {\n            lookup = (lookup || {})[base]\n        }\n        if (lookup === undefined) {\n            abort(\"bad lookupImport to (\" + mod + \").\" + base)\n        }\n        return lookup\n    }\n\n    function mergeMemory(newBuffer) {\n        var oldBuffer = Module[\"buffer\"];\n        if (newBuffer.byteLength < oldBuffer.byteLength) {\n            Module[\"printErr\"](\"the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here\")\n        }\n        var oldView = new Int8Array(oldBuffer);\n        var newView = new Int8Array(newBuffer);\n        if (!memoryInitializer) {\n            oldView.set(newView.subarray(Module[\"STATIC_BASE\"], Module[\"STATIC_BASE\"] + Module[\"STATIC_BUMP\"]), Module[\"STATIC_BASE\"])\n        }\n        newView.set(oldView);\n        updateGlobalBuffer(newBuffer);\n        updateGlobalBufferViews()\n    }\n    var WasmTypes = {\n        none: 0,\n        i32: 1,\n        i64: 2,\n        f32: 3,\n        f64: 4\n    };\n\n    function fixImports(imports) {\n        if (!0) return imports;\n        var ret = {};\n        for (var i in imports) {\n            var fixed = i;\n            if (fixed[0] == \"_\") fixed = fixed.substr(1);\n            ret[fixed] = imports[i]\n        }\n        return ret\n    }\n\n    function getBinary() {\n        try {\n            var binary;\n            if (Module[\"wasmBinary\"]) {\n                binary = Module[\"wasmBinary\"];\n                binary = new Uint8Array(binary)\n            } else if (Module[\"readBinary\"]) {\n                binary = Module[\"readBinary\"](wasmBinaryFile)\n            } else {\n                throw \"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)\"\n            }\n            return binary\n        } catch (err) {\n            abort(err)\n        }\n    }\n\n    function getBinaryPromise() {\n        return new Promise((resolve, reject) =>\n        {\n            const buffer = self.sentBuffers.get(\"opus-decoder-wasm\");\n            if (buffer)\n                return resolve(new Uint8Array(buffer));\n                \n            const blob = self.sentBlobs.get(\"opus-decoder-wasm\");\n            if (!blob)\n                return reject(\"not yet received opus blob\");\n            \n            const fileReader = new FileReader();\n            fileReader.onload = () => resolve(new Uint8Array(fileReader[\"result\"]));\n\t\t\tfileReader.onerror = () => reject(fileReader[\"error\"]);\n\t\t\tfileReader.readAsArrayBuffer(blob);\n        });\n    }\n\n    function doJustAsm(global, env, providedBuffer) {\n        if (typeof Module[\"asm\"] !== \"function\" || Module[\"asm\"] === methodHandler) {\n            if (!Module[\"asmPreload\"]) {\n                eval(Module[\"read\"](asmjsCodeFile))\n            } else {\n                Module[\"asm\"] = Module[\"asmPreload\"]\n            }\n        }\n        if (typeof Module[\"asm\"] !== \"function\") {\n            Module[\"printErr\"](\"asm evalling did not set the module properly\");\n            return false\n        }\n        return Module[\"asm\"](global, env, providedBuffer)\n    }\n\n    function doNativeWasm(global, env, providedBuffer) {\n        if (typeof WebAssembly !== \"object\") {\n            Module[\"printErr\"](\"no native wasm support detected\");\n            return false\n        }\n        if (!(Module[\"wasmMemory\"] instanceof WebAssembly.Memory)) {\n            Module[\"printErr\"](\"no native wasm Memory in use\");\n            return false\n        }\n        env[\"memory\"] = Module[\"wasmMemory\"];\n        info[\"global\"] = {\n            \"NaN\": NaN,\n            \"Infinity\": Infinity\n        };\n        info[\"global.Math\"] = global.Math;\n        info[\"env\"] = env;\n\n        function receiveInstance(instance) {\n            exports = instance.exports;\n            if (exports.memory) mergeMemory(exports.memory);\n            Module[\"asm\"] = exports;\n            Module[\"usingWasm\"] = true;\n            removeRunDependency(\"wasm-instantiate\")\n        }\n        addRunDependency(\"wasm-instantiate\");\n        if (Module[\"instantiateWasm\"]) {\n            try {\n                return Module[\"instantiateWasm\"](info, receiveInstance)\n            } catch (e) {\n                Module[\"printErr\"](\"Module.instantiateWasm callback failed with error: \" + e);\n                return false\n            }\n        }\n        getBinaryPromise().then((function(binary) {\n            return WebAssembly.instantiate(binary, info)\n        })).then((function(output) {\n            receiveInstance(output[\"instance\"])\n        })).catch((function(reason) {\n            Module[\"printErr\"](\"failed to asynchronously prepare wasm: \" + reason);\n            abort(reason)\n        }));\n        return {}\n    }\n\n    function doWasmPolyfill(global, env, providedBuffer, method) {\n        if (typeof WasmJS !== \"function\") {\n            Module[\"printErr\"](\"WasmJS not detected - polyfill not bundled?\");\n            return false\n        }\n        var wasmJS = WasmJS({});\n        wasmJS[\"outside\"] = Module;\n        wasmJS[\"info\"] = info;\n        wasmJS[\"lookupImport\"] = lookupImport;\n        assert(providedBuffer === Module[\"buffer\"]);\n        info.global = global;\n        info.env = env;\n        assert(providedBuffer === Module[\"buffer\"]);\n        env[\"memory\"] = providedBuffer;\n        assert(env[\"memory\"] instanceof ArrayBuffer);\n        wasmJS[\"providedTotalMemory\"] = Module[\"buffer\"].byteLength;\n        var code;\n        if (method === \"interpret-binary\") {\n            code = getBinary()\n        } else {\n            code = Module[\"read\"](method == \"interpret-asm2wasm\" ? asmjsCodeFile : wasmTextFile)\n        }\n        var temp;\n        if (method == \"interpret-asm2wasm\") {\n            temp = wasmJS[\"_malloc\"](code.length + 1);\n            wasmJS[\"writeAsciiToMemory\"](code, temp);\n            wasmJS[\"_load_asm2wasm\"](temp)\n        } else if (method === \"interpret-s-expr\") {\n            temp = wasmJS[\"_malloc\"](code.length + 1);\n            wasmJS[\"writeAsciiToMemory\"](code, temp);\n            wasmJS[\"_load_s_expr2wasm\"](temp)\n        } else if (method === \"interpret-binary\") {\n            temp = wasmJS[\"_malloc\"](code.length);\n            wasmJS[\"HEAPU8\"].set(code, temp);\n            wasmJS[\"_load_binary2wasm\"](temp, code.length)\n        } else {\n            throw \"what? \" + method\n        }\n        wasmJS[\"_free\"](temp);\n        wasmJS[\"_instantiate\"](temp);\n        if (Module[\"newBuffer\"]) {\n            mergeMemory(Module[\"newBuffer\"]);\n            Module[\"newBuffer\"] = null\n        }\n        exports = wasmJS[\"asmExports\"];\n        return exports\n    }\n    Module[\"asmPreload\"] = Module[\"asm\"];\n    var asmjsReallocBuffer = Module[\"reallocBuffer\"];\n    var wasmReallocBuffer = (function(size) {\n        var PAGE_MULTIPLE = Module[\"usingWasm\"] ? WASM_PAGE_SIZE : ASMJS_PAGE_SIZE;\n        size = alignUp(size, PAGE_MULTIPLE);\n        var old = Module[\"buffer\"];\n        var oldSize = old.byteLength;\n        if (Module[\"usingWasm\"]) {\n            try {\n                var result = Module[\"wasmMemory\"].grow((size - oldSize) / wasmPageSize);\n                if (result !== (-1 | 0)) {\n                    return Module[\"buffer\"] = Module[\"wasmMemory\"].buffer\n                } else {\n                    return null\n                }\n            } catch (e) {\n                return null\n            }\n        } else {\n            exports[\"__growWasmMemory\"]((size - oldSize) / wasmPageSize);\n            return Module[\"buffer\"] !== old ? Module[\"buffer\"] : null\n        }\n    });\n    Module[\"reallocBuffer\"] = (function(size) {\n        if (finalMethod === \"asmjs\") {\n            return asmjsReallocBuffer(size)\n        } else {\n            return wasmReallocBuffer(size)\n        }\n    });\n    var finalMethod = \"\";\n    Module[\"asm\"] = (function(global, env, providedBuffer) {\n        global = fixImports(global);\n        env = fixImports(env);\n        if (!env[\"table\"]) {\n            var TABLE_SIZE = Module[\"wasmTableSize\"];\n            if (TABLE_SIZE === undefined) TABLE_SIZE = 1024;\n            var MAX_TABLE_SIZE = Module[\"wasmMaxTableSize\"];\n            if (typeof WebAssembly === \"object\" && typeof WebAssembly.Table === \"function\") {\n                if (MAX_TABLE_SIZE !== undefined) {\n                    env[\"table\"] = new WebAssembly.Table({\n                        \"initial\": TABLE_SIZE,\n                        \"maximum\": MAX_TABLE_SIZE,\n                        \"element\": \"anyfunc\"\n                    })\n                } else {\n                    env[\"table\"] = new WebAssembly.Table({\n                        \"initial\": TABLE_SIZE,\n                        element: \"anyfunc\"\n                    })\n                }\n            } else {\n                env[\"table\"] = new Array(TABLE_SIZE)\n            }\n            Module[\"wasmTable\"] = env[\"table\"]\n        }\n        if (!env[\"memoryBase\"]) {\n            env[\"memoryBase\"] = Module[\"STATIC_BASE\"]\n        }\n        if (!env[\"tableBase\"]) {\n            env[\"tableBase\"] = 0\n        }\n        var exports;\n        var methods = method.split(\",\");\n        for (var i = 0; i < methods.length; i++) {\n            var curr = methods[i];\n            finalMethod = curr;\n            if (curr === \"native-wasm\") {\n                if (exports = doNativeWasm(global, env, providedBuffer)) break\n            } else if (curr === \"asmjs\") {\n                if (exports = doJustAsm(global, env, providedBuffer)) break\n            } else if (curr === \"interpret-asm2wasm\" || curr === \"interpret-s-expr\" || curr === \"interpret-binary\") {\n                if (exports = doWasmPolyfill(global, env, providedBuffer, curr)) break\n            } else {\n                abort(\"bad method: \" + curr)\n            }\n        }\n        if (!exports) throw \"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods\";\n        return exports\n    });\n    var methodHandler = Module[\"asm\"]\n}\nintegrateWasmJS(Module);\nvar ASM_CONSTS = [];\nSTATIC_BASE = Runtime.GLOBAL_BASE;\nSTATICTOP = STATIC_BASE + 28816;\n__ATINIT__.push();\nmemoryInitializer = Module[\"wasmJSMethod\"].indexOf(\"asmjs\") >= 0 || Module[\"wasmJSMethod\"].indexOf(\"interpret-asm2wasm\") >= 0 ? \"opus.wasm.js.mem\" : null;\nvar STATIC_BUMP = 28816;\nModule[\"STATIC_BASE\"] = STATIC_BASE;\nModule[\"STATIC_BUMP\"] = STATIC_BUMP;\nvar tempDoublePtr = STATICTOP;\nSTATICTOP += 16;\n\nfunction _llvm_stackrestore(p) {\n    var self = _llvm_stacksave;\n    var ret = self.LLVM_SAVEDSTACKS[p];\n    self.LLVM_SAVEDSTACKS.splice(p, 1);\n    Runtime.stackRestore(ret)\n}\n\nfunction ___setErrNo(value) {\n    if (Module[\"___errno_location\"]) HEAP32[Module[\"___errno_location\"]() >> 2] = value;\n    return value\n}\nModule[\"_sbrk\"] = _sbrk;\nModule[\"_memset\"] = _memset;\n\nfunction _emscripten_memcpy_big(dest, src, num) {\n    HEAPU8.set(HEAPU8.subarray(src, src + num), dest);\n    return dest\n}\nModule[\"_memcpy\"] = _memcpy;\nModule[\"_memmove\"] = _memmove;\n\nfunction _llvm_stacksave() {\n    var self = _llvm_stacksave;\n    if (!self.LLVM_SAVEDSTACKS) {\n        self.LLVM_SAVEDSTACKS = []\n    }\n    self.LLVM_SAVEDSTACKS.push(Runtime.stackSave());\n    return self.LLVM_SAVEDSTACKS.length - 1\n}\nDYNAMICTOP_PTR = allocate(1, \"i32\", ALLOC_STATIC);\nSTACK_BASE = STACKTOP = Runtime.alignMemory(STATICTOP);\nSTACK_MAX = STACK_BASE + TOTAL_STACK;\nDYNAMIC_BASE = Runtime.alignMemory(STACK_MAX);\nHEAP32[DYNAMICTOP_PTR >> 2] = DYNAMIC_BASE;\nstaticSealed = true;\nModule[\"wasmTableSize\"] = 0;\nModule[\"wasmMaxTableSize\"] = 0;\nModule.asmGlobalArg = {\n    \"Math\": Math,\n    \"Int8Array\": Int8Array,\n    \"Int16Array\": Int16Array,\n    \"Int32Array\": Int32Array,\n    \"Uint8Array\": Uint8Array,\n    \"Uint16Array\": Uint16Array,\n    \"Uint32Array\": Uint32Array,\n    \"Float32Array\": Float32Array,\n    \"Float64Array\": Float64Array,\n    \"NaN\": NaN,\n    \"Infinity\": Infinity\n};\nModule.asmLibraryArg = {\n    \"abort\": abort,\n    \"assert\": assert,\n    \"enlargeMemory\": enlargeMemory,\n    \"getTotalMemory\": getTotalMemory,\n    \"abortOnCannotGrowMemory\": abortOnCannotGrowMemory,\n    \"_llvm_stackrestore\": _llvm_stackrestore,\n    \"_llvm_stacksave\": _llvm_stacksave,\n    \"_emscripten_memcpy_big\": _emscripten_memcpy_big,\n    \"___setErrNo\": ___setErrNo,\n    \"DYNAMICTOP_PTR\": DYNAMICTOP_PTR,\n    \"tempDoublePtr\": tempDoublePtr,\n    \"ABORT\": ABORT,\n    \"STACKTOP\": STACKTOP,\n    \"STACK_MAX\": STACK_MAX\n};\nvar asm = Module[\"asm\"](Module.asmGlobalArg, Module.asmLibraryArg, buffer);\nModule[\"asm\"] = asm;\nvar _malloc = Module[\"_malloc\"] = (function() {\n    return Module[\"asm\"][\"_malloc\"].apply(null, arguments)\n});\nvar _destroy_decoder = Module[\"_destroy_decoder\"] = (function() {\n    return Module[\"asm\"][\"_destroy_decoder\"].apply(null, arguments)\n});\nvar getTempRet0 = Module[\"getTempRet0\"] = (function() {\n    return Module[\"asm\"][\"getTempRet0\"].apply(null, arguments)\n});\nvar _free = Module[\"_free\"] = (function() {\n    return Module[\"asm\"][\"_free\"].apply(null, arguments)\n});\nvar runPostSets = Module[\"runPostSets\"] = (function() {\n    return Module[\"asm\"][\"runPostSets\"].apply(null, arguments)\n});\nvar setTempRet0 = Module[\"setTempRet0\"] = (function() {\n    return Module[\"asm\"][\"setTempRet0\"].apply(null, arguments)\n});\nvar establishStackSpace = Module[\"establishStackSpace\"] = (function() {\n    return Module[\"asm\"][\"establishStackSpace\"].apply(null, arguments)\n});\nvar _memmove = Module[\"_memmove\"] = (function() {\n    return Module[\"asm\"][\"_memmove\"].apply(null, arguments)\n});\nvar _decode_frame = Module[\"_decode_frame\"] = (function() {\n    return Module[\"asm\"][\"_decode_frame\"].apply(null, arguments)\n});\nvar stackSave = Module[\"stackSave\"] = (function() {\n    return Module[\"asm\"][\"stackSave\"].apply(null, arguments)\n});\nvar _memset = Module[\"_memset\"] = (function() {\n    return Module[\"asm\"][\"_memset\"].apply(null, arguments)\n});\nvar _sbrk = Module[\"_sbrk\"] = (function() {\n    return Module[\"asm\"][\"_sbrk\"].apply(null, arguments)\n});\nvar _emscripten_get_global_libc = Module[\"_emscripten_get_global_libc\"] = (function() {\n    return Module[\"asm\"][\"_emscripten_get_global_libc\"].apply(null, arguments)\n});\nvar _memcpy = Module[\"_memcpy\"] = (function() {\n    return Module[\"asm\"][\"_memcpy\"].apply(null, arguments)\n});\nvar _create_decoder = Module[\"_create_decoder\"] = (function() {\n    return Module[\"asm\"][\"_create_decoder\"].apply(null, arguments)\n});\nvar setThrew = Module[\"setThrew\"] = (function() {\n    return Module[\"asm\"][\"setThrew\"].apply(null, arguments)\n});\nvar stackRestore = Module[\"stackRestore\"] = (function() {\n    return Module[\"asm\"][\"stackRestore\"].apply(null, arguments)\n});\nvar ___errno_location = Module[\"___errno_location\"] = (function() {\n    return Module[\"asm\"][\"___errno_location\"].apply(null, arguments)\n});\nvar stackAlloc = Module[\"stackAlloc\"] = (function() {\n    return Module[\"asm\"][\"stackAlloc\"].apply(null, arguments)\n});\nRuntime.stackAlloc = Module[\"stackAlloc\"];\nRuntime.stackSave = Module[\"stackSave\"];\nRuntime.stackRestore = Module[\"stackRestore\"];\nRuntime.establishStackSpace = Module[\"establishStackSpace\"];\nRuntime.setTempRet0 = Module[\"setTempRet0\"];\nRuntime.getTempRet0 = Module[\"getTempRet0\"];\nModule[\"asm\"] = asm;\nif (memoryInitializer) {\n    if (typeof Module[\"locateFile\"] === \"function\") {\n        memoryInitializer = Module[\"locateFile\"](memoryInitializer)\n    } else if (Module[\"memoryInitializerPrefixURL\"]) {\n        memoryInitializer = Module[\"memoryInitializerPrefixURL\"] + memoryInitializer\n    }\n    if (ENVIRONMENT_IS_NODE || ENVIRONMENT_IS_SHELL) {\n        var data = Module[\"readBinary\"](memoryInitializer);\n        HEAPU8.set(data, Runtime.GLOBAL_BASE)\n    } else {\n        addRunDependency(\"memory initializer\");\n        var applyMemoryInitializer = (function(data) {\n            if (data.byteLength) data = new Uint8Array(data);\n            HEAPU8.set(data, Runtime.GLOBAL_BASE);\n            if (Module[\"memoryInitializerRequest\"]) delete Module[\"memoryInitializerRequest\"].response;\n            removeRunDependency(\"memory initializer\")\n        });\n\n        function doBrowserLoad() {\n            Module[\"readAsync\"](memoryInitializer, applyMemoryInitializer, (function() {\n                throw \"could not load memory initializer \" + memoryInitializer\n            }))\n        }\n        if (Module[\"memoryInitializerRequest\"]) {\n            function useRequest() {\n                var request = Module[\"memoryInitializerRequest\"];\n                if (request.status !== 200 && request.status !== 0) {\n                    console.warn(\"a problem seems to have happened with Module.memoryInitializerRequest, status: \" + request.status + \", retrying \" + memoryInitializer);\n                    doBrowserLoad();\n                    return\n                }\n                applyMemoryInitializer(request.response)\n            }\n            if (Module[\"memoryInitializerRequest\"].response) {\n                setTimeout(useRequest, 0)\n            } else {\n                Module[\"memoryInitializerRequest\"].addEventListener(\"load\", useRequest)\n            }\n        } else {\n            doBrowserLoad()\n        }\n    }\n}\n\nfunction ExitStatus(status) {\n    this.name = \"ExitStatus\";\n    this.message = \"Program terminated with exit(\" + status + \")\";\n    this.status = status\n}\nExitStatus.prototype = new Error;\nExitStatus.prototype.constructor = ExitStatus;\nvar initialStackTop;\nvar preloadStartTime = null;\nvar calledMain = false;\ndependenciesFulfilled = function runCaller() {\n    if (!Module[\"calledRun\"]) run();\n    if (!Module[\"calledRun\"]) dependenciesFulfilled = runCaller\n};\nModule[\"callMain\"] = Module.callMain = function callMain(args) {\n    args = args || [];\n    ensureInitRuntime();\n    var argc = args.length + 1;\n\n    function pad() {\n        for (var i = 0; i < 4 - 1; i++) {\n            argv.push(0)\n        }\n    }\n    var argv = [allocate(intArrayFromString(Module[\"thisProgram\"]), \"i8\", ALLOC_NORMAL)];\n    pad();\n    for (var i = 0; i < argc - 1; i = i + 1) {\n        argv.push(allocate(intArrayFromString(args[i]), \"i8\", ALLOC_NORMAL));\n        pad()\n    }\n    argv.push(0);\n    argv = allocate(argv, \"i32\", ALLOC_NORMAL);\n    try {\n        var ret = Module[\"_main\"](argc, argv, 0);\n        exit(ret, true)\n    } catch (e) {\n        if (e instanceof ExitStatus) {\n            return\n        } else if (e == \"SimulateInfiniteLoop\") {\n            Module[\"noExitRuntime\"] = true;\n            return\n        } else {\n            var toLog = e;\n            if (e && typeof e === \"object\" && e.stack) {\n                toLog = [e, e.stack]\n            }\n            Module.printErr(\"exception thrown: \" + toLog);\n            Module[\"quit\"](1, e)\n        }\n    } finally {\n        calledMain = true\n    }\n};\n\nfunction run(args) {\n    args = args || Module[\"arguments\"];\n    if (preloadStartTime === null) preloadStartTime = Date.now();\n    if (runDependencies > 0) {\n        return\n    }\n    preRun();\n    if (runDependencies > 0) return;\n    if (Module[\"calledRun\"]) return;\n\n    function doRun() {\n        if (Module[\"calledRun\"]) return;\n        Module[\"calledRun\"] = true;\n        if (ABORT) return;\n        ensureInitRuntime();\n        preMain();\n        if (Module[\"onRuntimeInitialized\"]) Module[\"onRuntimeInitialized\"]();\n        if (Module[\"_main\"] && shouldRunNow) Module[\"callMain\"](args);\n        postRun()\n    }\n    if (Module[\"setStatus\"]) {\n        Module[\"setStatus\"](\"Running...\");\n        setTimeout((function() {\n            setTimeout((function() {\n                Module[\"setStatus\"](\"\")\n            }), 1);\n            doRun()\n        }), 1)\n    } else {\n        doRun()\n    }\n}\nModule[\"run\"] = Module.run = run;\n\nfunction exit(status, implicit) {\n    if (implicit && Module[\"noExitRuntime\"]) {\n        return\n    }\n    if (Module[\"noExitRuntime\"]) {} else {\n        ABORT = true;\n        EXITSTATUS = status;\n        STACKTOP = initialStackTop;\n        exitRuntime();\n        if (Module[\"onExit\"]) Module[\"onExit\"](status)\n    }\n    if (ENVIRONMENT_IS_NODE) {\n        process[\"exit\"](status)\n    }\n    Module[\"quit\"](status, new ExitStatus(status))\n}\nModule[\"exit\"] = Module.exit = exit;\nvar abortDecorators = [];\n\nfunction abort(what) {\n    if (Module[\"onAbort\"]) {\n        Module[\"onAbort\"](what)\n    }\n    if (what !== undefined) {\n        Module.print(what);\n        Module.printErr(what);\n        what = JSON.stringify(what)\n    } else {\n        what = \"\"\n    }\n    ABORT = true;\n    EXITSTATUS = 1;\n    var extra = \"\\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.\";\n    var output = \"abort(\" + what + \") at \" + stackTrace() + extra;\n    if (abortDecorators) {\n        abortDecorators.forEach((function(decorator) {\n            output = decorator(output, what)\n        }))\n    }\n    throw output\n}\nModule[\"abort\"] = Module.abort = abort;\nif (Module[\"preInit\"]) {\n    if (typeof Module[\"preInit\"] == \"function\") Module[\"preInit\"] = [Module[\"preInit\"]];\n    while (Module[\"preInit\"].length > 0) {\n        Module[\"preInit\"].pop()()\n    }\n}\nvar shouldRunNow = true;\nif (Module[\"noInitialRun\"]) {\n    shouldRunNow = false\n}\nModule[\"noExitRuntime\"] = true;\nrun()"
	},
	"workermain.js": {
		"type": "application/javascript",
		"str": "'use strict';let hasInitialised=false;let runtime=null;function HandleInitRuntimeMessage(e){const data=e.data;if(data&&data[\"type\"]===\"init-runtime\"){InitRuntime(data);self.removeEventListener(\"message\",HandleInitRuntimeMessage)}}self.addEventListener(\"message\",HandleInitRuntimeMessage);self.c3_import=url=>import(url);function IsAbsoluteURL(url){return/^(?:[a-z\\-]+:)?\\/\\//.test(url)||url.substr(0,5)===\"data:\"||url.substr(0,5)===\"blob:\"}function IsRelativeURL(url){return!IsAbsoluteURL(url)}\nasync function LoadScripts(scriptsArr){if(scriptsArr.length===1){const url=scriptsArr[0];await import(((IsRelativeURL(url)?\"./\":\"\")+url))}else{const scriptStr=scriptsArr.map(url=>`import \"${IsRelativeURL(url)?\"./\":\"\"}${url}\";`).join(\"\\n\");const blobUrl=URL.createObjectURL(new Blob([scriptStr],{type:\"application/javascript\"}));try{await import(blobUrl)}catch(err){console.warn(\"[Construct] Unable to import script from blob: URL. Falling back to loading scripts sequentially, which could significantly increase loading time. Make sure blob: URLs are allowed for best performance.\",\nerr);for(const url of scriptsArr)await import(((IsRelativeURL(url)?\"./\":\"\")+url))}}}\nasync function InitRuntime(data){if(hasInitialised)throw new Error(\"already initialised\");hasInitialised=true;const messagePort=data[\"messagePort\"];const runtimeBaseUrl=data[\"runtimeBaseUrl\"];const exportType=data[\"exportType\"];self.devicePixelRatio=data[\"devicePixelRatio\"];const workerDependencyScripts=data[\"workerDependencyScripts\"].map(urlOrBlob=>{let url=urlOrBlob;if(urlOrBlob instanceof Blob)url=URL.createObjectURL(urlOrBlob);else url=(new URL(url,runtimeBaseUrl)).toString();return url});const runOnStartupFunctions=\n[];self.runOnStartup=function runOnStartup(f){if(typeof f!==\"function\")throw new Error(\"runOnStartup called without a function\");runOnStartupFunctions.push(f)};const engineScripts=data[\"engineScripts\"].map(url=>(new URL(url,runtimeBaseUrl)).toString());try{await LoadScripts([...workerDependencyScripts,...engineScripts])}catch(err){console.error(\"[C3 runtime] Failed to load all engine scripts in worker: \",err);return}const scriptsStatus=data[\"projectScriptsStatus\"];self[\"C3_ProjectScriptsStatus\"]=\nscriptsStatus;const mainProjectScript=data[\"mainProjectScript\"];const allProjectScripts=data[\"projectScripts\"];for(let [originalUrl,loadUrl]of allProjectScripts){if(!loadUrl)loadUrl=originalUrl;if(originalUrl===mainProjectScript)try{await LoadScripts([loadUrl]);if(exportType===\"preview\"&&!scriptsStatus[originalUrl])ReportProjectMainScriptError(originalUrl,\"main script did not run to completion\",messagePort)}catch(err){ReportProjectMainScriptError(originalUrl,err,messagePort)}else if(originalUrl===\n\"scriptsInEvents.js\"||originalUrl.endsWith(\"/scriptsInEvents.js\"))await LoadScripts([loadUrl])}data[\"runOnStartupFunctions\"]=runOnStartupFunctions;if(exportType===\"preview\"&&typeof self.C3.ScriptsInEvents!==\"object\"){const msg=\"Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.\";console.error(\"[C3 runtime] \"+msg);messagePort.postMessage({\"type\":\"alert-error\",\"message\":msg});return}messagePort.postMessage({\"type\":\"creating-runtime\"});runtime=self[\"C3_CreateRuntime\"](data);\nawait self[\"C3_InitRuntime\"](runtime,data)}function ReportProjectMainScriptError(url,err,messagePort){console.error(`[Preview] Failed to load project main script (${url}): `,err);const msg=`Failed to load project main script (${url}). Check all your JavaScript code has valid syntax. Press F12 and check the console for error details.`;messagePort.postMessage({\"type\":\"alert-error\",\"message\":msg})};\n"
	},
	"scripts/dispatchworker.js": {
		"type": "application/javascript",
		"str": "'use strict';self.inputPort=null;self.jobQueue=[];self.jobWorkers=[];self.sentBlobs=[];self.sentBuffers=[];self.importedScripts=[];self.lastBroadcasts=new Map;\nclass JobWorker{constructor(port,number){this._port=port;this._number=number;this._isReady=false;this._isBusy=false;this._port.onmessage=e=>this._OnMessage(e.data)}ImportScripts(scripts){this._port.postMessage({\"type\":\"_import_scripts\",\"scripts\":scripts})}SendBlob(blob,id){this._port.postMessage({\"type\":\"_send_blob\",\"blob\":blob,\"id\":id})}SendBuffer(buffer,id){this._port.postMessage({\"type\":\"_send_buffer\",\"buffer\":buffer,\"id\":id})}SendJob(job){if(this._isBusy||!this._isReady)throw new Error(\"cannot take job\");\nthis._isBusy=true;this._port.postMessage(job,job[\"transferables\"])}_InitBroadcast(job){this._port.postMessage(job,job[\"transferables\"])}SendReady(){this._port.postMessage({\"type\":\"_ready\"})}IsReady(){return this._isReady}_OnReady(){this._isReady=true;this.MaybeStartNextJob()}IsBusy(){return this._isBusy}GetNumber(){return this._number}_OnMessage(msg){const type=msg[\"type\"];switch(type){case \"ready\":this._OnReady();return;case \"done\":this._OnJobDone();return;default:console.error(\"unknown message from worker '\"+\ntype+\"'\");return}}_OnJobDone(){this._isBusy=false;this.MaybeStartNextJob()}MaybeStartNextJob(){if(this._isBusy||!this._isReady)return;const i=this._FindAvailableJob();if(i===-1)return;const job=self.jobQueue[i];const isBroadcast=job[\"isBroadcast\"];if(isBroadcast){job[\"doneFlags\"][this._number]=true;if(job[\"doneFlags\"].every(x=>x))self.jobQueue.splice(i,1)}else self.jobQueue.splice(i,1);this.SendJob(job)}_FindAvailableJob(){for(let i=0,len=self.jobQueue.length;i<len;++i){const job=self.jobQueue[i];\nif(typeof job[\"maxWorkerNum\"]===\"number\"&&this._number>=job[\"maxWorkerNum\"])continue;if(!job[\"isBroadcast\"]||this._number<job[\"doneFlags\"].length&&!job[\"doneFlags\"][this._number])return i}return-1}}let number=0;\nfunction AddJobWorker(port){const jobWorker=new JobWorker(port,number++);self.jobWorkers.push(jobWorker);for(const [blob,id]of self.sentBlobs)jobWorker.SendBlob(blob,id);for(const [buffer,id]of self.sentBuffers)jobWorker.SendBuffer(buffer,id);for(const scripts of self.importedScripts)jobWorker.ImportScripts(scripts);for(const broadcastJob of self.lastBroadcasts.values())jobWorker._InitBroadcast(broadcastJob);jobWorker.SendReady()}\nfunction CancelJob(jobId){for(let i=0,len=self.jobQueue.length;i<len;++i)if(self.jobQueue[i].jobId===jobId){self.jobQueue.splice(i,1);return}}self.addEventListener(\"message\",e=>{const msg=e.data;const type=msg[\"type\"];if(type===\"_init\"){self.inputPort=msg[\"in-port\"];self.inputPort.onmessage=OnInputPortMessage}else if(type===\"_addJobWorker\")AddJobWorker(msg[\"port\"])});\nfunction OnInputPortMessage(e){const msg=e.data;const type=msg[\"type\"];if(type===\"_cancel\"){CancelJob(msg.jobId);return}else if(type===\"_import_scripts\"){const scripts=msg[\"scripts\"];for(const w of self.jobWorkers)w.ImportScripts(scripts);self.importedScripts.push(scripts);return}else if(type===\"_send_blob\"){const blob=msg[\"blob\"];const id=msg[\"id\"];for(const w of self.jobWorkers)w.SendBlob(blob,id);self.sentBlobs.push([blob,id]);return}else if(type===\"_send_buffer\"){const buffer=msg[\"buffer\"];const id=\nmsg[\"id\"];for(const w of self.jobWorkers)w.SendBuffer(buffer,id);self.sentBuffers.push([buffer,id]);return}else if(type===\"_no_more_workers\"){self.sentBlobs.length=0;self.sentBuffers.length=0;self.importedScripts.length=0;self.lastBroadcasts.clear();return}self.jobQueue.push(msg);if(msg[\"isBroadcast\"]){const maxWorkerNum=msg[\"maxWorkerNum\"];const curWorkerCount=self.jobWorkers.length;const useWorkerCount=typeof maxWorkerNum===\"number\"?Math.min(maxWorkerNum,curWorkerCount):curWorkerCount;msg[\"doneFlags\"]=\n(new Array(useWorkerCount)).fill(false);msg[\"transferables\"]=[];self.lastBroadcasts.delete(msg[\"type\"]);self.lastBroadcasts.set(msg[\"type\"],msg)}for(const w of self.jobWorkers)w.MaybeStartNextJob()};\n"
	},
	"scripts/jobworker.js": {
		"type": "application/javascript",
		"str": "'use strict';self.dispatchPort=null;self.outputPort=null;self.workerNumber=-1;self.activeJobId=null;self.sentBlobs=new Map;self.sentBuffers=new Map;self.JobHandlers={};\nfunction FlipImageData(data,width,height){const stride=width*4;const tempRow=new Uint8Array(stride);const imageBuffer=data.buffer;for(let topY=0,len=Math.floor(height/2);topY<len;++topY){const bottomY=height-topY-1;const topRow=new Uint8Array(imageBuffer,topY*stride,stride);const bottomRow=new Uint8Array(imageBuffer,bottomY*stride,stride);tempRow.set(topRow);topRow.set(bottomRow);bottomRow.set(tempRow)}}\nfunction UnpremultiplyImageData(data){for(let ptr=0,len=data.length;ptr<len;ptr+=4){const a=data[ptr+3];if(a===255)continue;const scale=255/a;data[ptr]*=scale;data[ptr+1]*=scale;data[ptr+2]*=scale}}\nself.JobHandlers[\"ProcessImageData\"]=function(params){const buffer=params[\"buffer\"];const data=new Uint8Array(buffer);const width=params[\"width\"];const height=params[\"height\"];if(params[\"flipY\"])FlipImageData(data,width,height);if(params[\"unpremultiply\"])UnpremultiplyImageData(data);return{result:buffer,transferables:[buffer]}};\nself.addEventListener(\"message\",e=>{const msg=e.data;const type=msg[\"type\"];switch(type){case \"init\":self.workerNumber=msg[\"number\"];self.dispatchPort=msg[\"dispatch-port\"];self.dispatchPort.onmessage=OnDispatchWorkerMessage;self.outputPort=msg[\"output-port\"];return;case \"terminate\":self.close();return;default:console.error(\"unknown message '\"+type+\"'\");return}});function SendReady(){self.dispatchPort.postMessage({\"type\":\"ready\"});self.outputPort.postMessage({\"type\":\"ready\"})}\nfunction SendError(isBroadcast,e){if(!isBroadcast)self.outputPort.postMessage({\"type\":\"error\",\"jobId\":self.activeJobId,\"error\":e.toString()});SendDone()}function SendResult(isBroadcast,ret){if(!isBroadcast){const transferables=ret.transferables||[];self.outputPort.postMessage({\"type\":\"result\",\"jobId\":self.activeJobId,\"result\":ret.result},transferables)}SendDone()}function SendDone(){self.activeJobId=null;self.dispatchPort.postMessage({\"type\":\"done\"})}\nfunction SendProgress(val){self.outputPort.postMessage({\"type\":\"progress\",\"jobId\":self.activeJobId,\"progress\":val})}\nfunction OnDispatchWorkerMessage(e){const msg=e.data;const type=msg[\"type\"];if(type===\"_import_scripts\"){importScripts(...msg[\"scripts\"]);return}else if(type===\"_send_blob\"){self.sentBlobs.set(msg[\"id\"],msg[\"blob\"]);return}else if(type===\"_send_buffer\"){self.sentBuffers.set(msg[\"id\"],msg[\"buffer\"]);return}else if(type===\"_ready\"){SendReady();return}const jobId=msg[\"jobId\"];const isBroadcast=msg[\"isBroadcast\"];const params=msg[\"params\"];let ret;self.activeJobId=jobId;if(!self.JobHandlers.hasOwnProperty(type)){console.error(`no handler for message type '${type}'`);\nreturn}try{ret=self.JobHandlers[type](params)}catch(e){SendError(isBroadcast,\"Exception in job handler: \"+e);return}if(ret&&ret.then)ret.then(asyncRet=>SendResult(isBroadcast,asyncRet)).catch(err=>SendError(isBroadcast,\"Rejection in job handler: \"+err));else SendResult(isBroadcast,ret)};\n"
	},
	"box2d.wasm": "./box2d.wasm",
	"images/logo背景-sheet0.png": "./images/logo背景-sheet0.png",
	"images/shared-0-sheet4.png": "./images/shared-0-sheet4.png",
	"images/shared-0-sheet5.png": "./images/shared-0-sheet5.png",
	"images/shared-1-sheet4.png": "./images/shared-1-sheet4.png",
	"images/shared-1-sheet5.png": "./images/shared-1-sheet5.png",
	"images/坏结局字幕-sheet0.png": "./images/坏结局字幕-sheet0.png",
	"images/点击小叉关掉窗口-sheet0.png": "./images/点击小叉关掉窗口-sheet0.png",
	"images/shared-0-sheet1.png": "./images/shared-0-sheet1.png",
	"images/shared-0-sheet2.png": "./images/shared-0-sheet2.png",
	"images/shared-0-sheet3.png": "./images/shared-0-sheet3.png",
	"images/方形鲨鱼出场-sheet0.png": "./images/方形鲨鱼出场-sheet0.png",
	"images/shared-1-sheet2.png": "./images/shared-1-sheet2.png",
	"images/shared-1-sheet3.png": "./images/shared-1-sheet3.png",
	"images/喂食-sheet0.png": "./images/喂食-sheet0.png",
	"images/不领养但带回鲨鱼-sheet0.png": "./images/不领养但带回鲨鱼-sheet0.png",
	"images/最终结局小鲨鱼-sheet0.png": "./images/最终结局小鲨鱼-sheet0.png",
	"images/好结局字幕-sheet0.png": "./images/好结局字幕-sheet0.png",
	"images/关灯-sheet0.png": "./images/关灯-sheet0.png",
	"images/选语言小鲨鱼-sheet0.png": "./images/选语言小鲨鱼-sheet0.png",
	"images/锻炼字幕-sheet0.png": "./images/锻炼字幕-sheet0.png",
	"images/睡觉-sheet0.png": "./images/睡觉-sheet0.png",
	"images/等待10分钟-sheet0.png": "./images/等待10分钟-sheet0.png",
	"images/shared-1-sheet0.png": "./images/shared-1-sheet0.png",
	"images/shared-1-sheet1.png": "./images/shared-1-sheet1.png",
	"images/好结局-sheet0.png": "./images/好结局-sheet0.png",
	"images/shared-0-sheet0.png": "./images/shared-0-sheet0.png",
	"images/小鲨鱼-sheet0.png": "./images/小鲨鱼-sheet0.png",
	"images/不喂-sheet0.png": "./images/不喂-sheet0.png",
	"images/结局910带回家的流浪鲨鱼-sheet0.png": "./images/结局910带回家的流浪鲨鱼-sheet0.png",
	"scripts/opus.wasm.wasm": "./scripts/opus.wasm.wasm",
	"media/logo/咚 小提示.webm": "./media/logo/咚 小提示.webm",
	"media/logo/logo语音1.webm": "./media/logo/logo语音1.webm",
	"media/logo/en.webm": "./media/logo/en.webm",
	"media/logo/logo语音2.webm": "./media/logo/logo语音2.webm",
	"media/logo/logo语音3.webm": "./media/logo/logo语音3.webm",
	"media/logo/logo语音4.webm": "./media/logo/logo语音4.webm",
	"media/logo/logo语音5.webm": "./media/logo/logo语音5.webm",
	"media/选语言/咚当.webm": "./media/选语言/咚当.webm",
	"media/选语言/选了日语.webm": "./media/选语言/选了日语.webm",
	"media/选语言/选了英语.webm": "./media/选语言/选了英语.webm",
	"media/选语言/选了中文.webm": "./media/选语言/选了中文.webm",
	"media/选语言/我觉得要不选中文吧？.webm": "./media/选语言/我觉得要不选中文吧？.webm",
	"media/选语言/小鲨鱼被点击.webm": "./media/选语言/小鲨鱼被点击.webm",
	"media/选语言/不要再点我啦.webm": "./media/选语言/不要再点我啦.webm",
	"media/领养询问/滑走的音效.webm": "./media/领养询问/滑走的音效.webm",
	"media/领养询问/确认放弃.webm": "./media/领养询问/确认放弃.webm",
	"media/领养询问/确认领养.webm": "./media/领养询问/确认领养.webm",
	"media/领养询问/滑走的音效2.webm": "./media/领养询问/滑走的音效2.webm",
	"media/领养询问/滑走的音效3.webm": "./media/领养询问/滑走的音效3.webm",
	"media/领养询问/滑走的音效4.webm": "./media/领养询问/滑走的音效4.webm",
	"media/领养询问/等待40秒.webm": "./media/领养询问/等待40秒.webm",
	"media/结局通用音效/获得结局.webm": "./media/结局通用音效/获得结局.webm",
	"media/结局通用音效/跳转到领养询问.webm": "./media/结局通用音效/跳转到领养询问.webm",
	"media/喂养界面/新手引导/可以给我吗.webm": "./media/喂养界面/新手引导/可以给我吗.webm",
	"media/喂养界面/新手引导/我想吃苹果.webm": "./media/喂养界面/新手引导/我想吃苹果.webm",
	"media/喂养界面/新手引导/对对 就是那个 .webm": "./media/喂养界面/新手引导/对对 就是那个 .webm",
	"media/喂养界面/新手引导/你好.webm": "./media/喂养界面/新手引导/你好.webm",
	"media/喂养界面/喂食/啊！我怎么……完全变成方块了.webm": "./media/喂养界面/喂食/啊！我怎么……完全变成方块了.webm",
	"media/喂养界面/喂食/吃得很满足啦.webm": "./media/喂养界面/喂食/吃得很满足啦.webm",
	"media/喂养界面/喂食/好好吃哦！谢谢你！.webm": "./media/喂养界面/喂食/好好吃哦！谢谢你！.webm",
	"media/喂养界面/喂食/好想锻炼一下消消食啊.webm": "./media/喂养界面/喂食/好想锻炼一下消消食啊.webm",
	"media/喂养界面/喂食/嗯？鲨鱼应该吃鱼肉？.webm": "./media/喂养界面/喂食/嗯？鲨鱼应该吃鱼肉？.webm",
	"media/喂养界面/喂食/鲨鱼吃苹果也很正常嘛.webm": "./media/喂养界面/喂食/鲨鱼吃苹果也很正常嘛.webm",
	"media/喂养界面/喂食/我爱吃苹果！.webm": "./media/喂养界面/喂食/我爱吃苹果！.webm",
	"media/喂养界面/喂食/我会不会吃胖了？.webm": "./media/喂养界面/喂食/我会不会吃胖了？.webm",
	"media/喂养界面/喂食/谢谢你愿意接纳我.webm": "./media/喂养界面/喂食/谢谢你愿意接纳我.webm",
	"media/喂养界面/喂食/已经不饿啦.webm": "./media/喂养界面/喂食/已经不饿啦.webm",
	"media/喂养界面/喂食/糟了，好像身体卡住了.webm": "./media/喂养界面/喂食/糟了，好像身体卡住了.webm",
	"media/喂养界面/喂食/真的不能再吃了.webm": "./media/喂养界面/喂食/真的不能再吃了.webm",
	"media/喂养界面/喂食/终于吃到了，谢谢你！.webm": "./media/喂养界面/喂食/终于吃到了，谢谢你！.webm",
	"media/喂养界面/喂食/方形鲨鱼.webm": "./media/喂养界面/喂食/方形鲨鱼.webm",
	"media/喂养界面/喂食/方形鲨鱼_BGM.webm": "./media/喂养界面/喂食/方形鲨鱼_BGM.webm",
	"media/喂养界面/喂食/嗝兹嗝兹_01.webm": "./media/喂养界面/喂食/嗝兹嗝兹_01.webm",
	"media/喂养界面/不喂/唉再见了，我要出门去找食物吃了……【结局3】…….webm": "./media/喂养界面/不喂/唉再见了，我要出门去找食物吃了……【结局3】…….webm",
	"media/喂养界面/不喂/拜托？.webm": "./media/喂养界面/不喂/拜托？.webm",
	"media/喂养界面/不喂/抱歉，如果我不是给人带来麻烦的宠物就好了.webm": "./media/喂养界面/不喂/抱歉，如果我不是给人带来麻烦的宠物就好了.webm",
	"media/喂养界面/不喂/好饿，要饿晕了.webm": "./media/喂养界面/不喂/好饿，要饿晕了.webm",
	"media/喂养界面/不喂/好饿哦…….webm": "./media/喂养界面/不喂/好饿哦…….webm",
	"media/喂养界面/不喂/就差一点就可以吃到了.webm": "./media/喂养界面/不喂/就差一点就可以吃到了.webm",
	"media/喂养界面/不喂/可以帮帮我吗？.webm": "./media/喂养界面/不喂/可以帮帮我吗？.webm",
	"media/喂养界面/不喂/可以给我苹果吗？.webm": "./media/喂养界面/不喂/可以给我苹果吗？.webm",
	"media/喂养界面/不喂/明明苹果就在这么近的地方…….webm": "./media/喂养界面/不喂/明明苹果就在这么近的地方…….webm",
	"media/喂养界面/不喂/莫非……其实你讨厌我？.webm": "./media/喂养界面/不喂/莫非……其实你讨厌我？.webm",
	"media/喂养界面/不喂/苹果是属于你的，我没办法吃到.webm": "./media/喂养界面/不喂/苹果是属于你的，我没办法吃到.webm",
	"media/喂养界面/不喂/其实……我提前吃了点小零食，不怎么饿，嘿嘿.webm": "./media/喂养界面/不喂/其实……我提前吃了点小零食，不怎么饿，嘿嘿.webm",
	"media/喂养界面/不喂/为什么无动于衷呢？.webm": "./media/喂养界面/不喂/为什么无动于衷呢？.webm",
	"media/喂养界面/不喂/我闻到甜甜的香味了！.webm": "./media/喂养界面/不喂/我闻到甜甜的香味了！.webm",
	"media/喂养界面/不喂/照料宠物让你感到很枯燥吗.webm": "./media/喂养界面/不喂/照料宠物让你感到很枯燥吗.webm",
	"media/喂养界面/锻炼/1 瘦下来咯.webm": "./media/喂养界面/锻炼/1 瘦下来咯.webm",
	"media/喂养界面/锻炼/可以让我休息吗…….webm": "./media/喂养界面/锻炼/可以让我休息吗…….webm",
	"media/喂养界面/锻炼/快离开这恶劣的主人，不然你也有危险！.webm": "./media/喂养界面/锻炼/快离开这恶劣的主人，不然你也有危险！.webm",
	"media/喂养界面/锻炼/鲨鱼也要健身吗？.webm": "./media/喂养界面/锻炼/鲨鱼也要健身吗？.webm",
	"media/喂养界面/锻炼/身上有点酸疼……是正常的吗？.webm": "./media/喂养界面/锻炼/身上有点酸疼……是正常的吗？.webm",
	"media/喂养界面/锻炼/身体有点痛，而且好困啊…….webm": "./media/喂养界面/锻炼/身体有点痛，而且好困啊…….webm",
	"media/喂养界面/锻炼/我…….webm": "./media/喂养界面/锻炼/我…….webm",
	"media/喂养界面/锻炼/我可以去海里帮你抓鱼！.webm": "./media/喂养界面/锻炼/我可以去海里帮你抓鱼！.webm",
	"media/喂养界面/锻炼/我是超级肌肉鲨！.webm": "./media/喂养界面/锻炼/我是超级肌肉鲨！.webm",
	"media/喂养界面/锻炼/我要是去游泳，算不算健身？.webm": "./media/喂养界面/锻炼/我要是去游泳，算不算健身？.webm",
	"media/喂养界面/锻炼/这个东西是哑铃吗？.webm": "./media/喂养界面/锻炼/这个东西是哑铃吗？.webm",
	"media/喂养界面/锻炼/累死 倒地.webm": "./media/喂养界面/锻炼/累死 倒地.webm",
	"media/喂养界面/锻炼/瘦下来咯 音效.webm": "./media/喂养界面/锻炼/瘦下来咯 音效.webm",
	"media/喂养界面/睡眠/快睡着时突然腿抽搐一下是为什么呢？……嗯？我没有腿？.webm": "./media/喂养界面/睡眠/快睡着时突然腿抽搐一下是为什么呢？……嗯？我没有腿？.webm",
	"media/喂养界面/睡眠/你不会一直在盯着我睡觉吧？.webm": "./media/喂养界面/睡眠/你不会一直在盯着我睡觉吧？.webm",
	"media/喂养界面/睡眠/神清气爽！.webm": "./media/喂养界面/睡眠/神清气爽！.webm",
	"media/喂养界面/睡眠/完全睡饱啦！.webm": "./media/喂养界面/睡眠/完全睡饱啦！.webm",
	"media/喂养界面/睡眠/我不困.webm": "./media/喂养界面/睡眠/我不困.webm",
	"media/喂养界面/睡眠/我刚梦见自己被吃得只剩鱼骨了，吓死我了.webm": "./media/喂养界面/睡眠/我刚梦见自己被吃得只剩鱼骨了，吓死我了.webm",
	"media/喂养界面/睡眠/我睡觉时有冒泡泡吗？.webm": "./media/喂养界面/睡眠/我睡觉时有冒泡泡吗？.webm",
	"media/喂养界面/垃圾桶/删除音效.webm": "./media/喂养界面/垃圾桶/删除音效.webm",
	"media/喂养界面/垃圾桶/ZZ被删.webm": "./media/喂养界面/垃圾桶/ZZ被删.webm",
	"media/喂养界面/垃圾桶/啊！你把重要的东西删掉了…….webm": "./media/喂养界面/垃圾桶/啊！你把重要的东西删掉了…….webm",
	"media/喂养界面/戴上花/戴上花.webm": "./media/喂养界面/戴上花/戴上花.webm",
	"media/喂养界面/苹果反弹.webm": "./media/喂养界面/苹果反弹.webm",
	"media/喂养界面/咀嚼.webm": "./media/喂养界面/咀嚼.webm",
	"media/喂养界面/橡皮鸭子.webm": "./media/喂养界面/橡皮鸭子.webm",
	"media/喂养界面/你……没什么.webm": "./media/喂养界面/你……没什么.webm",
	"media/室外/大自然鸟叫.webm": "./media/室外/大自然鸟叫.webm",
	"media/室外/出门和回家音效.webm": "./media/室外/出门和回家音效.webm",
	"media/室外/你……不讨厌我吗？.webm": "./media/室外/你……不讨厌我吗？.webm",
	"media/室外/你明明看到我了…….webm": "./media/室外/你明明看到我了…….webm",
	"media/室外/展开信.webm": "./media/室外/展开信.webm",
	"media/开关灯/开关灯的音效.webm": "./media/开关灯/开关灯的音效.webm",
	"media/开关灯/信号噪音.webm": "./media/开关灯/信号噪音.webm",
	"media/开关灯/啊……（有些惨痛）.webm": "./media/开关灯/啊……（有些惨痛）.webm",
	"media/开关灯/啊……终于……终于开灯了，谢谢您，请不要再这样吓我了……好可怕…….webm": "./media/开关灯/啊……终于……终于开灯了，谢谢您，请不要再这样吓我了……好可怕…….webm",
	"media/开关灯/拜托……可以先开个灯吗？我真的非常非常害怕关灯，要是关灯太久的话…….webm": "./media/开关灯/拜托……可以先开个灯吗？我真的非常非常害怕关灯，要是关灯太久的话…….webm",
	"media/开关灯/呼……黑暗好吓人啊.webm": "./media/开关灯/呼……黑暗好吓人啊.webm",
	"media/开关灯/其实……我有点怕黑， 可以开灯吗？.webm": "./media/开关灯/其实……我有点怕黑， 可以开灯吗？.webm",
	"media/开关灯/求……求你了快开灯吧，是我哪里做得不好让你觉得无趣了吗，真的这么讨厌看到我吗？我……我会尽力让你开心的，可以开灯吗？.webm": "./media/开关灯/求……求你了快开灯吧，是我哪里做得不好让你觉得无趣了吗，真的这么讨厌看到我吗？我……我会尽力让你开心的，可以开灯吗？.webm",
	"media/开关灯/她的眼睛看到我了…….webm": "./media/开关灯/她的眼睛看到我了…….webm",
	"media/开关灯/哇！好黑！是你关了灯吗？.webm": "./media/开关灯/哇！好黑！是你关了灯吗？.webm",
	"media/开关灯/我害怕关灯…….webm": "./media/开关灯/我害怕关灯…….webm",
	"media/开关灯/啊……（有些惨痛）2.webm": "./media/开关灯/啊……（有些惨痛）2.webm",
	"media/开关灯/被删除后的雪花噪音.webm": "./media/开关灯/被删除后的雪花噪音.webm",
	"media/开关灯/阶段345.webm": "./media/开关灯/阶段345.webm",
	"media/开关灯/打不开灯.webm": "./media/开关灯/打不开灯.webm",
	"media/开关灯/不妙震撼地开灯.webm": "./media/开关灯/不妙震撼地开灯.webm",
	"media/流浪鲨鱼带回家/呼……这一次终于不用 再被 变成 电子程序了.webm": "./media/流浪鲨鱼带回家/呼……这一次终于不用 再被 变成 电子程序了.webm",
	"media/流浪鲨鱼带回家/家里的鲨鱼：哇！新朋友！？.webm": "./media/流浪鲨鱼带回家/家里的鲨鱼：哇！新朋友！？.webm",
	"media/不领养但带回鲨鱼/不领养，但带回鲨鱼.webm": "./media/不领养但带回鲨鱼/不领养，但带回鲨鱼.webm",
	"media/不领养但带回鲨鱼/我……明白了。.webm": "./media/不领养但带回鲨鱼/我……明白了。.webm",
	"media/不领养但带回鲨鱼/谢谢你……您……谢谢您…….webm": "./media/不领养但带回鲨鱼/谢谢你……您……谢谢您…….webm",
	"media/最终结局/点掉叉叉.webm": "./media/最终结局/点掉叉叉.webm",
	"media/最终结局/好结局.webm": "./media/最终结局/好结局.webm",
	"media/最终结局/坏结局.webm": "./media/最终结局/坏结局.webm",
	"media/最终结局/一震诡异不妙的氛围声.webm": "./media/最终结局/一震诡异不妙的氛围声.webm",
	"media/普通结局BGM.webm": "./media/普通结局BGM.webm",
	"media/选语言BGM.webm": "./media/选语言BGM.webm",
	"media/有点悲伤结局BGM.webm": "./media/有点悲伤结局BGM.webm",
	"media/0.webm": "./media/0.webm",
	"media/1.webm": "./media/1.webm",
	"media/3.webm": "./media/3.webm",
	"media/关灯后的BGM.webm": "./media/关灯后的BGM.webm",
	"media/特殊喂养界面BGM.webm": "./media/特殊喂养界面BGM.webm",
	"media/好结局BGM.webm": "./media/好结局BGM.webm",
	"media/2.webm": "./media/2.webm",
	"media/关闭叉叉发现鲨鱼.webm": "./media/关闭叉叉发现鲨鱼.webm",
	"media/最终坏结局.webm": "./media/最终坏结局.webm"
};
console.log("editor by LAUBCDD");
console.log("114514");
</script>
<script>
self.Box2DWasmModule = function(Box2D) {
  Box2D = Box2D || {};
  var Module = Box2D;

var b;b||(b=eval("(function() { try { return Box2D || {} } catch(e) { return {} } })()"));var aa={},ba;for(ba in b)b.hasOwnProperty(ba)&&(aa[ba]=b[ba]);var ca=!1,da=!1,ea=!1,fa=!1;
if(b.ENVIRONMENT)if("WEB"===b.ENVIRONMENT)ca=!0;else if("WORKER"===b.ENVIRONMENT)da=!0;else if("NODE"===b.ENVIRONMENT)ea=!0;else if("SHELL"===b.ENVIRONMENT)fa=!0;else throw Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ca="object"===typeof window,da="function"===typeof importScripts,ea="object"===typeof process&&"function"===typeof require&&!ca&&!da,fa=!ca&&!ea&&!da;
if(ea){b.print||(b.print=console.log);b.printErr||(b.printErr=console.warn);var ga,ha;b.read=function(a,c){ga||(ga=require("fs"));ha||(ha=require("path"));a=ha.normalize(a);var d=ga.readFileSync(a);return c?d:d.toString()};b.readBinary=function(a){a=b.read(a,!0);a.buffer||(a=new Uint8Array(a));assert(a.buffer);return a};b.load=function(a){ia(read(a))};b.thisProgram||(b.thisProgram=1<process.argv.length?process.argv[1].replace(/\\/g,"/"):"unknown-program");b.arguments=process.argv.slice(2);"undefined"!==
typeof module&&(module.exports=b);process.on("uncaughtException",function(a){if(!(a instanceof ja))throw a;});b.inspect=function(){return"[Emscripten Module object]"}}else if(fa)b.print||(b.print=print),"undefined"!=typeof printErr&&(b.printErr=printErr),b.read="undefined"!=typeof read?read:function(){throw"no read() available";},b.readBinary=function(a){if("function"===typeof readbuffer)return new Uint8Array(readbuffer(a));a=read(a,"binary");assert("object"===typeof a);return a},"undefined"!=typeof scriptArgs?
b.arguments=scriptArgs:"undefined"!=typeof arguments&&(b.arguments=arguments),"function"===typeof quit&&(b.quit=function(a){quit(a)}),eval("if (typeof gc === 'function' && gc.toString().indexOf('[native code]') > 0) var gc = undefined");else if(ca||da)b.read=function(a){var c=new XMLHttpRequest;c.open("GET",a,!1);c.send(null);return c.responseText},da&&(b.readBinary=function(a){var c=new XMLHttpRequest;c.open("GET",a,!1);c.responseType="arraybuffer";c.send(null);return new Uint8Array(c.response)}),
b.readAsync=function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.responseType="arraybuffer";e.onload=function(){200==e.status||0==e.status&&e.response?c(e.response):d()};e.onerror=d;e.send(null)},"undefined"!=typeof arguments&&(b.arguments=arguments),"undefined"!==typeof console?(b.print||(b.print=function(a){console.log(a)}),b.printErr||(b.printErr=function(a){console.warn(a)})):b.print||(b.print=function(){}),da&&(b.load=importScripts),"undefined"===typeof b.setWindowTitle&&(b.setWindowTitle=
function(a){document.title=a});else throw"Unknown runtime environment. Where are we?";function ia(a){eval.call(null,a)}!b.load&&b.read&&(b.load=function(a){ia(b.read(a))});b.print||(b.print=function(){});b.printErr||(b.printErr=b.print);b.arguments||(b.arguments=[]);b.thisProgram||(b.thisProgram="./this.program");b.quit||(b.quit=function(a,c){throw c;});b.print=b.print;b.h=b.printErr;b.preRun=[];b.postRun=[];for(ba in aa)aa.hasOwnProperty(ba)&&(b[ba]=aa[ba]);
var aa=void 0,f={f:function(a){return tempRet0=a},H:function(){return tempRet0},L:function(){return ka},K:function(a){ka=a},s:function(a){switch(a){case "i1":case "i8":return 1;case "i16":return 2;case "i32":return 4;case "i64":return 8;case "float":return 4;case "double":return 8;default:return"*"===a[a.length-1]?f.j:"i"===a[0]?(a=parseInt(a.substr(1)),assert(0===a%8),a/8):0}},F:function(a){return Math.max(f.s(a),f.j)},M:16,aa:function(a,c){"double"===c||"i64"===c?a&7&&(assert(4===(a&7)),a+=4):assert(0===
(a&3));return a},U:function(a,c,d){return d||"i64"!=a&&"double"!=a?a?Math.min(c||(a?f.F(a):0),f.j):Math.min(c,8):8},l:function(a,c,d){return d&&d.length?b["dynCall_"+a].apply(null,[c].concat(d)):b["dynCall_"+a].call(null,c)},d:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],v:function(a){for(var c=0;c<f.d.length;c++)if(!f.d[c])return f.d[c]=a,2*(1+c);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS.";
},J:function(a){f.d[(a-2)/2]=null},g:function(a){f.g.n||(f.g.n={});f.g.n[a]||(f.g.n[a]=1,b.h(a))},m:{},W:function(a,c){assert(c);f.m[c]||(f.m[c]={});var d=f.m[c];d[a]||(d[a]=1===c.length?function(){return f.l(c,a)}:2===c.length?function(d){return f.l(c,a,[d])}:function(){return f.l(c,a,Array.prototype.slice.call(arguments))});return d[a]},V:function(){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work";},t:function(a){var c=
ka;ka=ka+a|0;ka=ka+15&-16;return c},u:function(a){var c=la;la=la+a|0;la=la+15&-16;return c},D:function(a){var c=ma[oa>>2];a=(c+a+15|0)&-16;ma[oa>>2]=a;return a>=pa&&!qa()?(ma[oa>>2]=c,0):c},p:function(a,c){return Math.ceil(a/(c?c:16))*(c?c:16)},$:function(a,c,d){return d?+(a>>>0)+4294967296*+(c>>>0):+(a>>>0)+4294967296*+(c|0)},i:1024,j:4,N:0};f.addFunction=f.v;f.removeFunction=f.J;var ra=0;function assert(a,c){a||ta("Assertion failed: "+c)}
function ua(a){var c;c="i32";"*"===c.charAt(c.length-1)&&(c="i32");switch(c){case "i1":return va[a>>0];case "i8":return va[a>>0];case "i16":return ya[a>>1];case "i32":return ma[a>>2];case "i64":return ma[a>>2];case "float":return za[a>>2];case "double":return Aa[a>>3];default:ta("invalid type for setValue: "+c)}return null}
function Ba(a,c,d){var e,g,l;"number"===typeof a?(g=!0,l=a):(g=!1,l=a.length);var m="string"===typeof c?c:null,D;4==d?D=e:D=["function"===typeof Ca?Ca:f.u,f.t,f.u,f.D][void 0===d?2:d](Math.max(l,m?1:c.length));if(g){e=D;assert(0==(D&3));for(a=D+(l&-4);e<a;e+=4)ma[e>>2]=0;for(a=D+l;e<a;)va[e++>>0]=0;return D}if("i8"===m)return a.subarray||a.slice?Da.set(a,D):Da.set(new Uint8Array(a),D),D;e=0;for(var na,wa;e<l;){var G=a[e];"function"===typeof G&&(G=f.X(G));d=m||c[e];if(0===d)e++;else{"i64"==d&&(d="i32");
g=D+e;var Ga=d,Ga=Ga||"i8";"*"===Ga.charAt(Ga.length-1)&&(Ga="i32");switch(Ga){case "i1":va[g>>0]=G;break;case "i8":va[g>>0]=G;break;case "i16":ya[g>>1]=G;break;case "i32":ma[g>>2]=G;break;case "i64":tempI64=[G>>>0,(tempDouble=G,1<=+Ea(tempDouble)?0<tempDouble?(Fa(+Ha(tempDouble/4294967296),4294967295)|0)>>>0:~~+Ia((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)];ma[g>>2]=tempI64[0];ma[g+4>>2]=tempI64[1];break;case "float":za[g>>2]=G;break;case "double":Aa[g>>3]=G;break;default:ta("invalid type for setValue: "+
Ga)}wa!==d&&(na=f.s(d),wa=d);e+=na}}return D}function Ja(a){var c;if(0===c||!a)return"";for(var d=0,e,g=0;;){e=Da[a+g>>0];d|=e;if(0==e&&!c)break;g++;if(c&&g==c)break}c||(c=g);e="";if(128>d){for(;0<c;)d=String.fromCharCode.apply(String,Da.subarray(a,a+Math.min(c,1024))),e=e?e+d:d,a+=1024,c-=1024;return e}return b.UTF8ToString(a)}var Ka="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;
function La(a,c,d,e){if(0<e){e=d+e-1;for(var g=0;g<a.length;++g){var l=a.charCodeAt(g);55296<=l&&57343>=l&&(l=65536+((l&1023)<<10)|a.charCodeAt(++g)&1023);if(127>=l){if(d>=e)break;c[d++]=l}else{if(2047>=l){if(d+1>=e)break;c[d++]=192|l>>6}else{if(65535>=l){if(d+2>=e)break;c[d++]=224|l>>12}else{if(2097151>=l){if(d+3>=e)break;c[d++]=240|l>>18}else{if(67108863>=l){if(d+4>=e)break;c[d++]=248|l>>24}else{if(d+5>=e)break;c[d++]=252|l>>30;c[d++]=128|l>>24&63}c[d++]=128|l>>18&63}c[d++]=128|l>>12&63}c[d++]=
128|l>>6&63}c[d++]=128|l&63}}c[d]=0}}function Oa(a){for(var c=0,d=0;d<a.length;++d){var e=a.charCodeAt(d);55296<=e&&57343>=e&&(e=65536+((e&1023)<<10)|a.charCodeAt(++d)&1023);127>=e?++c:c=2047>=e?c+2:65535>=e?c+3:2097151>=e?c+4:67108863>=e?c+5:c+6}return c}"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");
function Pa(a){return a.replace(/__Z[\w\d_]+/g,function(a){var d;a:{var e=b.___cxa_demangle||b.__cxa_demangle;if(e)try{var g=a.substr(1),l=Oa(g)+1,m=Ca(l);La(g,Da,m,l);var D=Ca(4),na=e(m,0,0,D);if(0===ua(D)&&na){d=Ja(na);break a}}catch(wa){}finally{m&&Qa(m),D&&Qa(D),na&&Qa(na)}else f.g("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling");d=a}return a===d?a:a+" ["+d+"]"})}
function Ra(){var a;a:{a=Error();if(!a.stack){try{throw Error(0);}catch(c){a=c}if(!a.stack){a="(no stack trace available)";break a}}a=a.stack.toString()}b.extraStackTrace&&(a+="\n"+b.extraStackTrace());return Pa(a)}var Sa=65536,Ua=16777216,Va=16777216;function Wa(a,c){0<a%c&&(a+=c-a%c);return a}var buffer,va,Da,ya,Xa,ma,Ya,za,Aa;
function Za(){b.HEAP8=va=new Int8Array(buffer);b.HEAP16=ya=new Int16Array(buffer);b.HEAP32=ma=new Int32Array(buffer);b.HEAPU8=Da=new Uint8Array(buffer);b.HEAPU16=Xa=new Uint16Array(buffer);b.HEAPU32=Ya=new Uint32Array(buffer);b.HEAPF32=za=new Float32Array(buffer);b.HEAPF64=Aa=new Float64Array(buffer)}var $a,la,ab,ka,bb,cb,oa;$a=la=ab=ka=bb=cb=oa=0;
b.reallocBuffer||(b.reallocBuffer=function(a){var c;try{if(ArrayBuffer.e)c=ArrayBuffer.e(buffer,a);else{var d=va;c=new ArrayBuffer(a);(new Int8Array(c)).set(d)}}catch(e){return!1}return db(c)?c:!1});function qa(){var a=b.usingWasm?Sa:Ua,c=2147483648-a;if(ma[oa>>2]>c)return!1;var d=pa;for(pa=Math.max(pa,Va);pa<ma[oa>>2];)536870912>=pa?pa=Wa(2*pa,a):pa=Math.min(Wa((3*pa+2147483648)/4,a),c);a=b.reallocBuffer(pa);if(!a||a.byteLength!=pa)return pa=d,!1;b.buffer=buffer=a;Za();return!0}var eb;
try{eb=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),eb(new ArrayBuffer(4))}catch(fb){eb=function(a){return a.byteLength}}var gb=b.TOTAL_STACK||5242880,pa=b.TOTAL_MEMORY||16777216;pa<gb&&b.h("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+pa+"! (TOTAL_STACK="+gb+")");
b.buffer?buffer=b.buffer:"object"===typeof WebAssembly&&"function"===typeof WebAssembly.Memory?(b.wasmMemory=new WebAssembly.Memory({initial:pa/Sa}),buffer=b.wasmMemory.buffer):buffer=new ArrayBuffer(pa);Za();ma[0]=1668509029;ya[1]=25459;if(115!==Da[2]||99!==Da[3])throw"Runtime error: expected the system to be little-endian!";b.HEAP=void 0;b.buffer=buffer;b.HEAP8=va;b.HEAP16=ya;b.HEAP32=ma;b.HEAPU8=Da;b.HEAPU16=Xa;b.HEAPU32=Ya;b.HEAPF32=za;b.HEAPF64=Aa;
function hb(a){for(;0<a.length;){var c=a.shift();if("function"==typeof c)c();else{var d=c.T;"number"===typeof d?void 0===c.k?b.dynCall_v(d):b.dynCall_vi(d,c.k):d(void 0===c.k?null:c.k)}}}var ib=[],jb=[],kb=[],nb=[],ob=[],pb=!1;function qb(){var a=b.preRun.shift();ib.unshift(a)}function rb(a){var c=Array(Oa(a)+1);La(a,c,0,c.length);return c}Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(a,c){var d=a&65535,e=c&65535;return d*e+((a>>>16)*e+d*(c>>>16)<<16)|0});Math.Y=Math.imul;
if(!Math.fround){var sb=new Float32Array(1);Math.fround=function(a){sb[0]=a;return sb[0]}}Math.S=Math.fround;Math.clz32||(Math.clz32=function(a){a=a>>>0;for(var c=0;32>c;c++)if(a&1<<31-c)return c;return 32});Math.P=Math.clz32;Math.trunc||(Math.trunc=function(a){return 0>a?Math.ceil(a):Math.floor(a)});Math.trunc=Math.trunc;var Ea=Math.abs,Ia=Math.ceil,Ha=Math.floor,Fa=Math.min,tb=0,vb=null,wb=null;function xb(){tb++;b.monitorRunDependencies&&b.monitorRunDependencies(tb)}
function yb(){tb--;b.monitorRunDependencies&&b.monitorRunDependencies(tb);if(0==tb&&(null!==vb&&(clearInterval(vb),vb=null),wb)){var a=wb;wb=null;a()}}b.preloadedImages={};b.preloadedAudios={};var zb=null;
(function(a){function c(c){c=Wa(c,a.usingWasm?Sa:Ua);var d=a.buffer,e=d.byteLength;if(a.usingWasm)try{return-1!==a.wasmMemory.grow((c-e)/65536)?a.buffer=a.wasmMemory.buffer:null}catch(g){return null}else return lb.__growWasmMemory((c-e)/65536),a.buffer!==d?a.buffer:null}function d(a,c){var d=Ta;if(0>a.indexOf("."))d=(d||{})[a];else var e=a.split("."),d=(d||{})[e[0]],d=(d||{})[e[1]];c&&(d=(d||{})[c]);void 0===d&&ta("bad lookupImport to ("+a+")."+c);return d}function e(c){var d=a.buffer;c.byteLength<
d.byteLength&&a.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var d=new Int8Array(d),e=new Int8Array(c);zb||d.set(e.subarray(a.STATIC_BASE,a.STATIC_BASE+a.STATIC_BUMP),a.STATIC_BASE);e.set(d);b.buffer=buffer=c;Za()}function g(){try{var c;if(a.wasmBinary)c=a.wasmBinary,c=new Uint8Array(c);else if(a.readBinary)c=a.readBinary(G);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";
return c}catch(d){ta(d)}}function l(){return a.wasmBinary||"function"!==typeof fetch?new Promise(function(a){a(g())}):fetch(G,{Q:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+G+"'";return a.arrayBuffer()})}function m(c,d,e){if("function"!==typeof a.asm||a.asm===Ma)a.asmPreload?a.asm=a.asmPreload:eval(a.read(Ga));return"function"!==typeof a.asm?(a.printErr("asm evalling did not set the module properly"),!1):a.asm(c,d,e)}function D(c,d){function g(c){lb=c.exports;
lb.memory&&e(lb.memory);a.asm=lb;a.usingWasm=!0;yb()}if("object"!==typeof WebAssembly)return a.printErr("no native wasm support detected"),!1;if(!(a.wasmMemory instanceof WebAssembly.Memory))return a.printErr("no native wasm Memory in use"),!1;d.memory=a.wasmMemory;Ta.global={NaN:NaN,Infinity:Infinity};Ta["global.Math"]=c.Math;Ta.env=d;xb();if(a.instantiateWasm)try{return a.instantiateWasm(Ta,g)}catch(m){return a.printErr("Module.instantiateWasm callback failed with error: "+m),!1}l().then(function(a){return WebAssembly.instantiate(a,
Ta)}).then(function(a){g(a.instance)}).catch(function(c){a.printErr("failed to asynchronously prepare wasm: "+c);ta(c)});return{}}var na=a.wasmJSMethod||"native-wasm";a.wasmJSMethod=na;var wa=a.wasmTextFile||"Box2D_v2.3.1_min.wasm.wast",G=a.wasmBinaryFile||"Box2D_v2.3.1_min.wasm.wasm",Ga=a.asmjsCodeFile||"Box2D_v2.3.1_min.wasm.temp.asm.js";"function"===typeof a.locateFile&&(wa=a.locateFile(wa),G=a.locateFile(G),Ga=a.locateFile(Ga));var Ta={global:null,env:null,asm2wasm:{"f64-rem":function(a,c){return a%
c},"f64-to-int":function(a){return a|0},"i32s-div":function(a,c){return(a|0)/(c|0)|0},"i32u-div":function(a,c){return(a>>>0)/(c>>>0)>>>0},"i32s-rem":function(a,c){return(a|0)%(c|0)|0},"i32u-rem":function(a,c){return(a>>>0)%(c>>>0)>>>0},"debugger":function(){debugger}},parent:a},lb=null;a.asmPreload=a.asm;var ub=a.reallocBuffer;a.reallocBuffer=function(a){return"asmjs"===qc?ub(a):c(a)};var qc="";a.asm=function(c,l,G){if(!l.table){var Ma=a.wasmTableSize;void 0===Ma&&(Ma=1024);var mb=a.wasmMaxTableSize;
l.table="object"===typeof WebAssembly&&"function"===typeof WebAssembly.Table?void 0!==mb?new WebAssembly.Table({initial:Ma,maximum:mb,element:"anyfunc"}):new WebAssembly.Table({initial:Ma,element:"anyfunc"}):Array(Ma);a.wasmTable=l.table}l.memoryBase||(l.memoryBase=a.STATIC_BASE);l.tableBase||(l.tableBase=0);for(var V,Ma=na.split(","),mb=0;mb<Ma.length;mb++){var sa=Ma[mb];qc=sa;if("native-wasm"===sa){if(V=D(c,l))break}else if("asmjs"===sa){if(V=m(c,l,G))break}else if("interpret-asm2wasm"===sa||"interpret-s-expr"===
sa||"interpret-binary"===sa){var Na=c,xa=l,ub=G;if("function"!==typeof WasmJS)a.printErr("WasmJS not detected - polyfill not bundled?"),sa=!1;else{V=WasmJS({});V.outside=a;V.info=Ta;V.lookupImport=d;assert(ub===a.buffer);Ta.global=Na;Ta.env=xa;assert(ub===a.buffer);xa.memory=ub;assert(xa.memory instanceof ArrayBuffer);V.providedTotalMemory=a.buffer.byteLength;Na=void 0;Na="interpret-binary"===sa?g():a.read("interpret-asm2wasm"==sa?Ga:wa);xa=void 0;if("interpret-asm2wasm"==sa)xa=V._malloc(Na.length+
1),V.writeAsciiToMemory(Na,xa),V._load_asm2wasm(xa);else if("interpret-s-expr"===sa)xa=V._malloc(Na.length+1),V.writeAsciiToMemory(Na,xa),V._load_s_expr2wasm(xa);else if("interpret-binary"===sa)xa=V._malloc(Na.length),V.HEAPU8.set(Na,xa),V._load_binary2wasm(xa,Na.length);else throw"what? "+sa;V._free(xa);V._instantiate(xa);a.newBuffer&&(e(a.newBuffer),a.newBuffer=null);sa=lb=V.asmExports}if(V=sa)break}else ta("bad method: "+sa)}if(!V)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";
return V};var Ma=a.asm})(b);
var Ab=[function(a,c){var d=b.getCache(b.JSDestructionListener)[a];if(!d.hasOwnProperty("SayGoodbyeJoint"))throw"a JSImplementation must implement all functions, you forgot JSDestructionListener::SayGoodbyeJoint.";d.SayGoodbyeJoint(c)},function(a,c){var d=b.getCache(b.JSDestructionListener)[a];if(!d.hasOwnProperty("SayGoodbyeFixture"))throw"a JSImplementation must implement all functions, you forgot JSDestructionListener::SayGoodbyeFixture.";d.SayGoodbyeFixture(c)},function(a,c){var d=b.getCache(b.JSQueryCallback)[a];
if(!d.hasOwnProperty("ReportFixture"))throw"a JSImplementation must implement all functions, you forgot JSQueryCallback::ReportFixture.";return d.ReportFixture(c)},function(a,c,d,e,g){a=b.getCache(b.JSRayCastCallback)[a];if(!a.hasOwnProperty("ReportFixture"))throw"a JSImplementation must implement all functions, you forgot JSRayCastCallback::ReportFixture.";return a.ReportFixture(c,d,e,g)},function(a,c){var d=b.getCache(b.JSContactListener)[a];if(!d.hasOwnProperty("BeginContact"))throw"a JSImplementation must implement all functions, you forgot JSContactListener::BeginContact.";
d.BeginContact(c)},function(a,c){var d=b.getCache(b.JSContactListener)[a];if(!d.hasOwnProperty("EndContact"))throw"a JSImplementation must implement all functions, you forgot JSContactListener::EndContact.";d.EndContact(c)},function(a,c,d){a=b.getCache(b.JSContactListener)[a];if(!a.hasOwnProperty("PreSolve"))throw"a JSImplementation must implement all functions, you forgot JSContactListener::PreSolve.";a.PreSolve(c,d)},function(a,c,d){a=b.getCache(b.JSContactListener)[a];if(!a.hasOwnProperty("PostSolve"))throw"a JSImplementation must implement all functions, you forgot JSContactListener::PostSolve.";
a.PostSolve(c,d)},function(a,c,d){a=b.getCache(b.JSContactFilter)[a];if(!a.hasOwnProperty("ShouldCollide"))throw"a JSImplementation must implement all functions, you forgot JSContactFilter::ShouldCollide.";return a.ShouldCollide(c,d)},function(a,c,d,e){a=b.getCache(b.JSDraw)[a];if(!a.hasOwnProperty("DrawPolygon"))throw"a JSImplementation must implement all functions, you forgot JSDraw::DrawPolygon.";a.DrawPolygon(c,d,e)},function(a,c,d,e){a=b.getCache(b.JSDraw)[a];if(!a.hasOwnProperty("DrawSolidPolygon"))throw"a JSImplementation must implement all functions, you forgot JSDraw::DrawSolidPolygon.";
a.DrawSolidPolygon(c,d,e)},function(a,c,d,e){a=b.getCache(b.JSDraw)[a];if(!a.hasOwnProperty("DrawCircle"))throw"a JSImplementation must implement all functions, you forgot JSDraw::DrawCircle.";a.DrawCircle(c,d,e)},function(a,c,d,e,g){a=b.getCache(b.JSDraw)[a];if(!a.hasOwnProperty("DrawSolidCircle"))throw"a JSImplementation must implement all functions, you forgot JSDraw::DrawSolidCircle.";a.DrawSolidCircle(c,d,e,g)},function(a,c,d,e){a=b.getCache(b.JSDraw)[a];if(!a.hasOwnProperty("DrawSegment"))throw"a JSImplementation must implement all functions, you forgot JSDraw::DrawSegment.";
a.DrawSegment(c,d,e)},function(a,c){var d=b.getCache(b.JSDraw)[a];if(!d.hasOwnProperty("DrawTransform"))throw"a JSImplementation must implement all functions, you forgot JSDraw::DrawTransform.";d.DrawTransform(c)}];$a=f.i;la=$a+23264;jb.push();zb=0<=b.wasmJSMethod.indexOf("asmjs")||0<=b.wasmJSMethod.indexOf("interpret-asm2wasm")?"Box2D_v2.3.1_min.wasm.js.mem":null;b.STATIC_BASE=$a;b.STATIC_BUMP=23264;var Bb=la;la+=16;b._memset=Cb;function Db(){return!!Db.e}var Eb=0,Fb=[],Gb={};
function Hb(a,c){Hb.e||(Hb.e={});a in Hb.e||(b.dynCall_v(c),Hb.e[a]=1)}b._memcpy=Ib;var Jb=0;function Kb(){Jb+=4;return ma[Jb-4>>2]}var Lb={},Mb={};b._sbrk=Nb;var Ob=1;
function Pb(){var a=Eb;if(!a)return(f.f(0),0)|0;var c=Gb[a],d=c.type;if(!d)return(f.f(0),a)|0;var e=Array.prototype.slice.call(arguments);b.___cxa_is_pointer_type(d);Pb.buffer||(Pb.buffer=Ca(4));ma[Pb.buffer>>2]=a;for(var a=Pb.buffer,g=0;g<e.length;g++)if(e[g]&&b.___cxa_can_catch(e[g],d,a))return a=ma[a>>2],c.w=a,(f.f(e[g]),a)|0;a=ma[a>>2];return(f.f(d),a)|0}b._llvm_bswap_i32=Qb;
function Rb(a,c){Jb=c;try{var d=Kb(),e=Kb(),g=Kb(),l=0;Rb.buffer||(Rb.e=[null,[],[]],Rb.q=function(a,c){var d=Rb.e[a];assert(d);if(0===c||10===c){var e=1===a?b.print:b.printErr,g;a:{for(var l=g=0;d[l];)++l;if(16<l-g&&d.subarray&&Ka)g=Ka.decode(d.subarray(g,l));else for(var m,D,G,na,wa,V,l="";;){m=d[g++];if(!m){g=l;break a}m&128?(D=d[g++]&63,192==(m&224)?l+=String.fromCharCode((m&31)<<6|D):(G=d[g++]&63,224==(m&240)?m=(m&15)<<12|D<<6|G:(na=d[g++]&63,240==(m&248)?m=(m&7)<<18|D<<12|G<<6|na:(wa=d[g++]&
63,248==(m&252)?m=(m&3)<<24|D<<18|G<<12|na<<6|wa:(V=d[g++]&63,m=(m&1)<<30|D<<24|G<<18|na<<12|wa<<6|V))),65536>m?l+=String.fromCharCode(m):(m-=65536,l+=String.fromCharCode(55296|m>>10,56320|m&1023)))):l+=String.fromCharCode(m)}}e(g);d.length=0}else d.push(c)});for(var m=0;m<g;m++){for(var D=ma[e+8*m>>2],na=ma[e+(8*m+4)>>2],wa=0;wa<na;wa++)Rb.q(d,Da[D+wa]);l+=na}return l}catch(G){return"undefined"!==typeof FS&&G instanceof FS.o||ta(G),-G.r}}
nb.push(function(){var a=b._fflush;a&&a(0);if(a=Rb.q){var c=Rb.e;c[1].length&&a(1,10);c[2].length&&a(2,10)}});oa=Ba(1,"i32",2);ab=ka=f.p(la);bb=ab+gb;cb=f.p(bb);ma[oa>>2]=cb;b.wasmTableSize=1152;b.wasmMaxTableSize=1152;b.A={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:Infinity,byteLength:eb};
b.B={abort:ta,assert:assert,enlargeMemory:qa,getTotalMemory:function(){return pa},abortOnCannotGrowMemory:function(){ta("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+pa+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")},invoke_iiii:function(a,c,d,e){try{return b.dynCall_iiii(a,c,d,e)}catch(g){if("number"!==
typeof g&&"longjmp"!==g)throw g;b.setThrew(1,0)}},jsCall_iiii:function(a,c,d,e){return f.d[a](c,d,e)},invoke_viifii:function(a,c,d,e,g,l){try{b.dynCall_viifii(a,c,d,e,g,l)}catch(m){if("number"!==typeof m&&"longjmp"!==m)throw m;b.setThrew(1,0)}},jsCall_viifii:function(a,c,d,e,g,l){f.d[a](c,d,e,g,l)},invoke_viiiii:function(a,c,d,e,g,l){try{b.dynCall_viiiii(a,c,d,e,g,l)}catch(m){if("number"!==typeof m&&"longjmp"!==m)throw m;b.setThrew(1,0)}},jsCall_viiiii:function(a,c,d,e,g,l){f.d[a](c,d,e,g,l)},invoke_vi:function(a,
c){try{b.dynCall_vi(a,c)}catch(d){if("number"!==typeof d&&"longjmp"!==d)throw d;b.setThrew(1,0)}},jsCall_vi:function(a,c){f.d[a](c)},invoke_vii:function(a,c,d){try{b.dynCall_vii(a,c,d)}catch(e){if("number"!==typeof e&&"longjmp"!==e)throw e;b.setThrew(1,0)}},jsCall_vii:function(a,c,d){f.d[a](c,d)},invoke_ii:function(a,c){try{return b.dynCall_ii(a,c)}catch(d){if("number"!==typeof d&&"longjmp"!==d)throw d;b.setThrew(1,0)}},jsCall_ii:function(a,c){return f.d[a](c)},invoke_fif:function(a,c,d){try{return b.dynCall_fif(a,
c,d)}catch(e){if("number"!==typeof e&&"longjmp"!==e)throw e;b.setThrew(1,0)}},jsCall_fif:function(a,c,d){return f.d[a](c,d)},invoke_viii:function(a,c,d,e){try{b.dynCall_viii(a,c,d,e)}catch(g){if("number"!==typeof g&&"longjmp"!==g)throw g;b.setThrew(1,0)}},jsCall_viii:function(a,c,d,e){f.d[a](c,d,e)},invoke_viifi:function(a,c,d,e,g){try{b.dynCall_viifi(a,c,d,e,g)}catch(l){if("number"!==typeof l&&"longjmp"!==l)throw l;b.setThrew(1,0)}},jsCall_viifi:function(a,c,d,e,g){f.d[a](c,d,e,g)},invoke_v:function(a){try{b.dynCall_v(a)}catch(c){if("number"!==
typeof c&&"longjmp"!==c)throw c;b.setThrew(1,0)}},jsCall_v:function(a){f.d[a]()},invoke_viif:function(a,c,d,e){try{b.dynCall_viif(a,c,d,e)}catch(g){if("number"!==typeof g&&"longjmp"!==g)throw g;b.setThrew(1,0)}},jsCall_viif:function(a,c,d,e){f.d[a](c,d,e)},invoke_viiiiii:function(a,c,d,e,g,l,m){try{b.dynCall_viiiiii(a,c,d,e,g,l,m)}catch(D){if("number"!==typeof D&&"longjmp"!==D)throw D;b.setThrew(1,0)}},jsCall_viiiiii:function(a,c,d,e,g,l,m){f.d[a](c,d,e,g,l,m)},invoke_iii:function(a,c,d){try{return b.dynCall_iii(a,
c,d)}catch(e){if("number"!==typeof e&&"longjmp"!==e)throw e;b.setThrew(1,0)}},jsCall_iii:function(a,c,d){return f.d[a](c,d)},invoke_iiiiii:function(a,c,d,e,g,l){try{return b.dynCall_iiiiii(a,c,d,e,g,l)}catch(m){if("number"!==typeof m&&"longjmp"!==m)throw m;b.setThrew(1,0)}},jsCall_iiiiii:function(a,c,d,e,g,l){return f.d[a](c,d,e,g,l)},invoke_fiiiif:function(a,c,d,e,g,l){try{return b.dynCall_fiiiif(a,c,d,e,g,l)}catch(m){if("number"!==typeof m&&"longjmp"!==m)throw m;b.setThrew(1,0)}},jsCall_fiiiif:function(a,
c,d,e,g,l){return f.d[a](c,d,e,g,l)},invoke_viiii:function(a,c,d,e,g){try{b.dynCall_viiii(a,c,d,e,g)}catch(l){if("number"!==typeof l&&"longjmp"!==l)throw l;b.setThrew(1,0)}},jsCall_viiii:function(a,c,d,e,g){f.d[a](c,d,e,g)},_emscripten_asm_const_iiiii:function(a,c,d,e,g){return Ab[a](c,d,e,g)},_emscripten_asm_const_diiiid:function(a,c,d,e,g,l){return Ab[a](c,d,e,g,l)},_pthread_key_create:function(a){if(0==a)return 22;ma[a>>2]=Ob;Mb[Ob]=0;Ob++;return 0},_abort:function(){b.abort()},___gxx_personality_v0:function(){},
_emscripten_asm_const_iiidii:function(a,c,d,e,g,l){return Ab[a](c,d,e,g,l)},___assert_fail:function(a,c,d,e){ra=!0;throw"Assertion failed: "+Ja(a)+", at: "+[c?Ja(c):"unknown filename",d,e?Ja(e):"unknown function"]+" at "+Ra();},__ZSt18uncaught_exceptionv:Db,___setErrNo:function(a){b.___errno_location&&(ma[b.___errno_location()>>2]=a);return a},___cxa_begin_catch:function(a){var c=Gb[a];c&&!c.C&&(c.C=!0,Db.e--);c&&(c.da=!1);Fb.push(a);a:{if(a&&!Gb[a])for(var d in Gb)if(Gb[d].w===a){c=d;break a}c=a}c&&
Gb[c].ba++;return a},_emscripten_memcpy_big:function(a,c,d){Da.set(Da.subarray(c,c+d),a);return a},___resumeException:function(a){Eb||(Eb=a);throw a+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.";},___cxa_find_matching_catch:Pb,_pthread_getspecific:function(a){return Mb[a]||0},_pthread_once:Hb,___syscall54:function(a,c){Jb=c;return 0},_emscripten_asm_const_iii:function(a,c,d){return Ab[a](c,
d)},_emscripten_asm_const_iiidi:function(a,c,d,e,g){return Ab[a](c,d,e,g)},_pthread_setspecific:function(a,c){if(!(a in Mb))return 22;Mb[a]=c;return 0},_emscripten_asm_const_iiii:function(a,c,d,e){return Ab[a](c,d,e)},___syscall6:function(a,c){Jb=c;try{var d=Lb.G();FS.close(d);return 0}catch(e){return"undefined"!==typeof FS&&e instanceof FS.o||ta(e),-e.r}},___syscall140:function(a,c){Jb=c;try{var d=Lb.G();Kb();var e=Kb(),g=Kb(),l=Kb();FS.Z(d,e,l);ma[g>>2]=d.position;d.I&&0===e&&0===l&&(d.I=null);
return 0}catch(m){return"undefined"!==typeof FS&&m instanceof FS.o||ta(m),-m.r}},___cxa_pure_virtual:function(){ra=!0;throw"Pure virtual function called!";},___syscall146:Rb,DYNAMICTOP_PTR:oa,tempDoublePtr:Bb,ABORT:ra,STACKTOP:ka,STACK_MAX:bb};var Sb=b.asm(b.A,b.B,buffer);b.asm=Sb;
var Tb=b._emscripten_bind_b2WheelJoint_GetSpringDampingRatio_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetSpringDampingRatio_0.apply(null,arguments)},Ub=b._emscripten_bind_b2ContactEdge_set_next_1=function(){return b.asm._emscripten_bind_b2ContactEdge_set_next_1.apply(null,arguments)},Vb=b._emscripten_bind_b2ChainShape_get_m_count_0=function(){return b.asm._emscripten_bind_b2ChainShape_get_m_count_0.apply(null,arguments)},Wb=b._emscripten_bind_b2PrismaticJointDef_get_motorSpeed_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_motorSpeed_0.apply(null,
arguments)},Xb=b._emscripten_bind_b2PulleyJoint_SetUserData_1=function(){return b.asm._emscripten_bind_b2PulleyJoint_SetUserData_1.apply(null,arguments)},Yb=b._emscripten_bind_b2Shape_ComputeAABB_3=function(){return b.asm._emscripten_bind_b2Shape_ComputeAABB_3.apply(null,arguments)},Zb=b._emscripten_bind_b2FrictionJointDef_set_userData_1=function(){return b.asm._emscripten_bind_b2FrictionJointDef_set_userData_1.apply(null,arguments)},$b=b._emscripten_bind_b2MouseJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2MouseJoint_IsActive_0.apply(null,
arguments)},ac=b._emscripten_bind_b2World_IsLocked_0=function(){return b.asm._emscripten_bind_b2World_IsLocked_0.apply(null,arguments)},bc=b._emscripten_bind_b2Draw_GetFlags_0=function(){return b.asm._emscripten_bind_b2Draw_GetFlags_0.apply(null,arguments)},cc=b._emscripten_bind_b2FrictionJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_IsActive_0.apply(null,arguments)},dc=b._emscripten_bind_b2Color_set_g_1=function(){return b.asm._emscripten_bind_b2Color_set_g_1.apply(null,
arguments)},ec=b._emscripten_bind_b2PolygonShape_RayCast_4=function(){return b.asm._emscripten_bind_b2PolygonShape_RayCast_4.apply(null,arguments)},fc=b._emscripten_bind_b2World_GetTreeBalance_0=function(){return b.asm._emscripten_bind_b2World_GetTreeBalance_0.apply(null,arguments)},gc=b._emscripten_bind_b2ChainShape_get_m_vertices_0=function(){return b.asm._emscripten_bind_b2ChainShape_get_m_vertices_0.apply(null,arguments)},hc=b._emscripten_bind_JSDraw_DrawSolidCircle_4=function(){return b.asm._emscripten_bind_JSDraw_DrawSolidCircle_4.apply(null,
arguments)},ic=b._emscripten_bind_b2RevoluteJoint_GetLocalAnchorA_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetLocalAnchorA_0.apply(null,arguments)},jc=b._emscripten_bind_b2FixtureDef_get_filter_0=function(){return b.asm._emscripten_bind_b2FixtureDef_get_filter_0.apply(null,arguments)},kc=b._emscripten_bind_b2FrictionJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2FrictionJointDef_get_type_0.apply(null,arguments)},lc=b._emscripten_bind_b2MotorJointDef_set_type_1=function(){return b.asm._emscripten_bind_b2MotorJointDef_set_type_1.apply(null,
arguments)},mc=b._emscripten_bind_b2FixtureDef_set_userData_1=function(){return b.asm._emscripten_bind_b2FixtureDef_set_userData_1.apply(null,arguments)},nc=b._emscripten_bind_b2EdgeShape_set_m_hasVertex3_1=function(){return b.asm._emscripten_bind_b2EdgeShape_set_m_hasVertex3_1.apply(null,arguments)},oc=b._emscripten_bind_b2JointEdge_set_joint_1=function(){return b.asm._emscripten_bind_b2JointEdge_set_joint_1.apply(null,arguments)},pc=b._emscripten_bind_b2Fixture___destroy___0=function(){return b.asm._emscripten_bind_b2Fixture___destroy___0.apply(null,
arguments)},rc=b._emscripten_bind_b2World_SetWarmStarting_1=function(){return b.asm._emscripten_bind_b2World_SetWarmStarting_1.apply(null,arguments)},sc=b._emscripten_bind_JSDraw_DrawCircle_3=function(){return b.asm._emscripten_bind_JSDraw_DrawCircle_3.apply(null,arguments)},tc=b._emscripten_bind_b2WeldJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2WeldJoint_IsActive_0.apply(null,arguments)},uc=b._emscripten_bind_b2DestructionListener___destroy___0=function(){return b.asm._emscripten_bind_b2DestructionListener___destroy___0.apply(null,
arguments)},vc=b._emscripten_bind_b2BodyDef_set_type_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_type_1.apply(null,arguments)},wc=b._emscripten_bind_b2ChainShape_ComputeAABB_3=function(){return b.asm._emscripten_bind_b2ChainShape_ComputeAABB_3.apply(null,arguments)},xc=b._emscripten_bind_b2PulleyJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetUserData_0.apply(null,arguments)},yc=b._emscripten_bind_b2WeldJoint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2WeldJoint_GetReactionTorque_1.apply(null,
arguments)},zc=b._emscripten_bind_b2MotorJointDef_get_maxForce_0=function(){return b.asm._emscripten_bind_b2MotorJointDef_get_maxForce_0.apply(null,arguments)},Ac=b._emscripten_bind_b2DistanceJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2DistanceJointDef_get_userData_0.apply(null,arguments)},Bc=b._emscripten_bind_b2BodyDef_get_position_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_position_0.apply(null,arguments)},Cc=b._emscripten_bind_b2RevoluteJointDef_set_userData_1=
function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_userData_1.apply(null,arguments)},Dc=b._emscripten_bind_b2WorldManifold_b2WorldManifold_0=function(){return b.asm._emscripten_bind_b2WorldManifold_b2WorldManifold_0.apply(null,arguments)},Ec=b._emscripten_bind_b2WheelJointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_collideConnected_0.apply(null,arguments)},Fc=b._emscripten_bind_b2MouseJointDef_set_userData_1=function(){return b.asm._emscripten_bind_b2MouseJointDef_set_userData_1.apply(null,
arguments)};b.stackSave=function(){return b.asm.stackSave.apply(null,arguments)};
var Gc=b._emscripten_bind_b2FixtureDef_set_restitution_1=function(){return b.asm._emscripten_bind_b2FixtureDef_set_restitution_1.apply(null,arguments)},Hc=b._emscripten_bind_b2RevoluteJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetUserData_0.apply(null,arguments)},Ic=b._emscripten_bind_b2Mat33_get_ey_0=function(){return b.asm._emscripten_bind_b2Mat33_get_ey_0.apply(null,arguments)},Jc=b._emscripten_bind_b2MouseJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetCollideConnected_0.apply(null,
arguments)},Kc=b._emscripten_bind_b2World_GetGravity_0=function(){return b.asm._emscripten_bind_b2World_GetGravity_0.apply(null,arguments)},Lc=b._emscripten_bind_b2Mat33_set_ey_1=function(){return b.asm._emscripten_bind_b2Mat33_set_ey_1.apply(null,arguments)},Mc=b._emscripten_bind_b2Profile_get_broadphase_0=function(){return b.asm._emscripten_bind_b2Profile_get_broadphase_0.apply(null,arguments)},Nc=b._emscripten_bind_b2PulleyJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_bodyA_0.apply(null,
arguments)},Oc=b._emscripten_bind_b2PrismaticJoint_SetLimits_2=function(){return b.asm._emscripten_bind_b2PrismaticJoint_SetLimits_2.apply(null,arguments)},Pc=b._emscripten_bind_b2PulleyJointDef_get_localAnchorA_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_localAnchorA_0.apply(null,arguments)},Qc=b._emscripten_bind_b2DistanceJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetAnchorA_0.apply(null,arguments)},Rc=b._emscripten_bind_b2DistanceJointDef_set_userData_1=
function(){return b.asm._emscripten_bind_b2DistanceJointDef_set_userData_1.apply(null,arguments)},Sc=b._emscripten_bind_b2DistanceJointDef_set_dampingRatio_1=function(){return b.asm._emscripten_bind_b2DistanceJointDef_set_dampingRatio_1.apply(null,arguments)},Tc=b._emscripten_bind_b2RopeJointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2RopeJointDef_set_collideConnected_1.apply(null,arguments)},Uc=b._emscripten_bind_b2ChainShape_set_m_nextVertex_1=function(){return b.asm._emscripten_bind_b2ChainShape_set_m_nextVertex_1.apply(null,
arguments)},Vc=b._emscripten_bind_JSContactListener_EndContact_1=function(){return b.asm._emscripten_bind_JSContactListener_EndContact_1.apply(null,arguments)},Wc=b._emscripten_bind_b2MassData_set_mass_1=function(){return b.asm._emscripten_bind_b2MassData_set_mass_1.apply(null,arguments)},Xc=b._emscripten_bind_b2Vec3_get_x_0=function(){return b.asm._emscripten_bind_b2Vec3_get_x_0.apply(null,arguments)},Yc=b._emscripten_bind_b2ChainShape_CreateChain_2=function(){return b.asm._emscripten_bind_b2ChainShape_CreateChain_2.apply(null,
arguments)},Zc=b._emscripten_bind_b2RopeJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetUserData_0.apply(null,arguments)},$c=b._emscripten_bind_b2World_DestroyBody_1=function(){return b.asm._emscripten_bind_b2World_DestroyBody_1.apply(null,arguments)},ad=b._emscripten_bind_b2Profile_get_solvePosition_0=function(){return b.asm._emscripten_bind_b2Profile_get_solvePosition_0.apply(null,arguments)},bd=b._emscripten_bind_b2Shape_RayCast_4=function(){return b.asm._emscripten_bind_b2Shape_RayCast_4.apply(null,
arguments)},cd=b._emscripten_bind_b2PulleyJoint_GetGroundAnchorA_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetGroundAnchorA_0.apply(null,arguments)},dd=b._emscripten_bind_b2Mat33___destroy___0=function(){return b.asm._emscripten_bind_b2Mat33___destroy___0.apply(null,arguments)},ed=b._emscripten_bind_b2GearJoint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2GearJoint_GetReactionTorque_1.apply(null,arguments)},fd=b._emscripten_bind_b2WeldJointDef_set_collideConnected_1=
function(){return b.asm._emscripten_bind_b2WeldJointDef_set_collideConnected_1.apply(null,arguments)},gd=b._emscripten_bind_b2JointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2JointDef_get_collideConnected_0.apply(null,arguments)};b.getTempRet0=function(){return b.asm.getTempRet0.apply(null,arguments)};
var hd=b._emscripten_bind_b2FrictionJointDef_get_maxTorque_0=function(){return b.asm._emscripten_bind_b2FrictionJointDef_get_maxTorque_0.apply(null,arguments)},id=b._emscripten_bind_JSQueryCallback_JSQueryCallback_0=function(){return b.asm._emscripten_bind_JSQueryCallback_JSQueryCallback_0.apply(null,arguments)},jd=b._emscripten_bind_b2World_SetAutoClearForces_1=function(){return b.asm._emscripten_bind_b2World_SetAutoClearForces_1.apply(null,arguments)},kd=b._emscripten_bind_b2PrismaticJointDef_set_lowerTranslation_1=
function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_lowerTranslation_1.apply(null,arguments)},ld=b._emscripten_bind_b2Contact_GetTangentSpeed_0=function(){return b.asm._emscripten_bind_b2Contact_GetTangentSpeed_0.apply(null,arguments)},md=b._emscripten_bind_b2BodyDef_set_position_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_position_1.apply(null,arguments)},nd=b._emscripten_bind_b2Transform_get_q_0=function(){return b.asm._emscripten_bind_b2Transform_get_q_0.apply(null,arguments)},
od=b._emscripten_bind_b2PolygonShape_set_m_count_1=function(){return b.asm._emscripten_bind_b2PolygonShape_set_m_count_1.apply(null,arguments)},pd=b._emscripten_bind_b2Contact_GetNext_0=function(){return b.asm._emscripten_bind_b2Contact_GetNext_0.apply(null,arguments)},qd=b._emscripten_bind_b2MotorJointDef_set_userData_1=function(){return b.asm._emscripten_bind_b2MotorJointDef_set_userData_1.apply(null,arguments)},rd=b._emscripten_bind_b2GearJoint_GetJoint1_0=function(){return b.asm._emscripten_bind_b2GearJoint_GetJoint1_0.apply(null,
arguments)},sd=b._emscripten_bind_b2World_GetProxyCount_0=function(){return b.asm._emscripten_bind_b2World_GetProxyCount_0.apply(null,arguments)},td=b._emscripten_bind_b2MotorJoint_SetMaxTorque_1=function(){return b.asm._emscripten_bind_b2MotorJoint_SetMaxTorque_1.apply(null,arguments)},ud=b._emscripten_bind_b2GearJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2GearJoint_GetAnchorA_0.apply(null,arguments)},vd=b._emscripten_bind_b2MouseJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2MouseJointDef_set_bodyA_1.apply(null,
arguments)},wd=b._emscripten_bind_b2World_SetContactListener_1=function(){return b.asm._emscripten_bind_b2World_SetContactListener_1.apply(null,arguments)},xd=b._emscripten_bind_b2Body_IsAwake_0=function(){return b.asm._emscripten_bind_b2Body_IsAwake_0.apply(null,arguments)},yd=b._emscripten_bind_b2JointEdge_set_other_1=function(){return b.asm._emscripten_bind_b2JointEdge_set_other_1.apply(null,arguments)},zd=b._emscripten_bind_b2MouseJointDef_set_target_1=function(){return b.asm._emscripten_bind_b2MouseJointDef_set_target_1.apply(null,
arguments)},db=b._emscripten_replace_memory=function(){return b.asm._emscripten_replace_memory.apply(null,arguments)},Ad=b._emscripten_bind_b2MotorJoint_SetCorrectionFactor_1=function(){return b.asm._emscripten_bind_b2MotorJoint_SetCorrectionFactor_1.apply(null,arguments)},Bd=b._emscripten_bind_b2FixtureDef_get_density_0=function(){return b.asm._emscripten_bind_b2FixtureDef_get_density_0.apply(null,arguments)},Cd=b._emscripten_bind_b2GearJoint_GetRatio_0=function(){return b.asm._emscripten_bind_b2GearJoint_GetRatio_0.apply(null,
arguments)},Dd=b._emscripten_bind_b2PrismaticJointDef_get_upperTranslation_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_upperTranslation_0.apply(null,arguments)},Ed=b._emscripten_bind_b2RevoluteJoint_GetReferenceAngle_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetReferenceAngle_0.apply(null,arguments)},Fd=b._emscripten_bind_b2MotorJointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2MotorJointDef_get_collideConnected_0.apply(null,arguments)},
Gd=b._emscripten_enum_b2ManifoldType_e_circles=function(){return b.asm._emscripten_enum_b2ManifoldType_e_circles.apply(null,arguments)},Hd=b._emscripten_bind_b2PulleyJointDef_set_localAnchorB_1=function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_localAnchorB_1.apply(null,arguments)},Id=b._emscripten_bind_b2RevoluteJointDef_Initialize_3=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_Initialize_3.apply(null,arguments)},Jd=b._emscripten_bind_b2FixtureDef_get_userData_0=function(){return b.asm._emscripten_bind_b2FixtureDef_get_userData_0.apply(null,
arguments)},Kd=b._emscripten_bind_b2DistanceJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetUserData_0.apply(null,arguments)},Ld=b._emscripten_bind_b2FrictionJointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2FrictionJointDef_set_collideConnected_1.apply(null,arguments)},Md=b._emscripten_bind_b2PrismaticJointDef_get_lowerTranslation_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_lowerTranslation_0.apply(null,arguments)},Nd=
b._emscripten_bind_b2GearJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2GearJoint_GetCollideConnected_0.apply(null,arguments)},Od=b._emscripten_bind_b2Filter_b2Filter_0=function(){return b.asm._emscripten_bind_b2Filter_b2Filter_0.apply(null,arguments)},Pd=b._emscripten_bind_b2MouseJointDef_set_type_1=function(){return b.asm._emscripten_bind_b2MouseJointDef_set_type_1.apply(null,arguments)},Qd=b._emscripten_bind_b2Body_ApplyAngularImpulse_2=function(){return b.asm._emscripten_bind_b2Body_ApplyAngularImpulse_2.apply(null,
arguments)},Rd=b._emscripten_enum_b2JointType_e_frictionJoint=function(){return b.asm._emscripten_enum_b2JointType_e_frictionJoint.apply(null,arguments)},Sd=b._emscripten_bind_b2RayCastOutput_set_fraction_1=function(){return b.asm._emscripten_bind_b2RayCastOutput_set_fraction_1.apply(null,arguments)},Td=b._emscripten_bind_b2Color_set_r_1=function(){return b.asm._emscripten_bind_b2Color_set_r_1.apply(null,arguments)},Ud=b._emscripten_bind_b2DistanceJointDef_get_length_0=function(){return b.asm._emscripten_bind_b2DistanceJointDef_get_length_0.apply(null,
arguments)},Vd=b._emscripten_bind_b2PulleyJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetBodyB_0.apply(null,arguments)},Wd=b._emscripten_bind_b2WheelJointDef_set_type_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_type_1.apply(null,arguments)},Xd=b._emscripten_bind_b2World_GetTreeQuality_0=function(){return b.asm._emscripten_bind_b2World_GetTreeQuality_0.apply(null,arguments)},Yd=b._emscripten_bind_b2BodyDef_set_gravityScale_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_gravityScale_1.apply(null,
arguments)},Zd=b._emscripten_bind_b2RopeJointDef_set_bodyB_1=function(){return b.asm._emscripten_bind_b2RopeJointDef_set_bodyB_1.apply(null,arguments)},$d=b._emscripten_bind_b2PrismaticJoint_GetLowerLimit_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetLowerLimit_0.apply(null,arguments)},ae=b._emscripten_bind_b2AABB_get_lowerBound_0=function(){return b.asm._emscripten_bind_b2AABB_get_lowerBound_0.apply(null,arguments)},be=b._emscripten_bind_b2WheelJoint_SetMotorSpeed_1=function(){return b.asm._emscripten_bind_b2WheelJoint_SetMotorSpeed_1.apply(null,
arguments)},ce=b._emscripten_bind_b2PrismaticJointDef_get_referenceAngle_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_referenceAngle_0.apply(null,arguments)},de=b._emscripten_bind_b2Body_SetMassData_1=function(){return b.asm._emscripten_bind_b2Body_SetMassData_1.apply(null,arguments)},ee=b._emscripten_bind_b2BodyDef_get_angularVelocity_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_angularVelocity_0.apply(null,arguments)},fe=b._emscripten_bind_b2WeldJoint_SetDampingRatio_1=
function(){return b.asm._emscripten_bind_b2WeldJoint_SetDampingRatio_1.apply(null,arguments)},ge=b._emscripten_bind_b2PrismaticJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef___destroy___0.apply(null,arguments)},he=b._emscripten_bind_b2Contact_IsTouching_0=function(){return b.asm._emscripten_bind_b2Contact_IsTouching_0.apply(null,arguments)},ie=b._emscripten_bind_b2Draw_SetFlags_1=function(){return b.asm._emscripten_bind_b2Draw_SetFlags_1.apply(null,arguments)},
je=b._emscripten_bind_b2AABB_Contains_1=function(){return b.asm._emscripten_bind_b2AABB_Contains_1.apply(null,arguments)},ke=b._emscripten_bind_b2DistanceJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetNext_0.apply(null,arguments)},le=b._emscripten_bind_b2EdgeShape_set_m_radius_1=function(){return b.asm._emscripten_bind_b2EdgeShape_set_m_radius_1.apply(null,arguments)},me=b._emscripten_bind_b2DistanceJointDef_get_dampingRatio_0=function(){return b.asm._emscripten_bind_b2DistanceJointDef_get_dampingRatio_0.apply(null,
arguments)},ne=b._emscripten_bind_b2DistanceJoint_GetLocalAnchorA_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetLocalAnchorA_0.apply(null,arguments)},oe=b._emscripten_bind_b2PrismaticJoint_GetType_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetType_0.apply(null,arguments)},pe=b._emscripten_bind_b2Fixture_GetRestitution_0=function(){return b.asm._emscripten_bind_b2Fixture_GetRestitution_0.apply(null,arguments)},qe=b._emscripten_bind_b2Transform_set_q_1=function(){return b.asm._emscripten_bind_b2Transform_set_q_1.apply(null,
arguments)},re=b._emscripten_bind_b2PolygonShape___destroy___0=function(){return b.asm._emscripten_bind_b2PolygonShape___destroy___0.apply(null,arguments)},se=b._emscripten_bind_b2AABB_get_upperBound_0=function(){return b.asm._emscripten_bind_b2AABB_get_upperBound_0.apply(null,arguments)},te=b._emscripten_bind_b2Transform___destroy___0=function(){return b.asm._emscripten_bind_b2Transform___destroy___0.apply(null,arguments)},ue=b._emscripten_bind_b2Body_GetLinearVelocity_0=function(){return b.asm._emscripten_bind_b2Body_GetLinearVelocity_0.apply(null,
arguments)},ve=b._emscripten_bind_b2CircleShape_set_m_radius_1=function(){return b.asm._emscripten_bind_b2CircleShape_set_m_radius_1.apply(null,arguments)},we=b._emscripten_bind_b2EdgeShape_set_m_hasVertex0_1=function(){return b.asm._emscripten_bind_b2EdgeShape_set_m_hasVertex0_1.apply(null,arguments)},xe=b._emscripten_bind_b2Contact_GetWorldManifold_1=function(){return b.asm._emscripten_bind_b2Contact_GetWorldManifold_1.apply(null,arguments)},ye=b._emscripten_bind_b2RopeJoint_GetMaxLength_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetMaxLength_0.apply(null,
arguments)},ze=b._emscripten_bind_b2GearJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2GearJoint_GetUserData_0.apply(null,arguments)},Ae=b._emscripten_bind_b2MotorJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetCollideConnected_0.apply(null,arguments)},Be=b._emscripten_bind_b2GearJointDef_set_type_1=function(){return b.asm._emscripten_bind_b2GearJointDef_set_type_1.apply(null,arguments)},Ce=b._emscripten_bind_b2DistanceJoint_SetDampingRatio_1=function(){return b.asm._emscripten_bind_b2DistanceJoint_SetDampingRatio_1.apply(null,
arguments)},De=b._emscripten_bind_b2Contact_GetFixtureA_0=function(){return b.asm._emscripten_bind_b2Contact_GetFixtureA_0.apply(null,arguments)},Ee=b._emscripten_bind_b2PulleyJointDef_get_ratio_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_ratio_0.apply(null,arguments)},Fe=b._emscripten_bind_b2PrismaticJointDef_get_localAnchorB_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_localAnchorB_0.apply(null,arguments)},Ge=b._emscripten_bind_b2CircleShape_set_m_type_1=
function(){return b.asm._emscripten_bind_b2CircleShape_set_m_type_1.apply(null,arguments)},He=b._emscripten_bind_b2DistanceJointDef_set_localAnchorA_1=function(){return b.asm._emscripten_bind_b2DistanceJointDef_set_localAnchorA_1.apply(null,arguments)},Ie=b._emscripten_bind_b2RopeJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetAnchorB_0.apply(null,arguments)},Je=b._emscripten_bind_b2AABB_set_upperBound_1=function(){return b.asm._emscripten_bind_b2AABB_set_upperBound_1.apply(null,
arguments)},Ke=b._emscripten_bind_JSRayCastCallback_ReportFixture_4=function(){return b.asm._emscripten_bind_JSRayCastCallback_ReportFixture_4.apply(null,arguments)},Le=b._emscripten_bind_b2ContactImpulse___destroy___0=function(){return b.asm._emscripten_bind_b2ContactImpulse___destroy___0.apply(null,arguments)},Me=b._emscripten_bind_b2FrictionJointDef_get_localAnchorB_0=function(){return b.asm._emscripten_bind_b2FrictionJointDef_get_localAnchorB_0.apply(null,arguments)},Ne=b._emscripten_bind_b2PulleyJointDef_set_lengthB_1=
function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_lengthB_1.apply(null,arguments)},Oe=b._emscripten_bind_b2RayCastInput___destroy___0=function(){return b.asm._emscripten_bind_b2RayCastInput___destroy___0.apply(null,arguments)},Pe=b._emscripten_bind_b2Body_ApplyForceToCenter_2=function(){return b.asm._emscripten_bind_b2Body_ApplyForceToCenter_2.apply(null,arguments)},Qe=b._emscripten_bind_JSDestructionListener_JSDestructionListener_0=function(){return b.asm._emscripten_bind_JSDestructionListener_JSDestructionListener_0.apply(null,
arguments)},Re=b._emscripten_bind_b2WheelJointDef_set_localAnchorA_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_localAnchorA_1.apply(null,arguments)},Se=b._emscripten_bind_b2FrictionJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetBodyB_0.apply(null,arguments)},Te=b._emscripten_bind_b2WeldJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2WeldJointDef_set_bodyA_1.apply(null,arguments)},Ue=b._emscripten_bind_b2DistanceJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetBodyB_0.apply(null,
arguments)},Ve=b._emscripten_enum_b2JointType_e_wheelJoint=function(){return b.asm._emscripten_enum_b2JointType_e_wheelJoint.apply(null,arguments)},We=b._emscripten_bind_b2JointDef___destroy___0=function(){return b.asm._emscripten_bind_b2JointDef___destroy___0.apply(null,arguments)},Xe=b._emscripten_bind_b2ContactEdge___destroy___0=function(){return b.asm._emscripten_bind_b2ContactEdge___destroy___0.apply(null,arguments)},Ye=b._emscripten_bind_b2Filter_get_groupIndex_0=function(){return b.asm._emscripten_bind_b2Filter_get_groupIndex_0.apply(null,
arguments)},Ze=b._emscripten_bind_b2FrictionJointDef_get_localAnchorA_0=function(){return b.asm._emscripten_bind_b2FrictionJointDef_get_localAnchorA_0.apply(null,arguments)},$e=b._emscripten_bind_b2CircleShape_GetChildCount_0=function(){return b.asm._emscripten_bind_b2CircleShape_GetChildCount_0.apply(null,arguments)},af=b._emscripten_bind_b2BodyDef_get_bullet_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_bullet_0.apply(null,arguments)},bf=b._emscripten_bind_b2Color_set_b_1=function(){return b.asm._emscripten_bind_b2Color_set_b_1.apply(null,
arguments)},cf=b._emscripten_bind_b2Mat33_get_ez_0=function(){return b.asm._emscripten_bind_b2Mat33_get_ez_0.apply(null,arguments)},df=b._emscripten_bind_b2MassData_get_center_0=function(){return b.asm._emscripten_bind_b2MassData_get_center_0.apply(null,arguments)},ef=b._emscripten_bind_b2WeldJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetBodyB_0.apply(null,arguments)},ff=b._emscripten_bind_b2WheelJoint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2WheelJoint_GetReactionForce_1.apply(null,
arguments)},gf=b._emscripten_bind_b2World_SetSubStepping_1=function(){return b.asm._emscripten_bind_b2World_SetSubStepping_1.apply(null,arguments)},hf=b._emscripten_bind_b2Vec2_op_add_1=function(){return b.asm._emscripten_bind_b2Vec2_op_add_1.apply(null,arguments)},jf=b._emscripten_bind_JSDraw_DrawSegment_3=function(){return b.asm._emscripten_bind_JSDraw_DrawSegment_3.apply(null,arguments)},kf=b._emscripten_bind_b2Joint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2Joint_GetCollideConnected_0.apply(null,
arguments)},lf=b._emscripten_bind_b2MotorJoint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2MotorJoint_GetReactionTorque_1.apply(null,arguments)},mf=b._emscripten_bind_b2FrictionJointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2FrictionJointDef_get_bodyB_0.apply(null,arguments)},nf=b._emscripten_bind_b2WheelJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2WheelJointDef___destroy___0.apply(null,arguments)},of=b._emscripten_bind_b2BodyDef_get_gravityScale_0=
function(){return b.asm._emscripten_bind_b2BodyDef_get_gravityScale_0.apply(null,arguments)},pf=b._emscripten_bind_b2Vec3_SetZero_0=function(){return b.asm._emscripten_bind_b2Vec3_SetZero_0.apply(null,arguments)},qf=b._emscripten_enum_b2JointType_e_pulleyJoint=function(){return b.asm._emscripten_enum_b2JointType_e_pulleyJoint.apply(null,arguments)},rf=b._emscripten_bind_b2ChainShape_get_m_nextVertex_0=function(){return b.asm._emscripten_bind_b2ChainShape_get_m_nextVertex_0.apply(null,arguments)},
sf=b._emscripten_bind_b2Contact_SetEnabled_1=function(){return b.asm._emscripten_bind_b2Contact_SetEnabled_1.apply(null,arguments)},tf=b._emscripten_bind_b2Shape_set_m_radius_1=function(){return b.asm._emscripten_bind_b2Shape_set_m_radius_1.apply(null,arguments)},uf=b._emscripten_bind_b2World_SetDebugDraw_1=function(){return b.asm._emscripten_bind_b2World_SetDebugDraw_1.apply(null,arguments)},vf=b._emscripten_bind_b2ContactID_set_key_1=function(){return b.asm._emscripten_bind_b2ContactID_set_key_1.apply(null,
arguments)},Ca=b._malloc=function(){return b.asm._malloc.apply(null,arguments)},wf=b._emscripten_bind_b2WheelJoint_GetMaxMotorTorque_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetMaxMotorTorque_0.apply(null,arguments)},xf=b._emscripten_bind_b2Vec2_Normalize_0=function(){return b.asm._emscripten_bind_b2Vec2_Normalize_0.apply(null,arguments)},yf=b._emscripten_bind_b2WheelJoint_GetJointSpeed_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetJointSpeed_0.apply(null,arguments)},zf=
b._emscripten_bind_b2FrictionJointDef_set_localAnchorA_1=function(){return b.asm._emscripten_bind_b2FrictionJointDef_set_localAnchorA_1.apply(null,arguments)},Af=b._emscripten_bind_b2ChainShape_set_m_vertices_1=function(){return b.asm._emscripten_bind_b2ChainShape_set_m_vertices_1.apply(null,arguments)},Bf=b._emscripten_bind_JSRayCastCallback_JSRayCastCallback_0=function(){return b.asm._emscripten_bind_JSRayCastCallback_JSRayCastCallback_0.apply(null,arguments)},Cf=b._emscripten_bind_b2RayCastInput_set_p2_1=
function(){return b.asm._emscripten_bind_b2RayCastInput_set_p2_1.apply(null,arguments)},Df=b._emscripten_bind_b2RevoluteJointDef_get_motorSpeed_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_motorSpeed_0.apply(null,arguments)},Ef=b._emscripten_bind_b2Manifold_get_pointCount_0=function(){return b.asm._emscripten_bind_b2Manifold_get_pointCount_0.apply(null,arguments)},Ff=b._emscripten_bind_b2RayCastOutput_get_normal_0=function(){return b.asm._emscripten_bind_b2RayCastOutput_get_normal_0.apply(null,
arguments)},Gf=b._emscripten_bind_b2WeldJoint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetBodyA_0.apply(null,arguments)},Hf=b._emscripten_enum_b2DrawFlag_e_jointBit=function(){return b.asm._emscripten_enum_b2DrawFlag_e_jointBit.apply(null,arguments)},If=b._emscripten_bind_b2FixtureDef_get_isSensor_0=function(){return b.asm._emscripten_bind_b2FixtureDef_get_isSensor_0.apply(null,arguments)},Jf=b._emscripten_bind_b2PrismaticJointDef_Initialize_4=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_Initialize_4.apply(null,
arguments)},Kf=b._emscripten_bind_b2PulleyJointDef_set_bodyB_1=function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_bodyB_1.apply(null,arguments)},Lf=b._emscripten_bind_b2WheelJoint_EnableMotor_1=function(){return b.asm._emscripten_bind_b2WheelJoint_EnableMotor_1.apply(null,arguments)},Mf=b._emscripten_bind_b2RevoluteJoint_GetJointSpeed_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetJointSpeed_0.apply(null,arguments)},Nf=b._emscripten_bind_JSDraw_DrawSolidPolygon_3=function(){return b.asm._emscripten_bind_JSDraw_DrawSolidPolygon_3.apply(null,
arguments)},Of=b._emscripten_bind_b2Rot_Set_1=function(){return b.asm._emscripten_bind_b2Rot_Set_1.apply(null,arguments)},Pf=b._emscripten_bind_b2RevoluteJoint_GetJointAngle_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetJointAngle_0.apply(null,arguments)},Qf=b._emscripten_bind_JSDraw___destroy___0=function(){return b.asm._emscripten_bind_JSDraw___destroy___0.apply(null,arguments)},Rf=b._emscripten_bind_b2MouseJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2MouseJointDef___destroy___0.apply(null,
arguments)},Sf=b._emscripten_bind_b2Mat33_Solve22_1=function(){return b.asm._emscripten_bind_b2Mat33_Solve22_1.apply(null,arguments)},Tf=b._emscripten_bind_b2Profile_set_solvePosition_1=function(){return b.asm._emscripten_bind_b2Profile_set_solvePosition_1.apply(null,arguments)},Uf=b._emscripten_bind_b2ContactFilter___destroy___0=function(){return b.asm._emscripten_bind_b2ContactFilter___destroy___0.apply(null,arguments)},Vf=b._emscripten_bind_b2WheelJoint_GetLocalAnchorA_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetLocalAnchorA_0.apply(null,
arguments)},Wf=b._emscripten_bind_b2ChainShape_set_m_hasPrevVertex_1=function(){return b.asm._emscripten_bind_b2ChainShape_set_m_hasPrevVertex_1.apply(null,arguments)},Xf=b._emscripten_bind_b2Joint_SetUserData_1=function(){return b.asm._emscripten_bind_b2Joint_SetUserData_1.apply(null,arguments)},Yf=b._emscripten_bind_b2DistanceJoint_SetUserData_1=function(){return b.asm._emscripten_bind_b2DistanceJoint_SetUserData_1.apply(null,arguments)},Zf=b._emscripten_bind_b2PrismaticJoint___destroy___0=function(){return b.asm._emscripten_bind_b2PrismaticJoint___destroy___0.apply(null,
arguments)},$f=b._emscripten_bind_b2RopeJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2RopeJointDef_set_bodyA_1.apply(null,arguments)},ag=b._emscripten_bind_b2GearJoint___destroy___0=function(){return b.asm._emscripten_bind_b2GearJoint___destroy___0.apply(null,arguments)},bg=b._emscripten_bind_b2PrismaticJoint_GetJointTranslation_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetJointTranslation_0.apply(null,arguments)},cg=b._emscripten_bind_b2ManifoldPoint_get_id_0=
function(){return b.asm._emscripten_bind_b2ManifoldPoint_get_id_0.apply(null,arguments)},dg=b._emscripten_bind_b2CircleShape_get_m_radius_0=function(){return b.asm._emscripten_bind_b2CircleShape_get_m_radius_0.apply(null,arguments)},eg=b._emscripten_bind_b2PrismaticJoint_GetMotorSpeed_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetMotorSpeed_0.apply(null,arguments)},fg=b._emscripten_bind_b2PulleyJoint_GetGroundAnchorB_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetGroundAnchorB_0.apply(null,
arguments)},gg=b._emscripten_bind_b2Vec3_op_add_1=function(){return b.asm._emscripten_bind_b2Vec3_op_add_1.apply(null,arguments)},hg=b._emscripten_bind_b2FrictionJoint_GetType_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetType_0.apply(null,arguments)},ig=b._emscripten_bind_b2MouseJoint_GetMaxForce_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetMaxForce_0.apply(null,arguments)},jg=b._emscripten_bind_b2MouseJoint_SetTarget_1=function(){return b.asm._emscripten_bind_b2MouseJoint_SetTarget_1.apply(null,
arguments)},kg=b._emscripten_bind_b2MouseJointDef_get_dampingRatio_0=function(){return b.asm._emscripten_bind_b2MouseJointDef_get_dampingRatio_0.apply(null,arguments)},lg=b._emscripten_bind_b2RevoluteJoint_GetMotorSpeed_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetMotorSpeed_0.apply(null,arguments)},mg=b._emscripten_bind_b2ChainShape_set_m_type_1=function(){return b.asm._emscripten_bind_b2ChainShape_set_m_type_1.apply(null,arguments)},ng=b._emscripten_bind_b2RevoluteJointDef_set_bodyB_1=
function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_bodyB_1.apply(null,arguments)},og=b._emscripten_bind_b2Rot_GetXAxis_0=function(){return b.asm._emscripten_bind_b2Rot_GetXAxis_0.apply(null,arguments)},pg=b._emscripten_bind_b2Mat33_b2Mat33_0=function(){return b.asm._emscripten_bind_b2Mat33_b2Mat33_0.apply(null,arguments)},qg=b._emscripten_bind_b2MouseJointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2MouseJointDef_get_bodyB_0.apply(null,arguments)},rg=b._emscripten_bind_b2Body_GetWorldVector_1=
function(){return b.asm._emscripten_bind_b2Body_GetWorldVector_1.apply(null,arguments)},sg=b._emscripten_bind_b2WeldJointDef_get_frequencyHz_0=function(){return b.asm._emscripten_bind_b2WeldJointDef_get_frequencyHz_0.apply(null,arguments)},tg=b._emscripten_bind_b2GearJointDef_set_ratio_1=function(){return b.asm._emscripten_bind_b2GearJointDef_set_ratio_1.apply(null,arguments)},ug=b._emscripten_bind_b2Manifold___destroy___0=function(){return b.asm._emscripten_bind_b2Manifold___destroy___0.apply(null,
arguments)},vg=b._emscripten_bind_b2PulleyJointDef_set_lengthA_1=function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_lengthA_1.apply(null,arguments)},wg=b._emscripten_bind_b2Contact_IsEnabled_0=function(){return b.asm._emscripten_bind_b2Contact_IsEnabled_0.apply(null,arguments)};b.stackRestore=function(){return b.asm.stackRestore.apply(null,arguments)};
var xg=b._emscripten_bind_b2World_CreateJoint_1=function(){return b.asm._emscripten_bind_b2World_CreateJoint_1.apply(null,arguments)},yg=b._emscripten_bind_b2PulleyJointDef_set_ratio_1=function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_ratio_1.apply(null,arguments)},zg=b._emscripten_bind_b2JointEdge_set_prev_1=function(){return b.asm._emscripten_bind_b2JointEdge_set_prev_1.apply(null,arguments)},Ag=b._emscripten_bind_b2PrismaticJoint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetReactionTorque_1.apply(null,
arguments)},Bg=b._emscripten_bind_b2Body_GetLocalPoint_1=function(){return b.asm._emscripten_bind_b2Body_GetLocalPoint_1.apply(null,arguments)},Cg=b._emscripten_bind_b2PrismaticJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetCollideConnected_0.apply(null,arguments)},Dg=b._emscripten_bind_b2DistanceJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_IsActive_0.apply(null,arguments)},Eg=b._emscripten_bind_b2RopeJoint_GetLimitState_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetLimitState_0.apply(null,
arguments)},Fg=b._emscripten_bind_b2Profile_get_solveTOI_0=function(){return b.asm._emscripten_bind_b2Profile_get_solveTOI_0.apply(null,arguments)},Gg=b._emscripten_bind_b2Vec2_b2Vec2_0=function(){return b.asm._emscripten_bind_b2Vec2_b2Vec2_0.apply(null,arguments)},Hg=b._emscripten_bind_b2DistanceJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetAnchorB_0.apply(null,arguments)},Ig=b._emscripten_bind_b2WheelJointDef_get_maxMotorTorque_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_maxMotorTorque_0.apply(null,
arguments)},Jg=b._emscripten_bind_b2Vec2_op_sub_1=function(){return b.asm._emscripten_bind_b2Vec2_op_sub_1.apply(null,arguments)},Kg=b._emscripten_bind_b2CircleShape_get_m_p_0=function(){return b.asm._emscripten_bind_b2CircleShape_get_m_p_0.apply(null,arguments)},Lg=b._emscripten_bind_b2ContactFeature_get_indexA_0=function(){return b.asm._emscripten_bind_b2ContactFeature_get_indexA_0.apply(null,arguments)},Mg=b._emscripten_bind_b2MotorJointDef_b2MotorJointDef_0=function(){return b.asm._emscripten_bind_b2MotorJointDef_b2MotorJointDef_0.apply(null,
arguments)},Ng=b._emscripten_bind_b2RevoluteJoint_EnableLimit_1=function(){return b.asm._emscripten_bind_b2RevoluteJoint_EnableLimit_1.apply(null,arguments)},Og=b._emscripten_bind_b2ContactEdge_get_next_0=function(){return b.asm._emscripten_bind_b2ContactEdge_get_next_0.apply(null,arguments)},Pg=b._emscripten_bind_b2AABB_GetPerimeter_0=function(){return b.asm._emscripten_bind_b2AABB_GetPerimeter_0.apply(null,arguments)},Qg=b._emscripten_bind_b2RevoluteJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetCollideConnected_0.apply(null,
arguments)},Rg=b._emscripten_bind_b2Mat33_get_ex_0=function(){return b.asm._emscripten_bind_b2Mat33_get_ex_0.apply(null,arguments)},Sg=b._emscripten_bind_b2Body_GetPosition_0=function(){return b.asm._emscripten_bind_b2Body_GetPosition_0.apply(null,arguments)},Tg=b._emscripten_bind_b2Profile___destroy___0=function(){return b.asm._emscripten_bind_b2Profile___destroy___0.apply(null,arguments)},Ug=b._emscripten_bind_b2ContactEdge_get_prev_0=function(){return b.asm._emscripten_bind_b2ContactEdge_get_prev_0.apply(null,
arguments)},Vg=b._emscripten_bind_b2DistanceJoint_SetFrequency_1=function(){return b.asm._emscripten_bind_b2DistanceJoint_SetFrequency_1.apply(null,arguments)},Wg=b._emscripten_bind_b2Fixture_GetBody_0=function(){return b.asm._emscripten_bind_b2Fixture_GetBody_0.apply(null,arguments)},Xg=b._emscripten_bind_b2ContactImpulse_set_count_1=function(){return b.asm._emscripten_bind_b2ContactImpulse_set_count_1.apply(null,arguments)},Yg=b._emscripten_bind_b2FixtureDef_set_shape_1=function(){return b.asm._emscripten_bind_b2FixtureDef_set_shape_1.apply(null,
arguments)},Zg=b._emscripten_bind_b2PulleyJointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_bodyB_0.apply(null,arguments)},$g=b._emscripten_bind_b2ChainShape_GetChildCount_0=function(){return b.asm._emscripten_bind_b2ChainShape_GetChildCount_0.apply(null,arguments)},ah=b._emscripten_bind_b2CircleShape_b2CircleShape_0=function(){return b.asm._emscripten_bind_b2CircleShape_b2CircleShape_0.apply(null,arguments)},bh=b._emscripten_bind_b2RevoluteJoint_GetReactionTorque_1=
function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetReactionTorque_1.apply(null,arguments)},ch=b._emscripten_bind_b2Fixture_SetDensity_1=function(){return b.asm._emscripten_bind_b2Fixture_SetDensity_1.apply(null,arguments)},dh=b._emscripten_bind_b2ChainShape_get_m_prevVertex_0=function(){return b.asm._emscripten_bind_b2ChainShape_get_m_prevVertex_0.apply(null,arguments)},eh=b._emscripten_bind_b2AABB_GetExtents_0=function(){return b.asm._emscripten_bind_b2AABB_GetExtents_0.apply(null,arguments)},
fh=b._emscripten_bind_b2World_ClearForces_0=function(){return b.asm._emscripten_bind_b2World_ClearForces_0.apply(null,arguments)},gh=b._emscripten_bind_b2Vec3___destroy___0=function(){return b.asm._emscripten_bind_b2Vec3___destroy___0.apply(null,arguments)},hh=b._emscripten_bind_b2WheelJointDef_set_userData_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_userData_1.apply(null,arguments)},ih=b._emscripten_bind_b2WeldJoint_SetFrequency_1=function(){return b.asm._emscripten_bind_b2WeldJoint_SetFrequency_1.apply(null,
arguments)},jh=b._emscripten_bind_JSContactListener_PreSolve_2=function(){return b.asm._emscripten_bind_JSContactListener_PreSolve_2.apply(null,arguments)},kh=b._emscripten_bind_b2Body_SetFixedRotation_1=function(){return b.asm._emscripten_bind_b2Body_SetFixedRotation_1.apply(null,arguments)},lh=b._emscripten_bind_b2RayCastOutput_set_normal_1=function(){return b.asm._emscripten_bind_b2RayCastOutput_set_normal_1.apply(null,arguments)},mh=b._emscripten_bind_b2DistanceJoint_GetDampingRatio_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetDampingRatio_0.apply(null,
arguments)},nh=b._emscripten_bind_b2RevoluteJoint_SetMaxMotorTorque_1=function(){return b.asm._emscripten_bind_b2RevoluteJoint_SetMaxMotorTorque_1.apply(null,arguments)},oh=b._emscripten_bind_b2RevoluteJoint_EnableMotor_1=function(){return b.asm._emscripten_bind_b2RevoluteJoint_EnableMotor_1.apply(null,arguments)},ph=b._emscripten_bind_b2Contact_GetChildIndexB_0=function(){return b.asm._emscripten_bind_b2Contact_GetChildIndexB_0.apply(null,arguments)},qh=b._emscripten_bind_b2MouseJointDef_set_bodyB_1=
function(){return b.asm._emscripten_bind_b2MouseJointDef_set_bodyB_1.apply(null,arguments)},rh=b._emscripten_bind_b2CircleShape_GetType_0=function(){return b.asm._emscripten_bind_b2CircleShape_GetType_0.apply(null,arguments)},sh=b._emscripten_bind_b2PolygonShape_GetType_0=function(){return b.asm._emscripten_bind_b2PolygonShape_GetType_0.apply(null,arguments)},th=b._emscripten_bind_b2PrismaticJointDef_set_referenceAngle_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_referenceAngle_1.apply(null,
arguments)},uh=b._emscripten_bind_b2RopeJointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2RopeJointDef_get_collideConnected_0.apply(null,arguments)},vh=b._emscripten_bind_b2FixtureDef_set_filter_1=function(){return b.asm._emscripten_bind_b2FixtureDef_set_filter_1.apply(null,arguments)},wh=b._emscripten_bind_b2Body_ApplyTorque_2=function(){return b.asm._emscripten_bind_b2Body_ApplyTorque_2.apply(null,arguments)},xh=b._emscripten_bind_b2RevoluteJoint___destroy___0=function(){return b.asm._emscripten_bind_b2RevoluteJoint___destroy___0.apply(null,
arguments)},yh=b._emscripten_bind_b2FrictionJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2FrictionJointDef_get_userData_0.apply(null,arguments)},zh=b._emscripten_bind_b2RayCastCallback___destroy___0=function(){return b.asm._emscripten_bind_b2RayCastCallback___destroy___0.apply(null,arguments)},Ah=b._emscripten_bind_b2RevoluteJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_bodyA_1.apply(null,arguments)},Bh=b._emscripten_bind_b2MotorJoint_SetUserData_1=
function(){return b.asm._emscripten_bind_b2MotorJoint_SetUserData_1.apply(null,arguments)},Ch=b._emscripten_bind_b2PrismaticJoint_GetLocalAxisA_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetLocalAxisA_0.apply(null,arguments)},Dh=b._emscripten_bind_b2MotorJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetBodyB_0.apply(null,arguments)},Eh=b._emscripten_bind_b2Transform_Set_2=function(){return b.asm._emscripten_bind_b2Transform_Set_2.apply(null,arguments)},Fh=
b._emscripten_bind_b2MotorJoint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetBodyA_0.apply(null,arguments)};b.stackAlloc=function(){return b.asm.stackAlloc.apply(null,arguments)};
var Gh=b._emscripten_bind_b2Draw_AppendFlags_1=function(){return b.asm._emscripten_bind_b2Draw_AppendFlags_1.apply(null,arguments)},Hh=b._emscripten_bind_b2EdgeShape_GetChildCount_0=function(){return b.asm._emscripten_bind_b2EdgeShape_GetChildCount_0.apply(null,arguments)},Ih=b._emscripten_bind_b2Contact_ResetFriction_0=function(){return b.asm._emscripten_bind_b2Contact_ResetFriction_0.apply(null,arguments)},Jh=b._emscripten_bind_b2Profile_set_solveTOI_1=function(){return b.asm._emscripten_bind_b2Profile_set_solveTOI_1.apply(null,
arguments)},Kh=b._emscripten_bind_b2PrismaticJointDef_set_type_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_type_1.apply(null,arguments)},Lh=b._emscripten_bind_b2AABB_GetCenter_0=function(){return b.asm._emscripten_bind_b2AABB_GetCenter_0.apply(null,arguments)},Mh=b._emscripten_bind_b2WheelJoint_SetSpringFrequencyHz_1=function(){return b.asm._emscripten_bind_b2WheelJoint_SetSpringFrequencyHz_1.apply(null,arguments)},Nh=b._emscripten_bind_b2FrictionJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2FrictionJointDef___destroy___0.apply(null,
arguments)},Oh=b._emscripten_bind_b2PrismaticJoint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetReactionForce_1.apply(null,arguments)},Ph=b._emscripten_bind_b2Transform_b2Transform_0=function(){return b.asm._emscripten_bind_b2Transform_b2Transform_0.apply(null,arguments)},Qh=b._emscripten_enum_b2LimitState_e_equalLimits=function(){return b.asm._emscripten_enum_b2LimitState_e_equalLimits.apply(null,arguments)},Rh=b._emscripten_bind_b2ManifoldPoint_set_normalImpulse_1=
function(){return b.asm._emscripten_bind_b2ManifoldPoint_set_normalImpulse_1.apply(null,arguments)},Sh=b._emscripten_bind_b2Body_IsFixedRotation_0=function(){return b.asm._emscripten_bind_b2Body_IsFixedRotation_0.apply(null,arguments)},Th=b._emscripten_enum_b2DrawFlag_e_shapeBit=function(){return b.asm._emscripten_enum_b2DrawFlag_e_shapeBit.apply(null,arguments)},Uh=b._emscripten_bind_b2Contact_GetFriction_0=function(){return b.asm._emscripten_bind_b2Contact_GetFriction_0.apply(null,arguments)},Vh=
b._emscripten_bind_b2Body_GetContactList_0=function(){return b.asm._emscripten_bind_b2Body_GetContactList_0.apply(null,arguments)},Wh=b._emscripten_bind_b2DistanceJointDef_set_length_1=function(){return b.asm._emscripten_bind_b2DistanceJointDef_set_length_1.apply(null,arguments)},Xh=b._emscripten_bind_b2DistanceJoint_GetLocalAnchorB_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetLocalAnchorB_0.apply(null,arguments)},Yh=b._emscripten_bind_b2FrictionJoint_GetLocalAnchorB_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetLocalAnchorB_0.apply(null,
arguments)},Zh=b._emscripten_bind_b2World_b2World_1=function(){return b.asm._emscripten_bind_b2World_b2World_1.apply(null,arguments)},$h=b._emscripten_bind_b2PrismaticJoint_IsLimitEnabled_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_IsLimitEnabled_0.apply(null,arguments)},ai=b._emscripten_bind_b2DistanceJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2DistanceJointDef_get_type_0.apply(null,arguments)},bi=b._emscripten_bind_b2Draw_ClearFlags_1=function(){return b.asm._emscripten_bind_b2Draw_ClearFlags_1.apply(null,
arguments)},ci=b._emscripten_bind_b2Body_SetAngularDamping_1=function(){return b.asm._emscripten_bind_b2Body_SetAngularDamping_1.apply(null,arguments)},di=b._emscripten_bind_b2Body_IsActive_0=function(){return b.asm._emscripten_bind_b2Body_IsActive_0.apply(null,arguments)},ei=b._emscripten_bind_b2Contact_ResetRestitution_0=function(){return b.asm._emscripten_bind_b2Contact_ResetRestitution_0.apply(null,arguments)},fi=b._emscripten_bind_b2World_GetAllowSleeping_0=function(){return b.asm._emscripten_bind_b2World_GetAllowSleeping_0.apply(null,
arguments)},gi=b._emscripten_bind_b2ManifoldPoint_b2ManifoldPoint_0=function(){return b.asm._emscripten_bind_b2ManifoldPoint_b2ManifoldPoint_0.apply(null,arguments)},hi=b._emscripten_bind_b2EdgeShape_set_m_type_1=function(){return b.asm._emscripten_bind_b2EdgeShape_set_m_type_1.apply(null,arguments)},ii=b._emscripten_enum_b2JointType_e_unknownJoint=function(){return b.asm._emscripten_enum_b2JointType_e_unknownJoint.apply(null,arguments)},ji=b._emscripten_bind_b2RevoluteJointDef_set_enableMotor_1=
function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_enableMotor_1.apply(null,arguments)},ki=b._emscripten_bind_b2PulleyJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_IsActive_0.apply(null,arguments)},li=b._emscripten_bind_b2MouseJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetNext_0.apply(null,arguments)},mi=b._emscripten_bind_b2RevoluteJoint_SetUserData_1=function(){return b.asm._emscripten_bind_b2RevoluteJoint_SetUserData_1.apply(null,
arguments)},ni=b._emscripten_bind_b2Manifold_get_localPoint_0=function(){return b.asm._emscripten_bind_b2Manifold_get_localPoint_0.apply(null,arguments)},oi=b._emscripten_bind_b2PulleyJointDef_get_lengthB_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_lengthB_0.apply(null,arguments)},pi=b._emscripten_bind_b2WeldJoint_SetUserData_1=function(){return b.asm._emscripten_bind_b2WeldJoint_SetUserData_1.apply(null,arguments)},qi=b._emscripten_bind_b2ChainShape_CreateLoop_2=function(){return b.asm._emscripten_bind_b2ChainShape_CreateLoop_2.apply(null,
arguments)},ri=b._emscripten_bind_b2GearJointDef_get_joint1_0=function(){return b.asm._emscripten_bind_b2GearJointDef_get_joint1_0.apply(null,arguments)},si=b._emscripten_bind_b2PrismaticJoint_GetMotorForce_1=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetMotorForce_1.apply(null,arguments)},ti=b._emscripten_bind_b2Body_SetUserData_1=function(){return b.asm._emscripten_bind_b2Body_SetUserData_1.apply(null,arguments)},ui=b._emscripten_bind_b2GearJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2GearJoint_IsActive_0.apply(null,
arguments)},vi=b._emscripten_bind_b2EdgeShape_get_m_vertex0_0=function(){return b.asm._emscripten_bind_b2EdgeShape_get_m_vertex0_0.apply(null,arguments)},wi=b._emscripten_enum_b2JointType_e_revoluteJoint=function(){return b.asm._emscripten_enum_b2JointType_e_revoluteJoint.apply(null,arguments)},xi=b._emscripten_bind_b2Vec2_get_x_0=function(){return b.asm._emscripten_bind_b2Vec2_get_x_0.apply(null,arguments)},yi=b._emscripten_bind_b2WeldJointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2WeldJointDef_get_collideConnected_0.apply(null,
arguments)},zi=b._emscripten_bind_b2FrictionJoint_GetMaxTorque_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetMaxTorque_0.apply(null,arguments)},Ai=b._emscripten_bind_b2EdgeShape_RayCast_4=function(){return b.asm._emscripten_bind_b2EdgeShape_RayCast_4.apply(null,arguments)},Bi=b._emscripten_bind_b2BodyDef_set_allowSleep_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_allowSleep_1.apply(null,arguments)},Ci=b._emscripten_bind_b2PulleyJoint_GetType_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetType_0.apply(null,
arguments)},Di=b._emscripten_bind_b2WeldJointDef_set_localAnchorA_1=function(){return b.asm._emscripten_bind_b2WeldJointDef_set_localAnchorA_1.apply(null,arguments)},Ei=b._emscripten_bind_b2Profile_set_step_1=function(){return b.asm._emscripten_bind_b2Profile_set_step_1.apply(null,arguments)},Fi=b._emscripten_bind_b2ContactEdge_set_other_1=function(){return b.asm._emscripten_bind_b2ContactEdge_set_other_1.apply(null,arguments)},Gi=b._emscripten_bind_b2PulleyJoint_GetCurrentLengthB_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetCurrentLengthB_0.apply(null,
arguments)},Hi=b._emscripten_bind_b2Vec2_op_mul_1=function(){return b.asm._emscripten_bind_b2Vec2_op_mul_1.apply(null,arguments)},Ii=b._emscripten_bind_b2PrismaticJointDef_get_localAnchorA_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_localAnchorA_0.apply(null,arguments)},Ji=b._emscripten_bind_b2EdgeShape___destroy___0=function(){return b.asm._emscripten_bind_b2EdgeShape___destroy___0.apply(null,arguments)},Ki=b._emscripten_bind_b2PolygonShape_get_m_count_0=function(){return b.asm._emscripten_bind_b2PolygonShape_get_m_count_0.apply(null,
arguments)},Li=b._emscripten_bind_b2RopeJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetAnchorA_0.apply(null,arguments)},Mi=b._emscripten_bind_b2DistanceJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2DistanceJointDef_get_bodyA_0.apply(null,arguments)},Ni=b._emscripten_bind_b2AABB_Combine_2=function(){return b.asm._emscripten_bind_b2AABB_Combine_2.apply(null,arguments)},Oi=b._emscripten_bind_b2ManifoldPoint_set_tangentImpulse_1=function(){return b.asm._emscripten_bind_b2ManifoldPoint_set_tangentImpulse_1.apply(null,
arguments)},Pi=b._emscripten_bind_b2BodyDef_get_allowSleep_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_allowSleep_0.apply(null,arguments)},Qi=b._emscripten_bind_b2ContactEdge_get_other_0=function(){return b.asm._emscripten_bind_b2ContactEdge_get_other_0.apply(null,arguments)},Ri=b._emscripten_bind_b2RopeJoint_GetLocalAnchorB_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetLocalAnchorB_0.apply(null,arguments)},Si=b._emscripten_bind_b2PulleyJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2PulleyJointDef___destroy___0.apply(null,
arguments)},Ti=b._emscripten_bind_b2MouseJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetBodyB_0.apply(null,arguments)},Ui=b._emscripten_bind_b2PolygonShape_TestPoint_2=function(){return b.asm._emscripten_bind_b2PolygonShape_TestPoint_2.apply(null,arguments)},Vi=b._emscripten_bind_b2JointEdge_get_other_0=function(){return b.asm._emscripten_bind_b2JointEdge_get_other_0.apply(null,arguments)},Wi=b._emscripten_bind_b2PolygonShape_b2PolygonShape_0=function(){return b.asm._emscripten_bind_b2PolygonShape_b2PolygonShape_0.apply(null,
arguments)},Xi=b._emscripten_bind_b2PolygonShape_Set_2=function(){return b.asm._emscripten_bind_b2PolygonShape_Set_2.apply(null,arguments)},Yi=b._emscripten_bind_b2GearJoint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2GearJoint_GetReactionForce_1.apply(null,arguments)},Zi=b._emscripten_bind_b2DistanceJointDef_get_localAnchorA_0=function(){return b.asm._emscripten_bind_b2DistanceJointDef_get_localAnchorA_0.apply(null,arguments)},$i=b._emscripten_bind_b2Fixture_SetUserData_1=function(){return b.asm._emscripten_bind_b2Fixture_SetUserData_1.apply(null,
arguments)},aj=b._emscripten_bind_b2Contact_SetTangentSpeed_1=function(){return b.asm._emscripten_bind_b2Contact_SetTangentSpeed_1.apply(null,arguments)},bj=b._emscripten_bind_b2PrismaticJointDef_b2PrismaticJointDef_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_b2PrismaticJointDef_0.apply(null,arguments)},cj=b._emscripten_bind_b2BodyDef_get_active_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_active_0.apply(null,arguments)},dj=b._emscripten_bind_b2Body_GetAngularVelocity_0=
function(){return b.asm._emscripten_bind_b2Body_GetAngularVelocity_0.apply(null,arguments)},ej=b._emscripten_bind_b2CircleShape_set_m_p_1=function(){return b.asm._emscripten_bind_b2CircleShape_set_m_p_1.apply(null,arguments)},fj=b._emscripten_bind_b2Draw___destroy___0=function(){return b.asm._emscripten_bind_b2Draw___destroy___0.apply(null,arguments)},gj=b._emscripten_bind_b2WheelJointDef_Initialize_4=function(){return b.asm._emscripten_bind_b2WheelJointDef_Initialize_4.apply(null,arguments)},hj=
b._emscripten_bind_b2WeldJointDef_set_dampingRatio_1=function(){return b.asm._emscripten_bind_b2WeldJointDef_set_dampingRatio_1.apply(null,arguments)},ij=b._emscripten_bind_b2ChainShape_b2ChainShape_0=function(){return b.asm._emscripten_bind_b2ChainShape_b2ChainShape_0.apply(null,arguments)},jj=b._emscripten_bind_b2Joint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2Joint_GetAnchorB_0.apply(null,arguments)},kj=b._emscripten_bind_b2PrismaticJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_userData_0.apply(null,
arguments)},lj=b._emscripten_bind_b2MotorJoint_GetMaxForce_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetMaxForce_0.apply(null,arguments)},mj=b._emscripten_bind_b2RevoluteJoint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetBodyA_0.apply(null,arguments)},nj=b._emscripten_bind_b2ContactID_set_cf_1=function(){return b.asm._emscripten_bind_b2ContactID_set_cf_1.apply(null,arguments)},oj=b._emscripten_bind_b2Body_GetGravityScale_0=function(){return b.asm._emscripten_bind_b2Body_GetGravityScale_0.apply(null,
arguments)},pj=b._emscripten_bind_b2Vec3_Set_3=function(){return b.asm._emscripten_bind_b2Vec3_Set_3.apply(null,arguments)},qj=b._emscripten_bind_b2RevoluteJointDef_set_localAnchorA_1=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_localAnchorA_1.apply(null,arguments)},rj=b._emscripten_bind_b2FrictionJointDef_set_localAnchorB_1=function(){return b.asm._emscripten_bind_b2FrictionJointDef_set_localAnchorB_1.apply(null,arguments)},sj=b._emscripten_bind_b2PulleyJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetNext_0.apply(null,
arguments)},tj=b._emscripten_bind_b2ChainShape_get_m_type_0=function(){return b.asm._emscripten_bind_b2ChainShape_get_m_type_0.apply(null,arguments)},uj=b._emscripten_bind_b2PulleyJointDef_get_groundAnchorB_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_groundAnchorB_0.apply(null,arguments)},vj=b._emscripten_bind_JSDraw_DrawTransform_1=function(){return b.asm._emscripten_bind_JSDraw_DrawTransform_1.apply(null,arguments)},wj=b._emscripten_bind_b2GearJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2GearJointDef_get_bodyA_0.apply(null,
arguments)},xj=b._emscripten_bind_b2DistanceJointDef_set_frequencyHz_1=function(){return b.asm._emscripten_bind_b2DistanceJointDef_set_frequencyHz_1.apply(null,arguments)},yj=b._emscripten_bind_b2RevoluteJointDef_get_localAnchorB_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_localAnchorB_0.apply(null,arguments)},zj=b._emscripten_bind_b2RevoluteJointDef_get_referenceAngle_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_referenceAngle_0.apply(null,arguments)},Aj=
b._emscripten_bind_JSContactFilter___destroy___0=function(){return b.asm._emscripten_bind_JSContactFilter___destroy___0.apply(null,arguments)},Bj=b._emscripten_bind_b2RevoluteJointDef_get_enableMotor_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_enableMotor_0.apply(null,arguments)},Cb=b._memset=function(){return b.asm._memset.apply(null,arguments)},Cj=b._emscripten_bind_b2PolygonShape_get_m_radius_0=function(){return b.asm._emscripten_bind_b2PolygonShape_get_m_radius_0.apply(null,
arguments)},Dj=b._emscripten_enum_b2BodyType_b2_kinematicBody=function(){return b.asm._emscripten_enum_b2BodyType_b2_kinematicBody.apply(null,arguments)},Ej=b._emscripten_bind_b2Rot_set_s_1=function(){return b.asm._emscripten_bind_b2Rot_set_s_1.apply(null,arguments)},Fj=b._emscripten_enum_b2ManifoldType_e_faceA=function(){return b.asm._emscripten_enum_b2ManifoldType_e_faceA.apply(null,arguments)},Gj=b._emscripten_enum_b2ManifoldType_e_faceB=function(){return b.asm._emscripten_enum_b2ManifoldType_e_faceB.apply(null,
arguments)},Hj=b._emscripten_bind_b2RevoluteJointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_bodyB_0.apply(null,arguments)},Ij=b._emscripten_bind_b2FixtureDef_b2FixtureDef_0=function(){return b.asm._emscripten_bind_b2FixtureDef_b2FixtureDef_0.apply(null,arguments)},Jj=b._emscripten_bind_b2PrismaticJoint_SetUserData_1=function(){return b.asm._emscripten_bind_b2PrismaticJoint_SetUserData_1.apply(null,arguments)},Kj=b._emscripten_bind_b2WorldManifold_set_points_2=
function(){return b.asm._emscripten_bind_b2WorldManifold_set_points_2.apply(null,arguments)},Lj=b._emscripten_bind_b2EdgeShape_get_m_hasVertex3_0=function(){return b.asm._emscripten_bind_b2EdgeShape_get_m_hasVertex3_0.apply(null,arguments)},Mj=b._emscripten_enum_b2ShapeType_e_edge=function(){return b.asm._emscripten_enum_b2ShapeType_e_edge.apply(null,arguments)},Nj=b._emscripten_bind_b2RevoluteJoint_GetMaxMotorTorque_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetMaxMotorTorque_0.apply(null,
arguments)},Oj=b._emscripten_bind_b2BodyDef_set_active_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_active_1.apply(null,arguments)},Pj=b._emscripten_bind_b2EdgeShape_Set_2=function(){return b.asm._emscripten_bind_b2EdgeShape_Set_2.apply(null,arguments)},Qj=b._emscripten_bind_b2FixtureDef_set_isSensor_1=function(){return b.asm._emscripten_bind_b2FixtureDef_set_isSensor_1.apply(null,arguments)},Rj=b._emscripten_bind_b2Body_GetWorldPoint_1=function(){return b.asm._emscripten_bind_b2Body_GetWorldPoint_1.apply(null,
arguments)},Sj=b._emscripten_bind_b2ManifoldPoint_get_normalImpulse_0=function(){return b.asm._emscripten_bind_b2ManifoldPoint_get_normalImpulse_0.apply(null,arguments)},Tj=b._emscripten_bind_JSContactFilter_ShouldCollide_2=function(){return b.asm._emscripten_bind_JSContactFilter_ShouldCollide_2.apply(null,arguments)},Uj=b._emscripten_bind_b2Joint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2Joint_GetReactionTorque_1.apply(null,arguments)},Vj=b._emscripten_bind_b2RevoluteJointDef_set_type_1=
function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_type_1.apply(null,arguments)},Wj=b._emscripten_bind_b2RayCastInput_set_p1_1=function(){return b.asm._emscripten_bind_b2RayCastInput_set_p1_1.apply(null,arguments)},Xj=b._emscripten_bind_b2RopeJointDef_b2RopeJointDef_0=function(){return b.asm._emscripten_bind_b2RopeJointDef_b2RopeJointDef_0.apply(null,arguments)},Yj=b._emscripten_bind_b2BodyDef_get_linearDamping_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_linearDamping_0.apply(null,
arguments)},Zj=b._emscripten_bind_b2World_Step_3=function(){return b.asm._emscripten_bind_b2World_Step_3.apply(null,arguments)},ak=b._emscripten_bind_b2CircleShape_RayCast_4=function(){return b.asm._emscripten_bind_b2CircleShape_RayCast_4.apply(null,arguments)},bk=b._emscripten_bind_b2Profile_get_step_0=function(){return b.asm._emscripten_bind_b2Profile_get_step_0.apply(null,arguments)},ck=b._emscripten_bind_b2AABB_RayCast_2=function(){return b.asm._emscripten_bind_b2AABB_RayCast_2.apply(null,arguments)},
dk=b._emscripten_bind_b2Mat22_SetZero_0=function(){return b.asm._emscripten_bind_b2Mat22_SetZero_0.apply(null,arguments)};b.setTempRet0=function(){return b.asm.setTempRet0.apply(null,arguments)};
var ek=b._emscripten_bind_b2DistanceJoint_GetLength_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetLength_0.apply(null,arguments)},fk=b._emscripten_bind_b2PulleyJoint_GetLengthB_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetLengthB_0.apply(null,arguments)},gk=b._emscripten_bind_b2PrismaticJoint_GetUpperLimit_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetUpperLimit_0.apply(null,arguments)},hk=b._emscripten_bind_b2WorldManifold_set_separations_2=function(){return b.asm._emscripten_bind_b2WorldManifold_set_separations_2.apply(null,
arguments)},ik=b._emscripten_bind_b2WheelJoint_SetMaxMotorTorque_1=function(){return b.asm._emscripten_bind_b2WheelJoint_SetMaxMotorTorque_1.apply(null,arguments)},jk=b._emscripten_bind_b2MotorJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetUserData_0.apply(null,arguments)},kk=b._emscripten_bind_b2FrictionJoint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetReactionTorque_1.apply(null,arguments)},lk=b._emscripten_bind_b2Shape_get_m_type_0=
function(){return b.asm._emscripten_bind_b2Shape_get_m_type_0.apply(null,arguments)},mk=b._emscripten_bind_b2MouseJoint_SetDampingRatio_1=function(){return b.asm._emscripten_bind_b2MouseJoint_SetDampingRatio_1.apply(null,arguments)},nk=b._emscripten_bind_b2World_GetAutoClearForces_0=function(){return b.asm._emscripten_bind_b2World_GetAutoClearForces_0.apply(null,arguments)},ok=b._emscripten_bind_b2WorldManifold_set_normal_1=function(){return b.asm._emscripten_bind_b2WorldManifold_set_normal_1.apply(null,
arguments)},pk=b._emscripten_enum_b2ShapeType_e_circle=function(){return b.asm._emscripten_enum_b2ShapeType_e_circle.apply(null,arguments)},qk=b._emscripten_bind_b2BodyDef_set_fixedRotation_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_fixedRotation_1.apply(null,arguments)},rk=b._emscripten_bind_b2Vec2_b2Vec2_2=function(){return b.asm._emscripten_bind_b2Vec2_b2Vec2_2.apply(null,arguments)},sk=b._emscripten_bind_b2Manifold_get_type_0=function(){return b.asm._emscripten_bind_b2Manifold_get_type_0.apply(null,
arguments)},tk=b._emscripten_bind_b2Body_Dump_0=function(){return b.asm._emscripten_bind_b2Body_Dump_0.apply(null,arguments)},uk=b._emscripten_bind_b2RevoluteJoint_GetLowerLimit_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetLowerLimit_0.apply(null,arguments)},vk=b._emscripten_bind_b2Body_GetWorldCenter_0=function(){return b.asm._emscripten_bind_b2Body_GetWorldCenter_0.apply(null,arguments)},wk=b._emscripten_bind_b2WheelJointDef_set_maxMotorTorque_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_maxMotorTorque_1.apply(null,
arguments)},xk=b._emscripten_bind_b2BodyDef_set_linearVelocity_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_linearVelocity_1.apply(null,arguments)},yk=b._emscripten_bind_b2JointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2JointDef_set_collideConnected_1.apply(null,arguments)},zk=b._emscripten_bind_b2MotorJoint___destroy___0=function(){return b.asm._emscripten_bind_b2MotorJoint___destroy___0.apply(null,arguments)},Ak=b._emscripten_bind_b2Body_GetUserData_0=function(){return b.asm._emscripten_bind_b2Body_GetUserData_0.apply(null,
arguments)},Bk=b._emscripten_bind_b2Body_GetAngularDamping_0=function(){return b.asm._emscripten_bind_b2Body_GetAngularDamping_0.apply(null,arguments)},Ck=b._emscripten_bind_b2Fixture_RayCast_3=function(){return b.asm._emscripten_bind_b2Fixture_RayCast_3.apply(null,arguments)},Dk=b._emscripten_bind_b2JointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2JointDef_set_bodyA_1.apply(null,arguments)},Ek=b._emscripten_bind_b2GearJointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2GearJointDef_get_collideConnected_0.apply(null,
arguments)},Fk=b._emscripten_bind_b2RopeJointDef_get_maxLength_0=function(){return b.asm._emscripten_bind_b2RopeJointDef_get_maxLength_0.apply(null,arguments)},Gk=b._emscripten_bind_b2MouseJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2MouseJointDef_get_bodyA_0.apply(null,arguments)},Hk=b._emscripten_bind_b2Body_SetBullet_1=function(){return b.asm._emscripten_bind_b2Body_SetBullet_1.apply(null,arguments)},Ik=b._emscripten_bind_b2DistanceJoint_GetType_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetType_0.apply(null,
arguments)},Jk=b._emscripten_bind_b2FixtureDef_get_restitution_0=function(){return b.asm._emscripten_bind_b2FixtureDef_get_restitution_0.apply(null,arguments)},Kk=b._emscripten_bind_b2Fixture_GetType_0=function(){return b.asm._emscripten_bind_b2Fixture_GetType_0.apply(null,arguments)},Lk=b._emscripten_bind_b2WheelJointDef_set_enableMotor_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_enableMotor_1.apply(null,arguments)},Mk=b._emscripten_bind_b2RevoluteJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetBodyB_0.apply(null,
arguments)},Nk=b._emscripten_bind_b2Profile_set_solveInit_1=function(){return b.asm._emscripten_bind_b2Profile_set_solveInit_1.apply(null,arguments)},Ok=b._emscripten_bind_b2RopeJointDef_set_type_1=function(){return b.asm._emscripten_bind_b2RopeJointDef_set_type_1.apply(null,arguments)},Pk=b._emscripten_bind_b2PrismaticJointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_bodyB_0.apply(null,arguments)},Qk=b._emscripten_bind_b2GearJoint_GetJoint2_0=function(){return b.asm._emscripten_bind_b2GearJoint_GetJoint2_0.apply(null,
arguments)},Rk=b._emscripten_bind_b2PulleyJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_userData_0.apply(null,arguments)},Sk=b._emscripten_bind_b2PrismaticJointDef_set_bodyB_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_bodyB_1.apply(null,arguments)},Tk=b._emscripten_bind_b2FrictionJointDef_b2FrictionJointDef_0=function(){return b.asm._emscripten_bind_b2FrictionJointDef_b2FrictionJointDef_0.apply(null,arguments)},Uk=b._emscripten_bind_b2PulleyJoint_GetCurrentLengthA_0=
function(){return b.asm._emscripten_bind_b2PulleyJoint_GetCurrentLengthA_0.apply(null,arguments)},Vk=b._emscripten_bind_b2Manifold_get_localNormal_0=function(){return b.asm._emscripten_bind_b2Manifold_get_localNormal_0.apply(null,arguments)},Wk=b._emscripten_bind_b2Vec3_b2Vec3_0=function(){return b.asm._emscripten_bind_b2Vec3_b2Vec3_0.apply(null,arguments)},Xk=b._emscripten_bind_b2Body_SetSleepingAllowed_1=function(){return b.asm._emscripten_bind_b2Body_SetSleepingAllowed_1.apply(null,arguments)},
Yk=b._emscripten_bind_b2DistanceJoint___destroy___0=function(){return b.asm._emscripten_bind_b2DistanceJoint___destroy___0.apply(null,arguments)},Zk=b._emscripten_bind_b2PrismaticJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetAnchorA_0.apply(null,arguments)},$k=b._emscripten_bind_b2Manifold_set_pointCount_1=function(){return b.asm._emscripten_bind_b2Manifold_set_pointCount_1.apply(null,arguments)},al=b._emscripten_bind_b2PrismaticJoint_IsMotorEnabled_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_IsMotorEnabled_0.apply(null,
arguments)},bl=b._emscripten_bind_b2WeldJoint_GetFrequency_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetFrequency_0.apply(null,arguments)},cl=b._emscripten_bind_b2Joint_GetUserData_0=function(){return b.asm._emscripten_bind_b2Joint_GetUserData_0.apply(null,arguments)},dl=b._emscripten_bind_b2WorldManifold_get_points_1=function(){return b.asm._emscripten_bind_b2WorldManifold_get_points_1.apply(null,arguments)},el=b._emscripten_bind_b2RevoluteJointDef_get_lowerAngle_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_lowerAngle_0.apply(null,
arguments)},fl=b._emscripten_bind_b2Manifold_set_type_1=function(){return b.asm._emscripten_bind_b2Manifold_set_type_1.apply(null,arguments)},gl=b._emscripten_bind_b2Vec3_b2Vec3_3=function(){return b.asm._emscripten_bind_b2Vec3_b2Vec3_3.apply(null,arguments)},hl=b._emscripten_bind_b2RopeJointDef_set_maxLength_1=function(){return b.asm._emscripten_bind_b2RopeJointDef_set_maxLength_1.apply(null,arguments)},il=b._emscripten_bind_b2ChainShape_TestPoint_2=function(){return b.asm._emscripten_bind_b2ChainShape_TestPoint_2.apply(null,
arguments)},jl=b._emscripten_bind_b2PrismaticJoint_GetReferenceAngle_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetReferenceAngle_0.apply(null,arguments)},kl=b._emscripten_bind_b2RayCastInput_get_p2_0=function(){return b.asm._emscripten_bind_b2RayCastInput_get_p2_0.apply(null,arguments)},ll=b._emscripten_bind_b2BodyDef_set_angle_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_angle_1.apply(null,arguments)},ml=b._emscripten_bind_b2WeldJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetUserData_0.apply(null,
arguments)},nl=b._emscripten_bind_b2WheelJointDef_get_localAnchorA_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_localAnchorA_0.apply(null,arguments)},ol=b._emscripten_bind_b2PulleyJointDef_set_type_1=function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_type_1.apply(null,arguments)},pl=b._emscripten_bind_b2Body_IsBullet_0=function(){return b.asm._emscripten_bind_b2Body_IsBullet_0.apply(null,arguments)},ql=b._emscripten_bind_b2MotorJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2MotorJointDef_set_bodyA_1.apply(null,
arguments)},rl=b._emscripten_bind_b2Fixture_TestPoint_1=function(){return b.asm._emscripten_bind_b2Fixture_TestPoint_1.apply(null,arguments)},sl=b._emscripten_bind_b2Mat33_GetSymInverse33_1=function(){return b.asm._emscripten_bind_b2Mat33_GetSymInverse33_1.apply(null,arguments)},tl=b._emscripten_bind_JSDraw_DrawPolygon_3=function(){return b.asm._emscripten_bind_JSDraw_DrawPolygon_3.apply(null,arguments)},ul=b._emscripten_bind_b2PolygonShape_ComputeMass_2=function(){return b.asm._emscripten_bind_b2PolygonShape_ComputeMass_2.apply(null,
arguments)},vl=b._emscripten_bind_b2PrismaticJoint_EnableMotor_1=function(){return b.asm._emscripten_bind_b2PrismaticJoint_EnableMotor_1.apply(null,arguments)},wl=b._emscripten_bind_b2PrismaticJointDef_set_upperTranslation_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_upperTranslation_1.apply(null,arguments)},xl=b._emscripten_bind_b2MouseJoint_SetFrequency_1=function(){return b.asm._emscripten_bind_b2MouseJoint_SetFrequency_1.apply(null,arguments)},yl=b._emscripten_bind_b2EdgeShape_get_m_vertex1_0=
function(){return b.asm._emscripten_bind_b2EdgeShape_get_m_vertex1_0.apply(null,arguments)},zl=b._emscripten_bind_b2BodyDef_set_awake_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_awake_1.apply(null,arguments)},Al=b._emscripten_bind_b2Vec2_get_y_0=function(){return b.asm._emscripten_bind_b2Vec2_get_y_0.apply(null,arguments)},Bl=b._emscripten_bind_b2Filter_set_categoryBits_1=function(){return b.asm._emscripten_bind_b2Filter_set_categoryBits_1.apply(null,arguments)},Cl=b._emscripten_bind_b2Body_CreateFixture_2=
function(){return b.asm._emscripten_bind_b2Body_CreateFixture_2.apply(null,arguments)},Dl=b._emscripten_bind_b2Body_SetActive_1=function(){return b.asm._emscripten_bind_b2Body_SetActive_1.apply(null,arguments)},El=b._emscripten_bind_b2ContactFeature_get_indexB_0=function(){return b.asm._emscripten_bind_b2ContactFeature_get_indexB_0.apply(null,arguments)},Fl=b._emscripten_bind_b2Fixture_GetUserData_0=function(){return b.asm._emscripten_bind_b2Fixture_GetUserData_0.apply(null,arguments)},Gl=b._emscripten_bind_b2PolygonShape_ComputeAABB_3=
function(){return b.asm._emscripten_bind_b2PolygonShape_ComputeAABB_3.apply(null,arguments)},Hl=b._emscripten_bind_b2ContactFeature_get_typeA_0=function(){return b.asm._emscripten_bind_b2ContactFeature_get_typeA_0.apply(null,arguments)},Il=b._emscripten_bind_b2MouseJointDef_set_maxForce_1=function(){return b.asm._emscripten_bind_b2MouseJointDef_set_maxForce_1.apply(null,arguments)},Jl=b._emscripten_bind_b2PrismaticJoint_GetLocalAnchorA_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetLocalAnchorA_0.apply(null,
arguments)},Kl=b._emscripten_bind_b2EdgeShape_TestPoint_2=function(){return b.asm._emscripten_bind_b2EdgeShape_TestPoint_2.apply(null,arguments)},Ll=b._emscripten_bind_b2WorldManifold_Initialize_5=function(){return b.asm._emscripten_bind_b2WorldManifold_Initialize_5.apply(null,arguments)},Ml=b._emscripten_bind_b2PolygonShape_get_m_centroid_0=function(){return b.asm._emscripten_bind_b2PolygonShape_get_m_centroid_0.apply(null,arguments)},Nl=b._emscripten_bind_b2ChainShape___destroy___0=function(){return b.asm._emscripten_bind_b2ChainShape___destroy___0.apply(null,
arguments)},Ol=b._emscripten_bind_b2GearJoint_SetUserData_1=function(){return b.asm._emscripten_bind_b2GearJoint_SetUserData_1.apply(null,arguments)},Pl=b._emscripten_bind_b2Vec3_set_z_1=function(){return b.asm._emscripten_bind_b2Vec3_set_z_1.apply(null,arguments)},Ql=b._emscripten_bind_b2PrismaticJointDef_set_enableLimit_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_enableLimit_1.apply(null,arguments)},Rl=b._emscripten_bind_b2DistanceJoint_GetFrequency_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetFrequency_0.apply(null,
arguments)},Sl=b._emscripten_bind_b2PrismaticJointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_collideConnected_0.apply(null,arguments)},Tl=b._emscripten_bind_b2Body_SetGravityScale_1=function(){return b.asm._emscripten_bind_b2Body_SetGravityScale_1.apply(null,arguments)},Ul=b._emscripten_enum_b2ContactFeatureType_e_face=function(){return b.asm._emscripten_enum_b2ContactFeatureType_e_face.apply(null,arguments)},Vl=b._emscripten_bind_b2RevoluteJoint_GetUpperLimit_0=
function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetUpperLimit_0.apply(null,arguments)},Wl=b._emscripten_bind_b2PulleyJointDef_get_lengthA_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_lengthA_0.apply(null,arguments)},Xl=b._emscripten_bind_b2Vec3_set_x_1=function(){return b.asm._emscripten_bind_b2Vec3_set_x_1.apply(null,arguments)},Yl=b._emscripten_bind_b2PulleyJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_type_0.apply(null,arguments)},
Zl=b._emscripten_bind_JSDestructionListener_SayGoodbyeJoint_1=function(){return b.asm._emscripten_bind_JSDestructionListener_SayGoodbyeJoint_1.apply(null,arguments)},$l=b._emscripten_bind_b2Shape___destroy___0=function(){return b.asm._emscripten_bind_b2Shape___destroy___0.apply(null,arguments)},am=b._emscripten_bind_b2Joint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2Joint_GetReactionForce_1.apply(null,arguments)},bm=b._emscripten_bind_b2FixtureDef_set_friction_1=function(){return b.asm._emscripten_bind_b2FixtureDef_set_friction_1.apply(null,
arguments)},cm=b._emscripten_bind_b2ContactID___destroy___0=function(){return b.asm._emscripten_bind_b2ContactID___destroy___0.apply(null,arguments)},dm=b._emscripten_bind_b2EdgeShape_get_m_hasVertex0_0=function(){return b.asm._emscripten_bind_b2EdgeShape_get_m_hasVertex0_0.apply(null,arguments)},em=b._emscripten_bind_b2World_GetBodyCount_0=function(){return b.asm._emscripten_bind_b2World_GetBodyCount_0.apply(null,arguments)},fm=b._emscripten_bind_b2JointEdge_get_prev_0=function(){return b.asm._emscripten_bind_b2JointEdge_get_prev_0.apply(null,
arguments)},gm=b._emscripten_bind_b2MotorJointDef_get_linearOffset_0=function(){return b.asm._emscripten_bind_b2MotorJointDef_get_linearOffset_0.apply(null,arguments)},hm=b._emscripten_bind_b2MotorJointDef_Initialize_2=function(){return b.asm._emscripten_bind_b2MotorJointDef_Initialize_2.apply(null,arguments)},im=b._emscripten_bind_b2PrismaticJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetAnchorB_0.apply(null,arguments)},jm=b._emscripten_bind_b2Body_SetLinearVelocity_1=
function(){return b.asm._emscripten_bind_b2Body_SetLinearVelocity_1.apply(null,arguments)},km=b._emscripten_enum_b2BodyType_b2_staticBody=function(){return b.asm._emscripten_enum_b2BodyType_b2_staticBody.apply(null,arguments)},lm=b._emscripten_bind_b2RevoluteJointDef_set_upperAngle_1=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_upperAngle_1.apply(null,arguments)},mm=b._emscripten_bind_b2RevoluteJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_type_0.apply(null,
arguments)},nm=b._emscripten_bind_b2GearJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2GearJointDef_get_type_0.apply(null,arguments)},om=b._emscripten_bind_b2ChainShape_GetType_0=function(){return b.asm._emscripten_bind_b2ChainShape_GetType_0.apply(null,arguments)},pm=b._emscripten_bind_b2RayCastInput_get_maxFraction_0=function(){return b.asm._emscripten_bind_b2RayCastInput_get_maxFraction_0.apply(null,arguments)},qm=b._emscripten_bind_b2GearJoint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2GearJoint_GetBodyA_0.apply(null,
arguments)},rm=b._emscripten_bind_b2Body_GetLocalVector_1=function(){return b.asm._emscripten_bind_b2Body_GetLocalVector_1.apply(null,arguments)},sm=b._emscripten_bind_b2PrismaticJoint_EnableLimit_1=function(){return b.asm._emscripten_bind_b2PrismaticJoint_EnableLimit_1.apply(null,arguments)},tm=b._emscripten_bind_b2FrictionJointDef_get_maxForce_0=function(){return b.asm._emscripten_bind_b2FrictionJointDef_get_maxForce_0.apply(null,arguments)},um=b._emscripten_bind_b2BodyDef_set_angularVelocity_1=
function(){return b.asm._emscripten_bind_b2BodyDef_set_angularVelocity_1.apply(null,arguments)},wm=b._emscripten_bind_b2Body_SetLinearDamping_1=function(){return b.asm._emscripten_bind_b2Body_SetLinearDamping_1.apply(null,arguments)},xm=b._emscripten_bind_b2WheelJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetBodyB_0.apply(null,arguments)},ym=b._emscripten_bind_b2GearJointDef_get_joint2_0=function(){return b.asm._emscripten_bind_b2GearJointDef_get_joint2_0.apply(null,arguments)},
zm=b._emscripten_bind_b2PrismaticJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_IsActive_0.apply(null,arguments)},Am=b._emscripten_bind_b2Vec3_get_z_0=function(){return b.asm._emscripten_bind_b2Vec3_get_z_0.apply(null,arguments)},Bm=b._emscripten_bind_b2Filter_get_categoryBits_0=function(){return b.asm._emscripten_bind_b2Filter_get_categoryBits_0.apply(null,arguments)},Cm=b._emscripten_bind_b2Color_get_r_0=function(){return b.asm._emscripten_bind_b2Color_get_r_0.apply(null,
arguments)},Dm=b._emscripten_enum_b2JointType_e_weldJoint=function(){return b.asm._emscripten_enum_b2JointType_e_weldJoint.apply(null,arguments)},Em=b._emscripten_bind_b2World_SetContinuousPhysics_1=function(){return b.asm._emscripten_bind_b2World_SetContinuousPhysics_1.apply(null,arguments)},Fm=b._emscripten_bind_b2MouseJointDef_get_target_0=function(){return b.asm._emscripten_bind_b2MouseJointDef_get_target_0.apply(null,arguments)},Gm=b._emscripten_bind_b2Body_SetTransform_2=function(){return b.asm._emscripten_bind_b2Body_SetTransform_2.apply(null,
arguments)},Hm=b._emscripten_bind_b2PulleyJointDef_set_userData_1=function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_userData_1.apply(null,arguments)},Im=b._emscripten_bind_b2FrictionJointDef_set_maxForce_1=function(){return b.asm._emscripten_bind_b2FrictionJointDef_set_maxForce_1.apply(null,arguments)},Jm=b._emscripten_bind_b2DistanceJointDef_b2DistanceJointDef_0=function(){return b.asm._emscripten_bind_b2DistanceJointDef_b2DistanceJointDef_0.apply(null,arguments)},Km=b._emscripten_bind_b2BodyDef_get_type_0=
function(){return b.asm._emscripten_bind_b2BodyDef_get_type_0.apply(null,arguments)},Lm=b._emscripten_bind_b2Mat33_GetInverse22_1=function(){return b.asm._emscripten_bind_b2Mat33_GetInverse22_1.apply(null,arguments)},Mm=b._emscripten_bind_b2PulleyJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetAnchorB_0.apply(null,arguments)},Nm=b._emscripten_bind_b2WheelJoint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2WheelJoint_GetReactionTorque_1.apply(null,arguments)},
Om=b._emscripten_bind_b2RevoluteJointDef_b2RevoluteJointDef_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_b2RevoluteJointDef_0.apply(null,arguments)},Pm=b._emscripten_bind_b2ContactFeature_set_typeA_1=function(){return b.asm._emscripten_bind_b2ContactFeature_set_typeA_1.apply(null,arguments)},Qm=b._emscripten_bind_b2Fixture_Dump_1=function(){return b.asm._emscripten_bind_b2Fixture_Dump_1.apply(null,arguments)},Rm=b._emscripten_bind_b2RevoluteJointDef_get_enableLimit_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_enableLimit_0.apply(null,
arguments)},Sm=b._emscripten_bind_b2Manifold_set_localPoint_1=function(){return b.asm._emscripten_bind_b2Manifold_set_localPoint_1.apply(null,arguments)},Tm=b._emscripten_bind_b2JointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2JointDef_get_userData_0.apply(null,arguments)},Um=b._emscripten_bind_b2BodyDef_set_bullet_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_bullet_1.apply(null,arguments)},Vm=b._emscripten_bind_b2WorldManifold___destroy___0=function(){return b.asm._emscripten_bind_b2WorldManifold___destroy___0.apply(null,
arguments)},Wm=b._emscripten_bind_b2RayCastOutput___destroy___0=function(){return b.asm._emscripten_bind_b2RayCastOutput___destroy___0.apply(null,arguments)},Xm=b._emscripten_bind_JSContactListener___destroy___0=function(){return b.asm._emscripten_bind_JSContactListener___destroy___0.apply(null,arguments)},Ym=b._emscripten_bind_b2World_DrawDebugData_0=function(){return b.asm._emscripten_bind_b2World_DrawDebugData_0.apply(null,arguments)};
b.___cxa_can_catch=function(){return b.asm.___cxa_can_catch.apply(null,arguments)};
var Zm=b._emscripten_bind_b2RopeJointDef_get_localAnchorA_0=function(){return b.asm._emscripten_bind_b2RopeJointDef_get_localAnchorA_0.apply(null,arguments)},$m=b._emscripten_bind_b2Profile_set_solveVelocity_1=function(){return b.asm._emscripten_bind_b2Profile_set_solveVelocity_1.apply(null,arguments)},an=b._emscripten_bind_b2GearJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2GearJointDef_get_userData_0.apply(null,arguments)},bn=b._emscripten_bind_b2Filter_set_groupIndex_1=function(){return b.asm._emscripten_bind_b2Filter_set_groupIndex_1.apply(null,
arguments)},cn=b._emscripten_bind_b2JointDef_b2JointDef_0=function(){return b.asm._emscripten_bind_b2JointDef_b2JointDef_0.apply(null,arguments)},dn=b._emscripten_bind_b2Rot_set_c_1=function(){return b.asm._emscripten_bind_b2Rot_set_c_1.apply(null,arguments)},en=b._emscripten_bind_b2GearJointDef_b2GearJointDef_0=function(){return b.asm._emscripten_bind_b2GearJointDef_b2GearJointDef_0.apply(null,arguments)},fn=b._emscripten_bind_b2JointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2JointDef_get_bodyB_0.apply(null,
arguments)},gn=b._emscripten_bind_b2DistanceJoint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetReactionForce_1.apply(null,arguments)},hn=b._emscripten_bind_b2PrismaticJoint_GetJointSpeed_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetJointSpeed_0.apply(null,arguments)},jn=b._emscripten_bind_b2MouseJointDef_set_frequencyHz_1=function(){return b.asm._emscripten_bind_b2MouseJointDef_set_frequencyHz_1.apply(null,arguments)},kn=b._emscripten_bind_b2PulleyJointDef_get_groundAnchorA_0=
function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_groundAnchorA_0.apply(null,arguments)},ln=b._emscripten_bind_b2Joint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2Joint_GetAnchorA_0.apply(null,arguments)},mn=b._emscripten_bind_b2Contact_GetRestitution_0=function(){return b.asm._emscripten_bind_b2Contact_GetRestitution_0.apply(null,arguments)},nn=b._emscripten_bind_b2ContactEdge_get_contact_0=function(){return b.asm._emscripten_bind_b2ContactEdge_get_contact_0.apply(null,arguments)},
on=b._emscripten_bind_b2RevoluteJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_userData_0.apply(null,arguments)},pn=b._emscripten_bind_b2Body_ResetMassData_0=function(){return b.asm._emscripten_bind_b2Body_ResetMassData_0.apply(null,arguments)},qn=b._emscripten_bind_b2Fixture_GetAABB_1=function(){return b.asm._emscripten_bind_b2Fixture_GetAABB_1.apply(null,arguments)},rn=b._emscripten_bind_b2PrismaticJointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_collideConnected_1.apply(null,
arguments)},sn=b._emscripten_bind_b2Body_GetMassData_1=function(){return b.asm._emscripten_bind_b2Body_GetMassData_1.apply(null,arguments)},tn=b._emscripten_bind_b2RevoluteJointDef_get_localAnchorA_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_localAnchorA_0.apply(null,arguments)},un=b._emscripten_bind_b2EdgeShape_ComputeMass_2=function(){return b.asm._emscripten_bind_b2EdgeShape_ComputeMass_2.apply(null,arguments)},vn=b._emscripten_bind_b2GearJointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2GearJointDef_get_bodyB_0.apply(null,
arguments)},wn=b._emscripten_enum_b2LimitState_e_atLowerLimit=function(){return b.asm._emscripten_enum_b2LimitState_e_atLowerLimit.apply(null,arguments)},xn=b._emscripten_bind_b2ManifoldPoint_set_id_1=function(){return b.asm._emscripten_bind_b2ManifoldPoint_set_id_1.apply(null,arguments)},yn=b._emscripten_bind_b2WheelJointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_bodyB_0.apply(null,arguments)},zn=b._emscripten_bind_b2WeldJoint_GetLocalAnchorB_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetLocalAnchorB_0.apply(null,
arguments)},An=b._emscripten_bind_b2RevoluteJointDef_set_localAnchorB_1=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_localAnchorB_1.apply(null,arguments)},Bn=b._emscripten_bind_b2Body_DestroyFixture_1=function(){return b.asm._emscripten_bind_b2Body_DestroyFixture_1.apply(null,arguments)},Cn=b._emscripten_bind_b2Profile_set_broadphase_1=function(){return b.asm._emscripten_bind_b2Profile_set_broadphase_1.apply(null,arguments)},Dn=b._emscripten_bind_b2WheelJointDef_get_localAnchorB_0=
function(){return b.asm._emscripten_bind_b2WheelJointDef_get_localAnchorB_0.apply(null,arguments)},En=b._emscripten_bind_b2ContactImpulse_get_count_0=function(){return b.asm._emscripten_bind_b2ContactImpulse_get_count_0.apply(null,arguments)},Fn=b._emscripten_bind_b2World_GetJointCount_0=function(){return b.asm._emscripten_bind_b2World_GetJointCount_0.apply(null,arguments)},Gn=b._emscripten_bind_b2WheelJoint_GetMotorSpeed_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetMotorSpeed_0.apply(null,
arguments)},Hn=b._emscripten_bind_b2WheelJointDef_get_dampingRatio_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_dampingRatio_0.apply(null,arguments)},In=b._emscripten_bind_b2RayCastOutput_get_fraction_0=function(){return b.asm._emscripten_bind_b2RayCastOutput_get_fraction_0.apply(null,arguments)},Jn=b._emscripten_bind_b2AABB___destroy___0=function(){return b.asm._emscripten_bind_b2AABB___destroy___0.apply(null,arguments)},Kn=b._emscripten_bind_b2GearJoint_SetRatio_1=function(){return b.asm._emscripten_bind_b2GearJoint_SetRatio_1.apply(null,
arguments)},Ln=b._emscripten_bind_b2Body_ApplyLinearImpulse_3=function(){return b.asm._emscripten_bind_b2Body_ApplyLinearImpulse_3.apply(null,arguments)},Mn=b._emscripten_bind_b2Filter___destroy___0=function(){return b.asm._emscripten_bind_b2Filter___destroy___0.apply(null,arguments)},Nn=b._emscripten_bind_b2RopeJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2RopeJointDef_get_userData_0.apply(null,arguments)};
b.___cxa_is_pointer_type=function(){return b.asm.___cxa_is_pointer_type.apply(null,arguments)};
var On=b._emscripten_bind_b2BodyDef_get_fixedRotation_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_fixedRotation_0.apply(null,arguments)},Pn=b._emscripten_bind_b2PrismaticJointDef_set_motorSpeed_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_motorSpeed_1.apply(null,arguments)},Qn=b._emscripten_bind_b2ChainShape_SetPrevVertex_1=function(){return b.asm._emscripten_bind_b2ChainShape_SetPrevVertex_1.apply(null,arguments)},Rn=b._emscripten_bind_b2MotorJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2MotorJoint_IsActive_0.apply(null,
arguments)},Sn=b._emscripten_bind_b2MouseJoint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2MouseJoint_GetReactionTorque_1.apply(null,arguments)},Tn=b._emscripten_bind_b2DistanceJointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2DistanceJointDef_set_collideConnected_1.apply(null,arguments)},Un=b._emscripten_bind_b2WheelJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetUserData_0.apply(null,arguments)},Vn=b._emscripten_bind_b2Vec3_op_sub_1=
function(){return b.asm._emscripten_bind_b2Vec3_op_sub_1.apply(null,arguments)},Wn=b._emscripten_bind_b2WheelJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetNext_0.apply(null,arguments)},Xn=b._emscripten_bind_b2Shape_GetType_0=function(){return b.asm._emscripten_bind_b2Shape_GetType_0.apply(null,arguments)},Yn=b._emscripten_bind_b2AABB_IsValid_0=function(){return b.asm._emscripten_bind_b2AABB_IsValid_0.apply(null,arguments)},Zn=b._emscripten_bind_b2WheelJoint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetBodyA_0.apply(null,
arguments)},$n=b._emscripten_enum_b2ShapeType_e_chain=function(){return b.asm._emscripten_enum_b2ShapeType_e_chain.apply(null,arguments)},ao=b._emscripten_bind_b2PulleyJoint_GetLengthA_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetLengthA_0.apply(null,arguments)},bo=b._emscripten_bind_b2DistanceJointDef_get_frequencyHz_0=function(){return b.asm._emscripten_bind_b2DistanceJointDef_get_frequencyHz_0.apply(null,arguments)},co=b._emscripten_bind_b2RevoluteJoint_SetMotorSpeed_1=function(){return b.asm._emscripten_bind_b2RevoluteJoint_SetMotorSpeed_1.apply(null,
arguments)},eo=b._emscripten_bind_b2World___destroy___0=function(){return b.asm._emscripten_bind_b2World___destroy___0.apply(null,arguments)},fo=b._emscripten_bind_b2ChainShape_set_m_prevVertex_1=function(){return b.asm._emscripten_bind_b2ChainShape_set_m_prevVertex_1.apply(null,arguments)},go=b._emscripten_bind_b2ChainShape_get_m_hasNextVertex_0=function(){return b.asm._emscripten_bind_b2ChainShape_get_m_hasNextVertex_0.apply(null,arguments)},ho=b._emscripten_bind_b2ChainShape_SetNextVertex_1=function(){return b.asm._emscripten_bind_b2ChainShape_SetNextVertex_1.apply(null,
arguments)},io=b._emscripten_bind_b2Body_SetType_1=function(){return b.asm._emscripten_bind_b2Body_SetType_1.apply(null,arguments)},jo=b._emscripten_bind_b2Body_GetMass_0=function(){return b.asm._emscripten_bind_b2Body_GetMass_0.apply(null,arguments)},ko=b._emscripten_bind_b2Rot_b2Rot_0=function(){return b.asm._emscripten_bind_b2Rot_b2Rot_0.apply(null,arguments)},lo=b._emscripten_bind_b2Rot_b2Rot_1=function(){return b.asm._emscripten_bind_b2Rot_b2Rot_1.apply(null,arguments)},mo=b._emscripten_enum_b2JointType_e_distanceJoint=
function(){return b.asm._emscripten_enum_b2JointType_e_distanceJoint.apply(null,arguments)},no=b._emscripten_bind_b2WheelJoint_SetSpringDampingRatio_1=function(){return b.asm._emscripten_bind_b2WheelJoint_SetSpringDampingRatio_1.apply(null,arguments)},oo=b._emscripten_bind_b2MouseJoint_GetType_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetType_0.apply(null,arguments)},po=b._emscripten_bind_b2MouseJoint_GetTarget_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetTarget_0.apply(null,
arguments)},qo=b._emscripten_bind_JSQueryCallback___destroy___0=function(){return b.asm._emscripten_bind_JSQueryCallback___destroy___0.apply(null,arguments)},ro=b._emscripten_bind_b2Fixture_Refilter_0=function(){return b.asm._emscripten_bind_b2Fixture_Refilter_0.apply(null,arguments)},so=b._emscripten_bind_b2RevoluteJointDef_set_lowerAngle_1=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_lowerAngle_1.apply(null,arguments)},to=b._emscripten_bind_b2JointEdge___destroy___0=function(){return b.asm._emscripten_bind_b2JointEdge___destroy___0.apply(null,
arguments)},uo=b._emscripten_bind_b2PulleyJoint_GetRatio_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetRatio_0.apply(null,arguments)},vo=b._emscripten_bind_JSContactListener_BeginContact_1=function(){return b.asm._emscripten_bind_JSContactListener_BeginContact_1.apply(null,arguments)},wo=b._emscripten_bind_b2MotorJointDef_set_linearOffset_1=function(){return b.asm._emscripten_bind_b2MotorJointDef_set_linearOffset_1.apply(null,arguments)},xo=b._emscripten_enum_b2JointType_e_motorJoint=
function(){return b.asm._emscripten_enum_b2JointType_e_motorJoint.apply(null,arguments)},yo=b._emscripten_bind_b2EdgeShape_get_m_vertex2_0=function(){return b.asm._emscripten_bind_b2EdgeShape_get_m_vertex2_0.apply(null,arguments)},zo=b._emscripten_bind_b2JointEdge_get_next_0=function(){return b.asm._emscripten_bind_b2JointEdge_get_next_0.apply(null,arguments)},Ao=b._emscripten_bind_b2RayCastInput_set_maxFraction_1=function(){return b.asm._emscripten_bind_b2RayCastInput_set_maxFraction_1.apply(null,
arguments)},Bo=b._emscripten_bind_b2MouseJoint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetBodyA_0.apply(null,arguments)},Co=b._emscripten_bind_b2BodyDef_get_awake_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_awake_0.apply(null,arguments)},Do=b._emscripten_bind_b2AABB_b2AABB_0=function(){return b.asm._emscripten_bind_b2AABB_b2AABB_0.apply(null,arguments)},Eo=b._emscripten_bind_b2Fixture_SetFriction_1=function(){return b.asm._emscripten_bind_b2Fixture_SetFriction_1.apply(null,
arguments)},Fo=b._emscripten_enum_b2DrawFlag_e_centerOfMassBit=function(){return b.asm._emscripten_enum_b2DrawFlag_e_centerOfMassBit.apply(null,arguments)},Go=b._emscripten_bind_b2World_CreateBody_1=function(){return b.asm._emscripten_bind_b2World_CreateBody_1.apply(null,arguments)},Ho=b._emscripten_bind_b2RopeJointDef_set_userData_1=function(){return b.asm._emscripten_bind_b2RopeJointDef_set_userData_1.apply(null,arguments)},Io=b._emscripten_bind_b2WeldJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetNext_0.apply(null,
arguments)},Jo=b._emscripten_bind_b2WeldJoint_GetType_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetType_0.apply(null,arguments)},Ko=b._emscripten_enum_b2ContactFeatureType_e_vertex=function(){return b.asm._emscripten_enum_b2ContactFeatureType_e_vertex.apply(null,arguments)},Lo=b._emscripten_bind_b2Rot___destroy___0=function(){return b.asm._emscripten_bind_b2Rot___destroy___0.apply(null,arguments)},Mo=b._emscripten_bind_b2Filter_get_maskBits_0=function(){return b.asm._emscripten_bind_b2Filter_get_maskBits_0.apply(null,
arguments)},No=b._emscripten_bind_b2Mat22_get_ex_0=function(){return b.asm._emscripten_bind_b2Mat22_get_ex_0.apply(null,arguments)},Oo=b._emscripten_bind_b2Body_GetFixtureList_0=function(){return b.asm._emscripten_bind_b2Body_GetFixtureList_0.apply(null,arguments)},Po=b._emscripten_bind_b2PulleyJoint___destroy___0=function(){return b.asm._emscripten_bind_b2PulleyJoint___destroy___0.apply(null,arguments)},Qo=b._emscripten_bind_b2MouseJointDef_set_dampingRatio_1=function(){return b.asm._emscripten_bind_b2MouseJointDef_set_dampingRatio_1.apply(null,
arguments)},Ro=b._emscripten_bind_JSRayCastCallback___destroy___0=function(){return b.asm._emscripten_bind_JSRayCastCallback___destroy___0.apply(null,arguments)},So=b._emscripten_bind_b2ContactListener___destroy___0=function(){return b.asm._emscripten_bind_b2ContactListener___destroy___0.apply(null,arguments)},To=b._emscripten_bind_b2PrismaticJointDef_set_localAnchorB_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_localAnchorB_1.apply(null,arguments)};
b.establishStackSpace=function(){return b.asm.establishStackSpace.apply(null,arguments)};
var Uo=b._emscripten_bind_b2FrictionJoint___destroy___0=function(){return b.asm._emscripten_bind_b2FrictionJoint___destroy___0.apply(null,arguments)},Vo=b._emscripten_bind_b2WeldJoint_Dump_0=function(){return b.asm._emscripten_bind_b2WeldJoint_Dump_0.apply(null,arguments)},Wo=b._emscripten_bind_b2MotorJoint_SetMaxForce_1=function(){return b.asm._emscripten_bind_b2MotorJoint_SetMaxForce_1.apply(null,arguments)},Xo=b._emscripten_bind_b2MouseJoint_GetFrequency_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetFrequency_0.apply(null,
arguments)},Yo=b._emscripten_bind_b2FrictionJoint_GetLocalAnchorA_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetLocalAnchorA_0.apply(null,arguments)},Zo=b._emscripten_bind_b2RevoluteJointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_collideConnected_1.apply(null,arguments)},$o=b._emscripten_bind_b2GearJointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2GearJointDef_set_collideConnected_1.apply(null,arguments)},ap=
b._emscripten_bind_b2Vec2_IsValid_0=function(){return b.asm._emscripten_bind_b2Vec2_IsValid_0.apply(null,arguments)},bp=b._emscripten_bind_b2PrismaticJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_bodyA_1.apply(null,arguments)},cp=b._emscripten_bind_b2World_GetWarmStarting_0=function(){return b.asm._emscripten_bind_b2World_GetWarmStarting_0.apply(null,arguments)},dp=b._emscripten_bind_b2RevoluteJointDef_set_enableLimit_1=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_enableLimit_1.apply(null,
arguments)},ep=b._emscripten_bind_b2WeldJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2WeldJointDef___destroy___0.apply(null,arguments)},fp=b._emscripten_bind_b2Mat22_Solve_1=function(){return b.asm._emscripten_bind_b2Mat22_Solve_1.apply(null,arguments)},gp=b._emscripten_bind_b2Color_get_g_0=function(){return b.asm._emscripten_bind_b2Color_get_g_0.apply(null,arguments)},hp=b._emscripten_bind_VoidPtr___destroy___0=function(){return b.asm._emscripten_bind_VoidPtr___destroy___0.apply(null,
arguments)},ip=b._emscripten_bind_b2RopeJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetNext_0.apply(null,arguments)},jp=b._emscripten_bind_b2EdgeShape_get_m_type_0=function(){return b.asm._emscripten_bind_b2EdgeShape_get_m_type_0.apply(null,arguments)},kp=b._emscripten_bind_b2PolygonShape_GetChildCount_0=function(){return b.asm._emscripten_bind_b2PolygonShape_GetChildCount_0.apply(null,arguments)},lp=b._emscripten_bind_b2GearJointDef_get_ratio_0=function(){return b.asm._emscripten_bind_b2GearJointDef_get_ratio_0.apply(null,
arguments)},mp=b._emscripten_bind_b2Mat33_Solve33_1=function(){return b.asm._emscripten_bind_b2Mat33_Solve33_1.apply(null,arguments)},np=b._emscripten_bind_b2WeldJointDef_set_userData_1=function(){return b.asm._emscripten_bind_b2WeldJointDef_set_userData_1.apply(null,arguments)},op=b._emscripten_bind_b2PrismaticJoint_GetLocalAnchorB_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetLocalAnchorB_0.apply(null,arguments)},pp=b._emscripten_bind_b2RevoluteJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef___destroy___0.apply(null,
arguments)},qp=b._emscripten_bind_b2MotorJointDef_get_correctionFactor_0=function(){return b.asm._emscripten_bind_b2MotorJointDef_get_correctionFactor_0.apply(null,arguments)},rp=b._emscripten_bind_b2ContactFeature_get_typeB_0=function(){return b.asm._emscripten_bind_b2ContactFeature_get_typeB_0.apply(null,arguments)},sp=b._emscripten_bind_b2ContactID_get_key_0=function(){return b.asm._emscripten_bind_b2ContactID_get_key_0.apply(null,arguments)},tp=b._emscripten_bind_b2MotorJoint_GetReactionForce_1=
function(){return b.asm._emscripten_bind_b2MotorJoint_GetReactionForce_1.apply(null,arguments)},up=b._emscripten_bind_b2Rot_GetAngle_0=function(){return b.asm._emscripten_bind_b2Rot_GetAngle_0.apply(null,arguments)},vp=b._emscripten_bind_b2World_SetAllowSleeping_1=function(){return b.asm._emscripten_bind_b2World_SetAllowSleeping_1.apply(null,arguments)},wp=b._emscripten_bind_b2RopeJoint_GetType_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetType_0.apply(null,arguments)},xp=b._emscripten_bind_b2MotorJoint_SetAngularOffset_1=
function(){return b.asm._emscripten_bind_b2MotorJoint_SetAngularOffset_1.apply(null,arguments)},yp=b._emscripten_bind_b2MotorJoint_GetLinearOffset_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetLinearOffset_0.apply(null,arguments)},zp=b._emscripten_bind_b2FrictionJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetCollideConnected_0.apply(null,arguments)},Ap=b._emscripten_bind_b2WheelJointDef_set_motorSpeed_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_motorSpeed_1.apply(null,
arguments)},Bp=b._emscripten_bind_b2MotorJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetAnchorA_0.apply(null,arguments)},Cp=b._emscripten_bind_b2Fixture_GetDensity_0=function(){return b.asm._emscripten_bind_b2Fixture_GetDensity_0.apply(null,arguments)},Dp=b._emscripten_bind_b2MouseJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2MouseJointDef_get_type_0.apply(null,arguments)},Ep=b._emscripten_bind_b2Vec2_Set_2=function(){return b.asm._emscripten_bind_b2Vec2_Set_2.apply(null,
arguments)},Fp=b._emscripten_bind_b2WeldJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2WeldJointDef_get_type_0.apply(null,arguments)},Gp=b._emscripten_bind_b2MouseJointDef_b2MouseJointDef_0=function(){return b.asm._emscripten_bind_b2MouseJointDef_b2MouseJointDef_0.apply(null,arguments)},Hp=b._emscripten_bind_b2Rot_get_s_0=function(){return b.asm._emscripten_bind_b2Rot_get_s_0.apply(null,arguments)},Ip=b._emscripten_bind_b2FrictionJoint_SetMaxTorque_1=function(){return b.asm._emscripten_bind_b2FrictionJoint_SetMaxTorque_1.apply(null,
arguments)},Jp=b._emscripten_bind_b2MouseJointDef_get_frequencyHz_0=function(){return b.asm._emscripten_bind_b2MouseJointDef_get_frequencyHz_0.apply(null,arguments)},Kp=b._emscripten_bind_b2FrictionJoint_SetUserData_1=function(){return b.asm._emscripten_bind_b2FrictionJoint_SetUserData_1.apply(null,arguments)},Lp=b._emscripten_bind_b2RayCastInput_get_p1_0=function(){return b.asm._emscripten_bind_b2RayCastInput_get_p1_0.apply(null,arguments)},Mp=b._emscripten_bind_b2DistanceJointDef_get_collideConnected_0=
function(){return b.asm._emscripten_bind_b2DistanceJointDef_get_collideConnected_0.apply(null,arguments)},Np=b._emscripten_bind_b2RevoluteJointDef_set_referenceAngle_1=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_referenceAngle_1.apply(null,arguments)},Op=b._emscripten_bind_b2ContactFeature___destroy___0=function(){return b.asm._emscripten_bind_b2ContactFeature___destroy___0.apply(null,arguments)},Pp=b._emscripten_bind_b2Color___destroy___0=function(){return b.asm._emscripten_bind_b2Color___destroy___0.apply(null,
arguments)},Qp=b._emscripten_bind_b2DistanceJointDef_set_bodyB_1=function(){return b.asm._emscripten_bind_b2DistanceJointDef_set_bodyB_1.apply(null,arguments)},Rp=b._emscripten_bind_b2ChainShape_get_m_hasPrevVertex_0=function(){return b.asm._emscripten_bind_b2ChainShape_get_m_hasPrevVertex_0.apply(null,arguments)},Sp=b._emscripten_bind_b2PulleyJointDef_b2PulleyJointDef_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_b2PulleyJointDef_0.apply(null,arguments)},Tp=b._emscripten_bind_b2RevoluteJoint_GetType_0=
function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetType_0.apply(null,arguments)},Up=b._emscripten_bind_b2MassData_b2MassData_0=function(){return b.asm._emscripten_bind_b2MassData_b2MassData_0.apply(null,arguments)},Vp=b._emscripten_bind_b2Vec3_set_y_1=function(){return b.asm._emscripten_bind_b2Vec3_set_y_1.apply(null,arguments)},Wp=b._emscripten_bind_b2BodyDef_set_angularDamping_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_angularDamping_1.apply(null,arguments)},Xp=b._emscripten_bind_b2AABB_Combine_1=
function(){return b.asm._emscripten_bind_b2AABB_Combine_1.apply(null,arguments)},Yp=b._emscripten_bind_b2WheelJointDef_set_bodyB_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_bodyB_1.apply(null,arguments)},Zp=b._emscripten_bind_b2PrismaticJoint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetBodyA_0.apply(null,arguments)},$p=b._emscripten_bind_b2PrismaticJoint_GetMaxMotorForce_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetMaxMotorForce_0.apply(null,
arguments)},aq=b._emscripten_bind_b2RevoluteJointDef_get_upperAngle_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_upperAngle_0.apply(null,arguments)},bq=b._emscripten_bind_b2Body_IsSleepingAllowed_0=function(){return b.asm._emscripten_bind_b2Body_IsSleepingAllowed_0.apply(null,arguments)},cq=b._emscripten_bind_b2MotorJoint_GetCorrectionFactor_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetCorrectionFactor_0.apply(null,arguments)},dq=b._emscripten_bind_b2Profile_get_solve_0=
function(){return b.asm._emscripten_bind_b2Profile_get_solve_0.apply(null,arguments)},eq=b._emscripten_bind_JSDestructionListener_SayGoodbyeFixture_1=function(){return b.asm._emscripten_bind_JSDestructionListener_SayGoodbyeFixture_1.apply(null,arguments)},fq=b._emscripten_bind_b2PolygonShape_GetVertexCount_0=function(){return b.asm._emscripten_bind_b2PolygonShape_GetVertexCount_0.apply(null,arguments)},gq=b._emscripten_bind_b2Rot_get_c_0=function(){return b.asm._emscripten_bind_b2Rot_get_c_0.apply(null,
arguments)},hq=b._emscripten_bind_b2AABB_set_lowerBound_1=function(){return b.asm._emscripten_bind_b2AABB_set_lowerBound_1.apply(null,arguments)},iq=b._emscripten_bind_b2Fixture_SetFilterData_1=function(){return b.asm._emscripten_bind_b2Fixture_SetFilterData_1.apply(null,arguments)},jq=b._emscripten_bind_b2MouseJoint_SetMaxForce_1=function(){return b.asm._emscripten_bind_b2MouseJoint_SetMaxForce_1.apply(null,arguments)},kq=b._emscripten_bind_b2WheelJoint_IsMotorEnabled_0=function(){return b.asm._emscripten_bind_b2WheelJoint_IsMotorEnabled_0.apply(null,
arguments)},lq=b._emscripten_bind_b2JointDef_set_userData_1=function(){return b.asm._emscripten_bind_b2JointDef_set_userData_1.apply(null,arguments)},mq=b._emscripten_bind_b2ManifoldPoint_get_tangentImpulse_0=function(){return b.asm._emscripten_bind_b2ManifoldPoint_get_tangentImpulse_0.apply(null,arguments)},nq=b._emscripten_bind_b2RevoluteJointDef_get_maxMotorTorque_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_maxMotorTorque_0.apply(null,arguments)},oq=b._emscripten_bind_b2WeldJointDef_get_dampingRatio_0=
function(){return b.asm._emscripten_bind_b2WeldJointDef_get_dampingRatio_0.apply(null,arguments)},pq=b._emscripten_bind_b2Rot_SetIdentity_0=function(){return b.asm._emscripten_bind_b2Rot_SetIdentity_0.apply(null,arguments)},qq=b._emscripten_bind_b2EdgeShape_b2EdgeShape_0=function(){return b.asm._emscripten_bind_b2EdgeShape_b2EdgeShape_0.apply(null,arguments)},rq=b._emscripten_bind_b2FrictionJoint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetReactionForce_1.apply(null,
arguments)},sq=b._emscripten_bind_b2MouseJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetUserData_0.apply(null,arguments)},tq=b._emscripten_bind_b2DistanceJointDef_set_type_1=function(){return b.asm._emscripten_bind_b2DistanceJointDef_set_type_1.apply(null,arguments)},uq=b._emscripten_bind_b2WeldJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetAnchorA_0.apply(null,arguments)},vq=b._emscripten_bind_b2WeldJoint___destroy___0=function(){return b.asm._emscripten_bind_b2WeldJoint___destroy___0.apply(null,
arguments)},wq=b._emscripten_bind_b2Manifold_b2Manifold_0=function(){return b.asm._emscripten_bind_b2Manifold_b2Manifold_0.apply(null,arguments)},xq=b._emscripten_bind_JSContactListener_PostSolve_2=function(){return b.asm._emscripten_bind_JSContactListener_PostSolve_2.apply(null,arguments)},yq=b._emscripten_bind_b2PulleyJoint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetBodyA_0.apply(null,arguments)},zq=b._emscripten_bind_b2RopeJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2RopeJointDef_get_type_0.apply(null,
arguments)},Aq=b._emscripten_bind_b2CircleShape_ComputeMass_2=function(){return b.asm._emscripten_bind_b2CircleShape_ComputeMass_2.apply(null,arguments)},Bq=b._emscripten_bind_b2DistanceJointDef_get_localAnchorB_0=function(){return b.asm._emscripten_bind_b2DistanceJointDef_get_localAnchorB_0.apply(null,arguments)},Cq=b._emscripten_bind_b2GearJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2GearJointDef___destroy___0.apply(null,arguments)},Dq=b._emscripten_bind_b2PulleyJointDef_set_localAnchorA_1=
function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_localAnchorA_1.apply(null,arguments)},Eq=b._emscripten_enum_b2BodyType_b2_dynamicBody=function(){return b.asm._emscripten_enum_b2BodyType_b2_dynamicBody.apply(null,arguments)},Fq=b._emscripten_bind_b2CircleShape_TestPoint_2=function(){return b.asm._emscripten_bind_b2CircleShape_TestPoint_2.apply(null,arguments)},Gq=b._emscripten_bind_b2MotorJointDef_get_maxTorque_0=function(){return b.asm._emscripten_bind_b2MotorJointDef_get_maxTorque_0.apply(null,
arguments)},Hq=b._emscripten_bind_b2Body_GetLinearVelocityFromLocalPoint_1=function(){return b.asm._emscripten_bind_b2Body_GetLinearVelocityFromLocalPoint_1.apply(null,arguments)},Iq=b._emscripten_bind_b2FrictionJointDef_set_bodyB_1=function(){return b.asm._emscripten_bind_b2FrictionJointDef_set_bodyB_1.apply(null,arguments)},Jq=b._emscripten_bind_b2MouseJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetAnchorB_0.apply(null,arguments)},Kq=b._emscripten_bind_b2RopeJointDef_get_localAnchorB_0=
function(){return b.asm._emscripten_bind_b2RopeJointDef_get_localAnchorB_0.apply(null,arguments)},Lq=b._emscripten_bind_b2GearJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2GearJoint_GetBodyB_0.apply(null,arguments)},Mq=b._emscripten_bind_b2ChainShape_Clear_0=function(){return b.asm._emscripten_bind_b2ChainShape_Clear_0.apply(null,arguments)},Nq=b._emscripten_bind_b2CircleShape___destroy___0=function(){return b.asm._emscripten_bind_b2CircleShape___destroy___0.apply(null,arguments)},Oq=
b._emscripten_bind_b2MotorJoint_GetType_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetType_0.apply(null,arguments)},Pq=b._emscripten_bind_b2World_GetContactCount_0=function(){return b.asm._emscripten_bind_b2World_GetContactCount_0.apply(null,arguments)},Qq=b._emscripten_bind_b2Contact_SetRestitution_1=function(){return b.asm._emscripten_bind_b2Contact_SetRestitution_1.apply(null,arguments)},Rq=b._emscripten_bind_b2BodyDef_get_angularDamping_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_angularDamping_0.apply(null,
arguments)},Sq=b._emscripten_bind_b2EdgeShape_get_m_vertex3_0=function(){return b.asm._emscripten_bind_b2EdgeShape_get_m_vertex3_0.apply(null,arguments)},Tq=b._emscripten_bind_b2MassData_set_center_1=function(){return b.asm._emscripten_bind_b2MassData_set_center_1.apply(null,arguments)},Uq=b._emscripten_bind_b2Transform_SetIdentity_0=function(){return b.asm._emscripten_bind_b2Transform_SetIdentity_0.apply(null,arguments)},Vq=b._emscripten_bind_b2GearJointDef_set_joint1_1=function(){return b.asm._emscripten_bind_b2GearJointDef_set_joint1_1.apply(null,
arguments)},Wq=b._emscripten_bind_b2EdgeShape_set_m_vertex2_1=function(){return b.asm._emscripten_bind_b2EdgeShape_set_m_vertex2_1.apply(null,arguments)},Xq=b._emscripten_bind_b2Contact_SetFriction_1=function(){return b.asm._emscripten_bind_b2Contact_SetFriction_1.apply(null,arguments)},Yq=b._emscripten_bind_b2MouseJointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2MouseJointDef_set_collideConnected_1.apply(null,arguments)},Zq=b._emscripten_bind_b2ContactFeature_set_indexB_1=
function(){return b.asm._emscripten_bind_b2ContactFeature_set_indexB_1.apply(null,arguments)},$q=b._emscripten_bind_b2Body_GetLinearVelocityFromWorldPoint_1=function(){return b.asm._emscripten_bind_b2Body_GetLinearVelocityFromWorldPoint_1.apply(null,arguments)},ar=b._emscripten_bind_b2WeldJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetCollideConnected_0.apply(null,arguments)},br=b._emscripten_bind_b2Mat22_GetInverse_0=function(){return b.asm._emscripten_bind_b2Mat22_GetInverse_0.apply(null,
arguments)},cr=b._emscripten_bind_b2WheelJointDef_set_frequencyHz_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_frequencyHz_1.apply(null,arguments)},dr=b._emscripten_bind_b2World_GetSubStepping_0=function(){return b.asm._emscripten_bind_b2World_GetSubStepping_0.apply(null,arguments)},er=b._emscripten_bind_b2Rot_GetYAxis_0=function(){return b.asm._emscripten_bind_b2Rot_GetYAxis_0.apply(null,arguments)};
b._emscripten_get_global_libc=function(){return b.asm._emscripten_get_global_libc.apply(null,arguments)};
var fr=b._emscripten_bind_b2WheelJointDef_get_localAxisA_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_localAxisA_0.apply(null,arguments)},gr=b._emscripten_bind_b2RopeJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetBodyB_0.apply(null,arguments)},hr=b._emscripten_bind_b2EdgeShape_GetType_0=function(){return b.asm._emscripten_bind_b2EdgeShape_GetType_0.apply(null,arguments)},ir=b._emscripten_bind_b2Mat22_set_ex_1=function(){return b.asm._emscripten_bind_b2Mat22_set_ex_1.apply(null,
arguments)},jr=b._emscripten_bind_b2ManifoldPoint___destroy___0=function(){return b.asm._emscripten_bind_b2ManifoldPoint___destroy___0.apply(null,arguments)},kr=b._emscripten_enum_b2JointType_e_prismaticJoint=function(){return b.asm._emscripten_enum_b2JointType_e_prismaticJoint.apply(null,arguments)},lr=b._emscripten_bind_b2WeldJointDef_get_referenceAngle_0=function(){return b.asm._emscripten_bind_b2WeldJointDef_get_referenceAngle_0.apply(null,arguments)},mr=b._emscripten_bind_b2Vec2_Length_0=function(){return b.asm._emscripten_bind_b2Vec2_Length_0.apply(null,
arguments)},nr=b._emscripten_bind_b2Vec2_SetZero_0=function(){return b.asm._emscripten_bind_b2Vec2_SetZero_0.apply(null,arguments)},or=b._emscripten_bind_b2RopeJoint___destroy___0=function(){return b.asm._emscripten_bind_b2RopeJoint___destroy___0.apply(null,arguments)},pr=b._emscripten_bind_b2World_DestroyJoint_1=function(){return b.asm._emscripten_bind_b2World_DestroyJoint_1.apply(null,arguments)},qr=b._emscripten_bind_b2JointDef_set_bodyB_1=function(){return b.asm._emscripten_bind_b2JointDef_set_bodyB_1.apply(null,
arguments)},rr=b._emscripten_bind_b2Mat22_Set_2=function(){return b.asm._emscripten_bind_b2Mat22_Set_2.apply(null,arguments)},sr=b._emscripten_bind_b2JointEdge_set_next_1=function(){return b.asm._emscripten_bind_b2JointEdge_set_next_1.apply(null,arguments)},tr=b._emscripten_bind_b2WeldJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetAnchorB_0.apply(null,arguments)},ur=b._emscripten_enum_b2DrawFlag_e_aabbBit=function(){return b.asm._emscripten_enum_b2DrawFlag_e_aabbBit.apply(null,
arguments)},vr=b._emscripten_bind_b2EdgeShape_ComputeAABB_3=function(){return b.asm._emscripten_bind_b2EdgeShape_ComputeAABB_3.apply(null,arguments)},wr=b._emscripten_bind_b2PolygonShape_set_m_centroid_1=function(){return b.asm._emscripten_bind_b2PolygonShape_set_m_centroid_1.apply(null,arguments)},xr=b._emscripten_bind_b2WheelJointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_collideConnected_1.apply(null,arguments)},yr=b._emscripten_bind_b2World_GetJointList_0=
function(){return b.asm._emscripten_bind_b2World_GetJointList_0.apply(null,arguments)},zr=b._emscripten_bind_b2MotorJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2MotorJointDef_get_type_0.apply(null,arguments)},Ar=b._emscripten_bind_b2RopeJoint_GetLocalAnchorA_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetLocalAnchorA_0.apply(null,arguments)},Br=b._emscripten_bind_b2BodyDef_set_linearDamping_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_linearDamping_1.apply(null,
arguments)},Cr=b._emscripten_bind_b2FrictionJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetUserData_0.apply(null,arguments)},Dr=b._emscripten_bind_b2Shape_TestPoint_2=function(){return b.asm._emscripten_bind_b2Shape_TestPoint_2.apply(null,arguments)},Er=b._emscripten_bind_b2Manifold_set_localNormal_1=function(){return b.asm._emscripten_bind_b2Manifold_set_localNormal_1.apply(null,arguments)},Fr=b._emscripten_bind_b2JointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2JointDef_get_bodyA_0.apply(null,
arguments)},Gr=b._emscripten_bind_b2Body_GetLinearDamping_0=function(){return b.asm._emscripten_bind_b2Body_GetLinearDamping_0.apply(null,arguments)},Hr=b._emscripten_bind_b2WeldJointDef_set_frequencyHz_1=function(){return b.asm._emscripten_bind_b2WeldJointDef_set_frequencyHz_1.apply(null,arguments)},Ir=b._emscripten_bind_b2BodyDef_set_userData_1=function(){return b.asm._emscripten_bind_b2BodyDef_set_userData_1.apply(null,arguments)},Jr=b._emscripten_bind_b2PrismaticJointDef_set_enableMotor_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_enableMotor_1.apply(null,
arguments)},Kr=b._emscripten_bind_b2Vec2_Skew_0=function(){return b.asm._emscripten_bind_b2Vec2_Skew_0.apply(null,arguments)},Lr=b._emscripten_bind_b2MouseJoint_GetDampingRatio_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetDampingRatio_0.apply(null,arguments)},Mr=b._emscripten_bind_b2RevoluteJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetAnchorA_0.apply(null,arguments)},Nr=b._emscripten_bind_b2ContactFeature_set_typeB_1=function(){return b.asm._emscripten_bind_b2ContactFeature_set_typeB_1.apply(null,
arguments)},Or=b._emscripten_bind_b2WheelJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetAnchorA_0.apply(null,arguments)},Pr=b._emscripten_bind_b2MotorJoint_GetMaxTorque_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetMaxTorque_0.apply(null,arguments)};b.setThrew=function(){return b.asm.setThrew.apply(null,arguments)};
var Qr=b._emscripten_bind_b2PrismaticJointDef_set_userData_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_userData_1.apply(null,arguments)},Rr=b._emscripten_bind_b2FrictionJointDef_set_type_1=function(){return b.asm._emscripten_bind_b2FrictionJointDef_set_type_1.apply(null,arguments)},Sr=b._emscripten_bind_b2FrictionJointDef_Initialize_3=function(){return b.asm._emscripten_bind_b2FrictionJointDef_Initialize_3.apply(null,arguments)},Nb=b._sbrk=function(){return b.asm._sbrk.apply(null,
arguments)},Tr=b._emscripten_bind_b2FrictionJointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2FrictionJointDef_get_collideConnected_0.apply(null,arguments)},Ib=b._memcpy=function(){return b.asm._memcpy.apply(null,arguments)},Ur=b._emscripten_bind_b2FrictionJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetAnchorA_0.apply(null,arguments)},Vr=b._emscripten_enum_b2DrawFlag_e_pairBit=function(){return b.asm._emscripten_enum_b2DrawFlag_e_pairBit.apply(null,
arguments)},Wr=b._emscripten_bind_b2MassData_get_I_0=function(){return b.asm._emscripten_bind_b2MassData_get_I_0.apply(null,arguments)},Xr=b._emscripten_bind_b2WheelJointDef_get_motorSpeed_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_motorSpeed_0.apply(null,arguments)},Yr=b._emscripten_bind_b2Filter_set_maskBits_1=function(){return b.asm._emscripten_bind_b2Filter_set_maskBits_1.apply(null,arguments)},Zr=b._emscripten_bind_b2WheelJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetCollideConnected_0.apply(null,
arguments)},$r=b._emscripten_bind_b2EdgeShape_get_m_radius_0=function(){return b.asm._emscripten_bind_b2EdgeShape_get_m_radius_0.apply(null,arguments)},as=b._emscripten_bind_b2World_GetTreeHeight_0=function(){return b.asm._emscripten_bind_b2World_GetTreeHeight_0.apply(null,arguments)},bs=b._emscripten_bind_b2Mat22_b2Mat22_2=function(){return b.asm._emscripten_bind_b2Mat22_b2Mat22_2.apply(null,arguments)},cs=b._emscripten_bind_b2PrismaticJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetNext_0.apply(null,
arguments)},ds=b._emscripten_bind_b2Mat22_b2Mat22_0=function(){return b.asm._emscripten_bind_b2Mat22_b2Mat22_0.apply(null,arguments)},es=b._emscripten_bind_b2PrismaticJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_bodyA_0.apply(null,arguments)},gs=b._emscripten_bind_b2RopeJointDef_set_localAnchorA_1=function(){return b.asm._emscripten_bind_b2RopeJointDef_set_localAnchorA_1.apply(null,arguments)},hs=b._emscripten_bind_b2ChainShape_set_m_hasNextVertex_1=function(){return b.asm._emscripten_bind_b2ChainShape_set_m_hasNextVertex_1.apply(null,
arguments)},is=b._emscripten_bind_b2Mat22_set_ey_1=function(){return b.asm._emscripten_bind_b2Mat22_set_ey_1.apply(null,arguments)},js=b._emscripten_bind_b2MotorJointDef_set_angularOffset_1=function(){return b.asm._emscripten_bind_b2MotorJointDef_set_angularOffset_1.apply(null,arguments)},ks=b._emscripten_bind_b2CircleShape_get_m_type_0=function(){return b.asm._emscripten_bind_b2CircleShape_get_m_type_0.apply(null,arguments)},ls=b._emscripten_bind_b2Body_GetType_0=function(){return b.asm._emscripten_bind_b2Body_GetType_0.apply(null,
arguments)},ms=b._emscripten_bind_b2ContactEdge_b2ContactEdge_0=function(){return b.asm._emscripten_bind_b2ContactEdge_b2ContactEdge_0.apply(null,arguments)},ns=b._emscripten_bind_b2BodyDef___destroy___0=function(){return b.asm._emscripten_bind_b2BodyDef___destroy___0.apply(null,arguments)},ps=b._emscripten_bind_b2FrictionJointDef_set_maxTorque_1=function(){return b.asm._emscripten_bind_b2FrictionJointDef_set_maxTorque_1.apply(null,arguments)},Qa=b._free=function(){return b.asm._free.apply(null,arguments)},
qs=b._emscripten_bind_b2PulleyJointDef_set_groundAnchorB_1=function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_groundAnchorB_1.apply(null,arguments)},rs=b._emscripten_bind_b2RevoluteJointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_collideConnected_0.apply(null,arguments)},ss=b._emscripten_bind_b2DistanceJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2DistanceJointDef_set_bodyA_1.apply(null,arguments)};
b.runPostSets=function(){return b.asm.runPostSets.apply(null,arguments)};
var ts=b._emscripten_bind_b2RevoluteJoint_SetLimits_2=function(){return b.asm._emscripten_bind_b2RevoluteJoint_SetLimits_2.apply(null,arguments)},us=b._emscripten_bind_b2WeldJointDef_set_type_1=function(){return b.asm._emscripten_bind_b2WeldJointDef_set_type_1.apply(null,arguments)},vs=b._emscripten_bind_b2MotorJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2MotorJointDef___destroy___0.apply(null,arguments)},xs=b._emscripten_bind_b2FrictionJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetNext_0.apply(null,
arguments)},ys=b._emscripten_bind_b2Shape_set_m_type_1=function(){return b.asm._emscripten_bind_b2Shape_set_m_type_1.apply(null,arguments)},zs=b._emscripten_bind_b2WheelJoint_GetJointTranslation_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetJointTranslation_0.apply(null,arguments)},As=b._emscripten_bind_b2WheelJoint_GetMotorTorque_1=function(){return b.asm._emscripten_bind_b2WheelJoint_GetMotorTorque_1.apply(null,arguments)},Bs=b._emscripten_bind_b2RopeJoint_SetUserData_1=function(){return b.asm._emscripten_bind_b2RopeJoint_SetUserData_1.apply(null,
arguments)},Cs=b._emscripten_bind_b2RopeJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2RopeJointDef___destroy___0.apply(null,arguments)},Ds=b._emscripten_bind_b2WheelJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2WheelJoint_IsActive_0.apply(null,arguments)},Es=b._emscripten_bind_b2PrismaticJointDef_get_enableMotor_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_enableMotor_0.apply(null,arguments)},Fs=b._emscripten_bind_b2MotorJointDef_set_bodyB_1=
function(){return b.asm._emscripten_bind_b2MotorJointDef_set_bodyB_1.apply(null,arguments)},Gs=b._emscripten_bind_JSDestructionListener___destroy___0=function(){return b.asm._emscripten_bind_JSDestructionListener___destroy___0.apply(null,arguments)},Hs=b._emscripten_bind_b2Transform_b2Transform_2=function(){return b.asm._emscripten_bind_b2Transform_b2Transform_2.apply(null,arguments)},Is=b._emscripten_bind_b2WeldJoint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2WeldJoint_GetReactionForce_1.apply(null,
arguments)},Js=b._emscripten_bind_b2ChainShape_RayCast_4=function(){return b.asm._emscripten_bind_b2ChainShape_RayCast_4.apply(null,arguments)},Ks=b._emscripten_bind_b2Vec2_set_y_1=function(){return b.asm._emscripten_bind_b2Vec2_set_y_1.apply(null,arguments)},Ls=b._emscripten_bind_b2PrismaticJoint_SetMotorSpeed_1=function(){return b.asm._emscripten_bind_b2PrismaticJoint_SetMotorSpeed_1.apply(null,arguments)},Ms=b._emscripten_bind_b2ContactID_get_cf_0=function(){return b.asm._emscripten_bind_b2ContactID_get_cf_0.apply(null,
arguments)},Ns=b._emscripten_bind_b2DistanceJointDef_Initialize_4=function(){return b.asm._emscripten_bind_b2DistanceJointDef_Initialize_4.apply(null,arguments)},Os=b._emscripten_bind_b2ChainShape_get_m_radius_0=function(){return b.asm._emscripten_bind_b2ChainShape_get_m_radius_0.apply(null,arguments)},Ps=b._emscripten_bind_b2WeldJointDef_set_localAnchorB_1=function(){return b.asm._emscripten_bind_b2WeldJointDef_set_localAnchorB_1.apply(null,arguments)},Qs=b._emscripten_bind_b2ChainShape_set_m_radius_1=
function(){return b.asm._emscripten_bind_b2ChainShape_set_m_radius_1.apply(null,arguments)},Rs=b._emscripten_bind_b2DistanceJoint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetReactionTorque_1.apply(null,arguments)},Ss=b._emscripten_bind_b2World_Dump_0=function(){return b.asm._emscripten_bind_b2World_Dump_0.apply(null,arguments)},Ts=b._emscripten_bind_b2RevoluteJoint_GetLocalAnchorB_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetLocalAnchorB_0.apply(null,
arguments)},Us=b._emscripten_bind_JSContactFilter_JSContactFilter_0=function(){return b.asm._emscripten_bind_JSContactFilter_JSContactFilter_0.apply(null,arguments)},Vs=b._emscripten_bind_b2Profile_set_solve_1=function(){return b.asm._emscripten_bind_b2Profile_set_solve_1.apply(null,arguments)},Ws=b._emscripten_bind_b2FixtureDef_set_density_1=function(){return b.asm._emscripten_bind_b2FixtureDef_set_density_1.apply(null,arguments)},Xs=b._emscripten_bind_b2WeldJoint_GetDampingRatio_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetDampingRatio_0.apply(null,
arguments)},Ys=b._emscripten_bind_b2Color_get_b_0=function(){return b.asm._emscripten_bind_b2Color_get_b_0.apply(null,arguments)},Zs=b._emscripten_bind_b2MouseJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2MouseJointDef_get_userData_0.apply(null,arguments)},$s=b._emscripten_bind_b2CircleShape_ComputeAABB_3=function(){return b.asm._emscripten_bind_b2CircleShape_ComputeAABB_3.apply(null,arguments)},at=b._emscripten_bind_b2RopeJoint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2RopeJoint_GetReactionForce_1.apply(null,
arguments)},bt=b._emscripten_bind_b2PrismaticJointDef_get_enableLimit_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_enableLimit_0.apply(null,arguments)},ct=b._emscripten_bind_b2ManifoldPoint_set_localPoint_1=function(){return b.asm._emscripten_bind_b2ManifoldPoint_set_localPoint_1.apply(null,arguments)},dt=b._emscripten_bind_b2Fixture_GetFilterData_0=function(){return b.asm._emscripten_bind_b2Fixture_GetFilterData_0.apply(null,arguments)},et=b._emscripten_bind_b2World_GetBodyList_0=
function(){return b.asm._emscripten_bind_b2World_GetBodyList_0.apply(null,arguments)},ft=b._emscripten_bind_b2Body_GetJointList_0=function(){return b.asm._emscripten_bind_b2Body_GetJointList_0.apply(null,arguments)},gt=b._emscripten_bind_b2Joint_GetNext_0=function(){return b.asm._emscripten_bind_b2Joint_GetNext_0.apply(null,arguments)},ht=b._emscripten_bind_b2Joint_GetType_0=function(){return b.asm._emscripten_bind_b2Joint_GetType_0.apply(null,arguments)},it=b._emscripten_bind_b2World_RayCast_3=function(){return b.asm._emscripten_bind_b2World_RayCast_3.apply(null,
arguments)},jt=b._emscripten_bind_b2MassData_set_I_1=function(){return b.asm._emscripten_bind_b2MassData_set_I_1.apply(null,arguments)},kt=b._emscripten_bind_b2MassData___destroy___0=function(){return b.asm._emscripten_bind_b2MassData___destroy___0.apply(null,arguments)},lt=b._emscripten_bind_b2Profile_get_collide_0=function(){return b.asm._emscripten_bind_b2Profile_get_collide_0.apply(null,arguments)},mt=b._emscripten_bind_b2Color_b2Color_3=function(){return b.asm._emscripten_bind_b2Color_b2Color_3.apply(null,
arguments)},nt=b._emscripten_bind_b2Color_b2Color_0=function(){return b.asm._emscripten_bind_b2Color_b2Color_0.apply(null,arguments)},ot=b._emscripten_bind_b2WheelJointDef_get_frequencyHz_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_frequencyHz_0.apply(null,arguments)},pt=b._emscripten_bind_b2WeldJointDef_Initialize_3=function(){return b.asm._emscripten_bind_b2WeldJointDef_Initialize_3.apply(null,arguments)},qt=b._emscripten_bind_b2RevoluteJoint_GetMotorTorque_1=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetMotorTorque_1.apply(null,
arguments)},rt=b._emscripten_enum_b2JointType_e_gearJoint=function(){return b.asm._emscripten_enum_b2JointType_e_gearJoint.apply(null,arguments)},st=b._emscripten_bind_b2FixtureDef_get_friction_0=function(){return b.asm._emscripten_bind_b2FixtureDef_get_friction_0.apply(null,arguments)},tt=b._emscripten_bind_b2PrismaticJointDef_set_localAnchorA_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_localAnchorA_1.apply(null,arguments)},ut=b._emscripten_bind_b2Contact_GetManifold_0=function(){return b.asm._emscripten_bind_b2Contact_GetManifold_0.apply(null,
arguments)},vt=b._emscripten_bind_b2QueryCallback___destroy___0=function(){return b.asm._emscripten_bind_b2QueryCallback___destroy___0.apply(null,arguments)},wt=b._emscripten_bind_b2WeldJointDef_get_localAnchorA_0=function(){return b.asm._emscripten_bind_b2WeldJointDef_get_localAnchorA_0.apply(null,arguments)},xt=b._emscripten_bind_b2MouseJoint_SetUserData_1=function(){return b.asm._emscripten_bind_b2MouseJoint_SetUserData_1.apply(null,arguments)},yt=b._emscripten_bind_b2MotorJointDef_set_correctionFactor_1=
function(){return b.asm._emscripten_bind_b2MotorJointDef_set_correctionFactor_1.apply(null,arguments)},zt=b._emscripten_bind_b2ChainShape_GetChildEdge_2=function(){return b.asm._emscripten_bind_b2ChainShape_GetChildEdge_2.apply(null,arguments)},At=b._emscripten_enum_b2JointType_e_mouseJoint=function(){return b.asm._emscripten_enum_b2JointType_e_mouseJoint.apply(null,arguments)},Bt=b._emscripten_bind_b2MotorJointDef_get_angularOffset_0=function(){return b.asm._emscripten_bind_b2MotorJointDef_get_angularOffset_0.apply(null,
arguments)},Ct=b._emscripten_bind_b2WheelJoint_SetUserData_1=function(){return b.asm._emscripten_bind_b2WheelJoint_SetUserData_1.apply(null,arguments)},Dt=b._emscripten_bind_b2Body_ApplyForce_3=function(){return b.asm._emscripten_bind_b2Body_ApplyForce_3.apply(null,arguments)},Et=b._emscripten_bind_b2ChainShape_set_m_count_1=function(){return b.asm._emscripten_bind_b2ChainShape_set_m_count_1.apply(null,arguments)},Ft=b._emscripten_bind_b2DistanceJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2DistanceJoint_GetCollideConnected_0.apply(null,
arguments)},Gt=b._emscripten_bind_b2RevoluteJoint_IsMotorEnabled_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_IsMotorEnabled_0.apply(null,arguments)},Ht=b._emscripten_bind_b2PolygonShape_GetVertex_1=function(){return b.asm._emscripten_bind_b2PolygonShape_GetVertex_1.apply(null,arguments)},It=b._emscripten_bind_b2World_SetGravity_1=function(){return b.asm._emscripten_bind_b2World_SetGravity_1.apply(null,arguments)},Jt=b._emscripten_bind_b2MouseJointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2MouseJointDef_get_collideConnected_0.apply(null,
arguments)},Qb=b._llvm_bswap_i32=function(){return b.asm._llvm_bswap_i32.apply(null,arguments)},Kt=b._emscripten_bind_b2Fixture_SetRestitution_1=function(){return b.asm._emscripten_bind_b2Fixture_SetRestitution_1.apply(null,arguments)},Lt=b._emscripten_bind_b2Body_GetTransform_0=function(){return b.asm._emscripten_bind_b2Body_GetTransform_0.apply(null,arguments)},Mt=b._emscripten_enum_b2ShapeType_e_typeCount=function(){return b.asm._emscripten_enum_b2ShapeType_e_typeCount.apply(null,arguments)},Nt=
b._emscripten_bind_b2Mat33_set_ex_1=function(){return b.asm._emscripten_bind_b2Mat33_set_ex_1.apply(null,arguments)},Ot=b._emscripten_bind_b2PulleyJointDef_get_localAnchorB_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_localAnchorB_0.apply(null,arguments)},Pt=b._emscripten_bind_b2RevoluteJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_get_bodyA_0.apply(null,arguments)},Qt=b._emscripten_bind_b2PrismaticJoint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetBodyB_0.apply(null,
arguments)},Rt=b._emscripten_bind_b2WheelJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_bodyA_1.apply(null,arguments)},St=b._emscripten_bind_b2MotorJointDef_set_maxForce_1=function(){return b.asm._emscripten_bind_b2MotorJointDef_set_maxForce_1.apply(null,arguments)},Tt=b._emscripten_bind_b2BodyDef_get_angle_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_angle_0.apply(null,arguments)},Ut=b._emscripten_bind_b2FixtureDef_get_shape_0=function(){return b.asm._emscripten_bind_b2FixtureDef_get_shape_0.apply(null,
arguments)},Vt=b._emscripten_bind_b2Body_SetAngularVelocity_1=function(){return b.asm._emscripten_bind_b2Body_SetAngularVelocity_1.apply(null,arguments)},Wt=b._emscripten_bind_b2WeldJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2WeldJointDef_get_userData_0.apply(null,arguments)},Xt=b._emscripten_bind_b2FrictionJoint_SetMaxForce_1=function(){return b.asm._emscripten_bind_b2FrictionJoint_SetMaxForce_1.apply(null,arguments)},Yt=b._emscripten_bind_b2Mat33_b2Mat33_3=function(){return b.asm._emscripten_bind_b2Mat33_b2Mat33_3.apply(null,
arguments)},Zt=b._emscripten_bind_b2Vec3_get_y_0=function(){return b.asm._emscripten_bind_b2Vec3_get_y_0.apply(null,arguments)},$t=b._emscripten_bind_b2JointDef_get_type_0=function(){return b.asm._emscripten_bind_b2JointDef_get_type_0.apply(null,arguments)},au=b._emscripten_bind_JSQueryCallback_ReportFixture_1=function(){return b.asm._emscripten_bind_JSQueryCallback_ReportFixture_1.apply(null,arguments)},bu=b._emscripten_bind_b2PulleyJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetCollideConnected_0.apply(null,
arguments)},cu=b._emscripten_bind_b2Body_CreateFixture_1=function(){return b.asm._emscripten_bind_b2Body_CreateFixture_1.apply(null,arguments)},du=b._emscripten_bind_JSDraw_JSDraw_0=function(){return b.asm._emscripten_bind_JSDraw_JSDraw_0.apply(null,arguments)},eu=b._emscripten_bind_b2MouseJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2MouseJoint_GetAnchorA_0.apply(null,arguments)},fu=b._emscripten_bind_b2Transform_get_p_0=function(){return b.asm._emscripten_bind_b2Transform_get_p_0.apply(null,
arguments)},gu=b._emscripten_bind_b2WorldManifold_get_normal_0=function(){return b.asm._emscripten_bind_b2WorldManifold_get_normal_0.apply(null,arguments)},hu=b._emscripten_bind_b2World_GetProfile_0=function(){return b.asm._emscripten_bind_b2World_GetProfile_0.apply(null,arguments)},iu=b._emscripten_bind_b2DistanceJointDef___destroy___0=function(){return b.asm._emscripten_bind_b2DistanceJointDef___destroy___0.apply(null,arguments)},ju=b._emscripten_bind_b2GearJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2GearJointDef_set_bodyA_1.apply(null,
arguments)},ku=b._emscripten_bind_b2JointDef_set_type_1=function(){return b.asm._emscripten_bind_b2JointDef_set_type_1.apply(null,arguments)},lu=b._emscripten_bind_b2ContactEdge_set_contact_1=function(){return b.asm._emscripten_bind_b2ContactEdge_set_contact_1.apply(null,arguments)},mu=b._emscripten_bind_b2MotorJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2MotorJointDef_get_userData_0.apply(null,arguments)},nu=b._emscripten_bind_b2World_GetContactList_0=function(){return b.asm._emscripten_bind_b2World_GetContactList_0.apply(null,
arguments)},ou=b._emscripten_bind_b2Mat33_set_ez_1=function(){return b.asm._emscripten_bind_b2Mat33_set_ez_1.apply(null,arguments)},pu=b._emscripten_bind_b2JointEdge_b2JointEdge_0=function(){return b.asm._emscripten_bind_b2JointEdge_b2JointEdge_0.apply(null,arguments)},qu=b._emscripten_bind_b2FrictionJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2FrictionJointDef_get_bodyA_0.apply(null,arguments)},ru=b._emscripten_bind_b2WheelJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_type_0.apply(null,
arguments)},su=b._emscripten_bind_b2RevoluteJoint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetReactionForce_1.apply(null,arguments)},tu=b._emscripten_bind_b2PulleyJointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_collideConnected_1.apply(null,arguments)},uu=b._emscripten_bind_b2RopeJoint_GetCollideConnected_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetCollideConnected_0.apply(null,arguments)},vu=b._emscripten_bind_b2GearJointDef_set_joint2_1=
function(){return b.asm._emscripten_bind_b2GearJointDef_set_joint2_1.apply(null,arguments)},wu=b._emscripten_bind_b2EdgeShape_set_m_vertex3_1=function(){return b.asm._emscripten_bind_b2EdgeShape_set_m_vertex3_1.apply(null,arguments)},xu=b._emscripten_bind_b2GearJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2GearJoint_GetAnchorB_0.apply(null,arguments)},yu=b._emscripten_bind_b2RopeJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2RopeJoint_IsActive_0.apply(null,arguments)},
zu=b._emscripten_bind_b2Fixture_GetFriction_0=function(){return b.asm._emscripten_bind_b2Fixture_GetFriction_0.apply(null,arguments)},Au=b._emscripten_bind_b2Fixture_GetNext_0=function(){return b.asm._emscripten_bind_b2Fixture_GetNext_0.apply(null,arguments)},Bu=b._emscripten_bind_b2RopeJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2RopeJointDef_get_bodyA_0.apply(null,arguments)},Cu=b._emscripten_bind_b2WeldJointDef_get_localAnchorB_0=function(){return b.asm._emscripten_bind_b2WeldJointDef_get_localAnchorB_0.apply(null,
arguments)},Du=b._emscripten_bind_b2WeldJointDef_set_referenceAngle_1=function(){return b.asm._emscripten_bind_b2WeldJointDef_set_referenceAngle_1.apply(null,arguments)},Eu=b._emscripten_bind_b2DistanceJointDef_set_localAnchorB_1=function(){return b.asm._emscripten_bind_b2DistanceJointDef_set_localAnchorB_1.apply(null,arguments)},Fu=b._emscripten_bind_b2Mat33_SetZero_0=function(){return b.asm._emscripten_bind_b2Mat33_SetZero_0.apply(null,arguments)},Gu=b._emscripten_bind_b2MotorJointDef_get_bodyB_0=
function(){return b.asm._emscripten_bind_b2MotorJointDef_get_bodyB_0.apply(null,arguments)},Hu=b._emscripten_bind_b2WheelJointDef_b2WheelJointDef_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_b2WheelJointDef_0.apply(null,arguments)},Iu=b._emscripten_bind_b2PrismaticJointDef_get_localAxisA_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_localAxisA_0.apply(null,arguments)},Ju=b._emscripten_bind_b2Mat22_get_ey_0=function(){return b.asm._emscripten_bind_b2Mat22_get_ey_0.apply(null,
arguments)},Ku=b._emscripten_bind_b2Mat22_SetIdentity_0=function(){return b.asm._emscripten_bind_b2Mat22_SetIdentity_0.apply(null,arguments)},Lu=b._emscripten_bind_b2Joint_IsActive_0=function(){return b.asm._emscripten_bind_b2Joint_IsActive_0.apply(null,arguments)},Mu=b._emscripten_bind_b2PulleyJoint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetReactionForce_1.apply(null,arguments)},Nu=b._emscripten_bind_b2Shape_get_m_radius_0=function(){return b.asm._emscripten_bind_b2Shape_get_m_radius_0.apply(null,
arguments)},Ou=b._emscripten_bind_b2Mat22_b2Mat22_4=function(){return b.asm._emscripten_bind_b2Mat22_b2Mat22_4.apply(null,arguments)},Pu=b._emscripten_bind_b2PrismaticJointDef_set_localAxisA_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_localAxisA_1.apply(null,arguments)},Qu=b._emscripten_bind_b2PolygonShape_SetAsBox_4=function(){return b.asm._emscripten_bind_b2PolygonShape_SetAsBox_4.apply(null,arguments)},Ru=b._emscripten_bind_b2EdgeShape_set_m_vertex1_1=function(){return b.asm._emscripten_bind_b2EdgeShape_set_m_vertex1_1.apply(null,
arguments)},Su=b._emscripten_bind_b2Body_GetWorld_0=function(){return b.asm._emscripten_bind_b2Body_GetWorld_0.apply(null,arguments)},Tu=b._emscripten_enum_b2LimitState_e_inactiveLimit=function(){return b.asm._emscripten_enum_b2LimitState_e_inactiveLimit.apply(null,arguments)},Uu=b._emscripten_bind_b2Vec2_set_x_1=function(){return b.asm._emscripten_bind_b2Vec2_set_x_1.apply(null,arguments)},Vu=b._emscripten_bind_b2Body_SetAwake_1=function(){return b.asm._emscripten_bind_b2Body_SetAwake_1.apply(null,
arguments)},Wu=b._emscripten_bind_b2WeldJoint_GetLocalAnchorA_0=function(){return b.asm._emscripten_bind_b2WeldJoint_GetLocalAnchorA_0.apply(null,arguments)},Xu=b._emscripten_bind_b2Vec2___destroy___0=function(){return b.asm._emscripten_bind_b2Vec2___destroy___0.apply(null,arguments)},Yu=b._emscripten_enum_b2ShapeType_e_polygon=function(){return b.asm._emscripten_enum_b2ShapeType_e_polygon.apply(null,arguments)},Zu=b._emscripten_bind_b2Body_GetInertia_0=function(){return b.asm._emscripten_bind_b2Body_GetInertia_0.apply(null,
arguments)},$u=b._emscripten_bind_b2PulleyJoint_GetAnchorA_0=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetAnchorA_0.apply(null,arguments)},av=b._emscripten_bind_b2BodyDef_get_linearVelocity_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_linearVelocity_0.apply(null,arguments)},bv=b._emscripten_bind_b2DistanceJointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2DistanceJointDef_get_bodyB_0.apply(null,arguments)},cv=b._emscripten_bind_b2Mat22___destroy___0=function(){return b.asm._emscripten_bind_b2Mat22___destroy___0.apply(null,
arguments)},dv=b._emscripten_bind_b2RevoluteJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetNext_0.apply(null,arguments)},ev=b._emscripten_bind_b2WeldJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2WeldJointDef_get_bodyA_0.apply(null,arguments)},fv=b._emscripten_bind_b2MotorJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetAnchorB_0.apply(null,arguments)},gv=b._emscripten_bind_b2Fixture_GetShape_0=function(){return b.asm._emscripten_bind_b2Fixture_GetShape_0.apply(null,
arguments)},hv=b._emscripten_bind_b2PulleyJoint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2PulleyJoint_GetReactionTorque_1.apply(null,arguments)},iv=b._emscripten_bind_b2Vec3_op_mul_1=function(){return b.asm._emscripten_bind_b2Vec3_op_mul_1.apply(null,arguments)},jv=b._emscripten_bind_b2PolygonShape_set_m_type_1=function(){return b.asm._emscripten_bind_b2PolygonShape_set_m_type_1.apply(null,arguments)},kv=b._emscripten_bind_b2WheelJoint_GetType_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetType_0.apply(null,
arguments)},lv=b._emscripten_bind_b2MotorJoint_GetAngularOffset_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetAngularOffset_0.apply(null,arguments)},mv=b._emscripten_bind_b2RevoluteJoint_IsActive_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_IsActive_0.apply(null,arguments)},nv=b._emscripten_bind_b2GearJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2GearJoint_GetNext_0.apply(null,arguments)},ov=b._emscripten_bind_b2MouseJointDef_get_maxForce_0=function(){return b.asm._emscripten_bind_b2MouseJointDef_get_maxForce_0.apply(null,
arguments)},pv=b._emscripten_bind_b2DestructionListenerWrapper___destroy___0=function(){return b.asm._emscripten_bind_b2DestructionListenerWrapper___destroy___0.apply(null,arguments)},qv=b._emscripten_bind_b2PrismaticJointDef_set_maxMotorForce_1=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_set_maxMotorForce_1.apply(null,arguments)},rv=b._emscripten_bind_b2WheelJoint_GetLocalAxisA_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetLocalAxisA_0.apply(null,arguments)},sv=b._emscripten_bind_b2Body_GetNext_0=
function(){return b.asm._emscripten_bind_b2Body_GetNext_0.apply(null,arguments)},tv=b._emscripten_bind_b2MouseJoint_GetReactionForce_1=function(){return b.asm._emscripten_bind_b2MouseJoint_GetReactionForce_1.apply(null,arguments)},uv=b._emscripten_bind_b2RopeJoint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2RopeJoint_GetBodyA_0.apply(null,arguments)},vv=b._emscripten_bind_b2ContactFeature_set_indexA_1=function(){return b.asm._emscripten_bind_b2ContactFeature_set_indexA_1.apply(null,arguments)},
wv=b._emscripten_bind_b2Profile_get_solveInit_0=function(){return b.asm._emscripten_bind_b2Profile_get_solveInit_0.apply(null,arguments)},xv=b._emscripten_bind_b2Fixture_IsSensor_0=function(){return b.asm._emscripten_bind_b2Fixture_IsSensor_0.apply(null,arguments)},yv=b._emscripten_bind_b2FrictionJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetAnchorB_0.apply(null,arguments)},zv=b._emscripten_bind_b2World_QueryAABB_2=function(){return b.asm._emscripten_bind_b2World_QueryAABB_2.apply(null,
arguments)},Av=b._emscripten_bind_b2Profile_set_collide_1=function(){return b.asm._emscripten_bind_b2Profile_set_collide_1.apply(null,arguments)},Bv=b._emscripten_bind_b2BodyDef_get_userData_0=function(){return b.asm._emscripten_bind_b2BodyDef_get_userData_0.apply(null,arguments)},Cv=b._emscripten_bind_b2MotorJoint_SetLinearOffset_1=function(){return b.asm._emscripten_bind_b2MotorJoint_SetLinearOffset_1.apply(null,arguments)},Dv=b._emscripten_bind_b2FrictionJoint_GetMaxForce_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetMaxForce_0.apply(null,
arguments)},Ev=b._emscripten_bind_b2WheelJointDef_get_userData_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_userData_0.apply(null,arguments)},Fv=b._emscripten_bind_b2RevoluteJoint_IsLimitEnabled_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_IsLimitEnabled_0.apply(null,arguments)},Gv=b._emscripten_bind_b2World_SetDestructionListener_1=function(){return b.asm._emscripten_bind_b2World_SetDestructionListener_1.apply(null,arguments)},Hv=b._emscripten_bind_b2RevoluteJointDef_set_maxMotorTorque_1=
function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_maxMotorTorque_1.apply(null,arguments)},Iv=b._emscripten_bind_b2WeldJointDef_set_bodyB_1=function(){return b.asm._emscripten_bind_b2WeldJointDef_set_bodyB_1.apply(null,arguments)},Jv=b._emscripten_bind_b2Transform_set_p_1=function(){return b.asm._emscripten_bind_b2Transform_set_p_1.apply(null,arguments)},Kv=b._emscripten_bind_b2DistanceJoint_SetLength_1=function(){return b.asm._emscripten_bind_b2DistanceJoint_SetLength_1.apply(null,arguments)},
Lv=b._emscripten_bind_b2ManifoldPoint_get_localPoint_0=function(){return b.asm._emscripten_bind_b2ManifoldPoint_get_localPoint_0.apply(null,arguments)},Mv=b._emscripten_bind_b2JointEdge_get_joint_0=function(){return b.asm._emscripten_bind_b2JointEdge_get_joint_0.apply(null,arguments)},Nv=b._emscripten_bind_b2Body_GetLocalCenter_0=function(){return b.asm._emscripten_bind_b2Body_GetLocalCenter_0.apply(null,arguments)},Ov=b._emscripten_bind_b2FixtureDef___destroy___0=function(){return b.asm._emscripten_bind_b2FixtureDef___destroy___0.apply(null,
arguments)},Pv=b._emscripten_bind_b2MouseJoint___destroy___0=function(){return b.asm._emscripten_bind_b2MouseJoint___destroy___0.apply(null,arguments)},Qv=b._emscripten_enum_b2JointType_e_ropeJoint=function(){return b.asm._emscripten_enum_b2JointType_e_ropeJoint.apply(null,arguments)},Rv=b._emscripten_bind_b2Profile_get_solveVelocity_0=function(){return b.asm._emscripten_bind_b2Profile_get_solveVelocity_0.apply(null,arguments)},Sv=b._emscripten_bind_b2WeldJointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2WeldJointDef_get_bodyB_0.apply(null,
arguments)},Tv=b._emscripten_bind_b2World_GetContinuousPhysics_0=function(){return b.asm._emscripten_bind_b2World_GetContinuousPhysics_0.apply(null,arguments)},Uv=b._emscripten_bind_b2Joint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2Joint_GetBodyA_0.apply(null,arguments)},Vv=b._emscripten_bind_b2MotorJointDef_set_maxTorque_1=function(){return b.asm._emscripten_bind_b2MotorJointDef_set_maxTorque_1.apply(null,arguments)},Wv=b._emscripten_bind_b2PulleyJointDef_Initialize_7=function(){return b.asm._emscripten_bind_b2PulleyJointDef_Initialize_7.apply(null,
arguments)},Xv=b._emscripten_bind_b2GearJointDef_set_bodyB_1=function(){return b.asm._emscripten_bind_b2GearJointDef_set_bodyB_1.apply(null,arguments)},Yv=b._emscripten_bind_b2RopeJoint_GetReactionTorque_1=function(){return b.asm._emscripten_bind_b2RopeJoint_GetReactionTorque_1.apply(null,arguments)},Zv=b._emscripten_bind_b2WheelJointDef_set_dampingRatio_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_dampingRatio_1.apply(null,arguments)},$v=b._emscripten_bind_b2GearJoint_GetType_0=
function(){return b.asm._emscripten_bind_b2GearJoint_GetType_0.apply(null,arguments)},aw=b._emscripten_bind_b2MotorJoint_GetNext_0=function(){return b.asm._emscripten_bind_b2MotorJoint_GetNext_0.apply(null,arguments)},bw=b._emscripten_bind_b2EdgeShape_set_m_vertex0_1=function(){return b.asm._emscripten_bind_b2EdgeShape_set_m_vertex0_1.apply(null,arguments)},cw=b._emscripten_bind_b2RevoluteJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2RevoluteJoint_GetAnchorB_0.apply(null,arguments)},
dw=b._emscripten_bind_b2RopeJointDef_set_localAnchorB_1=function(){return b.asm._emscripten_bind_b2RopeJointDef_set_localAnchorB_1.apply(null,arguments)},ew=b._emscripten_bind_b2PrismaticJoint_GetUserData_0=function(){return b.asm._emscripten_bind_b2PrismaticJoint_GetUserData_0.apply(null,arguments)},fw=b._emscripten_bind_b2GearJointDef_set_userData_1=function(){return b.asm._emscripten_bind_b2GearJointDef_set_userData_1.apply(null,arguments)},gw=b._emscripten_bind_b2Fixture_SetSensor_1=function(){return b.asm._emscripten_bind_b2Fixture_SetSensor_1.apply(null,
arguments)},hw=b._emscripten_bind_b2MotorJointDef_set_collideConnected_1=function(){return b.asm._emscripten_bind_b2MotorJointDef_set_collideConnected_1.apply(null,arguments)},iw=b._emscripten_bind_b2Contact_GetFixtureB_0=function(){return b.asm._emscripten_bind_b2Contact_GetFixtureB_0.apply(null,arguments)},jw=b._emscripten_bind_b2ChainShape_ComputeMass_2=function(){return b.asm._emscripten_bind_b2ChainShape_ComputeMass_2.apply(null,arguments)},kw=b._emscripten_bind_b2WeldJointDef_b2WeldJointDef_0=
function(){return b.asm._emscripten_bind_b2WeldJointDef_b2WeldJointDef_0.apply(null,arguments)},lw=b._emscripten_bind_b2Contact_GetChildIndexA_0=function(){return b.asm._emscripten_bind_b2Contact_GetChildIndexA_0.apply(null,arguments)},mw=b._emscripten_bind_b2RopeJointDef_get_bodyB_0=function(){return b.asm._emscripten_bind_b2RopeJointDef_get_bodyB_0.apply(null,arguments)},nw=b._emscripten_bind_b2BodyDef_b2BodyDef_0=function(){return b.asm._emscripten_bind_b2BodyDef_b2BodyDef_0.apply(null,arguments)},
ow=b._emscripten_bind_b2MassData_get_mass_0=function(){return b.asm._emscripten_bind_b2MassData_get_mass_0.apply(null,arguments)},pw=b._emscripten_bind_b2WorldManifold_get_separations_1=function(){return b.asm._emscripten_bind_b2WorldManifold_get_separations_1.apply(null,arguments)},qw=b._emscripten_bind_b2Joint_GetBodyB_0=function(){return b.asm._emscripten_bind_b2Joint_GetBodyB_0.apply(null,arguments)},rw=b._emscripten_bind_b2Shape_GetChildCount_0=function(){return b.asm._emscripten_bind_b2Shape_GetChildCount_0.apply(null,
arguments)},sw=b._emscripten_bind_b2WheelJointDef_set_localAxisA_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_localAxisA_1.apply(null,arguments)},tw=b._emscripten_bind_b2Joint_Dump_0=function(){return b.asm._emscripten_bind_b2Joint_Dump_0.apply(null,arguments)},uw=b._emscripten_bind_b2World_SetContactFilter_1=function(){return b.asm._emscripten_bind_b2World_SetContactFilter_1.apply(null,arguments)},vw=b._emscripten_bind_b2RevoluteJointDef_set_motorSpeed_1=function(){return b.asm._emscripten_bind_b2RevoluteJointDef_set_motorSpeed_1.apply(null,
arguments)},ww=b._emscripten_bind_b2MotorJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2MotorJointDef_get_bodyA_0.apply(null,arguments)},xw=b._emscripten_bind_b2WheelJointDef_get_enableMotor_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_enableMotor_0.apply(null,arguments)},yw=b._emscripten_bind_b2Vec2_LengthSquared_0=function(){return b.asm._emscripten_bind_b2Vec2_LengthSquared_0.apply(null,arguments)},zw=b._emscripten_bind_b2FrictionJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2FrictionJointDef_set_bodyA_1.apply(null,
arguments)},Aw=b._emscripten_bind_b2WheelJoint_GetSpringFrequencyHz_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetSpringFrequencyHz_0.apply(null,arguments)},Bw=b._emscripten_bind_b2ContactEdge_set_prev_1=function(){return b.asm._emscripten_bind_b2ContactEdge_set_prev_1.apply(null,arguments)},Cw=b._emscripten_bind_b2Shape_ComputeMass_2=function(){return b.asm._emscripten_bind_b2Shape_ComputeMass_2.apply(null,arguments)},Dw=b._emscripten_bind_b2FrictionJoint_GetBodyA_0=function(){return b.asm._emscripten_bind_b2FrictionJoint_GetBodyA_0.apply(null,
arguments)},Ew=b._emscripten_bind_b2WheelJointDef_set_localAnchorB_1=function(){return b.asm._emscripten_bind_b2WheelJointDef_set_localAnchorB_1.apply(null,arguments)},Fw=b._emscripten_bind_b2Body_GetAngle_0=function(){return b.asm._emscripten_bind_b2Body_GetAngle_0.apply(null,arguments)},Gw=b._emscripten_bind_b2PrismaticJointDef_get_maxMotorForce_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_maxMotorForce_0.apply(null,arguments)},Hw=b._emscripten_bind_b2DistanceJoint_GetBodyA_0=
function(){return b.asm._emscripten_bind_b2DistanceJoint_GetBodyA_0.apply(null,arguments)},Iw=b._emscripten_bind_b2WheelJoint_GetLocalAnchorB_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetLocalAnchorB_0.apply(null,arguments)},Jw=b._emscripten_bind_b2PulleyJointDef_set_bodyA_1=function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_bodyA_1.apply(null,arguments)},Kw=b._emscripten_bind_b2WheelJoint_GetAnchorB_0=function(){return b.asm._emscripten_bind_b2WheelJoint_GetAnchorB_0.apply(null,
arguments)},Lw=b._emscripten_bind_b2PolygonShape_SetAsBox_2=function(){return b.asm._emscripten_bind_b2PolygonShape_SetAsBox_2.apply(null,arguments)},Mw=b._emscripten_bind_b2PrismaticJointDef_get_type_0=function(){return b.asm._emscripten_bind_b2PrismaticJointDef_get_type_0.apply(null,arguments)},Nw=b._emscripten_bind_b2Color_Set_3=function(){return b.asm._emscripten_bind_b2Color_Set_3.apply(null,arguments)},Ow=b._emscripten_bind_b2WheelJointDef_get_bodyA_0=function(){return b.asm._emscripten_bind_b2WheelJointDef_get_bodyA_0.apply(null,
arguments)},Pw=b._emscripten_enum_b2LimitState_e_atUpperLimit=function(){return b.asm._emscripten_enum_b2LimitState_e_atUpperLimit.apply(null,arguments)},Qw=b._emscripten_bind_b2PulleyJointDef_set_groundAnchorA_1=function(){return b.asm._emscripten_bind_b2PulleyJointDef_set_groundAnchorA_1.apply(null,arguments)},Rw=b._emscripten_bind_b2PolygonShape_get_m_type_0=function(){return b.asm._emscripten_bind_b2PolygonShape_get_m_type_0.apply(null,arguments)},Sw=b._emscripten_bind_b2PrismaticJoint_SetMaxMotorForce_1=
function(){return b.asm._emscripten_bind_b2PrismaticJoint_SetMaxMotorForce_1.apply(null,arguments)},Tw=b._emscripten_bind_b2PulleyJointDef_get_collideConnected_0=function(){return b.asm._emscripten_bind_b2PulleyJointDef_get_collideConnected_0.apply(null,arguments)},Uw=b._emscripten_bind_JSContactListener_JSContactListener_0=function(){return b.asm._emscripten_bind_JSContactListener_JSContactListener_0.apply(null,arguments)},Vw=b._emscripten_bind_b2WheelJoint___destroy___0=function(){return b.asm._emscripten_bind_b2WheelJoint___destroy___0.apply(null,
arguments)},Ww=b._emscripten_bind_b2PolygonShape_set_m_radius_1=function(){return b.asm._emscripten_bind_b2PolygonShape_set_m_radius_1.apply(null,arguments)},Xw=b._emscripten_bind_b2Fixture_GetMassData_1=function(){return b.asm._emscripten_bind_b2Fixture_GetMassData_1.apply(null,arguments)},Yw=b._emscripten_bind_b2RopeJoint_SetMaxLength_1=function(){return b.asm._emscripten_bind_b2RopeJoint_SetMaxLength_1.apply(null,arguments)};b.dynCall_iiii=function(){return b.asm.dynCall_iiii.apply(null,arguments)};
b.dynCall_viifii=function(){return b.asm.dynCall_viifii.apply(null,arguments)};b.dynCall_viiiii=function(){return b.asm.dynCall_viiiii.apply(null,arguments)};b.dynCall_vi=function(){return b.asm.dynCall_vi.apply(null,arguments)};b.dynCall_vii=function(){return b.asm.dynCall_vii.apply(null,arguments)};b.dynCall_ii=function(){return b.asm.dynCall_ii.apply(null,arguments)};b.dynCall_fif=function(){return b.asm.dynCall_fif.apply(null,arguments)};
b.dynCall_viii=function(){return b.asm.dynCall_viii.apply(null,arguments)};b.dynCall_viifi=function(){return b.asm.dynCall_viifi.apply(null,arguments)};b.dynCall_v=function(){return b.asm.dynCall_v.apply(null,arguments)};b.dynCall_viif=function(){return b.asm.dynCall_viif.apply(null,arguments)};b.dynCall_viiiiii=function(){return b.asm.dynCall_viiiiii.apply(null,arguments)};b.dynCall_iii=function(){return b.asm.dynCall_iii.apply(null,arguments)};
b.dynCall_iiiiii=function(){return b.asm.dynCall_iiiiii.apply(null,arguments)};b.dynCall_fiiiif=function(){return b.asm.dynCall_fiiiif.apply(null,arguments)};b.dynCall_viiii=function(){return b.asm.dynCall_viiii.apply(null,arguments)};f.t=b.stackAlloc;f.L=b.stackSave;f.K=b.stackRestore;f.R=b.establishStackSpace;f.f=b.setTempRet0;f.H=b.getTempRet0;b.asm=Sb;
if(zb)if("function"===typeof b.locateFile?zb=b.locateFile(zb):b.memoryInitializerPrefixURL&&(zb=b.memoryInitializerPrefixURL+zb),ea||fa){var Zw=b.readBinary(zb);Da.set(Zw,f.i)}else{var ax=function(){b.readAsync(zb,$w,function(){throw"could not load memory initializer "+zb;})};xb();var $w=function(a){a.byteLength&&(a=new Uint8Array(a));Da.set(a,f.i);b.memoryInitializerRequest&&delete b.memoryInitializerRequest.response;yb()};if(b.memoryInitializerRequest){var bx=function(){var a=b.memoryInitializerRequest;
200!==a.status&&0!==a.status?(console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+a.status+", retrying "+zb),ax()):$w(a.response)};b.memoryInitializerRequest.response?setTimeout(bx,0):b.memoryInitializerRequest.addEventListener("load",bx)}else ax()}b.then=function(a){if(b.calledRun)a(b);else{var c=b.onRuntimeInitialized;b.onRuntimeInitialized=function(){c&&c();a(b)}}return b};
function ja(a){this.name="ExitStatus";this.message="Program terminated with exit("+a+")";this.status=a}ja.prototype=Error();ja.prototype.constructor=ja;var cx=null,wb=function dx(){b.calledRun||ex();b.calledRun||(wb=dx)};
b.callMain=b.O=function(a){function c(){for(var a=0;3>a;a++)e.push(0)}a=a||[];pb||(pb=!0,hb(jb));var d=a.length+1,e=[Ba(rb(b.thisProgram),"i8",0)];c();for(var g=0;g<d-1;g+=1)e.push(Ba(rb(a[g]),"i8",0)),c();e.push(0);e=Ba(e,"i32",0);try{var l=b._main(d,e,0);fx(l,!0)}catch(m){m instanceof ja||("SimulateInfiniteLoop"==m?b.noExitRuntime=!0:((a=m)&&"object"===typeof m&&m.stack&&(a=[m,m.stack]),b.h("exception thrown: "+a),b.quit(1,m)))}finally{}};
function ex(a){function c(){if(!b.calledRun&&(b.calledRun=!0,!ra)){pb||(pb=!0,hb(jb));hb(kb);if(b.onRuntimeInitialized)b.onRuntimeInitialized();b._main&&gx&&b.callMain(a);if(b.postRun)for("function"==typeof b.postRun&&(b.postRun=[b.postRun]);b.postRun.length;){var c=b.postRun.shift();ob.unshift(c)}hb(ob)}}a=a||b.arguments;null===cx&&(cx=Date.now());if(!(0<tb)){if(b.preRun)for("function"==typeof b.preRun&&(b.preRun=[b.preRun]);b.preRun.length;)qb();hb(ib);0<tb||b.calledRun||(b.setStatus?(b.setStatus("Running..."),
setTimeout(function(){setTimeout(function(){b.setStatus("")},1);c()},1)):c())}}b.run=b.run=ex;function fx(a,c){if(!c||!b.noExitRuntime){if(!b.noExitRuntime&&(ra=!0,ka=void 0,hb(nb),b.onExit))b.onExit(a);ea&&process.exit(a);b.quit(a,new ja(a))}}b.exit=b.exit=fx;var hx=[];
function ta(a){if(b.onAbort)b.onAbort(a);void 0!==a?(b.print(a),b.h(a),a=JSON.stringify(a)):a="";ra=!0;var c="abort("+a+") at "+Ra()+"\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.";hx&&hx.forEach(function(d){c=d(c,a)});throw c;}b.abort=b.abort=ta;if(b.preInit)for("function"==typeof b.preInit&&(b.preInit=[b.preInit]);0<b.preInit.length;)b.preInit.pop()();var gx=!0;b.noInitialRun&&(gx=!1);b.noExitRuntime=!0;ex();function h(){}h.prototype=Object.create(h.prototype);
h.prototype.constructor=h;h.prototype.b=h;h.c={};b.WrapperObject=h;function k(a){return(a||h).c}b.getCache=k;function n(a,c){var d=k(c),e=d[a];if(e)return e;e=Object.create((c||h).prototype);e.a=a;return d[a]=e}b.wrapPointer=n;b.castObject=function(a,c){return n(a.a,c)};b.NULL=n(0);b.destroy=function(a){if(!a.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";a.__destroy__();delete k(a.b)[a.a]};b.compare=function(a,c){return a.a===c.a};b.getPointer=function(a){return a.a};
b.getClass=function(a){return a.b};var ix=0,jx=0,kx=[],lx=0;function mx(){if(lx){for(var a=0;a<kx.length;a++)b._free(kx[a]);kx.length=0;b._free(ix);ix=0;jx+=lx;lx=0}ix||(jx+=128,ix=b._malloc(jx),assert(ix))}function nx(){throw"cannot construct a b2DestructionListenerWrapper, no constructor in IDL";}nx.prototype=Object.create(h.prototype);nx.prototype.constructor=nx;nx.prototype.b=nx;nx.c={};b.b2DestructionListenerWrapper=nx;nx.prototype.__destroy__=function(){pv(this.a)};
function ox(){throw"cannot construct a b2Draw, no constructor in IDL";}ox.prototype=Object.create(h.prototype);ox.prototype.constructor=ox;ox.prototype.b=ox;ox.c={};b.b2Draw=ox;ox.prototype.SetFlags=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ie(c,a)};ox.prototype.GetFlags=function(){return bc(this.a)};ox.prototype.AppendFlags=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Gh(c,a)};ox.prototype.ClearFlags=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);bi(c,a)};
ox.prototype.__destroy__=function(){fj(this.a)};function p(){throw"cannot construct a b2Joint, no constructor in IDL";}p.prototype=Object.create(h.prototype);p.prototype.constructor=p;p.prototype.b=p;p.c={};b.b2Joint=p;p.prototype.GetType=function(){return ht(this.a)};p.prototype.GetBodyA=function(){return n(Uv(this.a),q)};p.prototype.GetBodyB=function(){return n(qw(this.a),q)};p.prototype.GetAnchorA=function(){return n(ln(this.a),r)};p.prototype.GetAnchorB=function(){return n(jj(this.a),r)};
p.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(am(c,a),r)};p.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return Uj(c,a)};p.prototype.GetNext=function(){return n(gt(this.a),p)};p.prototype.GetUserData=function(){return cl(this.a)};p.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Xf(c,a)};p.prototype.IsActive=function(){return!!Lu(this.a)};p.prototype.GetCollideConnected=function(){return!!kf(this.a)};
p.prototype.Dump=function(){tw(this.a)};function px(){throw"cannot construct a b2RayCastCallback, no constructor in IDL";}px.prototype=Object.create(h.prototype);px.prototype.constructor=px;px.prototype.b=px;px.c={};b.b2RayCastCallback=px;px.prototype.__destroy__=function(){zh(this.a)};function qx(){throw"cannot construct a b2ContactListener, no constructor in IDL";}qx.prototype=Object.create(h.prototype);qx.prototype.constructor=qx;qx.prototype.b=qx;qx.c={};b.b2ContactListener=qx;
qx.prototype.__destroy__=function(){So(this.a)};function rx(){throw"cannot construct a b2QueryCallback, no constructor in IDL";}rx.prototype=Object.create(h.prototype);rx.prototype.constructor=rx;rx.prototype.b=rx;rx.c={};b.b2QueryCallback=rx;rx.prototype.__destroy__=function(){vt(this.a)};function t(){this.a=cn();k(t)[this.a]=this}t.prototype=Object.create(h.prototype);t.prototype.constructor=t;t.prototype.b=t;t.c={};b.b2JointDef=t;t.prototype.get_type=function(){return $t(this.a)};
t.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ku(c,a)};t.prototype.get_userData=function(){return Tm(this.a)};t.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);lq(c,a)};t.prototype.get_bodyA=function(){return n(Fr(this.a),q)};t.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Dk(c,a)};t.prototype.get_bodyB=function(){return n(fn(this.a),q)};
t.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);qr(c,a)};t.prototype.get_collideConnected=function(){return!!gd(this.a)};t.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);yk(c,a)};t.prototype.__destroy__=function(){We(this.a)};function sx(){throw"cannot construct a b2Shape, no constructor in IDL";}sx.prototype=Object.create(h.prototype);sx.prototype.constructor=sx;sx.prototype.b=sx;sx.c={};b.b2Shape=sx;sx.prototype.GetType=function(){return Xn(this.a)};
sx.prototype.GetChildCount=function(){return rw(this.a)};sx.prototype.TestPoint=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);return!!Dr(d,a,c)};sx.prototype.RayCast=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);return!!bd(g,a,c,d,e)};
sx.prototype.ComputeAABB=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);Yb(e,a,c,d)};sx.prototype.ComputeMass=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Cw(d,a,c)};sx.prototype.get_m_type=function(){return lk(this.a)};sx.prototype.set_m_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ys(c,a)};sx.prototype.get_m_radius=function(){return Nu(this.a)};
sx.prototype.set_m_radius=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);tf(c,a)};sx.prototype.__destroy__=function(){$l(this.a)};function tx(){throw"cannot construct a b2ContactFilter, no constructor in IDL";}tx.prototype=Object.create(h.prototype);tx.prototype.constructor=tx;tx.prototype.b=tx;tx.c={};b.b2ContactFilter=tx;tx.prototype.__destroy__=function(){Uf(this.a)};function ux(){this.a=Qe();k(ux)[this.a]=this}ux.prototype=Object.create(nx.prototype);ux.prototype.constructor=ux;
ux.prototype.b=ux;ux.c={};b.JSDestructionListener=ux;ux.prototype.SayGoodbyeJoint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Zl(c,a)};ux.prototype.SayGoodbyeFixture=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);eq(c,a)};ux.prototype.__destroy__=function(){Gs(this.a)};function vx(){throw"cannot construct a b2ContactImpulse, no constructor in IDL";}vx.prototype=Object.create(h.prototype);vx.prototype.constructor=vx;vx.prototype.b=vx;vx.c={};b.b2ContactImpulse=vx;
vx.prototype.get_count=function(){return En(this.a)};vx.prototype.set_count=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Xg(c,a)};vx.prototype.__destroy__=function(){Le(this.a)};function u(){throw"cannot construct a b2DistanceJoint, no constructor in IDL";}u.prototype=Object.create(p.prototype);u.prototype.constructor=u;u.prototype.b=u;u.c={};b.b2DistanceJoint=u;u.prototype.GetLocalAnchorA=function(){return n(ne(this.a),r)};u.prototype.GetLocalAnchorB=function(){return n(Xh(this.a),r)};
u.prototype.SetLength=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Kv(c,a)};u.prototype.GetLength=function(){return ek(this.a)};u.prototype.SetFrequency=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Vg(c,a)};u.prototype.GetFrequency=function(){return Rl(this.a)};u.prototype.SetDampingRatio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ce(c,a)};u.prototype.GetDampingRatio=function(){return mh(this.a)};u.prototype.GetType=function(){return Ik(this.a)};
u.prototype.GetBodyA=function(){return n(Hw(this.a),q)};u.prototype.GetBodyB=function(){return n(Ue(this.a),q)};u.prototype.GetAnchorA=function(){return n(Qc(this.a),r)};u.prototype.GetAnchorB=function(){return n(Hg(this.a),r)};u.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(gn(c,a),r)};u.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return Rs(c,a)};u.prototype.GetNext=function(){return n(ke(this.a),p)};
u.prototype.GetUserData=function(){return Kd(this.a)};u.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Yf(c,a)};u.prototype.IsActive=function(){return!!Dg(this.a)};u.prototype.GetCollideConnected=function(){return!!Ft(this.a)};u.prototype.__destroy__=function(){Yk(this.a)};
function wx(a,c,d){a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);this.a=void 0===a?pg():void 0===c?_emscripten_bind_b2Mat33_b2Mat33_1(a):void 0===d?_emscripten_bind_b2Mat33_b2Mat33_2(a,c):Yt(a,c,d);k(wx)[this.a]=this}wx.prototype=Object.create(h.prototype);wx.prototype.constructor=wx;wx.prototype.b=wx;wx.c={};b.b2Mat33=wx;wx.prototype.SetZero=function(){Fu(this.a)};
wx.prototype.Solve33=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(mp(c,a),xx)};wx.prototype.Solve22=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(Sf(c,a),r)};wx.prototype.GetInverse22=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Lm(c,a)};wx.prototype.GetSymInverse33=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);sl(c,a)};wx.prototype.get_ex=function(){return n(Rg(this.a),xx)};
wx.prototype.set_ex=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Nt(c,a)};wx.prototype.get_ey=function(){return n(Ic(this.a),xx)};wx.prototype.set_ey=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Lc(c,a)};wx.prototype.get_ez=function(){return n(cf(this.a),xx)};wx.prototype.set_ez=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ou(c,a)};wx.prototype.__destroy__=function(){dd(this.a)};function v(){throw"cannot construct a b2Fixture, no constructor in IDL";}
v.prototype=Object.create(h.prototype);v.prototype.constructor=v;v.prototype.b=v;v.c={};b.b2Fixture=v;v.prototype.GetType=function(){return Kk(this.a)};v.prototype.GetShape=function(){return n(gv(this.a),sx)};v.prototype.SetSensor=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);gw(c,a)};v.prototype.IsSensor=function(){return!!xv(this.a)};v.prototype.SetFilterData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);iq(c,a)};v.prototype.GetFilterData=function(){return n(dt(this.a),yx)};
v.prototype.Refilter=function(){ro(this.a)};v.prototype.GetBody=function(){return n(Wg(this.a),q)};v.prototype.GetNext=function(){return n(Au(this.a),v)};v.prototype.GetUserData=function(){return Fl(this.a)};v.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);$i(c,a)};v.prototype.TestPoint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return!!rl(c,a)};
v.prototype.RayCast=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);return!!Ck(e,a,c,d)};v.prototype.GetMassData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Xw(c,a)};v.prototype.SetDensity=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ch(c,a)};v.prototype.GetDensity=function(){return Cp(this.a)};v.prototype.GetFriction=function(){return zu(this.a)};
v.prototype.SetFriction=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Eo(c,a)};v.prototype.GetRestitution=function(){return pe(this.a)};v.prototype.SetRestitution=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Kt(c,a)};v.prototype.GetAABB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(qn(c,a),zx)};v.prototype.Dump=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Qm(c,a)};v.prototype.__destroy__=function(){pc(this.a)};
function yx(){this.a=Od();k(yx)[this.a]=this}yx.prototype=Object.create(h.prototype);yx.prototype.constructor=yx;yx.prototype.b=yx;yx.c={};b.b2Filter=yx;yx.prototype.get_categoryBits=function(){return Bm(this.a)};yx.prototype.set_categoryBits=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Bl(c,a)};yx.prototype.get_maskBits=function(){return Mo(this.a)};yx.prototype.set_maskBits=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Yr(c,a)};yx.prototype.get_groupIndex=function(){return Ye(this.a)};
yx.prototype.set_groupIndex=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);bn(c,a)};yx.prototype.__destroy__=function(){Mn(this.a)};function Ax(){this.a=id();k(Ax)[this.a]=this}Ax.prototype=Object.create(rx.prototype);Ax.prototype.constructor=Ax;Ax.prototype.b=Ax;Ax.c={};b.JSQueryCallback=Ax;Ax.prototype.ReportFixture=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return!!au(c,a)};Ax.prototype.__destroy__=function(){qo(this.a)};
function w(){throw"cannot construct a b2MouseJoint, no constructor in IDL";}w.prototype=Object.create(p.prototype);w.prototype.constructor=w;w.prototype.b=w;w.c={};b.b2MouseJoint=w;w.prototype.SetTarget=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);jg(c,a)};w.prototype.GetTarget=function(){return n(po(this.a),r)};w.prototype.SetMaxForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);jq(c,a)};w.prototype.GetMaxForce=function(){return ig(this.a)};
w.prototype.SetFrequency=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);xl(c,a)};w.prototype.GetFrequency=function(){return Xo(this.a)};w.prototype.SetDampingRatio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);mk(c,a)};w.prototype.GetDampingRatio=function(){return Lr(this.a)};w.prototype.GetType=function(){return oo(this.a)};w.prototype.GetBodyA=function(){return n(Bo(this.a),q)};w.prototype.GetBodyB=function(){return n(Ti(this.a),q)};
w.prototype.GetAnchorA=function(){return n(eu(this.a),r)};w.prototype.GetAnchorB=function(){return n(Jq(this.a),r)};w.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(tv(c,a),r)};w.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return Sn(c,a)};w.prototype.GetNext=function(){return n(li(this.a),p)};w.prototype.GetUserData=function(){return sq(this.a)};
w.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);xt(c,a)};w.prototype.IsActive=function(){return!!$b(this.a)};w.prototype.GetCollideConnected=function(){return!!Jc(this.a)};w.prototype.__destroy__=function(){Pv(this.a)};function Bx(a){a&&"object"===typeof a&&(a=a.a);this.a=void 0===a?ko():lo(a);k(Bx)[this.a]=this}Bx.prototype=Object.create(h.prototype);Bx.prototype.constructor=Bx;Bx.prototype.b=Bx;Bx.c={};b.b2Rot=Bx;
Bx.prototype.Set=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Of(c,a)};Bx.prototype.SetIdentity=function(){pq(this.a)};Bx.prototype.GetAngle=function(){return up(this.a)};Bx.prototype.GetXAxis=function(){return n(og(this.a),r)};Bx.prototype.GetYAxis=function(){return n(er(this.a),r)};Bx.prototype.get_s=function(){return Hp(this.a)};Bx.prototype.set_s=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ej(c,a)};Bx.prototype.get_c=function(){return gq(this.a)};
Bx.prototype.set_c=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);dn(c,a)};Bx.prototype.__destroy__=function(){Lo(this.a)};function x(){throw"cannot construct a b2MotorJoint, no constructor in IDL";}x.prototype=Object.create(p.prototype);x.prototype.constructor=x;x.prototype.b=x;x.c={};b.b2MotorJoint=x;x.prototype.SetLinearOffset=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Cv(c,a)};x.prototype.GetLinearOffset=function(){return n(yp(this.a),r)};
x.prototype.SetAngularOffset=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);xp(c,a)};x.prototype.GetAngularOffset=function(){return lv(this.a)};x.prototype.SetMaxForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Wo(c,a)};x.prototype.GetMaxForce=function(){return lj(this.a)};x.prototype.SetMaxTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);td(c,a)};x.prototype.GetMaxTorque=function(){return Pr(this.a)};
x.prototype.SetCorrectionFactor=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ad(c,a)};x.prototype.GetCorrectionFactor=function(){return cq(this.a)};x.prototype.GetType=function(){return Oq(this.a)};x.prototype.GetBodyA=function(){return n(Fh(this.a),q)};x.prototype.GetBodyB=function(){return n(Dh(this.a),q)};x.prototype.GetAnchorA=function(){return n(Bp(this.a),r)};x.prototype.GetAnchorB=function(){return n(fv(this.a),r)};
x.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(tp(c,a),r)};x.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return lf(c,a)};x.prototype.GetNext=function(){return n(aw(this.a),p)};x.prototype.GetUserData=function(){return jk(this.a)};x.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Bh(c,a)};x.prototype.IsActive=function(){return!!Rn(this.a)};x.prototype.GetCollideConnected=function(){return!!Ae(this.a)};
x.prototype.__destroy__=function(){zk(this.a)};function y(){throw"cannot construct a b2Profile, no constructor in IDL";}y.prototype=Object.create(h.prototype);y.prototype.constructor=y;y.prototype.b=y;y.c={};b.b2Profile=y;y.prototype.get_step=function(){return bk(this.a)};y.prototype.set_step=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ei(c,a)};y.prototype.get_collide=function(){return lt(this.a)};y.prototype.set_collide=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Av(c,a)};
y.prototype.get_solve=function(){return dq(this.a)};y.prototype.set_solve=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Vs(c,a)};y.prototype.get_solveInit=function(){return wv(this.a)};y.prototype.set_solveInit=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Nk(c,a)};y.prototype.get_solveVelocity=function(){return Rv(this.a)};y.prototype.set_solveVelocity=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);$m(c,a)};y.prototype.get_solvePosition=function(){return ad(this.a)};
y.prototype.set_solvePosition=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Tf(c,a)};y.prototype.get_broadphase=function(){return Mc(this.a)};y.prototype.set_broadphase=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Cn(c,a)};y.prototype.get_solveTOI=function(){return Fg(this.a)};y.prototype.set_solveTOI=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Jh(c,a)};y.prototype.__destroy__=function(){Tg(this.a)};
function Cx(){throw"cannot construct a VoidPtr, no constructor in IDL";}Cx.prototype=Object.create(h.prototype);Cx.prototype.constructor=Cx;Cx.prototype.b=Cx;Cx.c={};b.VoidPtr=Cx;Cx.prototype.__destroy__=function(){hp(this.a)};function z(){this.a=nw();k(z)[this.a]=this}z.prototype=Object.create(h.prototype);z.prototype.constructor=z;z.prototype.b=z;z.c={};b.b2BodyDef=z;z.prototype.get_type=function(){return Km(this.a)};
z.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vc(c,a)};z.prototype.get_position=function(){return n(Bc(this.a),r)};z.prototype.set_position=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);md(c,a)};z.prototype.get_angle=function(){return Tt(this.a)};z.prototype.set_angle=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ll(c,a)};z.prototype.get_linearVelocity=function(){return n(av(this.a),r)};
z.prototype.set_linearVelocity=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);xk(c,a)};z.prototype.get_angularVelocity=function(){return ee(this.a)};z.prototype.set_angularVelocity=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);um(c,a)};z.prototype.get_linearDamping=function(){return Yj(this.a)};z.prototype.set_linearDamping=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Br(c,a)};z.prototype.get_angularDamping=function(){return Rq(this.a)};
z.prototype.set_angularDamping=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Wp(c,a)};z.prototype.get_allowSleep=function(){return!!Pi(this.a)};z.prototype.set_allowSleep=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Bi(c,a)};z.prototype.get_awake=function(){return!!Co(this.a)};z.prototype.set_awake=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);zl(c,a)};z.prototype.get_fixedRotation=function(){return!!On(this.a)};
z.prototype.set_fixedRotation=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);qk(c,a)};z.prototype.get_bullet=function(){return!!af(this.a)};z.prototype.set_bullet=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Um(c,a)};z.prototype.get_active=function(){return!!cj(this.a)};z.prototype.set_active=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Oj(c,a)};z.prototype.get_userData=function(){return Bv(this.a)};
z.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ir(c,a)};z.prototype.get_gravityScale=function(){return of(this.a)};z.prototype.set_gravityScale=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Yd(c,a)};z.prototype.__destroy__=function(){ns(this.a)};function Dx(){this.a=Bf();k(Dx)[this.a]=this}Dx.prototype=Object.create(px.prototype);Dx.prototype.constructor=Dx;Dx.prototype.b=Dx;Dx.c={};b.JSRayCastCallback=Dx;
Dx.prototype.ReportFixture=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);return Ke(g,a,c,d,e)};Dx.prototype.__destroy__=function(){Ro(this.a)};function Ex(){throw"cannot construct a b2ContactFeature, no constructor in IDL";}Ex.prototype=Object.create(h.prototype);Ex.prototype.constructor=Ex;Ex.prototype.b=Ex;Ex.c={};b.b2ContactFeature=Ex;Ex.prototype.get_indexA=function(){return Lg(this.a)};
Ex.prototype.set_indexA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vv(c,a)};Ex.prototype.get_indexB=function(){return El(this.a)};Ex.prototype.set_indexB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Zq(c,a)};Ex.prototype.get_typeA=function(){return Hl(this.a)};Ex.prototype.set_typeA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Pm(c,a)};Ex.prototype.get_typeB=function(){return rp(this.a)};
Ex.prototype.set_typeB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Nr(c,a)};Ex.prototype.__destroy__=function(){Op(this.a)};function r(a,c){a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);this.a=void 0===a?Gg():void 0===c?_emscripten_bind_b2Vec2_b2Vec2_1(a):rk(a,c);k(r)[this.a]=this}r.prototype=Object.create(h.prototype);r.prototype.constructor=r;r.prototype.b=r;r.c={};b.b2Vec2=r;r.prototype.SetZero=function(){nr(this.a)};
r.prototype.Set=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Ep(d,a,c)};r.prototype.op_add=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);hf(c,a)};r.prototype.op_sub=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Jg(c,a)};r.prototype.op_mul=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Hi(c,a)};r.prototype.Length=function(){return mr(this.a)};r.prototype.LengthSquared=function(){return yw(this.a)};r.prototype.Normalize=function(){return xf(this.a)};
r.prototype.IsValid=function(){return!!ap(this.a)};r.prototype.Skew=function(){return n(Kr(this.a),r)};r.prototype.get_x=function(){return xi(this.a)};r.prototype.set_x=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Uu(c,a)};r.prototype.get_y=function(){return Al(this.a)};r.prototype.set_y=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ks(c,a)};r.prototype.__destroy__=function(){Xu(this.a)};
function xx(a,c,d){a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);this.a=void 0===a?Wk():void 0===c?_emscripten_bind_b2Vec3_b2Vec3_1(a):void 0===d?_emscripten_bind_b2Vec3_b2Vec3_2(a,c):gl(a,c,d);k(xx)[this.a]=this}xx.prototype=Object.create(h.prototype);xx.prototype.constructor=xx;xx.prototype.b=xx;xx.c={};b.b2Vec3=xx;xx.prototype.SetZero=function(){pf(this.a)};
xx.prototype.Set=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);pj(e,a,c,d)};xx.prototype.op_add=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);gg(c,a)};xx.prototype.op_sub=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Vn(c,a)};xx.prototype.op_mul=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);iv(c,a)};xx.prototype.get_x=function(){return Xc(this.a)};
xx.prototype.set_x=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Xl(c,a)};xx.prototype.get_y=function(){return Zt(this.a)};xx.prototype.set_y=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Vp(c,a)};xx.prototype.get_z=function(){return Am(this.a)};xx.prototype.set_z=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Pl(c,a)};xx.prototype.__destroy__=function(){gh(this.a)};function zx(){this.a=Do();k(zx)[this.a]=this}zx.prototype=Object.create(h.prototype);
zx.prototype.constructor=zx;zx.prototype.b=zx;zx.c={};b.b2AABB=zx;zx.prototype.IsValid=function(){return!!Yn(this.a)};zx.prototype.GetCenter=function(){return n(Lh(this.a),r)};zx.prototype.GetExtents=function(){return n(eh(this.a),r)};zx.prototype.GetPerimeter=function(){return Pg(this.a)};zx.prototype.Combine=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);void 0===c?Xp(d,a):Ni(d,a,c)};
zx.prototype.Contains=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return!!je(c,a)};zx.prototype.RayCast=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);return!!ck(d,a,c)};zx.prototype.get_lowerBound=function(){return n(ae(this.a),r)};zx.prototype.set_lowerBound=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);hq(c,a)};zx.prototype.get_upperBound=function(){return n(se(this.a),r)};
zx.prototype.set_upperBound=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Je(c,a)};zx.prototype.__destroy__=function(){Jn(this.a)};function Fx(){this.a=Ij();k(Fx)[this.a]=this}Fx.prototype=Object.create(h.prototype);Fx.prototype.constructor=Fx;Fx.prototype.b=Fx;Fx.c={};b.b2FixtureDef=Fx;Fx.prototype.get_shape=function(){return n(Ut(this.a),sx)};Fx.prototype.set_shape=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Yg(c,a)};Fx.prototype.get_userData=function(){return Jd(this.a)};
Fx.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);mc(c,a)};Fx.prototype.get_friction=function(){return st(this.a)};Fx.prototype.set_friction=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);bm(c,a)};Fx.prototype.get_restitution=function(){return Jk(this.a)};Fx.prototype.set_restitution=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Gc(c,a)};Fx.prototype.get_density=function(){return Bd(this.a)};
Fx.prototype.set_density=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ws(c,a)};Fx.prototype.get_isSensor=function(){return!!If(this.a)};Fx.prototype.set_isSensor=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Qj(c,a)};Fx.prototype.get_filter=function(){return n(jc(this.a),yx)};Fx.prototype.set_filter=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vh(c,a)};Fx.prototype.__destroy__=function(){Ov(this.a)};function A(){this.a=Tk();k(A)[this.a]=this}A.prototype=Object.create(t.prototype);
A.prototype.constructor=A;A.prototype.b=A;A.c={};b.b2FrictionJointDef=A;A.prototype.Initialize=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);Sr(e,a,c,d)};A.prototype.get_localAnchorA=function(){return n(Ze(this.a),r)};A.prototype.set_localAnchorA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);zf(c,a)};A.prototype.get_localAnchorB=function(){return n(Me(this.a),r)};
A.prototype.set_localAnchorB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);rj(c,a)};A.prototype.get_maxForce=function(){return tm(this.a)};A.prototype.set_maxForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Im(c,a)};A.prototype.get_maxTorque=function(){return hd(this.a)};A.prototype.set_maxTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ps(c,a)};A.prototype.get_type=function(){return kc(this.a)};
A.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Rr(c,a)};A.prototype.get_userData=function(){return yh(this.a)};A.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Zb(c,a)};A.prototype.get_bodyA=function(){return n(qu(this.a),q)};A.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);zw(c,a)};A.prototype.get_bodyB=function(){return n(mf(this.a),q)};
A.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Iq(c,a)};A.prototype.get_collideConnected=function(){return!!Tr(this.a)};A.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ld(c,a)};A.prototype.__destroy__=function(){Nh(this.a)};function Gx(){this.a=wq();k(Gx)[this.a]=this}Gx.prototype=Object.create(h.prototype);Gx.prototype.constructor=Gx;Gx.prototype.b=Gx;Gx.c={};b.b2Manifold=Gx;
Gx.prototype.get_localNormal=function(){return n(Vk(this.a),r)};Gx.prototype.set_localNormal=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Er(c,a)};Gx.prototype.get_localPoint=function(){return n(ni(this.a),r)};Gx.prototype.set_localPoint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Sm(c,a)};Gx.prototype.get_type=function(){return sk(this.a)};Gx.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);fl(c,a)};Gx.prototype.get_pointCount=function(){return Ef(this.a)};
Gx.prototype.set_pointCount=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);$k(c,a)};Gx.prototype.__destroy__=function(){ug(this.a)};function Hx(){this.a=Dc();k(Hx)[this.a]=this}Hx.prototype=Object.create(h.prototype);Hx.prototype.constructor=Hx;Hx.prototype.b=Hx;Hx.c={};b.b2WorldManifold=Hx;
Hx.prototype.Initialize=function(a,c,d,e,g){var l=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);g&&"object"===typeof g&&(g=g.a);Ll(l,a,c,d,e,g)};Hx.prototype.get_normal=function(){return n(gu(this.a),r)};Hx.prototype.set_normal=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ok(c,a)};Hx.prototype.get_points=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(dl(c,a),r)};
Hx.prototype.set_points=function(a,c){var d=this.a;mx();a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Kj(d,a,c)};Hx.prototype.get_separations=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return pw(c,a)};Hx.prototype.set_separations=function(a,c){var d=this.a;mx();a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);hk(d,a,c)};Hx.prototype.__destroy__=function(){Vm(this.a)};function B(){this.a=bj();k(B)[this.a]=this}B.prototype=Object.create(t.prototype);
B.prototype.constructor=B;B.prototype.b=B;B.c={};b.b2PrismaticJointDef=B;B.prototype.Initialize=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);Jf(g,a,c,d,e)};B.prototype.get_localAnchorA=function(){return n(Ii(this.a),r)};B.prototype.set_localAnchorA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);tt(c,a)};B.prototype.get_localAnchorB=function(){return n(Fe(this.a),r)};
B.prototype.set_localAnchorB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);To(c,a)};B.prototype.get_localAxisA=function(){return n(Iu(this.a),r)};B.prototype.set_localAxisA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Pu(c,a)};B.prototype.get_referenceAngle=function(){return ce(this.a)};B.prototype.set_referenceAngle=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);th(c,a)};B.prototype.get_enableLimit=function(){return!!bt(this.a)};
B.prototype.set_enableLimit=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ql(c,a)};B.prototype.get_lowerTranslation=function(){return Md(this.a)};B.prototype.set_lowerTranslation=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);kd(c,a)};B.prototype.get_upperTranslation=function(){return Dd(this.a)};B.prototype.set_upperTranslation=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);wl(c,a)};B.prototype.get_enableMotor=function(){return!!Es(this.a)};
B.prototype.set_enableMotor=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Jr(c,a)};B.prototype.get_maxMotorForce=function(){return Gw(this.a)};B.prototype.set_maxMotorForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);qv(c,a)};B.prototype.get_motorSpeed=function(){return Wb(this.a)};B.prototype.set_motorSpeed=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Pn(c,a)};B.prototype.get_type=function(){return Mw(this.a)};
B.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Kh(c,a)};B.prototype.get_userData=function(){return kj(this.a)};B.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Qr(c,a)};B.prototype.get_bodyA=function(){return n(es(this.a),q)};B.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);bp(c,a)};B.prototype.get_bodyB=function(){return n(Pk(this.a),q)};
B.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Sk(c,a)};B.prototype.get_collideConnected=function(){return!!Sl(this.a)};B.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);rn(c,a)};B.prototype.__destroy__=function(){ge(this.a)};function C(a){a&&"object"===typeof a&&(a=a.a);this.a=Zh(a);k(C)[this.a]=this}C.prototype=Object.create(h.prototype);C.prototype.constructor=C;C.prototype.b=C;C.c={};b.b2World=C;
C.prototype.SetDestructionListener=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Gv(c,a)};C.prototype.SetContactFilter=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);uw(c,a)};C.prototype.SetContactListener=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);wd(c,a)};C.prototype.SetDebugDraw=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);uf(c,a)};C.prototype.CreateBody=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(Go(c,a),q)};
C.prototype.DestroyBody=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);$c(c,a)};C.prototype.CreateJoint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(xg(c,a),p)};C.prototype.DestroyJoint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);pr(c,a)};C.prototype.Step=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);Zj(e,a,c,d)};C.prototype.ClearForces=function(){fh(this.a)};
C.prototype.DrawDebugData=function(){Ym(this.a)};C.prototype.QueryAABB=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);zv(d,a,c)};C.prototype.RayCast=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);it(e,a,c,d)};C.prototype.GetBodyList=function(){return n(et(this.a),q)};C.prototype.GetJointList=function(){return n(yr(this.a),p)};
C.prototype.GetContactList=function(){return n(nu(this.a),E)};C.prototype.SetAllowSleeping=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vp(c,a)};C.prototype.GetAllowSleeping=function(){return!!fi(this.a)};C.prototype.SetWarmStarting=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);rc(c,a)};C.prototype.GetWarmStarting=function(){return!!cp(this.a)};C.prototype.SetContinuousPhysics=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Em(c,a)};
C.prototype.GetContinuousPhysics=function(){return!!Tv(this.a)};C.prototype.SetSubStepping=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);gf(c,a)};C.prototype.GetSubStepping=function(){return!!dr(this.a)};C.prototype.GetProxyCount=function(){return sd(this.a)};C.prototype.GetBodyCount=function(){return em(this.a)};C.prototype.GetJointCount=function(){return Fn(this.a)};C.prototype.GetContactCount=function(){return Pq(this.a)};C.prototype.GetTreeHeight=function(){return as(this.a)};
C.prototype.GetTreeBalance=function(){return fc(this.a)};C.prototype.GetTreeQuality=function(){return Xd(this.a)};C.prototype.SetGravity=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);It(c,a)};C.prototype.GetGravity=function(){return n(Kc(this.a),r)};C.prototype.IsLocked=function(){return!!ac(this.a)};C.prototype.SetAutoClearForces=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);jd(c,a)};C.prototype.GetAutoClearForces=function(){return!!nk(this.a)};
C.prototype.GetProfile=function(){return n(hu(this.a),y)};C.prototype.Dump=function(){Ss(this.a)};C.prototype.__destroy__=function(){eo(this.a)};function F(){throw"cannot construct a b2PrismaticJoint, no constructor in IDL";}F.prototype=Object.create(p.prototype);F.prototype.constructor=F;F.prototype.b=F;F.c={};b.b2PrismaticJoint=F;F.prototype.GetLocalAnchorA=function(){return n(Jl(this.a),r)};F.prototype.GetLocalAnchorB=function(){return n(op(this.a),r)};
F.prototype.GetLocalAxisA=function(){return n(Ch(this.a),r)};F.prototype.GetReferenceAngle=function(){return jl(this.a)};F.prototype.GetJointTranslation=function(){return bg(this.a)};F.prototype.GetJointSpeed=function(){return hn(this.a)};F.prototype.IsLimitEnabled=function(){return!!$h(this.a)};F.prototype.EnableLimit=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);sm(c,a)};F.prototype.GetLowerLimit=function(){return $d(this.a)};F.prototype.GetUpperLimit=function(){return gk(this.a)};
F.prototype.SetLimits=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Oc(d,a,c)};F.prototype.IsMotorEnabled=function(){return!!al(this.a)};F.prototype.EnableMotor=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vl(c,a)};F.prototype.SetMotorSpeed=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ls(c,a)};F.prototype.GetMotorSpeed=function(){return eg(this.a)};
F.prototype.SetMaxMotorForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Sw(c,a)};F.prototype.GetMaxMotorForce=function(){return $p(this.a)};F.prototype.GetMotorForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return si(c,a)};F.prototype.GetType=function(){return oe(this.a)};F.prototype.GetBodyA=function(){return n(Zp(this.a),q)};F.prototype.GetBodyB=function(){return n(Qt(this.a),q)};F.prototype.GetAnchorA=function(){return n(Zk(this.a),r)};
F.prototype.GetAnchorB=function(){return n(im(this.a),r)};F.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(Oh(c,a),r)};F.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return Ag(c,a)};F.prototype.GetNext=function(){return n(cs(this.a),p)};F.prototype.GetUserData=function(){return ew(this.a)};F.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Jj(c,a)};F.prototype.IsActive=function(){return!!zm(this.a)};
F.prototype.GetCollideConnected=function(){return!!Cg(this.a)};F.prototype.__destroy__=function(){Zf(this.a)};function Ix(){throw"cannot construct a b2RayCastOutput, no constructor in IDL";}Ix.prototype=Object.create(h.prototype);Ix.prototype.constructor=Ix;Ix.prototype.b=Ix;Ix.c={};b.b2RayCastOutput=Ix;Ix.prototype.get_normal=function(){return n(Ff(this.a),r)};Ix.prototype.set_normal=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);lh(c,a)};Ix.prototype.get_fraction=function(){return In(this.a)};
Ix.prototype.set_fraction=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Sd(c,a)};Ix.prototype.__destroy__=function(){Wm(this.a)};function Jx(){throw"cannot construct a b2ContactID, no constructor in IDL";}Jx.prototype=Object.create(h.prototype);Jx.prototype.constructor=Jx;Jx.prototype.b=Jx;Jx.c={};b.b2ContactID=Jx;Jx.prototype.get_cf=function(){return n(Ms(this.a),Ex)};Jx.prototype.set_cf=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);nj(c,a)};Jx.prototype.get_key=function(){return sp(this.a)};
Jx.prototype.set_key=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vf(c,a)};Jx.prototype.__destroy__=function(){cm(this.a)};function Kx(){this.a=Uw();k(Kx)[this.a]=this}Kx.prototype=Object.create(qx.prototype);Kx.prototype.constructor=Kx;Kx.prototype.b=Kx;Kx.c={};b.JSContactListener=Kx;Kx.prototype.BeginContact=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vo(c,a)};Kx.prototype.EndContact=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Vc(c,a)};
Kx.prototype.PreSolve=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);jh(d,a,c)};Kx.prototype.PostSolve=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);xq(d,a,c)};Kx.prototype.__destroy__=function(){Xm(this.a)};
function Lx(a,c,d,e){a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);this.a=void 0===a?ds():void 0===c?_emscripten_bind_b2Mat22_b2Mat22_1(a):void 0===d?bs(a,c):void 0===e?_emscripten_bind_b2Mat22_b2Mat22_3(a,c,d):Ou(a,c,d,e);k(Lx)[this.a]=this}Lx.prototype=Object.create(h.prototype);Lx.prototype.constructor=Lx;Lx.prototype.b=Lx;Lx.c={};b.b2Mat22=Lx;
Lx.prototype.Set=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);rr(d,a,c)};Lx.prototype.SetIdentity=function(){Ku(this.a)};Lx.prototype.SetZero=function(){dk(this.a)};Lx.prototype.GetInverse=function(){return n(br(this.a),Lx)};Lx.prototype.Solve=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(fp(c,a),r)};Lx.prototype.get_ex=function(){return n(No(this.a),r)};
Lx.prototype.set_ex=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ir(c,a)};Lx.prototype.get_ey=function(){return n(Ju(this.a),r)};Lx.prototype.set_ey=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);is(c,a)};Lx.prototype.__destroy__=function(){cv(this.a)};function H(){this.a=Hu();k(H)[this.a]=this}H.prototype=Object.create(t.prototype);H.prototype.constructor=H;H.prototype.b=H;H.c={};b.b2WheelJointDef=H;
H.prototype.Initialize=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);gj(g,a,c,d,e)};H.prototype.get_localAnchorA=function(){return n(nl(this.a),r)};H.prototype.set_localAnchorA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Re(c,a)};H.prototype.get_localAnchorB=function(){return n(Dn(this.a),r)};
H.prototype.set_localAnchorB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ew(c,a)};H.prototype.get_localAxisA=function(){return n(fr(this.a),r)};H.prototype.set_localAxisA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);sw(c,a)};H.prototype.get_enableMotor=function(){return!!xw(this.a)};H.prototype.set_enableMotor=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Lk(c,a)};H.prototype.get_maxMotorTorque=function(){return Ig(this.a)};
H.prototype.set_maxMotorTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);wk(c,a)};H.prototype.get_motorSpeed=function(){return Xr(this.a)};H.prototype.set_motorSpeed=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ap(c,a)};H.prototype.get_frequencyHz=function(){return ot(this.a)};H.prototype.set_frequencyHz=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);cr(c,a)};H.prototype.get_dampingRatio=function(){return Hn(this.a)};
H.prototype.set_dampingRatio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Zv(c,a)};H.prototype.get_type=function(){return ru(this.a)};H.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Wd(c,a)};H.prototype.get_userData=function(){return Ev(this.a)};H.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);hh(c,a)};H.prototype.get_bodyA=function(){return n(Ow(this.a),q)};
H.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Rt(c,a)};H.prototype.get_bodyB=function(){return n(yn(this.a),q)};H.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Yp(c,a)};H.prototype.get_collideConnected=function(){return!!Ec(this.a)};H.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);xr(c,a)};H.prototype.__destroy__=function(){nf(this.a)};function Mx(){this.a=ah();k(Mx)[this.a]=this}
Mx.prototype=Object.create(sx.prototype);Mx.prototype.constructor=Mx;Mx.prototype.b=Mx;Mx.c={};b.b2CircleShape=Mx;Mx.prototype.GetType=function(){return rh(this.a)};Mx.prototype.GetChildCount=function(){return $e(this.a)};Mx.prototype.TestPoint=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);return!!Fq(d,a,c)};
Mx.prototype.RayCast=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);return!!ak(g,a,c,d,e)};Mx.prototype.ComputeAABB=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);$s(e,a,c,d)};Mx.prototype.ComputeMass=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Aq(d,a,c)};
Mx.prototype.get_m_p=function(){return n(Kg(this.a),r)};Mx.prototype.set_m_p=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ej(c,a)};Mx.prototype.get_m_type=function(){return ks(this.a)};Mx.prototype.set_m_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ge(c,a)};Mx.prototype.get_m_radius=function(){return dg(this.a)};Mx.prototype.set_m_radius=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ve(c,a)};Mx.prototype.__destroy__=function(){Nq(this.a)};
function I(){this.a=kw();k(I)[this.a]=this}I.prototype=Object.create(t.prototype);I.prototype.constructor=I;I.prototype.b=I;I.c={};b.b2WeldJointDef=I;I.prototype.Initialize=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);pt(e,a,c,d)};I.prototype.get_localAnchorA=function(){return n(wt(this.a),r)};I.prototype.set_localAnchorA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Di(c,a)};
I.prototype.get_localAnchorB=function(){return n(Cu(this.a),r)};I.prototype.set_localAnchorB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ps(c,a)};I.prototype.get_referenceAngle=function(){return lr(this.a)};I.prototype.set_referenceAngle=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Du(c,a)};I.prototype.get_frequencyHz=function(){return sg(this.a)};I.prototype.set_frequencyHz=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Hr(c,a)};I.prototype.get_dampingRatio=function(){return oq(this.a)};
I.prototype.set_dampingRatio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);hj(c,a)};I.prototype.get_type=function(){return Fp(this.a)};I.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);us(c,a)};I.prototype.get_userData=function(){return Wt(this.a)};I.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);np(c,a)};I.prototype.get_bodyA=function(){return n(ev(this.a),q)};
I.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Te(c,a)};I.prototype.get_bodyB=function(){return n(Sv(this.a),q)};I.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Iv(c,a)};I.prototype.get_collideConnected=function(){return!!yi(this.a)};I.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);fd(c,a)};I.prototype.__destroy__=function(){ep(this.a)};function Nx(){this.a=Up();k(Nx)[this.a]=this}
Nx.prototype=Object.create(h.prototype);Nx.prototype.constructor=Nx;Nx.prototype.b=Nx;Nx.c={};b.b2MassData=Nx;Nx.prototype.get_mass=function(){return ow(this.a)};Nx.prototype.set_mass=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Wc(c,a)};Nx.prototype.get_center=function(){return n(df(this.a),r)};Nx.prototype.set_center=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Tq(c,a)};Nx.prototype.get_I=function(){return Wr(this.a)};
Nx.prototype.set_I=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);jt(c,a)};Nx.prototype.__destroy__=function(){kt(this.a)};function Ox(){throw"cannot construct a b2GearJoint, no constructor in IDL";}Ox.prototype=Object.create(p.prototype);Ox.prototype.constructor=Ox;Ox.prototype.b=Ox;Ox.c={};b.b2GearJoint=Ox;Ox.prototype.GetJoint1=function(){return n(rd(this.a),p)};Ox.prototype.GetJoint2=function(){return n(Qk(this.a),p)};
Ox.prototype.SetRatio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Kn(c,a)};Ox.prototype.GetRatio=function(){return Cd(this.a)};Ox.prototype.GetType=function(){return $v(this.a)};Ox.prototype.GetBodyA=function(){return n(qm(this.a),q)};Ox.prototype.GetBodyB=function(){return n(Lq(this.a),q)};Ox.prototype.GetAnchorA=function(){return n(ud(this.a),r)};Ox.prototype.GetAnchorB=function(){return n(xu(this.a),r)};
Ox.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(Yi(c,a),r)};Ox.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return ed(c,a)};Ox.prototype.GetNext=function(){return n(nv(this.a),p)};Ox.prototype.GetUserData=function(){return ze(this.a)};Ox.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ol(c,a)};Ox.prototype.IsActive=function(){return!!ui(this.a)};Ox.prototype.GetCollideConnected=function(){return!!Nd(this.a)};
Ox.prototype.__destroy__=function(){ag(this.a)};function J(){throw"cannot construct a b2WeldJoint, no constructor in IDL";}J.prototype=Object.create(p.prototype);J.prototype.constructor=J;J.prototype.b=J;J.c={};b.b2WeldJoint=J;J.prototype.GetLocalAnchorA=function(){return n(Wu(this.a),r)};J.prototype.GetLocalAnchorB=function(){return n(zn(this.a),r)};J.prototype.SetFrequency=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ih(c,a)};J.prototype.GetFrequency=function(){return bl(this.a)};
J.prototype.SetDampingRatio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);fe(c,a)};J.prototype.GetDampingRatio=function(){return Xs(this.a)};J.prototype.Dump=function(){Vo(this.a)};J.prototype.GetType=function(){return Jo(this.a)};J.prototype.GetBodyA=function(){return n(Gf(this.a),q)};J.prototype.GetBodyB=function(){return n(ef(this.a),q)};J.prototype.GetAnchorA=function(){return n(uq(this.a),r)};J.prototype.GetAnchorB=function(){return n(tr(this.a),r)};
J.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(Is(c,a),r)};J.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return yc(c,a)};J.prototype.GetNext=function(){return n(Io(this.a),p)};J.prototype.GetUserData=function(){return ml(this.a)};J.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);pi(c,a)};J.prototype.IsActive=function(){return!!tc(this.a)};J.prototype.GetCollideConnected=function(){return!!ar(this.a)};
J.prototype.__destroy__=function(){vq(this.a)};function Px(){this.a=pu();k(Px)[this.a]=this}Px.prototype=Object.create(h.prototype);Px.prototype.constructor=Px;Px.prototype.b=Px;Px.c={};b.b2JointEdge=Px;Px.prototype.get_other=function(){return n(Vi(this.a),q)};Px.prototype.set_other=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);yd(c,a)};Px.prototype.get_joint=function(){return n(Mv(this.a),p)};Px.prototype.set_joint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);oc(c,a)};
Px.prototype.get_prev=function(){return n(fm(this.a),Px)};Px.prototype.set_prev=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);zg(c,a)};Px.prototype.get_next=function(){return n(zo(this.a),Px)};Px.prototype.set_next=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);sr(c,a)};Px.prototype.__destroy__=function(){to(this.a)};function K(){this.a=Sp();k(K)[this.a]=this}K.prototype=Object.create(t.prototype);K.prototype.constructor=K;K.prototype.b=K;K.c={};b.b2PulleyJointDef=K;
K.prototype.Initialize=function(a,c,d,e,g,l,m){var D=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);g&&"object"===typeof g&&(g=g.a);l&&"object"===typeof l&&(l=l.a);m&&"object"===typeof m&&(m=m.a);Wv(D,a,c,d,e,g,l,m)};K.prototype.get_groundAnchorA=function(){return n(kn(this.a),r)};K.prototype.set_groundAnchorA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Qw(c,a)};
K.prototype.get_groundAnchorB=function(){return n(uj(this.a),r)};K.prototype.set_groundAnchorB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);qs(c,a)};K.prototype.get_localAnchorA=function(){return n(Pc(this.a),r)};K.prototype.set_localAnchorA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Dq(c,a)};K.prototype.get_localAnchorB=function(){return n(Ot(this.a),r)};K.prototype.set_localAnchorB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Hd(c,a)};
K.prototype.get_lengthA=function(){return Wl(this.a)};K.prototype.set_lengthA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vg(c,a)};K.prototype.get_lengthB=function(){return oi(this.a)};K.prototype.set_lengthB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ne(c,a)};K.prototype.get_ratio=function(){return Ee(this.a)};K.prototype.set_ratio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);yg(c,a)};K.prototype.get_type=function(){return Yl(this.a)};
K.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ol(c,a)};K.prototype.get_userData=function(){return Rk(this.a)};K.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Hm(c,a)};K.prototype.get_bodyA=function(){return n(Nc(this.a),q)};K.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Jw(c,a)};K.prototype.get_bodyB=function(){return n(Zg(this.a),q)};
K.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Kf(c,a)};K.prototype.get_collideConnected=function(){return!!Tw(this.a)};K.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);tu(c,a)};K.prototype.__destroy__=function(){Si(this.a)};function Qx(){this.a=gi();k(Qx)[this.a]=this}Qx.prototype=Object.create(h.prototype);Qx.prototype.constructor=Qx;Qx.prototype.b=Qx;Qx.c={};b.b2ManifoldPoint=Qx;
Qx.prototype.get_localPoint=function(){return n(Lv(this.a),r)};Qx.prototype.set_localPoint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ct(c,a)};Qx.prototype.get_normalImpulse=function(){return Sj(this.a)};Qx.prototype.set_normalImpulse=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Rh(c,a)};Qx.prototype.get_tangentImpulse=function(){return mq(this.a)};Qx.prototype.set_tangentImpulse=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Oi(c,a)};
Qx.prototype.get_id=function(){return n(cg(this.a),Jx)};Qx.prototype.set_id=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);xn(c,a)};Qx.prototype.__destroy__=function(){jr(this.a)};function Rx(a,c){a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);this.a=void 0===a?Ph():void 0===c?_emscripten_bind_b2Transform_b2Transform_1(a):Hs(a,c);k(Rx)[this.a]=this}Rx.prototype=Object.create(h.prototype);Rx.prototype.constructor=Rx;Rx.prototype.b=Rx;Rx.c={};b.b2Transform=Rx;
Rx.prototype.SetIdentity=function(){Uq(this.a)};Rx.prototype.Set=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Eh(d,a,c)};Rx.prototype.get_p=function(){return n(fu(this.a),r)};Rx.prototype.set_p=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Jv(c,a)};Rx.prototype.get_q=function(){return n(nd(this.a),Bx)};Rx.prototype.set_q=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);qe(c,a)};Rx.prototype.__destroy__=function(){te(this.a)};
function L(){this.a=ij();k(L)[this.a]=this}L.prototype=Object.create(sx.prototype);L.prototype.constructor=L;L.prototype.b=L;L.c={};b.b2ChainShape=L;L.prototype.Clear=function(){Mq(this.a)};L.prototype.CreateLoop=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);qi(d,a,c)};L.prototype.CreateChain=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Yc(d,a,c)};
L.prototype.SetPrevVertex=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Qn(c,a)};L.prototype.SetNextVertex=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ho(c,a)};L.prototype.GetChildEdge=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);zt(d,a,c)};L.prototype.GetType=function(){return om(this.a)};L.prototype.GetChildCount=function(){return $g(this.a)};
L.prototype.TestPoint=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);return!!il(d,a,c)};L.prototype.RayCast=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);return!!Js(g,a,c,d,e)};L.prototype.ComputeAABB=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);wc(e,a,c,d)};
L.prototype.ComputeMass=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);jw(d,a,c)};L.prototype.get_m_vertices=function(){return n(gc(this.a),r)};L.prototype.set_m_vertices=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Af(c,a)};L.prototype.get_m_count=function(){return Vb(this.a)};L.prototype.set_m_count=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Et(c,a)};L.prototype.get_m_prevVertex=function(){return n(dh(this.a),r)};
L.prototype.set_m_prevVertex=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);fo(c,a)};L.prototype.get_m_nextVertex=function(){return n(rf(this.a),r)};L.prototype.set_m_nextVertex=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Uc(c,a)};L.prototype.get_m_hasPrevVertex=function(){return!!Rp(this.a)};L.prototype.set_m_hasPrevVertex=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Wf(c,a)};L.prototype.get_m_hasNextVertex=function(){return!!go(this.a)};
L.prototype.set_m_hasNextVertex=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);hs(c,a)};L.prototype.get_m_type=function(){return tj(this.a)};L.prototype.set_m_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);mg(c,a)};L.prototype.get_m_radius=function(){return Os(this.a)};L.prototype.set_m_radius=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Qs(c,a)};L.prototype.__destroy__=function(){Nl(this.a)};
function Sx(a,c,d){a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);this.a=void 0===a?nt():void 0===c?_emscripten_bind_b2Color_b2Color_1(a):void 0===d?_emscripten_bind_b2Color_b2Color_2(a,c):mt(a,c,d);k(Sx)[this.a]=this}Sx.prototype=Object.create(h.prototype);Sx.prototype.constructor=Sx;Sx.prototype.b=Sx;Sx.c={};b.b2Color=Sx;
Sx.prototype.Set=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);Nw(e,a,c,d)};Sx.prototype.get_r=function(){return Cm(this.a)};Sx.prototype.set_r=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Td(c,a)};Sx.prototype.get_g=function(){return gp(this.a)};Sx.prototype.set_g=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);dc(c,a)};Sx.prototype.get_b=function(){return Ys(this.a)};
Sx.prototype.set_b=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);bf(c,a)};Sx.prototype.__destroy__=function(){Pp(this.a)};function M(){throw"cannot construct a b2RopeJoint, no constructor in IDL";}M.prototype=Object.create(p.prototype);M.prototype.constructor=M;M.prototype.b=M;M.c={};b.b2RopeJoint=M;M.prototype.GetLocalAnchorA=function(){return n(Ar(this.a),r)};M.prototype.GetLocalAnchorB=function(){return n(Ri(this.a),r)};
M.prototype.SetMaxLength=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Yw(c,a)};M.prototype.GetMaxLength=function(){return ye(this.a)};M.prototype.GetLimitState=function(){return Eg(this.a)};M.prototype.GetType=function(){return wp(this.a)};M.prototype.GetBodyA=function(){return n(uv(this.a),q)};M.prototype.GetBodyB=function(){return n(gr(this.a),q)};M.prototype.GetAnchorA=function(){return n(Li(this.a),r)};M.prototype.GetAnchorB=function(){return n(Ie(this.a),r)};
M.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(at(c,a),r)};M.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return Yv(c,a)};M.prototype.GetNext=function(){return n(ip(this.a),p)};M.prototype.GetUserData=function(){return Zc(this.a)};M.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Bs(c,a)};M.prototype.IsActive=function(){return!!yu(this.a)};M.prototype.GetCollideConnected=function(){return!!uu(this.a)};
M.prototype.__destroy__=function(){or(this.a)};function Tx(){throw"cannot construct a b2RayCastInput, no constructor in IDL";}Tx.prototype=Object.create(h.prototype);Tx.prototype.constructor=Tx;Tx.prototype.b=Tx;Tx.c={};b.b2RayCastInput=Tx;Tx.prototype.get_p1=function(){return n(Lp(this.a),r)};Tx.prototype.set_p1=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Wj(c,a)};Tx.prototype.get_p2=function(){return n(kl(this.a),r)};
Tx.prototype.set_p2=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Cf(c,a)};Tx.prototype.get_maxFraction=function(){return pm(this.a)};Tx.prototype.set_maxFraction=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ao(c,a)};Tx.prototype.__destroy__=function(){Oe(this.a)};function N(){this.a=Wi();k(N)[this.a]=this}N.prototype=Object.create(sx.prototype);N.prototype.constructor=N;N.prototype.b=N;N.c={};b.b2PolygonShape=N;
N.prototype.Set=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Xi(d,a,c)};N.prototype.SetAsBox=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);void 0===d?Lw(g,a,c):void 0===e?_emscripten_bind_b2PolygonShape_SetAsBox_3(g,a,c,d):Qu(g,a,c,d,e)};N.prototype.GetVertexCount=function(){return fq(this.a)};
N.prototype.GetVertex=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(Ht(c,a),r)};N.prototype.GetType=function(){return sh(this.a)};N.prototype.GetChildCount=function(){return kp(this.a)};N.prototype.TestPoint=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);return!!Ui(d,a,c)};
N.prototype.RayCast=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);return!!ec(g,a,c,d,e)};N.prototype.ComputeAABB=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);Gl(e,a,c,d)};N.prototype.ComputeMass=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);ul(d,a,c)};
N.prototype.get_m_centroid=function(){return n(Ml(this.a),r)};N.prototype.set_m_centroid=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);wr(c,a)};N.prototype.get_m_count=function(){return Ki(this.a)};N.prototype.set_m_count=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);od(c,a)};N.prototype.get_m_type=function(){return Rw(this.a)};N.prototype.set_m_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);jv(c,a)};N.prototype.get_m_radius=function(){return Cj(this.a)};
N.prototype.set_m_radius=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ww(c,a)};N.prototype.__destroy__=function(){re(this.a)};function O(){this.a=qq();k(O)[this.a]=this}O.prototype=Object.create(sx.prototype);O.prototype.constructor=O;O.prototype.b=O;O.c={};b.b2EdgeShape=O;O.prototype.Set=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Pj(d,a,c)};O.prototype.GetType=function(){return hr(this.a)};O.prototype.GetChildCount=function(){return Hh(this.a)};
O.prototype.TestPoint=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);return!!Kl(d,a,c)};O.prototype.RayCast=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);return!!Ai(g,a,c,d,e)};O.prototype.ComputeAABB=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);vr(e,a,c,d)};
O.prototype.ComputeMass=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);un(d,a,c)};O.prototype.get_m_vertex1=function(){return n(yl(this.a),r)};O.prototype.set_m_vertex1=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ru(c,a)};O.prototype.get_m_vertex2=function(){return n(yo(this.a),r)};O.prototype.set_m_vertex2=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Wq(c,a)};O.prototype.get_m_vertex0=function(){return n(vi(this.a),r)};
O.prototype.set_m_vertex0=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);bw(c,a)};O.prototype.get_m_vertex3=function(){return n(Sq(this.a),r)};O.prototype.set_m_vertex3=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);wu(c,a)};O.prototype.get_m_hasVertex0=function(){return!!dm(this.a)};O.prototype.set_m_hasVertex0=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);we(c,a)};O.prototype.get_m_hasVertex3=function(){return!!Lj(this.a)};
O.prototype.set_m_hasVertex3=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);nc(c,a)};O.prototype.get_m_type=function(){return jp(this.a)};O.prototype.set_m_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);hi(c,a)};O.prototype.get_m_radius=function(){return $r(this.a)};O.prototype.set_m_radius=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);le(c,a)};O.prototype.__destroy__=function(){Ji(this.a)};function Ux(){this.a=Us();k(Ux)[this.a]=this}Ux.prototype=Object.create(tx.prototype);
Ux.prototype.constructor=Ux;Ux.prototype.b=Ux;Ux.c={};b.JSContactFilter=Ux;Ux.prototype.ShouldCollide=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);return!!Tj(d,a,c)};Ux.prototype.__destroy__=function(){Aj(this.a)};function P(){this.a=Om();k(P)[this.a]=this}P.prototype=Object.create(t.prototype);P.prototype.constructor=P;P.prototype.b=P;P.c={};b.b2RevoluteJointDef=P;
P.prototype.Initialize=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);Id(e,a,c,d)};P.prototype.get_localAnchorA=function(){return n(tn(this.a),r)};P.prototype.set_localAnchorA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);qj(c,a)};P.prototype.get_localAnchorB=function(){return n(yj(this.a),r)};P.prototype.set_localAnchorB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);An(c,a)};
P.prototype.get_referenceAngle=function(){return zj(this.a)};P.prototype.set_referenceAngle=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Np(c,a)};P.prototype.get_enableLimit=function(){return!!Rm(this.a)};P.prototype.set_enableLimit=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);dp(c,a)};P.prototype.get_lowerAngle=function(){return el(this.a)};P.prototype.set_lowerAngle=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);so(c,a)};P.prototype.get_upperAngle=function(){return aq(this.a)};
P.prototype.set_upperAngle=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);lm(c,a)};P.prototype.get_enableMotor=function(){return!!Bj(this.a)};P.prototype.set_enableMotor=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ji(c,a)};P.prototype.get_motorSpeed=function(){return Df(this.a)};P.prototype.set_motorSpeed=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vw(c,a)};P.prototype.get_maxMotorTorque=function(){return nq(this.a)};
P.prototype.set_maxMotorTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Hv(c,a)};P.prototype.get_type=function(){return mm(this.a)};P.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Vj(c,a)};P.prototype.get_userData=function(){return on(this.a)};P.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Cc(c,a)};P.prototype.get_bodyA=function(){return n(Pt(this.a),q)};
P.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ah(c,a)};P.prototype.get_bodyB=function(){return n(Hj(this.a),q)};P.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ng(c,a)};P.prototype.get_collideConnected=function(){return!!rs(this.a)};P.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Zo(c,a)};P.prototype.__destroy__=function(){pp(this.a)};function Vx(){this.a=du();k(Vx)[this.a]=this}
Vx.prototype=Object.create(ox.prototype);Vx.prototype.constructor=Vx;Vx.prototype.b=Vx;Vx.c={};b.JSDraw=Vx;Vx.prototype.DrawPolygon=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);tl(e,a,c,d)};Vx.prototype.DrawSolidPolygon=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);Nf(e,a,c,d)};
Vx.prototype.DrawCircle=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);sc(e,a,c,d)};Vx.prototype.DrawSolidCircle=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);hc(g,a,c,d,e)};
Vx.prototype.DrawSegment=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);jf(e,a,c,d)};Vx.prototype.DrawTransform=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vj(c,a)};Vx.prototype.__destroy__=function(){Qf(this.a)};function Q(){throw"cannot construct a b2WheelJoint, no constructor in IDL";}Q.prototype=Object.create(p.prototype);Q.prototype.constructor=Q;Q.prototype.b=Q;Q.c={};b.b2WheelJoint=Q;
Q.prototype.GetLocalAnchorA=function(){return n(Vf(this.a),r)};Q.prototype.GetLocalAnchorB=function(){return n(Iw(this.a),r)};Q.prototype.GetLocalAxisA=function(){return n(rv(this.a),r)};Q.prototype.GetJointTranslation=function(){return zs(this.a)};Q.prototype.GetJointSpeed=function(){return yf(this.a)};Q.prototype.IsMotorEnabled=function(){return!!kq(this.a)};Q.prototype.EnableMotor=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Lf(c,a)};
Q.prototype.SetMotorSpeed=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);be(c,a)};Q.prototype.GetMotorSpeed=function(){return Gn(this.a)};Q.prototype.SetMaxMotorTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ik(c,a)};Q.prototype.GetMaxMotorTorque=function(){return wf(this.a)};Q.prototype.GetMotorTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return As(c,a)};Q.prototype.SetSpringFrequencyHz=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Mh(c,a)};
Q.prototype.GetSpringFrequencyHz=function(){return Aw(this.a)};Q.prototype.SetSpringDampingRatio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);no(c,a)};Q.prototype.GetSpringDampingRatio=function(){return Tb(this.a)};Q.prototype.GetType=function(){return kv(this.a)};Q.prototype.GetBodyA=function(){return n(Zn(this.a),q)};Q.prototype.GetBodyB=function(){return n(xm(this.a),q)};Q.prototype.GetAnchorA=function(){return n(Or(this.a),r)};
Q.prototype.GetAnchorB=function(){return n(Kw(this.a),r)};Q.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(ff(c,a),r)};Q.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return Nm(c,a)};Q.prototype.GetNext=function(){return n(Wn(this.a),p)};Q.prototype.GetUserData=function(){return Un(this.a)};Q.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ct(c,a)};Q.prototype.IsActive=function(){return!!Ds(this.a)};
Q.prototype.GetCollideConnected=function(){return!!Zr(this.a)};Q.prototype.__destroy__=function(){Vw(this.a)};function R(){throw"cannot construct a b2PulleyJoint, no constructor in IDL";}R.prototype=Object.create(p.prototype);R.prototype.constructor=R;R.prototype.b=R;R.c={};b.b2PulleyJoint=R;R.prototype.GetGroundAnchorA=function(){return n(cd(this.a),r)};R.prototype.GetGroundAnchorB=function(){return n(fg(this.a),r)};R.prototype.GetLengthA=function(){return ao(this.a)};R.prototype.GetLengthB=function(){return fk(this.a)};
R.prototype.GetRatio=function(){return uo(this.a)};R.prototype.GetCurrentLengthA=function(){return Uk(this.a)};R.prototype.GetCurrentLengthB=function(){return Gi(this.a)};R.prototype.GetType=function(){return Ci(this.a)};R.prototype.GetBodyA=function(){return n(yq(this.a),q)};R.prototype.GetBodyB=function(){return n(Vd(this.a),q)};R.prototype.GetAnchorA=function(){return n($u(this.a),r)};R.prototype.GetAnchorB=function(){return n(Mm(this.a),r)};
R.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(Mu(c,a),r)};R.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return hv(c,a)};R.prototype.GetNext=function(){return n(sj(this.a),p)};R.prototype.GetUserData=function(){return xc(this.a)};R.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Xb(c,a)};R.prototype.IsActive=function(){return!!ki(this.a)};R.prototype.GetCollideConnected=function(){return!!bu(this.a)};
R.prototype.__destroy__=function(){Po(this.a)};function S(){this.a=Gp();k(S)[this.a]=this}S.prototype=Object.create(t.prototype);S.prototype.constructor=S;S.prototype.b=S;S.c={};b.b2MouseJointDef=S;S.prototype.get_target=function(){return n(Fm(this.a),r)};S.prototype.set_target=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);zd(c,a)};S.prototype.get_maxForce=function(){return ov(this.a)};S.prototype.set_maxForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Il(c,a)};
S.prototype.get_frequencyHz=function(){return Jp(this.a)};S.prototype.set_frequencyHz=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);jn(c,a)};S.prototype.get_dampingRatio=function(){return kg(this.a)};S.prototype.set_dampingRatio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Qo(c,a)};S.prototype.get_type=function(){return Dp(this.a)};S.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Pd(c,a)};S.prototype.get_userData=function(){return Zs(this.a)};
S.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Fc(c,a)};S.prototype.get_bodyA=function(){return n(Gk(this.a),q)};S.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vd(c,a)};S.prototype.get_bodyB=function(){return n(qg(this.a),q)};S.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);qh(c,a)};S.prototype.get_collideConnected=function(){return!!Jt(this.a)};
S.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Yq(c,a)};S.prototype.__destroy__=function(){Rf(this.a)};function E(){throw"cannot construct a b2Contact, no constructor in IDL";}E.prototype=Object.create(h.prototype);E.prototype.constructor=E;E.prototype.b=E;E.c={};b.b2Contact=E;E.prototype.GetManifold=function(){return n(ut(this.a),Gx)};E.prototype.GetWorldManifold=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);xe(c,a)};E.prototype.IsTouching=function(){return!!he(this.a)};
E.prototype.SetEnabled=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);sf(c,a)};E.prototype.IsEnabled=function(){return!!wg(this.a)};E.prototype.GetNext=function(){return n(pd(this.a),E)};E.prototype.GetFixtureA=function(){return n(De(this.a),v)};E.prototype.GetChildIndexA=function(){return lw(this.a)};E.prototype.GetFixtureB=function(){return n(iw(this.a),v)};E.prototype.GetChildIndexB=function(){return ph(this.a)};
E.prototype.SetFriction=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Xq(c,a)};E.prototype.GetFriction=function(){return Uh(this.a)};E.prototype.ResetFriction=function(){Ih(this.a)};E.prototype.SetRestitution=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Qq(c,a)};E.prototype.GetRestitution=function(){return mn(this.a)};E.prototype.ResetRestitution=function(){ei(this.a)};E.prototype.SetTangentSpeed=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);aj(c,a)};
E.prototype.GetTangentSpeed=function(){return ld(this.a)};function T(){this.a=Jm();k(T)[this.a]=this}T.prototype=Object.create(t.prototype);T.prototype.constructor=T;T.prototype.b=T;T.c={};b.b2DistanceJointDef=T;T.prototype.Initialize=function(a,c,d,e){var g=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);e&&"object"===typeof e&&(e=e.a);Ns(g,a,c,d,e)};T.prototype.get_localAnchorA=function(){return n(Zi(this.a),r)};
T.prototype.set_localAnchorA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);He(c,a)};T.prototype.get_localAnchorB=function(){return n(Bq(this.a),r)};T.prototype.set_localAnchorB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Eu(c,a)};T.prototype.get_length=function(){return Ud(this.a)};T.prototype.set_length=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Wh(c,a)};T.prototype.get_frequencyHz=function(){return bo(this.a)};
T.prototype.set_frequencyHz=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);xj(c,a)};T.prototype.get_dampingRatio=function(){return me(this.a)};T.prototype.set_dampingRatio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Sc(c,a)};T.prototype.get_type=function(){return ai(this.a)};T.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);tq(c,a)};T.prototype.get_userData=function(){return Ac(this.a)};
T.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Rc(c,a)};T.prototype.get_bodyA=function(){return n(Mi(this.a),q)};T.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ss(c,a)};T.prototype.get_bodyB=function(){return n(bv(this.a),q)};T.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Qp(c,a)};T.prototype.get_collideConnected=function(){return!!Mp(this.a)};
T.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Tn(c,a)};T.prototype.__destroy__=function(){iu(this.a)};function q(){throw"cannot construct a b2Body, no constructor in IDL";}q.prototype=Object.create(h.prototype);q.prototype.constructor=q;q.prototype.b=q;q.c={};b.b2Body=q;q.prototype.CreateFixture=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);return void 0===c?n(cu(d,a),v):n(Cl(d,a,c),v)};
q.prototype.DestroyFixture=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Bn(c,a)};q.prototype.SetTransform=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Gm(d,a,c)};q.prototype.GetTransform=function(){return n(Lt(this.a),Rx)};q.prototype.GetPosition=function(){return n(Sg(this.a),r)};q.prototype.GetAngle=function(){return Fw(this.a)};q.prototype.GetWorldCenter=function(){return n(vk(this.a),r)};
q.prototype.GetLocalCenter=function(){return n(Nv(this.a),r)};q.prototype.SetLinearVelocity=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);jm(c,a)};q.prototype.GetLinearVelocity=function(){return n(ue(this.a),r)};q.prototype.SetAngularVelocity=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Vt(c,a)};q.prototype.GetAngularVelocity=function(){return dj(this.a)};
q.prototype.ApplyForce=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);Dt(e,a,c,d)};q.prototype.ApplyForceToCenter=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Pe(d,a,c)};q.prototype.ApplyTorque=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);wh(d,a,c)};
q.prototype.ApplyLinearImpulse=function(a,c,d){var e=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);d&&"object"===typeof d&&(d=d.a);Ln(e,a,c,d)};q.prototype.ApplyAngularImpulse=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);Qd(d,a,c)};q.prototype.GetMass=function(){return jo(this.a)};q.prototype.GetInertia=function(){return Zu(this.a)};q.prototype.GetMassData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);sn(c,a)};
q.prototype.SetMassData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);de(c,a)};q.prototype.ResetMassData=function(){pn(this.a)};q.prototype.GetWorldPoint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(Rj(c,a),r)};q.prototype.GetWorldVector=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(rg(c,a),r)};q.prototype.GetLocalPoint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(Bg(c,a),r)};
q.prototype.GetLocalVector=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(rm(c,a),r)};q.prototype.GetLinearVelocityFromWorldPoint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n($q(c,a),r)};q.prototype.GetLinearVelocityFromLocalPoint=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(Hq(c,a),r)};q.prototype.GetLinearDamping=function(){return Gr(this.a)};q.prototype.SetLinearDamping=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);wm(c,a)};
q.prototype.GetAngularDamping=function(){return Bk(this.a)};q.prototype.SetAngularDamping=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ci(c,a)};q.prototype.GetGravityScale=function(){return oj(this.a)};q.prototype.SetGravityScale=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Tl(c,a)};q.prototype.SetType=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);io(c,a)};q.prototype.GetType=function(){return ls(this.a)};
q.prototype.SetBullet=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Hk(c,a)};q.prototype.IsBullet=function(){return!!pl(this.a)};q.prototype.SetSleepingAllowed=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Xk(c,a)};q.prototype.IsSleepingAllowed=function(){return!!bq(this.a)};q.prototype.SetAwake=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Vu(c,a)};q.prototype.IsAwake=function(){return!!xd(this.a)};
q.prototype.SetActive=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Dl(c,a)};q.prototype.IsActive=function(){return!!di(this.a)};q.prototype.SetFixedRotation=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);kh(c,a)};q.prototype.IsFixedRotation=function(){return!!Sh(this.a)};q.prototype.GetFixtureList=function(){return n(Oo(this.a),v)};q.prototype.GetJointList=function(){return n(ft(this.a),Px)};q.prototype.GetContactList=function(){return n(Vh(this.a),Wx)};
q.prototype.GetNext=function(){return n(sv(this.a),q)};q.prototype.GetUserData=function(){return Ak(this.a)};q.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ti(c,a)};q.prototype.GetWorld=function(){return n(Su(this.a),C)};q.prototype.Dump=function(){tk(this.a)};function U(){throw"cannot construct a b2FrictionJoint, no constructor in IDL";}U.prototype=Object.create(p.prototype);U.prototype.constructor=U;U.prototype.b=U;U.c={};b.b2FrictionJoint=U;
U.prototype.GetLocalAnchorA=function(){return n(Yo(this.a),r)};U.prototype.GetLocalAnchorB=function(){return n(Yh(this.a),r)};U.prototype.SetMaxForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Xt(c,a)};U.prototype.GetMaxForce=function(){return Dv(this.a)};U.prototype.SetMaxTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ip(c,a)};U.prototype.GetMaxTorque=function(){return zi(this.a)};U.prototype.GetType=function(){return hg(this.a)};
U.prototype.GetBodyA=function(){return n(Dw(this.a),q)};U.prototype.GetBodyB=function(){return n(Se(this.a),q)};U.prototype.GetAnchorA=function(){return n(Ur(this.a),r)};U.prototype.GetAnchorB=function(){return n(yv(this.a),r)};U.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(rq(c,a),r)};U.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return kk(c,a)};U.prototype.GetNext=function(){return n(xs(this.a),p)};
U.prototype.GetUserData=function(){return Cr(this.a)};U.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Kp(c,a)};U.prototype.IsActive=function(){return!!cc(this.a)};U.prototype.GetCollideConnected=function(){return!!zp(this.a)};U.prototype.__destroy__=function(){Uo(this.a)};function Xx(){throw"cannot construct a b2DestructionListener, no constructor in IDL";}Xx.prototype=Object.create(h.prototype);Xx.prototype.constructor=Xx;Xx.prototype.b=Xx;Xx.c={};
b.b2DestructionListener=Xx;Xx.prototype.__destroy__=function(){uc(this.a)};function W(){this.a=en();k(W)[this.a]=this}W.prototype=Object.create(t.prototype);W.prototype.constructor=W;W.prototype.b=W;W.c={};b.b2GearJointDef=W;W.prototype.get_joint1=function(){return n(ri(this.a),p)};W.prototype.set_joint1=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Vq(c,a)};W.prototype.get_joint2=function(){return n(ym(this.a),p)};
W.prototype.set_joint2=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);vu(c,a)};W.prototype.get_ratio=function(){return lp(this.a)};W.prototype.set_ratio=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);tg(c,a)};W.prototype.get_type=function(){return nm(this.a)};W.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Be(c,a)};W.prototype.get_userData=function(){return an(this.a)};
W.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);fw(c,a)};W.prototype.get_bodyA=function(){return n(wj(this.a),q)};W.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ju(c,a)};W.prototype.get_bodyB=function(){return n(vn(this.a),q)};W.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Xv(c,a)};W.prototype.get_collideConnected=function(){return!!Ek(this.a)};
W.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);$o(c,a)};W.prototype.__destroy__=function(){Cq(this.a)};function X(){throw"cannot construct a b2RevoluteJoint, no constructor in IDL";}X.prototype=Object.create(p.prototype);X.prototype.constructor=X;X.prototype.b=X;X.c={};b.b2RevoluteJoint=X;X.prototype.GetLocalAnchorA=function(){return n(ic(this.a),r)};X.prototype.GetLocalAnchorB=function(){return n(Ts(this.a),r)};X.prototype.GetReferenceAngle=function(){return Ed(this.a)};
X.prototype.GetJointAngle=function(){return Pf(this.a)};X.prototype.GetJointSpeed=function(){return Mf(this.a)};X.prototype.IsLimitEnabled=function(){return!!Fv(this.a)};X.prototype.EnableLimit=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ng(c,a)};X.prototype.GetLowerLimit=function(){return uk(this.a)};X.prototype.GetUpperLimit=function(){return Vl(this.a)};X.prototype.SetLimits=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);ts(d,a,c)};
X.prototype.IsMotorEnabled=function(){return!!Gt(this.a)};X.prototype.EnableMotor=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);oh(c,a)};X.prototype.SetMotorSpeed=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);co(c,a)};X.prototype.GetMotorSpeed=function(){return lg(this.a)};X.prototype.SetMaxMotorTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);nh(c,a)};X.prototype.GetMaxMotorTorque=function(){return Nj(this.a)};
X.prototype.GetMotorTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return qt(c,a)};X.prototype.GetType=function(){return Tp(this.a)};X.prototype.GetBodyA=function(){return n(mj(this.a),q)};X.prototype.GetBodyB=function(){return n(Mk(this.a),q)};X.prototype.GetAnchorA=function(){return n(Mr(this.a),r)};X.prototype.GetAnchorB=function(){return n(cw(this.a),r)};X.prototype.GetReactionForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return n(su(c,a),r)};
X.prototype.GetReactionTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);return bh(c,a)};X.prototype.GetNext=function(){return n(dv(this.a),p)};X.prototype.GetUserData=function(){return Hc(this.a)};X.prototype.SetUserData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);mi(c,a)};X.prototype.IsActive=function(){return!!mv(this.a)};X.prototype.GetCollideConnected=function(){return!!Qg(this.a)};X.prototype.__destroy__=function(){xh(this.a)};
function Wx(){this.a=ms();k(Wx)[this.a]=this}Wx.prototype=Object.create(h.prototype);Wx.prototype.constructor=Wx;Wx.prototype.b=Wx;Wx.c={};b.b2ContactEdge=Wx;Wx.prototype.get_other=function(){return n(Qi(this.a),q)};Wx.prototype.set_other=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Fi(c,a)};Wx.prototype.get_contact=function(){return n(nn(this.a),E)};Wx.prototype.set_contact=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);lu(c,a)};
Wx.prototype.get_prev=function(){return n(Ug(this.a),Wx)};Wx.prototype.set_prev=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Bw(c,a)};Wx.prototype.get_next=function(){return n(Og(this.a),Wx)};Wx.prototype.set_next=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ub(c,a)};Wx.prototype.__destroy__=function(){Xe(this.a)};function Y(){this.a=Xj();k(Y)[this.a]=this}Y.prototype=Object.create(t.prototype);Y.prototype.constructor=Y;Y.prototype.b=Y;Y.c={};b.b2RopeJointDef=Y;
Y.prototype.get_localAnchorA=function(){return n(Zm(this.a),r)};Y.prototype.set_localAnchorA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);gs(c,a)};Y.prototype.get_localAnchorB=function(){return n(Kq(this.a),r)};Y.prototype.set_localAnchorB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);dw(c,a)};Y.prototype.get_maxLength=function(){return Fk(this.a)};Y.prototype.set_maxLength=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);hl(c,a)};Y.prototype.get_type=function(){return zq(this.a)};
Y.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ok(c,a)};Y.prototype.get_userData=function(){return Nn(this.a)};Y.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Ho(c,a)};Y.prototype.get_bodyA=function(){return n(Bu(this.a),q)};Y.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);$f(c,a)};Y.prototype.get_bodyB=function(){return n(mw(this.a),q)};
Y.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Zd(c,a)};Y.prototype.get_collideConnected=function(){return!!uh(this.a)};Y.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Tc(c,a)};Y.prototype.__destroy__=function(){Cs(this.a)};function Z(){this.a=Mg();k(Z)[this.a]=this}Z.prototype=Object.create(t.prototype);Z.prototype.constructor=Z;Z.prototype.b=Z;Z.c={};b.b2MotorJointDef=Z;
Z.prototype.Initialize=function(a,c){var d=this.a;a&&"object"===typeof a&&(a=a.a);c&&"object"===typeof c&&(c=c.a);hm(d,a,c)};Z.prototype.get_linearOffset=function(){return n(gm(this.a),r)};Z.prototype.set_linearOffset=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);wo(c,a)};Z.prototype.get_angularOffset=function(){return Bt(this.a)};Z.prototype.set_angularOffset=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);js(c,a)};Z.prototype.get_maxForce=function(){return zc(this.a)};
Z.prototype.set_maxForce=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);St(c,a)};Z.prototype.get_maxTorque=function(){return Gq(this.a)};Z.prototype.set_maxTorque=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Vv(c,a)};Z.prototype.get_correctionFactor=function(){return qp(this.a)};Z.prototype.set_correctionFactor=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);yt(c,a)};Z.prototype.get_type=function(){return zr(this.a)};
Z.prototype.set_type=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);lc(c,a)};Z.prototype.get_userData=function(){return mu(this.a)};Z.prototype.set_userData=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);qd(c,a)};Z.prototype.get_bodyA=function(){return n(ww(this.a),q)};Z.prototype.set_bodyA=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);ql(c,a)};Z.prototype.get_bodyB=function(){return n(Gu(this.a),q)};
Z.prototype.set_bodyB=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);Fs(c,a)};Z.prototype.get_collideConnected=function(){return!!Fd(this.a)};Z.prototype.set_collideConnected=function(a){var c=this.a;a&&"object"===typeof a&&(a=a.a);hw(c,a)};Z.prototype.__destroy__=function(){vs(this.a)};
(function(){function a(){b.b2Shape.e_circle=pk();b.b2Shape.e_edge=Mj();b.b2Shape.e_polygon=Yu();b.b2Shape.e_chain=$n();b.b2Shape.e_typeCount=Mt();b.e_unknownJoint=ii();b.e_revoluteJoint=wi();b.e_prismaticJoint=kr();b.e_distanceJoint=mo();b.e_pulleyJoint=qf();b.e_mouseJoint=At();b.e_gearJoint=rt();b.e_wheelJoint=Ve();b.e_weldJoint=Dm();b.e_frictionJoint=Rd();b.e_ropeJoint=Qv();b.e_motorJoint=xo();b.e_inactiveLimit=Tu();b.e_atLowerLimit=wn();b.e_atUpperLimit=Pw();b.e_equalLimits=Qh();b.b2Manifold.e_circles=
Gd();b.b2Manifold.e_faceA=Fj();b.b2Manifold.e_faceB=Gj();b.b2_staticBody=km();b.b2_kinematicBody=Dj();b.b2_dynamicBody=Eq();b.b2Draw.e_shapeBit=Th();b.b2Draw.e_jointBit=Hf();b.b2Draw.e_aabbBit=ur();b.b2Draw.e_pairBit=Vr();b.b2Draw.e_centerOfMassBit=Fo();b.b2ContactFeature.e_vertex=Ko();b.b2ContactFeature.e_face=Ul()}b.calledRun?a():kb.unshift(a)})();

  return Box2D;
};

</script>
<script>
'use strict';(function(){var isKasperskyScriptInjected=!!document.querySelector('script[src*="kaspersky"]');var tmpCanvas=document.createElement("canvas");var hasWebGL=!!tmpCanvas.getContext("webgl");var missingFeatures=[];if(!hasWebGL)missingFeatures.push("WebGL");if(typeof WebAssembly==="undefined")missingFeatures.push("WebAssembly");if(!("noModule"in HTMLScriptElement.prototype))missingFeatures.push("JavaScript Modules");if(missingFeatures.length===0&&!isKasperskyScriptInjected)window["C3_IsSupported"]=
true;else{var msgWrap=document.createElement("div");msgWrap.id="notSupportedWrap";document.body.appendChild(msgWrap);var msgTitle=document.createElement("h2");msgTitle.id="notSupportedTitle";if(isKasperskyScriptInjected)msgTitle.textContent="Kaspersky Internet Security broke this export";else msgTitle.textContent="Software update needed";msgWrap.appendChild(msgTitle);var msgBody=document.createElement("p");msgBody.className="notSupportedMessage";var msgText="This content is not supported because your device's software appears to be out-of-date. ";
var ua=navigator.userAgent;if(/android/i.test(ua))msgText+='<br><br>On Android, fix this by making sure the <a href="https://play.google.com/store/apps/details?id=com.google.android.webview">Android System Webview</a> app has updates enabled and is up-to-date.';else if(/iphone|ipad|ipod/i.test(ua)){msgText+="Alternatively if <strong>Lockdown mode</strong> is enabled, try turning it off to view this content.";msgText+="<br><br>Note: using the <strong>iOS simulator</strong> requires <strong>Xcode 12+</strong>. Otherwise try testing on a real device instead."}else if(/msie/i.test(ua)||
/trident/i.test(ua)||/edge\//i.test(ua))msgText+="<br><br>Note: <strong>Internet Explorer</strong> and the <strong>legacy Edge browser</strong> are not supported. Try using <a href='https://www.google.com/chrome'>Chrome</a> or <a href='https://www.mozilla.org/firefox'>Firefox</a> instead.";else if(isKasperskyScriptInjected)msgText="It appears a script was added to this export by Kaspersky software. This prevents the exported project from working. Try disabling Kaspersky and exporting again.";else msgText+=
"Try installing any available software updates. Alternatively try on a different device.";msgText+="<br><br><em>Missing features: "+missingFeatures.join(", ")+"<br>User agent: "+navigator.userAgent+"</em>";msgBody.innerHTML=msgText;msgWrap.appendChild(msgBody)}})();

</script>
<script>
//working/358166968/main.js
'use strict';{window.DOMHandler=class DOMHandler{constructor(iRuntime,componentId){this._iRuntime=iRuntime;this._componentId=componentId;this._hasTickCallback=false;this._tickCallback=()=>this.Tick()}Attach(){}PostToRuntime(handler,data,dispatchOpts,transferables){this._iRuntime.PostToRuntimeComponent(this._componentId,handler,data,dispatchOpts,transferables)}PostToRuntimeAsync(handler,data,dispatchOpts,transferables){return this._iRuntime.PostToRuntimeComponentAsync(this._componentId,handler,data,
dispatchOpts,transferables)}_PostToRuntimeMaybeSync(name,data,dispatchOpts){if(this._iRuntime.UsesWorker())this.PostToRuntime(name,data,dispatchOpts);else this._iRuntime._GetLocalRuntime()["_OnMessageFromDOM"]({"type":"event","component":this._componentId,"handler":name,"dispatchOpts":dispatchOpts||null,"data":data,"responseId":null})}AddRuntimeMessageHandler(handler,func){this._iRuntime.AddRuntimeComponentMessageHandler(this._componentId,handler,func)}AddRuntimeMessageHandlers(list){for(const [handler,
func]of list)this.AddRuntimeMessageHandler(handler,func)}GetRuntimeInterface(){return this._iRuntime}GetComponentID(){return this._componentId}_StartTicking(){if(this._hasTickCallback)return;this._iRuntime._AddRAFCallback(this._tickCallback);this._hasTickCallback=true}_StopTicking(){if(!this._hasTickCallback)return;this._iRuntime._RemoveRAFCallback(this._tickCallback);this._hasTickCallback=false}Tick(){}};window.RateLimiter=class RateLimiter{constructor(callback,interval){this._callback=callback;
this._interval=interval;this._timerId=-1;this._lastCallTime=-Infinity;this._timerCallFunc=()=>this._OnTimer();this._ignoreReset=false;this._canRunImmediate=false}SetCanRunImmediate(c){this._canRunImmediate=!!c}Call(){if(this._timerId!==-1)return;const nowTime=Date.now();const timeSinceLastCall=nowTime-this._lastCallTime;const interval=this._interval;if(timeSinceLastCall>=interval&&this._canRunImmediate){this._lastCallTime=nowTime;this._RunCallback()}else this._timerId=self.setTimeout(this._timerCallFunc,
Math.max(interval-timeSinceLastCall,4))}_RunCallback(){this._ignoreReset=true;this._callback();this._ignoreReset=false}Reset(){if(this._ignoreReset)return;this._CancelTimer();this._lastCallTime=Date.now()}_OnTimer(){this._timerId=-1;this._lastCallTime=Date.now();this._RunCallback()}_CancelTimer(){if(this._timerId!==-1){self.clearTimeout(this._timerId);this._timerId=-1}}Release(){this._CancelTimer();this._callback=null;this._timerCallFunc=null}}};


'use strict';{class ElementState{constructor(elem){this._elem=elem;this._hadFirstUpdate=false;this._isVisibleFlag=true}SetVisibleFlag(f){this._isVisibleFlag=!!f}GetVisibleFlag(){return this._isVisibleFlag}HadFirstUpdate(){return this._hadFirstUpdate}SetHadFirstUpdate(){this._hadFirstUpdate=true}GetElement(){return this._elem}}window.DOMElementHandler=class DOMElementHandler extends self.DOMHandler{constructor(iRuntime,componentId){super(iRuntime,componentId);this._elementMap=new Map;this._autoAttach=
true;this.AddRuntimeMessageHandlers([["create",e=>this._OnCreate(e)],["destroy",e=>this._OnDestroy(e)],["set-visible",e=>this._OnSetVisible(e)],["update-position",e=>this._OnUpdatePosition(e)],["update-state",e=>this._OnUpdateState(e)],["focus",e=>this._OnSetFocus(e)],["set-css-style",e=>this._OnSetCssStyle(e)],["set-attribute",e=>this._OnSetAttribute(e)],["remove-attribute",e=>this._OnRemoveAttribute(e)]]);this.AddDOMElementMessageHandler("get-element",elem=>elem)}SetAutoAttach(e){this._autoAttach=
!!e}AddDOMElementMessageHandler(handler,func){this.AddRuntimeMessageHandler(handler,e=>{const elementId=e["elementId"];const elem=this.GetElementById(elementId);return func(elem,e)})}_OnCreate(e){const elementId=e["elementId"];const elem=this.CreateElement(elementId,e);const elementState=new ElementState(elem);this._elementMap.set(elementId,elementState);elem.style.boxSizing="border-box";elem.style.display="none";elementState.SetVisibleFlag(e["isVisible"]);const focusElem=this._GetFocusElement(elem);
focusElem.addEventListener("focus",e=>this._OnFocus(elementId));focusElem.addEventListener("blur",e=>this._OnBlur(elementId));if(this._autoAttach)document.body.appendChild(elem)}CreateElement(elementId,e){throw new Error("required override");}DestroyElement(elem){}_OnDestroy(e){const elementId=e["elementId"];const elem=this.GetElementById(elementId);this.DestroyElement(elem);if(this._autoAttach)elem.parentElement.removeChild(elem);this._elementMap.delete(elementId)}PostToRuntimeElement(handler,elementId,
data){if(!data)data={};data["elementId"]=elementId;this.PostToRuntime(handler,data)}_PostToRuntimeElementMaybeSync(handler,elementId,data){if(!data)data={};data["elementId"]=elementId;this._PostToRuntimeMaybeSync(handler,data)}_OnSetVisible(e){if(!this._autoAttach)return;const elemState=this._elementMap.get(e["elementId"]);const elem=elemState.GetElement();if(elemState.HadFirstUpdate())elem.style.display=e["isVisible"]?"":"none";else elemState.SetVisibleFlag(e["isVisible"])}_OnUpdatePosition(e){if(!this._autoAttach)return;
const elemState=this._elementMap.get(e["elementId"]);const elem=elemState.GetElement();elem.style.left=e["left"]+"px";elem.style.top=e["top"]+"px";elem.style.width=e["width"]+"px";elem.style.height=e["height"]+"px";const fontSize=e["fontSize"];if(fontSize!==null)elem.style.fontSize=fontSize+"em";if(!elemState.HadFirstUpdate()){elemState.SetHadFirstUpdate();if(elemState.GetVisibleFlag())elem.style.display=""}}_OnUpdateState(e){const elem=this.GetElementById(e["elementId"]);this.UpdateState(elem,e)}UpdateState(elem,
e){throw new Error("required override");}_GetFocusElement(elem){return elem}_OnFocus(elementId){this.PostToRuntimeElement("elem-focused",elementId)}_OnBlur(elementId){this.PostToRuntimeElement("elem-blurred",elementId)}_OnSetFocus(e){const elem=this._GetFocusElement(this.GetElementById(e["elementId"]));if(e["focus"])elem.focus();else elem.blur()}_OnSetCssStyle(e){const elem=this.GetElementById(e["elementId"]);const prop=e["prop"];const val=e["val"];if(prop.startsWith("--"))elem.style.setProperty(prop,
val);else elem.style[prop]=val}_OnSetAttribute(e){const elem=this.GetElementById(e["elementId"]);elem.setAttribute(e["name"],e["val"])}_OnRemoveAttribute(e){const elem=this.GetElementById(e["elementId"]);elem.removeAttribute(e["name"])}GetElementById(elementId){const elementState=this._elementMap.get(elementId);if(!elementState)throw new Error(`no element with id ${elementId}`);return elementState.GetElement()}}};


'use strict';{const isiOSLike=/(iphone|ipod|ipad|macos|macintosh|mac os x)/i.test(navigator.userAgent);const isAndroid=/android/i.test(navigator.userAgent);const isSafari=/safari/i.test(navigator.userAgent)&&!/(chrome|chromium|edg\/|OPR\/|nwjs)/i.test(navigator.userAgent);let resolveCounter=0;function AddScript(url){const elem=document.createElement("script");elem.async=false;elem.type="module";if(url.isStringSrc)return new Promise(resolve=>{const resolveName="c3_resolve_"+resolveCounter;++resolveCounter;
self[resolveName]=resolve;elem.textContent=url.str+`\n\nself["${resolveName}"]();`;document.head.appendChild(elem)});else return new Promise((resolve,reject)=>{elem.onload=resolve;elem.onerror=reject;elem.src=url;document.head.appendChild(elem)})}let didCheckWorkerModuleSupport=false;let isWorkerModuleSupported=false;function SupportsWorkerTypeModule(){if(!didCheckWorkerModuleSupport){try{new Worker("blob://",{get type(){isWorkerModuleSupported=true}})}catch(e){}didCheckWorkerModuleSupport=true}return isWorkerModuleSupported}
let tmpAudio=new Audio;const supportedAudioFormats={"audio/webm; codecs=opus":!!tmpAudio.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!tmpAudio.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!tmpAudio.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!tmpAudio.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!tmpAudio.canPlayType("audio/mp4"),"audio/mpeg":!!tmpAudio.canPlayType("audio/mpeg")};tmpAudio=null;async function BlobToString(blob){const arrayBuffer=
await BlobToArrayBuffer(blob);const textDecoder=new TextDecoder("utf-8");return textDecoder.decode(arrayBuffer)}function BlobToArrayBuffer(blob){return new Promise((resolve,reject)=>{const fileReader=new FileReader;fileReader.onload=e=>resolve(e.target.result);fileReader.onerror=err=>reject(err);fileReader.readAsArrayBuffer(blob)})}const queuedArrayBufferReads=[];let activeArrayBufferReads=0;const MAX_ARRAYBUFFER_READS=8;window["RealFile"]=window["File"];const domHandlerClasses=[];const runtimeEventHandlers=
new Map;const pendingResponsePromises=new Map;let nextResponseId=0;const runOnStartupFunctions=[];self.runOnStartup=function runOnStartup(f){if(typeof f!=="function")throw new Error("runOnStartup called without a function");runOnStartupFunctions.push(f)};const WEBVIEW_EXPORT_TYPES=new Set(["cordova","playable-ad","instant-games"]);function IsWebViewExportType(exportType){return WEBVIEW_EXPORT_TYPES.has(exportType)}let isWrapperFullscreen=false;window.RuntimeInterface=class RuntimeInterface{constructor(opts){this._useWorker=
opts.useWorker;this._messageChannelPort=null;this._runtimeBaseUrl="";this._scriptFolder=opts.scriptFolder;this._workerScriptURLs={};this._worker=null;this._localRuntime=null;this._domHandlers=[];this._runtimeDomHandler=null;this._canvas=null;this._isExportingToVideo=false;this._exportToVideoDuration=0;this._jobScheduler=null;this._rafId=-1;this._rafFunc=()=>this._OnRAFCallback();this._rafCallbacks=[];this._wrapperInitResolve=null;this._wrapperComponentIds=[];this._exportType=opts.exportType;this._isFileProtocol=
location.protocol.substr(0,4)==="file";if(this._useWorker&&(typeof OffscreenCanvas==="undefined"||!navigator["userActivation"]||!SupportsWorkerTypeModule()))this._useWorker=false;if(this._useWorker&&isSafari)this._useWorker=false;if(this._exportType==="playable-ad"||this._exportType==="instant-games")this._useWorker=false;if(this._exportType==="cordova"&&this._useWorker)if(isAndroid){const chromeVer=/Chrome\/(\d+)/i.exec(navigator.userAgent);if(!chromeVer||!(parseInt(chromeVer[1],10)>=90))this._useWorker=
false}else this._useWorker=false;if(this.IsWebView2Wrapper())self["chrome"]["webview"].addEventListener("message",e=>this._OnWrapperMessage(e.data));else if(this._exportType==="macos-wkwebview")self["C3WrapperOnMessage"]=msg=>this._OnWrapperMessage(msg);this._localFileBlobs=null;this._localFileStrings=null;if(this._exportType==="html5"&&!window.isSecureContext)console.warn("[Construct] Warning: the browser indicates this is not a secure context. Some features may be unavailable. Use secure (HTTPS) hosting to ensure all features are available.");
this.AddRuntimeComponentMessageHandler("runtime","cordova-fetch-local-file",e=>this._OnCordovaFetchLocalFile(e));this.AddRuntimeComponentMessageHandler("runtime","create-job-worker",e=>this._OnCreateJobWorker(e));this.AddRuntimeComponentMessageHandler("runtime","send-wrapper-extension-message",e=>this._OnSendWrapperExtensionMessage(e));if(this._exportType==="cordova")document.addEventListener("deviceready",()=>this._Init(opts));else this._Init(opts)}Release(){this._CancelAnimationFrame();if(this._messageChannelPort){this._messageChannelPort.onmessage=
null;this._messageChannelPort=null}if(this._worker){this._worker.terminate();this._worker=null}if(this._localRuntime){this._localRuntime.Release();this._localRuntime=null}if(this._canvas){this._canvas.parentElement.removeChild(this._canvas);this._canvas=null}}GetCanvas(){return this._canvas}GetRuntimeBaseURL(){return this._runtimeBaseUrl}UsesWorker(){return this._useWorker}GetExportType(){return this._exportType}IsFileProtocol(){return this._isFileProtocol}GetScriptFolder(){return this._scriptFolder}IsiOSCordova(){return isiOSLike&&
this._exportType==="cordova"}IsiOSWebView(){const ua=navigator.userAgent;return isiOSLike&&IsWebViewExportType(this._exportType)||navigator["standalone"]||/crios\/|fxios\/|edgios\//i.test(ua)}IsAndroid(){return isAndroid}IsAndroidWebView(){return isAndroid&&IsWebViewExportType(this._exportType)}IsWebView2Wrapper(){return this._exportType==="windows-webview2"||!!(this._exportType==="preview"&&window["chrome"]&&window["chrome"]["webview"]&&window["chrome"]["webview"]["postMessage"])}async _Init(opts){if(this._exportType===
"macos-wkwebview")this._SendWrapperMessage({"type":"ready"});else if(this.IsWebView2Wrapper()){this._SetupWebView2Polyfills();const result=await this._InitWrapper();this._wrapperComponentIds=result["registeredComponentIds"]}if(this._exportType==="playable-ad"){this._localFileBlobs=self["c3_base64files"];this._localFileStrings={};await this._ConvertDataUrisToBlobs();for(let i=0,len=opts.engineScripts.length;i<len;++i){const src=opts.engineScripts[i];if(this._localFileStrings.hasOwnProperty(src))opts.engineScripts[i]=
{isStringSrc:true,str:this._localFileStrings[src]};else if(this._localFileBlobs.hasOwnProperty(src))opts.engineScripts[i]=URL.createObjectURL(this._localFileBlobs[src])}opts.workerDependencyScripts=[]}if(this._exportType==="nwjs"&&self["nw"]&&self["nw"]["App"]["manifest"]["c3-steam-mode"]){let frameNum=0;this._AddRAFCallback(()=>{frameNum++;document.body.style.opacity=frameNum%2===0?"1":"0.999"})}if(opts.runtimeBaseUrl)this._runtimeBaseUrl=opts.runtimeBaseUrl;else{const origin=location.origin;this._runtimeBaseUrl=
(origin==="null"?"file:///":origin)+location.pathname;const i=this._runtimeBaseUrl.lastIndexOf("/");if(i!==-1)this._runtimeBaseUrl=this._runtimeBaseUrl.substr(0,i+1)}if(opts.workerScripts)this._workerScriptURLs=opts.workerScripts;const messageChannel=new MessageChannel;this._messageChannelPort=messageChannel.port1;this._messageChannelPort.onmessage=e=>this["_OnMessageFromRuntime"](e.data);if(window["c3_addPortMessageHandler"])window["c3_addPortMessageHandler"](e=>this._OnMessageFromDebugger(e));this._jobScheduler=
new self.JobSchedulerDOM(this);await this._jobScheduler.Init();if(typeof window["StatusBar"]==="object")window["StatusBar"]["hide"]();if(typeof window["AndroidFullScreen"]==="object")try{await new Promise((resolve,reject)=>{window["AndroidFullScreen"]["immersiveMode"](resolve,reject)})}catch(err){console.error("Failed to enter Android immersive mode: ",err)}if(this._useWorker)await this._InitWorker(opts,messageChannel.port2);else await this._InitDOM(opts,messageChannel.port2)}_GetWorkerURL(url){let ret;
if(this._workerScriptURLs.hasOwnProperty(url))ret=this._workerScriptURLs[url];else if(url.endsWith("/workermain.js")&&this._workerScriptURLs.hasOwnProperty("workermain.js"))ret=this._workerScriptURLs["workermain.js"];else if(this._exportType==="playable-ad"&&this._localFileBlobs.hasOwnProperty(url))ret=this._localFileBlobs[url];else ret=url;if(ret instanceof Blob)ret=URL.createObjectURL(ret);return ret}async CreateWorker(url,baseUrl,workerOpts){if(url.startsWith("blob:"))return new Worker(url,workerOpts);
if(this._exportType==="cordova"&&this._isFileProtocol){let filePath="";if(workerOpts.isC3MainWorker)filePath=url;else filePath=this._scriptFolder+url;const arrayBuffer=await this.CordovaFetchLocalFileAsArrayBuffer(filePath);const blob=new Blob([arrayBuffer],{type:"application/javascript"});return new Worker(URL.createObjectURL(blob),workerOpts)}const absUrl=new URL(url,baseUrl);const isCrossOrigin=location.origin!==absUrl.origin;if(isCrossOrigin){const response=await fetch(absUrl);if(!response.ok)throw new Error("failed to fetch worker script");
const blob=await response.blob();return new Worker(URL.createObjectURL(blob),workerOpts)}else return new Worker(absUrl,workerOpts)}_GetWindowInnerWidth(){return Math.max(window.innerWidth,1)}_GetWindowInnerHeight(){return Math.max(window.innerHeight,1)}_GetCommonRuntimeOptions(opts){return{"runtimeBaseUrl":this._runtimeBaseUrl,"previewUrl":location.href,"windowInnerWidth":this._GetWindowInnerWidth(),"windowInnerHeight":this._GetWindowInnerHeight(),"devicePixelRatio":window.devicePixelRatio,"isFullscreen":RuntimeInterface.IsDocumentFullscreen(),
"projectData":opts.projectData,"previewImageBlobs":window["cr_previewImageBlobs"]||this._localFileBlobs,"previewProjectFileBlobs":window["cr_previewProjectFileBlobs"],"previewProjectFileSWUrls":window["cr_previewProjectFiles"],"swClientId":window["cr_swClientId"]||"","exportType":opts.exportType,"isDebug":(new URLSearchParams(self.location.search)).has("debug"),"ife":!!self.ife,"jobScheduler":this._jobScheduler.GetPortData(),"supportedAudioFormats":supportedAudioFormats,"opusWasmScriptUrl":window["cr_opusWasmScriptUrl"]||
this._scriptFolder+"opus.wasm.js","opusWasmBinaryUrl":window["cr_opusWasmBinaryUrl"]||this._scriptFolder+"opus.wasm.wasm","isFileProtocol":this._isFileProtocol,"isiOSCordova":this.IsiOSCordova(),"isiOSWebView":this.IsiOSWebView(),"isWebView2Wrapper":this.IsWebView2Wrapper(),"wrapperComponentIds":this._wrapperComponentIds,"isFBInstantAvailable":typeof self["FBInstant"]!=="undefined"}}async _InitWorker(opts,port2){const workerMainUrl=this._GetWorkerURL(opts.workerMainUrl);if(this._exportType==="preview"){this._worker=
new Worker("previewworker.js",{type:"module",name:"Runtime"});await new Promise((resolve,reject)=>{const messageHandler=e=>{this._worker.removeEventListener("message",messageHandler);if(e.data&&e.data["type"]==="ok")resolve();else reject()};this._worker.addEventListener("message",messageHandler);this._worker.postMessage({"type":"construct-worker-init","import":(new URL(workerMainUrl,this._runtimeBaseUrl)).toString()})})}else this._worker=await this.CreateWorker(workerMainUrl,this._runtimeBaseUrl,
{type:"module",name:"Runtime",isC3MainWorker:true});this._canvas=document.createElement("canvas");this._canvas.style.display="none";const offscreenCanvas=this._canvas["transferControlToOffscreen"]();document.body.appendChild(this._canvas);window["c3canvas"]=this._canvas;if(self["C3_InsertHTMLPlaceholders"])self["C3_InsertHTMLPlaceholders"]();let workerDependencyScripts=opts.workerDependencyScripts||[];let engineScripts=opts.engineScripts;workerDependencyScripts=await Promise.all(workerDependencyScripts.map(url=>
this._MaybeGetCordovaScriptURL(url)));engineScripts=await Promise.all(engineScripts.map(url=>this._MaybeGetCordovaScriptURL(url)));if(this._exportType==="cordova")for(let i=0,len=opts.projectScripts.length;i<len;++i){const info=opts.projectScripts[i];const originalUrl=info[0];if(originalUrl===opts.mainProjectScript||(originalUrl==="scriptsInEvents.js"||originalUrl.endsWith("/scriptsInEvents.js")))info[1]=await this._MaybeGetCordovaScriptURL(originalUrl)}this._worker.postMessage(Object.assign(this._GetCommonRuntimeOptions(opts),
{"type":"init-runtime","isInWorker":true,"messagePort":port2,"canvas":offscreenCanvas,"workerDependencyScripts":workerDependencyScripts,"engineScripts":engineScripts,"projectScripts":opts.projectScripts,"mainProjectScript":opts.mainProjectScript,"projectScriptsStatus":self["C3_ProjectScriptsStatus"]}),[port2,offscreenCanvas,...this._jobScheduler.GetPortTransferables()]);this._domHandlers=domHandlerClasses.map(C=>new C(this));this._FindRuntimeDOMHandler();this._runtimeDomHandler._EnableWindowResizeEvent();
self["c3_callFunction"]=(name,params)=>this._runtimeDomHandler._InvokeFunctionFromJS(name,params);if(this._exportType==="preview")self["goToLastErrorScript"]=()=>this.PostToRuntimeComponent("runtime","go-to-last-error-script")}async _InitDOM(opts,port2){this._canvas=document.createElement("canvas");this._canvas.style.display="none";document.body.appendChild(this._canvas);window["c3canvas"]=this._canvas;if(self["C3_InsertHTMLPlaceholders"])self["C3_InsertHTMLPlaceholders"]();this._domHandlers=domHandlerClasses.map(C=>
new C(this));this._FindRuntimeDOMHandler();let engineScripts=opts.engineScripts.map(url=>typeof url==="string"?(new URL(url,this._runtimeBaseUrl)).toString():url);if(Array.isArray(opts.workerDependencyScripts)){const workerDependencyScripts=[...opts.workerDependencyScripts].map(s=>s instanceof Blob?URL.createObjectURL(s):s);engineScripts.unshift(...workerDependencyScripts)}engineScripts=await Promise.all(engineScripts.map(url=>this._MaybeGetCordovaScriptURL(url)));await Promise.all(engineScripts.map(url=>
AddScript(url)));const scriptsStatus=self["C3_ProjectScriptsStatus"];const mainProjectScript=opts.mainProjectScript;const allProjectScripts=opts.projectScripts;for(let [originalUrl,loadUrl]of allProjectScripts){if(!loadUrl)loadUrl=originalUrl;if(originalUrl===mainProjectScript)try{loadUrl=await this._MaybeGetCordovaScriptURL(loadUrl);await AddScript(loadUrl);if(this._exportType==="preview"&&!scriptsStatus[originalUrl])this._ReportProjectMainScriptError(originalUrl,"main script did not run to completion")}catch(err){this._ReportProjectMainScriptError(originalUrl,
err)}else if(originalUrl==="scriptsInEvents.js"||originalUrl.endsWith("/scriptsInEvents.js")){loadUrl=await this._MaybeGetCordovaScriptURL(loadUrl);await AddScript(loadUrl)}}if(this._exportType==="preview"&&typeof self.C3.ScriptsInEvents!=="object"){this._RemoveLoadingMessage();const msg="Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.";console.error("[C3 runtime] "+msg);alert(msg);return}const runtimeOpts=Object.assign(this._GetCommonRuntimeOptions(opts),
{"isInWorker":false,"messagePort":port2,"canvas":this._canvas,"runOnStartupFunctions":runOnStartupFunctions});this._runtimeDomHandler._EnableWindowResizeEvent();this._OnBeforeCreateRuntime();this._localRuntime=self["C3_CreateRuntime"](runtimeOpts);await self["C3_InitRuntime"](this._localRuntime,runtimeOpts)}_ReportProjectMainScriptError(url,err){this._RemoveLoadingMessage();console.error(`[Preview] Failed to load project main script (${url}): `,err);alert(`Failed to load project main script (${url}). Check all your JavaScript code has valid syntax. Press F12 and check the console for error details.`)}_OnBeforeCreateRuntime(){this._RemoveLoadingMessage()}_RemoveLoadingMessage(){const loadingElem=
window["cr_previewLoadingElem"];if(loadingElem){loadingElem.parentElement.removeChild(loadingElem);window["cr_previewLoadingElem"]=null}}async _OnCreateJobWorker(e){const outputPort=await this._jobScheduler._CreateJobWorker();return{"outputPort":outputPort,"transferables":[outputPort]}}_GetLocalRuntime(){if(this._useWorker)throw new Error("not available in worker mode");return this._localRuntime}PostToRuntimeComponent(component,handler,data,dispatchOpts,transferables){this._messageChannelPort.postMessage({"type":"event",
"component":component,"handler":handler,"dispatchOpts":dispatchOpts||null,"data":data,"responseId":null},transferables)}PostToRuntimeComponentAsync(component,handler,data,dispatchOpts,transferables){const responseId=nextResponseId++;const ret=new Promise((resolve,reject)=>{pendingResponsePromises.set(responseId,{resolve,reject})});this._messageChannelPort.postMessage({"type":"event","component":component,"handler":handler,"dispatchOpts":dispatchOpts||null,"data":data,"responseId":responseId},transferables);
return ret}["_OnMessageFromRuntime"](data){const type=data["type"];if(type==="event")return this._OnEventFromRuntime(data);else if(type==="result")this._OnResultFromRuntime(data);else if(type==="runtime-ready")this._OnRuntimeReady();else if(type==="alert-error"){this._RemoveLoadingMessage();alert(data["message"])}else if(type==="creating-runtime")this._OnBeforeCreateRuntime();else throw new Error(`unknown message '${type}'`);}_OnEventFromRuntime(e){const component=e["component"];const handler=e["handler"];
const data=e["data"];const responseId=e["responseId"];const handlerMap=runtimeEventHandlers.get(component);if(!handlerMap){console.warn(`[DOM] No event handlers for component '${component}'`);return}const func=handlerMap.get(handler);if(!func){console.warn(`[DOM] No handler '${handler}' for component '${component}'`);return}let ret=null;try{ret=func(data)}catch(err){console.error(`Exception in '${component}' handler '${handler}':`,err);if(responseId!==null)this._PostResultToRuntime(responseId,false,
""+err);return}if(responseId===null)return ret;else if(ret&&ret.then)ret.then(result=>this._PostResultToRuntime(responseId,true,result)).catch(err=>{console.error(`Rejection from '${component}' handler '${handler}':`,err);this._PostResultToRuntime(responseId,false,""+err)});else this._PostResultToRuntime(responseId,true,ret)}_PostResultToRuntime(responseId,isOk,result){let transferables;if(result&&result["transferables"])transferables=result["transferables"];this._messageChannelPort.postMessage({"type":"result",
"responseId":responseId,"isOk":isOk,"result":result},transferables)}_OnResultFromRuntime(data){const responseId=data["responseId"];const isOk=data["isOk"];const result=data["result"];const pendingPromise=pendingResponsePromises.get(responseId);if(isOk)pendingPromise.resolve(result);else pendingPromise.reject(result);pendingResponsePromises.delete(responseId)}AddRuntimeComponentMessageHandler(component,handler,func){let handlerMap=runtimeEventHandlers.get(component);if(!handlerMap){handlerMap=new Map;
runtimeEventHandlers.set(component,handlerMap)}if(handlerMap.has(handler))throw new Error(`[DOM] Component '${component}' already has handler '${handler}'`);handlerMap.set(handler,func)}static AddDOMHandlerClass(Class){if(domHandlerClasses.includes(Class))throw new Error("DOM handler already added");domHandlerClasses.push(Class)}_FindRuntimeDOMHandler(){for(const dh of this._domHandlers)if(dh.GetComponentID()==="runtime"){this._runtimeDomHandler=dh;return}throw new Error("cannot find runtime DOM handler");
}_OnMessageFromDebugger(e){this.PostToRuntimeComponent("debugger","message",e)}_OnRuntimeReady(){for(const h of this._domHandlers)h.Attach()}static IsDocumentFullscreen(){return!!(document["fullscreenElement"]||document["webkitFullscreenElement"]||document["mozFullScreenElement"]||isWrapperFullscreen)}static _SetWrapperIsFullscreenFlag(f){isWrapperFullscreen=!!f}async GetRemotePreviewStatusInfo(){return await this.PostToRuntimeComponentAsync("runtime","get-remote-preview-status-info")}_AddRAFCallback(f){this._rafCallbacks.push(f);
this._RequestAnimationFrame()}_RemoveRAFCallback(f){const i=this._rafCallbacks.indexOf(f);if(i===-1)throw new Error("invalid callback");this._rafCallbacks.splice(i,1);if(!this._rafCallbacks.length)this._CancelAnimationFrame()}_RequestAnimationFrame(){if(this._rafId===-1&&this._rafCallbacks.length)this._rafId=requestAnimationFrame(this._rafFunc)}_CancelAnimationFrame(){if(this._rafId!==-1){cancelAnimationFrame(this._rafId);this._rafId=-1}}_OnRAFCallback(){this._rafId=-1;for(const f of this._rafCallbacks)f();
this._RequestAnimationFrame()}TryPlayMedia(mediaElem){this._runtimeDomHandler.TryPlayMedia(mediaElem)}RemovePendingPlay(mediaElem){this._runtimeDomHandler.RemovePendingPlay(mediaElem)}_PlayPendingMedia(){this._runtimeDomHandler._PlayPendingMedia()}SetSilent(s){this._runtimeDomHandler.SetSilent(s)}IsAudioFormatSupported(typeStr){return!!supportedAudioFormats[typeStr]}async _WasmDecodeWebMOpus(arrayBuffer){const result=await this.PostToRuntimeComponentAsync("runtime","opus-decode",{"arrayBuffer":arrayBuffer},
null,[arrayBuffer]);return new Float32Array(result)}SetIsExportingToVideo(duration){this._isExportingToVideo=true;this._exportToVideoDuration=duration}IsExportingToVideo(){return this._isExportingToVideo}GetExportToVideoDuration(){return this._exportToVideoDuration}IsAbsoluteURL(url){return/^(?:[a-z\-]+:)?\/\//.test(url)||url.substr(0,5)==="data:"||url.substr(0,5)==="blob:"}IsRelativeURL(url){return!this.IsAbsoluteURL(url)}async _MaybeGetCordovaScriptURL(url){if(this._exportType==="cordova"&&(url.startsWith("file:")||
this._isFileProtocol&&this.IsRelativeURL(url))){let filename=url;if(filename.startsWith(this._runtimeBaseUrl))filename=filename.substr(this._runtimeBaseUrl.length);const arrayBuffer=await this.CordovaFetchLocalFileAsArrayBuffer(filename);const blob=new Blob([arrayBuffer],{type:"application/javascript"});return URL.createObjectURL(blob)}else return url}async _OnCordovaFetchLocalFile(e){const filename=e["filename"];switch(e["as"]){case "text":return await this.CordovaFetchLocalFileAsText(filename);
case "buffer":return await this.CordovaFetchLocalFileAsArrayBuffer(filename);default:throw new Error("unsupported type");}}_GetPermissionAPI(){const api=window["cordova"]&&window["cordova"]["plugins"]&&window["cordova"]["plugins"]["permissions"];if(typeof api!=="object")throw new Error("Permission API is not loaded");return api}_MapPermissionID(api,permission){const permissionID=api[permission];if(typeof permissionID!=="string")throw new Error("Invalid permission name");return permissionID}_HasPermission(id){const api=
this._GetPermissionAPI();return new Promise((resolve,reject)=>api["checkPermission"](this._MapPermissionID(api,id),status=>resolve(!!status["hasPermission"]),reject))}_RequestPermission(id){const api=this._GetPermissionAPI();return new Promise((resolve,reject)=>api["requestPermission"](this._MapPermissionID(api,id),status=>resolve(!!status["hasPermission"]),reject))}async RequestPermissions(permissions){if(this.GetExportType()!=="cordova")return true;if(this.IsiOSCordova())return true;for(const id of permissions){const alreadyGranted=
await this._HasPermission(id);if(alreadyGranted)continue;const granted=await this._RequestPermission(id);if(granted===false)return false}return true}async RequirePermissions(...permissions){if(await this.RequestPermissions(permissions)===false)throw new Error("Permission not granted");}CordovaFetchLocalFile(filename){const path=window["cordova"]["file"]["applicationDirectory"]+"www/"+filename;return new Promise((resolve,reject)=>{window["resolveLocalFileSystemURL"](path,entry=>{entry["file"](resolve,
reject)},reject)})}async CordovaFetchLocalFileAsText(filename){const file=await this.CordovaFetchLocalFile(filename);return await BlobToString(file)}_CordovaMaybeStartNextArrayBufferRead(){if(!queuedArrayBufferReads.length)return;if(activeArrayBufferReads>=MAX_ARRAYBUFFER_READS)return;activeArrayBufferReads++;const job=queuedArrayBufferReads.shift();this._CordovaDoFetchLocalFileAsAsArrayBuffer(job.filename,job.successCallback,job.errorCallback)}CordovaFetchLocalFileAsArrayBuffer(filename){return new Promise((resolve,
reject)=>{queuedArrayBufferReads.push({filename:filename,successCallback:result=>{activeArrayBufferReads--;this._CordovaMaybeStartNextArrayBufferRead();resolve(result)},errorCallback:err=>{activeArrayBufferReads--;this._CordovaMaybeStartNextArrayBufferRead();reject(err)}});this._CordovaMaybeStartNextArrayBufferRead()})}async _CordovaDoFetchLocalFileAsAsArrayBuffer(filename,successCallback,errorCallback){try{const file=await this.CordovaFetchLocalFile(filename);const arrayBuffer=await BlobToArrayBuffer(file);
successCallback(arrayBuffer)}catch(err){errorCallback(err)}}_OnWrapperMessage(msg){if(msg==="entered-fullscreen"){RuntimeInterface._SetWrapperIsFullscreenFlag(true);this._runtimeDomHandler._OnFullscreenChange()}else if(msg==="exited-fullscreen"){RuntimeInterface._SetWrapperIsFullscreenFlag(false);this._runtimeDomHandler._OnFullscreenChange()}else if(typeof msg==="object"){const type=msg["type"];if(type==="wrapper-init-response"){this._wrapperInitResolve(msg);this._wrapperInitResolve=null}else if(type===
"extension-message")this.PostToRuntimeComponent("runtime","wrapper-extension-message",msg);else console.warn("Unknown wrapper message: ",msg)}else console.warn("Unknown wrapper message: ",msg)}_OnSendWrapperExtensionMessage(data){this._SendWrapperMessage({"type":"extension-message","componentId":data["componentId"],"messageId":data["messageId"],"params":data["params"]||[],"asyncId":data["asyncId"]})}_SendWrapperMessage(o){if(this.IsWebView2Wrapper())window["chrome"]["webview"]["postMessage"](JSON.stringify(o));
else if(this._exportType==="macos-wkwebview")window["webkit"]["messageHandlers"]["C3Wrapper"]["postMessage"](JSON.stringify(o));else;}_SetupWebView2Polyfills(){window.moveTo=(x,y)=>{this._SendWrapperMessage({"type":"set-window-position","windowX":Math.ceil(x),"windowY":Math.ceil(y)})};window.resizeTo=(w,h)=>{this._SendWrapperMessage({"type":"set-window-size","windowWidth":Math.ceil(w),"windowHeight":Math.ceil(h)})}}_InitWrapper(){if(!this.IsWebView2Wrapper())return Promise.resolve();return new Promise(resolve=>
{this._wrapperInitResolve=resolve;this._SendWrapperMessage({"type":"wrapper-init"})})}async _ConvertDataUrisToBlobs(){const promises=[];for(const [filename,data]of Object.entries(this._localFileBlobs))promises.push(this._ConvertDataUriToBlobs(filename,data));await Promise.all(promises)}async _ConvertDataUriToBlobs(filename,data){if(typeof data==="object"){this._localFileBlobs[filename]=new Blob([data["str"]],{"type":data["type"]});this._localFileStrings[filename]=data["str"]}else{let blob=await this._FetchDataUri(data);
if(!blob)blob=this._DataURIToBinaryBlobSync(data);this._localFileBlobs[filename]=blob}}async _FetchDataUri(dataUri){try{const response=await fetch(dataUri);return await response.blob()}catch(err){console.warn("Failed to fetch a data: URI. Falling back to a slower workaround. This is probably because the Content Security Policy unnecessarily blocked it. Allow data: URIs in your CSP to avoid this.",err);return null}}_DataURIToBinaryBlobSync(datauri){const o=this._ParseDataURI(datauri);return this._BinaryStringToBlob(o.data,
o.mime_type)}_ParseDataURI(datauri){const comma=datauri.indexOf(",");if(comma<0)throw new URIError("expected comma in data: uri");const typepart=datauri.substring(5,comma);const datapart=datauri.substring(comma+1);const typearr=typepart.split(";");const mimetype=typearr[0]||"";const encoding1=typearr[1];const encoding2=typearr[2];let decodeddata;if(encoding1==="base64"||encoding2==="base64")decodeddata=atob(datapart);else decodeddata=decodeURIComponent(datapart);return{mime_type:mimetype,data:decodeddata}}_BinaryStringToBlob(binstr,
mime_type){let len=binstr.length;let len32=len>>2;let a8=new Uint8Array(len);let a32=new Uint32Array(a8.buffer,0,len32);let i,j;for(i=0,j=0;i<len32;++i)a32[i]=binstr.charCodeAt(j++)|binstr.charCodeAt(j++)<<8|binstr.charCodeAt(j++)<<16|binstr.charCodeAt(j++)<<24;let tailLength=len&3;while(tailLength--){a8[j]=binstr.charCodeAt(j);++j}return new Blob([a8],{"type":mime_type})}}};


'use strict';{const RuntimeInterface=self.RuntimeInterface;function IsCompatibilityMouseEvent(e){return e["sourceCapabilities"]&&e["sourceCapabilities"]["firesTouchEvents"]||e["originalEvent"]&&e["originalEvent"]["sourceCapabilities"]&&e["originalEvent"]["sourceCapabilities"]["firesTouchEvents"]}const KEY_CODE_ALIASES=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]);const DISPATCH_RUNTIME_AND_SCRIPT={"dispatchRuntimeEvent":true,"dispatchUserScriptEvent":true};const DISPATCH_SCRIPT_ONLY={"dispatchUserScriptEvent":true};
const DISPATCH_RUNTIME_ONLY={"dispatchRuntimeEvent":true};function AddStyleSheet(cssUrl){return new Promise((resolve,reject)=>{const styleLink=document.createElement("link");styleLink.onload=()=>resolve(styleLink);styleLink.onerror=err=>reject(err);styleLink.rel="stylesheet";styleLink.href=cssUrl;document.head.appendChild(styleLink)})}function FetchImage(url){return new Promise((resolve,reject)=>{const img=new Image;img.onload=()=>resolve(img);img.onerror=err=>reject(err);img.src=url})}async function BlobToImage(blob){const blobUrl=
URL.createObjectURL(blob);try{return await FetchImage(blobUrl)}finally{URL.revokeObjectURL(blobUrl)}}function BlobToString(blob){return new Promise((resolve,reject)=>{let fileReader=new FileReader;fileReader.onload=e=>resolve(e.target.result);fileReader.onerror=err=>reject(err);fileReader.readAsText(blob)})}async function BlobToSvgImage(blob,width,height){if(!/firefox/i.test(navigator.userAgent))return await BlobToImage(blob);let str=await BlobToString(blob);const parser=new DOMParser;const doc=parser.parseFromString(str,
"image/svg+xml");const rootElem=doc.documentElement;if(rootElem.hasAttribute("width")&&rootElem.hasAttribute("height")){const widthStr=rootElem.getAttribute("width");const heightStr=rootElem.getAttribute("height");if(!widthStr.includes("%")&&!heightStr.includes("%"))return await BlobToImage(blob)}rootElem.setAttribute("width",width+"px");rootElem.setAttribute("height",height+"px");const serializer=new XMLSerializer;str=serializer.serializeToString(doc);blob=new Blob([str],{type:"image/svg+xml"});
return await BlobToImage(blob)}function IsInContentEditable(el){do{if(el.parentNode&&el.hasAttribute("contenteditable"))return true;el=el.parentNode}while(el);return false}const keyboardInputElementTagNames=new Set(["input","textarea","datalist","select"]);function IsKeyboardInputElement(elem){return keyboardInputElementTagNames.has(elem.tagName.toLowerCase())||IsInContentEditable(elem)}const canvasOrDocTags=new Set(["canvas","body","html"]);function PreventDefaultOnCanvasOrDoc(e){if(!e.target.tagName)return;
const tagName=e.target.tagName.toLowerCase();if(canvasOrDocTags.has(tagName))e.preventDefault()}function BlockWheelZoom(e){if(e.metaKey||e.ctrlKey)e.preventDefault()}self["C3_GetSvgImageSize"]=async function(blob){const img=await BlobToImage(blob);if(img.width>0&&img.height>0)return[img.width,img.height];else{img.style.position="absolute";img.style.left="0px";img.style.top="0px";img.style.visibility="hidden";document.body.appendChild(img);const rc=img.getBoundingClientRect();document.body.removeChild(img);
return[rc.width,rc.height]}};self["C3_RasterSvgImageBlob"]=async function(blob,imageWidth,imageHeight,surfaceWidth,surfaceHeight){const img=await BlobToSvgImage(blob,imageWidth,imageHeight);const canvas=document.createElement("canvas");canvas.width=surfaceWidth;canvas.height=surfaceHeight;const ctx=canvas.getContext("2d");ctx.drawImage(img,0,0,imageWidth,imageHeight);return canvas};let isCordovaPaused=false;document.addEventListener("pause",()=>isCordovaPaused=true);document.addEventListener("resume",
()=>isCordovaPaused=false);function ParentHasFocus(){try{return window.parent&&window.parent.document.hasFocus()}catch(err){return false}}function KeyboardIsVisible(){const elem=document.activeElement;if(!elem)return false;const tagName=elem.tagName.toLowerCase();const inputTypes=new Set(["email","number","password","search","tel","text","url"]);if(tagName==="textarea")return true;if(tagName==="input")return inputTypes.has(elem.type.toLowerCase()||"text");return IsInContentEditable(elem)}const DOM_COMPONENT_ID=
"runtime";const HANDLER_CLASS=class RuntimeDOMHandler extends self.DOMHandler{constructor(iRuntime){super(iRuntime,DOM_COMPONENT_ID);this._isFirstSizeUpdate=true;this._enableWindowResizeEvent=false;this._simulatedResizeTimerId=-1;this._targetOrientation="any";this._attachedDeviceOrientationEvent=false;this._attachedDeviceMotionEvent=false;this._pageVisibilityIsHidden=false;this._screenReaderTextWrap=document.createElement("div");this._screenReaderTextWrap.className="c3-screen-reader-text";this._screenReaderTextWrap.setAttribute("aria-live",
"polite");document.body.appendChild(this._screenReaderTextWrap);this._debugHighlightElem=null;this._isExportToVideo=false;this._exportVideoProgressMessage="";this._exportVideoUpdateTimerId=-1;this._enableAndroidVKDetection=false;this._lastWindowWidth=iRuntime._GetWindowInnerWidth();this._lastWindowHeight=iRuntime._GetWindowInnerHeight();this._virtualKeyboardHeight=0;this._vkTranslateYOffset=0;iRuntime.AddRuntimeComponentMessageHandler("canvas","update-size",e=>this._OnUpdateCanvasSize(e));iRuntime.AddRuntimeComponentMessageHandler("runtime",
"invoke-download",e=>this._OnInvokeDownload(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","load-webfonts",e=>this._OnLoadWebFonts(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","raster-svg-image",e=>this._OnRasterSvgImage(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","get-svg-image-size",e=>this._OnGetSvgImageSize(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","set-target-orientation",e=>this._OnSetTargetOrientation(e));iRuntime.AddRuntimeComponentMessageHandler("runtime",
"register-sw",()=>this._OnRegisterSW());iRuntime.AddRuntimeComponentMessageHandler("runtime","post-to-debugger",e=>this._OnPostToDebugger(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","go-to-script",e=>this._OnPostToDebugger(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","before-start-ticking",()=>this._OnBeforeStartTicking());iRuntime.AddRuntimeComponentMessageHandler("runtime","debug-highlight",e=>this._OnDebugHighlight(e));iRuntime.AddRuntimeComponentMessageHandler("runtime",
"enable-device-orientation",()=>this._AttachDeviceOrientationEvent());iRuntime.AddRuntimeComponentMessageHandler("runtime","enable-device-motion",()=>this._AttachDeviceMotionEvent());iRuntime.AddRuntimeComponentMessageHandler("runtime","add-stylesheet",e=>this._OnAddStylesheet(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","script-create-worker",e=>this._OnScriptCreateWorker(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","alert",e=>this._OnAlert(e));iRuntime.AddRuntimeComponentMessageHandler("runtime",
"screen-reader-text",e=>this._OnScreenReaderTextEvent(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","hide-cordova-splash",()=>this._OnHideCordovaSplash());iRuntime.AddRuntimeComponentMessageHandler("runtime","set-exporting-to-video",e=>this._SetExportingToVideo(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","export-to-video-progress",e=>this._OnExportVideoProgress(e));iRuntime.AddRuntimeComponentMessageHandler("runtime","exported-to-video",e=>this._OnExportedToVideo(e));iRuntime.AddRuntimeComponentMessageHandler("runtime",
"exported-to-image-sequence",e=>this._OnExportedToImageSequence(e));const allowDefaultContextMenuTagNames=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",e=>{const t=e.target;const name=t.tagName.toLowerCase();if(!allowDefaultContextMenuTagNames.has(name)&&!IsInContentEditable(t))e.preventDefault()});const canvas=iRuntime.GetCanvas();window.addEventListener("selectstart",PreventDefaultOnCanvasOrDoc);window.addEventListener("gesturehold",PreventDefaultOnCanvasOrDoc);
canvas.addEventListener("selectstart",PreventDefaultOnCanvasOrDoc);canvas.addEventListener("gesturehold",PreventDefaultOnCanvasOrDoc);window.addEventListener("touchstart",PreventDefaultOnCanvasOrDoc,{"passive":false});if(typeof PointerEvent!=="undefined"){window.addEventListener("pointerdown",PreventDefaultOnCanvasOrDoc,{"passive":false});canvas.addEventListener("pointerdown",PreventDefaultOnCanvasOrDoc)}else canvas.addEventListener("touchstart",PreventDefaultOnCanvasOrDoc);this._mousePointerLastButtons=
0;window.addEventListener("mousedown",e=>{if(e.button===1)e.preventDefault()});window.addEventListener("mousewheel",BlockWheelZoom,{"passive":false});window.addEventListener("wheel",BlockWheelZoom,{"passive":false});window.addEventListener("resize",()=>this._OnWindowResize());window.addEventListener("fullscreenchange",()=>this._OnFullscreenChange());window.addEventListener("webkitfullscreenchange",()=>this._OnFullscreenChange());window.addEventListener("mozfullscreenchange",()=>this._OnFullscreenChange());
window.addEventListener("fullscreenerror",e=>this._OnFullscreenError(e));window.addEventListener("webkitfullscreenerror",e=>this._OnFullscreenError(e));window.addEventListener("mozfullscreenerror",e=>this._OnFullscreenError(e));if(iRuntime.IsiOSWebView())if(window["visualViewport"]){let lastVisualViewportHeight=Infinity;window["visualViewport"].addEventListener("resize",()=>{const curVisualViewportHeight=window["visualViewport"].height;if(curVisualViewportHeight>lastVisualViewportHeight)document.scrollingElement.scrollTop=
0;lastVisualViewportHeight=curVisualViewportHeight})}else window.addEventListener("focusout",()=>{if(!KeyboardIsVisible())document.scrollingElement.scrollTop=0});this._mediaPendingPlay=new Set;this._mediaRemovedPendingPlay=new WeakSet;this._isSilent=false}_OnBeforeStartTicking(){self.setTimeout(()=>{this._enableAndroidVKDetection=true},1E3);if(this._iRuntime.GetExportType()==="cordova"){document.addEventListener("pause",()=>this._OnVisibilityChange(true));document.addEventListener("resume",()=>this._OnVisibilityChange(false))}else document.addEventListener("visibilitychange",
()=>this._OnVisibilityChange(document.visibilityState==="hidden"));this._pageVisibilityIsHidden=!!(document.visibilityState==="hidden"||isCordovaPaused);return{"isSuspended":this._pageVisibilityIsHidden}}Attach(){window.addEventListener("focus",()=>this._PostRuntimeEvent("window-focus"));window.addEventListener("blur",()=>{this._PostRuntimeEvent("window-blur",{"parentHasFocus":ParentHasFocus()});this._mousePointerLastButtons=0});window.addEventListener("focusin",e=>{if(IsKeyboardInputElement(e.target))this._PostRuntimeEvent("keyboard-blur")});
window.addEventListener("keydown",e=>this._OnKeyEvent("keydown",e));window.addEventListener("keyup",e=>this._OnKeyEvent("keyup",e));window.addEventListener("dblclick",e=>this._OnMouseEvent("dblclick",e,DISPATCH_RUNTIME_AND_SCRIPT));window.addEventListener("wheel",e=>this._OnMouseWheelEvent("wheel",e));if(typeof PointerEvent!=="undefined"){window.addEventListener("pointerdown",e=>{this._HandlePointerDownFocus(e);this._OnPointerEvent("pointerdown",e)});if(this._iRuntime.UsesWorker()&&typeof window["onpointerrawupdate"]!==
"undefined"&&self===self.top)window.addEventListener("pointerrawupdate",e=>this._OnPointerRawUpdate(e));else window.addEventListener("pointermove",e=>this._OnPointerEvent("pointermove",e));window.addEventListener("pointerup",e=>this._OnPointerEvent("pointerup",e));window.addEventListener("pointercancel",e=>this._OnPointerEvent("pointercancel",e))}else{window.addEventListener("mousedown",e=>{this._HandlePointerDownFocus(e);this._OnMouseEventAsPointer("pointerdown",e)});window.addEventListener("mousemove",
e=>this._OnMouseEventAsPointer("pointermove",e));window.addEventListener("mouseup",e=>this._OnMouseEventAsPointer("pointerup",e));window.addEventListener("touchstart",e=>{this._HandlePointerDownFocus(e);this._OnTouchEvent("pointerdown",e)});window.addEventListener("touchmove",e=>this._OnTouchEvent("pointermove",e));window.addEventListener("touchend",e=>this._OnTouchEvent("pointerup",e));window.addEventListener("touchcancel",e=>this._OnTouchEvent("pointercancel",e))}const playFunc=()=>this._PlayPendingMedia();
window.addEventListener("pointerup",playFunc,true);window.addEventListener("touchend",playFunc,true);window.addEventListener("click",playFunc,true);window.addEventListener("keydown",playFunc,true);window.addEventListener("gamepadconnected",playFunc,true);if(this._iRuntime.IsAndroid()&&!this._iRuntime.IsAndroidWebView()&&navigator["virtualKeyboard"]){navigator["virtualKeyboard"]["overlaysContent"]=true;navigator["virtualKeyboard"].addEventListener("geometrychange",()=>{this._OnAndroidVirtualKeyboardChange(this._GetWindowInnerHeight(),
navigator["virtualKeyboard"]["boundingRect"]["height"])})}}_OnAndroidVirtualKeyboardChange(windowHeight,vkHeight){document.body.style.transform="";this._vkTranslateYOffset=0;if(vkHeight>0){const activeElement=document.activeElement;if(activeElement){const rc=activeElement.getBoundingClientRect();const rcMidY=(rc.top+rc.bottom)/2;const targetY=(windowHeight-vkHeight)/2;let shiftY=rcMidY-targetY;if(shiftY>vkHeight)shiftY=vkHeight;if(shiftY<0)shiftY=0;if(shiftY>0){document.body.style.transform=`translateY(${-shiftY}px)`;
this._vkTranslateYOffset=shiftY}}}}_PostRuntimeEvent(name,data){this.PostToRuntime(name,data||null,DISPATCH_RUNTIME_ONLY)}_GetWindowInnerWidth(){return this._iRuntime._GetWindowInnerWidth()}_GetWindowInnerHeight(){return this._iRuntime._GetWindowInnerHeight()}_EnableWindowResizeEvent(){this._enableWindowResizeEvent=true;this._lastWindowWidth=this._iRuntime._GetWindowInnerWidth();this._lastWindowHeight=this._iRuntime._GetWindowInnerHeight()}_OnWindowResize(){if(this._isExportToVideo)return;if(!this._enableWindowResizeEvent)return;
const width=this._GetWindowInnerWidth();const height=this._GetWindowInnerHeight();if(this._iRuntime.IsAndroidWebView())if(this._enableAndroidVKDetection)if(this._lastWindowWidth===width&&height<this._lastWindowHeight){this._virtualKeyboardHeight=this._lastWindowHeight-height;this._OnAndroidVirtualKeyboardChange(this._lastWindowHeight,this._virtualKeyboardHeight);return}else{if(this._virtualKeyboardHeight>0){this._virtualKeyboardHeight=0;this._OnAndroidVirtualKeyboardChange(height,this._virtualKeyboardHeight)}this._lastWindowWidth=
width;this._lastWindowHeight=height}else{this._lastWindowWidth=width;this._lastWindowHeight=height}this.PostToRuntime("window-resize",{"innerWidth":width,"innerHeight":height,"devicePixelRatio":window.devicePixelRatio,"isFullscreen":RuntimeInterface.IsDocumentFullscreen()});if(this._iRuntime.IsiOSWebView()){if(this._simulatedResizeTimerId!==-1)clearTimeout(this._simulatedResizeTimerId);this._OnSimulatedResize(width,height,0)}}_ScheduleSimulatedResize(width,height,count){if(this._simulatedResizeTimerId!==
-1)clearTimeout(this._simulatedResizeTimerId);this._simulatedResizeTimerId=setTimeout(()=>this._OnSimulatedResize(width,height,count),48)}_OnSimulatedResize(originalWidth,originalHeight,count){const width=this._GetWindowInnerWidth();const height=this._GetWindowInnerHeight();this._simulatedResizeTimerId=-1;if(width!=originalWidth||height!=originalHeight)this.PostToRuntime("window-resize",{"innerWidth":width,"innerHeight":height,"devicePixelRatio":window.devicePixelRatio,"isFullscreen":RuntimeInterface.IsDocumentFullscreen()});
else if(count<10)this._ScheduleSimulatedResize(width,height,count+1)}_OnSetTargetOrientation(e){this._targetOrientation=e["targetOrientation"]}_TrySetTargetOrientation(){const orientation=this._targetOrientation;if(screen["orientation"]&&screen["orientation"]["lock"])screen["orientation"]["lock"](orientation).catch(err=>console.warn("[Construct] Failed to lock orientation: ",err));else try{let result=false;if(screen["lockOrientation"])result=screen["lockOrientation"](orientation);else if(screen["webkitLockOrientation"])result=
screen["webkitLockOrientation"](orientation);else if(screen["mozLockOrientation"])result=screen["mozLockOrientation"](orientation);else if(screen["msLockOrientation"])result=screen["msLockOrientation"](orientation);if(!result)console.warn("[Construct] Failed to lock orientation")}catch(err){console.warn("[Construct] Failed to lock orientation: ",err)}}_OnFullscreenChange(){if(this._isExportToVideo)return;const isDocFullscreen=RuntimeInterface.IsDocumentFullscreen();if(isDocFullscreen&&this._targetOrientation!==
"any")this._TrySetTargetOrientation();this.PostToRuntime("fullscreenchange",{"isFullscreen":isDocFullscreen,"innerWidth":this._GetWindowInnerWidth(),"innerHeight":this._GetWindowInnerHeight()})}_OnFullscreenError(e){console.warn("[Construct] Fullscreen request failed: ",e);this.PostToRuntime("fullscreenerror",{"isFullscreen":RuntimeInterface.IsDocumentFullscreen(),"innerWidth":this._GetWindowInnerWidth(),"innerHeight":this._GetWindowInnerHeight()})}_OnVisibilityChange(isHidden){if(this._pageVisibilityIsHidden===
isHidden)return;this._pageVisibilityIsHidden=isHidden;if(isHidden)this._iRuntime._CancelAnimationFrame();else this._iRuntime._RequestAnimationFrame();this.PostToRuntime("visibilitychange",{"hidden":isHidden})}_OnKeyEvent(name,e){if(e.key==="Backspace")PreventDefaultOnCanvasOrDoc(e);if(this._isExportToVideo)return;const code=KEY_CODE_ALIASES.get(e.code)||e.code;this._PostToRuntimeMaybeSync(name,{"code":code,"key":e.key,"which":e.which,"repeat":e.repeat,"altKey":e.altKey,"ctrlKey":e.ctrlKey,"metaKey":e.metaKey,
"shiftKey":e.shiftKey,"timeStamp":e.timeStamp},DISPATCH_RUNTIME_AND_SCRIPT)}_OnMouseWheelEvent(name,e){if(this._isExportToVideo)return;this.PostToRuntime(name,{"clientX":e.clientX,"clientY":e.clientY+this._vkTranslateYOffset,"pageX":e.pageX,"pageY":e.pageY+this._vkTranslateYOffset,"deltaX":e.deltaX,"deltaY":e.deltaY,"deltaZ":e.deltaZ,"deltaMode":e.deltaMode,"timeStamp":e.timeStamp},DISPATCH_RUNTIME_AND_SCRIPT)}_OnMouseEvent(name,e,opts){if(this._isExportToVideo)return;if(IsCompatibilityMouseEvent(e))return;
this._PostToRuntimeMaybeSync(name,{"button":e.button,"buttons":e.buttons,"clientX":e.clientX,"clientY":e.clientY+this._vkTranslateYOffset,"pageX":e.pageX,"pageY":e.pageY+this._vkTranslateYOffset,"movementX":e.movementX||0,"movementY":e.movementY||0,"timeStamp":e.timeStamp},opts)}_OnMouseEventAsPointer(name,e){if(this._isExportToVideo)return;if(IsCompatibilityMouseEvent(e))return;const pointerId=1;const lastButtons=this._mousePointerLastButtons;if(name==="pointerdown"&&lastButtons!==0)name="pointermove";
else if(name==="pointerup"&&e.buttons!==0)name="pointermove";this._PostToRuntimeMaybeSync(name,{"pointerId":pointerId,"pointerType":"mouse","button":e.button,"buttons":e.buttons,"lastButtons":lastButtons,"clientX":e.clientX,"clientY":e.clientY+this._vkTranslateYOffset,"pageX":e.pageX,"pageY":e.pageY+this._vkTranslateYOffset,"movementX":e.movementX||0,"movementY":e.movementY||0,"width":0,"height":0,"pressure":0,"tangentialPressure":0,"tiltX":0,"tiltY":0,"twist":0,"timeStamp":e.timeStamp},DISPATCH_RUNTIME_AND_SCRIPT);
this._mousePointerLastButtons=e.buttons;this._OnMouseEvent(e.type,e,DISPATCH_SCRIPT_ONLY)}_OnPointerEvent(name,e){if(this._isExportToVideo)return;let lastButtons=0;if(e.pointerType==="mouse")lastButtons=this._mousePointerLastButtons;this._PostToRuntimeMaybeSync(name,{"pointerId":e.pointerId,"pointerType":e.pointerType,"button":e.button,"buttons":e.buttons,"lastButtons":lastButtons,"clientX":e.clientX,"clientY":e.clientY+this._vkTranslateYOffset,"pageX":e.pageX,"pageY":e.pageY+this._vkTranslateYOffset,
"movementX":e.movementX||0,"movementY":e.movementY||0,"width":e.width||0,"height":e.height||0,"pressure":e.pressure||0,"tangentialPressure":e["tangentialPressure"]||0,"tiltX":e.tiltX||0,"tiltY":e.tiltY||0,"twist":e["twist"]||0,"timeStamp":e.timeStamp},DISPATCH_RUNTIME_AND_SCRIPT);if(e.pointerType==="mouse"){let mouseEventName="mousemove";if(name==="pointerdown")mouseEventName="mousedown";else if(name==="pointerup")mouseEventName="mouseup";this._OnMouseEvent(mouseEventName,e,DISPATCH_SCRIPT_ONLY);
this._mousePointerLastButtons=e.buttons}}_OnPointerRawUpdate(e){this._OnPointerEvent("pointermove",e)}_OnTouchEvent(fireName,e){if(this._isExportToVideo)return;for(let i=0,len=e.changedTouches.length;i<len;++i){const t=e.changedTouches[i];this._PostToRuntimeMaybeSync(fireName,{"pointerId":t.identifier,"pointerType":"touch","button":0,"buttons":0,"lastButtons":0,"clientX":t.clientX,"clientY":t.clientY+this._vkTranslateYOffset,"pageX":t.pageX,"pageY":t.pageY+this._vkTranslateYOffset,"movementX":e.movementX||
0,"movementY":e.movementY||0,"width":(t["radiusX"]||t["webkitRadiusX"]||0)*2,"height":(t["radiusY"]||t["webkitRadiusY"]||0)*2,"pressure":t["force"]||t["webkitForce"]||0,"tangentialPressure":0,"tiltX":0,"tiltY":0,"twist":t["rotationAngle"]||0,"timeStamp":e.timeStamp},DISPATCH_RUNTIME_AND_SCRIPT)}}_HandlePointerDownFocus(e){if(window!==window.top)window.focus();if(this._IsElementCanvasOrDocument(e.target)&&document.activeElement&&!this._IsElementCanvasOrDocument(document.activeElement))document.activeElement.blur()}_IsElementCanvasOrDocument(elem){return!elem||
elem===document||elem===window||elem===document.body||elem.tagName.toLowerCase()==="canvas"}_AttachDeviceOrientationEvent(){if(this._attachedDeviceOrientationEvent)return;this._attachedDeviceOrientationEvent=true;window.addEventListener("deviceorientation",e=>this._OnDeviceOrientation(e));window.addEventListener("deviceorientationabsolute",e=>this._OnDeviceOrientationAbsolute(e))}_AttachDeviceMotionEvent(){if(this._attachedDeviceMotionEvent)return;this._attachedDeviceMotionEvent=true;window.addEventListener("devicemotion",
e=>this._OnDeviceMotion(e))}_OnDeviceOrientation(e){if(this._isExportToVideo)return;this.PostToRuntime("deviceorientation",{"absolute":!!e["absolute"],"alpha":e["alpha"]||0,"beta":e["beta"]||0,"gamma":e["gamma"]||0,"timeStamp":e.timeStamp,"webkitCompassHeading":e["webkitCompassHeading"],"webkitCompassAccuracy":e["webkitCompassAccuracy"]},DISPATCH_RUNTIME_AND_SCRIPT)}_OnDeviceOrientationAbsolute(e){if(this._isExportToVideo)return;this.PostToRuntime("deviceorientationabsolute",{"absolute":!!e["absolute"],
"alpha":e["alpha"]||0,"beta":e["beta"]||0,"gamma":e["gamma"]||0,"timeStamp":e.timeStamp},DISPATCH_RUNTIME_AND_SCRIPT)}_OnDeviceMotion(e){if(this._isExportToVideo)return;let accProp=null;const acc=e["acceleration"];if(acc)accProp={"x":acc["x"]||0,"y":acc["y"]||0,"z":acc["z"]||0};let withGProp=null;const withG=e["accelerationIncludingGravity"];if(withG)withGProp={"x":withG["x"]||0,"y":withG["y"]||0,"z":withG["z"]||0};let rotationRateProp=null;const rotationRate=e["rotationRate"];if(rotationRate)rotationRateProp=
{"alpha":rotationRate["alpha"]||0,"beta":rotationRate["beta"]||0,"gamma":rotationRate["gamma"]||0};this.PostToRuntime("devicemotion",{"acceleration":accProp,"accelerationIncludingGravity":withGProp,"rotationRate":rotationRateProp,"interval":e["interval"],"timeStamp":e.timeStamp},DISPATCH_RUNTIME_AND_SCRIPT)}_OnUpdateCanvasSize(e){const runtimeInterface=this.GetRuntimeInterface();if(runtimeInterface.IsExportingToVideo())return;const canvas=runtimeInterface.GetCanvas();canvas.style.width=e["styleWidth"]+
"px";canvas.style.height=e["styleHeight"]+"px";canvas.style.marginLeft=e["marginLeft"]+"px";canvas.style.marginTop=e["marginTop"]+"px";document.documentElement.style.setProperty("--construct-scale",e["displayScale"]);if(this._isFirstSizeUpdate){canvas.style.display="";this._isFirstSizeUpdate=false}}_OnInvokeDownload(e){const url=e["url"];const filename=e["filename"];const a=document.createElement("a");const body=document.body;a.textContent=filename;a.href=url;a.download=filename;body.appendChild(a);
a.click();body.removeChild(a)}async _OnLoadWebFonts(e){const webfonts=e["webfonts"];await Promise.all(webfonts.map(async info=>{const fontFace=new FontFace(info.name,`url('${info.url}')`);document.fonts.add(fontFace);await fontFace.load()}))}async _OnRasterSvgImage(e){const blob=e["blob"];const imageWidth=e["imageWidth"];const imageHeight=e["imageHeight"];const surfaceWidth=e["surfaceWidth"];const surfaceHeight=e["surfaceHeight"];const imageBitmapOpts=e["imageBitmapOpts"];const canvas=await self["C3_RasterSvgImageBlob"](blob,
imageWidth,imageHeight,surfaceWidth,surfaceHeight);let ret;if(imageBitmapOpts)ret=await createImageBitmap(canvas,imageBitmapOpts);else ret=await createImageBitmap(canvas);return{"imageBitmap":ret,"transferables":[ret]}}async _OnGetSvgImageSize(e){return await self["C3_GetSvgImageSize"](e["blob"])}async _OnAddStylesheet(e){await AddStyleSheet(e["url"])}_PlayPendingMedia(){const mediaToTryPlay=[...this._mediaPendingPlay];this._mediaPendingPlay.clear();if(!this._isSilent)for(const mediaElem of mediaToTryPlay){const playRet=
mediaElem.play();if(playRet)playRet.catch(err=>{if(!this._mediaRemovedPendingPlay.has(mediaElem))this._mediaPendingPlay.add(mediaElem)})}}TryPlayMedia(mediaElem){if(typeof mediaElem.play!=="function")throw new Error("missing play function");this._mediaRemovedPendingPlay.delete(mediaElem);let playRet;try{playRet=mediaElem.play()}catch(err){this._mediaPendingPlay.add(mediaElem);return}if(playRet)playRet.catch(err=>{if(!this._mediaRemovedPendingPlay.has(mediaElem))this._mediaPendingPlay.add(mediaElem)})}RemovePendingPlay(mediaElem){this._mediaPendingPlay.delete(mediaElem);
this._mediaRemovedPendingPlay.add(mediaElem)}SetSilent(s){this._isSilent=!!s}_OnHideCordovaSplash(){if(navigator["splashscreen"]&&navigator["splashscreen"]["hide"])navigator["splashscreen"]["hide"]()}_OnDebugHighlight(e){const show=e["show"];if(!show){if(this._debugHighlightElem)this._debugHighlightElem.style.display="none";return}if(!this._debugHighlightElem){this._debugHighlightElem=document.createElement("div");this._debugHighlightElem.id="inspectOutline";document.body.appendChild(this._debugHighlightElem)}const elem=
this._debugHighlightElem;elem.style.display="";elem.style.left=e["left"]-1+"px";elem.style.top=e["top"]-1+"px";elem.style.width=e["width"]+2+"px";elem.style.height=e["height"]+2+"px";elem.textContent=e["name"]}_OnRegisterSW(){if(window["C3_RegisterSW"])window["C3_RegisterSW"]()}_OnPostToDebugger(data){if(!window["c3_postToMessagePort"])return;data["from"]="runtime";window["c3_postToMessagePort"](data)}_InvokeFunctionFromJS(name,params){return this.PostToRuntimeAsync("js-invoke-function",{"name":name,
"params":params})}_OnScriptCreateWorker(e){const url=e["url"];const opts=e["opts"];const port2=e["port2"];const worker=new Worker(url,opts);worker.postMessage({"type":"construct-worker-init","port2":port2},[port2])}_OnAlert(e){alert(e["message"])}_OnScreenReaderTextEvent(e){const type=e["type"];if(type==="create"){const p=document.createElement("p");p.id="c3-sr-"+e["id"];p.textContent=e["text"];this._screenReaderTextWrap.appendChild(p)}else if(type==="update"){const p=document.getElementById("c3-sr-"+
e["id"]);if(p)p.textContent=e["text"];else console.warn(`[Construct] Missing screen reader text with id ${e["id"]}`)}else if(type==="release"){const p=document.getElementById("c3-sr-"+e["id"]);if(p)p.remove();else console.warn(`[Construct] Missing screen reader text with id ${e["id"]}`)}else console.warn(`[Construct] Unknown screen reader text update '${type}'`)}_SetExportingToVideo(e){this._isExportToVideo=true;const headerElem=document.createElement("h1");headerElem.id="exportToVideoMessage";headerElem.textContent=
e["message"];document.body.prepend(headerElem);document.body.classList.add("exportingToVideo");this.GetRuntimeInterface().GetCanvas().style.display="";this._iRuntime.SetIsExportingToVideo(e["duration"])}_OnExportVideoProgress(e){this._exportVideoProgressMessage=e["message"];if(this._exportVideoUpdateTimerId===-1)this._exportVideoUpdateTimerId=setTimeout(()=>this._DoUpdateExportVideoProgressMessage(),250)}_DoUpdateExportVideoProgressMessage(){this._exportVideoUpdateTimerId=-1;const headerElem=document.getElementById("exportToVideoMessage");
if(headerElem)headerElem.textContent=this._exportVideoProgressMessage}_OnExportedToVideo(e){window.c3_postToMessagePort({"type":"exported-video","arrayBuffer":e["arrayBuffer"],"contentType":e["contentType"],"time":e["time"]})}_OnExportedToImageSequence(e){window.c3_postToMessagePort({"type":"exported-image-sequence","blobArr":e["blobArr"],"time":e["time"],"gif":e["gif"]})}};RuntimeInterface.AddDOMHandlerClass(HANDLER_CLASS)};


'use strict';{const DISPATCH_WORKER_SCRIPT_NAME="dispatchworker.js";const JOB_WORKER_SCRIPT_NAME="jobworker.js";self.JobSchedulerDOM=class JobSchedulerDOM{constructor(runtimeInterface){this._runtimeInterface=runtimeInterface;this._baseUrl=runtimeInterface.GetRuntimeBaseURL();if(runtimeInterface.GetExportType()==="preview")this._baseUrl+="workers/";else this._baseUrl+=runtimeInterface.GetScriptFolder();this._maxNumWorkers=Math.min(navigator.hardwareConcurrency||2,16);this._dispatchWorker=null;this._jobWorkers=
[];this._inputPort=null;this._outputPort=null}_GetWorkerScriptFolder(){if(this._runtimeInterface.GetExportType()==="playable-ad")return this._runtimeInterface.GetScriptFolder();else return""}async Init(){if(this._hasInitialised)throw new Error("already initialised");this._hasInitialised=true;const dispatchWorkerScriptUrl=this._runtimeInterface._GetWorkerURL(this._GetWorkerScriptFolder()+DISPATCH_WORKER_SCRIPT_NAME);this._dispatchWorker=await this._runtimeInterface.CreateWorker(dispatchWorkerScriptUrl,
this._baseUrl,{name:"DispatchWorker"});const messageChannel=new MessageChannel;this._inputPort=messageChannel.port1;this._dispatchWorker.postMessage({"type":"_init","in-port":messageChannel.port2},[messageChannel.port2]);this._outputPort=await this._CreateJobWorker()}async _CreateJobWorker(){const number=this._jobWorkers.length;const jobWorkerScriptUrl=this._runtimeInterface._GetWorkerURL(this._GetWorkerScriptFolder()+JOB_WORKER_SCRIPT_NAME);const jobWorker=await this._runtimeInterface.CreateWorker(jobWorkerScriptUrl,
this._baseUrl,{name:"JobWorker"+number});const dispatchChannel=new MessageChannel;const outputChannel=new MessageChannel;this._dispatchWorker.postMessage({"type":"_addJobWorker","port":dispatchChannel.port1},[dispatchChannel.port1]);jobWorker.postMessage({"type":"init","number":number,"dispatch-port":dispatchChannel.port2,"output-port":outputChannel.port2},[dispatchChannel.port2,outputChannel.port2]);this._jobWorkers.push(jobWorker);return outputChannel.port1}GetPortData(){return{"inputPort":this._inputPort,
"outputPort":this._outputPort,"maxNumWorkers":this._maxNumWorkers}}GetPortTransferables(){return[this._inputPort,this._outputPort]}}};


'use strict';{if(window["C3_IsSupported"]){const enableWorker=false;window["c3_runtimeInterface"]=new self.RuntimeInterface({useWorker:enableWorker,workerMainUrl:"workermain.js",engineScripts:["scripts/c3runtime.js"],projectScripts:[],mainProjectScript:"",scriptFolder:"scripts/",workerDependencyScripts:["box2d.wasm.js"],exportType:"playable-ad"})}};
'use strict';{const DOM_COMPONENT_ID="button";function StopPropagation(e){e.stopPropagation()}const HANDLER_CLASS=class ButtonDOMHandler extends self.DOMElementHandler{constructor(iRuntime){super(iRuntime,DOM_COMPONENT_ID)}CreateElement(elementId,e){const inputElem=document.createElement("input");const isCheckbox=e["isCheckbox"];let mainElem=inputElem;if(isCheckbox){inputElem.type="checkbox";const labelElem=document.createElement("label");labelElem.appendChild(inputElem);labelElem.appendChild(document.createTextNode(""));
labelElem.style.fontFamily="sans-serif";labelElem.style.userSelect="none";labelElem.style.webkitUserSelect="none";labelElem.style.display="inline-block";labelElem.style.color="black";mainElem=labelElem}else inputElem.type="button";mainElem.style.position="absolute";mainElem.addEventListener("pointerdown",StopPropagation);mainElem.addEventListener("pointermove",StopPropagation);mainElem.addEventListener("pointerrawupdate",StopPropagation);mainElem.addEventListener("pointerup",StopPropagation);mainElem.addEventListener("mousedown",
StopPropagation);mainElem.addEventListener("mouseup",StopPropagation);mainElem.addEventListener("keydown",StopPropagation);mainElem.addEventListener("keyup",StopPropagation);inputElem.addEventListener("click",()=>this._PostToRuntimeElementMaybeSync("click",elementId,{"isChecked":inputElem.checked}));if(e["id"])inputElem.id=e["id"];if(e["className"])inputElem.className=e["className"];this.UpdateState(mainElem,e);return mainElem}_GetInputElem(mainElem){if(mainElem.tagName.toLowerCase()==="input")return mainElem;
else return mainElem.firstChild}_GetFocusElement(mainElem){return this._GetInputElem(mainElem)}UpdateState(mainElem,e){const inputElem=this._GetInputElem(mainElem);inputElem.checked=e["isChecked"];inputElem.disabled=!e["isEnabled"];mainElem.title=e["title"];if(mainElem===inputElem)inputElem.value=e["text"];else mainElem.lastChild.textContent=e["text"]}};self.RuntimeInterface.AddDOMHandlerClass(HANDLER_CLASS)};
'use strict';{const R_TO_D=180/Math.PI;const DOM_COMPONENT_ID="audio";self.AudioDOMHandler=class AudioDOMHandler extends self.DOMHandler{constructor(iRuntime){super(iRuntime,DOM_COMPONENT_ID);this._audioContext=null;this._destinationNode=null;this._hasUnblocked=false;this._hasAttachedUnblockEvents=false;this._unblockFunc=()=>this._UnblockAudioContext();this._audioBuffers=[];this._audioInstances=[];this._lastAudioInstance=null;this._lastPlayedTags=[];this._loadedAudioUrls=new Set;this._lastTickCount=
-1;this._pendingTags=new Map;this._masterVolume=1;this._isSilent=false;this._timeScaleMode=0;this._timeScale=1;this._gameTime=0;this._panningModel="HRTF";this._distanceModel="inverse";this._refDistance=600;this._maxDistance=1E4;this._rolloffFactor=1;this._lastListenerPos=[0,0,0];this._lastListenerOrientation=[0,0,-1,0,1,0];this._playMusicAsSound=false;this._hasAnySoftwareDecodedMusic=false;this._supportsWebMOpus=this._iRuntime.IsAudioFormatSupported("audio/webm; codecs=opus");this._effects=new Map;
this._analysers=new Set;this._isPendingPostFxState=false;this._hasStartedOfflineRender=false;this._microphoneTag="";this._microphoneSource=null;self["C3Audio_OnMicrophoneStream"]=(localMediaStream,tag)=>this._OnMicrophoneStream(localMediaStream,tag);this._destMediaStreamNode=null;self["C3Audio_GetOutputStream"]=()=>this._OnGetOutputStream();self["C3Audio_DOMInterface"]=this;this.AddRuntimeMessageHandlers([["create-audio-context",e=>this._CreateAudioContext(e)],["play",e=>this._Play(e)],["stop",e=>
this._Stop(e)],["stop-all",()=>this._StopAll()],["set-paused",e=>this._SetPaused(e)],["set-volume",e=>this._SetVolume(e)],["fade-volume",e=>this._FadeVolume(e)],["set-master-volume",e=>this._SetMasterVolume(e)],["set-muted",e=>this._SetMuted(e)],["set-silent",e=>this._SetSilent(e)],["set-looping",e=>this._SetLooping(e)],["set-playback-rate",e=>this._SetPlaybackRate(e)],["set-stereo-pan",e=>this._SetStereoPan(e)],["seek",e=>this._Seek(e)],["preload",e=>this._Preload(e)],["unload",e=>this._Unload(e)],
["unload-all",()=>this._UnloadAll()],["set-suspended",e=>this._SetSuspended(e)],["add-effect",e=>this._AddEffect(e)],["set-effect-param",e=>this._SetEffectParam(e)],["remove-effects",e=>this._RemoveEffects(e)],["tick",e=>this._OnTick(e)],["load-state",e=>this._OnLoadState(e)],["offline-render-audio",e=>this._OnOfflineRenderAudio(e)],["offline-render-finish",()=>this._OnOfflineRenderFinish()]])}async _CreateAudioContext(e){if(e["isiOSCordova"]||e["isSafari"])this._playMusicAsSound=true;this._timeScaleMode=
e["timeScaleMode"];this._panningModel=["equalpower","HRTF","soundfield"][e["panningModel"]];this._distanceModel=["linear","inverse","exponential"][e["distanceModel"]];this._refDistance=e["refDistance"];this._maxDistance=e["maxDistance"];this._rolloffFactor=e["rolloffFactor"];if(this._iRuntime.IsExportingToVideo()){this._playMusicAsSound=true;const sampleRate=48E3;this._audioContext=new OfflineAudioContext({"numberOfChannels":2,"sampleRate":sampleRate,"length":Math.ceil(this._iRuntime.GetExportToVideoDuration()*
sampleRate)})}else{const opts={"latencyHint":e["latencyHint"]};if(!this.SupportsWebMOpus())opts["sampleRate"]=48E3;if(typeof AudioContext!=="undefined")this._audioContext=new AudioContext(opts);else if(typeof webkitAudioContext!=="undefined")this._audioContext=new webkitAudioContext(opts);else throw new Error("Web Audio API not supported");this._AttachUnblockEvents();this._audioContext.onstatechange=()=>{if(this._audioContext.state!=="running")this._AttachUnblockEvents();this.PostToRuntime("audiocontext-state",
{"audioContextState":this._audioContext.state})}}this._destinationNode=this._audioContext["createGain"]();this._destinationNode["connect"](this._audioContext["destination"]);const listenerPos=e["listenerPos"];this._lastListenerPos[0]=listenerPos[0];this._lastListenerPos[1]=listenerPos[1];this._lastListenerPos[2]=listenerPos[2];this._audioContext["listener"]["setPosition"](listenerPos[0],listenerPos[1],listenerPos[2]);this._audioContext["listener"]["setOrientation"](...this._lastListenerOrientation);
self["C3_GetAudioContextCurrentTime"]=()=>this.GetAudioCurrentTime();try{await Promise.all(e["preloadList"].map(o=>this._GetAudioBuffer(o["originalUrl"],o["url"],o["type"],false)))}catch(err){console.error("[Construct] Preloading sounds failed: ",err)}return{"sampleRate":this._audioContext["sampleRate"],"audioContextState":this._audioContext.state,"outputLatency":this._audioContext["outputLatency"]||0}}_AttachUnblockEvents(){if(this._hasAttachedUnblockEvents)return;this._hasUnblocked=false;window.addEventListener("pointerup",
this._unblockFunc,true);window.addEventListener("touchend",this._unblockFunc,true);window.addEventListener("click",this._unblockFunc,true);window.addEventListener("keydown",this._unblockFunc,true);this._hasAttachedUnblockEvents=true}_DetachUnblockEvents(){if(!this._hasAttachedUnblockEvents)return;this._hasUnblocked=true;window.removeEventListener("pointerup",this._unblockFunc,true);window.removeEventListener("touchend",this._unblockFunc,true);window.removeEventListener("click",this._unblockFunc,true);
window.removeEventListener("keydown",this._unblockFunc,true);this._hasAttachedUnblockEvents=false}_UnblockAudioContext(){if(this._hasUnblocked)return;const audioContext=this._audioContext;if(audioContext["state"]==="suspended"&&audioContext["resume"])audioContext["resume"]();const buffer=audioContext["createBuffer"](1,220,22050);const source=audioContext["createBufferSource"]();source["buffer"]=buffer;source["connect"](audioContext["destination"]);source["start"](0);if(audioContext["state"]==="running")this._DetachUnblockEvents()}_MatchTagLists(tagArr1,
tagArr2){for(const t2 of tagArr2){let found=false;for(const t1 of tagArr1)if(self.AudioDOMHandler.EqualsNoCase(t1,t2)){found=true;break}if(!found)return false}return true}GetAudioContext(){return this._audioContext}GetAudioCurrentTime(){return this._audioContext["currentTime"]}GetDestinationNode(){return this._destinationNode}["GetAudioContextExtern"](){return this.GetAudioContext()}["GetDestinationNodeExtern"](){return this.GetDestinationNode()}GetDestinationForTag(tag){const fxChain=this._effects.get(tag.toLowerCase());
if(fxChain)return fxChain[0].GetInputNode();else return this.GetDestinationNode()}AddEffectForTag(tag,effect){tag=tag.toLowerCase();let fxChain=this._effects.get(tag);if(!fxChain){fxChain=[];this._effects.set(tag,fxChain)}effect._SetIndex(fxChain.length);effect._SetTag(tag);fxChain.push(effect);this._ReconnectEffects(tag)}_ReconnectEffects(tag){tag=tag.toLowerCase();let destNode=this.GetDestinationNode();const fxChain=this._effects.get(tag);if(fxChain&&fxChain.length){destNode=fxChain[0].GetInputNode();
for(let i=0,len=fxChain.length;i<len;++i){const n=fxChain[i];if(i+1===len)n.ConnectTo(this.GetDestinationNode());else n.ConnectTo(fxChain[i+1].GetInputNode())}}for(const ai of this.audioInstancesByEffectTag(tag))ai.Reconnect(destNode);if(this._microphoneSource&&this._microphoneTag===tag){this._microphoneSource["disconnect"]();this._microphoneSource["connect"](destNode)}}GetMasterVolume(){return this._masterVolume}IsSilent(){return this._isSilent}GetTimeScaleMode(){return this._timeScaleMode}GetTimeScale(){return this._timeScale}GetGameTime(){return this._gameTime}IsPlayMusicAsSound(){return this._playMusicAsSound}SupportsWebMOpus(){return this._supportsWebMOpus}_SetHasAnySoftwareDecodedMusic(){this._hasAnySoftwareDecodedMusic=
true}GetPanningModel(){return this._panningModel}GetDistanceModel(){return this._distanceModel}GetReferenceDistance(){return this._refDistance}GetMaxDistance(){return this._maxDistance}GetRolloffFactor(){return this._rolloffFactor}DecodeAudioData(audioData,needsSoftwareDecode){if(needsSoftwareDecode)return this._iRuntime._WasmDecodeWebMOpus(audioData).then(rawAudio=>{const audioBuffer=this._audioContext["createBuffer"](1,rawAudio.length,48E3);const channelBuffer=audioBuffer["getChannelData"](0);channelBuffer.set(rawAudio);
return audioBuffer});else return new Promise((resolve,reject)=>{this._audioContext["decodeAudioData"](audioData,resolve,reject)})}TryPlayMedia(mediaElem){this._iRuntime.TryPlayMedia(mediaElem)}RemovePendingPlay(mediaElem){this._iRuntime.RemovePendingPlay(mediaElem)}ReleaseInstancesForBuffer(buffer){let j=0;for(let i=0,len=this._audioInstances.length;i<len;++i){const a=this._audioInstances[i];this._audioInstances[j]=a;if(a.GetBuffer()===buffer)a.Release();else++j}this._audioInstances.length=j}ReleaseAllMusicBuffers(){let j=
0;for(let i=0,len=this._audioBuffers.length;i<len;++i){const b=this._audioBuffers[i];this._audioBuffers[j]=b;if(b.IsMusic())b.Release();else++j}this._audioBuffers.length=j}*audioInstancesMatchingTags(tags){if(tags.length>0)for(const ai of this._audioInstances){if(this._MatchTagLists(ai.GetTags(),tags))yield ai}else if(this._lastAudioInstance&&!this._lastAudioInstance.HasEnded())yield this._lastAudioInstance}*audioInstancesByEffectTag(tag){if(tag)for(const ai of this._audioInstances){if(self.AudioDOMHandler.EqualsNoCase(ai.GetEffectTag(),
tag))yield ai}else if(this._lastAudioInstance&&!this._lastAudioInstance.HasEnded())yield this._lastAudioInstance}async _GetAudioBuffer(originalUrl,url,type,isMusic,dontCreate){for(const ab of this._audioBuffers)if(ab.GetUrl()===url){await ab.Load();return ab}if(dontCreate)return null;if(isMusic&&(this._playMusicAsSound||this._hasAnySoftwareDecodedMusic))this.ReleaseAllMusicBuffers();const ret=self.C3AudioBuffer.Create(this,originalUrl,url,type,isMusic);this._audioBuffers.push(ret);await ret.Load();
if(!this._loadedAudioUrls.has(originalUrl)){this.PostToRuntime("buffer-metadata",{"originalUrl":originalUrl,"duration":ret.GetDuration()});this._loadedAudioUrls.add(originalUrl)}return ret}async _GetAudioInstance(originalUrl,url,type,tags,isMusic){for(const ai of this._audioInstances)if(ai.GetUrl()===url&&(ai.CanBeRecycled()||isMusic)){ai.SetTags(tags);return ai}const buffer=await this._GetAudioBuffer(originalUrl,url,type,isMusic);const ret=buffer.CreateInstance(tags);this._audioInstances.push(ret);
return ret}_AddPendingTags(tags){const tagStr=tags.join(" ");let info=this._pendingTags.get(tagStr);if(!info){let resolve=null;const promise=new Promise(r=>resolve=r);info={pendingCount:0,promise,resolve};this._pendingTags.set(tagStr,info)}info.pendingCount++}_RemovePendingTags(tags){const tagStr=tags.join(" ");const info=this._pendingTags.get(tagStr);if(!info)throw new Error("expected pending tag");info.pendingCount--;if(info.pendingCount===0){info.resolve();this._pendingTags.delete(tagStr)}}TagsReady(tags){const tagStr=
(tags.length===0?this._lastPlayedTags:tags).join(" ");const info=this._pendingTags.get(tagStr);if(info)return info.promise;else return Promise.resolve()}_MaybeStartTicking(){if(this._analysers.size>0){this._StartTicking();return}for(const ai of this._audioInstances)if(ai.IsActive()){this._StartTicking();return}}Tick(){for(const a of this._analysers)a.Tick();const currentTime=this.GetAudioCurrentTime();for(const ai of this._audioInstances)ai.Tick(currentTime);const instStates=this._audioInstances.filter(a=>
a.IsActive()).map(a=>a.GetState());this.PostToRuntime("state",{"tickCount":this._lastTickCount,"outputLatency":this._audioContext["outputLatency"]||0,"audioInstances":instStates,"analysers":[...this._analysers].map(a=>a.GetData())});if(instStates.length===0&&this._analysers.size===0)this._StopTicking()}PostTrigger(type,tags,aiid){this.PostToRuntime("trigger",{"type":type,"tags":tags,"aiid":aiid})}async _Play(e){const originalUrl=e["originalUrl"];const url=e["url"];const type=e["type"];const isMusic=
e["isMusic"];const tags=e["tags"];const isLooping=e["isLooping"];const volume=e["vol"];const position=e["pos"];const panning=e["panning"];const stereoPan=e["stereoPan"];let startTime=e["off"];if(startTime>0&&!e["trueClock"])if(this._audioContext["getOutputTimestamp"]){const outputTimestamp=this._audioContext["getOutputTimestamp"]();startTime=startTime-outputTimestamp["performanceTime"]/1E3+outputTimestamp["contextTime"]}else startTime=startTime-performance.now()/1E3+this._audioContext["currentTime"];
this._lastPlayedTags=tags.slice(0);this._AddPendingTags(tags);try{this._lastAudioInstance=await this._GetAudioInstance(originalUrl,url,type,tags,isMusic);if(panning){this._lastAudioInstance.SetPannerEnabled(true);this._lastAudioInstance.SetPan(panning["x"],panning["y"],panning["z"],panning["angle"],panning["innerAngle"],panning["outerAngle"],panning["outerGain"]);if(panning.hasOwnProperty("uid"))this._lastAudioInstance.SetUID(panning["uid"])}else if(typeof stereoPan==="number"&&stereoPan!==0){this._lastAudioInstance.SetStereoPannerEnabled(true);
this._lastAudioInstance.SetStereoPan(stereoPan)}else{this._lastAudioInstance.SetPannerEnabled(false);this._lastAudioInstance.SetStereoPannerEnabled(false)}this._lastAudioInstance.Play(isLooping,volume,position,startTime)}catch(err){console.error("[Construct] Audio: error starting playback: ",err);return}finally{this._RemovePendingTags(tags)}this._StartTicking()}_Stop(e){const tags=e["tags"];for(const ai of this.audioInstancesMatchingTags(tags))ai.Stop()}_StopAll(){for(const ai of this._audioInstances)ai.Stop()}_SetPaused(e){const tags=
e["tags"];const paused=e["paused"];for(const ai of this.audioInstancesMatchingTags(tags))if(paused)ai.Pause();else ai.Resume();this._MaybeStartTicking()}_SetVolume(e){const tags=e["tags"];const vol=e["vol"];for(const ai of this.audioInstancesMatchingTags(tags))ai.SetVolume(vol)}_SetStereoPan(e){const tags=e["tags"];const p=e["p"];for(const ai of this.audioInstancesMatchingTags(tags)){ai.SetStereoPannerEnabled(true);ai.SetStereoPan(p)}}async _FadeVolume(e){const tags=e["tags"];const vol=e["vol"];const duration=
e["duration"];const stopOnEnd=e["stopOnEnd"];await this.TagsReady(tags);for(const ai of this.audioInstancesMatchingTags(tags))ai.FadeVolume(vol,duration,stopOnEnd);this._MaybeStartTicking()}_SetMasterVolume(e){this._masterVolume=e["vol"];this._destinationNode["gain"]["value"]=this._masterVolume}_SetMuted(e){const tags=e["tags"];const isMuted=e["isMuted"];for(const ai of this.audioInstancesMatchingTags(tags))ai.SetMuted(isMuted)}_SetSilent(e){this._isSilent=e["isSilent"];this._iRuntime.SetSilent(this._isSilent);
for(const ai of this._audioInstances)ai._UpdateMuted()}_SetLooping(e){const tags=e["tags"];const isLooping=e["isLooping"];for(const ai of this.audioInstancesMatchingTags(tags))ai.SetLooping(isLooping)}async _SetPlaybackRate(e){const tags=e["tags"];const rate=e["rate"];await this.TagsReady(tags);for(const ai of this.audioInstancesMatchingTags(tags))ai.SetPlaybackRate(rate)}async _Seek(e){const tags=e["tags"];const pos=e["pos"];await this.TagsReady(tags);for(const ai of this.audioInstancesMatchingTags(tags))ai.Seek(pos)}async _Preload(e){const originalUrl=
e["originalUrl"];const url=e["url"];const type=e["type"];const isMusic=e["isMusic"];try{await this._GetAudioInstance(originalUrl,url,type,"",isMusic)}catch(err){console.error("[Construct] Audio: error preloading: ",err)}}async _Unload(e){const url=e["url"];const type=e["type"];const isMusic=e["isMusic"];const buffer=await this._GetAudioBuffer("",url,type,isMusic,true);if(!buffer)return;buffer.Release();const i=this._audioBuffers.indexOf(buffer);if(i!==-1)this._audioBuffers.splice(i,1)}_UnloadAll(){for(const buffer of this._audioBuffers)buffer.Release();
this._audioBuffers.length=0}_SetSuspended(e){const isSuspended=e["isSuspended"];if(!isSuspended&&this._audioContext["resume"])this._audioContext["resume"]();for(const ai of this._audioInstances)ai.SetSuspended(isSuspended);if(isSuspended&&this._audioContext["suspend"])this._audioContext["suspend"]()}_OnTick(e){this._timeScale=e["timeScale"];this._gameTime=e["gameTime"];this._lastTickCount=e["tickCount"];if(this._timeScaleMode!==0)for(const ai of this._audioInstances)ai._UpdatePlaybackRate();const listenerPos=
e["listenerPos"];if(listenerPos&&(this._lastListenerPos[0]!==listenerPos[0]||this._lastListenerPos[1]!==listenerPos[1]||this._lastListenerPos[2]!==listenerPos[2])){this._lastListenerPos[0]=listenerPos[0];this._lastListenerPos[1]=listenerPos[1];this._lastListenerPos[2]=listenerPos[2];this._audioContext["listener"]["setPosition"](listenerPos[0],listenerPos[1],listenerPos[2])}const listenerOrientation=e["listenerOrientation"];if(listenerOrientation&&(this._lastListenerOrientation[0]!==listenerOrientation[0]||
this._lastListenerOrientation[1]!==listenerOrientation[1]||this._lastListenerOrientation[2]!==listenerOrientation[2]||this._lastListenerOrientation[3]!==listenerOrientation[3]||this._lastListenerOrientation[4]!==listenerOrientation[4]||this._lastListenerOrientation[5]!==listenerOrientation[5])){for(let i=0;i<6;++i)this._lastListenerOrientation[i]=listenerOrientation[i];this._audioContext["listener"]["setOrientation"](...this._lastListenerOrientation)}for(const instPan of e["instPans"]){const uid=
instPan["uid"];for(const ai of this._audioInstances)if(ai.GetUID()===uid)ai.SetPanXYZA(instPan["x"],instPan["y"],instPan["z"],instPan["angle"])}}async _AddEffect(e){const type=e["type"];const tags=e["tags"];const params=e["params"];let effect;let convolutionBuffer;if(type==="convolution")try{convolutionBuffer=await this._GetAudioBuffer(e["bufferOriginalUrl"],e["bufferUrl"],e["bufferType"],false)}catch(err){console.log("[Construct] Audio: error loading convolution: ",err);return}for(const tag of tags){if(type===
"filter")effect=new self.C3AudioFilterFX(this,...params);else if(type==="delay")effect=new self.C3AudioDelayFX(this,...params);else if(type==="convolution"){effect=new self.C3AudioConvolveFX(this,convolutionBuffer.GetAudioBuffer(),...params);effect._SetBufferInfo(e["bufferOriginalUrl"],e["bufferUrl"],e["bufferType"])}else if(type==="flanger")effect=new self.C3AudioFlangerFX(this,...params);else if(type==="phaser")effect=new self.C3AudioPhaserFX(this,...params);else if(type==="gain")effect=new self.C3AudioGainFX(this,
...params);else if(type==="stereopan")effect=new self.C3AudioStereoPanFX(this,...params);else if(type==="tremolo")effect=new self.C3AudioTremoloFX(this,...params);else if(type==="ringmod")effect=new self.C3AudioRingModFX(this,...params);else if(type==="distortion")effect=new self.C3AudioDistortionFX(this,...params);else if(type==="compressor")effect=new self.C3AudioCompressorFX(this,...params);else if(type==="analyser")effect=new self.C3AudioAnalyserFX(this,...params);else throw new Error("invalid effect type");
this.AddEffectForTag(tag,effect)}this._PostUpdatedFxState()}_SetEffectParam(e){const tags=e["tags"];const index=e["index"];const param=e["param"];const value=e["value"];const ramp=e["ramp"];const time=e["time"];for(const tag of tags){const fxChain=this._effects.get(tag.toLowerCase());if(!fxChain||index<0||index>=fxChain.length)continue;fxChain[index].SetParam(param,value,ramp,time)}this._PostUpdatedFxState()}_RemoveEffects(e){const tags=e["tags"];for(const tag of tags){const lowerTag=tag.toLowerCase();
const fxChain=this._effects.get(lowerTag);if(!fxChain||!fxChain.length)return;for(const effect of fxChain)effect.Release();this._effects.delete(lowerTag);this._ReconnectEffects(lowerTag)}}_AddAnalyser(analyser){this._analysers.add(analyser);this._MaybeStartTicking()}_RemoveAnalyser(analyser){this._analysers.delete(analyser)}_PostUpdatedFxState(){if(this._isPendingPostFxState)return;this._isPendingPostFxState=true;Promise.resolve().then(()=>this._DoPostUpdatedFxState())}_DoPostUpdatedFxState(){const fxstate=
{};for(const [tag,fxChain]of this._effects)fxstate[tag]=fxChain.map(e=>e.GetState());this.PostToRuntime("fxstate",{"fxstate":fxstate});this._isPendingPostFxState=false}async _OnLoadState(e){const saveLoadMode=e["saveLoadMode"];if(saveLoadMode!==3){const keepAudioInstances=[];for(const ai of this._audioInstances)if(ai.IsMusic()&&saveLoadMode===1||!ai.IsMusic()&&saveLoadMode===2)keepAudioInstances.push(ai);else ai.Release();this._audioInstances=keepAudioInstances}for(const fxChain of this._effects.values())for(const effect of fxChain)effect.Release();
this._effects.clear();this._timeScale=e["timeScale"];this._gameTime=e["gameTime"];const listenerPos=e["listenerPos"];this._lastListenerPos[0]=listenerPos[0];this._lastListenerPos[1]=listenerPos[1];this._lastListenerPos[2]=listenerPos[2];this._audioContext["listener"]["setPosition"](listenerPos[0],listenerPos[1],listenerPos[2]);const listenerOrientation=e["listenerOrientation"];if(Array.isArray(listenerOrientation)){for(let i=0;i<6;++i)this._lastListenerOrientation[i]=listenerOrientation[i];this._audioContext["listener"]["setOrientation"](...this._lastListenerOrientation)}this._isSilent=
e["isSilent"];this._iRuntime.SetSilent(this._isSilent);this._masterVolume=e["masterVolume"];this._destinationNode["gain"]["value"]=this._masterVolume;const promises=[];for(const fxChainData of Object.values(e["effects"]))promises.push(Promise.all(fxChainData.map(d=>this._AddEffect(d))));await Promise.all(promises);await Promise.all(e["playing"].map(d=>this._LoadAudioInstance(d,saveLoadMode)));this._MaybeStartTicking()}async _LoadAudioInstance(d,saveLoadMode){if(saveLoadMode===3)return;const originalUrl=
d["bufferOriginalUrl"];const url=d["bufferUrl"];const type=d["bufferType"];const isMusic=d["isMusic"];const tags=d["tags"];const isLooping=d["isLooping"];const volume=d["volume"];const position=d["playbackTime"];if(isMusic&&saveLoadMode===1)return;if(!isMusic&&saveLoadMode===2)return;let ai=null;try{ai=await this._GetAudioInstance(originalUrl,url,type,tags,isMusic)}catch(err){console.error("[Construct] Audio: error loading audio state: ",err);return}ai.LoadPanState(d["pan"]);ai.LoadStereoPanState(d["stereoPan"]);
ai.Play(isLooping,volume,position,0);if(!d["isPlaying"])ai.Pause();ai._LoadAdditionalState(d)}_OnMicrophoneStream(localMediaStream,tag){if(this._microphoneSource)this._microphoneSource["disconnect"]();this._microphoneTag=tag.toLowerCase();this._microphoneSource=this._audioContext["createMediaStreamSource"](localMediaStream);this._microphoneSource["connect"](this.GetDestinationForTag(this._microphoneTag))}_OnGetOutputStream(){if(!this._destMediaStreamNode){this._destMediaStreamNode=this._audioContext["createMediaStreamDestination"]();
this._destinationNode["connect"](this._destMediaStreamNode)}return this._destMediaStreamNode["stream"]}async _OnOfflineRenderAudio(e){try{const time=e["time"];const suspendPromise=this._audioContext["suspend"](time);if(!this._hasStartedOfflineRender){this._audioContext["startRendering"]().then(buffer=>this._OnOfflineRenderCompleted(buffer)).catch(err=>this._OnOfflineRenderError(err));this._hasStartedOfflineRender=true}else this._audioContext["resume"]();await suspendPromise}catch(err){this._OnOfflineRenderError(err)}}_OnOfflineRenderFinish(){this._audioContext["resume"]()}_OnOfflineRenderCompleted(buffer){const channelArrayBuffers=
[];for(let i=0,len=buffer["numberOfChannels"];i<len;++i){const f32arr=buffer["getChannelData"](i);channelArrayBuffers.push(f32arr.buffer)}this._iRuntime.PostToRuntimeComponent("runtime","offline-audio-render-completed",{"duration":buffer["duration"],"length":buffer["length"],"numberOfChannels":buffer["numberOfChannels"],"sampleRate":buffer["sampleRate"],"channelData":channelArrayBuffers},null,channelArrayBuffers)}_OnOfflineRenderError(err){console.error(`[Audio] Offline rendering error: `,err)}static EqualsNoCase(a,
b){return a===b||a.normalize().toLowerCase()===b.normalize().toLowerCase()}static ToDegrees(x){return x*R_TO_D}static DbToLinearNoCap(x){return Math.pow(10,x/20)}static DbToLinear(x){return Math.max(Math.min(self.AudioDOMHandler.DbToLinearNoCap(x),1),0)}static LinearToDbNoCap(x){return Math.log(x)/Math.log(10)*20}static LinearToDb(x){return self.AudioDOMHandler.LinearToDbNoCap(Math.max(Math.min(x,1),0))}static e4(x,k){return 1-Math.exp(-k*x)}};self.RuntimeInterface.AddDOMHandlerClass(self.AudioDOMHandler)};
'use strict';{self.C3AudioBuffer=class C3AudioBuffer{constructor(audioDomHandler,originalUrl,url,type,isMusic){this._audioDomHandler=audioDomHandler;this._originalUrl=originalUrl;this._url=url;this._type=type;this._isMusic=isMusic;this._api="";this._loadState="not-loaded";this._loadPromise=null}Release(){this._loadState="not-loaded";this._audioDomHandler=null;this._loadPromise=null}static Create(audioDomHandler,originalUrl,url,type,isMusic){const needsSoftwareDecode=type==="audio/webm; codecs=opus"&&
!audioDomHandler.SupportsWebMOpus();if(isMusic&&needsSoftwareDecode)audioDomHandler._SetHasAnySoftwareDecodedMusic();if(!isMusic||audioDomHandler.IsPlayMusicAsSound()||needsSoftwareDecode)return new self.C3WebAudioBuffer(audioDomHandler,originalUrl,url,type,isMusic,needsSoftwareDecode);else return new self.C3Html5AudioBuffer(audioDomHandler,originalUrl,url,type,isMusic)}CreateInstance(tags){if(this._api==="html5")return new self.C3Html5AudioInstance(this._audioDomHandler,this,tags);else return new self.C3WebAudioInstance(this._audioDomHandler,
this,tags)}_Load(){}Load(){if(!this._loadPromise)this._loadPromise=this._Load();return this._loadPromise}IsLoaded(){}IsLoadedAndDecoded(){}HasFailedToLoad(){return this._loadState==="failed"}GetAudioContext(){return this._audioDomHandler.GetAudioContext()}GetApi(){return this._api}GetOriginalUrl(){return this._originalUrl}GetUrl(){return this._url}GetContentType(){return this._type}IsMusic(){return this._isMusic}GetDuration(){}}};
'use strict';{self.C3Html5AudioBuffer=class C3Html5AudioBuffer extends self.C3AudioBuffer{constructor(audioDomHandler,originalUrl,url,type,isMusic){super(audioDomHandler,originalUrl,url,type,isMusic);this._api="html5";this._audioElem=new Audio;this._audioElem.crossOrigin="anonymous";this._audioElem.autoplay=false;this._audioElem.preload="auto";this._loadResolve=null;this._loadReject=null;this._reachedCanPlayThrough=false;this._audioElem.addEventListener("canplaythrough",()=>this._reachedCanPlayThrough=
true);this._outNode=this.GetAudioContext()["createGain"]();this._mediaSourceNode=null;this._audioElem.addEventListener("canplay",()=>{if(this._loadResolve){this._loadState="loaded";this._loadResolve();this._loadResolve=null;this._loadReject=null}if(this._mediaSourceNode||!this._audioElem)return;this._mediaSourceNode=this.GetAudioContext()["createMediaElementSource"](this._audioElem);this._mediaSourceNode["connect"](this._outNode)});this.onended=null;this._audioElem.addEventListener("ended",()=>{if(this.onended)this.onended()});
this._audioElem.addEventListener("error",e=>this._OnError(e))}Release(){this._audioDomHandler.ReleaseInstancesForBuffer(this);this._outNode["disconnect"]();this._outNode=null;this._mediaSourceNode["disconnect"]();this._mediaSourceNode=null;if(this._audioElem&&!this._audioElem.paused)this._audioElem.pause();this.onended=null;this._audioElem=null;super.Release()}_Load(){this._loadState="loading";return new Promise((resolve,reject)=>{this._loadResolve=resolve;this._loadReject=reject;this._audioElem.src=
this._url})}_OnError(e){console.error(`[Construct] Audio '${this._url}' error: `,e);if(this._loadReject){this._loadState="failed";this._loadReject(e);this._loadResolve=null;this._loadReject=null}}IsLoaded(){const ret=this._audioElem["readyState"]>=4;if(ret)this._reachedCanPlayThrough=true;return ret||this._reachedCanPlayThrough}IsLoadedAndDecoded(){return this.IsLoaded()}GetAudioElement(){return this._audioElem}GetOutputNode(){return this._outNode}GetDuration(){return this._audioElem["duration"]}}};
'use strict';{self.C3WebAudioBuffer=class C3WebAudioBuffer extends self.C3AudioBuffer{constructor(audioDomHandler,originalUrl,url,type,isMusic,needsSoftwareDecode){super(audioDomHandler,originalUrl,url,type,isMusic);this._api="webaudio";this._audioData=null;this._audioBuffer=null;this._needsSoftwareDecode=!!needsSoftwareDecode}Release(){this._audioDomHandler.ReleaseInstancesForBuffer(this);this._audioData=null;this._audioBuffer=null;super.Release()}async _Fetch(){if(this._audioData)return this._audioData;
const iRuntime=this._audioDomHandler.GetRuntimeInterface();if(iRuntime.GetExportType()==="cordova"&&iRuntime.IsRelativeURL(this._url)&&iRuntime.IsFileProtocol())this._audioData=await iRuntime.CordovaFetchLocalFileAsArrayBuffer(this._url);else{const response=await fetch(this._url);if(!response.ok)throw new Error(`error fetching audio data: ${response.status} ${response.statusText}`);this._audioData=await response.arrayBuffer()}}async _Decode(){if(this._audioBuffer)return this._audioBuffer;this._audioBuffer=
await this._audioDomHandler.DecodeAudioData(this._audioData,this._needsSoftwareDecode);this._audioData=null}async _Load(){try{this._loadState="loading";await this._Fetch();await this._Decode();this._loadState="loaded"}catch(err){this._loadState="failed";console.error(`[Construct] Failed to load audio '${this._url}': `,err)}}IsLoaded(){return!!(this._audioData||this._audioBuffer)}IsLoadedAndDecoded(){return!!this._audioBuffer}GetAudioBuffer(){return this._audioBuffer}GetDuration(){return this._audioBuffer?
this._audioBuffer["duration"]:0}}};
'use strict';{let nextAiId=0;self.C3AudioInstance=class C3AudioInstance{constructor(audioDomHandler,buffer,tags){this._audioDomHandler=audioDomHandler;this._buffer=buffer;this._tags=tags;this._aiId=nextAiId++;this._gainNode=this.GetAudioContext()["createGain"]();this._gainNode["connect"](this.GetDestinationNode());this._pannerNode=null;this._isPannerEnabled=false;this._pannerPosition=[0,0,0];this._pannerOrientation=[0,0,0];this._pannerConeParams=[0,0,0];this._stereoPannerNode=null;this._isStereoPannerEnabled=
false;this._stereoPan=0;this._isStopped=true;this._isPaused=false;this._resumeMe=false;this._isLooping=false;this._volume=1;this._isMuted=false;this._playbackRate=1;const timeScaleMode=this._audioDomHandler.GetTimeScaleMode();this._isTimescaled=timeScaleMode===1&&!this.IsMusic()||timeScaleMode===2;this._instUid=-1;this._fadeEndTime=-1;this._stopOnFadeEnd=false}Release(){this._audioDomHandler=null;this._buffer=null;if(this._pannerNode){this._pannerNode["disconnect"]();this._pannerNode=null}if(this._stereoPannerNode){this._stereoPannerNode["disconnect"]();
this._stereoPannerNode=null}this._gainNode["disconnect"]();this._gainNode=null}GetAudioContext(){return this._audioDomHandler.GetAudioContext()}SetTags(tags){this._tags=tags}GetTags(){return this._tags}GetEffectTag(){return this._tags.length>0?this._tags[0]:""}GetDestinationNode(){return this._audioDomHandler.GetDestinationForTag(this.GetEffectTag())}GetCurrentTime(){if(this._isTimescaled)return this._audioDomHandler.GetGameTime();else return performance.now()/1E3}GetOriginalUrl(){return this._buffer.GetOriginalUrl()}GetUrl(){return this._buffer.GetUrl()}GetContentType(){return this._buffer.GetContentType()}GetBuffer(){return this._buffer}IsMusic(){return this._buffer.IsMusic()}GetAiId(){return this._aiId}HasEnded(){}CanBeRecycled(){}IsPlaying(){return!this._isStopped&&
!this._isPaused&&!this.HasEnded()}IsActive(){return!this._isStopped&&!this.HasEnded()}GetPlaybackTime(){}GetDuration(applyPlaybackRate){let ret=this._buffer.GetDuration();if(applyPlaybackRate)ret/=this._playbackRate||.001;return ret}Play(isLooping,vol,seekPos,scheduledTime){}Stop(){}Pause(){}IsPaused(){return this._isPaused}Resume(){}SetVolume(v){this._volume=v;this._gainNode["gain"]["cancelScheduledValues"](0);this._fadeEndTime=-1;this._gainNode["gain"]["value"]=this.GetOutputVolume()}FadeVolume(vol,
duration,stopOnEnd){if(this.IsMuted())return;const gainParam=this._gainNode["gain"];gainParam["cancelScheduledValues"](0);const currentTime=this._audioDomHandler.GetAudioCurrentTime();const endTime=currentTime+duration;gainParam["setValueAtTime"](gainParam["value"],currentTime);gainParam["linearRampToValueAtTime"](vol,endTime);this._volume=vol;this._fadeEndTime=endTime;this._stopOnFadeEnd=stopOnEnd}_UpdateVolume(){this.SetVolume(this._volume)}Tick(currentTime){if(this._fadeEndTime!==-1&&currentTime>=
this._fadeEndTime){this._fadeEndTime=-1;if(this._stopOnFadeEnd)this.Stop();this._audioDomHandler.PostTrigger("fade-ended",this._tags,this._aiId)}}GetOutputVolume(){const ret=this._volume;return isFinite(ret)?ret:0}SetMuted(m){m=!!m;if(this._isMuted===m)return;this._isMuted=m;this._UpdateMuted()}IsMuted(){return this._isMuted}IsSilent(){return this._audioDomHandler.IsSilent()}_UpdateMuted(){}SetLooping(l){}IsLooping(){return this._isLooping}SetPlaybackRate(r){if(this._playbackRate===r)return;this._playbackRate=
r;this._UpdatePlaybackRate()}_UpdatePlaybackRate(){}GetPlaybackRate(){return this._playbackRate}Seek(pos){}SetSuspended(s){}SetPannerEnabled(e){e=!!e;if(this._isPannerEnabled===e)return;this._isPannerEnabled=e;if(this._isPannerEnabled){this.SetStereoPannerEnabled(false);if(!this._pannerNode){this._pannerNode=this.GetAudioContext()["createPanner"]();this._pannerNode["panningModel"]=this._audioDomHandler.GetPanningModel();this._pannerNode["distanceModel"]=this._audioDomHandler.GetDistanceModel();this._pannerNode["refDistance"]=
this._audioDomHandler.GetReferenceDistance();this._pannerNode["maxDistance"]=this._audioDomHandler.GetMaxDistance();this._pannerNode["rolloffFactor"]=this._audioDomHandler.GetRolloffFactor()}this._gainNode["disconnect"]();this._gainNode["connect"](this._pannerNode);this._pannerNode["connect"](this.GetDestinationNode())}else{this._pannerNode["disconnect"]();this._gainNode["disconnect"]();this._gainNode["connect"](this.GetDestinationNode())}}SetPan(x,y,z,angle,innerAngle,outerAngle,outerGain){if(!this._isPannerEnabled)return;
this.SetPanXYZA(x,y,z,angle);const toDegrees=self.AudioDOMHandler.ToDegrees;if(this._pannerConeParams[0]!==toDegrees(innerAngle)){this._pannerConeParams[0]=toDegrees(innerAngle);this._pannerNode["coneInnerAngle"]=toDegrees(innerAngle)}if(this._pannerConeParams[1]!==toDegrees(outerAngle)){this._pannerConeParams[1]=toDegrees(outerAngle);this._pannerNode["coneOuterAngle"]=toDegrees(outerAngle)}if(this._pannerConeParams[2]!==outerGain){this._pannerConeParams[2]=outerGain;this._pannerNode["coneOuterGain"]=
outerGain}}SetPanXYZA(x,y,z,angle){if(!this._isPannerEnabled)return;const pos=this._pannerPosition;const orient=this._pannerOrientation;const cosa=Math.cos(angle);const sina=Math.sin(angle);if(pos[0]!==x||pos[1]!==y||pos[2]!==z){pos[0]=x;pos[1]=y;pos[2]=z;this._pannerNode["setPosition"](...pos)}if(orient[0]!==cosa||orient[1]!==sina||orient[2]!==0){orient[0]=cosa;orient[1]=sina;orient[2]=0;this._pannerNode["setOrientation"](...orient)}}SetStereoPannerEnabled(e){e=!!e;if(this._isStereoPannerEnabled===
e)return;this._isStereoPannerEnabled=e;if(this._isStereoPannerEnabled){this.SetPannerEnabled(false);this._stereoPannerNode=this.GetAudioContext()["createStereoPanner"]();this._gainNode["disconnect"]();this._gainNode["connect"](this._stereoPannerNode);this._stereoPannerNode["connect"](this.GetDestinationNode())}else{this._stereoPannerNode["disconnect"]();this._stereoPannerNode=null;this._gainNode["disconnect"]();this._gainNode["connect"](this.GetDestinationNode())}}SetStereoPan(p){if(!this._isStereoPannerEnabled)return;
if(this._stereoPan===p)return;this._stereoPannerNode["pan"]["value"]=p;this._stereoPan=p}SetUID(uid){this._instUid=uid}GetUID(){return this._instUid}GetResumePosition(){}Reconnect(toNode){const outNode=this._stereoPannerNode||this._pannerNode||this._gainNode;outNode["disconnect"]();outNode["connect"](toNode)}GetState(){return{"aiid":this.GetAiId(),"tags":this._tags,"duration":this.GetDuration(),"volume":this._fadeEndTime===-1?this._volume:this._gainNode["gain"]["value"],"isPlaying":this.IsPlaying(),
"playbackTime":this.GetPlaybackTime(),"playbackRate":this.GetPlaybackRate(),"uid":this._instUid,"bufferOriginalUrl":this.GetOriginalUrl(),"bufferUrl":"","bufferType":this.GetContentType(),"isMusic":this.IsMusic(),"isLooping":this.IsLooping(),"isMuted":this.IsMuted(),"resumePosition":this.GetResumePosition(),"pan":this.GetPanState(),"stereoPan":this.GetStereoPanState()}}_LoadAdditionalState(d){this.SetPlaybackRate(d["playbackRate"]);this.SetMuted(d["isMuted"])}GetPanState(){if(!this._pannerNode)return null;
const pn=this._pannerNode;return{"pos":this._pannerPosition,"orient":this._pannerOrientation,"cia":pn["coneInnerAngle"],"coa":pn["coneOuterAngle"],"cog":pn["coneOuterGain"],"uid":this._instUid}}LoadPanState(d){if(!d){this.SetPannerEnabled(false);return}this.SetPannerEnabled(true);const pn=this._pannerNode;const panPos=d["pos"];this._pannerPosition[0]=panPos[0];this._pannerPosition[1]=panPos[1];this._pannerPosition[2]=panPos[2];const panOrient=d["orient"];this._pannerOrientation[0]=panOrient[0];this._pannerOrientation[1]=
panOrient[1];this._pannerOrientation[2]=panOrient[2];pn["setPosition"](...this._pannerPosition);pn["setOrientation"](...this._pannerOrientation);this._pannerConeParams[0]=d["cia"];this._pannerConeParams[1]=d["coa"];this._pannerConeParams[2]=d["cog"];pn["coneInnerAngle"]=d["cia"];pn["coneOuterAngle"]=d["coa"];pn["coneOuterGain"]=d["cog"];this._instUid=d["uid"]}GetStereoPanState(){if(this._stereoPannerNode)return this._stereoPan;else return null}LoadStereoPanState(p){if(typeof p!=="number"){this.SetStereoPannerEnabled(false);
return}this.SetStereoPannerEnabled(true);this.SetStereoPan(p)}}};
'use strict';{self.C3Html5AudioInstance=class C3Html5AudioInstance extends self.C3AudioInstance{constructor(audioDomHandler,buffer,tags){super(audioDomHandler,buffer,tags);this._buffer.GetOutputNode()["connect"](this._gainNode);this._buffer.onended=()=>this._OnEnded()}Release(){this.Stop();this._buffer.GetOutputNode()["disconnect"]();super.Release()}GetAudioElement(){return this._buffer.GetAudioElement()}_OnEnded(){this._isStopped=true;this._instUid=-1;this._audioDomHandler.PostTrigger("ended",this._tags,
this._aiId)}HasEnded(){return this.GetAudioElement()["ended"]}CanBeRecycled(){if(this._isStopped)return true;return this.HasEnded()}GetPlaybackTime(){let ret=this.GetAudioElement()["currentTime"];if(!this._isLooping)ret=Math.min(ret,this.GetDuration());return ret}Play(isLooping,vol,seekPos,scheduledTime){const audioElem=this.GetAudioElement();if(audioElem.playbackRate!==1)audioElem.playbackRate=1;if(audioElem.loop!==isLooping)audioElem.loop=isLooping;this.SetVolume(vol);if(audioElem.muted)audioElem.muted=
false;if(audioElem.currentTime!==seekPos)try{audioElem.currentTime=seekPos}catch(err){console.warn(`[Construct] Exception seeking audio '${this._buffer.GetUrl()}' to position '${seekPos}': `,err)}this._audioDomHandler.TryPlayMedia(audioElem);this._isStopped=false;this._isPaused=false;this._isLooping=isLooping;this._playbackRate=1}Stop(){const audioElem=this.GetAudioElement();if(!audioElem.paused)audioElem.pause();this._audioDomHandler.RemovePendingPlay(audioElem);this._isStopped=true;this._isPaused=
false;this._instUid=-1}Pause(){if(this._isPaused||this._isStopped||this.HasEnded())return;const audioElem=this.GetAudioElement();if(!audioElem.paused)audioElem.pause();this._audioDomHandler.RemovePendingPlay(audioElem);this._isPaused=true}Resume(){if(!this._isPaused||this._isStopped||this.HasEnded())return;this._audioDomHandler.TryPlayMedia(this.GetAudioElement());this._isPaused=false}_UpdateMuted(){this.GetAudioElement().muted=this._isMuted||this.IsSilent()}SetLooping(l){l=!!l;if(this._isLooping===
l)return;this._isLooping=l;this.GetAudioElement().loop=l}_UpdatePlaybackRate(){let r=this._playbackRate;if(this._isTimescaled)r*=this._audioDomHandler.GetTimeScale();try{this.GetAudioElement()["playbackRate"]=r}catch(err){console.warn(`[Construct] Unable to set playback rate '${r}':`,err)}}Seek(pos){if(this._isStopped||this.HasEnded())return;try{this.GetAudioElement()["currentTime"]=pos}catch(err){console.warn(`[Construct] Error seeking audio to '${pos}': `,err)}}GetResumePosition(){return this.GetPlaybackTime()}SetSuspended(s){if(s)if(this.IsPlaying()){this.GetAudioElement()["pause"]();
this._resumeMe=true}else this._resumeMe=false;else if(this._resumeMe){this._audioDomHandler.TryPlayMedia(this.GetAudioElement());this._resumeMe=false}}}};
'use strict';{self.C3WebAudioInstance=class C3WebAudioInstance extends self.C3AudioInstance{constructor(audioDomHandler,buffer,tags){super(audioDomHandler,buffer,tags);this._bufferSource=null;this._onended_handler=e=>this._OnEnded(e);this._hasPlaybackEnded=true;this._activeSource=null;this._playStartTime=0;this._playFromSeekPos=0;this._resumePosition=0;this._muteVol=1}Release(){this.Stop();this._ReleaseBufferSource();this._onended_handler=null;super.Release()}_ReleaseBufferSource(){if(this._bufferSource){this._bufferSource["onended"]=
null;this._bufferSource["disconnect"]();this._bufferSource["buffer"]=null}this._bufferSource=null;this._activeSource=null}_OnEnded(e){if(this._isPaused||this._resumeMe)return;if(e.target!==this._activeSource)return;this._hasPlaybackEnded=true;this._isStopped=true;this._instUid=-1;this._ReleaseBufferSource();this._audioDomHandler.PostTrigger("ended",this._tags,this._aiId)}HasEnded(){if(!this._isStopped&&this._bufferSource&&this._bufferSource["loop"])return false;if(this._isPaused)return false;return this._hasPlaybackEnded}CanBeRecycled(){if(!this._bufferSource||
this._isStopped)return true;return this.HasEnded()}GetPlaybackTime(){let ret=0;if(this._isPaused)ret=this._resumePosition;else ret=this._playFromSeekPos+(this.GetCurrentTime()-this._playStartTime)*this._playbackRate;if(!this._isLooping)ret=Math.min(ret,this.GetDuration());return ret}Play(isLooping,vol,seekPos,scheduledTime){this._muteVol=1;this.SetVolume(vol);this._ReleaseBufferSource();this._bufferSource=this.GetAudioContext()["createBufferSource"]();this._bufferSource["buffer"]=this._buffer.GetAudioBuffer();
this._bufferSource["connect"](this._gainNode);this._activeSource=this._bufferSource;this._bufferSource["onended"]=this._onended_handler;this._bufferSource["loop"]=isLooping;this._bufferSource["start"](scheduledTime,seekPos);this._hasPlaybackEnded=false;this._isStopped=false;this._isPaused=false;this._isLooping=isLooping;this._playbackRate=1;this._playStartTime=this.GetCurrentTime();this._playFromSeekPos=seekPos}Stop(){if(this._bufferSource)try{this._bufferSource["stop"](0)}catch(err){}this._isStopped=
true;this._isPaused=false;this._instUid=-1}Pause(){if(this._isPaused||this._isStopped||this.HasEnded())return;this._resumePosition=this.GetPlaybackTime();if(this._isLooping)this._resumePosition%=this.GetDuration();this._isPaused=true;this._bufferSource["stop"](0)}Resume(){if(!this._isPaused||this._isStopped||this.HasEnded())return;this._ReleaseBufferSource();this._bufferSource=this.GetAudioContext()["createBufferSource"]();this._bufferSource["buffer"]=this._buffer.GetAudioBuffer();this._bufferSource["connect"](this._gainNode);
this._activeSource=this._bufferSource;this._bufferSource["onended"]=this._onended_handler;this._bufferSource["loop"]=this._isLooping;this._UpdateVolume();this._UpdatePlaybackRate();this._bufferSource["start"](0,this._resumePosition);this._playStartTime=this.GetCurrentTime();this._playFromSeekPos=this._resumePosition;this._isPaused=false}GetOutputVolume(){return super.GetOutputVolume()*this._muteVol}_UpdateMuted(){this._muteVol=this._isMuted||this.IsSilent()?0:1;this._UpdateVolume()}SetLooping(l){l=
!!l;if(this._isLooping===l)return;this._isLooping=l;if(this._bufferSource)this._bufferSource["loop"]=l}_UpdatePlaybackRate(){let r=this._playbackRate;if(this._isTimescaled)r*=this._audioDomHandler.GetTimeScale();if(this._bufferSource)this._bufferSource["playbackRate"]["value"]=r}Seek(pos){if(this._isStopped||this.HasEnded())return;if(this._isPaused)this._resumePosition=pos;else{this.Pause();this._resumePosition=pos;this.Resume()}}GetResumePosition(){return this._resumePosition}SetSuspended(s){if(s)if(this.IsPlaying()){this._resumeMe=
true;this._resumePosition=this.GetPlaybackTime();if(this._isLooping)this._resumePosition%=this.GetDuration();this._bufferSource["stop"](0)}else this._resumeMe=false;else if(this._resumeMe){this._ReleaseBufferSource();this._bufferSource=this.GetAudioContext()["createBufferSource"]();this._bufferSource["buffer"]=this._buffer.GetAudioBuffer();this._bufferSource["connect"](this._gainNode);this._activeSource=this._bufferSource;this._bufferSource["onended"]=this._onended_handler;this._bufferSource["loop"]=
this._isLooping;this._UpdateVolume();this._UpdatePlaybackRate();this._bufferSource["start"](0,this._resumePosition);this._playStartTime=this.GetCurrentTime();this._playFromSeekPos=this._resumePosition;this._resumeMe=false}}_LoadAdditionalState(d){super._LoadAdditionalState(d);this._resumePosition=d["resumePosition"]}}};
'use strict';{class AudioFXBase{constructor(audioDomHandler){this._audioDomHandler=audioDomHandler;this._audioContext=audioDomHandler.GetAudioContext();this._index=-1;this._tag="";this._type="";this._params=null}Release(){this._audioContext=null}_SetIndex(i){this._index=i}GetIndex(){return this._index}_SetTag(t){this._tag=t}GetTag(){return this._tag}CreateGain(){return this._audioContext["createGain"]()}GetInputNode(){}ConnectTo(node){}SetAudioParam(ap,value,ramp,time){ap["cancelScheduledValues"](0);
if(time===0){ap["value"]=value;return}const curTime=this._audioContext["currentTime"];time+=curTime;switch(ramp){case 0:ap["setValueAtTime"](value,time);break;case 1:ap["setValueAtTime"](ap["value"],curTime);ap["linearRampToValueAtTime"](value,time);break;case 2:ap["setValueAtTime"](ap["value"],curTime);ap["exponentialRampToValueAtTime"](value,time);break}}GetState(){return{"type":this._type,"tag":this._tag,"params":this._params}}}self.C3AudioFilterFX=class C3AudioFilterFX extends AudioFXBase{constructor(audioDomHandler,
type,freq,detune,q,gain,mix){super(audioDomHandler);this._type="filter";this._params=[type,freq,detune,q,gain,mix];this._inputNode=this.CreateGain();this._wetNode=this.CreateGain();this._wetNode["gain"]["value"]=mix;this._dryNode=this.CreateGain();this._dryNode["gain"]["value"]=1-mix;this._filterNode=this._audioContext["createBiquadFilter"]();this._filterNode["type"]=type;this._filterNode["frequency"]["value"]=freq;this._filterNode["detune"]["value"]=detune;this._filterNode["Q"]["value"]=q;this._filterNode["gain"]["vlaue"]=
gain;this._inputNode["connect"](this._filterNode);this._inputNode["connect"](this._dryNode);this._filterNode["connect"](this._wetNode)}Release(){this._inputNode["disconnect"]();this._filterNode["disconnect"]();this._wetNode["disconnect"]();this._dryNode["disconnect"]();super.Release()}ConnectTo(node){this._wetNode["disconnect"]();this._wetNode["connect"](node);this._dryNode["disconnect"]();this._dryNode["connect"](node)}GetInputNode(){return this._inputNode}SetParam(param,value,ramp,time){switch(param){case 0:value=
Math.max(Math.min(value/100,1),0);this._params[5]=value;this.SetAudioParam(this._wetNode["gain"],value,ramp,time);this.SetAudioParam(this._dryNode["gain"],1-value,ramp,time);break;case 1:this._params[1]=value;this.SetAudioParam(this._filterNode["frequency"],value,ramp,time);break;case 2:this._params[2]=value;this.SetAudioParam(this._filterNode["detune"],value,ramp,time);break;case 3:this._params[3]=value;this.SetAudioParam(this._filterNode["Q"],value,ramp,time);break;case 4:this._params[4]=value;
this.SetAudioParam(this._filterNode["gain"],value,ramp,time);break}}};self.C3AudioDelayFX=class C3AudioDelayFX extends AudioFXBase{constructor(audioDomHandler,delayTime,delayGain,mix){super(audioDomHandler);this._type="delay";this._params=[delayTime,delayGain,mix];this._inputNode=this.CreateGain();this._wetNode=this.CreateGain();this._wetNode["gain"]["value"]=mix;this._dryNode=this.CreateGain();this._dryNode["gain"]["value"]=1-mix;this._mainNode=this.CreateGain();this._delayNode=this._audioContext["createDelay"](delayTime);
this._delayNode["delayTime"]["value"]=delayTime;this._delayGainNode=this.CreateGain();this._delayGainNode["gain"]["value"]=delayGain;this._inputNode["connect"](this._mainNode);this._inputNode["connect"](this._dryNode);this._mainNode["connect"](this._wetNode);this._mainNode["connect"](this._delayNode);this._delayNode["connect"](this._delayGainNode);this._delayGainNode["connect"](this._mainNode)}Release(){this._inputNode["disconnect"]();this._wetNode["disconnect"]();this._dryNode["disconnect"]();this._mainNode["disconnect"]();
this._delayNode["disconnect"]();this._delayGainNode["disconnect"]();super.Release()}ConnectTo(node){this._wetNode["disconnect"]();this._wetNode["connect"](node);this._dryNode["disconnect"]();this._dryNode["connect"](node)}GetInputNode(){return this._inputNode}SetParam(param,value,ramp,time){const DbToLinear=self.AudioDOMHandler.DbToLinear;switch(param){case 0:value=Math.max(Math.min(value/100,1),0);this._params[2]=value;this.SetAudioParam(this._wetNode["gain"],value,ramp,time);this.SetAudioParam(this._dryNode["gain"],
1-value,ramp,time);break;case 4:this._params[1]=DbToLinear(value);this.SetAudioParam(this._delayGainNode["gain"],DbToLinear(value),ramp,time);break;case 5:this._params[0]=value;this.SetAudioParam(this._delayNode["delayTime"],value,ramp,time);break}}};self.C3AudioConvolveFX=class C3AudioConvolveFX extends AudioFXBase{constructor(audioDomHandler,buffer,normalize,mix){super(audioDomHandler);this._type="convolution";this._params=[normalize,mix];this._bufferOriginalUrl="";this._bufferUrl="";this._bufferType=
"";this._inputNode=this.CreateGain();this._wetNode=this.CreateGain();this._wetNode["gain"]["value"]=mix;this._dryNode=this.CreateGain();this._dryNode["gain"]["value"]=1-mix;this._convolveNode=this._audioContext["createConvolver"]();this._convolveNode["normalize"]=normalize;this._convolveNode["buffer"]=buffer;this._inputNode["connect"](this._convolveNode);this._inputNode["connect"](this._dryNode);this._convolveNode["connect"](this._wetNode)}Release(){this._inputNode["disconnect"]();this._convolveNode["disconnect"]();
this._wetNode["disconnect"]();this._dryNode["disconnect"]();super.Release()}ConnectTo(node){this._wetNode["disconnect"]();this._wetNode["connect"](node);this._dryNode["disconnect"]();this._dryNode["connect"](node)}GetInputNode(){return this._inputNode}SetParam(param,value,ramp,time){switch(param){case 0:value=Math.max(Math.min(value/100,1),0);this._params[1]=value;this.SetAudioParam(this._wetNode["gain"],value,ramp,time);this.SetAudioParam(this._dryNode["gain"],1-value,ramp,time);break}}_SetBufferInfo(bufferOriginalUrl,
bufferUrl,bufferType){this._bufferOriginalUrl=bufferOriginalUrl;this._bufferUrl=bufferUrl;this._bufferType=bufferType}GetState(){const ret=super.GetState();ret["bufferOriginalUrl"]=this._bufferOriginalUrl;ret["bufferUrl"]="";ret["bufferType"]=this._bufferType;return ret}};self.C3AudioFlangerFX=class C3AudioFlangerFX extends AudioFXBase{constructor(audioDomHandler,delay,modulation,freq,feedback,mix){super(audioDomHandler);this._type="flanger";this._params=[delay,modulation,freq,feedback,mix];this._inputNode=
this.CreateGain();this._dryNode=this.CreateGain();this._dryNode["gain"]["value"]=1-mix/2;this._wetNode=this.CreateGain();this._wetNode["gain"]["value"]=mix/2;this._feedbackNode=this.CreateGain();this._feedbackNode["gain"]["value"]=feedback;this._delayNode=this._audioContext["createDelay"](delay+modulation);this._delayNode["delayTime"]["value"]=delay;this._oscNode=this._audioContext["createOscillator"]();this._oscNode["frequency"]["value"]=freq;this._oscGainNode=this.CreateGain();this._oscGainNode["gain"]["value"]=
modulation;this._inputNode["connect"](this._delayNode);this._inputNode["connect"](this._dryNode);this._delayNode["connect"](this._wetNode);this._delayNode["connect"](this._feedbackNode);this._feedbackNode["connect"](this._delayNode);this._oscNode["connect"](this._oscGainNode);this._oscGainNode["connect"](this._delayNode["delayTime"]);this._oscNode["start"](0)}Release(){this._oscNode["stop"](0);this._inputNode["disconnect"]();this._delayNode["disconnect"]();this._oscNode["disconnect"]();this._oscGainNode["disconnect"]();
this._dryNode["disconnect"]();this._wetNode["disconnect"]();this._feedbackNode["disconnect"]();super.Release()}ConnectTo(node){this._wetNode["disconnect"]();this._wetNode["connect"](node);this._dryNode["disconnect"]();this._dryNode["connect"](node)}GetInputNode(){return this._inputNode}SetParam(param,value,ramp,time){switch(param){case 0:value=Math.max(Math.min(value/100,1),0);this._params[4]=value;this.SetAudioParam(this._wetNode["gain"],value/2,ramp,time);this.SetAudioParam(this._dryNode["gain"],
1-value/2,ramp,time);break;case 6:this._params[1]=value/1E3;this.SetAudioParam(this._oscGainNode["gain"],value/1E3,ramp,time);break;case 7:this._params[2]=value;this.SetAudioParam(this._oscNode["frequency"],value,ramp,time);break;case 8:this._params[3]=value/100;this.SetAudioParam(this._feedbackNode["gain"],value/100,ramp,time);break}}};self.C3AudioPhaserFX=class C3AudioPhaserFX extends AudioFXBase{constructor(audioDomHandler,freq,detune,q,modulation,modfreq,mix){super(audioDomHandler);this._type=
"phaser";this._params=[freq,detune,q,modulation,modfreq,mix];this._inputNode=this.CreateGain();this._dryNode=this.CreateGain();this._dryNode["gain"]["value"]=1-mix/2;this._wetNode=this.CreateGain();this._wetNode["gain"]["value"]=mix/2;this._filterNode=this._audioContext["createBiquadFilter"]();this._filterNode["type"]="allpass";this._filterNode["frequency"]["value"]=freq;this._filterNode["detune"]["value"]=detune;this._filterNode["Q"]["value"]=q;this._oscNode=this._audioContext["createOscillator"]();
this._oscNode["frequency"]["value"]=modfreq;this._oscGainNode=this.CreateGain();this._oscGainNode["gain"]["value"]=modulation;this._inputNode["connect"](this._filterNode);this._inputNode["connect"](this._dryNode);this._filterNode["connect"](this._wetNode);this._oscNode["connect"](this._oscGainNode);this._oscGainNode["connect"](this._filterNode["frequency"]);this._oscNode["start"](0)}Release(){this._oscNode["stop"](0);this._inputNode["disconnect"]();this._filterNode["disconnect"]();this._oscNode["disconnect"]();
this._oscGainNode["disconnect"]();this._dryNode["disconnect"]();this._wetNode["disconnect"]();super.Release()}ConnectTo(node){this._wetNode["disconnect"]();this._wetNode["connect"](node);this._dryNode["disconnect"]();this._dryNode["connect"](node)}GetInputNode(){return this._inputNode}SetParam(param,value,ramp,time){switch(param){case 0:value=Math.max(Math.min(value/100,1),0);this._params[5]=value;this.SetAudioParam(this._wetNode["gain"],value/2,ramp,time);this.SetAudioParam(this._dryNode["gain"],
1-value/2,ramp,time);break;case 1:this._params[0]=value;this.SetAudioParam(this._filterNode["frequency"],value,ramp,time);break;case 2:this._params[1]=value;this.SetAudioParam(this._filterNode["detune"],value,ramp,time);break;case 3:this._params[2]=value;this.SetAudioParam(this._filterNode["Q"],value,ramp,time);break;case 6:this._params[3]=value;this.SetAudioParam(this._oscGainNode["gain"],value,ramp,time);break;case 7:this._params[4]=value;this.SetAudioParam(this._oscNode["frequency"],value,ramp,
time);break}}};self.C3AudioGainFX=class C3AudioGainFX extends AudioFXBase{constructor(audioDomHandler,g){super(audioDomHandler);this._type="gain";this._params=[g];this._node=this.CreateGain();this._node["gain"]["value"]=g}Release(){this._node["disconnect"]();super.Release()}ConnectTo(node){this._node["disconnect"]();this._node["connect"](node)}GetInputNode(){return this._node}SetParam(param,value,ramp,time){const DbToLinear=self.AudioDOMHandler.DbToLinear;switch(param){case 4:this._params[0]=DbToLinear(value);
this.SetAudioParam(this._node["gain"],DbToLinear(value),ramp,time);break}}};self.C3AudioStereoPanFX=class C3AudioStereoPanFX extends AudioFXBase{constructor(audioDomHandler,p){super(audioDomHandler);this._type="stereopan";this._params=[p];this._node=this._audioContext["createStereoPanner"]();this._node["pan"]["value"]=p}Release(){this._node["disconnect"]();super.Release()}ConnectTo(node){this._node["disconnect"]();this._node["connect"](node)}GetInputNode(){return this._node}SetParam(param,value,ramp,
time){value=Math.min(Math.max(value/100,-1),1);switch(param){case 9:this._params[0]=value;this.SetAudioParam(this._node["pan"],value,ramp,time);break}}};self.C3AudioTremoloFX=class C3AudioTremoloFX extends AudioFXBase{constructor(audioDomHandler,freq,mix){super(audioDomHandler);this._type="tremolo";this._params=[freq,mix];this._node=this.CreateGain();this._node["gain"]["value"]=1-mix/2;this._oscNode=this._audioContext["createOscillator"]();this._oscNode["frequency"]["value"]=freq;this._oscGainNode=
this.CreateGain();this._oscGainNode["gain"]["value"]=mix/2;this._oscNode["connect"](this._oscGainNode);this._oscGainNode["connect"](this._node["gain"]);this._oscNode["start"](0)}Release(){this._oscNode["stop"](0);this._oscNode["disconnect"]();this._oscGainNode["disconnect"]();this._node["disconnect"]();super.Release()}ConnectTo(node){this._node["disconnect"]();this._node["connect"](node)}GetInputNode(){return this._node}SetParam(param,value,ramp,time){switch(param){case 0:value=Math.max(Math.min(value/
100,1),0);this._params[1]=value;this.SetAudioParam(this._node["gain"],1-value/2,ramp,time);this.SetAudioParam(this._oscGainNode["gain"],value/2,ramp,time);break;case 7:this._params[0]=value;this.SetAudioParam(this._oscNode["frequency"],value,ramp,time);break}}};self.C3AudioRingModFX=class C3AudioRingModFX extends AudioFXBase{constructor(audioDomHandler,freq,mix){super(audioDomHandler);this._type="ringmod";this._params=[freq,mix];this._inputNode=this.CreateGain();this._wetNode=this.CreateGain();this._wetNode["gain"]["value"]=
mix;this._dryNode=this.CreateGain();this._dryNode["gain"]["value"]=1-mix;this._ringNode=this.CreateGain();this._ringNode["gain"]["value"]=0;this._oscNode=this._audioContext["createOscillator"]();this._oscNode["frequency"]["value"]=freq;this._oscNode["connect"](this._ringNode["gain"]);this._oscNode["start"](0);this._inputNode["connect"](this._ringNode);this._inputNode["connect"](this._dryNode);this._ringNode["connect"](this._wetNode)}Release(){this._oscNode["stop"](0);this._oscNode["disconnect"]();
this._ringNode["disconnect"]();this._inputNode["disconnect"]();this._wetNode["disconnect"]();this._dryNode["disconnect"]();super.Release()}ConnectTo(node){this._wetNode["disconnect"]();this._wetNode["connect"](node);this._dryNode["disconnect"]();this._dryNode["connect"](node)}GetInputNode(){return this._inputNode}SetParam(param,value,ramp,time){switch(param){case 0:value=Math.max(Math.min(value/100,1),0);this._params[1]=value;this.SetAudioParam(this._wetNode["gain"],value,ramp,time);this.SetAudioParam(this._dryNode["gain"],
1-value,ramp,time);break;case 7:this._params[0]=value;this.SetAudioParam(this._oscNode["frequency"],value,ramp,time);break}}};self.C3AudioDistortionFX=class C3AudioDistortionFX extends AudioFXBase{constructor(audioDomHandler,threshold,headroom,drive,makeupgain,mix){super(audioDomHandler);this._type="distortion";this._params=[threshold,headroom,drive,makeupgain,mix];this._inputNode=this.CreateGain();this._preGain=this.CreateGain();this._postGain=this.CreateGain();this._SetDrive(drive,makeupgain);this._wetNode=
this.CreateGain();this._wetNode["gain"]["value"]=mix;this._dryNode=this.CreateGain();this._dryNode["gain"]["value"]=1-mix;this._waveShaper=this._audioContext["createWaveShaper"]();this._curve=new Float32Array(65536);this._GenerateColortouchCurve(threshold,headroom);this._waveShaper.curve=this._curve;this._inputNode["connect"](this._preGain);this._inputNode["connect"](this._dryNode);this._preGain["connect"](this._waveShaper);this._waveShaper["connect"](this._postGain);this._postGain["connect"](this._wetNode)}Release(){this._inputNode["disconnect"]();
this._preGain["disconnect"]();this._waveShaper["disconnect"]();this._postGain["disconnect"]();this._wetNode["disconnect"]();this._dryNode["disconnect"]();super.Release()}_SetDrive(drive,makeupgain){if(drive<.01)drive=.01;this._preGain["gain"]["value"]=drive;this._postGain["gain"]["value"]=Math.pow(1/drive,.6)*makeupgain}_GenerateColortouchCurve(threshold,headroom){const n=65536;const n2=n/2;for(let i=0;i<n2;++i){let x=i/n2;x=this._Shape(x,threshold,headroom);this._curve[n2+i]=x;this._curve[n2-i-1]=
-x}}_Shape(x,threshold,headroom){const maximum=1.05*headroom*threshold;const kk=maximum-threshold;const sign=x<0?-1:+1;const absx=x<0?-x:x;let shapedInput=absx<threshold?absx:threshold+kk*self.AudioDOMHandler.e4(absx-threshold,1/kk);shapedInput*=sign;return shapedInput}ConnectTo(node){this._wetNode["disconnect"]();this._wetNode["connect"](node);this._dryNode["disconnect"]();this._dryNode["connect"](node)}GetInputNode(){return this._inputNode}SetParam(param,value,ramp,time){switch(param){case 0:value=
Math.max(Math.min(value/100,1),0);this._params[4]=value;this.SetAudioParam(this._wetNode["gain"],value,ramp,time);this.SetAudioParam(this._dryNode["gain"],1-value,ramp,time);break}}};self.C3AudioCompressorFX=class C3AudioCompressorFX extends AudioFXBase{constructor(audioDomHandler,threshold,knee,ratio,attack,release){super(audioDomHandler);this._type="compressor";this._params=[threshold,knee,ratio,attack,release];this._node=this._audioContext["createDynamicsCompressor"]();this._node["threshold"]["value"]=
threshold;this._node["knee"]["value"]=knee;this._node["ratio"]["value"]=ratio;this._node["attack"]["value"]=attack;this._node["release"]["value"]=release}Release(){this._node["disconnect"]();super.Release()}ConnectTo(node){this._node["disconnect"]();this._node["connect"](node)}GetInputNode(){return this._node}SetParam(param,value,ramp,time){}};self.C3AudioAnalyserFX=class C3AudioAnalyserFX extends AudioFXBase{constructor(audioDomHandler,fftSize,smoothing){super(audioDomHandler);this._type="analyser";
this._params=[fftSize,smoothing];this._node=this._audioContext["createAnalyser"]();this._node["fftSize"]=fftSize;this._node["smoothingTimeConstant"]=smoothing;this._freqBins=new Float32Array(this._node["frequencyBinCount"]);this._signal=new Uint8Array(fftSize);this._peak=0;this._rms=0;this._audioDomHandler._AddAnalyser(this)}Release(){this._audioDomHandler._RemoveAnalyser(this);this._node["disconnect"]();super.Release()}Tick(){this._node["getFloatFrequencyData"](this._freqBins);this._node["getByteTimeDomainData"](this._signal);
const fftSize=this._node["fftSize"];this._peak=0;let rmsSquaredSum=0;for(let i=0;i<fftSize;++i){let s=(this._signal[i]-128)/128;if(s<0)s=-s;if(this._peak<s)this._peak=s;rmsSquaredSum+=s*s}const LinearToDb=self.AudioDOMHandler.LinearToDb;this._peak=LinearToDb(this._peak);this._rms=LinearToDb(Math.sqrt(rmsSquaredSum/fftSize))}ConnectTo(node){this._node["disconnect"]();this._node["connect"](node)}GetInputNode(){return this._node}SetParam(param,value,ramp,time){}GetData(){return{"tag":this.GetTag(),"index":this.GetIndex(),
"peak":this._peak,"rms":this._rms,"binCount":this._node["frequencyBinCount"],"freqBins":this._freqBins}}}};
'use strict';{const DOM_COMPONENT_ID="touch";const HANDLER_CLASS=class TouchDOMHandler extends self.DOMHandler{constructor(iRuntime){super(iRuntime,DOM_COMPONENT_ID);this.AddRuntimeMessageHandler("request-permission",e=>this._OnRequestPermission(e))}async _OnRequestPermission(e){const type=e["type"];let result=true;if(type===0)result=await this._RequestOrientationPermission();else if(type===1)result=await this._RequestMotionPermission();this.PostToRuntime("permission-result",{"type":type,"result":result})}async _RequestOrientationPermission(){if(!self["DeviceOrientationEvent"]||
!self["DeviceOrientationEvent"]["requestPermission"])return true;try{const state=await self["DeviceOrientationEvent"]["requestPermission"]();return state==="granted"}catch(err){console.warn("[Touch] Failed to request orientation permission: ",err);return false}}async _RequestMotionPermission(){if(!self["DeviceMotionEvent"]||!self["DeviceMotionEvent"]["requestPermission"])return true;try{const state=await self["DeviceMotionEvent"]["requestPermission"]();return state==="granted"}catch(err){console.warn("[Touch] Failed to request motion permission: ",
err);return false}}};self.RuntimeInterface.AddDOMHandlerClass(HANDLER_CLASS)};
'use strict';{const DOM_COMPONENT_ID="mouse";const HANDLER_CLASS=class MouseDOMHandler extends self.DOMHandler{constructor(iRuntime){super(iRuntime,DOM_COMPONENT_ID);this.AddRuntimeMessageHandlers([["cursor",e=>this._OnChangeCursorStyle(e)],["request-pointer-lock",()=>this._OnRequestPointerLock()],["release-pointer-lock",()=>this._OnReleasePointerLock()]]);document.addEventListener("pointerlockchange",e=>this._OnPointerLockChange());document.addEventListener("pointerlockerror",e=>this._OnPointerLockError())}_OnChangeCursorStyle(e){document.documentElement.style.cursor=
e}_OnRequestPointerLock(){this._iRuntime.GetCanvas().requestPointerLock()}_OnReleasePointerLock(){document.exitPointerLock()}_OnPointerLockChange(){this.PostToRuntime("pointer-lock-change",{"has-pointer-lock":!!document.pointerLockElement})}_OnPointerLockError(){this.PostToRuntime("pointer-lock-error",{"has-pointer-lock":!!document.pointerLockElement})}};self.RuntimeInterface.AddDOMHandlerClass(HANDLER_CLASS)};


</script>

</div>
</body>
</html>
